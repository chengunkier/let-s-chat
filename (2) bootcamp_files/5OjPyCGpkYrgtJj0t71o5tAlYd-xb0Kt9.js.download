;/*FB_PKG_DELIM*/

__d("AdsToastCardDataProviderPlugin",[],(function(a,b,c,d,e,f){"use strict";a={initialState:[]};b=a;f["default"]=b}),66);
__d("AdsDataAtomShared",["cr:7267"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=b("cr:7267")}),98);
__d("AdsDataDispatchUtils",[],(function(a,b,c,d,e,f){"use strict";var g=Object.freeze([]);function h(a,b){return b.isDisabled||a.has(b.provider)?a:a.set(b.provider,b)}function a(a,b,c,d,e,f){return babelHelpers["extends"]({},d,{type:a,_dataReducers:b,_dataLoggers:c,_dispatchConvention:e,_dispatchModuleID:f==null?void 0:f.moduleID})}function b(a){return a._dataReducers?a._dataReducers:g}function c(a){return a._dataLoggers?a._dataLoggers:g}function d(a,b){return Array.from(b.reduce(h,a.reduce(h,new Map())).values())}function e(a){return a._dispatchConvention==="laminar"}function i(a){return a.actionType}f.mergeParameters=a;f.getDataReducers=b;f.getDataLoggers=c;f.mergeReducers=d;f.shouldSkipLegacyFluxDispatch=e;f.getActionType=i}),66);
__d("LaminarAction",["AdsDataAtomShared","AdsDataDispatchUtils","QuickPerformanceLogger","Random","filterNulls","gkx","qpl","setInterval"],(function(a,b,c,d,e,f,g){"use strict";var h;b={"adsmanager.facebook.com":10,"business.facebook.com":10};f=(e=b[window.location.hostname])!=null?e:1;b=c("Random").coinflip(f)&&c("gkx")("21048");var i=b?new Set():null,j=b?new Set():null;i!=null&&j!=null&&c("setInterval")(function(){if(i.size>0){for(var a=i,b=Array.isArray(a),d=0,a=b?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(b){if(d>=a.length)break;e=a[d++]}else{d=a.next();if(d.done)break;e=d.value}e=e;j.add(e)}(h||(h=c("QuickPerformanceLogger"))).markEvent(c("qpl")._(41486318,"268"),"laminar_actions_dispatched",7,{annotations:{string:{hostname:window.location.hostname,path_prefix:window.location.pathname.split("/")[1]},string_array:{dispatched_actions:Array.from(i)}}});i.clear()}},2*60*1e3);function a(a,b,e,f){var g=function(g,h){var k=c("filterNulls")(a()),l=c("filterNulls")(b());j!=null&&!j.has(e)&&(i==null?void 0:i.add(e));c("AdsDataAtomShared").dispatchAction(d("AdsDataDispatchUtils").mergeParameters(e,k,l,g,f,h),h)};return{dispatch:g,actionType:e}}g.create=a}),98);
__d("AdsDataPluginsInternalUtils",[],(function(a,b,c,d,e,f){"use strict";function a(a){var b=a,c;return function(){b&&(c=b(),b=null);return c}}f.memoize=a}),66);
__d("LaminarExperimentalSelector",["AdsDataAtomShared","AdsDataPluginsInternalUtils"],(function(a,b,c,d,e,f,g){"use strict";function h(a){var b=new Set();for(var c in a)for(var d=a[c].providers,e=Array.isArray(d),f=0,d=e?d:d[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var g;if(e){if(f>=d.length)break;g=d[f++]}else{f=d.next();if(f.done)break;g=f.value}g=g;b.add(g)}return Array.from(b)}function i(a){var b=new Set();for(var c in a)for(var d=a[c].toFluxSelector().getStores(),e=Array.isArray(d),f=0,d=e?d:d[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var g;if(e){if(f>=d.length)break;g=d[f++]}else{f=d.next();if(f.done)break;g=f.value}g=g;b.add(g)}return Array.from(b)}function j(a,b,c){var d={};for(var e in a)d[e]=a[e].select(b,c);return d}function k(a,b){var c=Object.keys(a);if(c.length!==Object.keys(b).length)return!1;for(var d=0;d<c.length;d++){var e=c[d];if(!Object.prototype.hasOwnProperty.call(b,e)||a[e]!==b[e])return!1}return!0}function a(a,b){var e=null,f=null,g=function(c,d){c=j(a,c,d);(!f||!k(c,f))&&(e=b(c),f=c);return e},l=function(a){return g(c("AdsDataAtomShared").getAlteredState(),a)},m=Object.assign(l,{providers:h(a),select:g,toFluxSelector:d("AdsDataPluginsInternalUtils").memoize(function(){return Object.assign(function(){return m(c("AdsDataAtomShared").getAlteredState())},{getStores:function(){return i(a)},isGetStoresStatic:!0,isGetStoresPure:!0,rawSelectFn:function(){return m(c("AdsDataAtomShared").getAlteredState())}})})});return m}g.create=a}),98);
__d("AdsFluxCurrentContainer",[],(function(a,b,c,d,e,f){"use strict";var g=null;function a(){return g}function b(a){g=a}f.getCurrentContainer=a;f.setCurrentContainer=b}),66);
__d("LaminarCurrentContainer",[],(function(a,b,c,d,e,f){"use strict";var g=null;function a(){return g}function b(a){g=a}f.getCurrentContainer=a;f.setCurrentContainer=b}),66);
__d("LaminarReactHooks",["AdsDataAtomShared","AdsFluxCurrentContainer","FluxContainerNameUtils","LaminarCurrentContainer","react","useSubscriptionValue","useUnsafeRef_DEPRECATED"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=(i||(i=d("react"))).c,k=i,l=k.useCallback,m=k.useEffect,n=k.useMemo,o=k.useRef,p="laminarContainer(unknown)";function a(a){var b=j(9),d=a.provider,e,f;b[0]!==a?(e=function(b){b=a();return b},f=[a],b[0]=a,b[1]=e,b[2]=f):(e=b[1],f=b[2]);e=l(e,f);var g;b[3]!==d?(f=function(a){var b=c("AdsDataAtomShared").addListener(d,a);return function(){return b.remove()}},g=[d],b[3]=d,b[4]=f,b[5]=g):(f=b[4],g=b[5]);f=l(f,g);b[6]!==e||b[7]!==f?(g={getCurrentValue:e,subscribe:f},b[6]=e,b[7]=f,b[8]=g):g=b[8];e=c("useSubscriptionValue")(g);return e}function b(a,b,e){var g,i=(g=(g=(g=e==null?void 0:e.containerName)!=null?g:a.displayName)!=null?g:a.name)!=null?g:p;function j(b){var f=(h||(h=c("useUnsafeRef_DEPRECATED")))(null),g=h(!0),j=o(null);m(function(){g.current&&(j.current=b)});var k=(e==null?void 0:e.isFluxContainer)===!0?d("AdsFluxCurrentContainer"):d("LaminarCurrentContainer");k.setCurrentContainer(i);var l=n(function(){var a=b.forwardedRef,c=babelHelpers.objectWithoutPropertiesLoose(b,["forwardedRef"]);return a===void 0?b:babelHelpers["extends"]({},c,{ref:a})},[b]);l=a(l);k.setCurrentContainer(null);g.current=f.current!==l;f.current=l;return l}j.displayName=j.name+" [from "+f.id+"]";d("FluxContainerNameUtils").nameContainer(j,i);j.displayName=i;g=function(a,b){return k.jsx(j,babelHelpers["extends"]({},a,{forwardedRef:b}))};g.displayName=i;g=k.forwardRef(g);g=k.memo(g,b);g.displayName=i;return g}g.useProvider=a;g.laminarContainer=b}),98);
__d("AdsSelectorUtils",["Promise","performanceNow"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=new Set(),k=0;function a(a){j.add(a)}function l(a,b){k+=1;var d=[],e=new Set();try{var f=j.size>0,g=f&&k===1;g=g?(i||(i=c("performanceNow")))():null;for(var a=a,h=Array.isArray(a),l=0,a=h?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var m;if(h){if(l>=a.length)break;m=a[l++]}else{l=a.next();if(l.done)break;m=l.value}m=m;m=m.getStores(b);if(m)for(var m=m,n=Array.isArray(m),o=0,m=n?m:m[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var p;if(n){if(o>=m.length)break;p=m[o++]}else{o=m.next();if(o.done)break;p=o.value}p=p;p!=null&&!e.has(p)&&(e.add(p),d.push(p))}}if(f){p=g!=null?(i||(i=c("performanceNow")))()-g:0;for(o=j,n=Array.isArray(o),m=0,o=n?o:o[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){if(n){if(m>=o.length)break;l=o[m++]}else{m=o.next();if(m.done)break;l=m.value}h=l;h(p)}}}finally{k-=1}return d}function d(a,b){return l(a,b).map(function(a){return a.getDispatchToken()})}function e(a,b){return l(a,b).some(function(a){return a.hasChanged()})}function f(a,c,d){return new(h||(h=b("Promise")))(function(b,e){var f=a.getStores(d).map(function(a){return a.addListener(i)}),g={loading:function(){return void 0},empty:function(){return void 0},loaded:function(a){h(),b(a)},error:function(a){h(),e(a)}};i();function h(){f.forEach(function(a){return a.remove()})}function i(){a(c).match(g)}})}function m(a,c,d){return new(h||(h=b("Promise")))(function(b,e){var f=a.getStores(d).map(function(a){return a.addListener(i)}),g={loading:function(){return void 0},empty:function(){return void 0},loaded:function(a){h(),b(a)},error:function(a){h(),e(a)}};i();function h(){f.forEach(function(a){return a.remove()})}function i(){a(c)(c).match(g)}})}g.__registerGetStoreDurationListener=a;g.getStores=l;g.getStoreDispatchTokens=d;g.hasAnyStoreChanged=e;g.loadObjectSelectorToPromise=f;g.loadFunctionObjectSelectorToPromise=m}),98);
__d("LaminarReducerWithFluxSelectors",["AdsDataAtomShared","AdsSelectorUtils"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b){return function(e,f){var g=Object.keys(a),i=g.map(function(b){return a[b]});c("AdsDataAtomShared").waitFor((h||(h=d("AdsSelectorUtils"))).getStoreDispatchTokens(i));i=g.reduce(function(b,c){return Object.assign(b,(b={},b[c]=a[c](),b))},{});return b(e,f,i)}}g["default"]=a}),98);
__d("AdsSelectorInstrumentation",["performanceNow"],(function(a,b,c,d,e,f,g){"use strict";var h,i=[];function a(a){i.push(a)}function b(a){i=i.filter(function(b){return b!==a})}function d(){if(i.length===0)return null;var a=(h||(h=c("performanceNow")))(),b=i.map(function(b){return b.selectorCall(a)});return function(a){var d=(h||(h=c("performanceNow")))();b.forEach(function(b){return b&&b(a,d)})}}g.inject=a;g.removeInstrumentation=b;g.onSelectorCall=d}),98);
__d("LRUKeyedCache",[],(function(a,b,c,d,e,f){"use strict";var g=1e3,h=function(a,b,c){this.next=null,this.prev=null,this.key=a,this.cacheVersion=b,this.value=c};a=function(){function a(a,b){b===void 0&&(b=g),this.cache=new Map(),this.cacheVersion=0,this.capacity=b,this.keyFunction=a,this.head=new h("head",this.cacheVersion,null),this.tail=new h("tail",this.cacheVersion,null),this.head.next=this.tail,this.tail.prev=this.head}var b=a.prototype;b.set=function(a,b){a=this.keyFunction(a);var c=this.$1(a);c==null?(c=new h(a,this.cacheVersion,b),this.cache.set(a,c)):c.value=b;this.$2(c);this.$3();return};b.get=function(a){a=this.keyFunction(a);a=this.$1(a);if(a==null)return a;this.$2(a);return a.value};b.clear=function(){this.cacheVersion++};b.$1=function(a){var b=this.cache.get(a);if(b==null)return b;if(b.cacheVersion!=this.cacheVersion){this.$4(a);return void 0}return b};b.$2=function(a){this.$5(a),this.$6(a)};b.$6=function(a){a.prev=this.head,a.next=this.head.next,this.head.next!=null&&(this.head.next.prev=a),this.head.next=a};b.$5=function(a){a.prev!=null&&(a.prev.next=a.next),a.next!=null&&(a.next.prev=a.prev)};b.$4=function(a){var b=this.cache.get(a);if(b===void 0)return;this.$5(b);this.cache["delete"](a)};b.$3=function(){this.cache.size>this.capacity&&this.tail.prev!==null&&this.$4(this.tail.prev.key)};b.getCacheSnapshot_DEBUG=function(){return new Map(this.cache)};return a}();f["default"]=a}),66);
__d("AdsSelectorDebug",["invariant","LRUKeyedCache","areEqual","performanceNow"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=10,l=5,m=new WeakMap(),n=[],o={__trace:!1,__options:null,startTrace:function(){n.length===0||h(0,3997),o.__trace=!0},stopTrace:function(){n.length===0||h(0,3997),o.__trace=!1},withTrace:function(a,b){var c=o.__options,d=o.__trace;o.__trace=!0;o.__options=b;try{return a()}finally{o.__trace=d,o.__options=c}},withTraceSelector:function(a,b){var c=m.get(a);if(c)return c;c=function(c){return o.withTrace(function(){return a(c)},b)};c.getStores=a.getStores;c.rawSelectFn=a.rawSelectFn;c.isGetStoresPure=a.isGetStoresPure;c.isGetStoresStatic=a.isGetStoresStatic;m.set(a,c);return c},__traceEnter:function(a){if(!o.__trace)return;n.push({name:a,children:[],perfStart:(i||(i=c("performanceNow")))()})},__traceInputs:function(a,b,d,e){if(!o.__trace)return;var f=n[n.length-1];f.inputCount=a.length;for(var g=0;g<a.length;g++){var h=f.children[g];h&&(e||(b==null?h.selectorValueChangedAsInput={prev:null,next:d[g],deepEqual:!1}:b[g]!==d[g]&&(h.selectorValueChangedAsInput={prev:b[g],next:d[g],deepEqual:(j||(j=c("areEqual")))(b[g],d[g])})))}},__traceProps:function(a,b,d){if(!o.__trace)return;var e=n[n.length-1];a={props:a,cache:b instanceof c("LRUKeyedCache")?b.getCacheSnapshot_DEBUG():new Map(b)};d?e.propsCacheHit=a:e.propsCacheMiss=a},__traceCacheSelectorPropsCacheMiss:function(a,b,d){if(!o.__trace)return;var e=n[n.length-1];e.cacheSelectorPropsCacheMiss={props:a,cache:b instanceof c("LRUKeyedCache")?b.getCacheSnapshot_DEBUG():new Map(b),cacheClearedByStores:Array.from(d)}},__tracePropsHitAndInputsCacheMiss:function(a,b,d,e,f){if(!o.__trace)return;d=n[n.length-1];d.propsHitAndInputsCacheMiss={props:a,cache:b instanceof c("LRUKeyedCache")?b.getCacheSnapshot_DEBUG():new Map(b)}},__traceResult:function(a){if(!o.__trace)return;var b=n.pop();b.result=a;b.executionTimeMs=(i||(i=c("performanceNow")))()-b.perfStart;z(b)&&(b.shouldHighlight=!0);if(n.length===0)p(b);else{a=n[n.length-1];a.children.push(b);a.shouldHighlight=a.shouldHighlight||b.shouldHighlight}},__traceFailure:function(a){if(!o.__trace)return;var b=n.pop();b.failure=a;b.shouldHighlight=!0;while(n.length>0){a=n.pop();a.inputFailed=!0;a.shouldHighlight=!0;a.children.push(b);b=a}p(b);o.stopTrace()}};function p(a,b){b===void 0&&(b=!0);var c=F(a);if(((a=o.__options)==null?void 0:a.logFailuresOnly)&&b&&!(c.failure||c.inputFailed))return;if(((a=o.__options)==null?void 0:a.logOnlyIfSlowerThanMs)!=null&&b&&c.executionTimeMs!=null){b=(a=o.__options)==null?void 0:a.logOnlyIfSlowerThanMs;if(c.executionTimeMs<b)return}q(c,function(){r(c),s(c),(c.cacheSelectorPropsCacheMiss||c.propsCacheMiss||c.propsCacheHit||c.propsHitAndInputsCacheMiss)&&(t(c),u(c),v(c),w(c)),x(c),y(c)})}function q(a,b){var c=A(a);if(a.shouldHighlight){(a=console).group.apply(a,c)}else{(a=console).groupCollapsed.apply(a,c)}b();console.groupEnd()}function r(a){a.failure}function s(a){a.inputFailed}function t(a){if(a.cacheSelectorPropsCacheMiss){a=a.cacheSelectorPropsCacheMiss.cacheClearedByStores;a.length>0}}function u(a){a.propsCacheMiss}function v(a){if(a.propsHitAndInputsCacheMiss)var a=a.propsHitAndInputsCacheMiss,b=a.props,b=a.cache}function w(a){a.propsCacheHit}function x(a){if(a.children.length)for(var b=0;b<a.children.length;b++)p(a.children[b],!1)}function y(a){var b=a.thunkTrace;b?p(b,!1):(b=a.name)==null?void 0:b.endsWith("-thunk")}function z(a){var b;b=(b=(b=o.__options)==null?void 0:b.highlightSelectors)!=null?b:[];return b.some(function(b){var c;return(c=a.name)==null?void 0:c.includes(b)})?!0:!1}function A(a){var b=["%s"],c=[a.name],d=a.failure||a.inputFailed,e=B(a);e!=null&&(b.unshift("%s "),c.unshift(e));if(d)b.push(" %c[FAILED]"),c.push("color: red");else{if(a.executionTimeMs!=null){e=a.executionTimeMs;b.push(" %c%fms");c.push(E(e),e.toFixed(3))}b.push(" %c(returned "+(typeof a.result==="function"?"%O":"%o")+")");c.push("",D(a.result))}if(a.selectorValueChangedAsInput!=null){d=a.selectorValueChangedAsInput;b.unshift("%c");c.unshift("color: green");b.push(" %c[INPUT CHANGED]%c %o");c.push("color: white; background-color: green","",C(d))}return[b.join("")].concat(c)}function B(a){var b;if(a.thunkTrace)return String.fromCodePoint(128994);if((b=a.name)==null?void 0:b.endsWith("-thunk"))return String.fromCodePoint(9898);if((b=a.name)==null?void 0:b.endsWith("-branch"))return String.fromCodePoint(128256);return a.isBranchConditionSelector?"(?)":null}function C(a){return{prev:D(a.prev),next:D(a.next),deepEqual:a.deepEqual}}function D(a){var b;if((b=o.__options)==null?void 0:b.disableToJSCast)return a;return(a==null?void 0:a.toJS)instanceof Function?a.toJS():a}function E(a){if(a>=k)return"color: red; font-style: italic";return a>=l?"color: orange; font-style: italic":"color: gray; font-style: italic"}function F(a){var b=[G,H];return b.reduce(function(a,b){return b(a)},a)}function G(a){var b;b=(b=a.inputCount)!=null?b:0;if(a.children.length<=b)return a;var c=babelHelpers["extends"]({},a,{children:a.children.slice(0,b).map(function(a){return babelHelpers["extends"]({},a)})}),d=function(b){var d=a.children[b];b=c.children.find(function(a){var b;return(a.name===((b=d.name)!=null?b:"")+"-thunk"||a.name===((b=d.name)!=null?b:"")+"-wrappedSelector-thunk")&&!a.thunkTrace});b&&(b.thunkTrace=d)};for(b=b;b<a.children.length;b++)d(b);return c}function H(a){var b;if(((b=a.name)==null?void 0:b.endsWith("-branch"))&&a.children.length===3){b=a.children;var c=b[0];b=b.slice(1);if(c)return babelHelpers["extends"]({},a,{children:[babelHelpers["extends"]({},c,{isBranchConditionSelector:!0})].concat(b)})}return a}a=o;g["default"]=a}),98);
__d("adsCacheSelector",["AdsSelectorDebug","LRUKeyedCache","emptyFunction"],(function(a,b,c,d,e,f,g){"use strict";var h,i=!Map.__isES5||!Object.isExtensible;function j(a){return a!=null&&(typeof a==="object"||typeof a==="function")}a=function(a,b,d,e,f){var g=new(c("LRUKeyedCache"))((f=e)!=null?f:function(a){return a});e=new Set();f=!1;var h=function(){return g.clear()},l=function(a){a.addListener(h)},m=new Set(),n=a.length>0;d&&(b().forEach(function(a){return m.add(a)}),m.forEach(l));var o=d?c("emptyFunction"):function(a){b(a).forEach(function(a){if(m.has(a))return;m.add(a);l(a)})};e=function(b){var c=n?b:null;if(n&&!i&&j(b)&&!Object.isExtensible(b))return a(c);var d=g.get(c);if(d!=null&&!k())return d;o(b);b=a(c);if(k()&&d!=null)return d;g.set(c,b);return b};return e};function k(){return!1}b=a;g["default"]=b}),98);
__d("AdsSelectorProfilerUtils",["AdsSelectorInstrumentation","adsCacheSelector"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b,e,f){var g={cacheHit:!0};a=a.bind(void 0,g);var i=c("adsCacheSelector")(a,b,e,void 0,f);a=function(a){g.cacheHit=!0;var b=(h||(h=d("AdsSelectorInstrumentation"))).onSelectorCall();a=i(a);b&&b({name:f,cacheHit:g.cacheHit});return a};return a}function b(a,b){var c={cacheHit:!0};return function(e){c.cacheHit=!0;var f=(h||(h=d("AdsSelectorInstrumentation"))).onSelectorCall();e=a(e,c);f&&f({name:b,cacheHit:c.cacheHit});return e}}g.instrumentSelectorInclusive=a;g.instrumentLaminarSelector=b}),98);
__d("LaminarSelector",["invariant","AdsSelectorProfilerUtils","LRUKeyedExpiringCache","distinctArray","flattenArray","shallowEqual"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=1e3;function k(a){var b=new Set();for(var c in a){var d=[].concat(a[c].getProviders!=null?a[c].getProviders():[],a[c].providers!=null?a[c].providers:[]);for(var d=d,e=Array.isArray(d),f=0,d=e?d:d[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var g;if(e){if(f>=d.length)break;g=d[f++]}else{f=d.next();if(f.done)break;g=f.value}g=g;b.add(g)}}return Array.from(b)}function l(a,b){var c=new Set();for(var d in a)for(var e=a[d].toFluxSelector().getStores(),f=Array.isArray(e),g=0,e=f?e:e[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var h;if(f){if(g>=e.length)break;h=e[g++]}else{g=e.next();if(g.done)break;h=g.value}h=h;c.add(h)}b!=null&&b.forEach(function(a){return c.add(a)});return Array.from(c)}var m=function(){function a(){this.$1={hasCached:!1,result:null,inputs:null}}var b=a.prototype;b.setCache=function(a,b){this.$1={hasCached:!0,inputs:a,result:b}};b.areInputsEqual=function(a){return this.$1.hasCached&&c("shallowEqual")(this.$1.inputs,a)};b.getCachedResultEnforced=function(){this.$1.hasCached||h(0,14851);return this.$1.result};return a}();function n(a,b){var c={};Object.keys(a).forEach(function(d){c[d]=b(d,a[d])});return c}function o(a){a=n(a,function(a,b){return b()});return a}function a(a,b,e,f,g){e===void 0&&(e=o);f===void 0&&(f="unnamedLaminarSelector");g===void 0&&(g=void 0);var h=(g=g)!=null?g:new(c("LRUKeyedExpiringCache"))(function(a){return a},j);g=function(c,d){var f=h.get(c);if(f!=null)return f();var g=new m();f=function(){var f=e(a,c);if(g.areInputsEqual(f))return g.getCachedResultEnforced();d.cacheHit=!1;var h=b(f,c);g.setCache(f,h);return h};h.set(c,f);return f()};var i=d("AdsSelectorProfilerUtils").instrumentLaminarSelector(g,f),n=k(a),p=l(a,e.attachedStoreDependencies),q=function(a){return i(a)};q.getStores=function(){return p};q.isGetStoresStatic=!0;q.isGetStoresPure=!0;q.rawSelectFn=function(a){return i(a)};return Object.assign(i.bind(void 0),{getProviders:function(){return n},toFluxSelector:function(){return q}})}function b(a,b){var d=function(c,d){var e={};Object.keys(a).forEach(function(b){e[b]=a[b]()});return b(e,c,d)},e=(i||(i=c("distinctArray")))(c("flattenArray")(Object.keys(a).map(function(b){return a[b].getStores()})));d.attachedStoreDependencies=e;return d}function e(a,b){var d=function(c,d){return b(a,c,d)},e=(i||(i=c("distinctArray")))(Object.keys(a).map(function(b){return a[b]}));d.attachedStoreDependencies=e;return d}g.defaultPrepareFn=o;g.create=a;g.prepareWithFluxSelectors=b;g.prepareWithFluxStores=e}),98);
__d("LaminarTriggerReducer",["AdsDataAtomShared"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,d){var e=function(b,c){b=d.select(b);return a.reduce(b,c)},f=function(a){return e(c("AdsDataAtomShared").getAlteredState(),a)};return{provider:d.provider,reduce:f,triggerReducer:b}}g.create=a}),98);
__d("Laminar",["LaminarAction","LaminarExperimentalSelector","LaminarLogger","LaminarProvider","LaminarReactHooks","LaminarReducer","LaminarReducerWithFluxSelectors","LaminarRefetchProvider","LaminarSelector","LaminarTriggerReducer"],(function(a,b,c,d,e,f,g){"use strict";g.__createAction=d("LaminarAction").create;g.__createExperimentalSelector=d("LaminarExperimentalSelector").create;g.__createLogger=d("LaminarLogger").create;g.__createProvider=d("LaminarProvider").create;g.__createReducer=d("LaminarReducer").create;g.__createLegacyReducer=d("LaminarReducer").createLegacy;g.__createRefetchProvider=d("LaminarRefetchProvider").create;g.__createSelector=(a=d("LaminarSelector")).create;g.__createTriggerReducer=d("LaminarTriggerReducer").create;g.__defaultPrepareFn=a.defaultPrepareFn;g.useProvider=d("LaminarReactHooks").useProvider;g.laminarContainer=d("LaminarReactHooks").laminarContainer;g.withFluxSelectors=c("LaminarReducerWithFluxSelectors");g.prepareWithFluxSelectors=a.prepareWithFluxSelectors;g.prepareWithFluxStores=a.prepareWithFluxStores}),98);
__d("LaminarLogger",["AdsDataAtomShared","Laminar"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,e,f){var g=d("Laminar").__createExperimentalSelector(e,function(a){return a}),h=function(a,c){a=g.select(a);b.log(c,a)};e=function(a){return h(c("AdsDataAtomShared").getAlteredState(),a)};return Object.assign(e,{id:a,log:h,registries:f==null?[]:f})}g.create=a}),98);
__d("LaminarProvider",["invariant","AdsDataAtomShared","AdsDataPluginsInternalUtils","FluxReduceStore","Laminar","compactArray"],(function(a,b,c,d,e,f,g,h){"use strict";function i(a,b){var d=function(e){babelHelpers.inheritsLoose(d,e);function d(){var a,c;for(var d=arguments.length,f=new Array(d),g=0;g<d;g++)f[g]=arguments[g];return(a=c=e.call.apply(e,[this].concat(f))||this,c.__moduleID=b,a)||babelHelpers.assertThisInitialized(c)}var f=d.prototype;f.addListener=function(b){return c("AdsDataAtomShared").addListener(a.provider,b)};f.__registerDispatcherCallback=function(){return};f.getInitialState=function(){return a.getInitialState()};f.reduce=function(){h(0,5462)};f.hasChanged=function(){return c("AdsDataAtomShared").hasChangedInDispatchCycle(a.provider)};f.getState=function(){return a.select(c("AdsDataAtomShared").getAlteredState())};f.getDispatchToken=function(){return a.provider};f.__setState=function(a){c("AdsDataAtomShared").__laminarAlteredState[b]=a};return d}(c("FluxReduceStore"));d.__moduleID=f.id;return new d(c("AdsDataAtomShared"))}function a(a,b,e,f){f===void 0&&(f=[]);var g=a.initialState,j=a.legacyFluxReduce,k=null,l=function(a){k!=null||h(0,5463),k.dispatch({reducer:a})},m=d("AdsDataPluginsInternalUtils").memoize(function(){return typeof g==="function"?g(l):g}),n=function(a){if(!a)throw new Error("'state' must be present. If 'state' is 'undefined' make sure\n       you passed the altered state to the selector function. Example:\n         AdsExampleSelector(\n           AdsDataAtom.getAlteredState(),\n         );");return Object.prototype.hasOwnProperty.call(a,b)?a[b]:m()},o=function(){return n(c("AdsDataAtomShared").getAlteredState())},p=d("AdsDataPluginsInternalUtils").memoize(function(){return i(o,b)}),q=d("AdsDataPluginsInternalUtils").memoize(function(){return Object.assign(o,{getStores:d("AdsDataPluginsInternalUtils").memoize(function(){return[p()]}),isGetStoresStatic:!0,isGetStoresPure:!0,rawSelectFn:o})});e=e!=null?c("compactArray")(e()):[];var r=Object.assign(o,{providers:[b],provider:b,select:n,getInitialState:m,shouldLegacyFluxReduceOnly:!!a.shouldLegacyFluxReduceOnly,toFluxStore:p,toFluxSelector:q,triggerReducers:e,registries:f==null?[]:f});k=d("Laminar").__createAction(function(){return[d("Laminar").__createReducer({reduce:function(a,b){return b.reducer(a)}},r,{},b+"SetStateReducer")]},function(){return[]},b+"SetStateAction");j&&c("AdsDataAtomShared").laminarRegisterLegacyFluxReducer(d("Laminar").__createLegacyReducer({reduce:j},r,{},b+"LegacyFluxReducer"));return r}g.create=a}),98);
__d("LaminarReducer",["AdsDataAtomShared","Laminar"],(function(a,b,c,d,e,f,g){"use strict";function h(a,b,e,f,g){var h=d("Laminar").__createExperimentalSelector(f,function(a){return a}),i=function(a,c){var d=h.select(a);a=e.select(a);return b.reduce(a,c,d)};f=function(a){return i(c("AdsDataAtomShared").getAlteredState(),a)};f.isDisabled=!a&&e.shouldLegacyFluxReduceOnly;f.provider=e.provider;f.providerInitialState=function(){return e.getInitialState()};f.reduce=i;f.registries=e.registries;f.triggerReducers=e.triggerReducers;f.reducerName=g;return f}function a(a,b,c,d){return h(!1,a,b,c,d)}function b(a,b,c,d){return h(!0,a,b,c,d)}g.create=a;g.createLegacy=b}),98);
__d("LaminarRefetchProvider",["invariant","AdsDataAtomShared","Laminar","LaminarProvider"],(function(a,b,c,d,e,f,g,h){"use strict";function a(a,b,e,f,g){g===void 0&&(g=[]);var i=d("LaminarProvider").create(a,e,f,g),j=null,k=function(a){j!=null||h(0,5463),j.dispatch({reducer:a})};a=function(){return i.select(c("AdsDataAtomShared").getAlteredState())};f=Object.assign(a,babelHelpers["extends"]({},i,{refetch:function(a){return b(k,a)}}));j=d("Laminar").__createAction(function(){return[d("Laminar").__createReducer({reduce:function(a,b){return b.reducer(a)}},i,{},e+"QuerySetStateReducer")]},function(){return[]},e+"QuerySetStateAction");return f}g.create=a}),98);
__d("AdsToastCardDataProvider",["AdsToastCardDataProviderPlugin","Laminar"],(function(a,b,c,d,e,f){"use strict";e.exports=b("Laminar").__createProvider(b("AdsToastCardDataProviderPlugin"),"AdsToastCardDataProviderPlugin")}),null);
__d("AdsToastCardsAddReducerPlugin",[],(function(a,b,c,d,e,f){"use strict";a={reduce:function(a,b){var c=b.toastCard,d=b.dismissUseCase;b=d?a.filter(function(a){return a.id===c.id||a.useCase!==d}):a;return b.some(function(a){return a.id===c.id})?b.map(function(a){return a.id===c.id?c:a}):b.concat([c])}};b=a;f["default"]=b}),66);
__d("ifRequired_FOR_LAMINAR_CODEGEN",["ifRequired"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=c("ifRequired")}),98);
__d("AdsAddToastCardAction",["AdsToastCardDataProvider","AdsToastCardsAddReducerPlugin","Laminar","ifRequired_FOR_LAMINAR_CODEGEN"],(function(a,b,c,d,e,f){"use strict";a=b("Laminar").__createAction(function(){return[b("Laminar").__createReducer(b("AdsToastCardsAddReducerPlugin"),b("AdsToastCardDataProvider"),{},"")]},function(){return[b("ifRequired_FOR_LAMINAR_CODEGEN")("AdsAddToastCardActionLoggerPlugin",function(a){return b("Laminar").__createLogger("AdsAddToastCardActionLoggerPlugin",a,{},["AdsMgmtRegistry"])})]},"ADS_ADD_TOAST_CARD");e.exports=a}),null);
__d("AdsBrowserExtensionErrorUtils",["isFalsey"],(function(a,b,c,d,e,f,g){"use strict";var h="chrome-extension://";function a(a){a=a.split(h);a=a[a.length-1];return a.split("/")[0]}function b(a){return!c("isFalsey")(a)&&a.indexOf(h)>-1}g.CHROME_EXTENSION=h;g.extractExtensionID=a;g.isBrowserExtensionError=b}),98);
__d("LaminarDebugger",["EventEmitter"],(function(a,b,c,d,e,f,g){"use strict";var h="DEBUGGER";a=function(){function a(){this.$1=[],this.$6={},this.$3=100,this.$2=new Array(this.$3),this.$4=new(c("EventEmitter"))(),this.$5=!1}var b=a.prototype;b.getDebuggerActionDispatchQueue=function(){return this.$2};b.addSnapshotToDebuggerActionDispatchQueue=function(a){this.$6=a.newState,this.$4.emit(h,a),this.$2.push(a),this.$2.shift()};b.updateCaptureRate=function(a){a>0&&(this.$2.length+=a-this.$3,this.$3=a)};b.addDebugListener=function(a){return this.$4.addListener(h,a)};b.removeAllDebugListeners=function(){this.$4.removeAllListeners(h)};b.getPauseActionDispatches=function(){return this.$5};b.getAlteredStateSnapshot=function(){return this.$6};b.setPauseActionDispatches=function(a){this.$5=a};b.enqueueActionToDispatch=function(a,b){this.$1.push([a,b])};b.dequeueActionToDispatch=function(){return this.$1.shift()};b.clearActionDispatchQueue=function(){this.$1=[]};b.isActionDispatchQueueEmpty=function(){return this.$1.length===0};return a}();g["default"]=a}),98);
__d("AdsDataAtomLaminarDebugger",["LaminarDebugger"],(function(a,b,c,d,e,f,g){"use strict";a=new(c("LaminarDebugger"))();g["default"]=a}),98);
__d("AdsSpeedConfig",[],(function(a,b,c,d,e,f){"use strict";function a(){return!1}f.isDevToolsTimingEnabled=a}),66);
__d("AdsDataAtomPerformanceUtil",["AdsSpeedConfig","URI","UserTimingUtils","performanceNow","requestAnimationFrameAcrossTransitions","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=new(h||(h=c("URI")))(window.location.href).getQueryData().dispatchereventtimer,k=new h(window.location.href).getQueryData().logdispatchtimes;a=function(){function a(){var a=this;this.$1={};this.$2={};this.$3={};this.startPerformanceMeasurements=function(b,e){if(b==null)return;b=b.type;j&&console.time&&console.time(b);k&&(a.$3[b]=(i||(i=c("performanceNow")))());e&&d("UserTimingUtils").measureStart("AdsDataAtom "+b)};this.endPerformanceMeasurements=function(b,e){if(b==null)return;var f=b.type;j&&console.timeEnd&&console.timeEnd(f);if(k){var g=a.$3[f];delete a.$3[f];a.$1[f]||(a.$1[f]={count:0,totalFluxTime:0,totalTime:0});a.$1[f].count+=1;a.$1[f].totalFluxTime+=(i||(i=c("performanceNow")))()-g;a.$5(f,function(){a.$1[f].totalTime+=(i||(i=c("performanceNow")))()-g})}e&&d("UserTimingUtils").measureEnd("\u221e "+f,"AdsDataAtom "+f)};this.onDispatchStart=function(b){a.startPerformanceMeasurements(b,a.$4)};this.onDispatchEnd=function(b){a.endPerformanceMeasurements(b,a.$4)};this.$4=d("AdsSpeedConfig").isDevToolsTimingEnabled()}var b=a.prototype;b.$5=function(a,b){var d=this;if(this.$2[a])return;this.$2[a]=1;c("requestAnimationFrameAcrossTransitions")(function(){c("setTimeoutAcrossTransitions")(function(){delete d.$2[a],b()})})};b.resetTiming=function(){this.$1={}};b.getTiming=function(){return this.$1};b.outputTimingTable=function(){var a=this;console.table(Object.keys(this.$1).map(function(b){return babelHelpers["extends"]({action:b},a.$1[b])}))};return a}();b=new a();g["default"]=b}),98);
__d("AdsFluxContextInstrumentation",[],(function(a,b,c,d,e,f){"use strict";var g=null;function a(a){g=a}function b(a){}function c(){return g}f.actionStart=a;f.actionEnd=b;f.getLastAction=c}),66);
__d("AdsInterfacesLogger",["invariant"],(function(a,b,c,d,e,f,g,h){"use strict";var i="primary",j="secondary",k="ads_interfaces_logger_primary_app",l="ads_interfaces_logger_secondary_app",m=(a={},a[i]={data:[],isRegistered:!1},a[j]={data:[],isRegistered:!1},a),n=new Map(),o=new Set();b=function(){a.__reset=function(){m[i]={data:[],isRegistered:!1},n.has(k)&&n["delete"](k),m[j]={data:[],isRegistered:!1},n.has(l)&&n["delete"](l),o=new Set()};a.getPath=function(a){return a===i?k:l};a.log=function(b,c){c===void 0&&(c=i);c===j&&!m[c].isRegistered&&m[i].isRegistered&&(c=i);if(!m[c].isRegistered){m[c].data.push(b);return}c=n.get(this.getPath(c));c||h(0,2975);c instanceof a||h(0,2976);c.__log(b)};a.logOnce=function(b,c){c===void 0&&(c=i);var d=JSON.stringify(b);if(o.has(d))return;a.log(b,c);o.add(d)};a.get=function(a){a===void 0&&(a=i);a===j&&!m[a].isRegistered&&m[i].isRegistered&&(a=i);a=n.get(this.getPath(a));return a};function a(a,b){this.__log=a.log,this.__interfaceID=b}var b=a.prototype;b.getInterfaceID=function(){return this.__interfaceID};b.register=function(a){n.set(this.constructor.getPath(a),this),m[a].isRegistered=!0,m[a].data.length>0&&(m[a].data.forEach(this.__log),m[a].data=[]),a===i&&m[j].data.length>0&&(m[j].data.forEach(this.__log),m[j].data=[])};b.unregister=function(a){n["delete"](this.constructor.getPath(a)),m[a].isRegistered=!1};return a}();b.LOG_TYPE_PRIMARY_APP=i;b.LOG_TYPE_SECONDARY_APP=j;g["default"]=b}),98);
__d("AdsInterfacesLoggerUtils",["AdsBrowserExtensionErrorUtils","AdsFluxContextInstrumentation","AdsInterfacesLogger","ErrorNormalizeUtils","ErrorPubSub","PreloadingEvent.flow","getErrorSafe","requireWeak"],(function(a,b,c,d,e,f,g){"use strict";var h;({defaultJSErrorHandler:function(){}});c("requireWeak")("ErrorLogging",function(a){return a});function i(a,b){var e;e=(e=c("ErrorNormalizeUtils").ifNormalizedError(a))!=null?e:c("ErrorNormalizeUtils").normalizeError(c("getErrorSafe")(a));try{JSON.stringify(b)}catch(a){b=null}a=babelHelpers["extends"]({stack_trace:e.stack,action_type_on_error:d("AdsFluxContextInstrumentation").getLastAction()},b,{normalized_error:e});a.error_name=e.name;a.message=e.message;a.meta_message=e.messageWithParams?e.messageWithParams[0]:"-";a.error_line=e.line;a.error_script=e.script;return a}function j(a,b,e){e=i(a,e);if(d("AdsBrowserExtensionErrorUtils").isBrowserExtensionError(a.stack)||d("AdsBrowserExtensionErrorUtils").isBrowserExtensionError(e.error_script))return;if(a.message!=null&&a.message.includes("ResizeObserver loop limit exceeded"))return;c("AdsInterfacesLogger").log({eventName:b,eventCategory:"errors",data:e},c("AdsInterfacesLogger").LOG_TYPE_PRIMARY_APP)}function a(a,b){c("AdsInterfacesLogger").log({eventName:d("PreloadingEvent.flow").PreloadingEventName.getName(b),eventCategory:"preloading",data:a},c("AdsInterfacesLogger").LOG_TYPE_PRIMARY_APP)}function b(a,b){j(a,"ADS_INTERFACES_ERROR_EXCEPTION",b)}function e(a,b){j(a,"ADS_INTERFACES_CRITICAL_EXCEPTION",b)}function k(a,b){j(a,"ADS_INTERFACES_ERROR_FATAL",b)}function f(a,b){j(a,"ADS_INTERFACES_USER_ERROR",b)}(h||(h=c("ErrorPubSub"))).addListener(function(a,b){b==="ONERROR"&&!a.message.toLowerCase().startsWith("script error")&&k(a)});g.constructLogDataForError=i;g.logPreloading=a;g.logException=b;g.logCriticalException=e;g.logFatal=k;g.logUserError=f}),98);
__d("AdsPageTransitionActionFlux",[],(function(a,b,c,d,e,f){"use strict";e.exports={actionType:"PAGE_TRANSITION"}}),null);
__d("AdsDataAtomInstrumentation",[],(function(a,b,c,d,e,f){"use strict";var g=[];function a(a){g.push(a)}function b(a,b){g.forEach(function(c){return c.actionStart(a,b)})}function c(a,b){g.forEach(function(c){return c.actionEnd&&c.actionEnd(a,b)})}function d(a,b){g.forEach(function(c){return c.dispatchCallbacksStart&&c.dispatchCallbacksStart(a,b)})}function e(a,b){g.forEach(function(c){return c.dispatchCallbacksEnd&&c.dispatchCallbacksEnd(a,b)})}function h(){var a=[];g.forEach(function(b){b=b.measureDispatchCallbacks?b.measureDispatchCallbacks():null;b&&a.push(b)});return a.length?function(b){a.forEach(function(a){return a(b)})}:null}f.addInstrumentation=a;f.onActionStart=b;f.onActionEnd=c;f.onDispatchCallbacksStart=d;f.onDispatchCallbacksEnd=e;f.onMeasureDispatchCallbacks=h}),66);
__d("AdsDispatchCycle",["invariant","AdsDataAtomInstrumentation"],(function(a,b,c,d,e,f,g,h){"use strict";var i=((a=window.performance)==null?void 0:a.now)!=null?function(){return window.performance.now()}:function(){return Date.now()},j=Object.freeze({PENDING:"PENDING",STARTED:"STARTED",COMPLETE:"COMPLETE"});b=function(){function a(a,b,c,e){var f=this;this.$8=null;this.$9=[];this.$1=[];this.$2={};this.$5={};this.$3=e;this.$4=c;e=d("AdsDataAtomInstrumentation").onMeasureDispatchCallbacks();e&&(this.$7=e,this.$8=[]);a.forEach(function(a,b){return f.register(b,a)});this.$6=b}var b=a.prototype;b.start=function(){for(var a=this.$1,b=Array.isArray(a),c=0,a=b?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var d;if(b){if(c>=a.length)break;d=a[c++]}else{c=a.next();if(c.done)break;d=c.value}d=d;this.$10(d)}this.$8&&this.$7&&this.$7({entries:this.$8,actionType:this.$4})};b.waitFor=function(a){for(var a=a,b=Array.isArray(a),c=0,a=b?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var d;if(b){if(c>=a.length)break;d=a[c++]}else{c=a.next();if(c.done)break;d=c.value}d=d;this.$10(d)}};b.register=function(a,b){this.$1.push(a),this.$2[a]=b,this.$5[a]=j.PENDING};b.getPayload=function(){return this.$6};b.$10=function(a){var b=this;switch(this.$5[a]){case j.COMPLETE:break;case j.PENDING:this.$5[a]=j.STARTED;this.$9.push(a);var c=this.$7?i():null;this.$2[a](this.$6);if(this.$8&&c!=null){this.$8.push({start:c,end:i(),name:(c=this.$3[a])!=null?c:"unknown"})}this.$9.pop();this.$5[a]=j.COMPLETE;break;case j.STARTED:h(0,15659,a,this.$3[a],this.$4,this.$9.map(function(a){return b.$3[a]}).join(", "));default:break}};return a}();g["default"]=b}),98);
__d("DataAtomBase",["invariant","AdsDataAtomInstrumentation","AdsDataDispatchUtils","AdsDispatchCycle","EventEmitter","FBLogger"],(function(a,b,c,d,e,f,g,h){"use strict";var i=typeof jest!=="undefined";a=function(){function a(a,b,d){var e=this;this.registerDependency=function(a,b){e.$6[b]==null&&(e.$6[b]=new Set()),e.$6[b].add(a)};this.$1={};this.__callbacksNames={};this.$2={};this.$9={};this.$3={};this.$5={};this.$6={};this.$7={};this.$8={};this.__dispatchTokenActionTypes={};this.$10=1;this.$11=null;this.$12=new Set();this.__dispatchSeqNumber=0;this.__catchErrors=!i;this.$13=[];this.__laminarAlteredState={};this.$14=new(c("EventEmitter"))();this.$15=[];this.__previousLegacyFluxReducerProviderState={};this.$16=b;this.$18=new Set();this.$4={};this.$19=a!=null?a:[];this.$17=d}var b=a.prototype;b.register=function(a,b,c,d){var e=this;this.$19.forEach(function(c){c.wrapCallback!=null&&(a=c.wrapCallback(a,b))});var f=this.$20(b),g=this.__invokeCallback.bind(this,f,a);this.$1[f]=g;this.__callbacksNames[f]=d;if(c==null)this.$4[f]=g;else{d=c.getActionTypes();d!=null&&Array.isArray(d)?(d.forEach(function(a){e.$2[a]||(e.$2[a]={},e.$9[a]={}),e.$2[a][f]=g,c!=null&&c.__setAsUnchanged&&(e.$9[a][f]=c.__setAsUnchanged.bind(c))}),this.__dispatchTokenActionTypes[f]=d):this.$3[f]=g;this.$21(c,f);this.$7[f]=new Set(c.__getActionTypes());this.$7[f].forEach(function(a){e.$8[a]||(e.$8[a]=new Set()),e.$8[a].add(f)})}this.$11&&this.$11.register(f,g);this.$19.forEach(function(a){a.onRegistered!=null&&a.onRegistered(b,f,c)});return f};b.registerContainer=function(a,b){b=this.$20(b);a=this.__invokeCallback.bind(this,b,a);this.$5[b]=a;return b};b.unregister=function(a){var b=this;this.$1[a]||this.$5[a]||h(0,1331,a);delete this.$1[a];delete this.$4[a];delete this.$5[a];var c=this.__dispatchTokenActionTypes[a];c?(c.forEach(function(c){delete b.$2[c][a],delete b.$9[c][a]}),delete this.__dispatchTokenActionTypes[a]):delete this.$3[a];this.$6[a]&&this.$6[a].size;delete this.$6[a];this.$19.forEach(function(b){b.onUnregistered&&b.onUnregistered(a)})};b.$21=function(a,b){if(typeof a.__getDependencyStores!=="function")return;a=a.__getDependencyStores();if(!a)return;for(var c=0;c<a.length;c++){var d=a[c]&&a[c].getDispatchToken&&a[c].getDispatchToken();if(d==null)continue;var e=this.registerDependency;e&&e(b,d)}};b.waitFor=function(a){this.$19.forEach(function(b){b.doWaitFor!=null&&b.doWaitFor(a)});var b=this.$11;b||h(0,1332);b.waitFor(a);this.$19.forEach(function(b){b.didWaitFor!=null&&b.didWaitFor(a)})};b.isDispatching=function(){return!!this.$11};b.__invokeCallback=function(a,b,d){if(this.__catchErrors)try{b(d)}catch(b){var e;e=(e=this.__callbacksNames[a])!=null?e:a;a=d&&d.action&&d.action.type;c("FBLogger")("laminar").catching(b).warn("Error in DataAtom callback (Store: %s, Action: %s)",e,a)}else b(d)};b.$20=function(a){return(a?a+"_":"ID_")+this.$10++};b.$22=function(a){a=a.action;if(a){var b=a.type||a.actionType;a.type=b;a.actionType=b}};b.$23=function(a,b,c){if(b!==c){this.__laminarAlteredState=babelHelpers["extends"]({},this.__laminarAlteredState,(b={},b[a]=c,b));this.$12.add(a);this.$14.emit(a)}};b.$24=function(a,b,c){var d=this;b!==c&&a.forEach(function(a){var b=d.__laminarAlteredState[a.provider],e=a.reduce(c);d.$23(a.provider,b,e)})};b.$25=function(a,b,c){var d=this;this.__invokeCallback(a.provider,function(c){c=c.action;b!=null&&(d.$11!=null||h(0,6393,a.provider),d.$11.waitFor(b));var e=d.__laminarAlteredState[a.provider];c=a.reduce(d.__laminarAlteredState,c);d.$23(a.provider,e,c);d.$24(a.triggerReducers,e,c)},c)};b.$26=function(a,b){var c=this;this.__invokeCallback(a,function(b){b=b.action;b=b.data;if(Object.prototype.hasOwnProperty.call(b,a)){var d;c.__laminarAlteredState=babelHelpers["extends"]({},c.__laminarAlteredState,(d={},d[a]=b[a],d))}else delete c.__laminarAlteredState[a];c.$14.emit(a)},b)};b.$27=function(a,b,c){var e=this,f=[];this.$15.forEach(function(a){e.__laminarAlteredState[a.provider]&&e.__previousLegacyFluxReducerProviderState[a.provider]!==e.__laminarAlteredState[a.provider]&&(f.push(a),e.__previousLegacyFluxReducerProviderState[a.provider]=e.__laminarAlteredState[a.provider])});var g=d("AdsDataDispatchUtils").mergeReducers(d("AdsDataDispatchUtils").getDataReducers(b),f),h=[],i=[],j=[],k={};for(var g=g,l=Array.isArray(g),m=0,g=l?g:g[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var n;if(l){if(m>=g.length)break;n=g[m++]}else{m=g.next();if(m.done)break;n=m.value}n=n;var o=this.__laminarAlteredState[n.provider],p=n.reducerName;h.push({providerName:n.provider,alteredState:o});if(n!=null){n.reducerName&&i.push(n.reducerName);j.push(n.provider);if(p!=null){k[p]={provider:n.provider,triggerReducers:{}};for(var o=n.triggerReducers,n=Array.isArray(o),q=0,o=n?o:o[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var r;if(n){if(q>=o.length)break;r=o[q++]}else{q=o.next();if(q.done)break;r=q.value}r=r;if(r!=null){var s=r.triggerReducer;k[p].triggerReducers[s]={provider:r.provider}}}}}}this.$17!=null&&this.$17.addFluxActionDispatchInfo(a,{actionType:b.actionType,providers:j,reducers:i});r={actionItem:b,alteredStates:h,providers:j,reducers:i,actionDispatchGraph:k,newState:this.__laminarAlteredState,sequenceNumber:a,siblings:[],shouldDisplay:!0,isActive:!0,debugging:{stack:new Error().stack,options:(s=c)!=null?s:{line:"0",module:"No Module",moduleID:null}}};this.$16!=null&&this.$16.addSnapshotToDebuggerActionDispatchQueue(r)};b.revert=function(a,b){var d=this,e=new Map();this.$16!=null&&this.$16.setPauseActionDispatches(!0);b.forEach(function(a){e.set(a,d.$26.bind(d,a))});b={type:"ADS_DATA_ATOM.REVERT",actionType:"ADS_DATA_ATOM.REVERT",data:a};a={action:b};l(e,this.$1);l(e,this.$5);this.$11=new(c("AdsDispatchCycle"))(e,a,j(a),this.__callbacksNames);this.$11.start();this.$11=null};b.commitRevert=function(){var a=this.$16;a!=null&&(a.setPauseActionDispatches(!1),a.clearActionDispatchQueue())};b.undoRevert=function(a){var b=this,c=Object.keys(a).filter(function(c){return a[c]!==b.__laminarAlteredState[c]});this.revert(a,c);this.$16!=null&&this.$16.setPauseActionDispatches(!1);c=this.$16;while(c!=null&&!c.isActionDispatchQueueEmpty()&&!c.getPauseActionDispatches())c.setPauseActionDispatches(!1),this.dispatch.apply(this,c.dequeueActionToDispatch())};b.$28=function(a){var b={},c=function(){var c=a[d];c.triggerReducers.forEach(function(a){a=a.provider;b[a]=Object.prototype.hasOwnProperty.call(b,a)?b[a].push(c.provider):[c.provider]})};for(var d=0;d<a.length;d++)c();return b};b.$29=function(a,b){for(var b=b,c=Array.isArray(b),d=0,b=c?b:b[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=b.length)break;e=b[d++]}else{d=b.next();if(d.done)break;e=d.value}e=e;e=this.$6[e];if(e){for(var f=e,g=Array.isArray(f),h=0,f=g?f:f[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var i;if(g){if(h>=f.length)break;i=f[h++]}else{h=f.next();if(h.done)break;i=h.value}i=i;a.has(i)||a.set(i,this.$1[i])}this.$29(a,e)}}};b.__dispatch=function(a){var b=this,e=a.action;this.__dispatchSeqNumber++;var f=e.type;this.$19.forEach(function(a){a.onDispatchStart!=null&&a.onDispatchStart(e)});this.$11&&k(this.$11.getPayload(),a);var g=new Map(),h=d("AdsDataDispatchUtils").mergeReducers(d("AdsDataDispatchUtils").getDataReducers(e),d("AdsDataDispatchUtils").shouldSkipLegacyFluxDispatch(e)?[]:this.$15),i=this.$28(h);for(var h=h,m=Array.isArray(h),n=0,h=m?h:h[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var o;if(m){if(n>=h.length)break;o=h[n++]}else{n=h.next();if(n.done)break;o=n.value}o=o;(o.registries.length==0||o.registries.some(function(a){return b.$18.has(a)}))&&(g.set(o.provider,this.$25.bind(this,o,i[o.provider])),this.__callbacksNames[o.provider]=o.provider)}d("AdsDataDispatchUtils").shouldSkipLegacyFluxDispatch(e)?(this.$8[f]&&this.$8[f].forEach(function(a){g.set(a,b.$1[a])}),this.$29(g,g.keys()),l(g,this.$4)):(l(g,this.$3),l(g,this.$2[f]),l(g,this.$4));o=d("AdsDataDispatchUtils").getDataLoggers(e);m=function(){if(q){if(r>=p.length)return"break";n=p[r++]}else{r=p.next();if(r.done)return"break";n=r.value}var a=n;(a.registries.length==0||a.registries.some(function(a){return b.$18.has(a)}))&&(g.set(a.id,b.__invokeCallback.bind(b,a.id,function(b){b=b.action;a(b)})),b.__callbacksNames[a.id]=a.id)};for(var p=o,q=Array.isArray(p),r=0,p=q?p:p[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){h=m();if(h==="break")break}this.$11=new(c("AdsDispatchCycle"))(g,a,j(a),this.__callbacksNames);this.$11.start();this.$11=null;this.$12=new Set();if(this.$9[f])for(i in this.$9[f])this.$9[f][i]();this.$19.forEach(function(a){a.onDispatchEnd!=null&&a.onDispatchEnd(e)})};b.__updateContainers=function(a){var b=this;Object.keys(this.$5).forEach(function(c){return b.$5[c]&&b.$5[c](a)})};b.hasChangedInDispatchCycle=function(a){this.$11!=null||h(0,1335,a);return this.$12.has(a)};b.__genReactBatchCallback=function(a,b){var c=this;return function(){d("AdsDataAtomInstrumentation").onDispatchCallbacksStart(a.action.type,b),c.__dispatch(a),d("AdsDataAtomInstrumentation").onDispatchCallbacksEnd(a.action.type,b),c.__updateContainers(a)}};b.dispatch=function(a,b){if(this.$16!=null&&this.$16.getPauseActionDispatches()){this.$16.enqueueActionToDispatch(a,b);return}this.$22(a);var c=this.__dispatchSeqNumber;d("AdsDataAtomInstrumentation").onActionStart(a.action.type,c);var e=this.__genReactBatchCallback(a,c);e();this.$27(c,a.action,b);this.$30();d("AdsDataAtomInstrumentation").onActionEnd(a.action.type,c)};b.dispatchAction=function(a,b){this.dispatch({action:a},b)};b.$30=function(){var a=this.$13;this.$13=[];a.forEach(function(a){return a()});this.$13.length=0};b.handleUpdateFromServerResponse=function(a){this.dispatch({action:a})};b.handleUpdateFromViewAction=function(a){this.dispatch({action:a})};b.addPostDispatchCallback=function(a){this.isDispatching()?this.$13.push(a):a()};b.setCatchErrors=function(a){this.__catchErrors=a};b.laminarRegisterLegacyFluxReducer=function(a){this.$15.push(a),this.__previousLegacyFluxReducerProviderState[a.provider]=a.providerInitialState()};b.getAlteredState=function(){return this.__laminarAlteredState};b.addListener=function(a,b){return this.$14.addListener(a,b)};b.loadRegistry=function(a){this.$18.add(a)};b.unloadRegistry=function(a){this.$18["delete"](a)};return a}();function j(a){return a&&a.action&&a.action.type||"<unknown>"}function k(a,b){h(0,1336,j(b),j(a))}function l(a,b){if(b!=null){var c=b;Object.keys(c).forEach(function(b){return a.set(b,c[b])})}}g["default"]=a}),98);
__d("AdsDataAtom",["invariant","AdsDataAtomDebugger","AdsDataAtomLaminarDebugger","AdsDataAtomPerformanceUtil","AdsInterfacesLoggerUtils","AdsPageTransitionActionFlux","DataAtomBase","ErrorSerializer","Run","cr:7225"],(function(a,b,c,d,e,f,g,h){"use strict";var i=null;a=function(a){babelHelpers.inheritsLoose(e,a);function e(){var e;e=a.call(this,[c("AdsDataAtomPerformanceUtil")],i,b("cr:7225"))||this;e.$AdsDataAtom$p_1=!1;e.$AdsDataAtom$p_2=null;d("Run").onAfterUnload(function(){e.dispatch({action:{type:d("AdsPageTransitionActionFlux").actionType}})});return e}var f=e.prototype;f.__invokeCallback=function(a,b,e){if(this.__catchErrors)try{b(e)}catch(b){a={action_type_on_error:e&&e.action&&e.action.type,error_type:"FLUX_STORE",payload_on_error:e,store_name:this.__callbacksNames[a]};c("ErrorSerializer").aggregateError(b,{type:"fatal"});d("AdsInterfacesLoggerUtils").logCriticalException(b,a)}else b(e)};f.registerBatchingCallback=function(a){this.$AdsDataAtom$p_2==null||h(0,65726),this.$AdsDataAtom$p_2=a};f.unregisterBatchingCallback_TEST_ONLY_DO_NO_USE=function(){this.$AdsDataAtom$p_2=null};f.__genReactBatchCallback=function(b,c){var d=this,e=a.prototype.__genReactBatchCallback.call(this,b,c);if(this.$AdsDataAtom$p_2!=null&&!this.$AdsDataAtom$p_1){var f=this.$AdsDataAtom$p_2;return function(){d.$AdsDataAtom$p_1=!0,f(e),d.$AdsDataAtom$p_1=!1}}else return e};return e}(c("DataAtomBase"));e=new a();f=e;g["default"]=f}),98);
__d("AdsMessengerContext.react",["AdsAIMessengerUtils","react"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||(h=d("react"));var i=h.useContext,j=b.createContext({isMessageFromAdsAI:d("AdsAIMessengerUtils").isMessageFromAdsAI,isMessengerInAds:!1});function a(){return i(j)}g.AdsMessengerContext=j;g.useAdsMessengerContext=a}),98);
__d("AdsOsmipChatConstants.react",["fbt"],(function(a,b,c,d,e,f,g,h){a=h._("__JHASH__gIfOOQ2_f96__JHASH__");b={id:"adsAIFeedbackSubmissionSucceededCard",cardType:"success",canDismiss:!0,onDismiss:function(){},header:a,dismissTimer:5e3};c=h._("__JHASH__MTW20M_vOvu__JHASH__");d=h._("__JHASH__4U5hkkYl6y5__JHASH__");g.feedbackSubmissionSuccessTitle=a;g.feedbackSubmissionSuccessCard=b;g.writeMessage=c;g.newChat=d}),226);
__d("getIsAdsAIEnabledOnMBS",["gkx"],(function(a,b,c,d,e,f,g){"use strict";function a(){return c("gkx")("21034")&&c("gkx")("659")}g["default"]=a}),98);
__d("useGeoToasterWrapper",["cr:1939"],(function(a,b,c,d,e,f,g){"use strict";function a(){return b("cr:1939")()}g["default"]=a}),98);
__d("AdsOsmipChatMessageFeedbackButton.react",["fbt","ix","AdsAIMessengerUtils","AdsAddToastCardAction","AdsMessengerContext.react","AdsOsmipChatConstants.react","BotFeedbackKind","FDSIcon.react","GeoFlexbox.react","I64","ImageIconSource","JSResourceForInteraction","LSIntEnum","LSMailboxAIBotFeedbackSubmissionStatus","MWMessageListLoggingContext","MessengerWebUXLogger","ReQL","ReQLSuspense","cr:294","fbicon","getIsAdsAIEnabledOnMBS","justknobx","lazyLoadComponent","react","useBoolean","useGeoToasterWrapper","useMWV2SubmitFeedbackAction","useMWXLazyDialog","useMWXPushToast","useReStore"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j,k,l,m,n=m||(m=d("react"));e=m;var o=e.useCallback,p=e.useMemo,q={dislikeIcon:{transform:"x19jd1h0",$$css:!0},feedbackButton:{marginTop:"x1rhet7l",marginEnd:"x1hwekxz",marginBottom:"xwoyzhm",marginStart:"xnfveip",columnGap:"xfex06f",$$css:!0}},r=c("JSResourceForInteraction")("MWV2AdsAINegativeFeedbackDialog.react").__setRef("AdsOsmipChatMessageFeedbackButton.react"),s=c("lazyLoadComponent")(c("JSResourceForInteraction")("AdsOsmipChatSubmitNegativeFeedbackModal.react").__setRef("AdsOsmipChatMessageFeedbackButton.react"));function a(a){var e,g=a.message,m=g.botResponseId;a=d("AdsMessengerContext.react").useAdsMessengerContext();var t=a.isMessengerInAds,u=c("useMWXPushToast")(),v=c("useGeoToasterWrapper")(),w=o(function(){b("cr:294")!=null&&v!=null&&v.add(n.jsx(b("cr:294"),{heading:d("AdsOsmipChatConstants.react").feedbackSubmissionSuccessTitle}))},[v]);a=o(function(){t?c("getIsAdsAIEnabledOnMBS")()?w():c("AdsAddToastCardAction").dispatch({toastCard:d("AdsOsmipChatConstants.react").feedbackSubmissionSuccessCard},{line:"98",module:"AdsOsmipChatMessageFeedbackButton.react.js",moduleID:f.id}):u({title:d("AdsOsmipChatConstants.react").feedbackSubmissionSuccessTitle})},[t,u,w]);var x=c("useMWV2SubmitFeedbackAction")(m),y=c("useMWV2SubmitFeedbackAction")(m,a);a=c("useBoolean")(!1);var z=a.value,A=a.setTrue;a=a.setFalse;var B=c("useMWXLazyDialog")(r),C=B[0];B=o(function(){return t?A():C({message:g,onSubmit:x,onSubmitWithToast:y})},[t,A,C,g,x,y]);var D=c("MessengerWebUXLogger").useInteractionLogger(),E=d("MWMessageListLoggingContext").useFlowInstanceId(),F=p(function(){var a;return{extraData:{botResponseId:(a=m)!=null?a:"",isShibaMessage:d("AdsAIMessengerUtils").isMessageFromAdsAIShibaBot(g).toString()},flowInstanceId:E.current}},[m,E,g]),G=o(function(){y(c("BotFeedbackKind").BOT_FEEDBACK_POSITIVE),D==null?void 0:D(babelHelpers["extends"]({eventName:"ads_ai_submit_positive_feedback_generic"},F))},[F,D,y]),H=(j||(j=c("useReStore")))(),I=d("ReQLSuspense").useFirst(function(){var a;return d("ReQL").fromTableDescending(H.tables.ai_bot_feedback_submission_status).getKeyRange((a=m)!=null?a:"")},[H,m],f.id+":166");e=(k||(k=d("I64"))).equal((e=I==null?void 0:I.feedbackSubmissionStatus)!=null?e:(k||(k=d("I64"))).neg_one,(l||(l=d("LSIntEnum"))).ofNumber(c("LSMailboxAIBotFeedbackSubmissionStatus").SUBMITTED));I=e&&(k||(k=d("I64"))).equal((I=I==null?void 0:I.feedbackKindType)!=null?I:(k||(k=d("I64"))).neg_one,(l||(l=d("LSIntEnum"))).ofNumber(c("BotFeedbackKind").BOT_FEEDBACK_POSITIVE));e=e&&!I;I=!I&&!e;e=c("justknobx")._("2062");if(!e||m==null||!I)return null;e=new(c("ImageIconSource"))(i("838074"),16,16);I=t?d("fbicon")._(i("420842"),16):e;e=t?d("fbicon")._(i("420838"),16):e;return n.jsxs(c("GeoFlexbox.react"),{xstyle:q.feedbackButton,children:[t&&n.jsx(s,{isShown:z,message:g,onClose:a,onSubmit:x,onSubmitWithToast:y}),n.jsx(c("FDSIcon.react"),{"aria-label":h._("__JHASH__obrYq4A4MTx__JHASH__"),color:"tertiary",icon:I,onPress:G}),n.jsx(c("FDSIcon.react"),{"aria-label":h._("__JHASH__XSpccoXfTwT__JHASH__"),color:"tertiary",icon:e,xstyle:!t&&q.dislikeIcon,onPress:B})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("BizInboxStateContext",["react"],(function(a,b,c,d,e,f,g){"use strict";var h;a=h||d("react");b=a.createContext(Object.freeze({}));c=b;g["default"]=c}),98);
__d("CautionCircleFilled12.svg.react",["react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){return i.jsxs("svg",babelHelpers["extends"]({viewBox:"0 0 12 13",width:"1em",height:"1em",fill:"currentColor"},a,{children:[a.title!=null&&i.jsx("title",{children:a.title}),a.children!=null&&i.jsx("defs",{children:a.children}),i.jsx("g",{fillRule:"evenodd",transform:"translate(-450 -1073)",children:i.jsx("path",{d:"m456.998 1077.072-.25 2.99a.75.75 0 0 1-1.495 0l-.25-2.99a.87.87 0 0 1-.003-.062c0-.497.374-1.01 1-1.01s1 .513 1 1.01a.87.87 0 0 1-.002.062M456 1083a1.001 1.001 0 0 1 0-2c.551 0 1 .449 1 1 0 .551-.449 1-1 1m0-9.5a6 6 0 1 0 .001 12 6 6 0 0 0 0-12"})})]}))}a.displayName=a.name+" [from "+f.id+"]";a._isSVG=!0;b=a;g["default"]=b}),98);
__d("CometMarketplaceCreateDiscountedPriceDialogContentQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="5428046370622309"}),null);
__d("CometMarketplaceCreateDiscountedPriceDialogContentQuery$Parameters",["CometMarketplaceCreateDiscountedPriceDialogContentQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a={kind:"PreloadableConcreteRequest",params:{id:b("CometMarketplaceCreateDiscountedPriceDialogContentQuery_facebookRelayOperation"),metadata:{},name:"CometMarketplaceCreateDiscountedPriceDialogContentQuery",operationKind:"query",text:null}};e.exports=a}),null);
__d("CometMarketplaceCreateDiscountedPriceDialogNUXQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="8892595114092780"}),null);
__d("CometMarketplaceCreateDiscountedPriceDialogNUXQuery$Parameters",["CometMarketplaceCreateDiscountedPriceDialogNUXQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a={kind:"PreloadableConcreteRequest",params:{id:b("CometMarketplaceCreateDiscountedPriceDialogNUXQuery_facebookRelayOperation"),metadata:{},name:"CometMarketplaceCreateDiscountedPriceDialogNUXQuery",operationKind:"query",text:null}};e.exports=a}),null);
__d("CometMarketplaceCreateDiscountedPriceDialog.entrypoint",["CometMarketplaceCreateDiscountedPriceDialogContentQuery$Parameters","CometMarketplaceCreateDiscountedPriceDialogNUXQuery$Parameters","JSResourceForInteraction","WebPixelRatio"],(function(a,b,c,d,e,f,g){"use strict";a={getPreloadProps:function(a){var b=d("WebPixelRatio").get();return{queries:{cometMarketplaceCreateDiscountedPriceDialogContentQueryReference:{parameters:c("CometMarketplaceCreateDiscountedPriceDialogContentQuery$Parameters"),variables:{thread_id:a.threadId}},cometMarketplaceCreateDiscountedPriceDialogNUXQueryReference:{parameters:c("CometMarketplaceCreateDiscountedPriceDialogNUXQuery$Parameters"),variables:{contentParams:{pixelRatio:b},scale:b}}}}},root:c("JSResourceForInteraction")("CometMarketplaceCreateDiscountedPriceDialog.react").__setRef("CometMarketplaceCreateDiscountedPriceDialog.entrypoint")};g["default"]=a}),98);
__d("CtmMultiPhotoCarouselMsgrMultiPhotoCarouselClickFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("1746398");b=d("FalcoLoggerInternal").create("ctm_multi_photo_carousel_msgr_multi_photo_carousel_click",a);e=b;g["default"]=e}),98);
__d("CustomerInformationTemplateFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("5813");b=d("FalcoLoggerInternal").create("customer_information_template",a);e=b;g["default"]=e}),98);
__d("E2EELinkPreviewXMADataStatus",[],(function(a,b,c,d,e,f){a=Object.freeze({LOADED:1,LOADING:2,DISABLED:3});f["default"]=a}),66);
__d("FBP2MECPCheckoutDialog.entrypoint",["JSResourceForInteraction"],(function(a,b,c,d,e,f,g){"use strict";a={getPreloadProps:function(){return{}},root:c("JSResourceForInteraction")("FBP2MECPCheckoutDialog.react").__setRef("FBP2MECPCheckoutDialog.entrypoint")};g["default"]=a}),98);
__d("FBPayHubTransactionDetailDialogQuery$Parameters",["cr:1932967"],(function(a,b,c,d,e,f){"use strict";e.exports=b("cr:1932967")}),null);
__d("FBPayHubTransactionDetailDialog.entrypoint",["FBPayHubTransactionDetailDialogQuery$Parameters","JSResourceForInteraction"],(function(a,b,c,d,e,f,g){"use strict";a={getPreloadProps:function(a){a=a.transactionID;return{queries:{fBPayHubTransactionDetailDialogQueryReference:{parameters:b("FBPayHubTransactionDetailDialogQuery$Parameters"),variables:{transaction_id:a}}}}},root:c("JSResourceForInteraction")("FBPayHubTransactionDetailDialog.react").__setRef("FBPayHubTransactionDetailDialog.entrypoint")};g["default"]=a}),98);
__d("FBPayHubTransactionDetailDialogQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="23892077650440585"}),null);
__d("FBPayHubTransactionDetailDialogQuery$Parameters.facebook",["FBPayHubTransactionDetailDialogQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a={kind:"PreloadableConcreteRequest",params:{id:b("FBPayHubTransactionDetailDialogQuery_facebookRelayOperation"),metadata:{},name:"FBPayHubTransactionDetailDialogQuery",operationKind:"query",text:null}};e.exports=a}),null);
__d("GraphQLMessengerPlatformCtaPostHandlingMutation_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="4973572169363354"}),null);
__d("GraphQLMessengerPlatformCtaPostHandlingMutation.graphql",["GraphQLMessengerPlatformCtaPostHandlingMutation_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"input"}],c=[{alias:null,args:[{kind:"Variable",name:"data",variableName:"input"}],concreteType:"MessengerPlatformCtaPostHandlingResponsePayload",kind:"LinkedField",name:"messenger_platform_cta_post_handling",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"client_mutation_id",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"GraphQLMessengerPlatformCtaPostHandlingMutation",selections:c,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"GraphQLMessengerPlatformCtaPostHandlingMutation",selections:c},params:{id:b("GraphQLMessengerPlatformCtaPostHandlingMutation_facebookRelayOperation"),metadata:{},name:"GraphQLMessengerPlatformCtaPostHandlingMutation",operationKind:"mutation",text:null}}}();e.exports=a}),null);
__d("GroupsCometAdmodChatsPendingPostReviewDialogQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="8945865935477873"}),null);
__d("GroupsCometAdmodChatsPendingPostReviewDialogQuery$Parameters",["CometImmersivePhotoCanUserDisable3DMotion.relayprovider","FBReelsMediaFooter_comet_enable_reels_ads_gk.relayprovider","GHLShouldChangeAdIdFieldName.relayprovider","GHLShouldChangeSponsoredDataFieldName.relayprovider","GroupsCometAdmodChatsPendingPostReviewDialogQuery_facebookRelayOperation","IsMergQAPolls.relayprovider","IsWorkUser.relayprovider"],(function(a,b,c,d,e,f){"use strict";a={kind:"PreloadableConcreteRequest",params:{id:b("GroupsCometAdmodChatsPendingPostReviewDialogQuery_facebookRelayOperation"),metadata:{},name:"GroupsCometAdmodChatsPendingPostReviewDialogQuery",operationKind:"query",text:null,providedVariables:{__relay_internal__pv__GHLShouldChangeSponsoredDataFieldNamerelayprovider:b("GHLShouldChangeSponsoredDataFieldName.relayprovider"),__relay_internal__pv__GHLShouldChangeAdIdFieldNamerelayprovider:b("GHLShouldChangeAdIdFieldName.relayprovider"),__relay_internal__pv__CometImmersivePhotoCanUserDisable3DMotionrelayprovider:b("CometImmersivePhotoCanUserDisable3DMotion.relayprovider"),__relay_internal__pv__IsWorkUserrelayprovider:b("IsWorkUser.relayprovider"),__relay_internal__pv__IsMergQAPollsrelayprovider:b("IsMergQAPolls.relayprovider"),__relay_internal__pv__FBReelsMediaFooter_comet_enable_reels_ads_gkrelayprovider:b("FBReelsMediaFooter_comet_enable_reels_ads_gk.relayprovider")}}};e.exports=a}),null);
__d("GroupsCometAdmodChatsPendingPostReviewDialog.entrypoint",["GroupsCometAdmodChatsPendingPostReviewDialogQuery$Parameters","JSResourceForInteraction","WebPixelRatio"],(function(a,b,c,d,e,f,g){"use strict";a={getPreloadProps:function(a){var b=a.authorID,e=a.groupID,f=a.postID;a=a.scale;return{queries:{queryReference:{parameters:c("GroupsCometAdmodChatsPendingPostReviewDialogQuery$Parameters"),variables:{authorID:b,feedLocation:"GROUP_PENDING",focusCommentID:null,groupID:e,postID:f,privacySelectorRenderLocation:"COMET_STREAM",renderLocation:"group_pending_queue",scale:a?a:d("WebPixelRatio").get(),useDefaultActor:!1}}}}},root:c("JSResourceForInteraction")("GroupsCometAdmodChatsPendingPostReviewDialog.react").__setRef("GroupsCometAdmodChatsPendingPostReviewDialog.entrypoint")};b=a;g["default"]=b}),98);
__d("GroupsCometAdmodChatsReviewDialogQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="7902595459843222"}),null);
__d("GroupsCometAdmodChatsReviewDialogQuery$Parameters",["GroupsCometAdmodChatsReviewDialogQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a={kind:"PreloadableConcreteRequest",params:{id:b("GroupsCometAdmodChatsReviewDialogQuery_facebookRelayOperation"),metadata:{},name:"GroupsCometAdmodChatsReviewDialogQuery",operationKind:"query",text:null}};e.exports=a}),null);
__d("GroupsCometAdmodChatsReviewDialog.entrypoint",["GroupsCometAdmodChatsReviewDialogQuery$Parameters","JSResourceForInteraction","WebPixelRatio"],(function(a,b,c,d,e,f,g){"use strict";a={getPreloadProps:function(a){var b=a.groupID,e=a.profileID;a=a.scale;return{queries:{queryReference:{parameters:c("GroupsCometAdmodChatsReviewDialogQuery$Parameters"),variables:{groupID:b,profileID:e,scale:a?a:d("WebPixelRatio").get()}}}}},root:c("JSResourceForInteraction")("GroupsCometAdmodChatsReviewDialog.react").__setRef("GroupsCometAdmodChatsReviewDialog.entrypoint")};b=a;g["default"]=b}),98);
__d("IIGDAPI",["MAWBridge"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return function(){for(var b=arguments.length,c=new Array(b),e=0;e<b;e++)c[e]=arguments[e];return d("MAWBridge").getBridge().sendAndReceive("backend","igdapi",{args:c,type:a})}}g.makeBridgedApi=a}),98);
__d("IGDBridgedAPI",["IIGDAPI"],(function(a,b,c,d,e,f,g){"use strict";b={33:(a=d("IIGDAPI")).makeBridgedApi("33"),46:a.makeBridgedApi("46"),sendEditMessage:a.makeBridgedApi("sendEditMessage"),sendMediaMessage:a.makeBridgedApi("sendMediaMessage"),sendOrRemoveReaction:a.makeBridgedApi("sendOrRemoveReaction"),sendXmaReceiverFetch:a.makeBridgedApi("sendXmaReceiverFetch")};c=b;g["default"]=c}),98);
__d("IGDDisappearingMessagesStrings",["fbt"],(function(a,b,c,d,e,f,g,h){"use strict";a="https://help.instagram.com/491565145294150/";b=h._("__JHASH__2OBcaB7QAZn__JHASH__");g.LEARN_MORE_LINK=a;g.DM_SECURITY_NOTICE=b}),226);
__d("IGDGetMessagePluginInfo",["IGDInstamadilloUtils","LSIntEnum","LSPendingTasksPluginType","asyncToGeneratorRuntime","isInstamadillo"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b,c){return b?i(a,b):c()}function i(a,b){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){if(!c("isInstamadillo")())return{openEb:!1,pluginType:void 0};var e=(yield a.messages.index("messageId").get(b.messageId));if(!d("IGDInstamadilloUtils").isInstamadilloMessage(e))return{openEb:!1,pluginType:void 0};e=(yield a.e2ee_igMessageAuxiliaryInfo.get(b.messageId));a=Boolean(e==null?void 0:e.openEb);return{openEb:a,pluginType:(h||(h=d("LSIntEnum"))).ofNumber(c("LSPendingTasksPluginType").IGD_INSTAMADILLO)}});return j.apply(this,arguments)}g.IGDGetMessagePluginInfo=a}),98);
__d("InformTreatmentTitle",["$InternalEnum"],(function(a,b,c,d,e,f){a=b("$InternalEnum")({MISINFORMATION:"misinformation",FALSE_NEWS:"false_news",MISLEADING_NEWS:"misleading_news",MISSING_CONTEXT:"missing_context",ALTERED_MEDIA:"altered_media",PREMATURE_CLAIM_OF_ELECTION_RESULTS:"premature_claim_of_election_results",REJECTION_OF_ELECTION_RESULTS:"rejection_of_election_results",UNSUBSTANTIATED_CLAIMS_ABOUT_VOTING_METHOD:"unsubstantiated_claims_about_voting_method",UNSUBSTANTIATED_CLAIMS_ABOUT_WIDESPREAD_ELECTIONS_FRAUD:"unsubstantiated_claims_about_widespread_elections_fraud",AI_GENERATED_CONTENT:"ai_generated_content"});c=a;f["default"]=c}),66);
__d("LSCTAIconType",[],(function(a,b,c,d,e,f){a=Object.freeze({NONE:0,FB:1,FB_ALWAYS_WHITE:2,DOTS_THREE_HORIZONTAL:3,CHEVRON_DOWN:4,FB_INFO_SMALL:5,CAMERA:6,CIRCLED_X:7,PENCIL:8,META_HORIZON:9});f["default"]=a}),66);
__d("LSCommunityInviteStatus",[],(function(a,b,c,d,e,f){a=Object.freeze({ADDED_BUT_UNCONFIRMED:5,IN_COMMUNITY:0,INVITED:1,REQUEST_PENDING:2,UNENGAGED_MEMBER:4,UNREQUESTED:3});f["default"]=a}),66);
__d("LSContactReachabilityStatusType",[],(function(a,b,c,d,e,f){a=Object.freeze({REACHABLE:0,UNREACHABLE_USER_TYPE:1,UNREACHABLE_ADULT_TYPE:2,REACHABLE_INVITE_BANNER:3,UNREACHABLE_INVITE_BLOCK:4,UNREACHABLE_INTEROP_THIRD_PARTY_USER:5,UNREACHABLE_INTEROP_USER_OPT_OUT:6,UNREACHABLE_INTEROP_THIRD_PARTY_APP_NOT_SUPPORTED:7,UNREACHABLE_INTEROP_USER_REMOVED_THIRD_PARTY_APP:8,UNREACHABLE_NULL_INTEROP_USER:9,UNREACHABLE_MR_LIMIT_BLOCK:10,UNREACHABLE_RS_UPSELL_ELIGIBLE:11,REACHABLE_INVITE_MODEL_TEXT_ONLY:12,REACHABLE_INVITE_MODEL_TEXT_ONLY_AND_BANNER:13,UNREACHABLE_INVITE_MODEL_BLOCK_COMPOSER:14});f["default"]=a}),66);
__d("LSCustomUpdateMuteManagement",["LSGetViewerFBID","LSIssueNewTask"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[0]=a[0],a})},function(e){return d[1]=new c.Map(),d[1].set("game_id",a[1]),d[1].set("muted_user_id",a[0]),d[1].set("owner_id",d[0]),d[1].set("user_action_type",a[2]),d[2]=c.toJSON(d[1]),c.storedProcedure(b("LSIssueNewTask"),"instant_game_custom_update_mute_management",c.i64.cast([0,759]),d[2],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSMailboxCustomUpdateMuteManagementStoredProcedure";e.exports=a}),null);
__d("LSCustomUpdateMuteManagementStoredProcedure",["LSCustomUpdateMuteManagement","cr:8709"],(function(a,b,c,d,e,f,g){function a(a,b){return c("LSCustomUpdateMuteManagement")(b.mutedUserId,b.gameId,b.userActionType,a)}g["default"]=a}),98);
__d("LSFetchMessageSeenCount",["LSIssueNewTask"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return d[0]=new c.Map(),d[0].set("thread_id",a[0]),d[0].set("message_id",a[1]),d[1]=d[0].get("thread_id"),d[0],d[2]=c.toJSON(d[0]),c.storedProcedure(b("LSIssueNewTask"),["cm_message_seen_count",c.i64.to_string(d[1])].join(""),c.i64.cast([0,540]),d[2],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))},function(a){return c.resolve(e)}])}a.__sproc_name__="LSMailboxFetchMessageSeenCountStoredProcedure";e.exports=a}),null);
__d("LSFetchMessageSeenCountStoredProcedure",["LSFetchMessageSeenCount","cr:8709"],(function(a,b,c,d,e,f,g){function a(a,b){return c("LSFetchMessageSeenCount")(b.threadKey,b.messageId,a)}g["default"]=a}),98);
__d("LSIssueReactionsV2DetailsUsersListFetch",["LSIssueNewTaskWithExtraOperations"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(b){return c.filter(c.db.table(243).fetch([[[a[0],a[1]]]]),function(b){return c.i64.eq(a[0],b.threadId)&&a[1]===b.messageId&&c.i64.eq(a[2],b.reactionFbid)}).next().then(function(b,d){var e=b.done;b=b.value;return e?c.db.table(243).add({threadId:a[0],messageId:a[1],reactionFbid:c.i64.cast([0,0]),minTimestampMs:c.i64.cast([2147483647,4294967295]),hasMoreAfter:!1,hasMoreBefore:!1,isLoadingAfter:!1,isLoadingBefore:!0,maxTimestampMs:c.i64.cast([2147483647,4294967295]),nextPageCursor:""}):(d=b.item,c.forEach(c.db.table(243).fetch([[[d.threadId,d.messageId,d.reactionFbid,d.minTimestampMs]]]),function(a){var b=a.update;a.item;return b({isLoadingBefore:!0})}))})},function(b){return c.db.table(9).fetch([[[a[0]]]]).next().then(function(a,b){var e=a.done;a=a.value;return e?d[1]=c.i64.cast([0,1]):(b=a.item,d[6]=b.syncGroup,c.i64.neq(d[6],void 0)?d[5]=d[6]:d[5]=c.i64.cast([0,1]),d[1]=d[5])})},function(e){return d[3]=new c.Map(),d[3].set("thread_id",a[0]),d[3].set("message_id",a[1]),d[3].set("reaction_fbid",a[2]),d[3].set("cursor",a[3]),d[3].set("sync_group",d[1]),d[4]=c.toJSON(d[3]),c.storedProcedure(b("LSIssueNewTaskWithExtraOperations"),"fetch_reactions_v2_details_users_list",c.i64.cast([0,577]),d[4],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),void 0,c.i64.cast([0,0]))}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSMailboxIssueReactionsV2DetailsUsersListFetchStoredProcedure";e.exports=a}),null);
__d("LSIssueReactionsV2DetailsUsersListFetchStoredProcedure",["LSIssueReactionsV2DetailsUsersListFetch","cr:8709"],(function(a,b,c,d,e,f,g){function a(a,b){return c("LSIssueReactionsV2DetailsUsersListFetch")(b.threadId,b.messageId,b.reactionFbid,b.nextPageCursor,a)}g["default"]=a}),98);
__d("LSSetClientCTAType",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.forEach(b.db.table(19).fetch([[[a[0]]]]),function(b){var c=b.update;b.item;return c({type_:a[1]})})},function(a){return b.resolve(c)}])}a.__sproc_name__="LSMailboxSetClientCTATypeStoredProcedure";e.exports=a}),null);
__d("LSMarkAsX",["LSIssueNewTask","LSSetClientCTAType"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(d){return c.storedProcedure(b("LSSetClientCTAType"),a[0],"xma_disabled_cta")},function(e){return d[0]=new c.Map(),d[0].set("cta_id",a[0]),d[0].set("order_id",a[1]),d[0].set("cta_type",a[2]),d[1]=c.toJSON(d[0]),c.storedProcedure(b("LSIssueNewTask"),"p2m_mark_as_x",c.i64.cast([0,808]),d[1],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSMailboxMarkAsXStoredProcedure";e.exports=a}),null);
__d("LSMarkAsXStoredProcedure",["LSMarkAsX","cr:8709"],(function(a,b,c,d,e,f,g){function a(a,b){return c("LSMarkAsX")(b.ctaId,b.orderId,b.ctaType,a)}g["default"]=a}),98);
__d("LSMediaUrlAttachmentItem",["LSMediaUrlUtils"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=a.previewUrlExpirationTimestampMs;return b!=null&&d("LSMediaUrlUtils").isTimestampExpired(b)?a.previewUrlFallback:a.previewUrl}function b(a){var b=a.previewUrlExpirationTimestampMs;return b!=null&&d("LSMediaUrlUtils").isTimestampExpired(b)?a.previewUrlFallback:a.previewUrlLarge}function c(a){var b=a.playableUrlExpirationTimestampMs;return b!=null&&d("LSMediaUrlUtils").isTimestampExpired(b)?a.playableUrlFallback:a.playableUrl}function e(a){var b=a.faviconUrlExpirationTimestampMs;return b!=null&&d("LSMediaUrlUtils").isTimestampExpired(b)?a.faviconUrlFallback:a.faviconUrl}g.previewUrl=a;g.previewUrlLarge=b;g.playableUrl=c;g.faviconUrl=e}),98);
__d("LSOptimisticProcessMarketplaceCallFunctionCTA",["LSIssueNewTask"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(b){return c.db.table(9).fetch([[[a[1]]]]).next().then(function(a,b){var e=a.done;a=a.value;return e?d[0]=c.i64.cast([0,1]):(b=a.item,d[5]=b.syncGroup,c.i64.neq(d[5],void 0)?d[4]=d[5]:d[4]=c.i64.cast([0,1]),d[0]=d[4])})},function(e){return d[2]=new c.Map(),d[2].set("action_type",a[4]),d[2].set("attachment_fbid",a[2]),d[2].set("message_id",a[0]),d[2].set("target_id",a[3]),d[2].set("thread_key",a[1]),d[2].set("sync_group",d[0]),d[3]=c.toJSON(d[2]),c.storedProcedure(b("LSIssueNewTask"),"process_marketplace_xma_cta",c.i64.cast([0,185]),d[3],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSMailboxOptimisticProcessMarketplaceCallFunctionCTAStoredProcedure";e.exports=a}),null);
__d("LSOptimisticProcessMarketplaceCallFunctionCTAStoredProcedure",["LSOptimisticProcessMarketplaceCallFunctionCTA","cr:8709"],(function(a,b,c,d,e,f,g){function a(a,b){return c("LSOptimisticProcessMarketplaceCallFunctionCTA")(b.messageId,b.threadKey,b.attachmentFbid,b.targetId,b.actionType,a)}g["default"]=a}),98);
__d("LSUpdateBotSubscription",["LSIssueNewTask"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return d[0]=new c.Map(),d[0].set("thread_key",a[0]),d[0].set("user_action_type",a[1]),d[1]=c.toJSON(d[0]),c.storedProcedure(b("LSIssueNewTask"),"game_messenger_updates_management_xmat",c.i64.cast([0,755]),d[1],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))},function(a){return c.resolve(e)}])}a.__sproc_name__="LSMailboxUpdateBotSubscriptionStoredProcedure";e.exports=a}),null);
__d("LSUpdateBotSubscriptionStoredProcedure",["LSUpdateBotSubscription","cr:8709"],(function(a,b,c,d,e,f,g){function a(a,b){return c("LSUpdateBotSubscription")(b.threadKey,b.userActionType,a)}g["default"]=a}),98);
__d("LSVerifiedType",[],(function(a,b,c,d,e,f){a=Object.freeze({NOT_VERIFIED:0,DEFAULT:1,VERIFIED_FOOTER:2,VERIFIED_HEADER_TITLE_ONLY:3,VERIFIED_CONTENT_TITLE_ONLY:4});f["default"]=a}),66);
__d("MAWConvertExtendedContentOverlayIconGlyphToInformTreatmentRenderingType",["WAArmadilloXMA.pb","WALogger"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] Not a valid ExtendedContentOverlayIconGlyph: ",""]);h=function(){return a};return a}function a(a){switch(a){case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_OVERLAY_ICON_GLYPH.MEDIA_LABEL:return"media_label";case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_OVERLAY_ICON_GLYPH.POST_LABEL:return"post_label";case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_OVERLAY_ICON_GLYPH.WARNING:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_OVERLAY_ICON_GLYPH.PRIVATE:default:d("WALogger").ERROR(h(),a);return"warning_screens"}}g.convertExtendedContentOverlayIconGlyphToInformTreatmentRenderingType=a}),98);
__d("useSecureThreadJid",["I64","Int64Hooks","LSMessagingThreadTypeUtil","MAWMiActOnActThreadReady","Promise","ReQL","ReQLSuspense","promiseDone","react","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k;e=k||d("react");var l=e.useRef,m=e.c;function a(a){var e,g=m(11),k=(i||(i=c("useReStore")))(),n=l();e=(e=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableAscending(k.tables.threads,["threadType"]).getKeyRange(a)},[k,a],f.id+":33"))==null?void 0:e.threadType;var o;g[0]!==e?(o=e?d("LSMessagingThreadTypeUtil").isArmadilloSecure(e):!1,g[0]=e,g[1]=o):o=g[1];var p=o;g[2]!==a||g[3]!==p||g[4]!==k.tables?(e=function(){if(a==null||(j||(j=d("I64"))).equal(a,(j||(j=d("I64"))).zero||!p))return;c("promiseDone")(d("MAWMiActOnActThreadReady").onActThreadReady(k.tables,a,"useThreadJid",function(a,c){n.current=c;return(h||(h=b("Promise"))).resolve()}))},g[2]=a,g[3]=p,g[4]=k.tables,g[5]=e):e=g[5];g[6]!==k||g[7]!==a||g[8]!==p?(o=[k,a,p],g[6]=k,g[7]=a,g[8]=p,g[9]=o):o=g[9];d("Int64Hooks").useEffectInt64(e,o);g[10]===Symbol["for"]("react.memo_cache_sentinel")?(e=function(){return n.current},g[10]=e):e=g[10];return e}g["default"]=a}),98);
__d("MAWEphemeralAdminMsgCta.react",["CometTextWithEntities.react","JSResourceForInteraction","MWXPressable.react","QPLUserFlow","qpl","react","useMWXLazyDialog","useSecureThreadJid"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||(h=d("react"))).c,j=h,k=c("JSResourceForInteraction")("MAWEphemeralSettingsDialog.react").__setRef("MAWEphemeralAdminMsgCta.react");function a(a){var b=i(13),d=a.threadKey;a=a.title;var e=c("useSecureThreadJid")(d),f;b[0]!==e||b[1]!==d?(f={getThreadJid:e,threadKey:d},b[0]=e,b[1]=d,b[2]=f):f=b[2];var g=f;e=c("useMWXLazyDialog")(k);var h=e[0];b[3]!==h||b[4]!==g?(d=function(){c("QPLUserFlow").start(c("qpl")._(1056845690,"2034"),{annotations:{string:{action_type:"change_ephemeral_message_duration"}}}),h(g)},b[3]=h,b[4]=g,b[5]=d):d=b[5];var l=d;b[6]!==l?(f=function(){return l()},b[6]=l,b[7]=f):f=b[7];b[8]!==a?(e=j.jsx(c("CometTextWithEntities.react"),{text:a}),b[8]=a,b[9]=e):e=b[9];b[10]!==f||b[11]!==e?(d=j.jsx(c("MWXPressable.react"),{onPress:f,children:e}),b[10]=f,b[11]=e,b[12]=d):d=b[12];return d}g["default"]=a}),98);
__d("MAWEphemeralMessageTimer.react",["fbt","CometScreenReaderText.react","I64","MAWEphemeralConsts","MWXText.react","WATimeUtils","react","setTimeout"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=i||(i=d("react"));b=i;var l=b.useEffect,m=b.useState,n=b.c;function o(a){if(a<d("MAWEphemeralConsts").oneMinuteInSeconds)return h._("__JHASH__A4ingmAx2be__JHASH__",[h._param("seconds",String(a).concat("s"))]);if(a<d("MAWEphemeralConsts").oneHourInSeconds)return h._("__JHASH__vWI2ZlgwXQb__JHASH__",[h._param("minutes",String(Math.floor(a/d("MAWEphemeralConsts").oneMinuteInSeconds)).concat("m"))]);return a<d("MAWEphemeralConsts").oneDayInSeconds?h._("__JHASH__25PcZ3MKsFM__JHASH__",[h._param("hours",String(Math.floor(a/d("MAWEphemeralConsts").oneHourInSeconds)).concat("h"))]):h._("__JHASH__eRreAbYsreU__JHASH__",[h._param("days",String(Math.floor(a/d("MAWEphemeralConsts").oneDayInSeconds)).concat("d"))])}function p(a,b){a=(j||(j=d("I64"))).to_int32(j.sub(a,j.of_float(d("WATimeUtils").unixTime())));return b!=null&&a>(j||(j=d("I64"))).to_int32(b)?(j||(j=d("I64"))).to_int32(b):a}function a(a){var b=n(17),e=a.ephemeralDurationInSec,f=a.expirationTimestamp,g=a.handleMessageExpired;b[0]!==f||b[1]!==e?(a=function(){return p(f,e)},b[0]=f,b[1]=e,b[2]=a):a=b[2];a=m(a);var i=a[0],j=a[1],q;b[3]!==i?(a=o(i),q=h._("__JHASH__LNXEmV_oB6W__JHASH__",[h._param("time",a)]),b[3]=i,b[4]=q,b[5]=a):(q=b[4],a=b[5]);q=q;var r;b[6]!==i||b[7]!==g?(r=function(){i>0&&c("setTimeout")(function(){return j(i-1)},d("MAWEphemeralConsts").msPerSec),i===0&&(g==null?void 0:g())},b[6]=i,b[7]=g,b[8]=r):r=b[8];var s;b[9]!==i||b[10]!==f||b[11]!==g?(s=[i,f,g],b[9]=i,b[10]=f,b[11]=g,b[12]=s):s=b[12];l(r,s);b[13]!==i||b[14]!==q||b[15]!==a?(r=i>0?k.jsxs("div",{className:"x2b8uid xbkr7qi",children:[k.jsx(c("CometScreenReaderText.react"),{text:q}),k.jsx("div",{"aria-hidden":!0,children:k.jsx(c("MWXText.react"),{testid:void 0,type:"meta1",children:a})})]}):null,b[13]=i,b[14]=q,b[15]=a,b[16]=r):r=b[16];return r}g["default"]=a}),226);
__d("URLScraper",["ArbiterMixin","DataStore","Event","URLMatcher","mixin"],(function(a,b,c,d,e,f,g){var h="scraperLastPermissiveMatch";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,c){var d;d=a.call(this)||this;d.input=b;d.enable();d.getValueFn=c;return d}var e=b.prototype;e.reset=function(){d("DataStore").set(this.input,h,null)};e.enable=function(){if(this.events)return;var a=function(a){window.setTimeout(this.check.bind(this,a),30)};this.events=c("Event").listen(this.input,{paste:a.bind(this,!1),keydown:a.bind(this,!0)})};e.disable=function(){if(!this.events)return;for(var a in this.events)this.events[a].remove();this.events=null};e.check=function(a){var c=this.getValueFn?this.getValueFn():this.input.value;if(a&&b.trigger(c))return;a=b.match(c);c=d("URLMatcher").permissiveMatch(c);c&&c!=d("DataStore").get(this.input,h)&&(d("DataStore").set(this.input,h,c),this.inform("match",{url:a||c,alt_url:c}))};return b}(c("mixin")(c("ArbiterMixin")));Object.assign(a,d("URLMatcher"));g["default"]=a}),98);
__d("getURLRanges",["URI","URLScraper","UnicodeUtils"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a){var b=[],e=0;while(!0){var f=(i||(i=d("UnicodeUtils"))).substr(a,e),g=c("URLScraper").match(f);if(!g)break;if(!(h||(h=c("URI"))).isValidURI(g))break;var j=g;/^[a-z][a-z0-9\-+.]+:\/\//i.test(g)||(j="http://"+g);var k=f.indexOf(g);f=i.strlen(f.substr(0,k));e+=f;k=g.length;b.push({offset:e,length:g.length,entity:{url:j}});e+=k}return b}g["default"]=a}),98);
__d("MAWFindFirstUrl",["getURLRanges"],(function(a,b,c,d,e,f,g){"use strict";function a(a){a=c("getURLRanges")(a);return a.length===0?[]:a}g.findFirstUrl=a}),98);
__d("MAWIsFBXMA",["LSIntEnum","LSXmaContentType"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){if(a==null)return!1;switch((h||(h=d("LSIntEnum"))).toNumber(a)){case c("LSXmaContentType").FB_FEED_SHARE:case c("LSXmaContentType").FB_SHORT:case c("LSXmaContentType").MSG_RECEIVER_FETCH:return!0;default:return!1}}g.isFBXMA=a}),98);
__d("MAWIsLinkPreviewWaitForXmaEnabled",["qex"],(function(a,b,c,d,e,f,g){"use strict";function a(){return c("qex")._("2042")===!0}function b(){return c("qex")._("2072")===!0}g.isLinkPreviewWaitForXmaEnabled=a;g.isLinkPreviewWaitForXmaEnabledShortTimeout=b}),98);
__d("MAWIsReceiverFetchXmaInLoadingState",["I64","LSIntEnum","LSXmaContentType","isReceiverFetchDualSendReceivingEnabled","isReceiverFetchReceivingEnabled"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a,b){var e=(b==null?void 0:b.hasXmaPreview)!==!1;e=e?c("isReceiverFetchDualSendReceivingEnabled")(!0):c("isReceiverFetchReceivingEnabled")(!0);return(h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(536870912))&&((b==null?void 0:b.xmaContentType)==null||(i||(i=d("LSIntEnum"))).toNumber(b==null?void 0:b.xmaContentType)===c("LSXmaContentType").MSG_RECEIVER_FETCH)&&e}g.isReceiverFetchXmaInLoadingState=a}),98);
__d("MAWIsXMAWithPlaintextHash",[],(function(a,b,c,d,e,f){"use strict";function a(a){return![a.xmaPreviewFbid,a.xmaHeaderImageFbid,a.xmaFaviconFbid].filter(Boolean).every(isFinite)}f.isXMAWithPlaintextHash=a}),66);
__d("MAWMediaManagerUtilsDeferred",["requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";a=c("requireDeferred")("MAWMediaManagerUtils").__setRef("MAWMediaManagerUtilsDeferred");b=a;g["default"]=b}),98);
__d("MAWPreProcessLinkPreviewQPL",["MAWLoggerUtils","QPLUserFlow","justknobx","qpl"],(function(a,b,c,d,e,f,g){"use strict";var h=c("qpl")._(1056840460,"718");function a(a){var b=a.draftId;a=a.url;b=b.concat(a);var e=d("MAWLoggerUtils").getInstanceKeyFromId(b);a=c("justknobx")._("2714");c("QPLUserFlow").start(h,{annotations:{string:{preprocess_type:"link_preview_xma"}},instanceKey:e,timeoutInMs:a});return{addAnnotations:function(a){c("QPLUserFlow").addAnnotations(h,a,{instanceKey:e})},addPoint:function(a,b){c("QPLUserFlow").addPoint(h,a,{instanceKey:e}),b!=null&&c("QPLUserFlow").addAnnotations(h,b,{instanceKey:e})},endCancel:function(a,b){c("QPLUserFlow").endCancel(h,{annotations:a,cancelReason:b,instanceKey:e})},endFail:function(a,b){c("QPLUserFlow").endFailure(h,a,{instanceKey:e}),b!=null&&c("QPLUserFlow").addAnnotations(h,b,{instanceKey:e})},endSuccess:function(){c("QPLUserFlow").endSuccess(h,{instanceKey:e})}}}g.startMediaPreProcessLinkPreviewQpl=a}),98);
__d("MDSCautionTriangleSvgIcon.react",["MDSSvgIcon.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||(h=d("react"))).c,j=h;function a(a){var b=i(3),d;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(d=j.jsx("path",{clipRule:"evenodd",d:"M19.747 8.027c-.764-1.367-2.73-1.367-3.494 0L6.757 25.025C6.012 26.358 6.977 28 8.504 28h18.992c1.528 0 2.492-1.642 1.747-2.975L19.747 8.027zm-3.159 5.97a1.414 1.414 0 112.824 0l-.353 6.005a1.06 1.06 0 01-2.118 0l-.353-6.005zm2.662 9.753a1.25 1.25 0 11-2.5 0 1.25 1.25 0 012.5 0z",fillRule:"evenodd"}),b[0]=d):d=b[0];b[1]!==a?(d=j.jsx(c("MDSSvgIcon.react"),babelHelpers["extends"]({},a,{children:d})),b[1]=a,b[2]=d):d=b[2];return d}g["default"]=a}),98);
__d("MDSSvgDocumentCompleteIcon.react",["MDSSvgIcon.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||(h=d("react"))).c,j=h;function a(a){var b=i(4),d,e;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(d=j.jsx("path",{clipRule:"evenodd",d:"M18 8c0-.6-.4-1-1-1h-6a2 2 0 00-2 2v18c0 1.1.9 2 2 2h14a2 2 0 002-2V17c0-.6-.4-1-1-1h-4a4 4 0 01-4-4V8zm-6 7c0-.6.4-1 1-1h2a1 1 0 110 2h-2a1 1 0 01-1-1zm1 3.5a1 1 0 100 2h10a1 1 0 100-2H13zm0 4.5a1 1 0 100 2h10a1 1 0 100-2H13z",fillRule:"evenodd"}),e=j.jsx("path",{d:"M22 14h4a1 1 0 00.7-1.7l-5-5A1 1 0 0020 8v4c0 1.1.9 2 2 2z"}),b[0]=d,b[1]=e):(d=b[0],e=b[1]);b[2]!==a?(d=j.jsxs(c("MDSSvgIcon.react"),babelHelpers["extends"]({},a,{children:[d,e]})),b[2]=a,b[3]=d):d=b[3];return d}g["default"]=a}),98);
__d("MessengerPlatformClientTypedLogger",["Banzai","GeneratedLoggerUtils"],(function(a,b,c,d,e,f){"use strict";a=function(){function a(){this.$1={}}var c=a.prototype;c.log=function(a){b("GeneratedLoggerUtils").log("logger:MessengerPlatformClientLoggerConfig",this.$1,b("Banzai").BASIC,a)};c.logVital=function(a){b("GeneratedLoggerUtils").log("logger:MessengerPlatformClientLoggerConfig",this.$1,b("Banzai").VITAL,a)};c.logImmediately=function(a){b("GeneratedLoggerUtils").log("logger:MessengerPlatformClientLoggerConfig",this.$1,{signal:!0},a)};c.clear=function(){this.$1={};return this};c.getData=function(){return babelHelpers["extends"]({},this.$1)};c.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.setAppID=function(a){this.$1.appid=a;return this};c.setAppversion=function(a){this.$1.appversion=a;return this};c.setClientUserID=function(a){this.$1.client_userid=a;return this};c.setClienttime=function(a){this.$1.clienttime=a;return this};c.setCountry=function(a){this.$1.country=a;return this};c.setDeviceid=function(a){this.$1.deviceid=a;return this};c.setExtraClientData=function(a){this.$1.extra_client_data=a;return this};c.setIsemployee=function(a){this.$1.isemployee=a;return this};c.setLoggingToken=function(a){this.$1.logging_token=a;return this};c.setName=function(a){this.$1.name=a;return this};c.setRawclienttime=function(a){this.$1.rawclienttime=a;return this};c.setSessionid=function(a){this.$1.sessionid=a;return this};c.setThreadID=function(a){this.$1.thread_id=a;return this};return a}();c={appid:!0,appversion:!0,client_userid:!0,clienttime:!0,country:!0,deviceid:!0,extra_client_data:!0,isemployee:!0,logging_token:!0,name:!0,rawclienttime:!0,sessionid:!0,thread_id:!0};f["default"]=a}),66);
__d("PopupWindow",["DOMDimensions","DOMQuery","FlowMigrationUtilsForLegacyFiles","Layer","Popup","getViewportDimensions","isFalsey"],(function(a,b,c,d,e,f,g){var h={allowShrink:!0,strategy:"vector",timeout:100,widthElement:null};function b(a){Object.assign(h,a),window.setInterval(i,h.timeout)}function i(){var a=c("getViewportDimensions")(),b=j(),e=c("Layer").getTopmostLayer();if(e){e=(e=e.getRoot())==null?void 0:e.firstChild;e||d("FlowMigrationUtilsForLegacyFiles").invariantViolation("topMostLayer.getRoot().firstChild is null.");var f=d("DOMDimensions").getElementDimensions(e);f.height+=d("DOMDimensions").measureElementBox(e,"height",!0,!0,!0);f.width+=d("DOMDimensions").measureElementBox(e,"width",!0,!0,!0);b.height=Math.max(b.height,f.height);b.width=Math.max(b.width,f.width)}e=b.height-a.height;f=b.width-a.width;f<0&&c("isFalsey")(h.widthElement)&&(f=0);f=f>1?f:0;c("isFalsey")(h.allowShrink)&&e<0&&(e=0);if(e||f)try{window.console&&window.console.firebug,window.resizeBy(f,e),f&&window.moveBy(f/-2,0)}catch(a){}}function j(){var b=d("DOMDimensions").getDocumentDimensions();if(h.strategy==="offsetHeight"){var e=document.body;if(!e)d("FlowMigrationUtilsForLegacyFiles").invariantViolation("document.body is null.");else{b.height=(e=e.offsetHeight)!=null?e:0}}if(c("isFalsey")(h.widthElement)&&typeof h.widthElement==="string"){e=d("DOMQuery").scry(document.body,h.widthElement)[0];e&&(b.width=d("DOMDimensions").getElementDimensions(e).width)}e=a.Dialog;e&&e.max_bottom&&e.max_bottom>b.height&&(b.height=e.max_bottom);return b}function e(a,b,c,e){return d("Popup").open(a,c,b,e)}g._opts=h;g.init=b;g._resizeCheck=i;g._getDocumentSize=j;g.open=e}),98);
__d("XWebGraphQLMutationController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/webgraphql/mutation/",{query_id:{type:"FBID"},variables:{type:"String"},doc_id:{type:"FBID"},legacy_response_format:{type:"Bool",defaultValue:!1}})}),null);
__d("base62",[],(function(a,b,c,d,e,f){"use strict";var g="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";function a(a){if(!a)return"0";var b="";while(a>0)b=g[a%62]+b,a=Math.floor(a/62);return b}f["default"]=a}),66);
__d("WebGraphQLMutationHelper",["CurrentUser","WebGraphQLLegacyHelper","XWebGraphQLMutationController","base62"],(function(a,b,c,d,e,f,g){"use strict";var h=0;function a(a,b){return d("WebGraphQLLegacyHelper").getURI({controller:c("XWebGraphQLMutationController"),docID:a,variables:{input:babelHelpers["extends"]({client_mutation_id:c("base62")(h++),actor_id:c("CurrentUser").getID()},b)}})}g.getMutationURI=a}),98);
__d("XMNCommerceCTAPostProcessController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/messages/commerce/cta/postprocess/",{cta_id:{type:"String",required:!0},message_id:{type:"String"}})}),null);
__d("MNCommerceCTAProcessor",["AsyncRequest","CurrentUser","GraphQLMessengerPlatformCtaPostHandlingMutation.graphql","MessengerPlatformClientTypedLogger","PopupWindow","WebGraphQLMutationHelper","XMNCommerceCTAPostProcessController","nullthrows"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(){}var b=a.prototype;b.process=function(a,b){b===void 0&&(b=null);var e=d("PopupWindow").open("",500,1024);a=c("XMNCommerceCTAPostProcessController").getURIBuilder().setString("cta_id",a).setString("message_id",b).getURI();new(c("AsyncRequest"))().setURI(a).setMethod("POST").setHandler(function(a){return e.location=a.payload}).send()};b.postHandle=function(a,b){a=d("WebGraphQLMutationHelper").getMutationURI(c("nullthrows")(c("GraphQLMessengerPlatformCtaPostHandlingMutation.graphql").params.id),{cta_id:a,message_id:b});new(c("AsyncRequest"))().setURI(a).send()};b.logCTAClick=function(a){var b,d;d=(d=a)!=null?d.logging_token:d;var e=d?JSON.parse(d).click_source:"UNKNOWN";e={action_id:(b=a)!=null?b.id:b,action_type:(b=a)!=null?b.action_type:b,action_url:(a==null?void 0:a.action_url)||((b=a)!=null?b.action_link:b),click_source:e,page_id:(b=a)!=null?b.page_id:b};new(c("MessengerPlatformClientTypedLogger"))().setClientUserID(c("CurrentUser").getID()).setName("did_tap_call_to_action").setExtraClientData(JSON.stringify(e)).setLoggingToken(d).log()};return a}();b=new a();g["default"]=b}),98);
__d("MNCommerceCTAProcessor.bs",["MNCommerceCTAProcessor"],(function(a,b,c,d,e,f,g){"use strict";function a(a){c("MNCommerceCTAProcessor").logCTAClick(a)}function b(a,b){c("MNCommerceCTAProcessor").process(a,(a=b)!=null?a:void 0)}g.logCTAClick=a;g.$$process=b}),98);
__d("MNXMASubtitleDecorationType",[],(function(a,b,c,d,e,f){a=Object.freeze({DEFAULT:0,THREADS_ICON:1,FACEBOOK_ICON:2,EXTERNAL_LINK_ICON:3,MESSENGER_ICON:4,INSTAGRAM_ICON:5,OCULUS_ICON:6});f["default"]=a}),66);
__d("MWChatComposer3PBotCommandViewItem.react",["CometSearchMentionsBaseViewItem.react","MWXTextPairing.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||(h=d("react"))).c,j=h;function a(a){var b=i(10),d,e;b[0]!==a?(d=a.entry,e=babelHelpers.objectWithoutPropertiesLoose(a,["entry"]),b[0]=a,b[1]=d,b[2]=e):(d=b[1],e=b[2]);a=d;var f=a.label;a=a.rawData;a=a.subtitle;var g;b[3]!==f||b[4]!==a?(g=j.jsx(c("MWXTextPairing.react"),{headline:f,level:4,meta:a,metaLineLimit:1,reduceEmphasis:!0}),b[3]=f,b[4]=a,b[5]=g):g=b[5];b[6]!==e||b[7]!==d||b[8]!==g?(f=j.jsx(c("CometSearchMentionsBaseViewItem.react"),babelHelpers["extends"]({},e,{entry:d,children:g})),b[6]=e,b[7]=d,b[8]=g,b[9]=f):f=b[9];return f}g["default"]=a}),98);
__d("MWCommandsComposerPluginTextNode",["Lexical"],(function(a,b,c,d,e,f,g){"use strict";var h=function(b){babelHelpers.inheritsLoose(a,b);function a(a,c){var d,e=a.commandId,f=a.commandPrefix,g=a.handle;a=a.rangeType;d=b.call(this,""+((d=f)!=null?d:"")+g,c)||this;d.__handle=g;d.__commandId=e;d.__rangeType=a;d.__commandPrefix=f;return d}a.getType=function(){return"command"};a.clone=function(b){var c,d=b.getEntity();return new a({commandId:d.commandId,commandPrefix:(c=b.__commandPrefix)!=null?c:"",handle:d.handle,rangeType:d.rangeType},b.__key)};a.importJSON=function(a){return i({commandId:a.commandId,handle:a.handle,rangeType:a.rangeType})};var c=a.prototype;c.exportJSON=function(){return babelHelpers["extends"]({},b.prototype.exportJSON.call(this),{commandId:this.__commandId,handle:this.__handle,rangeType:this.__rangeType,type:"command"})};c.createDOM=function(a){a=b.prototype.createDOM.call(this,a);a.className="xv78j7m xt0e3qv x3jgonx";a.spellcheck=!1;return a};c.getEntity=function(){return{commandId:this.__commandId,handle:this.__handle,rangeType:this.__rangeType}};c.getRangeType=function(){return this.__rangeType};c.getCommandId=function(){return this.__commandId};return a}(d("Lexical").TextNode);function i(a){return new h(a).setMode("segmented").toggleDirectionless()}g.MessengerLexicalCommandNode=h;g.$createMessengerLexicalCommandNode=i}),98);
__d("createCommandsHandleMatchStrategy",[],(function(a,b,c,d,e,f){"use strict";b="\\.,\\+\\*\\?\\$\\@\\|#{}\\(\\)\\^\\[\\]\\\\/!%'\"~=<>_:;";c="\\b[\\w][^\\s"+b+"]";d="(^|\\s|\\/)((?:"+c+"{"+1+",})$)";var g=new RegExp(d);function a(a){var b=a.minMatchLength;return{findMentionableString:function(a){a=g.exec(a);if(a===null)return null;var c=a[1],d=a[2];if(d!=null&&d.length>=b){var e=d;(c==null?void 0:c.startsWith("/"))&&(e=""+c+d);return{leadOffset:a.index+c.length,matchingString:d,replaceableString:e}}return null},name:"CommandsHandleMatchStrategy"}}f["default"]=a}),66);
__d("useMW3PBotsCommandsDataSourceResolverConfig",["I64","Promise","ReQL","ReQLSuspense","createCometMentionMatchStrategy","createCommandsHandleMatchStrategy","react","useCometMentionsDataSourceResolverConfig","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l=(k||d("react")).c;function m(a){var e=l(10),g=(i||(i=c("useReStore")))(),k;e[0]!==g.tables.custom_thread_commands||e[1]!==a?(k=function(){return d("ReQL").fromTableAscending(g.tables.custom_thread_commands.index("rank")).getKeyRange(a).filter(function(a){return!a.isOpenPersistentMenu}).map(function(a){var b=a.commandDescription,c=a.commandId;a=a.commandText;return{key:(j||(j=d("I64"))).to_string(c),label:a,rawData:{rangeType:"cu",subtitle:b},type:"entry"}})},e[0]=g.tables.custom_thread_commands,e[1]=a,e[2]=k):k=e[2];var m;e[3]!==g||e[4]!==a?(m=[g,a],e[3]=g,e[4]=a,e[5]=m):m=e[5];var n=d("ReQLSuspense").useArray(k,m,f.id+":33");e[6]!==n?(k=function(a){return{entries:a.query.length?n.filter(function(b){return b.label.toLowerCase().startsWith(a.query.toLowerCase())}):n,params:a}},e[6]=n,e[7]=k):k=e[7];var o=k;e[8]!==o?(m={bootstrap:function(){},fetchCache:o,fetchNetwork:function(a){return(h||(h=b("Promise"))).resolve(o(a))}},e[8]=o,e[9]=m):m=e[9];return m}function a(a){var b=l(9);a=m(a);var d;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(d=c("createCommandsHandleMatchStrategy")({minMatchLength:4}),b[0]=d):d=b[0];b[1]!==a?(d={dataSource:a,matchStrategy:d},b[1]=a,b[2]=d):d=b[2];var e;b[3]===Symbol["for"]("react.memo_cache_sentinel")?(e=c("createCometMentionMatchStrategy")({minMatchLength:0,name:"CometMentionsNameMatchStrategy",triggers:"/"}),b[3]=e):e=b[3];b[4]!==a?(e={dataSource:a,matchStrategy:e},b[4]=a,b[5]=e):e=b[5];b[6]!==d||b[7]!==e?(a=[d,e],b[6]=d,b[7]=e,b[8]=a):a=b[8];d=a;return c("useCometMentionsDataSourceResolverConfig")(d,!1)}g["default"]=a}),98);
__d("MW3PBotsCommandsComposerPlugin.react",["CometMentionsForLexical.react","CometMentionsLayoutStrategy.react","MWChatComposer3PBotCommandViewItem.react","MWCommandsComposerPluginTextNode","MWThreadKey.react","cometBaseMentionsLexicalCreateNodeStrategy","react","useCometTypeaheadViewListStrategy","useMW3PBotsCommandsDataSourceResolverConfig"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||(h=d("react"))).c,j=h;function a(a){var b=i(6);a=a.editor;var e=d("MWThreadKey.react").useMWThreadKeyMemoizedExn();e=c("useMW3PBotsCommandsDataSourceResolverConfig")(e);var f;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(f={viewItemStrategyRenderer:c("MWChatComposer3PBotCommandViewItem.react")},b[0]=f):f=b[0];f=c("useCometTypeaheadViewListStrategy")(f);var g;b[1]===Symbol["for"]("react.memo_cache_sentinel")?(g=c("cometBaseMentionsLexicalCreateNodeStrategy")(k),b[1]=g):g=b[1];b[2]!==e||b[3]!==a||b[4]!==f?(g=j.jsx(c("CometMentionsForLexical.react"),{createNodeStrategy:g,dataSourceResolverConfig:e,editor:a,layoutStrategyRenderer:c("CometMentionsLayoutStrategy.react"),position:"above",viewStrategyRenderer:f}),b[2]=e,b[3]=a,b[4]=f,b[5]=g):g=b[5];return g}function k(a){return d("MWCommandsComposerPluginTextNode").$createMessengerLexicalCommandNode({commandId:a.key,handle:a.label,rangeType:(a=(a=a.rawData)==null?void 0:a.rangeType)!=null?a:"n"})}g["default"]=a}),98);
__d("MWAdminMsgCtaLink.react",["MWXLink.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||(h=d("react"))).c,j=h;function a(a){var b=i(9),d,e,f;b[0]!==a?(d=a.xstyle,f=a.children,e=babelHelpers.objectWithoutPropertiesLoose(a,["xstyle","children"]),b[0]=a,b[1]=d,b[2]=e,b[3]=f):(d=b[1],e=b[2],f=b[3]);b[4]===Symbol["for"]("react.memo_cache_sentinel")?(a={color:"var(--mwp-primary-theme-color)"},b[4]=a):a=b[4];b[5]!==d||b[6]!==e||b[7]!==f?(a=j.jsx(c("MWXLink.react"),babelHelpers["extends"]({style:a,weight_DEPRECATED:"bold",xstyle_DEPRECATED:d},e,{children:f})),b[5]=d,b[6]=e,b[7]=f,b[8]=a):a=b[8];return a}g["default"]=a}),98);
__d("MWAdminTextLayout.react",["CometTextWithEntities.react","LSMessagingThreadTypeUtil","MAWVault","MWChatTextTransform","ReQL","ReQLSuspense","react","useReStore","useStringWithSubstitutions"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=(i||(i=d("react"))).c,k=i;function a(a){var b=j(9),e=a.cta,g=a.message,i=(h||(h=c("useReStore")))();a=(a=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableAscending(i.tables.threads,["threadType"]).getKeyRange(g.threadKey)},[i,g.threadKey],f.id+":29"))==null?void 0:a.threadType;a=a==null?!1:d("LSMessagingThreadTypeUtil").isArmadilloSecure(a);var l;b[0]!==g.text?(l=g.text==null?null:d("MAWVault").unvault(g.text),b[0]=g.text,b[1]=l):l=b[1];l=l;a=(a=d("useStringWithSubstitutions").useStringWithSubstitutions(a?l:null,g.threadKey))!=null?a:l;if(a!=null)if(e!=null){b[2]!==a?(l=k.jsx(c("CometTextWithEntities.react"),{text:a,transforms:d("MWChatTextTransform").textTransformsNoVault}),b[2]=a,b[3]=l):l=b[3];var m;b[4]!==l||b[5]!==e?(m=k.jsxs(k.Fragment,{children:[l," ",e]}),b[4]=l,b[5]=e,b[6]=m):m=b[6];return m}else{b[7]!==a?(l=k.jsx(c("CometTextWithEntities.react"),{text:a,transforms:d("MWChatTextTransform").textTransformsNoVault}),b[7]=a,b[8]=l):l=b[8];return l}else if(e!=null)return e;else return null}g["default"]=a}),98);
__d("MWAttachmentContext",["react"],(function(a,b,c,d,e,f,g){"use strict";var h;a=(h||d("react")).createContext;b=a([]);g["default"]=b}),98);
__d("MWBuyerShippingAddressRootQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="24917306604535550"}),null);
__d("MWBuyerShippingAddressRootQuery.graphql",["MWBuyerShippingAddressRootQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"id"}],c={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},d={alias:null,args:null,kind:"ScalarField",name:"label",storageKey:null},e={alias:null,args:null,kind:"ScalarField",name:"street1",storageKey:null},f={alias:null,args:null,kind:"ScalarField",name:"street2",storageKey:null},g={alias:null,args:null,kind:"ScalarField",name:"city_name",storageKey:null},h={alias:null,args:null,kind:"ScalarField",name:"state_name",storageKey:null},i={alias:null,args:null,kind:"ScalarField",name:"district",storageKey:null},j={alias:null,args:null,kind:"ScalarField",name:"sub_district",storageKey:null},k={alias:null,args:null,kind:"ScalarField",name:"postal_code",storageKey:null},l={alias:null,args:null,kind:"ScalarField",name:"country_name",storageKey:null},m={alias:null,args:null,kind:"ScalarField",name:"care_of",storageKey:null},n={alias:null,args:null,concreteType:"XFBPAYAddressAssociatedPhoneNumberResponse",kind:"LinkedField",name:"address_linked_phone_number",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"normalized_phone_number",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"national_number",storageKey:null}],storageKey:null},o=[{kind:"Variable",name:"id",variableName:"id"}],p={alias:null,args:null,kind:"ScalarField",name:"country_id",storageKey:null};return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"MWBuyerShippingAddressRootQuery",selections:[{alias:null,args:null,concreteType:"FBPayAccountExtended",kind:"LinkedField",name:"fbpay_account_extended",plural:!1,selections:[{alias:null,args:null,concreteType:"PAYFBPayAccount",kind:"LinkedField",name:"fbpay_account",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"shipping_addresses",plural:!0,selections:[{kind:"InlineDataFragmentSpread",name:"MWBuyerShippingAddressSelectionAddressListItem",selections:[c,d,e,f,g,h,i,j,k,l,m,n],args:null,argumentDefinitions:[]}],storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:o,concreteType:"Page",kind:"LinkedField",name:"page",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"MWBuyerShippingAddressSelectionPrivacyText"},p],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"MWBuyerShippingAddressRootQuery",selections:[{alias:null,args:null,concreteType:"FBPayAccountExtended",kind:"LinkedField",name:"fbpay_account_extended",plural:!1,selections:[{alias:null,args:null,concreteType:"PAYFBPayAccount",kind:"LinkedField",name:"fbpay_account",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"shipping_addresses",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{kind:"TypeDiscriminator",abstractKey:"__isPAYMailingAddress"},c,d,e,f,g,h,i,j,k,l,m,n],storageKey:null},c],storageKey:null}],storageKey:null},{alias:null,args:o,concreteType:"Page",kind:"LinkedField",name:"page",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"messenger_privacy_policy_url",storageKey:null},p,c],storageKey:null}]},params:{id:b("MWBuyerShippingAddressRootQuery_facebookRelayOperation"),metadata:{},name:"MWBuyerShippingAddressRootQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("MWBuyerShippingAddressRootQuery",["MWBuyerShippingAddressRootQuery.graphql"],(function(a,b,c,d,e,f,g){"use strict";var h;a=h!==void 0?h:h=b("MWBuyerShippingAddressRootQuery.graphql");c=a;g["default"]=c}),98);
__d("MWCMHostTextHovercard.entrypoint",["JSResourceForInteraction"],(function(a,b,c,d,e,f,g){"use strict";a={getPreloadProps:function(){return{}},root:c("JSResourceForInteraction")("MWCMHostTextHovercard.react").__setRef("MWCMHostTextHovercard.entrypoint")};g["default"]=a}),98);
__d("MWCMStandaloneJoinDialog.entrypoint",["JSResourceForInteraction"],(function(a,b,c,d,e,f,g){"use strict";a={getPreloadProps:function(){return{}},root:c("JSResourceForInteraction")("MWCMStandaloneJoinDialog.react").__setRef("MWCMStandaloneJoinDialog.entrypoint")};g["default"]=a}),98);
__d("MWCMStandaloneMemberJoinChatDialog.entrypoint",["JSResourceForInteraction"],(function(a,b,c,d,e,f,g){"use strict";a={getPreloadProps:function(){return{}},root:c("JSResourceForInteraction")("MWCMStandaloneMemberJoinChatDialog.react").__setRef("MWCMStandaloneMemberJoinChatDialog.entrypoint")};g["default"]=a}),98);
__d("MWCMStandaloneRequestToJoinDialog.entrypoint",["JSResourceForInteraction"],(function(a,b,c,d,e,f,g){"use strict";a={getPreloadProps:function(){return{}},root:c("JSResourceForInteraction")("MWCMStandaloneRequestToJoinDialog.react").__setRef("MWCMStandaloneRequestToJoinDialog.entrypoint")};g["default"]=a}),98);
__d("MWChannelPromptContributionsDialogQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="8537027919714444"}),null);
__d("MWChannelPromptContributionsDialogQuery$Parameters",["MWChannelPromptContributionsDialogQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a={kind:"PreloadableConcreteRequest",params:{id:b("MWChannelPromptContributionsDialogQuery_facebookRelayOperation"),metadata:{},name:"MWChannelPromptContributionsDialogQuery",operationKind:"query",text:null}};e.exports=a}),null);
__d("MWChannelPromptContributionsDialog.entrypoint",["JSResourceForInteraction","MWChannelPromptContributionsDialogQuery$Parameters"],(function(a,b,c,d,e,f,g){"use strict";a={getPreloadProps:function(a){return{queries:{myQueryRef:{options:{fetchPolicy:"store-and-network"},parameters:b("MWChannelPromptContributionsDialogQuery$Parameters"),variables:{count:20,data:{prompt_id:a.promptId}}}}}},root:c("JSResourceForInteraction")("MWChannelPromptContributionsDialog.react").__setRef("MWChannelPromptContributionsDialog.entrypoint")};g["default"]=a}),98);
__d("MWChannelPromptContributionsDialogContainer.react",["CometHideLayerOnEscape.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||(h=d("react"))).c,j=h;function a(a){var b=i(7),d=a.children,e=a.onClose;a=a.visibilityRef;var f;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(f="x1qjc9v5 xcrg951 x9f619 x78zum5 xdt5ytf x1iyjqo2 x5yr21d x1n2onr6",b[0]=f):f=b[0];b[1]!==a||b[2]!==d?(f=j.jsx("div",{className:f,ref:a,children:d}),b[1]=a,b[2]=d,b[3]=f):f=b[3];b[4]!==e||b[5]!==f?(a=j.jsx(c("CometHideLayerOnEscape.react"),{onHide:e,children:f}),b[4]=e,b[5]=f,b[6]=a):a=b[6];return a}g["default"]=a}),98);
__d("MWChannelPromptContributionsDialogFallback.react",["fbt","MWChannelPromptContributionsDialogContainer.react","MWXCircleButton.react","MWXGlimmer.react","MWXIconCross","MWXIconDots3Vertical","MWXRow.react","MWXRowItem.react","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=(i||(i=d("react"))).c,k=i,l={promptTitle:{borderTopStartRadius:"x1lq5wgf",borderTopEndRadius:"xgqcy7u",borderBottomEndRadius:"x30kzoy",borderBottomStartRadius:"x9jhf4c",height:"x10w6t97",width:"xdzyupr",$$css:!0}};function a(a){var b=j(8);a=a.onClose;var d;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(d=k.jsx(c("MWXRowItem.react"),{children:k.jsx(c("MWXCircleButton.react"),{disabled:!0,icon:c("MWXIconDots3Vertical"),label:h._("__JHASH__yyf5QdHy0uw__JHASH__"),size:28})}),b[0]=d):d=b[0];var e;b[1]===Symbol["for"]("react.memo_cache_sentinel")?(e=k.jsx(c("MWXRowItem.react"),{children:k.jsx(c("MWXGlimmer.react"),{index:0,xstyle:l.promptTitle})}),b[1]=e):e=b[1];var f;b[2]===Symbol["for"]("react.memo_cache_sentinel")?(f=h._("__JHASH__l-5nlfLCheV__JHASH__"),b[2]=f):f=b[2];b[3]!==a?(d=k.jsxs(c("MWXRow.react"),{paddingHorizontal:16,paddingVertical:16,spacing:0,verticalAlign:"center",children:[d,e,k.jsx(c("MWXRowItem.react"),{children:k.jsx(c("MWXCircleButton.react"),{icon:c("MWXIconCross"),label:f,onPress:a,size:28})})]}),b[3]=a,b[4]=d):d=b[4];b[5]!==a||b[6]!==d?(e=k.jsx(c("MWChannelPromptContributionsDialogContainer.react"),{onClose:a,children:d}),b[5]=a,b[6]=d,b[7]=e):e=b[7];return e}g["default"]=a}),226);
__d("MWChannelPromptTimerPill.react",["fbt","I64","MWXText.react","formatDate","react","stylex","useServerTime"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l=(j||(j=d("react"))).c,m=j,n={blue:{backgroundColor:"xwnonoy",$$css:!0},gray:{backgroundColor:"x1d2osyd",$$css:!0},timerPillContainer:{borderTopStartRadius:"x1a2cdl4",borderTopEndRadius:"xnhgr82",borderBottomEndRadius:"x1qt0ttw",borderBottomStartRadius:"xgk8upj",boxSizing:"x9f619",display:"x78zum5",flexDirection:"xdt5ytf",height:"x1qx5ct2",justifyContent:"xl56j7k",marginBottom:"x1e56ztr",marginTop:"x1gslohp",marginEnd:"xkrivgy",marginStart:"x1gryazu",maxWidth:"x1qh4rir",paddingEnd:"x1sxyh0",paddingStart:"xurb0ha",width:"xeq5yr9",$$css:!0}};function a(a){var b=l(7);a=a.countdownTimestampMs;a=(k||(k=d("I64"))).to_float(a);var e=new Date(a),f=c("useServerTime")();a=f.getTime()>=a;f=e.getDay()!==f.getDay();f=a?h._("__JHASH__ZVTrlU5XFyD__JHASH__"):f?h._("__JHASH__n-gZnixlPi3__JHASH__"):h._("__JHASH__mdS85EDmHlw__JHASH__",[h._param("time",c("formatDate")(e,"g:i A"))]);e=a?n.gray:n.blue;b[0]!==e?(a=(i||(i=c("stylex")))(n.timerPillContainer,e),b[0]=e,b[1]=a):a=b[1];b[2]!==f?(e=m.jsx(c("MWXText.react"),{color:"white",numberOfLines:1,type:"meta4",children:f}),b[2]=f,b[3]=e):e=b[3];b[4]!==a||b[5]!==e?(f=m.jsx("div",{className:a,children:e}),b[4]=a,b[5]=e,b[6]=f):f=b[6];return f}g["default"]=a}),226);
__d("MWChatBubbleEmphasisRing.react",["BaseThemeProvider.react","gkx","react","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=(i||(i=d("react"))).c,k=i;({borderRadius:22,borderStyle:"solid",borderWidth:2,content:"''",display:"block",pointerEvents:"none",position:"absolute",zIndex:1});var l={emphasis_animation:{animationDelay:"x1t83zlg",animationDuration:"xxkxylk",animationIterationCount:"x1v7wizp",animationName:"x1yrix95",animationTimingFunction:"x4hg4is",$$css:!0},emphasis_ring:{backgroundColor:"xjbqb8w",borderTopColor:"x1v8p93f",borderEndColor:"xogb00i",borderBottomColor:"x16stqrj",borderStartColor:"x1ftr3km",borderTopStyle:"x13fuv20",borderEndStyle:"xu3j5b3",borderBottomStyle:"x1q0q8m5",borderStartStyle:"x26u7qi",borderTopWidth:"x1gp4ovq",borderEndWidth:"xdio9jc",borderBottomWidth:"x1h2mt7u",borderStartWidth:"x7g060r",display:"x78zum5",maxWidth:"x1hvl878",position:"x1n2onr6","::after_borderTopStartRadius":"xquudas","::after_borderTopEndRadius":"x6p43zf","::after_borderBottomEndRadius":"x1wnhr99","::after_borderBottomStartRadius":"x1gquc79","::after_borderTopStyle":"xynf4tj","::after_borderEndStyle":"xdspwft","::after_borderBottomStyle":"x1r9ni5o","::after_borderStartStyle":"x1d52zm6","::after_borderTopWidth":"x31ga2r","::after_borderEndWidth":"xcmxnv6","::after_borderBottomWidth":"x13afdcp","::after_borderStartWidth":"x10va8jt","::after_content":"x1s928wv","::after_display":"xhkezso","::after_pointerEvents":"x2q1x1w","::after_position":"x1j6awrg","::after_zIndex":"xitxdhh","::after_borderTopColor":"x1yzler7","::after_borderEndColor":"xh3oo2y","::after_borderBottomColor":"xxqiif8","::after_borderStartColor":"xrh6a5","::after_bottom":"xdb1ctf","::after_end":"x4bhatf","::after_start":"xhg89tr","::after_left":null,"::after_right":null,"::after_top":"x7kqs8i","::before_borderTopStartRadius":"x2e93ah","::before_borderTopEndRadius":"xigdz7j","::before_borderBottomEndRadius":"x1vxwiij","::before_borderBottomStartRadius":"xfgw0w6","::before_borderTopStyle":"xnvurfn","::before_borderEndStyle":"xv1ta3e","::before_borderBottomStyle":"x1opv7go","::before_borderStartStyle":"x1dtnpoi","::before_borderTopWidth":"x1b8stmw","::before_borderEndWidth":"xyhsekn","::before_borderBottomWidth":"xmbliey","::before_borderStartWidth":"x1igdxxj","::before_content":"x1cpjm7i","::before_display":"x1fgarty","::before_pointerEvents":"xkk1bqk","::before_position":"x1hmns74","::before_zIndex":"x12maryy","::before_borderTopColor":"xtei6gu","::before_borderEndColor":"x1nwru9p","::before_borderBottomColor":"xxs4umj","::before_borderStartColor":"xg8j718","::before_bottom":"xe80sof","::before_end":"x105ji64","::before_opacity":"x1u3qutx","::before_start":"xbs7dl3","::before_left":null,"::before_right":null,"::before_top":"x51xajf",$$css:!0},emphasis_ring_before_xma:{borderBottomStyle:"x1sy0etr","::after_borderBottom":"x1bxl7c5","::after_borderBottomEndRadius":"x1qo8dsh","::after_borderBottomStartRadius":"x1oiup0q","::before_borderBottom":"xozyfcf","::before_borderBottomEndRadius":"x1nxuetn","::before_borderBottomStartRadius":"x1doa7m0",$$css:!0},emphasis_ring_connect_bottom_incoming:{"::after_borderBottomStartRadius":"x1573djm","::before_borderBottomStartRadius":"x106tphz",$$css:!0},emphasis_ring_connect_bottom_outgoing:{"::after_borderBottomEndRadius":"x1nb2ndt","::before_borderBottomEndRadius":"x7ft4bm",$$css:!0},emphasis_ring_connect_top_incoming:{"::after_borderTopStartRadius":"x14nzmgs","::before_borderTopStartRadius":"x58eeit",$$css:!0},emphasis_ring_connect_top_outgoing:{"::after_borderTopEndRadius":"xe41ffp","::before_borderTopEndRadius":"x1cbhpwz",$$css:!0},emphasis_ring_xma:{borderTopStyle:"x1ejq31n",width:"x1o2z316","::after_borderTop":"x12dgpll","::after_borderTopEndRadius":"x1utvphz","::after_borderTopStartRadius":"x17dqjr0","::before_borderTop":"xp2bjph","::before_borderTopEndRadius":"xajc7s","::before_borderTopStartRadius":"x1eo7yr1",$$css:!0}};b={"chat-outgoing-message-background-gradient":"none","chat-outgoing-message-bubble-background-color":"var(--mwp-primary-theme-color)"};var m={dark:b,light:b,type:"VARIABLES"};function a(a){var b=j(6),d=a.hasXMA,e=a.children,f=a.connectBottom,g=a.connectTop,i=a.outgoing;a=a.precedesXMA;var n=i?l.emphasis_ring_connect_top_outgoing:l.emphasis_ring_connect_top_incoming;i=i?l.emphasis_ring_connect_bottom_outgoing:l.emphasis_ring_connect_bottom_incoming;a=a?l.emphasis_ring_before_xma:f&&i;f=g&&(d?l.emphasis_ring_xma:n);b[0]!==a||b[1]!==f?(i=[c("gkx")("3638")&&l.emphasis_animation,l.emphasis_ring,a,f],b[0]=a,b[1]=f,b[2]=i):i=b[2];var o=i;b[3]!==o||b[4]!==e?(g=k.jsx(c("BaseThemeProvider.react"),{config:m,children:function(a,b){return k.jsx("div",{className:(h||(h=c("stylex")))(o,a),"data-testid":void 0,style:b,children:e})}}),b[3]=o,b[4]=e,b[5]=g):g=b[5];return g}g["default"]=a}),98);
__d("MWChatCustomerFeedbackFormDataQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="25001979722783703"}),null);
__d("MWChatCustomerFeedbackFormDataQuery.graphql",["MWChatCustomerFeedbackFormDataQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"formID"}],c={alias:null,args:null,kind:"ScalarField",name:"type",storageKey:null};c=[{alias:null,args:[{kind:"Variable",name:"form_id",variableName:"formID"}],concreteType:"MessengerFeedbackFormDataResult",kind:"LinkedField",name:"messenger_feedback_form_data",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"form_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"page_id",storageKey:null},{alias:null,args:null,concreteType:"MessengerFeedbackBusinessPrivacyObject",kind:"LinkedField",name:"privacy",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"text",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"label",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"MessengerFeedbackFormScreenObject",kind:"LinkedField",name:"first_screen",plural:!1,selections:[{alias:null,args:null,concreteType:"MessengerFeedbackQuestionObject",kind:"LinkedField",name:"feedback_questions",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_default_title",storageKey:null},c,{alias:null,args:null,kind:"ScalarField",name:"score_label",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"score_option",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"left_score_label",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"right_score_label",storageKey:null},{alias:null,args:null,concreteType:"MessengerFeedBackQuestionFollowup",kind:"LinkedField",name:"follow_up",plural:!1,selections:[c,{alias:null,args:null,kind:"ScalarField",name:"placeholder",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"MWChatCustomerFeedbackFormDataQuery",selections:c,type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"MWChatCustomerFeedbackFormDataQuery",selections:c},params:{id:b("MWChatCustomerFeedbackFormDataQuery_facebookRelayOperation"),metadata:{},name:"MWChatCustomerFeedbackFormDataQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("MWChatCustomerFeedbackFormDataQuery",["CometRelay","MWChatCustomerFeedbackFormDataQuery.graphql","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h,i=function(a,b,e){b=d("CometRelay").fetchQuery(b,j,{formID:a}).toPromise().then(function(a){a&&e({firstScreen:a.messenger_feedback_form_data.first_screen,formId:a.messenger_feedback_form_data.form_id,pageId:a.messenger_feedback_form_data.page_id,privacy:a.messenger_feedback_form_data.privacy})});c("promiseDone")(b)},j=h!==void 0?h:h=b("MWChatCustomerFeedbackFormDataQuery.graphql");a=function(a,b,c){i(a,b,function(a){return c(a)})};g.fetch=a}),98);
__d("MWChatCustomerFeedbackStateQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="7662735127071179"}),null);
__d("MWChatCustomerFeedbackStateQuery.graphql",["MWChatCustomerFeedbackStateQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"formID"}],c=[{alias:null,args:[{fields:[{kind:"Variable",name:"form_id",variableName:"formID"}],kind:"ObjectValue",name:"input"}],concreteType:"MessengerFeedbackFormStateQueryObject",kind:"LinkedField",name:"messenger_feedback_form_state",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"form_state",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"MWChatCustomerFeedbackStateQuery",selections:c,type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"MWChatCustomerFeedbackStateQuery",selections:c},params:{id:b("MWChatCustomerFeedbackStateQuery_facebookRelayOperation"),metadata:{},name:"MWChatCustomerFeedbackStateQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("MWChatCustomerFeedbackStateQuery",["CometRelay","MWChatCustomerFeedbackStateQuery.graphql","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h,i=function(a,b,e){b=d("CometRelay").fetchQuery(b,j,{formID:a}).toPromise().then(function(a){if(a){e((a=a.messenger_feedback_form_state)==null?void 0:a.form_state)}});c("promiseDone")(b)},j=h!==void 0?h:h=b("MWChatCustomerFeedbackStateQuery.graphql");a=function(a,b,c){i(a,b,function(a){return c(a)})};g.fetch=a}),98);
__d("MWChatFileIconV2.react",["MDSSvgDocumentCompleteIcon.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||(h=d("react"))).c,j=h;function a(){var a=i(1),b;a[0]===Symbol["for"]("react.memo_cache_sentinel")?(b=j.jsx("div",{className:"x6s0dn4 xgx9qek x14yjl9h xudhj91 x18nykt9 xww2gxu x78zum5 xl56j7k x1iorvi4 x150jy0e xjkvuk6 x1e558r4",children:j.jsx(c("MDSSvgDocumentCompleteIcon.react"),{color:"primary",size:24})}),a[0]=b):b=a[0];return b}g["default"]=a}),98);
__d("MWChatFilePreProcessingErrorDialog.react",["fbt"],(function(a,b,c,d,e,f,g,h){"use strict";a={body:h._("__JHASH__rp1B2ks3qwV__JHASH__"),title:h._("__JHASH__xqsOpg5ebEg__JHASH__")};g.invalidFileFormat=a}),226);
__d("MWChatFilePreProcessingErrorToast.react",["fbt"],(function(a,b,c,d,e,f,g,h){"use strict";a={body:h._("__JHASH__rp1B2ks3qwV__JHASH__"),title:h._("__JHASH__xqsOpg5ebEg__JHASH__")};g.invalidFileFormat=a}),226);
__d("MWXIconExclamationMarkCircle",["MWXSvgIcon","SVGIcon","cr:12407","gkx"],(function(a,b,c,d,e,f,g){"use strict";a=d("MWXSvgIcon").mwxSvgIcon(d("SVGIcon").svgIcon(b("cr:12407")),c("gkx")("23219"));g["default"]=a}),98);
__d("MWChatFilePreview.react",["fbt","FDSImageCover.react","MWChatFileIconV2.react","MWXCircleButton.react","MWXIconExclamationMarkCircle","MWXIconRefreshAlt","MWXIconStrict.react","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=(i||(i=d("react"))).c,k=i,l={imageCover:{maxHeight:"x138jeol",objectPosition:"x8ozjh4",$$css:!0}};function a(a){var b=j(11),d=a.attachment,e=a.fileName,f=a.isError,g=a.isRetryableError,i=a.onRetry;a=a.withPreview;if(b[0]!==d){var m;m=(m=d)!=null?m:{};b[0]=d;b[1]=m}else m=b[1];d=m;m=d.previewUrl;if(f===!0){b[2]===Symbol["for"]("react.memo_cache_sentinel")?(d="x1ye3gou",f="x6s0dn4 xgx9qek x14yjl9h xudhj91 x18nykt9 xww2gxu x78zum5 x10w6t97 xl56j7k x1td3qas",b[2]=d,b[3]=f):(d=b[2],f=b[3]);b[4]!==g||b[5]!==i?(d=k.jsx("div",{className:d,children:k.jsx("div",{className:f,children:g===!0?k.jsx(c("MWXCircleButton.react"),{color:"primary",icon:c("MWXIconRefreshAlt"),label:h._("__JHASH__BGxC_0TtXwE__JHASH__"),onPress:i,size:32,testid:void 0,type:"normal"}):k.jsx("div",{"data-testid":void 0,children:k.jsx(c("MWXIconStrict.react"),{color:"primary",icon:c("MWXIconExclamationMarkCircle"),size:20})})})}),b[4]=g,b[5]=i,b[6]=d):d=b[6];return d}if(m==null||!a){b[7]===Symbol["for"]("react.memo_cache_sentinel")?(f=k.jsx("div",{className:"x1ye3gou",children:k.jsx(c("MWChatFileIconV2.react"),{})}),b[7]=f):f=b[7];return f}i=(g=e)!=null?g:"";b[8]!==i||b[9]!==m?(d=k.jsx(c("FDSImageCover.react"),{alt:i,src:m,style:l.imageCover}),b[8]=i,b[9]=m,b[10]=d):d=b[10];return d}g["default"]=a}),226);
__d("MWChatFileUploadErrorDialog.react",["fbt"],(function(a,b,c,d,e,f,g,h){"use strict";a=function(a){return{body:h._("__JHASH__Tr8urrZ1rc1__JHASH__",[h._param("size",a)]),title:h._("__JHASH__GVmFuh2jycz__JHASH__")}};b=function(a){return{body:h._("__JHASH__TAA-hbgGa5n__JHASH__",[h._param("limit",a)]),title:h._("__JHASH__L_Ni3O-TarB__JHASH__")}};c=function(a){return{body:h._("__JHASH__-3D7kzgvAq5__JHASH__",[h._param("limit",a)]),title:h._("__JHASH__syTHdrAlZYC__JHASH__")}};d=function(){return{body:h._("__JHASH__1WylqAbhvtc__JHASH__"),title:h._("__JHASH__hio_8S892IQ__JHASH__")}};g.maxFileSizeExceeded=a;g.maxFilesNumberExceeded=b;g.maxMediaNumberExceeded=c;g.unsupportedFile=d}),226);
__d("MWChatImageInsetShadow.react",["react","react-strict-dom"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||(h=d("react"))).c,j=h,k={imageShadow:{borderTopColor:"x1pdss0j",borderEndColor:"xtcpoma",borderBottomColor:"x81c4ja",borderStartColor:"x8g6rb3",borderTopStyle:"x13fuv20",borderEndStyle:"xu3j5b3",borderBottomStyle:"x1q0q8m5",borderStartStyle:"x26u7qi",borderTopWidth:"x178xt8z",borderEndWidth:"xm81vs4",borderBottomWidth:"xso031l",borderStartWidth:"xy80clv",bottom:"x1ey2m1c",boxSizing:"x9f619",end:"xds687c",start:"x17qophe",left:null,right:null,pointerEvents:"x47corl",position:"x10l6tqk",top:"x13vifvy",$$css:!0}};function a(a){var b=i(2);a=a.xstyle;var c;b[0]!==a?(c=j.jsx(d("react-strict-dom").html.div,{style:[k.imageShadow,a]}),b[0]=a,b[1]=c):c=b[1];return c}g["default"]=a}),98);
__d("MWChatImageSize",["react"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");var i=b.useEffect,j=b.useRef,k=b.useState,l=b.c;function a(a,b,c){c=l(4);var d=b!=null?b:!1,e=j();b=k();var f=b[0],g=b[1],h;c[0]!==a||c[1]!==d?(b=function(){if(a==null)return;if(e.current==null&&!d){var b=new Image();b.src=a;b.onload=function(){return g({height:b.naturalHeight,width:b.naturalWidth})};e.current=b}return function(){g(function(){});var a=e.current;if(a==null)return;a.onload=null}},h=[a,d,g],c[0]=a,c[1]=d,c[2]=b,c[3]=h):(b=c[2],h=c[3]);i(b,h);return f}g.useImageSize=a}),98);
__d("MWChatPIIFormNuxQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="5048028465289521"}),null);
__d("MWChatPIIFormNuxQuery.graphql",["MWChatPIIFormNuxQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{alias:null,args:null,concreteType:"MessengerPIIFormFirstPartyPrivacyObject",kind:"LinkedField",name:"messenger_pii_nux",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"url_text",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"MWChatPIIFormNuxQuery",selections:a,type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[],kind:"Operation",name:"MWChatPIIFormNuxQuery",selections:a},params:{id:b("MWChatPIIFormNuxQuery_facebookRelayOperation"),metadata:{},name:"MWChatPIIFormNuxQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("PiiActionFlowFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("1744182");b=d("FalcoLoggerInternal").create("pii_action_flow",a);e=b;g["default"]=e}),98);
__d("MWChatPIIFormNuxQuery",["CometRelay","MWChatPIIFormNuxQuery.graphql","PiiActionFlowFalcoEvent","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h,i=function(a,b,e,f){a=d("CometRelay").fetchQuery(a,j,{}).toPromise().then(function(a){if(a){c("PiiActionFlowFalcoEvent").log(function(){return{event_name:"pii_initial_query_success",extra_data:"",form_id:b,page_id:e}});if(a.messenger_pii_nux==null)f({description:"",seen:!0,title:"",url:"",url_text:""});else{var d;f({description:(d=a.messenger_pii_nux.description)!=null?d:"",seen:!1,title:(d=a.messenger_pii_nux.title)!=null?d:"",url:(d=a.messenger_pii_nux.url)!=null?d:"",url_text:(d=a.messenger_pii_nux.url_text)!=null?d:""})}}},function(a){c("PiiActionFlowFalcoEvent").log(function(){return{event_name:"pii_initial_query_failure",extra_data:a.message,form_id:b,page_id:e}})});c("promiseDone")(a)},j=h!==void 0?h:h=b("MWChatPIIFormNuxQuery.graphql");a=function(a,b,c,d){i(a,b,c,function(a){return d(a)})};g.fetch=a}),98);
__d("MWChatPIIFormScreenQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="5021823607854583"}),null);
__d("MWChatPIIFormScreenQuery.graphql",["MWChatPIIFormScreenQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"formID"},{defaultValue:null,kind:"LocalArgument",name:"screenIndex"}],c=[{alias:null,args:[{fields:[{kind:"Variable",name:"form_id",variableName:"formID"},{kind:"Variable",name:"screen_index",variableName:"screenIndex"}],kind:"ObjectValue",name:"input"}],concreteType:"MessengerPIIFormSingleScreenObject",kind:"LinkedField",name:"messenger_pii_form_single_screen",plural:!1,selections:[{alias:null,args:null,concreteType:"MessengerPIIFormScreenObject",kind:"LinkedField",name:"screen",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"screen_title",storageKey:null},{alias:null,args:null,concreteType:"MessengerPIIQuestionObject",kind:"LinkedField",name:"questions",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"subtitle",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"type",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"placeholder",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"length",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"format",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"mask",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"MWChatPIIFormScreenQuery",selections:c,type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"MWChatPIIFormScreenQuery",selections:c},params:{id:b("MWChatPIIFormScreenQuery_facebookRelayOperation"),metadata:{},name:"MWChatPIIFormScreenQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("MWChatPIIFormScreenQuery",["CometRelay","MWChatPIIFormScreenQuery.graphql","PiiActionFlowFalcoEvent","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h,i=function(a,b,e,f,g){f=d("CometRelay").fetchQuery(f,j,{formID:a,screenIndex:e}).toPromise().then(function(d){if(d){d=d.messenger_pii_form_single_screen.screen;var e=d.questions.map(function(a){return{format:a.format,id:a.id,length:a.length,mask:a.mask,placeholder:a.placeholder,subtitle:a.subtitle,title:a.title,type:a.type}}),f={question_list_size:d.questions.length};c("PiiActionFlowFalcoEvent").log(function(){return{event_name:"pii_single_page_query_success",extra_data:JSON.stringify(f),form_id:a,page_id:b}});g({questions:e,screen_title:d.screen_title})}},function(d){c("PiiActionFlowFalcoEvent").log(function(){return{event_name:"pii_single_page_query_failure",extra_data:d.message,form_id:a,page_id:b}})});c("promiseDone")(f)},j=h!==void 0?h:h=b("MWChatPIIFormScreenQuery.graphql");a=function(a,b,c,d,e){i(a,b,c,d,function(a){return e(a)})};g.fetch=a}),98);
__d("MWChatPIIFormStateQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="4923666631045015"}),null);
__d("MWChatPIIFormStateQuery.graphql",["MWChatPIIFormStateQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"formID"}],c=[{alias:null,args:[{fields:[{kind:"Variable",name:"form_id",variableName:"formID"}],kind:"ObjectValue",name:"input"}],concreteType:"MessengerPIIFormStateQueryObject",kind:"LinkedField",name:"messenger_pii_form_state",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"state",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"MWChatPIIFormStateQuery",selections:c,type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"MWChatPIIFormStateQuery",selections:c},params:{id:b("MWChatPIIFormStateQuery_facebookRelayOperation"),metadata:{},name:"MWChatPIIFormStateQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("MWChatPIIFormStateQuery",["CometRelay","MWChatPIIFormStateQuery.graphql","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h,i=function(a,b,e){b=d("CometRelay").fetchQuery(b,j,{formID:a}).toPromise().then(function(a){a&&e(a.messenger_pii_form_state.state)});c("promiseDone")(b)},j=h!==void 0?h:h=b("MWChatPIIFormStateQuery.graphql");a=function(a,b,c){i(a,b,function(a){return c(a)})};g.fetch=a}),98);
__d("MWChatReceiptDataQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="7735392359808092"}),null);
__d("MWChatReceiptDataQuery.graphql",["MWChatReceiptDataQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a={defaultValue:null,kind:"LocalArgument",name:"messageID"},c={defaultValue:null,kind:"LocalArgument",name:"receiptID"},d=[{alias:null,args:[{kind:"Variable",name:"message_id",variableName:"messageID"},{kind:"Variable",name:"receipt_id",variableName:"receiptID"}],concreteType:"ReceiptDataResult",kind:"LinkedField",name:"receipt_data",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"recipient_name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"merchant_name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"order_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"payment_method",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"order_url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"cancellation_url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"address_line_1",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"address_line_2",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"address_line_3",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"total_cost",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"total_tax",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"shipping_cost",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"subtotal",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"order_time",storageKey:null},{alias:null,args:null,concreteType:"ReceiptItem",kind:"LinkedField",name:"items",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"thumb_url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"quantity",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"price",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"Adjustment",kind:"LinkedField",name:"adjustments",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"adjustment_type",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"display_adjustment_amount",storageKey:null}],storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:[a,c],kind:"Fragment",metadata:null,name:"MWChatReceiptDataQuery",selections:d,type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[c,a],kind:"Operation",name:"MWChatReceiptDataQuery",selections:d},params:{id:b("MWChatReceiptDataQuery_facebookRelayOperation"),metadata:{},name:"MWChatReceiptDataQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("MWChatReceiptDataQuery",["CometRelay","CometRelayEnvironment","MWChatReceiptDataQuery.graphql","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(a,b,e){c("promiseDone")(d("CometRelay").fetchQuery(c("CometRelayEnvironment"),i,{messageID:b,receiptID:a}).toPromise().then(function(a){if((a==null?void 0:a.receipt_data)!=null){a=a.receipt_data;var b=a.items?a.items.map(function(a){return{description:a.description,name:a.name,price:a.price,quantity:a.quantity,thumb_url:a.thumb_url}}):[],c=a.adjustments?a.adjustments.map(function(a){return{adjustment_type:a.adjustment_type,display_adjustment_amount:a.display_adjustment_amount}}):[];e({address_line_1:a.address_line_1,address_line_2:a.address_line_2,address_line_3:a.address_line_3,adjustments:c,cancellation_url:a.cancellation_url,items:b,merchant_name:a.merchant_name,order_id:a.order_id,order_time:a.order_time,order_url:a.order_url,payment_method:a.payment_method,recipient_name:a.recipient_name,shipping_cost:a.shipping_cost,subtotal:a.subtotal,total_cost:a.total_cost,total_tax:a.total_tax})}}))};var i=h!==void 0?h:h=b("MWChatReceiptDataQuery.graphql");g.fetch=a}),98);
__d("MWChatRecorderUtils",["DateConsts"],(function(a,b,c,d,e,f,g){"use strict";function h(a){return a.reduce(function(a,b){return a+b.length},0)}function a(a){var b=h(a),c=new Float32Array(b);a.reduce(function(a,b){c.set(b,a);return a+b.length},0);return c}function b(a,b){var c=h([a,b]);return new Float32Array(c).map(function(c,d){c=Math.floor(d/2);if(d%2===0)return a[c];else return b[c]})}function i(a,b,c){c.forEach(function(c,d){c=Math.max(-1,Math.min(1,c));d=b+(d<<1);c=c<0?Math.abs(c)*-32768:Math.abs(c)*32767;a.setInt16(d,c,!0)})}function j(a,b,c){Array.from(c).forEach(function(d,e){d=c.charCodeAt(e);a.setUint8(b+e,d)})}function k(a){var b=a.numberOfChannels,c=a.sampleRate;a=a.samples;var d=a.length;d=d<<1;var e=new ArrayBuffer(44+d);e=new DataView(e);j(e,0,"RIFF");e.setUint32(4,36+d,!0);j(e,8,"WAVE");j(e,12,"fmt ");e.setUint32(16,16,!0);e.setUint16(20,1,!0);e.setUint16(22,b,!0);e.setUint32(24,c,!0);e.setUint32(28,c*b*2,!0);e.setUint16(32,b*2,!0);e.setUint16(34,16,!0);j(e,36,"data");e.setUint32(40,d,!0);i(e,44,a);return e}function c(a){var b=a.numberOfChannels,c=a.sampleRate;a=a.samples;b=k({numberOfChannels:b,sampleRate:c,samples:a});return new File([b],"audio_clip.wav",{type:"audio/wav"})}function e(a){var b=a.numberOfChannels,c=a.sampleRate;a=a.samples;var e=Float32Array.BYTES_PER_ELEMENT;a=a.byteLength/e/b;return a/c%d("DateConsts").SEC_PER_MIN}function l(a,b,c){return a+(b-a)*c}function f(a,b){var c=new Array(Math.ceil(b));if(b===0||a.length===0)return c;if(b===a.length)return Array.from(a);if(a.length===1)return c.fill(a[0]);c[0]=a[0];var d=(a.length-1)/(b-1);for(var e=1;e<b;e++){var f=e*d,g=Math.floor(f),h=Math.ceil(f);f=f-g;c[e]=l(a[g],a[h],f)}b>=2&&(c[c.length-1]=a[a.length-1]);return c}function m(a,b,c){var d=Math.min.apply(Math,a),e=Math.max.apply(Math,a),f=e-d,g=c-b;return a.map(function(a){return(a-d)/f*g+b})}g.getTotalBuffersLen=h;g.flattenBuffer=a;g.interleave=b;g.exportWAV=c;g.getAudioDuration=e;g.computeWaveformAmplitudes=f;g.linearConversion=m}),98);
__d("MWChatSingleSeenHead.react",["MDSGlimmer.react","react","react-strict-dom"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||(h=d("react"))).c,j=h;function a(a){var b=i(5),e=a.altText,f=a.head,g=a.tabIndex;a=a.xstyle;var h;b[0]!==f.imageSrc||b[1]!==a||b[2]!==e||b[3]!==g?(h=f.imageSrc===""?j.jsx(c("MDSGlimmer.react"),{index:1,xstyle:k.profilePlaceholder}):j.jsx(d("react-strict-dom").html.img,{alt:e,"data-testid":void 0,height:14,src:f.imageSrc,style:[k.image,a],tabIndex:g,width:14}),b[0]=f.imageSrc,b[1]=a,b[2]=e,b[3]=g,b[4]=h):h=b[4];return h}var k={image:{borderTopStartRadius:"x1rcc7c0",borderTopEndRadius:"xbtbmw4",borderBottomEndRadius:"x1lie4ck",borderBottomStartRadius:"x16hxpj1",height:"x1v9usgg",objectFit:"xl1xv1r",userSelect:"x87ps6o",verticalAlign:"x11njtxf",width:"x6jxa94",$$css:!0},profilePlaceholder:{borderTopStartRadius:"x1rcc7c0",borderTopEndRadius:"xbtbmw4",borderBottomEndRadius:"x1lie4ck",borderBottomStartRadius:"x16hxpj1",height:"x1v9usgg",verticalAlign:"x3ajldb",width:"x6jxa94",$$css:!0}};g["default"]=a}),98);
__d("MWChatSingleSeenHeadRow.react",["MWChatSingleSeenHead.react","MWLSThreadDisplayContext","MWXTooltip.react","react","react-strict-dom"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||(h=d("react"))).c,j=h,k={mask:{backgroundColor:"x1eb86dx",$$css:!0},root:{display:"x78zum5",justifyContent:"x13a6bvl",$$css:!0},singleSeenHeadRow:{display:"x1jfb8zj",$$css:!0}};function a(a){var b=i(14),e=a.head,f=a.text;a=a.xstyle;var g=d("MWLSThreadDisplayContext").useMWLSThreadDisplayContext(),h;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(h=[k.root,k.mask],b[0]=h):h=b[0];var l;b[1]!==a?(l=[k.singleSeenHeadRow,a],b[1]=a,b[2]=l):l=b[2];a=g==="Inbox"?"middle":"end";b[3]!==f||b[4]!==e?(g=j.jsx(c("MWChatSingleSeenHead.react"),{altText:f,head:e,tabIndex:0}),b[3]=f,b[4]=e,b[5]=g):g=b[5];var m;b[6]!==a||b[7]!==e.id||b[8]!==f||b[9]!==g?(m=j.jsx(c("MWXTooltip.react"),{align:a,forceInlineDisplay:!0,position:"above",tooltip:f,children:g},e.id),b[6]=a,b[7]=e.id,b[8]=f,b[9]=g,b[10]=m):m=b[10];b[11]!==l||b[12]!==m?(a=j.jsx(d("react-strict-dom").html.div,{"data-testid":void 0,style:h,children:j.jsx(d("react-strict-dom").html.div,{style:l,children:m})}),b[11]=l,b[12]=m,b[13]=a):a=b[13];return a}g["default"]=a}),98);
__d("MWChatStrikethroughText.react",["react"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=(i||d("react")).c,k=h||(h=c("react"));function a(a){var b=j(2);a=a.children;var c;b[0]!==a?(c=k.jsx("s",{children:a}),b[0]=a,b[1]=c):c=b[1];return c}g["default"]=a}),98);
__d("MWXMessageBlockQuote.react",["react","react-strict-dom"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||(h=d("react"))).c,j=h,k={forwarded:{height:"x5yr21d",marginTop:"x1gslohp",marginEnd:"x11i5rnm",marginBottom:"x12nagc",marginStart:"x1mh8g0r",paddingStart:"x1ye3gou",position:"x1n2onr6",whiteSpace:"x126k92a",wordWrap:"x1vvkbs",$$css:!0},fullLine:{bottom:"x19ip775",top:"xnfr1j",$$css:!0},line:{borderTopStartRadius:"x13zp6kq",borderTopEndRadius:"x1mcfq15",borderBottomEndRadius:"xrosliz",borderBottomStartRadius:"x1wb7cse",bottom:"xbfrwjf",start:"x17qophe",left:null,right:null,position:"x10l6tqk",top:"xndqk7f",width:"xfo62xy",$$css:!0},lineIncomingColor:{backgroundColor:"xtyxhl7",$$css:!0},lineOutgoingColor:{backgroundColor:"xppy7ju",$$css:!0}};function a(a){var b=i(9),c=a.children,e=a.fullLine,f=a.outgoing;a=a.xstyle;e=e===void 0?!1:e;f=f===void 0?!0:f;var g;b[0]!==a?(g=[k.forwarded,a],b[0]=a,b[1]=g):g=b[1];a=e?k.fullLine:void 0;e=f?k.lineOutgoingColor:k.lineIncomingColor;b[2]!==a||b[3]!==e?(f=j.jsx(d("react-strict-dom").html.div,{style:[k.line,a,e]}),b[2]=a,b[3]=e,b[4]=f):f=b[4];b[5]!==g||b[6]!==f||b[7]!==c?(a=j.jsxs(d("react-strict-dom").html.blockquote,{style:g,children:[f,c]}),b[5]=g,b[6]=f,b[7]=c,b[8]=a):a=b[8];return a}g["default"]=a}),98);
__d("MessageMarkdownCodeblockLanguages",[],(function(a,b,c,d,e,f){a=Object.freeze({ASP:"asp",ASPX:"aspx",BASH:"bash",C:"c",CLJ:"clj",CLJC:"cljc",CLJX:"cljx",CLOJURE:"clojure",COFFEESCRIPT:"coffeescript",CPLUSPLUS:"cplusplus",CPP:"cpp",CPP2:"c++",CQL:"cql",CS:"cs",CSHARP:"csharp",CSS:"css",CURL:"curl",D:"d",DART:"dart",DIFF:"diff",DOCKERFILE:"dockerfile",ECMASCRIPT:"ecmascript",ERL:"erl",ERLANG:"erlang",GO:"go",GQL:"gql",GRADLE:"gradle",GRAPHQL:"graphql",GROOVY:"groovy",HANDLEBARS:"handlebars",HBS:"hbs",HTML:"html",HTTP:"http",JAVA:"java",JAVASCRIPT:"javascript",JL:"jl",JRUBY:"jruby",JS:"js",JSON:"json",JSX:"jsx",JULIA:"julia",KOTLIN:"kotlin",KT:"kt",LESS:"less",LIQUID:"liquid",LUA:"lua",MACRUBY:"macruby",MARKDOWN:"markdown",ML:"ml",MSSQL:"mssql",MYSQL:"mysql",NODE:"node",OBJC:"objc",OBJCPP:"objcpp",OBJCPP2:"objc++",OBJECTIVEC:"objectivec",OBJECTIVECPLUSPLUS:"objectivecplusplus",OBJECTIVECPP:"objectivecpp",OCAML:"ocaml",PERL:"perl",PGSQL:"pgsql",PHP:"php",PL:"pl",PLSQL:"plsql",POSTGRES:"postgres",POSTGRESQL:"postgresql",POWERSHELL:"powershell",PS1:"ps1",PY:"py",PYTHON:"python",R:"r",RAKE:"rake",RB:"rb",RBX:"rbx",RS:"rs",RUBY:"ruby",RUST:"rust",SASS:"sass",SCALA:"scala",SCSS:"scss",SH:"sh",SHELL:"shell",SOL:"sol",SOLIDITY:"solidity",SQL:"sql",SQLITE:"sqlite",STYL:"styl",STYLUS:"stylus",SWIFT:"swift",TS:"ts",TYPESCRIPT:"typescript",XHTML:"xhtml",XML:"xml",YAML:"yaml",YML:"yml",ZSH:"zsh"});f["default"]=a}),66);
__d("MessengerFormattingConfig",[],(function(a,b,c,d,e,f){a=Object.freeze({boldConfig:{pattern:"([\\s_~'\"(]|^)\\*(\\S(?:.*?\\S)??)\\*(?=[\\s_~,.;:!?'\")]|$)",nonCapturingPattern:"(?:[\\s_~'\"(]|^)\\*(?:\\S(?:.*?\\S)??)\\*(?=[\\s_~,.;:!?'\")]|$)"},italicConfig:{pattern:"([\\s*~'\"(]|^)_(\\S(?:.*?\\S)??)_(?=[\\s*~,.;:!?'\")]|$)",nonCapturingPattern:"(?:[\\s*~'\"(]|^)_(?:\\S(?:.*?\\S)??)_(?=[\\s*~,.;:!?'\")]|$)"},strikethroughConfig:{pattern:"([\\s*_'\"(]|^)~(\\S(?:.*?\\S)??)~(?=[\\s*_,.;:!?'\")]|$)",nonCapturingPattern:"(?:[\\s*_'\"(]|^)~(?:\\S(?:.*?\\S)??)~(?=[\\s*_,.;:!?'\")]|$)"},codeConfig:{pattern:"([\\s*_~'\"(]|^)`([^`\\r\\n](?:.*?[^`\\r\\n])??)`(?=[\\s\\w*_~,.;:!?'\")]|$)",nonCapturingPattern:"(?:[\\s*_~'\"(]|^)`(?:[^`\\r\\n](?:.*?[^`\\r\\n])??)`(?=[\\s\\w*_~,.;:!?'\")]|$)"},codeBlockConfig:{pattern:"(```)([\\s\\S]+?)```",nonCapturingPattern:"(```)([\\s\\S]+?)```"},codeBlockV2Config:{pattern:"(`{3,})(?:(?:((.*?)(?:\\r\\n?|\\n|\\u2028))([\\s\\S]*?))|(.+?))\\1\\s*?(?:\\r\\n?|\\n|\\u2028|$)",nonCapturingPattern:"(`{3,})([\\s\\S]+?)\\1\\s*((\\r\\n)|\\r|\\n|\\u2028|$)"},blockQuoteConfig:{pattern:"(^>>> ?)((.|(\\r\\n)|\\r|\\n)*?\\S(.|(\\r\\n)|\\r|\\n)*?)^<<<\\s*?((\\r\\n)|\\r|\\n|$)",nonCapturingPattern:"(^>>> ?)((.|(\\r\\n)|\\r|\\n)*?\\S(.|(\\r\\n)|\\r|\\n)*?)^<<<\\s*((\\r\\n)|\\r|\\n|$)"},multipleInlineBlockQuoteConfig:{pattern:"((^> )(.*\\S.*)((\\r\\n)|\\r|\\n)?)(^> ?(.*)((\\r\\n)|\\r|\\n)?)*",nonCapturingPattern:"(^> (.*\\S.*)((\\r\\n)|\\r|\\n)?)(^> ?(.*)((\\r\\n)|\\r|\\n)?)*"},singleInlineBlockQuoteConfig:{pattern:"(^> ?)(.*?$)",nonCapturingPattern:"^> ?(.*?$)"},linkConfig:{pattern:"\\[([^\\[\\]]+)\\]\\(((?:https?|ftp):\\/\\/(-\\.)?(?:[^\\s\\/?\\.#-]+\\.?)+(?:\\/[^\\s]*)?)\\)",nonCapturingPattern:"\\[([^\\[\\]]+)\\]\\(((?:https?|ftp):\\/\\/(-\\.)?(?:[^\\s\\/?\\.#-]+\\.?)+(?:\\/[^\\s]*)?)\\)"},bulletedList:{pattern:"(^[-*+])\\s+(.*)",nonCapturingPattern:"(^[-*+])\\s+(.*)"},numberedList:{pattern:"(^(\\d)+\\.)\\s+(.*)",nonCapturingPattern:"(^\\d+\\.)\\s+(.*)"}});f["default"]=a}),66);
__d("MWChatTextFormatting",["$InternalEnum","MWChatStrikethroughText.react","MWXLink.react","MWXMessageBlockQuote.react","MWXText.react","MessageMarkdownCodeblockLanguages","MessengerFormattingConfig","UnicodeUtils","react","react-strict-dom","unrecoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=h||d("react"),k=b("$InternalEnum").Mirrored(["CodeBlock","InlineCode","BlockQuote","InlineQuote","Bold","Italics","StrikeThrough","Link","BulletedList","NumberedList"]),l=new Set(Object.values(c("MessageMarkdownCodeblockLanguages"))),m={codeBlock:{backgroundColor:"xmjcpbm",borderTopStartRadius:"x1lq5wgf",borderTopEndRadius:"xgqcy7u",borderBottomEndRadius:"x30kzoy",borderBottomStartRadius:"x9jhf4c",paddingTop:"x1iorvi4",paddingEnd:"x150jy0e",paddingBottom:"xjkvuk6",paddingStart:"x1e558r4",whiteSpace:"x126k92a",$$css:!0},codeInline:{$$css:!0}};function n(a){var b,d=function(a){return a[2]},e=function(a){return new Map()},f=1,g=!0,h=function(a){return!0};switch(a){case k.Bold:b=c("MessengerFormattingConfig").boldConfig.pattern;break;case k.Italics:b=c("MessengerFormattingConfig").italicConfig.pattern;break;case k.StrikeThrough:b=c("MessengerFormattingConfig").strikethroughConfig.pattern;break;case k.InlineCode:b=c("MessengerFormattingConfig").codeConfig.pattern;break;case k.BlockQuote:b=c("MessengerFormattingConfig").blockQuoteConfig.pattern;g=!1;break;case k.InlineQuote:h=function(a){return a.trim()!==">"};b=c("MessengerFormattingConfig").singleInlineBlockQuoteConfig.pattern;g=!1;break;case k.CodeBlock:d=function(a){var b,c;b=((b=a[3])!=null?b:"").trim().toLowerCase();c=(c=a[4])!=null?c:a[5];a=(a=a[2])!=null?a:"";return b===""||l.has(b)?c:a+c};b=c("MessengerFormattingConfig").codeBlockV2Config.pattern;g=!1;break;case k.Link:d=function(a){return a[1]};e=function(a){return new Map([["link",a[2]]])};b=c("MessengerFormattingConfig").linkConfig.pattern;g=!1;break;case k.BulletedList:b=c("MessengerFormattingConfig").bulletedList.pattern;g=!1;break;case k.NumberedList:b=c("MessengerFormattingConfig").numberedList.pattern;g=!1;d=function(a){return a[3]};e=function(a){return new Map([["index",a[2]]])};break}if(b==null)throw c("unrecoverableViolation")("No formatting config found for given format","messenger_comet");return{getCleanText:d,getExtraData:e,hasClosingTag:g,regExp:new RegExp(b,"gm"),tagIndex:f,validator:h}}var o=[k.CodeBlock,k.BlockQuote,k.InlineQuote,k.InlineCode,k.Bold,k.Italics,k.StrikeThrough],p=[k.Link,k.BulletedList,k.NumberedList];function q(a,b){switch(b.format){case k.Bold:return j.jsx(d("react-strict-dom").html.b,{children:b.text});case k.Italics:return j.jsx(d("react-strict-dom").html.i,{children:b.text});case k.StrikeThrough:return j.jsx(c("MWChatStrikethroughText.react"),{children:b.text});case k.CodeBlock:return j.jsx(d("react-strict-dom").html.div,{style:m.codeBlock,children:j.jsx(c("MWXText.react"),{type:"body4",children:j.jsx(d("react-strict-dom").html.code,{children:b.text})})});case k.InlineCode:return j.jsx(d("react-strict-dom").html.code,{style:m.codeInline,children:b.text});case k.BlockQuote:case k.InlineQuote:return j.jsx(c("MWXMessageBlockQuote.react"),{outgoing:!0,children:b.text});case k.Link:return j.jsx(c("MWXLink.react"),{href:b.extraData.get("link"),rel:"external",target:"_blank",children:j.jsx("u",{children:b.text})});case k.BulletedList:return j.jsx("ul",{className:"x1rg5ohu xtaz4m5 xdj266r x11i5rnm xat24cr x1mh8g0r xnc8h47",children:b.text.split("\n").map(function(a,b){return j.jsx("li",{children:a},b)})});case k.NumberedList:return j.jsx("ol",{className:"x1rg5ohu x3yw8vx xdj266r x11i5rnm xat24cr x1mh8g0r xnc8h47",start:b.extraData.get("index"),children:b.text.split("\n").map(function(a,b){return j.jsx("li",{children:a},b)})})}}q.displayName=q.name+" [from "+f.id+"]";function a(a,b){switch(b.format){case k.BlockQuote:case k.InlineQuote:return j.jsx(c("MWXMessageBlockQuote.react"),{outgoing:!1,children:b.text});default:return q(a,b)}}a.displayName=a.name+" [from "+f.id+"]";function e(a,b){b===void 0&&(b=!1);var c=[];b=b?[].concat(o,p):o;b.forEach(function(b){var e=n(b),f=e.getCleanText,g=e.getExtraData,h=e.hasClosingTag,j=e.regExp,k=e.tagIndex;e=e.validator;var l;if(!e(a))return;e=function(){if(l==null)return"break";var e=(i||(i=d("UnicodeUtils"))).substr(a,0,l.index);e=e.length-i.strlen(e);var j=l.index-e,m=i.strlen(l[0]);h&&(j+=l[k].length,m-=l[k].length);e=function(a){var b=j+m,c=a.offset+a.length;return b>a.offset&&j<c};var n=f(l),o=g(l);if(!c.find(e)){if(c.length>0){e=c[c.length-1];if(e.entity.format===b&&e.offset+e.length+1===j){e.entity.text+="\n"+n;e.length+=m+1;return"continue"}}c.push({entity:{__typename:"MessengerTextFormatting",extraData:o,format:b,text:n},length:m,offset:j})}};_loop:while((l=j.exec(a))!=null){var m=e();switch(m){case"break":break _loop;case"continue":continue}}});return c}g.MessengerTextFormattingEntity=k;g.messageRenderer=q;g.messageIncomingRenderer=a;g.getFormattingRanges=e}),98);
__d("MWLSPostbackCtaHandler",["Int64Hooks","LSFactory","LSIntEnum","LSMailboxType","LSMessageReplySourceType","LSMessageReplySourceTypeV2","LSOptimisticSendMessageV2StoredProcedure","LSShape","LSThreadAttributionTypeUtil","MWPActor.react","MWThreadKey.react","MessagePowerUp","promiseDone","react","useLSMessagingInitiatingSource","useLSMessagingSource","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=(j||d("react")).c;function a(){var a=k(7),b=(h||(h=c("useReStore")))(),e=d("MWPActor.react").useActor(),g=d("MWThreadKey.react").useMWThreadKeyMemoizedExn(),j=c("useLSMessagingInitiatingSource")(),l=c("useLSMessagingSource")(),m,n;a[0]!==g||a[1]!==l||a[2]!==b||a[3]!==j||a[4]!==e?(m=function(a,h){var k=d("LSThreadAttributionTypeUtil").getSource(g,l);c("promiseDone")(b.runInTransaction(function(b){return c("LSOptimisticSendMessageV2StoredProcedure")(c("LSFactory")(b),{extraSendMessageParams:d("LSShape").ofRecord({calculate_denormalizations:!0,initiating_source:(b=j)!=null?b:void 0,mark_read:!0,platform_token:a,power_up_style:(i||(i=d("LSIntEnum"))).ofNumber(c("MessagePowerUp").NONE),reply_source_type:i.ofNumber(c("LSMessageReplySourceType").NONE),reply_source_type_v2:i.ofNumber(c("LSMessageReplySourceTypeV2").NONE),snippet_has_emoji:!1,source:k}),mailboxType:i.ofNumber(c("LSMailboxType").MESSENGER),senderId:e,snippet:h,text:h,threadKey:g,threadType:i.ofNumber(1)})},"readwrite",void 0,void 0,f.id+":43"))},n=[b,l,j,e,g],a[0]=g,a[1]=l,a[2]=b,a[3]=j,a[4]=e,a[5]=m,a[6]=n):(m=a[5],n=a[6]);return d("Int64Hooks").useCallbackInt64(m,n)}g.usePostbackCtaHandler=a}),98);
__d("XP2PVerificationDialogBaseControllerRouteBuilder",["jsRouteBuilder"],(function(a,b,c,d,e,f,g){a=c("jsRouteBuilder")("/p2p/verify/dialog/",Object.freeze({is_sender_flow:!1}),void 0);b=a;g["default"]=b}),98);
__d("MWP2PPaymentTransactionInformationVerify",["JSResourceForInteraction","XP2PVerificationDialogBaseControllerRouteBuilder","gkx","nullthrows","react","useMWXLazyDialog"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).useCallback;function a(){var a=c("useMWXLazyDialog")(c("JSResourceForInteraction")("CometCompatModal.react").__setRef("MWP2PPaymentTransactionInformationVerify")),b=a[0];a=c("useMWXLazyDialog")(c("JSResourceForInteraction")("CometP2PPaymentIDVFlow.react").__setRef("MWP2PPaymentTransactionInformationVerify"));var d=a[0];return i(function(a){a=a.id;if(c("gkx")("22992"))return d({transferId:c("nullthrows")(a)},function(){});else return b({params:{rel:"dialog-post",uri:c("XP2PVerificationDialogBaseControllerRouteBuilder").buildURL({id:c("nullthrows")(a),is_sender_flow:!1})}},function(){})},[b])}g.useP2PPaymentTransactionInformationVerify=a}),98);
__d("ServicesCometLeadFormDialogRootQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="8460785663932128"}),null);
__d("ServicesCometLeadFormDialogRootQuery$Parameters",["ServicesCometLeadFormDialogRootQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a={kind:"PreloadableConcreteRequest",params:{id:b("ServicesCometLeadFormDialogRootQuery_facebookRelayOperation"),metadata:{},name:"ServicesCometLeadFormDialogRootQuery",operationKind:"query",text:null}};e.exports=a}),null);
__d("ViewFormDetailsModal.entrypoint",["JSResourceForInteraction","ServicesCometLeadFormDialogRootQuery$Parameters"],(function(a,b,c,d,e,f,g){"use strict";a={getPreloadProps:function(a){return{queries:{queryRef:{parameters:c("ServicesCometLeadFormDialogRootQuery$Parameters"),variables:{responseID:a.responseID}}}}},root:c("JSResourceForInteraction")("ServicesCometLeadFormDialogRoot.react").__setRef("ViewFormDetailsModal.entrypoint")};g["default"]=a}),98);
__d("commitWorkplaceChatBotSubmitFeedbackMutation_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="6107272026057140"}),null);
__d("commitWorkplaceChatBotSubmitFeedbackMutation.graphql",["commitWorkplaceChatBotSubmitFeedbackMutation_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"input"}],c=[{alias:"results",args:[{kind:"Variable",name:"data",variableName:"input"}],concreteType:"WorkplaceChatBotSubmitFeedbackResponsePayload",kind:"LinkedField",name:"workplace_chat_bot_submit_feedback",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"success",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"commitWorkplaceChatBotSubmitFeedbackMutation",selections:c,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"commitWorkplaceChatBotSubmitFeedbackMutation",selections:c},params:{id:b("commitWorkplaceChatBotSubmitFeedbackMutation_facebookRelayOperation"),metadata:{},name:"commitWorkplaceChatBotSubmitFeedbackMutation",operationKind:"mutation",text:null}}}();e.exports=a}),null);
__d("commitWorkplaceChatBotSubmitFeedbackMutation",["CometRelay","Promise","commitWorkplaceChatBotSubmitFeedbackMutation.graphql"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=h!==void 0?h:h=b("commitWorkplaceChatBotSubmitFeedbackMutation.graphql");function a(a){var c=a.action_content_blob,e=a.config;return new(i||(i=b("Promise")))(function(a,b){d("CometRelay").commitMutation(e.environment,{mutation:j,onCompleted:function(b){a((b=b.results)==null?void 0:b.success)},onError:function(a){b(a)},variables:{input:{action_content_blob:c}}})})}g["default"]=a}),98);
__d("useMWChatShowPIIForm",["CometRelay","JSResourceForInteraction","MWChatPIIFormNuxQuery","MWChatPIIFormScreenQuery","MWChatPIIFormStateQuery","react","useMWXLazyDialog"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");b.useCallback;var i=b.c,j=c("JSResourceForInteraction")("MWChatPIIFormDialog.react").__setRef("useMWChatShowPIIForm");function a(){var a=i(3),b=c("useMWXLazyDialog")(j),e=b[0],f=d("CometRelay").useRelayEnvironment();a[0]!==f||a[1]!==e?(b=function(a){var b=a.color,c=a.currentIndex,g=a.firstScreen,h=a.formId,i=a.numScreens,j=a.pageId;d("MWChatPIIFormStateQuery").fetch(h,f,function(a){d("MWChatPIIFormNuxQuery").fetch(f,h,j,function(k){if(i>1){d("MWChatPIIFormScreenQuery").fetch(h,j,1,f,function(d){return e({color:b,ctaType:null,currentIndex:c,firstScreen:g,formId:h,numScreens:i,nuxData:k,pageId:j,secondScreen:(d=d)!=null?d:void 0,state:a})});return}else return e({color:b,ctaType:null,currentIndex:c,firstScreen:g,formId:h,numScreens:i,nuxData:k,pageId:j,secondScreen:void 0,state:a})})})},a[0]=f,a[1]=e,a[2]=b):b=a[2];return b}g["default"]=a}),98);
__d("useMWLSMarketplaceXmaCtaHandler",["LSFactory","LSOptimisticProcessMarketplaceCallFunctionCTAStoredProcedure","MWThreadKey.react","promiseDone","react","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i;b=i||d("react");b.useCallback;var j=b.c;function a(){var a=j(3),b=(h||(h=c("useReStore")))(),e=d("MWThreadKey.react").useMWThreadKeyMemoizedExn(),g;a[0]!==b||a[1]!==e?(g=function(a,d,g,h){c("promiseDone")(b.runInTransaction(function(b){return c("LSOptimisticProcessMarketplaceCallFunctionCTAStoredProcedure")(c("LSFactory")(b),{actionType:h,attachmentFbid:d,messageId:a,targetId:g,threadKey:e})},"readwrite",void 0,void 0,f.id+":38"))},a[0]=b,a[1]=e,a[2]=g):g=a[2];return g}g["default"]=a}),98);
__d("useMWLSOpenStaticLocationDialog.react",["I64","JSResourceForInteraction","MWThreadKey.react","Promise","ReQL","ReQLSuspense","promiseDone","react","useMWXLazyDialog","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k;e=k||d("react");e.useCallback;var l=e.c;function a(){var a=l(6),e=(i||(i=c("useReStore")))(),g=d("MWThreadKey.react").useMWThreadKeyMemoizedExn(),k;a[0]===Symbol["for"]("react.memo_cache_sentinel")?(k=c("JSResourceForInteraction")("MWChatStaticLocationDialog.react").__setRef("useMWLSOpenStaticLocationDialog.react"),a[0]=k):k=a[0];k=c("useMWXLazyDialog")(k);var m=k[0];a[1]!==e.tables.attachments||a[2]!==e.tables.attachment_ctas||a[3]!==g||a[4]!==m?(k=function(a){c("promiseDone")(d("ReQL").firstAsync(d("ReQL").fromTableAscending(e.tables.attachments).getKeyRange(g,a).map(function(a){a=a.defaultCtaId;a=a!=null?a:(j||(j=d("I64"))).zero;a=d("ReQLSuspense").first(d("ReQL").fromTableAscending(e.tables.attachment_ctas).getKeyRange(a),f.id+":40");if(a!=null)return a.nativeUrl})).then(function(a){a=(a=a)!=null?a:"";var c=a.split(","),d=c[0];c=c[1];if(d==null||c==null){var e;a=new URL(a).searchParams;d=(e=a.get("lat"))!=null?e:"";c=(e=a.get("long"))!=null?e:""}m({latitude:d,longitude:c},function(){});return(h||(h=b("Promise"))).resolve()}))},a[1]=e.tables.attachments,a[2]=e.tables.attachment_ctas,a[3]=g,a[4]=m,a[5]=k):k=a[5];return k}g["default"]=a}),98);
__d("P2MAttachBankSlipDialogQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="5342426462467736"}),null);
__d("P2MAttachBankSlipDialogQuery$Parameters",["P2MAttachBankSlipDialogQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a={kind:"PreloadableConcreteRequest",params:{id:b("P2MAttachBankSlipDialogQuery_facebookRelayOperation"),metadata:{},name:"P2MAttachBankSlipDialogQuery",operationKind:"query",text:null}};e.exports=a}),null);
__d("P2MAttachBankSlipDialog.entrypoint",["JSResourceForInteraction","P2MAttachBankSlipDialogQuery$Parameters"],(function(a,b,c,d,e,f,g){"use strict";a={getPreloadProps:function(a){a=a.orderID;return{queries:{P2MAttachBankSlipDialogQueryReference:{parameters:b("P2MAttachBankSlipDialogQuery$Parameters"),variables:{orderID:a}}}}},root:c("JSResourceForInteraction")("P2MAttachBankSlipDialog.react").__setRef("P2MAttachBankSlipDialog.entrypoint")};g["default"]=a}),98);
__d("useMWUIAttachBankSlipDialog",["P2MAttachBankSlipDialog.entrypoint","react","useMWXEntryPointDialog"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).c;function a(a){var b=i(2),d;b[0]!==a?(d={orderID:a},b[0]=a,b[1]=d):d=b[1];return c("useMWXEntryPointDialog")(c("P2MAttachBankSlipDialog.entrypoint"),d)}g["default"]=a}),98);
__d("useMWLSShowAttachBankSlip",["react","useMWUIAttachBankSlipDialog"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");var i=b.useEffect;b.useMemo;var j=b.useState,k=b.c;function a(){var a=k(6),b=j(null),d=b[0],e=b[1];b=j(!1);var f=b[0],g=b[1];b=c("useMWUIAttachBankSlipDialog")(d);var h=b[0],l;a[0]!==d||a[1]!==f||a[2]!==h?(b=function(){d!=null&&f&&h({orderID:d},function(){return g(!1)})},l=[d,f,h],a[0]=d,a[1]=f,a[2]=h,a[3]=b,a[4]=l):(b=a[3],l=a[4]);i(b,l);a[5]===Symbol["for"]("react.memo_cache_sentinel")?(b=function(a){g(function(){return!0});return e(function(){return a})},a[5]=b):b=a[5];l=b;return l}g["default"]=a}),98);
__d("useMWUIECPCheckoutDialog",["FBP2MECPCheckoutDialog.entrypoint","react","useMWXEntryPointDialog"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).c;function a(a,b,d){var e=i(4),f;e[0]!==a||e[1]!==b||e[2]!==d?(f={entrypoint:a,orderID:b,pageID:d},e[0]=a,e[1]=b,e[2]=d,e[3]=f):f=e[3];return c("useMWXEntryPointDialog")(c("FBP2MECPCheckoutDialog.entrypoint"),f)}g["default"]=a}),98);
__d("useMWLSShowECPCheckout",["react","useMWUIECPCheckoutDialog"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");var i=b.useEffect;b.useMemo;var j=b.useState,k=b.c;function a(){var a=k(8),b=j(""),d=b[0],e=b[1];b=j("");var f=b[0],g=b[1];b=j("");var h=b[0],l=b[1];b=j(!1);var m=b[0],n=b[1];b=c("useMWUIECPCheckoutDialog")(h,d,f);var o=b[0],p;a[0]!==d||a[1]!==m||a[2]!==o||a[3]!==h||a[4]!==f?(b=function(){if(d!=null&&m){o({entrypoint:h,orderID:d,pageID:f},function(){return n(!1)});return}},p=[h,d,f,m,o],a[0]=d,a[1]=m,a[2]=o,a[3]=h,a[4]=f,a[5]=b,a[6]=p):(b=a[5],p=a[6]);i(b,p);a[7]===Symbol["for"]("react.memo_cache_sentinel")?(b=function(a,b,c){n(function(){return!0}),e(function(){var a;return(a=b)!=null?a:""}),g(function(){return c}),l(function(){return a})},a[7]=b):b=a[7];p=b;return p}g["default"]=a}),98);
__d("useMWLSShowMemberRequest",["GroupsCometAdminActivityLogItemSeeDetailsDialog.entrypoint","GroupsCometAdmodChatsReviewDialog.entrypoint","WebPixelRatio","react","useCometDynamicEntryPointDialog"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");b.useCallback;var i=b.c;function a(){var a=i(3),b=c("useCometDynamicEntryPointDialog")(c("GroupsCometAdminActivityLogItemSeeDetailsDialog.entrypoint")),e=c("useCometDynamicEntryPointDialog")(c("GroupsCometAdmodChatsReviewDialog.entrypoint")),f;a[0]!==b||a[1]!==e?(f=function(a,c,f,g){if(a==null)return;g!=null&&g!=="0"?b({routeProps:{adminActivityID:g,groupID:c,isManagementActivityLogTargetProfilePlus:!1}},{activityLogTarget:"Group",groupID:c}):e({groupID:c,profileID:f,scale:d("WebPixelRatio").get()},{})},a[0]=b,a[1]=e,a[2]=f):f=a[2];return f}g["default"]=a}),98);
__d("P2MOffsiteBankTransferDialogQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="5004730099638134"}),null);
__d("P2MOffsiteBankTransferDialogQuery$Parameters",["P2MOffsiteBankTransferDialogQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a={kind:"PreloadableConcreteRequest",params:{id:b("P2MOffsiteBankTransferDialogQuery_facebookRelayOperation"),metadata:{},name:"P2MOffsiteBankTransferDialogQuery",operationKind:"query",text:null}};e.exports=a}),null);
__d("P2MOffsiteBankTransferDialog.entrypoint",["JSResourceForInteraction","P2MOffsiteBankTransferDialogQuery$Parameters"],(function(a,b,c,d,e,f,g){"use strict";a={getPreloadProps:function(a){a=a.orderID;return{queries:{P2MOffsiteBankTransferDialogQueryReference:{parameters:b("P2MOffsiteBankTransferDialogQuery$Parameters"),variables:{input:{invoice_id:a}}}}}},root:c("JSResourceForInteraction")("P2MOffsiteBankTransferDialog.react").__setRef("P2MOffsiteBankTransferDialog.entrypoint")};g["default"]=a}),98);
__d("useMWUIOffsiteBankTransferDialog",["P2MOffsiteBankTransferDialog.entrypoint","react","useMWXEntryPointDialog"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).c;function a(a){var b=i(2),d;b[0]!==a?(d={orderID:a},b[0]=a,b[1]=d):d=b[1];return c("useMWXEntryPointDialog")(c("P2MOffsiteBankTransferDialog.entrypoint"),d)}g["default"]=a}),98);
__d("useMWLSShowOffsiteBankTransfer",["react","useMWUIOffsiteBankTransferDialog"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");var i=b.useEffect;b.useMemo;var j=b.useState,k=b.c;function a(){var a=k(6),b=j(null),d=b[0],e=b[1];b=j(!1);var f=b[0],g=b[1];b=c("useMWUIOffsiteBankTransferDialog")(d);var h=b[0],l;a[0]!==d||a[1]!==f||a[2]!==h?(b=function(){d!=null&&f&&h({orderID:d},function(){return g(!1)})},l=[d,f,h],a[0]=d,a[1]=f,a[2]=h,a[3]=b,a[4]=l):(b=a[3],l=a[4]);i(b,l);a[5]===Symbol["for"]("react.memo_cache_sentinel")?(b=function(a){g(function(){return!0});return e(function(){return a})},a[5]=b):b=a[5];l=b;return l}g["default"]=a}),98);
__d("P2MInvoicerAndConsumerSwitcherQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="6822387771217384"}),null);
__d("P2MInvoicerAndConsumerSwitcherQuery$Parameters",["P2MInvoicerAndConsumerSwitcherQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a={kind:"PreloadableConcreteRequest",params:{id:b("P2MInvoicerAndConsumerSwitcherQuery_facebookRelayOperation"),metadata:{},name:"P2MInvoicerAndConsumerSwitcherQuery",operationKind:"query",text:null}};e.exports=a}),null);
__d("P2MOrderDetailDialogQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="7946922365423555"}),null);
__d("P2MOrderDetailDialogQuery$Parameters",["P2MOrderDetailDialogQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a={kind:"PreloadableConcreteRequest",params:{id:b("P2MOrderDetailDialogQuery_facebookRelayOperation"),metadata:{live:{polling_interval:1e4}},name:"P2MOrderDetailDialogQuery",operationKind:"query",text:null}};e.exports=a}),null);
__d("P2MOrderDetailDialog.entrypoint",["JSResourceForInteraction","P2MInvoicerAndConsumerSwitcherQuery$Parameters","P2MOrderDetailDialogQuery$Parameters"],(function(a,b,c,d,e,f,g){"use strict";a={getPreloadProps:function(a){a=a.orderID;return{queries:{P2MInvoicerAndConsumerSwitcherQueryReference:{parameters:b("P2MInvoicerAndConsumerSwitcherQuery$Parameters"),variables:{orderID:a}},P2MOrderDetailDialogQueryReference:{parameters:b("P2MOrderDetailDialogQuery$Parameters"),variables:{orderID:a}}}}},root:c("JSResourceForInteraction")("P2MOrderDetailDialogContainer.react").__setRef("P2MOrderDetailDialog.entrypoint")};g["default"]=a}),98);
__d("useMWUIOrderDetailsDialog",["P2MOrderDetailDialog.entrypoint","react","useMWXEntryPointDialog"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).c;function a(a){var b=i(3),d;b[0]!==a?(d={orderID:a},b[0]=a,b[1]=d):d=b[1];b[2]===Symbol["for"]("react.memo_cache_sentinel")?(a={baseModalProps:{disableGeoToCometModalsCompatibility_DO_NOT_USE:!0}},b[2]=a):a=b[2];return c("useMWXEntryPointDialog")(c("P2MOrderDetailDialog.entrypoint"),d,void 0,void 0,a)}g["default"]=a}),98);
__d("useMWLSShowOrderDetails",["InteractionTracing","qpl","react","useMWUIOrderDetailsDialog"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");var i=b.useEffect;b.useMemo;var j=b.useState,k=b.c;function a(){var a=k(6),b=j(null),d=b[0],e=b[1];b=j(!1);var f=b[0],g=b[1];b=c("useMWUIOrderDetailsDialog")(d);var h=b[0],l;a[0]!==d||a[1]!==f||a[2]!==h?(b=function(){if(d!=null&&f){var a=c("InteractionTracing").startInteraction({interactionClass:"fast",qplEvent:c("qpl")._(341848280,"867"),tracePolicy:"ctxo_performance.orderDetails.v2",traceType:"INTERACTION"});h({interactionID:a,orderID:d},function(){g(!1),c("InteractionTracing").getPendingInteractions().forEach(function(a){var b;((b=a.getTrace())==null?void 0:b.tracePolicy)==="ctxo_performance.orderDetails.v2"&&a.cancelTrace("[Manual Cancel] Dialog Closed",!0)})})}},l=[d,f,h],a[0]=d,a[1]=f,a[2]=h,a[3]=b,a[4]=l):(b=a[3],l=a[4]);i(b,l);a[5]===Symbol["for"]("react.memo_cache_sentinel")?(b=function(a){g(function(){return!0});return e(function(){return a})},a[5]=b):b=a[5];l=b;return l}g["default"]=a}),98);
__d("useMWUIPaymentDetailsDialog",["FBPayHubTransactionDetailDialog.entrypoint","react","useMWXEntryPointDialog"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).c;function a(a){var b=i(2),d;b[0]!==a?(d={transactionID:a},b[0]=a,b[1]=d):d=b[1];return c("useMWXEntryPointDialog")(c("FBPayHubTransactionDetailDialog.entrypoint"),d)}g["default"]=a}),98);
__d("useMWLSShowPaymentDetails",["fbt","LSIntEnum","MWLSDatabaseLazySync","promiseDone","react","useMWUIPaymentDetailsDialog"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j;b=i||d("react");var k=b.useEffect;b.useMemo;var l=b.useState,m=b.c;function a(){var a=m(8),b=l(null),e=b[0],f=b[1];b=l(!1);var g=b[0],i=b[1];b=c("useMWUIPaymentDetailsDialog")(e);var n=b[0];a[0]===Symbol["for"]("react.memo_cache_sentinel")?(b=(j||(j=d("LSIntEnum"))).ofNumber(15),a[0]=b):b=a[0];var o=d("MWLSDatabaseLazySync").useSync(b),p;a[1]!==e||a[2]!==g||a[3]!==n?(b=function(){e!=null&&g&&n({title:h._("__JHASH__NIyxBo8HYXZ__JHASH__"),transactionID:e},function(){return i(!1)})},p=[e,g,n],a[1]=e,a[2]=g,a[3]=n,a[4]=b,a[5]=p):(b=a[4],p=a[5]);k(b,p);a[6]!==o?(b=function(a){c("promiseDone")(o());i(function(){return!0});return f(function(){return a})},a[6]=o,a[7]=b):b=a[7];p=b;return p}g["default"]=a}),226);
__d("useMWUIPendingPostDialog",["GroupsCometAdminActivityLogItemSeeDetailsDialog.entrypoint","GroupsCometAdmodChatsPendingPostReviewDialog.entrypoint","WebPixelRatio","react","useMWXEntryPointDialog"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).c;function a(a,b,e,f,g){a=i(8);var h;a[0]!==g||a[1]!==b?(h={routeProps:{adminActivityID:g,groupID:b,isManagementActivityLogTargetProfilePlus:!1}},a[0]=g,a[1]=b,a[2]=h):h=a[2];h=c("useMWXEntryPointDialog")(c("GroupsCometAdminActivityLogItemSeeDetailsDialog.entrypoint"),h);var j;a[3]===Symbol["for"]("react.memo_cache_sentinel")?(j=d("WebPixelRatio").get(),a[3]=j):j=a[3];a[4]!==e||a[5]!==b||a[6]!==f?(j={authorID:e,groupID:b,postID:f,scale:j},a[4]=e,a[5]=b,a[6]=f,a[7]=j):j=a[7];e=c("useMWXEntryPointDialog")(c("GroupsCometAdmodChatsPendingPostReviewDialog.entrypoint"),j);return g!=null&&g!=="0"?h:e}g["default"]=a}),98);
__d("useMWLSShowPendingPost",["react","useMWUIPendingPostDialog"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");var i=b.useEffect;b.useMemo;var j=b.useState,k=b.c;function a(){var a=k(9),b=j(null),d=b[0],e=b[1];b=j("");var f=b[0],g=b[1];b=j("");var h=b[0],l=b[1];b=j("");var m=b[0],n=b[1];b=j("");var o=b[0],p=b[1];b=j(!1);var q=b[0],r=b[1];b=c("useMWUIPendingPostDialog")(d,f,h,m,o);var s=b[0];a[0]!==d||a[1]!==q||a[2]!==s||a[3]!==f?(h=function(){d!=null&&q&&s({activityLogTarget:"Group",groupID:f},function(){return r(!1)})},a[0]=d,a[1]=q,a[2]=s,a[3]=f,a[4]=h):h=a[4];a[5]!==d||a[6]!==q?(m=[d,q],a[5]=d,a[6]=q,a[7]=m):m=a[7];i(h,m);a[8]===Symbol["for"]("react.memo_cache_sentinel")?(o=function(a,b,c,d,f){r(!0);e(a);g(b);l(c);n(d);return p(f)},a[8]=o):o=a[8];b=o;return b}g["default"]=a}),98);
__d("useMWP2PPaymentRequestCancelDialog",["JSResourceForInteraction","react","useMWXLazyDialog"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");b.useCallback;var i=b.c;function a(){var a=i(3),b;a[0]===Symbol["for"]("react.memo_cache_sentinel")?(b=c("JSResourceForInteraction")("MWChatComposerP2PPaymentRequestCancelDialog.react").__setRef("useMWP2PPaymentRequestCancelDialog"),a[0]=b):b=a[0];b=c("useMWXLazyDialog")(b);var d=b[0];a[1]!==d?(b=function(a){a!=null&&d({id:a})},a[1]=d,a[2]=b):b=a[2];return b}g["default"]=a}),98);
__d("useMWP2PPaymentTransactionDeclineDialog",["JSResourceForInteraction","react","useMWXLazyDialog"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");b.useCallback;var i=b.c;function a(){var a=i(3),b;a[0]===Symbol["for"]("react.memo_cache_sentinel")?(b=c("JSResourceForInteraction")("MWChatComposerP2PPaymentTransactionDeclineDialog.react").__setRef("useMWP2PPaymentTransactionDeclineDialog"),a[0]=b):b=a[0];b=c("useMWXLazyDialog")(b);var d=b[0];a[1]!==d?(b=function(a){a!=null&&d({id:a})},a[1]=d,a[2]=b):b=a[2];return b}g["default"]=a}),98);
__d("getRingbackUrl",["URI"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b){if(a==null)return null;a=new(h||(h=c("URI")))(a);a.addQueryData("users_to_ring",[b]);return a.toString()}g["default"]=a}),98);
__d("useMakeRoomRingback",["I64","LSIntEnum","MWThreadKey.react","Promise","RTWebPreCallHooks","ReQL","getRingbackUrl","promiseDone","react","recoverableViolation","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l;e=l||d("react");e.useCallback;var m=e.c;function a(){var a=m(4),e=d("RTWebPreCallHooks").useJoinMeetupCallback(),f=(i||(i=c("useReStore")))(),g=d("MWThreadKey.react").useMWThreadKeyMemoizedExn(),l;a[0]!==f.tables.threads||a[1]!==g||a[2]!==e?(l=function(a){var i=a.linkUrl;c("promiseDone")(d("ReQL").firstAsync(d("ReQL").fromTableAscending(f.tables.threads).getKeyRange(g)).then(function(a){if(a!=null){a=(j||(j=d("I64"))).equal(a.threadType,(k||(k=d("LSIntEnum"))).ofNumber(1))?c("getRingbackUrl")(i,(j||(j=d("I64"))).to_string(a.threadKey)):(c("recoverableViolation")("Cannot ring a non user thread","rtc_www"),i);return(h||(h=b("Promise"))).resolve(e(a))}c("recoverableViolation")("Cannot find thread when trying to ring a user","rtc_www");return(h||(h=b("Promise"))).resolve()}),void 0,function(a){c("recoverableViolation")("Error making a ring back","rtc_www",{error:a.Error})})},a[0]=f.tables.threads,a[1]=g,a[2]=e,a[3]=l):l=a[3];return l}g["default"]=a}),98);
__d("useP2PPaymentMethodAddDialog",["JSResourceForInteraction","emptyFunction","react","useMWXLazyDialog"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");b.useCallback;var i=b.c;function a(){var a=i(3),b;a[0]===Symbol["for"]("react.memo_cache_sentinel")?(b=c("JSResourceForInteraction")("MWChatComposerP2PPaymentMethodAddDialog.react").__setRef("useP2PPaymentMethodAddDialog"),a[0]=b):b=a[0];b=c("useMWXLazyDialog")(b);var d=b[0];a[1]!==d?(b=function(a){a!=null&&d({id:a},c("emptyFunction"))},a[1]=d,a[2]=b):b=a[2];return b}g["default"]=a}),98);
__d("useP2PPaymentRequestConfirmDialog",["JSResourceForInteraction","emptyFunction","react","useMWXLazyDialog"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");b.useCallback;var i=b.c;function a(){var a=i(3),b;a[0]===Symbol["for"]("react.memo_cache_sentinel")?(b=c("JSResourceForInteraction")("MWChatComposerP2PPaymentRequestConfirmDialog.react").__setRef("useP2PPaymentRequestConfirmDialog"),a[0]=b):b=a[0];b=c("useMWXLazyDialog")(b);var d=b[0];a[1]!==d?(b=function(a){a!=null&&d({id:a},c("emptyFunction"))},a[1]=d,a[2]=b):b=a[2];return b}g["default"]=a}),98);
__d("useP2PPaymentRequestDeclineDialog",["JSResourceForInteraction","react","useMWXLazyDialog"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");b.useCallback;var i=b.c;function a(){var a=i(3),b;a[0]===Symbol["for"]("react.memo_cache_sentinel")?(b=c("JSResourceForInteraction")("MWChatComposerP2PPaymentRequestDeclineDialog.react").__setRef("useP2PPaymentRequestDeclineDialog"),a[0]=b):b=a[0];b=c("useMWXLazyDialog")(b);var d=b[0];a[1]!==d?(b=function(a){a!=null&&d({id:a})},a[1]=d,a[2]=b):b=a[2];return b}g["default"]=a}),98);
__d("ServicesApproveAppointmentMutation_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="5262522413766771"}),null);
__d("ServicesApproveAppointmentMutation.graphql",["ServicesApproveAppointmentMutation_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"input"}],c=[{alias:null,args:[{kind:"Variable",name:"data",variableName:"input"}],concreteType:"InstantBookingConfirmAppointmentResponsePayload",kind:"LinkedField",name:"instant_booking_confirm_appointment",plural:!1,selections:[{alias:null,args:null,concreteType:"NativeComponentFlowBookingRequest",kind:"LinkedField",name:"request",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"ServicesApproveAppointmentMutation",selections:c,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"ServicesApproveAppointmentMutation",selections:c},params:{id:b("ServicesApproveAppointmentMutation_facebookRelayOperation"),metadata:{},name:"ServicesApproveAppointmentMutation",operationKind:"mutation",text:null}}}();e.exports=a}),null);
__d("useServicesConfirmAppointmentBookingMutation",["RelayHooks","ServicesApproveAppointmentMutation.graphql","react"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");b.useCallback;var i=b.c;function a(){var a=i(2),b=d("RelayHooks").useMutation(c("ServicesApproveAppointmentMutation.graphql")),e=b[0];a[0]!==e?(b=function(a){e({variables:{input:{referrer_ui_component:"BUBBLE",referrer_ui_surface:"MESSAGE",request_id:a}}})},a[0]=e,a[1]=b):b=a[1];return b}g["default"]=a}),98);
__d("MWChatXmaThirdPartyActionHandler",["fbt","AdsMessengerContext.react","CometMarketplaceCreateDiscountedPriceDialog.entrypoint","CometRelay","CtmMultiPhotoCarouselMsgrMultiPhotoCarouselClickFalcoEvent","CustomerInformationTemplateFalcoEvent","JSResourceForInteraction","LSFactory","LSMarkAsXStoredProcedure","MWBuyerShippingAddressRootQuery","MWChatCustomerFeedbackFormDataQuery","MWChatCustomerFeedbackStateQuery","MWChatPIIFormScreenQuery","MWChatPIIFormStateQuery","MWChatReceiptDataQuery","MWLSPostbackCtaHandler","MWP2PPaymentTransactionInformationVerify","MarketplaceCometReviewOffersDialog.entrypoint","Popup","ViewFormDetailsModal.entrypoint","asyncToGeneratorRuntime","cometPushToast","commitWorkplaceChatBotSubmitFeedbackMutation","cr:11076","emptyFunction","goUriOnNewWindow","promiseDone","react","requireDeferred","useAsyncReStore","useCometDynamicEntryPointDialog","useMWChatShowPIIForm","useMWLSMarketplaceXmaCtaHandler","useMWLSOpenStaticLocationDialog.react","useMWLSShowAttachBankSlip","useMWLSShowECPCheckout","useMWLSShowMemberRequest","useMWLSShowOffsiteBankTransfer","useMWLSShowOrderDetails","useMWLSShowPaymentDetails","useMWLSShowPendingPost","useMWP2PPaymentRequestCancelDialog","useMWP2PPaymentTransactionDeclineDialog","useMWXLazyDialog","useMakeRoomRingback","useP2PPaymentMethodAddDialog","useP2PPaymentRequestConfirmDialog","useP2PPaymentRequestDeclineDialog","useServicesConfirmAppointmentBookingMutation"],(function(a,b,c,d,e,f,g,h){"use strict";var i;e=i||d("react");e.useCallback;var j=e.c,k=c("requireDeferred")("ZenonUserActionLoggerCommon").__setRef("MWChatXmaThirdPartyActionHandler");function l(){var a=j(3),b;a[0]===Symbol["for"]("react.memo_cache_sentinel")?(b=c("JSResourceForInteraction")("MWChatReceiptModal.react").__setRef("MWChatXmaThirdPartyActionHandler"),a[0]=b):b=a[0];b=c("useMWXLazyDialog")(b);var e=b[0];a[1]!==e?(b=function(a){var b=a.messageId;a=a.receiptId;if(a!=null){d("MWChatReceiptDataQuery").fetch(a,b,function(a){var b=h._("__JHASH__PDJB6VYGeXn__JHASH__");return e({receipt:a,title:b})});return}},a[1]=e,a[2]=b):b=a[2];return b}function m(){var a=j(3),b;a[0]===Symbol["for"]("react.memo_cache_sentinel")?(b=c("JSResourceForInteraction")("PaymentsCometInfomationBottomSheetDialog.react").__setRef("MWChatXmaThirdPartyActionHandler"),a[0]=b):b=a[0];b=c("useMWXLazyDialog")(b);var d=b[0];a[1]!==d?(b=function(a){d({contentType:a.contentType.content_type,orderID:a.orderID,pageID:a.pageID},c("emptyFunction"))},a[1]=d,a[2]=b):b=a[2];return b}function aa(){var a=j(3),b;a[0]===Symbol["for"]("react.memo_cache_sentinel")?(b=c("JSResourceForInteraction")("P2MCometAsyncControllerDialog.react").__setRef("MWChatXmaThirdPartyActionHandler"),a[0]=b):b=a[0];b=c("useMWXLazyDialog")(b);var d=b[0];a[1]!==d?(b=function(a){d({contentType:a.payload.action_type},c("emptyFunction"))},a[1]=d,a[2]=b):b=a[2];return b}function ba(){var a=j(4),b;a[0]===Symbol["for"]("react.memo_cache_sentinel")?(b=c("JSResourceForInteraction")("PaymentsCometOffsitePaymentOnboaringDialog.react").__setRef("MWChatXmaThirdPartyActionHandler"),a[0]=b):b=a[0];var d;a[1]===Symbol["for"]("react.memo_cache_sentinel")?(d={baseModalProps:{disableGeoToCometModalsCompatibility_DO_NOT_USE:!0}},a[1]=d):d=a[1];b=c("useMWXLazyDialog")(b,void 0,d);var e=b[0];a[2]!==e?(d=function(a){e({orderID:a.orderID},c("emptyFunction"))},a[2]=e,a[3]=d):d=a[3];return d}function ca(){var a=j(4),b;a[0]===Symbol["for"]("react.memo_cache_sentinel")?(b=c("JSResourceForInteraction")("PaymentsCometBankSlipDetailsPanelDialog.react").__setRef("MWChatXmaThirdPartyActionHandler"),a[0]=b):b=a[0];var d;a[1]===Symbol["for"]("react.memo_cache_sentinel")?(d={baseModalProps:{disableGeoToCometModalsCompatibility_DO_NOT_USE:!0}},a[1]=d):d=a[1];b=c("useMWXLazyDialog")(b,void 0,d);var e=b[0];a[2]!==e?(d=function(a){e({orderID:a.orderID},c("emptyFunction"))},a[2]=e,a[3]=d):d=a[3];return d}function da(){var a=j(4),b;a[0]===Symbol["for"]("react.memo_cache_sentinel")?(b=c("JSResourceForInteraction")("PaymentsCometPaymentSlipDetailslDialog.react").__setRef("MWChatXmaThirdPartyActionHandler"),a[0]=b):b=a[0];var d;a[1]===Symbol["for"]("react.memo_cache_sentinel")?(d={baseModalProps:{disableGeoToCometModalsCompatibility_DO_NOT_USE:!0}},a[1]=d):d=a[1];b=c("useMWXLazyDialog")(b,void 0,d);var e=b[0];a[2]!==e?(d=function(a){e({paymentSlipID:a.orderID},c("emptyFunction"))},a[2]=e,a[3]=d):d=a[3];return d}function ea(){var a=j(4),b;a[0]===Symbol["for"]("react.memo_cache_sentinel")?(b=c("JSResourceForInteraction")("MWBuyerShippingAddressRoot.react").__setRef("MWChatXmaThirdPartyActionHandler"),a[0]=b):b=a[0];b=c("useMWXLazyDialog")(b);var e=b[0],f=d("CometRelay").useRelayEnvironment();a[1]!==f||a[2]!==e?(b=function(a){c("CustomerInformationTemplateFalcoEvent").log(function(){return{consumer_id:a.actorId,event_type:"mw_xma_click",form_id:a.eeMessageId,page_id:a.pageId}});var b=d("CometRelay").loadQuery(f,c("MWBuyerShippingAddressRootQuery"),{id:a.pageId});e({actorId:a.actorId,eeMessageId:a.eeMessageId,initialQueryRef:b,messageId:a.messageId,pageId:a.pageId},function(){b.dispose()})},a[1]=f,a[2]=e,a[3]=b):b=a[3];return b}function fa(){var a=j(2),b=d("CometRelay").useRelayEnvironment(),e;a[0]!==b?(e=function(a){var e={environment:b};a=c("commitWorkplaceChatBotSubmitFeedbackMutation")({action_content_blob:a.feedbackActionContentBlob,config:e});e=a.then(function(){d("cometPushToast").cometPushSimpleToast("Feedback submitted!",2e3)},function(){d("cometPushToast").cometPushSimpleToast("Error in submitting feedback!",2e3)});c("promiseDone")(e)},a[0]=b,a[1]=e):e=a[1];return e}var n=c("JSResourceForInteraction")("MWChatCustomerFeedbackDialog.react").__setRef("MWChatXmaThirdPartyActionHandler");function ga(){var a=j(3),b=c("useMWXLazyDialog")(n),e=b[0],f=d("CometRelay").useRelayEnvironment();a[0]!==f||a[1]!==e?(b=function(a){var b=a.feedbackFormId;d("MWChatCustomerFeedbackStateQuery").fetch(b,f,function(a){a!=null&&d("MWChatCustomerFeedbackFormDataQuery").fetch(b,f,function(b){b!=null&&e({firstScreen:b.firstScreen,formId:b.formId,pageId:b.pageId,privacy:b.privacy,state:a})})})},a[0]=f,a[1]=e,a[2]=b):b=a[2];return b}function ha(){var a=j(3),b=c("useMWXLazyDialog")(n),e=b[0],f=d("CometRelay").useRelayEnvironment();a[0]!==f||a[1]!==e?(b=function(a){var b=a.firstScreen,c=a.formId,g=a.pageId,h=a.privacy;d("MWChatCustomerFeedbackStateQuery").fetch(c,f,function(a){return e({firstScreen:b,formId:c,pageId:g,privacy:h,state:a})})},a[0]=f,a[1]=e,a[2]=b):b=a[2];return b}function ia(){var a=j(4),b;a[0]===Symbol["for"]("react.memo_cache_sentinel")?(b=c("JSResourceForInteraction")("MWChatPIIFormDialog.react").__setRef("MWChatXmaThirdPartyActionHandler"),a[0]=b):b=a[0];b=c("useMWXLazyDialog")(b);var e=b[0],f=d("CometRelay").useRelayEnvironment();a[1]!==f||a[2]!==e?(b=function(a){var b=a.ctaType,c=a.nuxData;a=a.piiForm;var g=a.color,h=a.currentIndex,i=a.firstScreen,j=a.formId,k=a.numScreens,l=a.pageId;d("MWChatPIIFormStateQuery").fetch(j,f,function(a){if(k>1){d("MWChatPIIFormScreenQuery").fetch(j,l,1,f,function(d){return e({color:g,ctaType:b,currentIndex:h,firstScreen:i,formId:j,numScreens:k,nuxData:c,pageId:l,secondScreen:d,state:a})});return}else return e({color:g,ctaType:b,currentIndex:h,firstScreen:i,formId:j,numScreens:k,nuxData:c,pageId:l,secondScreen:void 0,state:a})})},a[1]=f,a[2]=e,a[3]=b):b=a[3];return b}function ja(){var a=j(3),b;a[0]===Symbol["for"]("react.memo_cache_sentinel")?(b=c("JSResourceForInteraction")("MWInboxUrlWebviewDialog.react").__setRef("MWChatXmaThirdPartyActionHandler"),a[0]=b):b=a[0];b=c("useMWXLazyDialog")(b);var d=b[0];a[1]!==d?(b=function(){var a=h._("__JHASH__HFLlRGYwWh7__JHASH__").toString();d({htmlBlob:a})},a[1]=d,a[2]=b):b=a[2];return b}function ka(){var a=j(3),b;a[0]===Symbol["for"]("react.memo_cache_sentinel")?(b=c("JSResourceForInteraction")("MessengerCometBookingDetailsModal.react").__setRef("MWChatXmaThirdPartyActionHandler"),a[0]=b):b=a[0];b=c("useMWXLazyDialog")(b);var d=b[0];a[1]!==d?(b=function(a){return d({pageID:a.pageId,requestID:a.requestId})},a[1]=d,a[2]=b):b=a[2];return b}function la(){var a=j(2),b=c("useCometDynamicEntryPointDialog")(c("ViewFormDetailsModal.entrypoint")),d;a[0]!==b?(d=function(a){return b({responseID:a.responseID},{responseID:a.responseID})},a[0]=b,a[1]=d):d=a[1];return d}function ma(){var a=j(3),b;a[0]===Symbol["for"]("react.memo_cache_sentinel")?(b=c("JSResourceForInteraction")("MWChatLiveLocationDialog.react").__setRef("MWChatXmaThirdPartyActionHandler"),a[0]=b):b=a[0];b=c("useMWXLazyDialog")(b);var d=b[0];a[1]!==d?(b=function(a){return d({})},a[1]=d,a[2]=b):b=a[2];return b}function na(){var a=j(2),b=c("useMWLSOpenStaticLocationDialog.react")(),d;a[0]!==b?(d=function(a){return b(a.msgId)},a[0]=b,a[1]=d):d=a[1];return d}function oa(){var a=j(3),b;a[0]===Symbol["for"]("react.memo_cache_sentinel")?(b=c("JSResourceForInteraction")("MWChatBusinessBoardingPassDetail.react").__setRef("MWChatXmaThirdPartyActionHandler"),a[0]=b):b=a[0];b=c("useMWXLazyDialog")(b);var d=b[0];a[1]!==d?(b=function(a){return d({boardingPassDetail:a})},a[1]=d,a[2]=b):b=a[2];return b}function pa(){var a=j(3),b;a[0]===Symbol["for"]("react.memo_cache_sentinel")?(b=c("JSResourceForInteraction")("MWChatBusinessItineraryDetail.react").__setRef("MWChatXmaThirdPartyActionHandler"),a[0]=b):b=a[0];b=c("useMWXLazyDialog")(b);var d=b[0];a[1]!==d?(b=function(a){return d({itineraryPayload:a})},a[1]=d,a[2]=b):b=a[2];return b}function qa(){var a=j(3),b;a[0]===Symbol["for"]("react.memo_cache_sentinel")?(b=c("JSResourceForInteraction")("MWChatBusinessMessengerExtension.react").__setRef("MWChatXmaThirdPartyActionHandler"),a[0]=b):b=a[0];b=c("useMWXLazyDialog")(b);var d=b[0];a[1]!==d?(b=function(a){return d({actionLink:a.actionLink,pageID:a.pageID,threadID:a.pageID,userID:a.userID},c("emptyFunction"))},a[1]=d,a[2]=b):b=a[2];return b}function ra(){var a=j(3),b;a[0]===Symbol["for"]("react.memo_cache_sentinel")?(b=c("JSResourceForInteraction")("MWChatRichWidgetExtension.react").__setRef("MWChatXmaThirdPartyActionHandler"),a[0]=b):b=a[0];b=c("useMWXLazyDialog")(b);var d=b[0];a[1]!==d?(b=function(a){return d({actionLink:a.actionLink,pageID:a.pageID},c("emptyFunction"))},a[1]=d,a[2]=b):b=a[2];return b}function sa(a){var b=j(2),c;b[0]!==a?(c=function(b){k.onReady(function(a){return a.logClick({component:"start_call_button",surface:"admin_message"})});return a(b.hasVideo,b.threadId,b.trigger,b.representedID)},b[0]=a,b[1]=c):c=b[1];return c}function ta(){var a=j(3),b;a[0]===Symbol["for"]("react.memo_cache_sentinel")?(b=c("JSResourceForInteraction")("MWChatGuestChatHistoryModal.react").__setRef("MWChatXmaThirdPartyActionHandler"),a[0]=b):b=a[0];b=c("useMWXLazyDialog")(b);var d=b[0];a[1]!==d?(b=function(a){return d({guestID:a.guestId,pageID:a.pageId})},a[1]=d,a[2]=b):b=a[2];return b}function ua(){return o}function o(a){if(b("cr:11076")!=null)return b("cr:11076").$$process(a.ctaId,a.messageId)}function va(a){d("Popup").open(a,1024,500)}function wa(a){if(a==="xma_p2m_mark_as_received")return"xma_p2m_mark_as_received";else if(a==="xma_p2m_mark_as_paid")return"xma_p2m_mark_as_paid";else if(a==="xma_p2m_mark_as_shipped")return"xma_p2m_mark_as_shipped";return null}function xa(){var a=j(3),b;a[0]===Symbol["for"]("react.memo_cache_sentinel")?(b=c("JSResourceForInteraction")("CometJoinRoomFromPortalDialog.react").__setRef("MWChatXmaThirdPartyActionHandler"),a[0]=b):b=a[0];b=c("useMWXLazyDialog")(b);var d=b[0];a[1]!==d?(b=function(a){return d({linkUrl:a.linkUrl})},a[1]=d,a[2]=b):b=a[2];return b}function ya(){var a=j(2),d=c("useAsyncReStore")(),e;a[0]!==d?(e=function(a,e,f){c("promiseDone")(d.then(function(){var d=b("asyncToGeneratorRuntime").asyncToGenerator(function*(d){yield d.runInTransaction(function(){var d=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){yield c("LSMarkAsXStoredProcedure")(c("LSFactory")(b),{ctaId:a,ctaType:e,orderId:f})});return function(a){return d.apply(this,arguments)}}(),"readwrite")});return function(a){return d.apply(this,arguments)}}()))},a[0]=d,a[1]=e):e=a[1];return e}function za(){var a=j(2),b=c("useCometDynamicEntryPointDialog")(c("MarketplaceCometReviewOffersDialog.entrypoint")),d;a[0]!==b?(d=function(a){return b({listingId:a},{})},a[0]=b,a[1]=d):d=a[1];return d}function Aa(){var a=j(2),b=c("useCometDynamicEntryPointDialog")(c("CometMarketplaceCreateDiscountedPriceDialog.entrypoint")),d;a[0]!==b?(d=function(a){return b({threadId:a},{})},a[0]=b,a[1]=d):d=a[1];return d}function Ba(){var a=j(3),b;a[0]===Symbol["for"]("react.memo_cache_sentinel")?(b=c("JSResourceForInteraction")("MWInformationalDialog.react").__setRef("MWChatXmaThirdPartyActionHandler"),a[0]=b):b=a[0];b=c("useMWXLazyDialog")(b);var d=b[0];a[1]!==d?(b=function(){return d({body:h._("__JHASH__jTsNVv7n_rW__JHASH__"),title:h._("__JHASH__g-wowo_Mm7M__JHASH__")})},a[1]=d,a[2]=b):b=a[2];return b}function Ca(){var a=j(3),b=d("AdsMessengerContext.react").useAdsMessengerContext(),c=b.isMessengerInAds,e=b.showAdsAISurveyModal;a[0]!==c||a[1]!==e?(b=function(a){c&&e!=null&&e({surveySessionID:a.survey_session_id})},a[0]=c,a[1]=e,a[2]=b):b=a[2];return b}function Da(){var a=j(3),b=d("AdsMessengerContext.react").useAdsMessengerContext(),c=b.isMessengerInAds,e=b.showAdsAILowProbabilityEntitySelectionModal;a[0]!==c||a[1]!==e?(b=function(a){if(c&&e!=null){var b;e({adAccountID:a.adAccountID,allowDraftSelection:(b=a.allowDraftSelection)!=null?b:!1,threadKey:a.threadKey})}},a[0]=c,a[1]=e,a[2]=b):b=a[2];return b}function Ea(){var a=j(3),b=d("MWLSPostbackCtaHandler").usePostbackCtaHandler(),e=Fa(),f;a[0]!==e||a[1]!==b?(f=function(a){a.dialog!=null&&e(a.dialog),a.platformToken!=null&&a.platformToken.length>0&&b(a.platformToken,a.message),a.url!=null&&a.url.length>0&&c("goUriOnNewWindow")(a.url)},a[0]=e,a[1]=b,a[2]=f):f=a[2];return f}function Fa(){var a=j(3),b=d("AdsMessengerContext.react").useAdsMessengerContext(),c=b.isMessengerInAds,e=b.showAdsAISMAGModal;a[0]!==c||a[1]!==e?(b=function(a){c&&e!=null&&typeof a.use_case_params==="object"&&a.use_case_params!=null&&typeof a.use_case==="string"&&e({use_case:a.use_case,use_case_params:a.use_case_params})},a[0]=c,a[1]=e,a[2]=b):b=a[2];return b}function a(a,b){var e=j(51),f=l(),g=ba(),h=ca(),i=da(),k=ha(),n=ga(),o=ua(),p=ia(),q=ma(),r=na(),s=ka(),t=la(),u=oa(),v=ta(),w=pa(),x=qa(),y=ra(),z=c("useMWP2PPaymentRequestCancelDialog")(),A=c("useP2PPaymentRequestConfirmDialog")(),B=c("useP2PPaymentRequestDeclineDialog")(),C=c("useMWP2PPaymentTransactionDeclineDialog")(),D=c("useP2PPaymentMethodAddDialog")(),E=d("MWP2PPaymentTransactionInformationVerify").useP2PPaymentTransactionInformationVerify(),F=sa(b),G=c("useMakeRoomRingback")(),H=xa(),I=m(),J=aa(),K=fa(),L=c("useMWLSShowMemberRequest")(),M=c("useMWLSShowPendingPost")(),N=c("useMWLSShowECPCheckout")(),O=c("useMWLSShowPaymentDetails")(),P=c("useMWLSShowOrderDetails")(),Q=ya(),R=c("useMWLSShowAttachBankSlip")(),S=c("useMWLSShowOffsiteBankTransfer")(),T=ea(),U=c("useMWLSMarketplaceXmaCtaHandler")(),V=za(),W=Aa(),X=c("useMWChatShowPIIForm")(),Y=ja(),Z=Ba(),$=c("useServicesConfirmAppointmentBookingMutation")(),Ga=Ca(),Ha=Da(),Ia=Ea(),Ja=Fa();e[0]!==E||e[1]!==C||e[2]!==G||e[3]!==N||e[4]!==k||e[5]!==g||e[6]!==h||e[7]!==P||e[8]!==R||e[9]!==i||e[10]!==I||e[11]!==J||e[12]!==K||e[13]!==z||e[14]!==a||e[15]!==x||e[16]!==o||e[17]!==X||e[18]!==S||e[19]!==D||e[20]!==u||e[21]!==Q||e[22]!==r||e[23]!==O||e[24]!==B||e[25]!==s||e[26]!==t||e[27]!==f||e[28]!==n||e[29]!==y||e[30]!==w||e[31]!==H||e[32]!==T||e[33]!==M||e[34]!==A||e[35]!==F||e[36]!==U||e[37]!==p||e[38]!==q||e[39]!==L||e[40]!==v||e[41]!==Y||e[42]!==Z||e[43]!==$||e[44]!==W||e[45]!==V||e[46]!==Ga||e[47]!==Ha||e[48]!==Ia||e[49]!==Ja?(b=function(b){if(b.NAME==="P2PPaymentTransactionInformationVerify")return E(b.VAL);if(b.NAME==="P2PPaymentTransactionDecline")return C(b.VAL.id);if(b.NAME==="MakeWorkJoinableCallInvite"||b.NAME==="MakeRoomRingback")return G(b.VAL);if(b.NAME==="P2MCheckout"){var d=b.VAL;return N("P2M_Regular",d.orderID,d.pageID)}if(b.NAME==="ShowCustomerFeedback")return k(b.VAL);if(b.NAME==="P2MInformationalMessageBottomSheet"){d=(d=b.VAL.contentType)==null?void 0:d.content_type;if(d==="payment_detection_merchant_slip_validation")return g(b.VAL);else if(d==="payment_detection_merchant_bank_account_verified_details")return h(b.VAL);else if(d==="order_details")return P(b.VAL.orderID);else if(d==="unified_checkout")return R(b.VAL.orderID);else if(d==="payment_detection_confirmation_details")return i(b.VAL);return I(b.VAL)}if(b.NAME==="P2MAsyncControllerDialog")return J(b.VAL);if(b.NAME==="WorkplaceChatBotSubmitFeedback")return K(b.VAL);if(b.NAME==="P2PPaymentRequestCancel")return z(b.VAL.id);if(b.NAME==="SendImagePostback"){d=b.VAL;var e=d.loggingDetails;e!=null&&c("CtmMultiPhotoCarouselMsgrMultiPhotoCarouselClickFalcoEvent").log(function(){return{consumer_id:e.consumer_id,event_data:{ad_id:e.ad_id,cta:"button",index:String(e.index)},event_location:"unknown",page_id:e.page_id}});return a(d.message,d.platformToken,d.image)}if(b.NAME==="ShowMessengerExtensions")return x(b.VAL);if(b.NAME==="OpenAccountLink")return o(b.VAL);if(b.NAME==="ShowPIIForm")return X(b.VAL);if(b.NAME==="P2MOffsiteBankTransferCTA")return S(b.VAL.orderID);if(b.NAME==="P2PPaymentTransactionReceiveMoney")return D(b.VAL.id);if(b.NAME==="ShowBoardingPass")return u(b.VAL);if(b.NAME==="P2MOrderDetails")return P(b.VAL.orderID);if(b.NAME==="P2MMarkAsPaid"||b.NAME==="P2MMarkAsShipped"||b.NAME==="P2MMarkAsReceived")return Q(b.VAL.ctaId,b.VAL.ctaType,b.VAL.orderID);if(b.NAME==="P2MMarkAsX"){d=wa(b.VAL.ctaType);if(d!=null)return Q(b.VAL.ctaId,d,b.VAL.orderID)}if(b.NAME==="ShowStaticLocationDetails")return r(b.VAL);if(b.NAME==="P2PPaymentTransactionDetails")return O(b.VAL.id);if(b.NAME==="P2PPaymentRequestDecline")return B(b.VAL.id);if(b.NAME==="ShowBookingDetails")return s(b.VAL);if(b.NAME==="ViewFormDetails")return t(b.VAL);if(b.NAME==="ShowOrderConfirmation")return f(b.VAL);if(b.NAME==="ShowCustomerFeedbackForm")return n(b.VAL);if(b.NAME==="ShowMessengerRichWidgetExtension")return y(b.VAL);if(b.NAME==="ShowItinerary")return w(b.VAL);if(b.NAME==="OpenAccountLinkUrl")return va(b.VAL);if(b.NAME==="MakeJoinRoomFromPortal")return H(b.VAL);if(b.NAME==="P2MAttachBankSlip")return R(b.VAL.orderID);if(b.NAME==="BuyerShippingAddress")return T(b.VAL);if(b.NAME==="AdmodChatsShowPendingPost"){d=b.VAL;return M(d.targetId,d.groupId,d.authorId,d.postId,d.activityLogItemId)}if(b.NAME==="P2PPaymentRequestConfirm")return A(b.VAL.id);if(b.NAME==="MakeRtcCall")return F(b.VAL);if(b.NAME==="ProcessMarketplaceCallFunction"){d=b.VAL;var j=d.actionType,l=d.attachmentFbid,m=d.messageId;d=d.targetId;return U(m,l,d,j)}if(b.NAME==="ShowPIIFormForFormBuilder")return p(b.VAL);if(b.NAME==="ShowLiveLocationDetails")return q(b.VAL);if(b.NAME==="AdmodChatsShowMemberRequest"){m=b.VAL;return L(m.targetId,m.groupId,m.profileId,m.activityLogItemId)}if(b.NAME==="ShowGuestChatHistory")return v(b.VAL);if(b.NAME==="ShowInThreadFormDetails")return Y();if(b.NAME==="ShowPhoneVerificationDialog")return Z();if(b.NAME==="ConfirmAppointmentBooking")return $(b.VAL.requestID);if(b.NAME==="OpenMarketplaceDialog"){l=b.VAL;d=l.ctaType;j=l.listingId;m=l.threadId;switch(d){case"SHIPPED_DECLINED_OFFER_SEND_ANOTHER_PRICE":case"SHIPPED_EXPIRED_OFFER_SEND_ANOTHER_PRICE":if(m!=null)return W(m);else return;case"SHIPPED_OFFER_CANCEL":if(j!=null)return V(j);else return;default:return}}if(b.NAME==="ShowAdsAISurveyModal")return Ga(b.VAL);if(b.NAME==="ShowAdsAILowProbabilityEntitySelectionModal")return Ha(b.VAL);if(b.NAME==="HandleSMAGPostback")return Ia(b.VAL);if(b.NAME==="HandleSMAGDialog")return Ja(b.VAL)},e[0]=E,e[1]=C,e[2]=G,e[3]=N,e[4]=k,e[5]=g,e[6]=h,e[7]=P,e[8]=R,e[9]=i,e[10]=I,e[11]=J,e[12]=K,e[13]=z,e[14]=a,e[15]=x,e[16]=o,e[17]=X,e[18]=S,e[19]=D,e[20]=u,e[21]=Q,e[22]=r,e[23]=O,e[24]=B,e[25]=s,e[26]=t,e[27]=f,e[28]=n,e[29]=y,e[30]=w,e[31]=H,e[32]=T,e[33]=M,e[34]=A,e[35]=F,e[36]=U,e[37]=p,e[38]=q,e[39]=L,e[40]=v,e[41]=Y,e[42]=Z,e[43]=$,e[44]=W,e[45]=V,e[46]=Ga,e[47]=Ha,e[48]=Ia,e[49]=Ja,e[50]=b):b=e[50];return b}f=a;g.useHandler=f}),226);
__d("MWStatusText.react",["MWXText.react","react","react-strict-dom"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||(h=d("react"))).c,j=h,k={alignLeft:{paddingStart:"xtt4iyq",$$css:!0},alignRight:{paddingEnd:"x1sxyh0",$$css:!0},color:{color:"x1xf6ywa",$$css:!0},mask:{backgroundColor:"x1eb86dx",$$css:!0}};function a(a){var b=i(12),e=a.alignLeft,f=a.error,g=a.text;a=a.xstyle;e=e===void 0?!1:e;var h=e?k.alignLeft:k.alignRight,l;b[0]!==h||b[1]!==a?(l=[h,k.mask,a],b[0]=h,b[1]=a,b[2]=l):l=b[2];h=e===!0?"start":"end";a=f===!0?"negative":"secondary";b[3]!==g?(e=j.jsx(d("react-strict-dom").html.span,{style:k.color,children:g}),b[3]=g,b[4]=e):e=b[4];b[5]!==h||b[6]!==a||b[7]!==e?(f=j.jsx(c("MWXText.react"),{align:h,color:a,testid:void 0,type:"meta4",children:e}),b[5]=h,b[6]=a,b[7]=e,b[8]=f):f=b[8];b[9]!==l||b[10]!==f?(g=j.jsx(d("react-strict-dom").html.span,{role:"none",style:l,children:f}),b[9]=l,b[10]=f,b[11]=g):g=b[11];return g}g["default"]=a}),98);
__d("MWClickToRevealMustacheText.react",["fbt","MWBlockingProtectionContext.react","MWStatusText.react","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=(i||(i=d("react"))).c,k=i,l={statusText:{paddingBottom:"xwib8y2",$$css:!0}};function a(a){var b=j(6),d=a.messageId;a=a.xsyle;var e=c("MWBlockingProtectionContext.react").useHook();e=e.findMessageId;var f;b[0]!==e||b[1]!==d?(f=e(d),b[0]=e,b[1]=d,b[2]=f):f=b[2];e=f;b[3]!==e||b[4]!==a?(d=e?null:k.jsx(c("MWStatusText.react"),{alignLeft:!0,text:h._("__JHASH__vzmOniQEuzD__JHASH__").toString(),xstyle:[a,l.statusText]}),b[3]=e,b[4]=a,b[5]=d):d=b[5];return d}g["default"]=a}),226);
__d("MWClickedMessageContext.react",["GroupsCometChatsEngagementLogger","I64","LSFactory","LSFetchMessageSeenCountStoredProcedure","emptyFunction","react","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=j||(j=d("react"));e=j;var l=e.createContext;e.useCallback;var m=e.useContext;e.useMemo;var n=e.useState,o=e.c,p=l({clickedMessageId:null,fetchMessageSeenCount:c("emptyFunction"),hasError:!1,isLoading:!1,setClickedMessageId:c("emptyFunction")});function a(a){var b=o(10);a=a.children;var e=n(null),g=e[0],j=e[1];e=n(!1);var l=e[0],m=e[1];e=n(!1);var q=e[0],r=e[1],s=(h||(h=c("useReStore")))();b[0]!==s?(e=function(a,b,e){r(!0),j(b),s.runInTransaction(function(d){return c("LSFetchMessageSeenCountStoredProcedure")(c("LSFactory")(d),{messageId:b,threadKey:a})},"readwrite",void 0,void 0,f.id+":53").then(function(){r(!1),m(!1),d("GroupsCometChatsEngagementLogger").log({action:"impression",client_extras:{mid:b},community_id:e?(i||(i=d("I64"))).to_string(e.folderId):null,event:"seen_count_rendered",group_id:e?(i||(i=d("I64"))).to_string(e.fbGroupId):null,source:"message_bubble",surface:"thread_view",thread_id:(i||(i=d("I64"))).to_string(a)})})["catch"](function(){r(!1),m(!0)})},b[0]=s,b[1]=e):e=b[1];e=e;var t;b[2]!==g||b[3]!==e||b[4]!==l||b[5]!==q?(t={clickedMessageId:g,fetchMessageSeenCount:e,hasError:l,isLoading:q,setClickedMessageId:j},b[2]=g,b[3]=e,b[4]=l,b[5]=q,b[6]=t):t=b[6];g=t;e=g;b[7]!==e||b[8]!==a?(l=k.jsx(p.Provider,{value:e,children:a}),b[7]=e,b[8]=a,b[9]=l):l=b[9];return l}function b(){return m(p)}e={Provider:a,useHook:b};g["default"]=e}),98);
__d("MWCombineThemeConfigs",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){return{dark:Object.assign(a.dark,b.dark),light:Object.assign(a.light,b.light),type:b.type}}f.combine=a}),66);
__d("MWEditedEyebrowLabel.react",["fbt","BaseMiddot.react","MessengerWebUXLogger","react","react-strict-dom"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=(i||(i=d("react"))).c,k=i;function a(a){var b=j(9);a=a.separatorStyle;var e;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(e={eventName:"edit_eyebrow_impression"},b[0]=e):e=b[0];e=c("MessengerWebUXLogger").useImpressionLoggerRef(e);var f;b[1]===Symbol["for"]("react.memo_cache_sentinel")?(f=h._("__JHASH__Mh0-kan22Pe__JHASH__"),b[1]=f):f=b[1];f=f;var g;b[2]!==a?(g=a!=null&&k.jsx(d("react-strict-dom").html.span,{style:a,children:k.jsx(c("BaseMiddot.react"),{})}),b[2]=a,b[3]=g):g=b[3];b[4]!==e?(a=k.jsx(d("react-strict-dom").html.span,{"aria-label":f,"data-testid":void 0,ref:e,children:f}),b[4]=e,b[5]=a):a=b[5];b[6]!==g||b[7]!==a?(f=k.jsxs(k.Fragment,{children:[g,a]}),b[6]=g,b[7]=a,b[8]=f):f=b[8];return f}g["default"]=a}),226);
__d("MWMessageEditContext.react",["react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));c=h;var j=c.useContext;c.useMemo;var k=c.useState,l=c.c,m={setShowEdits:function(){},showEdits:!1},n=i.createContext();function a(a){var b=l(5),c=a.children;a=a.value;a=a===void 0?m:a;a=k((a=a==null?void 0:a.showEdits)!=null?a:!1);var d=a[0];a=a[1];b[0]!==d?(a={setShowEdits:a,showEdits:d},b[0]=d,b[1]=a):a=b[1];d=a;a=d;b[2]!==a||b[3]!==c?(d=i.jsx(n.Provider,{value:a,children:c}),b[2]=a,b[3]=c,b[4]=d):d=b[4];return d}function b(){return j(n)}g.MWMessageEditContextProvider=a;g.useMWMessageEditContext=b}),98);
__d("MWEditedEyebrow.react",["fbt","BaseMiddot.react","IGDWebUtils","MWEditedEyebrowLabel.react","MWMessageEditContext.react","MWXLink.react","MWXTooltip.react","MessengerWebUXLogger","QPLUserFlow","qpl","react","react-strict-dom"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=(i||(i=d("react"))).c,k=i;function l(a){var b=j(29),e=a.hasPadding;a=a.separatorStyle;var f=c("MessengerWebUXLogger").useInteractionLogger(),g=d("MWMessageEditContext.react").useMWMessageEditContext()||{setShowEdits:m,showEdits:!1},i=g.setShowEdits,l=g.showEdits;b[0]!==l||b[1]!==f||b[2]!==i?(g=function(){l||(c("QPLUserFlow").start(c("qpl")._(1056849214,"1777")),f==null?void 0:f({eventName:"edit_message_history"})),i(!l)},b[0]=l,b[1]=f,b[2]=i,b[3]=g):g=b[3];g=g;var n;b[4]===Symbol["for"]("react.memo_cache_sentinel")?(n={eventName:"edit_eyebrow_impression"},b[4]=n):n=b[4];n=c("MessengerWebUXLogger").useImpressionLoggerRef(n);var o;b[5]!==l?(o=l?h._("__JHASH__WqoEC9S0Sry__JHASH__"):h._("__JHASH__3fxL6sM27ni__JHASH__"),b[5]=l,b[6]=o):o=b[6];o=o;var p;b[7]!==l?(p=l?h._("__JHASH__WqoEC9S0Sry__JHASH__"):h._("__JHASH__0I22sJ_f1hm__JHASH__"),b[7]=l,b[8]=p):p=b[8];p=p;var q;b[9]!==a?(q=a!=null&&k.jsx(d("react-strict-dom").html.span,{style:a,children:k.jsx(c("BaseMiddot.react"),{})}),b[9]=a,b[10]=q):q=b[10];b[11]!==e?(a=e===!0&&{paddingTop:6},b[11]=e,b[12]=a):a=b[12];b[13]!==a?(e=babelHelpers["extends"]({color:"var(--mwp-primary-theme-color)"},a),b[13]=a,b[14]=e):e=b[14];b[15]!==o?(a=k.jsx(d("react-strict-dom").html.span,{"data-testid":void 0,children:o}),b[15]=o,b[16]=a):a=b[16];var r;b[17]!==o||b[18]!==g||b[19]!==n||b[20]!==e||b[21]!==a?(r=k.jsx(c("MWXLink.react"),{"aria-label":o,color_DEPRECATED:d("IGDWebUtils").isOnInstagramWeb()?"highlight":"blueLink",onClick:g,ref:n,style:e,weight_DEPRECATED:"medium",children:a}),b[17]=o,b[18]=g,b[19]=n,b[20]=e,b[21]=a,b[22]=r):r=b[22];b[23]!==p||b[24]!==r?(o=k.jsx(c("MWXTooltip.react"),{align:"middle",forceInlineDisplay:!0,label:p,position:"above",tooltip:p,children:r}),b[23]=p,b[24]=r,b[25]=o):o=b[25];b[26]!==q||b[27]!==o?(g=k.jsxs(k.Fragment,{children:[q,o]}),b[26]=q,b[27]=o,b[28]=g):g=b[28];return g}function m(a){}function a(a){var b=j(4),d=a.enableEditHistory,e=a.hasPadding;a=a.separatorStyle;d=d===void 0?!0:d;var f;b[0]!==d||b[1]!==e||b[2]!==a?(f=d?k.jsx(l,{hasPadding:e,separatorStyle:a}):k.jsx(c("MWEditedEyebrowLabel.react"),{separatorStyle:a}),b[0]=d,b[1]=e,b[2]=a,b[3]=f):f=b[3];return f}g.MWEditedEyebrowWithHistory=l;g.MWEditedEyebrow=a}),226);
__d("MWFIlePressableDirectDownload.react",["MWXPressable.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||(h=d("react"))).c,j=h;function a(a){var b=i(7),d=a.children,e=a.onPress,f=a.url;a=a.xstyle;var g;b[0]!==f?(g=f!=null?{download:!0,target:"_blank",url:f}:void 0,b[0]=f,b[1]=g):g=b[1];b[2]!==d||b[3]!==g||b[4]!==e||b[5]!==a?(f=j.jsx(c("MWXPressable.react"),{children:d,display:"inline",linkProps:g,onPress:e,overlayDisabled:!0,xstyle:a}),b[2]=d,b[3]=g,b[4]=e,b[5]=a,b[6]=f):f=b[6];return f}g.MWFilePressableDirectDownload=a}),98);
__d("MessengerFilePreviewGenerationFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("606");b=d("FalcoLoggerInternal").create("messenger_file_preview_generation",a);e=b;g["default"]=e}),98);
__d("MWFileViewerLogger",["I64","LSIntEnum","MessengerFilePreviewGenerationFalcoEvent","gkx"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function b(){var b=function(){return Array.from((a.crypto||a.msCrypto).getRandomValues(new Uint32Array(2)))};return(h||(h=d("I64"))).to_string(b())}var j=c("gkx")("24035");function k(a,b){if(j){var e=b.attachment;return c("MessengerFilePreviewGenerationFalcoEvent").log(function(){return{attachment_id:b.attachmentID,entry_point:b.entryPoint,event:a,filesize:e!=null&&e.filesize!=null?(h||(h=d("I64"))).to_string(e.filesize):void 0,filetype:e==null?void 0:e.playableUrlMimeType,message_id:b.messageID.messageId,session_id:b.sessionId,thread_id:(h||(h=d("I64"))).to_string(b.thread.threadKey),thread_type:(i||(i=d("LSIntEnum"))).unwrapIntEnum(b.thread.threadType)}})}}function e(a){return k("file_viewer_direct_download",a)}g.generateSessionId=b;g.logFileViewerDirectDownload=e}),98);
__d("useMWFileOnPress",["MWFileViewerLogger","ReQL","asyncToGeneratorRuntime","promiseDone","react","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i;e=i||d("react");e.useCallback;var j=e.c;function a(a,e,f,g,i){var k=j(8),l=(h||(h=c("useReStore")))(),m;k[0]!==f||k[1]!==l.tables.threads||k[2]!==l.tables.attachments||k[3]!==a||k[4]!==e||k[5]!==g||k[6]!==i?(m=function(h){f==null?void 0:f(h),c("promiseDone")(b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var b,c=(yield (b=d("ReQL")).firstAsync(b.fromTableAscending(l.tables.threads).getKeyRange(a.threadId)));b=(yield b.firstAsync(b.fromTableAscending(l.tables.attachments).getKeyRange(a.threadId,a.messageId)));if(c){b={attachment:b,attachmentID:e,entryPoint:g,messageID:a,sessionId:i,thread:c};d("MWFileViewerLogger").logFileViewerDirectDownload(b)}})())},k[0]=f,k[1]=l.tables.threads,k[2]=l.tables.attachments,k[3]=a,k[4]=e,k[5]=g,k[6]=i,k[7]=m):m=k[7];return m}g["default"]=a}),98);
__d("MWFilePressable.react",["CometErrorBoundary.react","ConstUriUtils","FBLogger","MWFIlePressableDirectDownload.react","MWFileViewerLogger","goUriOnNewWindow","react","useMWFileOnPress"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;var j=b.useEffect,k=b.c;function a(a){var b=k(17),c=a.attachmentID,e=a.children,f=a.entryPoint,g=a.mediaRenderQpl,h=a.messageID,m=a.onPress,n=a.url;a=a.xstyle;var o,p;b[0]!==n||b[1]!==g?(o=function(){n!=null&&n.length>0?g==null?void 0:g.endSuccess():g==null?void 0:g.endFail("load-file-error")},p=[g,n],b[0]=n,b[1]=g,b[2]=o,b[3]=p):(o=b[2],p=b[3]);j(o,p);if(h!=null&&h.type==="sent"&&c!=null&&n!=null){b[4]!==c||b[5]!==e||b[6]!==f||b[7]!==m||b[8]!==h.value||b[9]!==n||b[10]!==a?(o=i.jsx(l,{attachmentID:c,children:e,entryPoint:f,onPress:m,sentMessage:h.value,url:n,xstyle:a}),b[4]=c,b[5]=e,b[6]=f,b[7]=m,b[8]=h.value,b[9]=n,b[10]=a,b[11]=o):o=b[11];return o}b[12]!==e||b[13]!==m||b[14]!==n||b[15]!==a?(p=i.jsx(d("MWFIlePressableDirectDownload.react").MWFilePressableDirectDownload,{children:e,onPress:m,url:n,xstyle:a}),b[12]=e,b[13]=m,b[14]=n,b[15]=a,b[16]=p):p=b[16];return p}function l(a){var b=k(11),e=a.attachmentID,f=a.sentMessage,g=a.url,h=a.children,j=a.entryPoint,l=a.onPress;a=a.xstyle;var n;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(n=d("MWFileViewerLogger").generateSessionId(),b[0]=n):n=b[0];n=n;f=c("useMWFileOnPress")(f,e,l,j,n);b[1]!==g?(e=function(a){a=a?a.message:"Cannot open file viewer";c("FBLogger")("messenger_web_media","cannot_load_entry_point").mustfix(a);a=d("ConstUriUtils").getUri(g);a!=null&&c("goUriOnNewWindow")(a)},b[1]=g,b[2]=e):e=b[2];b[3]!==h||b[4]!==f||b[5]!==g||b[6]!==a?(l=i.jsx(d("MWFIlePressableDirectDownload.react").MWFilePressableDirectDownload,{children:h,onPress:f,url:g,xstyle:a}),b[3]=h,b[4]=f,b[5]=g,b[6]=a,b[7]=l):l=b[7];b[8]!==e||b[9]!==l?(j=i.jsx(c("CometErrorBoundary.react"),{fallback:m,onError:e,children:l}),b[8]=e,b[9]=l,b[10]=j):j=b[10];return j}function m(){return null}g["default"]=a}),98);
__d("MWXIconEyeCross",["MWXSvgIcon","SVGIcon","cr:12408","gkx"],(function(a,b,c,d,e,f,g){"use strict";a=d("MWXSvgIcon").mwxSvgIcon(d("SVGIcon").svgIcon(b("cr:12408")),c("gkx")("23219"));g["default"]=a}),98);
__d("MessengerWellbeingInformTreatmentFalcoEventLogger",["$InternalEnum","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h=c("requireDeferred")("MwbCmInformTreatmentEventFalcoEvent").__setRef("MessengerWellbeingInformTreatmentFalcoEventLogger"),i=c("requireDeferred")("MwbInformTreatmentShownImpressionFalcoEvent").__setRef("MessengerWellbeingInformTreatmentFalcoEventLogger");e=b("$InternalEnum")({AI_GENERATED_CONTENT:"ai_generated_content",MISINFORMATION:"misinformation"});function a(a){var b=babelHelpers["extends"]({},a);h.onReady(function(a){return a.log(function(){return babelHelpers["extends"]({},b)})})}function d(a){var b=babelHelpers["extends"]({},a);i.onReady(function(a){return a.log(function(){return babelHelpers["extends"]({},b)})})}g.MWInformTreatmentEventName=e;g.logForCM=a;g.logForPrivateChats=d}),98);
__d("useMWInformTreatmentFalcoEventLogger",["I64","Int64Hooks","LSIntEnum","LSMessagingThreadTypeUtil","MWLSThread","MessengerWellbeingInformTreatmentFalcoEventLogger","ReQL","ReQLSuspense","react","useCommunityFolder","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l=(k||d("react")).c;function a(a){var b=l(30),e=a.message,g=(h||(h=c("useReStore")))(),k=d("MWLSThread").useThreadExn(e.threadKey);a=c("useCommunityFolder")(k);var m=(a=a==null?void 0:a.fbGroupId)!=null?a:(i||(i=d("I64"))).zero;b[0]!==k.threadType?(a=d("LSMessagingThreadTypeUtil").isPublicCMThread(k.threadType),b[0]=k.threadType,b[1]=a):a=b[1];var n=a;b[2]!==k?(a=d("LSMessagingThreadTypeUtil").isOpenFnFThread(k),b[2]=k,b[3]=a):a=b[3];var o=a,p=!(i||(i=d("I64"))).equal(e.displayedContentTypes,(j||(j=d("LSIntEnum"))).ofNumber(1)),q;b[4]!==p||b[5]!==g.tables.attachments||b[6]!==e.threadKey||b[7]!==e.messageId?(a=function(){return p?d("ReQL").fromTableAscending(g.tables.attachments).getKeyRange(e.threadKey,e.messageId):d("ReQL").empty()},q=[p,g.tables.attachments,e.threadKey,e.messageId],b[4]=p,b[5]=g.tables.attachments,b[6]=e.threadKey,b[7]=e.messageId,b[8]=a,b[9]=q):(a=b[8],q=b[9]);var r=d("ReQLSuspense").useFirst(a,q,f.id+":63");b[10]!==n||b[11]!==r||b[12]!==m||b[13]!==e.isForwarded||b[14]!==e.messageId||b[15]!==e.threadKey||b[16]!==k.threadSubtype||b[17]!==k.threadType||b[18]!==o?(a=function(a,b){if(n)d("MessengerWellbeingInformTreatmentFalcoEventLogger").logForCM({attachment_id:r==null?void 0:r.attachmentFbid,event_name:a,group_id:(i||(i=d("I64"))).to_string(m),inform_treatment:b!=null?{name:b.name,type:b.type}:void 0,is_forward:e.isForwarded,message_id:e.messageId,thread_id:i.to_string(e.threadKey),thread_subtype:k.threadSubtype!=null?(j||(j=d("LSIntEnum"))).unwrapIntEnum(k.threadSubtype):void 0});else if(o&&a==="impression"){d("MessengerWellbeingInformTreatmentFalcoEventLogger").logForPrivateChats({inform_treatment_name:b!=null?b==null?void 0:b.name:void 0,inform_treatment_type:(a=b==null?void 0:b.type)!=null?a:void 0,thread_type:(j||(j=d("LSIntEnum"))).unwrapIntEnum(k.threadType)})}},b[10]=n,b[11]=r,b[12]=m,b[13]=e.isForwarded,b[14]=e.messageId,b[15]=e.threadKey,b[16]=k.threadSubtype,b[17]=k.threadType,b[18]=o,b[19]=a):a=b[19];q=r==null?void 0:r.attachmentFbid;var s;b[20]!==q||b[21]!==m||b[22]!==o||b[23]!==n||b[24]!==e.isForwarded||b[25]!==e.messageId||b[26]!==e.threadKey||b[27]!==k.threadSubtype||b[28]!==k.threadType?(s=[q,m,o,n,e.isForwarded,e.messageId,e.threadKey,k.threadSubtype,k.threadType],b[20]=q,b[21]=m,b[22]=o,b[23]=n,b[24]=e.isForwarded,b[25]=e.messageId,b[26]=e.threadKey,b[27]=k.threadSubtype,b[28]=k.threadType,b[29]=s):s=b[29];return d("Int64Hooks").useCallbackInt64(a,s)}g["default"]=a}),98);
__d("MWInformedTreatment.react",["fbt","CometBlurredBackgroundImage.react","LSMessagingThreadTypeUtil","MWXColumn.react","MWXColumnItem.react","MWXIconEyeCross","MWXIconInfoCircle","MWXIconStrict.react","MWXImage.react","MWXText.react","MessengerWebUXLogger","ReQL","ReQLSuspense","gkx","justknobx","qex","react","useMWInformTreatmentFalcoEventLogger","useMergeRefs","useReStore","useSinglePartialViewImpression"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=(j||(j=d("react"))).c,l=j,m={overlay:{paddingTop:"xexx8yu",paddingEnd:"x1iji9kk",paddingBottom:"x18d9i69",paddingStart:"x1sln4lm",width:"xh8yej3",$$css:!0},post:{flexGrow:"x1iyjqo2",height:"x5yr21d",objectFit:"xl1xv1r",width:"xh8yej3",$$css:!0}},n={AI_GENERATED_CONTENT:{icon:c("MWXIconInfoCircle"),text:h._("__JHASH__grx-CiLu-4Q__JHASH__")},ALTERED_MEDIA:{icon:c("MWXIconEyeCross"),text:h._("__JHASH__m5P-u-BSHgt__JHASH__")},ALTERED_PHOTO:{icon:c("MWXIconEyeCross"),text:h._("__JHASH__MMwXoLKk349__JHASH__")},CRUEL:{icon:c("MWXIconEyeCross"),text:h._("__JHASH__i1O1Uvt1vZ6__JHASH__")},FALSE_NEWS:{icon:c("MWXIconInfoCircle"),text:h._("__JHASH__MnSycojlY-Q__JHASH__")},MISLEADING_NEWS:{icon:c("MWXIconInfoCircle"),text:h._("__JHASH__CYwjewQWzi8__JHASH__")},MISSING_CONTEXT:{icon:c("MWXIconInfoCircle"),text:h._("__JHASH__RL7VH1G5kZU__JHASH__")},SENSITIVE:{icon:c("MWXIconEyeCross"),text:h._("__JHASH__sovQqayBAJd__JHASH__")},VIOLENCE:{icon:c("MWXIconEyeCross"),text:h._("__JHASH__sovQqayBAJd__JHASH__")}},o=h._("__JHASH__zDjOAdn9yE8__JHASH__");function a(a,b,e,f){if(f==null||a==null||b==null||e==null)return!1;b=a==="ai_generated_content";e=f!=null&&d("LSMessagingThreadTypeUtil").isArmadilloSecure(f);a=f!=null&&d("LSMessagingThreadTypeUtil").isPublicCMThread(f);if(b)return c("qex")._("1581")===!0;else return e||a&&c("gkx")("2872")&&c("justknobx")._("2910")}function p(a){switch(a){case"ai_generated_content":return"ai_generated_content";case"misinformation":return"misleading_news";case"misleading_news":return"missing_context";case"missing_context":return"altered_media";case"altered_media":return"altered_media";case"false_news":return"false_news";default:return null}}function b(a){var b=k(34),e=a.dimension,g=a.gatingTitle,h=a.gatingType,j=a.isXMA,s=a.mediaRenderQpl,t=a.messageId,u=a.previewUrl,v=a.xstyle,w=j===void 0?!1:j,x=u===void 0?"":u,y=(i||(i=c("useReStore")))();b[0]!==y.tables.messages||b[1]!==t?(a=function(){return d("ReQL").fromTableAscending(y.tables.messages.index("messageId")).getKeyRange(t)},b[0]=y.tables.messages,b[1]=t,b[2]=a):a=b[2];b[3]!==y||b[4]!==t?(j=[y,t],b[3]=y,b[4]=t,b[5]=j):j=b[5];u=d("ReQLSuspense").useFirstExn(a,j,f.id+":258");var z=c("gkx")("23219"),A=r;b[6]===Symbol["for"]("react.memo_cache_sentinel")?(a=function(a){var b;a=A(a);return a==null||((b=n[a])==null?void 0:b.icon)==null?c("MWXIconEyeCross"):n[a].icon},b[6]=a):a=b[6];var B=a;b[7]===Symbol["for"]("react.memo_cache_sentinel")?(j=function(a){var b;a=A(a);return a==null||((b=n[a])==null?void 0:b.text)==null?null:n[a].text},b[7]=j):j=b[7];var C=j;b[8]!==g||b[9]!==w?(a=function(a){switch(a){case"warning_screens":return l.jsx("div",{className:"xtzzx4i x10l6tqk xwa60dl x11lhmoz xh8yej3",children:l.jsxs(c("MWXColumn.react"),{spacing:12,verticalAlign:"center",children:[l.jsx(c("MWXColumnItem.react"),{align:"center",children:l.jsx(c("MWXIconStrict.react"),{color:"white",icon:B(g),size:32})}),l.jsx(c("MWXColumnItem.react"),{children:l.jsx(c("MWXText.react"),{align:"center",color:"white",numberOfLines:1,type:z?"bodyLink3":"bodyLink4",children:C(g)})}),w?l.jsx(c("MWXColumnItem.react"),{children:l.jsx(c("MWXText.react"),{align:"center",color:"white",type:z?"meta3":"meta4",children:o})}):null]})});case"media_label":case"post_label":return l.jsxs("div",{className:"x6s0dn4 x1gevrdp x1fk37vd xdy0ngz xqb0rpr x1tp0a3f x107yiy2 xv8uw2v x1tfwpuw x2g32xy x13fuv20 xu3j5b3 x1q0q8m5 x26u7qi x178xt8z xm81vs4 xso031l xy80clv xe80o0v x1ihrfj4 x78zum5 x10w6t97 x1k3u6ij xyqdw3p x1iji9kk xg8j3zb x16hj40l x10l6tqk xpse7mg x1tk7jg1 xuxw1ft x1vvkbs",children:[l.jsx(c("MWXIconStrict.react"),{color:"white",icon:B(g),size:24}),l.jsx(c("MWXText.react"),{align:"center",color:"white",type:z?"bodyLink3":"bodyLink4",children:C(g)})]});default:return null}},b[8]=g,b[9]=w,b[10]=a):a=b[10];j=a;var D=q;b[11]!==e||b[12]!==s||b[13]!==x||b[14]!==v?(a=function(a){switch(a){case"media_label":case"post_label":return l.jsx("div",{style:e,children:l.jsx(c("MWXImage.react"),{alt:"",onError:function(){return s==null?void 0:s.endFail("load-image-error")},onLoad:function(){return s==null?void 0:s.endSuccess()},src:x,xstyle:m.post})});case"warning_screens":default:return l.jsxs("div",{style:e,children:[l.jsx(c("CometBlurredBackgroundImage.react"),{alt:"",onError:function(){return s==null?void 0:s.endFail("load-image-error")},onLoad:function(){return s==null?void 0:s.endSuccess()},src:x,xstyle:[m.post,v,m.overlay]}),l.jsx("div",{className:"x18l40ae x1ey2m1c xtea3wc xds687c x17qophe x47corl x10l6tqk x13vifvy"})]})}},b[11]=e,b[12]=s,b[13]=x,b[14]=v,b[15]=a):a=b[15];a=a;var E;b[16]===Symbol["for"]("react.memo_cache_sentinel")?(E={eventName:"inform_treatment_chat_impression"},b[16]=E):E=b[16];E=c("MessengerWebUXLogger").useImpressionLoggerRef(E);var F;b[17]!==u?(F={message:u},b[17]=u,b[18]=F):F=b[18];var G=c("useMWInformTreatmentFalcoEventLogger")(F);b[19]!==g||b[20]!==h||b[21]!==G?(u={onImpressionStart:function(){var a=p(g),b=D(h.toLocaleLowerCase());a!=null&&b!=null&&G("impression",{name:a,type:b})}},b[19]=g,b[20]=h,b[21]=G,b[22]=u):u=b[22];F=c("useSinglePartialViewImpression")(u);u=c("useMergeRefs")(E,F);b[23]===Symbol["for"]("react.memo_cache_sentinel")?(E="x78zum5 x5yr21d x1n2onr6 xh8yej3",b[23]=E):E=b[23];b[24]!==h||b[25]!==a?(F=a(h.toLocaleLowerCase()),b[24]=h,b[25]=a,b[26]=F):F=b[26];b[27]!==h||b[28]!==j?(a=j(h.toLocaleLowerCase()),b[27]=h,b[28]=j,b[29]=a):a=b[29];b[30]!==u||b[31]!==F||b[32]!==a?(j=l.jsxs("div",{className:E,ref:u,children:[F,a]}),b[30]=u,b[31]=F,b[32]=a,b[33]=j):j=b[33];return j}function q(a){switch(a){case"warning_screens":case"media_label":case"post_label":return a;default:return null}}function r(a){var b=Object.keys(n).find(function(b){return b===a.toUpperCase()});return b}g.checkIsInformedTreatmentVisible=a;g.getEventTitle=p;g.MWInformedTreatment=b}),226);
__d("MercuryLocalIDs",["randomInt"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return"root:"+h(a)}function h(a){a=a!=null?a:Date.now();var b=c("randomInt")(0,4294967295);b=("0000000000000000000000"+b.toString(2)).slice(-22);a=a.toString(2)+b;return i(a.slice(-63))}function i(a){var b="";a=a;while(a!="0"){var c=0,d="";for(var e=0;e<a.length;e++)c=2*c+parseInt(a[e],10),c>=10?(d+="1",c-=10):d+="0";b=c.toString()+b;a=d.slice(d.indexOf("1"))}return b}g.generateThreadID=a;g.generateOfflineThreadingID=h}),98);
__d("MWLSImagePostbackCtaHandler",["ActorURI","I64","LSFactory","LSInsertNewMediaSendStoredProcedure","LSIntEnum","LSLocalApplyOptimisticMessageWithAttachmentsStoredProcedure","LSMailboxType","LSMarkSubJobCompletedV2StoredProcedure","LSMessageReplySourceType","LSMessageReplySourceTypeV2","LSOptimisticSendMessageV2StoredProcedure","LSResumeMediaSendJobStoredProcedure","LSShape","LSThreadAttributionTypeUtil","LSVec","MWPActor.react","MWThreadKey.react","MercuryConfig","MercuryLocalIDs","MessagePowerUp","MessagingAttachmentType","Promise","URI","cr:6057","promiseDone","react","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l,m,n=(k||d("react")).useMemo;function o(a,e,f,g,h,i,k){var n=d("MercuryLocalIDs").generateOfflineThreadingID();return c("LSLocalApplyOptimisticMessageWithAttachmentsStoredProcedure")(c("LSFactory")(a),{attachments:c("LSVec").ofArray([d("LSShape").ofRecord({action_url:void 0,attachment_fbid:n,attachment_index:(l||(l=d("I64"))).zero,attachment_type:(m||(m=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").IMAGE),cta1_title:void 0,cta2_title:void 0,cta3_title:void 0,description_text:void 0,filename:"postback image.jpg",filesize:void 0,has_media:!0,has_xma:!1,image_url:void 0,mini_preview:void 0,offline_attachment_id:n,original_file_hash:void 0,playable_duration_ms:void 0,playable_url:void 0,playable_url_mime_type:void 0,preview_height:void 0,preview_url:g,preview_url_mime_type:"image/jpeg ",preview_width:void 0,source_text:void 0,subtitle_text:void 0,title_text:void 0,xma_layout_type:void 0,xmas_template_type:void 0})]),replySourceType:m.ofNumber(c("LSMessageReplySourceType").NONE),replySourceTypeV2:m.ofNumber(c("LSMessageReplySourceTypeV2").NONE),senderId:e,snippetHasEmoji:!1,threadKey:f,threadType:m.ofNumber(1)}).then(function(c){var e=c[0];return a.messages_optimistic_context.add({externalAttachmentUrl:void 0,initiatingSource:void 0,markThreadRead:!0,messageId:void 0,offlineThreadingId:e,platformRef:void 0,platformToken:h,replySourceId:void 0,replySourceType:void 0,sendType:void 0,skipUrlPreviewGen:void 0,taskId:(l||(l=d("I64"))).of_string(e),threadAttributionSource:i,threadKey:f}).then(function(){return(j||(j=b("Promise"))).resolve([e,n])})})}function a(a,e){var g=(h||(h=c("useReStore")))(),k=d("MWPActor.react").useActor(),p=d("MWThreadKey.react").useMWThreadKeyMemoizedExn();return n(function(){return function(h,n,q){var r=(l||(l=d("I64"))).to_string(k),s=function(a){var e=a[1],h=a[0];c("promiseDone")(window.fetch(q).then(function(a){return a.blob()}).then(function(a){return b("cr:6057").load().then(function(b){return{XComposerPhotoUploader:b,blob:a}})}).then(function(a){var k=a.XComposerPhotoUploader;a=a.blob;k=new k({concurrentLimit:3,onUploadFailure:function(a,b){return!0},onUploadProgress:function(a,b){},onUploadStart:function(a){c("promiseDone")(g.runInTransaction(function(a){return c("LSInsertNewMediaSendStoredProcedure")(c("LSFactory")(a),{attachmentType:(m||(m=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").IMAGE),inMessageIndex:(l||(l=d("I64"))).zero,isSecure:!1,offlineAttachmentId:e,offlineThreadingId:h,sendByServer:!1,shouldTranscode:!1,useDoublePhase:!1})},"readwrite",void 0,void 0,f.id+":157"))},onUploadSuccess:function(a,b){a=b.response.payload.metadata[0];var i=a.image_id;if(i==null)return;c("promiseDone")(g.runInTransaction(function(a){return c("LSMarkSubJobCompletedV2StoredProcedure")(c("LSFactory")(a),{fbid:(l||(l=d("I64"))).of_string(i.toString()),offlineAttachmentId:e}).then(function(){return c("LSResumeMediaSendJobStoredProcedure")(c("LSFactory")(a),{jobId:h,pluginType:(l||(l=d("I64"))).zero})})},"readwrite",void 0,void 0,f.id+":182"))},retryLimit:1,uploadEndpoint:d("ActorURI").create(new(i||(i=c("URI")))(c("MercuryConfig").upload_url),r)});k.getAsyncUploadRequest([new File([a],"postback image.jpg",{type:"image/jpeg"})]).send();return(j||(j=b("Promise"))).resolve()}))},t=d("LSThreadAttributionTypeUtil").getSource(p,a);c("promiseDone")(g.runInTransaction(function(a){return c("LSOptimisticSendMessageV2StoredProcedure")(c("LSFactory")(a),{extraSendMessageParams:d("LSShape").ofRecord({calculate_denormalizations:!0,initiating_source:(a=e)!=null?a:void 0,mark_read:!0,power_up_style:(m||(m=d("LSIntEnum"))).ofNumber(c("MessagePowerUp").NONE),reply_source_type:m.ofNumber(c("LSMessageReplySourceType").NONE),reply_source_type_v2:m.ofNumber(c("LSMessageReplySourceTypeV2").NONE),snippet_has_emoji:!1,source:t}),mailboxType:m.ofNumber(c("LSMailboxType").MESSENGER),senderId:k,snippet:h,text:h,threadKey:p,threadType:m.ofNumber(1)})},"readwrite",void 0,void 0,f.id+":225").then(function(a){return g.runInTransaction(function(a){return o(a,k,p,q,n,t,e).then(function(a){s(a)})},"readwrite",void 0,void 0,f.id+":255")}))}},[g,k,p])}g.usePostbackCtaHandler=a}),98);
__d("MWLSWebUrlCtaHandler",["JSResourceForInteraction","react","useMWXLazyDialog"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");b.useCallback;var i=b.c;function a(){var a=i(3),b;a[0]===Symbol["for"]("react.memo_cache_sentinel")?(b=c("JSResourceForInteraction")("MWInboxUrlWebviewDialog.react").__setRef("MWLSWebUrlCtaHandler"),a[0]=b):b=a[0];b=c("useMWXLazyDialog")(b);var d=b[0];a[1]!==d?(b=function(a){return d({htmlBlob:a},function(){})},a[1]=d,a[2]=b):b=a[2];return b}g.useShowWebViewDialog=a}),98);
__d("MWMediaComposerRenderQpl",["LSGetAttachmentType","MAWLoggerUtils","MWMediaRenderQplUtils","QPLUserFlow","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react"),j=i.useEffect,k=i.useMemo,l=i.useRef;function a(a,b,e){var f;a=d("MAWLoggerUtils").getInstanceKeyFromId(a);b=d("LSGetAttachmentType").LSGetAttachmentTypeSyncButLessAccurate(b);c("QPLUserFlow").start((f=d("MWMediaRenderQplUtils")).event,{annotations:{string:{attachment_type:f.getAttachmentTypeStringFromEnum(b),content_type:f.deriveMessageContentTypeStringFromAttachmentTypeLessAccurate(b),entry_point:"composer_view",thread_type:f.getThreadTypeString(e)}},cancelOnUnload:!0,instanceKey:a,timeoutInMs:f.QPL_TIMEOUT})}function b(a,b){a=d("MAWLoggerUtils").getInstanceKeyFromId(a);c("QPLUserFlow").endCancel(d("MWMediaRenderQplUtils").event,{annotations:{string:{cancel_reason:b}},instanceKey:a})}function e(a,b){a=d("MAWLoggerUtils").getInstanceKeyFromId(a);c("QPLUserFlow").addPoint(d("MWMediaRenderQplUtils").event,b,{instanceKey:a})}function f(a){var b=d("MAWLoggerUtils").getInstanceKeyFromId(a.offlineAttachmentId),e=l(!1);c("QPLUserFlow").addAnnotations(d("MWMediaRenderQplUtils").event,{string:{attachment_type:d("MWMediaRenderQplUtils").getAttachmentTypeStringFromEnum(a.attachmentType),content_type:d("MWMediaRenderQplUtils").deriveMessageContentTypeStringFromAttachmentTypeLessAccurate(a.attachmentType)}},{instanceKey:b});var f=k(function(){return babelHelpers["extends"]({},d("MWMediaRenderQplUtils").createQplFlowCommon(d("MWMediaRenderQplUtils").event,b,e))},[]);j(function(){return function(){e.current===!1&&(f==null?void 0:f.getInstanceKey())!=null&&(f==null?void 0:f.endCancel(706))}},[f]);return f}g.startMediaComposerRenderQpl=a;g.endCancelMediaComposerRenderQpl=b;g.addPointMediaComposerRenderQpl=e;g.useMediaComposerRenderQpl=f}),98);
__d("MWSharedMediaManagerUtils",["I64","LSGetAttachmentType","LSIntEnum","LSMailboxType","MWPreloadableQueries","Promise","ReQLSuspense","asyncToGeneratorRuntime","react","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l,m=(l||d("react")).c;function n(a){return new(i||(i=b("Promise")))(function(b){var c=new Image();c.onload=function(){return b({previewHeight:c.height,previewWidth:c.width})};c.onerror=function(){return b()};c.src=a})}function o(a){return new(i||(i=b("Promise")))(function(b){var c=document.createElement("video");c.onloadedmetadata=function(){return b({previewHeight:c.videoHeight,previewWidth:c.videoWidth})};c.onerror=function(){return b()};c.src=a})}function p(a,b){if(b==null||a==null)return;var c=Math.floor(a.previewHeight*b.previewWidth/a.previewWidth);return c>=b.previewHeight?{previewHeight:(j||(j=d("I64"))).of_float(c),previewWidth:j.of_float(b.previewWidth)}:{previewHeight:(j||(j=d("I64"))).of_float(b.previewHeight),previewWidth:j.of_float(a.previewWidth*b.previewHeight/a.previewHeight)}}function a(a,b,c){return q.apply(this,arguments)}function q(){q=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,g){var h=(yield (i||(i=b("Promise"))).all(e.map(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.file,e=a.offlineAttachmentId,f=a.attachmentType!=null?(k||(k=d("LSIntEnum"))).ofNumber(a.attachmentType):yield d("LSGetAttachmentType").LSGetAttachmentType(b),h=URL.createObjectURL(b);a.previewHeight!=null&&a.previewWidth!=null?a={previewHeight:a.previewHeight,previewWidth:a.previewWidth}:b.type.includes("video/")?a=(yield o(h)):a=(yield n(h));return[{attachmentType:f,durationMs:void 0,fbid:void 0,filename:b.name,fileSize:(j||(j=d("I64"))).of_int32(b.size),hasError:!1,isSent:!1,mailboxType:(k||(k=d("LSIntEnum"))).ofNumber(c("LSMailboxType").MESSENGER),mimeType:b.type,offlineAttachmentId:e,offlineThreadingId:void 0,previewUrl:h,progress:0,threadKey:g},a]});return function(b){return a.apply(this,arguments)}}())));yield a.runInTransaction(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var c=(yield a.sync_groups.get((j||(j=d("I64"))).of_float(1))),e;if((c==null?void 0:c.syncParams)!=null){c=JSON.parse(c.syncParams);var f=c.preview_height;c=c.preview_width;e={previewHeight:f,previewWidth:c}}yield (i||(i=b("Promise"))).all(h.map(function(b){var c=b[0];b=b[1];return a.media_staging.add(babelHelpers["extends"]({},c,p(b,e)))}))});return function(b){return a.apply(this,arguments)}}(),"readwrite",void 0,void 0,f.id+":145")});return q.apply(this,arguments)}function e(a,b){return a.runInTransaction(function(a){return a.media_staging["delete"](b)},"readwrite",void 0,void 0,f.id+":171")}function r(a){var b=m(4),e=(h||(h=c("useReStore")))(),g,i;b[0]!==e||b[1]!==a.threadKey?(g=function(){return d("MWPreloadableQueries").getMediaStagingQuery(e,a.threadKey)},i=[e,a.threadKey],b[0]=e,b[1]=a.threadKey,b[2]=g,b[3]=i):(g=b[2],i=b[3]);return d("ReQLSuspense").useArray(g,i,f.id+":181")}function s(a){if(a.mimeType==="image/gif")return!0;else return a.mimeType==="image/webp"}g.insertMediaStaging=a;g.deleteMediaStaging=e;g.useMediaStaging=r;g.isVideoLikeImage=s}),98);
__d("WorkFailedSendMessageFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("6352");b=d("FalcoLoggerInternal").create("work_failed_send_message",a);e=b;g["default"]=e}),98);
__d("MWMediaManager",["FBLogger","I64","Int64Hooks","LSMessagingThreadTypeUtil","MWChatFilePreProcessingErrorDialog.react","MWChatFilePreProcessingErrorToast.react","MWChatFileUploadErrorDialog.react","MWMediaComposerRenderQpl","MWPActor.react","MWPBumpEntityKey","MWSharedMediaManagerUtils","OfflineThreadingId","Promise","WorkFailedSendMessageFalcoEvent","cr:8525","emptyFunction","gkx","promiseDone","react","requireDeferred","useMWXAlertDialog","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l=(k||d("react")).c,m=c("requireDeferred")("MWOpenMediaManagerUtils").__setRef("MWMediaManager"),n=function(){if(b("cr:8525")==null){c("FBLogger")("messenger_web_media").warn("Unsupported thread type for media upload");return(j||(j=b("Promise"))).resolve(null)}return b("cr:8525").load()},o=c("gkx")("24138")?75:25;function p(a,c){if(c)return n().then(function(c){return(j||(j=b("Promise"))).resolve((c=c==null?void 0:c.preprocessV2(a))!=null?c:[])});else return m.load().then(function(b){return b.preprocess(a)})}function q(a,b,c){for(var e=0;e<a.length;e++){var f=a[e],g=c(f,b);if(f.size>g*1024*1024){f=r(f.size);d("MWPBumpEntityKey").bumpEntityKeyWithAppId("media_sends","file_size_exceeded");d("MWPBumpEntityKey").bumpEntityKeyWithAppId("media_sends","file_size_exceeded."+f);return g}}return null}function r(a){return a<=50*1024*1024?"50MB":a<=75*1024*1024?"75MB":a<=100*1024*1024?"100MB":a<=250*1024*1024?"250MB":a<=500*1024*1024?"500MB":a<=1024*1024*1024?"1GB":"1GB+"}function a(a){var e=l(32),f=a.chatSupportUserId,g=a.chatSupportUserNonce,k=a.getMaxAttachmentSizeInMB,o=a.isChatSupportUser,r=a.maxNumberOfAttachments,t=a.onUploadFailure,u=a.onUploadStart,v=a.onUploadSuccess,w=a.showUploadFailureToast,x=a.thread,y=a.validateFileName,z=k===void 0?s:k,A=(h||(h=c("useReStore")))();e[0]===Symbol["for"]("react.memo_cache_sentinel")?(a={onClose:c("emptyFunction")},e[0]=a):a=e[0];var B=c("useMWXAlertDialog")(a);e[1]!==x.threadType?(k=d("LSMessagingThreadTypeUtil").isArmadilloSecure(x.threadType),e[1]=x.threadType,e[2]=k):k=e[2];var C=k,D=d("MWSharedMediaManagerUtils").useMediaStaging(x),E=D.length,F=d("MWPActor.react").useActor();e[3]!==C||e[4]!==z||e[5]!==B||e[6]!==r||e[7]!==E||e[8]!==y||e[9]!==x||e[10]!==w||e[11]!==A||e[12]!==u||e[13]!==v||e[14]!==t||e[15]!==o||e[16]!==f||e[17]!==g||e[18]!==F?(a=function(a){var e=q(a,C,z);if(e!=null){B(d("MWChatFileUploadErrorDialog.react").maxFileSizeExceeded(e),c("emptyFunction"));return}if(r!=null&&E+a.length>r){c("gkx")("23249")?(B(d("MWChatFileUploadErrorDialog.react").maxFilesNumberExceeded(r),c("emptyFunction")),c("WorkFailedSendMessageFalcoEvent").log(function(){return{breaking_rule:"",event:"NUMBER_OF_ATTACHMENTS_LIMIT_REACHED"}})):B(d("MWChatFileUploadErrorDialog.react").maxMediaNumberExceeded(r),c("emptyFunction"));return}if(y!=null)for(e=0;e<a.length;e++){var h=a[e];if(!y(h)){B(d("MWChatFileUploadErrorDialog.react").unsupportedFile(),c("emptyFunction"));return}}var k=d("OfflineThreadingId").createForItemsInOrder(a);k.forEach(function(a){var b=a[0];a=a[1];d("MWMediaComposerRenderQpl").startMediaComposerRenderQpl(a,b,x);d("MWMediaComposerRenderQpl").addPointMediaComposerRenderQpl(a,"preprocess_start")});c("promiseDone")(p(k,C)["catch"](function(){c("gkx")("1185")?w(d("MWChatFilePreProcessingErrorToast.react").invalidFileFormat.title,d("MWChatFilePreProcessingErrorToast.react").invalidFileFormat.body):B(d("MWChatFilePreProcessingErrorDialog.react").invalidFileFormat,c("emptyFunction"));k.forEach(function(a){a[0];a=a[1];d("MWMediaComposerRenderQpl").endCancelMediaComposerRenderQpl(a,"invalid-file-format")});return(j||(j=b("Promise"))).resolve([])}).then(function(a){a.forEach(function(a){d("MWMediaComposerRenderQpl").addPointMediaComposerRenderQpl(a.offlineAttachmentId,"preprocess_success")});c("promiseDone")(d("MWSharedMediaManagerUtils").insertMediaStaging(A,a,x.threadKey));a.forEach(function(a){d("MWMediaComposerRenderQpl").addPointMediaComposerRenderQpl(a.offlineAttachmentId,"media_staging_insert_success")});var b=x.threadKey;return C?n().then(function(c){return c==null?void 0:c.upload(A,b,a)}):m.load().then(function(c){return c.upload(A,b,a,w,u,v,t,o,f,g,(i||(i=d("I64"))).to_string(F))})}))},k=[F,f,g,A,z,o,C,r,E,t,u,v,B,w,x,y],e[3]=C,e[4]=z,e[5]=B,e[6]=r,e[7]=E,e[8]=y,e[9]=x,e[10]=w,e[11]=A,e[12]=u,e[13]=v,e[14]=t,e[15]=o,e[16]=f,e[17]=g,e[18]=F,e[19]=a,e[20]=k):(a=e[19],k=e[20]);a=d("Int64Hooks").useCallbackInt64(a,k);e[21]!==A||e[22]!==C?(k=function(a){c("promiseDone")(d("MWSharedMediaManagerUtils").deleteMediaStaging(A,a).then(function(){if(C&&b("cr:8525")!=null)return b("cr:8525").load().then(function(b){b.MAWMediaManagerAttachmentsV2["delete"](a)})}))},e[21]=A,e[22]=C,e[23]=k):k=e[23];k=k;var G;e[24]!==D||e[25]!==A?(G=function(){var a=D.map(function(a){return a.offlineAttachmentId});a.forEach(function(a){d("MWSharedMediaManagerUtils").deleteMediaStaging(A,a)["catch"](function(a){c("FBLogger")("messenger_web_media").catching(a).mustfix("Error deletting media staging.")})})},e[24]=D,e[25]=A,e[26]=G):G=e[26];G=G;var H;e[27]!==k||e[28]!==a||e[29]!==D||e[30]!==G?(H={handleFileRemove:k,handleFileSelect:a,mediaStaging:D,resetAttachments:G},e[27]=k,e[28]=a,e[29]=D,e[30]=G,e[31]=H):H=e[31];return H}function s(){return o}g.convertIntegerSizeToStringBucket=r;g.useMediaManager=a}),98);
__d("MWMediaTraceHandler",["I64","LSAppendDataTraceAddonStoredProcedure","LSDataTraceCheckPoint","LSDataTraceType","LSFactory","LSIntEnum","MAWTimeUtils","WATimeUtils"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function j(a,b){return a.data_trace_meta.add({contextOne:void 0,contextThree:void 0,contextTwo:void 0,foregroundTimestampMs:(h||(h=d("I64"))).zero,initTimestampMs:d("MAWTimeUtils").toTimestamp(d("WATimeUtils").unixTime()),predefinedId:void 0,shouldFlush:!1,traceId:b,traceType:(i||(i=d("LSIntEnum"))).ofNumber(c("LSDataTraceType").TASK)})}function a(a,b,e,f){return j(a,b).then(function(){return c("LSAppendDataTraceAddonStoredProcedure")(c("LSFactory")(a),{checkPointId:(i||(i=d("LSIntEnum"))).ofNumber(c("LSDataTraceCheckPoint").RICH_MEDIA_UPLOAD_START),dataTraceId:b,syncChannel:(h||(h=d("I64"))).neg_one,tags:h.to_string(e)+","+h.to_string(f)})})}g.logMediaSendStart=a}),98);
__d("MWMessageCellKeyCommands.react",["CometComponentWithKeyCommands.react","MWV2MessageRowActionsContext.react","cometGetKeyCommandConfig","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;b.useCallback;b.useMemo;var j=b.c;function a(a){var b=j(24);a=a.children;a=a;var e=d("MWV2MessageRowActionsContext.react").useMessageRowActionsContext(),f=e.forwardMessage,g=e.openReactionsMenu,h=e.removeMessage,k=e.replyToMessage;b[0]!==g?(e=function(){return g.current()},b[0]=g,b[1]=e):e=b[1];e=e;var l;b[2]!==k?(l=function(){return k.current()},b[2]=k,b[3]=l):l=b[3];l=l;var m;b[4]!==f?(m=function(){return f.current()},b[4]=f,b[5]=m):m=b[5];m=m;var n;b[6]!==h?(n=function(){return h.current()},b[6]=h,b[7]=n):n=b[7];n=n;var o;if(b[8]!==e||b[9]!==l||b[10]!==m||b[11]!==n){o=[];var p;b[13]!==e?(p=d("cometGetKeyCommandConfig").getCometAndGeminiKeyCommandConfig("chats","likeMessage",e),b[13]=e,b[14]=p):p=b[14];p=p;o.push(p);b[15]!==l?(p=d("cometGetKeyCommandConfig").getCometAndGeminiKeyCommandConfig("chats","replyToMessage",l),b[15]=l,b[16]=p):p=b[16];p=p;o.push(p);b[17]!==m?(p=d("cometGetKeyCommandConfig").getCometAndGeminiKeyCommandConfig("chats","forwardMessage",m),b[17]=m,b[18]=p):p=b[18];p=p;o.push(p);b[19]!==n?(p=d("cometGetKeyCommandConfig").getCometAndGeminiKeyCommandConfig("chats","removeMessage",n),b[19]=n,b[20]=p):p=b[20];p=p;o.push(p);b[8]=e;b[9]=l;b[10]=m;b[11]=n;b[12]=o}else o=b[12];p=o;e=p;b[21]!==e||b[22]!==a?(l=i.jsx(c("CometComponentWithKeyCommands.react"),{commandConfigs:e,xstyle:!1,children:a}),b[21]=e,b[22]=a,b[23]=l):l=b[23];return l}e=a;g.keyCommands=e}),98);
__d("MWMessageDeliverySentTimestamp",["fbt","I64"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=(i||(i=d("I64"))).of_int32(60),k=i.of_int32(60*60),l=i.of_int32(24*60*60),m=i.of_int32(7*24*60*60);function a(a,b){b=(i||(i=d("I64"))).of_float(b.getTime()/1e3);a=i.div(a,i.of_int32(1e3));b=i.sub(b,a);a=h._("__JHASH__FdnMQ3ayYbi__JHASH__");if((i||(i=d("I64"))).lt(b,j))return a;else if((i||(i=d("I64"))).lt(b,k)){var c=(i||(i=d("I64"))).to_string(i.div(b,j));return h._("__JHASH__wurNpoApU1z__JHASH__",[h._param("minutes",c)])}else if((i||(i=d("I64"))).lt(b,l)){c=(i||(i=d("I64"))).to_string(i.div(b,k));return h._("__JHASH__Og6TIDKGh51__JHASH__",[h._param("hours",c)])}else if((i||(i=d("I64"))).lt(b,m)){c=(i||(i=d("I64"))).to_string(i.div(b,l));return h._("__JHASH___ys48wQwNKi__JHASH__",[h._param("days",c)])}else return a}g.getSentTitleWithTimestamp=a}),226);
__d("MWMessageDeliveryStatus",["fbt","I64","LSIntEnum","getFBTSafeGenderFromGenderConst","getMessengerPreciseTimestamp","intlList","intlSummarizeNumber"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j;function a(a){if(a.length!==1)return{heads:a,type:"MultipleSeenHeads"};a=a[0];return{head:a,type:"SingleSeenHead"}}function b(a,b){return{delivered:b,heads:a,type:"DeliveredAndRead"}}function e(a){return{count:a,type:"SeenCount"}}function k(a){return a.timestamp>0?h._("__JHASH__i65FoHjBJBT__JHASH__",[h._name("full name",a.name,c("getFBTSafeGenderFromGenderConst")(a.gender)),h._param("seen time",c("getMessengerPreciseTimestamp")(a.timestamp))]):h._("__JHASH__o0y2JESDXU1__JHASH__",[h._name("full name",a.name,c("getFBTSafeGenderFromGenderConst")(a.gender))])}function l(a,b){if(a.length===0)return"";if(b)return h._("__JHASH__xJFzJjmgrii__JHASH__").toString();b=a.map(function(a){return h._("__JHASH__anoMlIo0TA0__JHASH__",[h._name("full name",a.name,c("getFBTSafeGenderFromGenderConst")(a.gender))])});a=c("intlList")(b,c("intlList").CONJUNCTIONS.AND,c("intlList").DELIMITERS.COMMA);return h._("__JHASH__rtgGiNEWfHK__JHASH__",[h._param("full name",a)]).toString()}function m(a){a=c("intlSummarizeNumber")(a);return h._("__JHASH___KIWePVuuHb__JHASH__",[h._param("seen count",a)]).toString()}var n={delivered:h._("__JHASH__DGTdcv4yxEO__JHASH__"),error:h._("__JHASH__HWY7OcPbAjW__JHASH__"),loading:h._("__JHASH__ge1hq8iGlfw__JHASH__"),retriableError:h._("__JHASH__VG5ajSXV9DG__JHASH__"),sending:h._("__JHASH__-KPam8KdjJ8__JHASH__"),sent:h._("__JHASH__FdnMQ3ayYbi__JHASH__")};function f(a){switch(a.type){case"Sending":return n.sending;case"Sent":case"Delivered":return n.sent;case"Error":return n.error;case"SingleSeenHead":return k(a.head);case"NoneStatus":case"MultipleSeenHeads":return"";case"DeliveredAndRead":return l(a.heads,a.delivered);case"SeenCount":return m(a.count);case"Loading":return n.loading;case"RetriableError":return n.retriableError}}function o(a){switch(a.type){case"Sending":return n.sending;case"Sent":return n.sent;case"Delivered":return n.delivered;case"Error":return n.error;case"SingleSeenHead":return k(a.head);case"DeliveredAndRead":return l(a.heads,a.delivered);default:return""}}function p(a){if((i||(i=d("I64"))).equal(a,(j||(j=d("LSIntEnum"))).ofNumber(1)))return{type:"Sending"};else if((i||(i=d("I64"))).equal(a,(j||(j=d("LSIntEnum"))).ofNumber(2))||(i||(i=d("I64"))).equal(a,(j||(j=d("LSIntEnum"))).ofNumber(6)))return{type:"Sent"};else if((i||(i=d("I64"))).equal(a,(j||(j=d("LSIntEnum"))).ofNumber(4))||(i||(i=d("I64"))).equal(a,(j||(j=d("LSIntEnum"))).ofNumber(5)))return{type:"Error"};else return{type:"NoneStatus"}}function q(a,b,c){var e=p(a.sendStatusV2);if((i||(i=d("I64"))).equal(a.sendStatusV2,(j||(j=d("LSIntEnum"))).ofNumber(4))||(i||(i=d("I64"))).equal(a.sendStatusV2,(j||(j=d("LSIntEnum"))).ofNumber(5))||(i||(i=d("I64"))).equal(a.sendStatusV2,(j||(j=d("LSIntEnum"))).ofNumber(1)))return e;else if(!c&&(i||(i=d("I64"))).equal(a.sendStatusV2,(j||(j=d("LSIntEnum"))).ofNumber(2)))return{type:"NoneStatus"};else if((i||(i=d("I64"))).ge(b,a.timestampMs))return{type:"Delivered"};else return e}function r(a){return["SingleSeenHead","Sending","MultipleSeenHeads","Error"].includes(a.type)}g.seenHead=a;g.deliveredAndRead=b;g.seenCount=e;g.getSingleSeenHead=k;g.getSeenCount=m;g.Titles=n;g.getBroadcastStatusTitle=f;g.getStatusTitle=o;g.getFromSendStatus=p;g.getDeliveryStatusForMessageSentByYou=q;g.isAlwaysShownStatus=r}),226);
__d("useGetMediaGroupStyles",["MWLSThreadDisplayContext","gkx","react"],(function(a,b,c,d,e,f,g){"use strict";var h;e=h||d("react");e.useMemo;var i=e.c,j=180,k=120;function a(a,b){var c=i(40),e=d("MWLSThreadDisplayContext").useMWLSThreadDisplayContext()==="ChatTab",f=null;if(b===2&&e){var g;c[0]===Symbol["for"]("react.memo_cache_sentinel")?(g="x78zum5 xdt5ytf x6ikm8r x10wlt62 x1isuwpm xq1dxzn",c[0]=g):g=c[0];f=g}else if(b===2&&!e){c[1]===Symbol["for"]("react.memo_cache_sentinel")?(g="x78zum5 xdt5ytf x6ikm8r x10wlt62 x1en3kgc xafpxmx",c[1]=g):g=c[1];f=g}else if(b===3&&e){c[2]===Symbol["for"]("react.memo_cache_sentinel")?(g="x78zum5 xdt5ytf x6ikm8r x10wlt62 xu3xrit xq1dxzn",c[2]=g):g=c[2];f=g}else if(b===3&&!e){c[3]===Symbol["for"]("react.memo_cache_sentinel")?(g="x78zum5 xdt5ytf x6ikm8r x10wlt62 x1egiwwb xafpxmx",c[3]=g):g=c[3];f=g}else if(b===4&&e){c[4]===Symbol["for"]("react.memo_cache_sentinel")?(g="x78zum5 xdt5ytf x6ikm8r x10wlt62 x89wwaf xh6lk7j",c[4]=g):g=c[4];f=g}else if(b===4&&!e){c[5]===Symbol["for"]("react.memo_cache_sentinel")?(g="x78zum5 xdt5ytf x6ikm8r x10wlt62 x1gyaxfs xt4sqew",c[5]=g):g=c[5];f=g}if(e){c[6]===Symbol["for"]("react.memo_cache_sentinel")?(g="x6s0dn4 x1tlxs6b x1g8br2z x1gn5b1j x230xth x78zum5 xl56j7k x6ikm8r x10wlt62 x10l6tqk x1wkxgih x1mu601j x2aouup xi3av73 x1i9suas xygnafs",c[6]=g):g=c[6];g=g}else{var h;c[7]===Symbol["for"]("react.memo_cache_sentinel")?(h="x6s0dn4 x1tlxs6b x1g8br2z x1gn5b1j x230xth x78zum5 x1b51vyi xl56j7k x19aweqf x1e4dklr x1shn012 xfb3i0g x6ikm8r x10wlt62 x10l6tqk xzjbwwf",c[7]=h):h=c[7];g=h}c[8]===Symbol["for"]("react.memo_cache_sentinel")?(h=[{bottom:0,left:17},{bottom:6,left:8,transform:"rotate(-4deg)"},{bottom:12,right:8,transform:"rotate(4deg)"},{bottom:18,left:8,transform:"rotate(-4deg)"}],c[8]=h):h=c[8];var l=a?null:0,m=a?0:null,n;c[9]!==l||c[10]!==m?(n={left:l,right:m,top:0},c[9]=l,c[10]=m,c[11]=n):n=c[11];l=a?0:null;m=a?null:0;var o=e?100:160,p;c[12]!==l||c[13]!==m||c[14]!==o?(p={left:l,right:m,top:o},c[12]=l,c[13]=m,c[14]=o,c[15]=p):p=c[15];l=a?null:0;m=a?0:null;c[16]!==l||c[17]!==m?(o={bottom:0,left:l,right:m},c[16]=l,c[17]=m,c[18]=o):o=c[18];c[19]!==n||c[20]!==p||c[21]!==o?(l=[n,p,o],c[19]=n,c[20]=p,c[21]=o,c[22]=l):l=c[22];m=a?0:null;n=a?null:0;c[23]!==m||c[24]!==n?(p={left:m,right:n,top:0},c[23]=m,c[24]=n,c[25]=p):p=c[25];o=a?null:0;m=a?0:null;c[26]!==o||c[27]!==m?(n={bottom:0,left:o,right:m},c[26]=o,c[27]=m,c[28]=n):n=c[28];c[29]!==p||c[30]!==n?(a=[p,n],c[29]=p,c[30]=n,c[31]=a):a=c[31];c[32]!==l||c[33]!==a?(o={fourImageTile:h,threeImageTile:l,twoImageTile:a},c[32]=l,c[33]=a,c[34]=o):o=c[34];m=o;p=m;n=b===2?p.twoImageTile:b===3?p.threeImageTile:p.fourImageTile;h=e?k:j;c[35]!==f||c[36]!==n||c[37]!==h||c[38]!==g?(l={containerStyles:f,coordinations:n,imageSize:h,wrapperStyles:g},c[35]=f,c[36]=n,c[37]=h,c[38]=g,c[39]=l):l=c[39];return l}function b(a,b,e){var f=i(4),g=d("MWLSThreadDisplayContext").useMWLSThreadDisplayContext()==="ChatTab",h=1,l=1;if(c("gkx")("5318")===!1||a!==!0||b===0||e===0){var m;f[0]===Symbol["for"]("react.memo_cache_sentinel")?(m={resizeRatio:1,scaleRatio:1},f[0]=m):m=f[0];return m}a===!0&&b!=null&&e!=null&&(b>=e?h=Math.ceil((g?k:j)/e):h=Math.ceil((g?k:j)/b));a===!0&&h===1&&b!=null&&e!=null&&(l=b>e?b/e:e/b);f[1]!==h||f[2]!==l?(m={resizeRatio:h,scaleRatio:l},f[1]=h,f[2]=l,f[3]=m):m=f[3];return m}g.IMAGE_SIZE=j;g.IMAGE_SIZE_CHAT_TAB=k;g.useGetMediaGroupStyles=a;g.useGetMediaGroupTileImageRatios=b}),98);
__d("MWMessageListImageSizingUtils",["gkx","justknobx","useGetMediaGroupStyles"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,e){if(e===!0)return{maxHeight:b==="Inbox"?d("useGetMediaGroupStyles").IMAGE_SIZE:d("useGetMediaGroupStyles").IMAGE_SIZE_CHAT_TAB,maxWidth:b==="Inbox"?d("useGetMediaGroupStyles").IMAGE_SIZE:d("useGetMediaGroupStyles").IMAGE_SIZE_CHAT_TAB};return b!=="Inbox"&&b!=="ChatTab"||a&&c("gkx")("5318")!==!0?{maxHeight:200,maxWidth:480}:{maxHeight:b==="Inbox"?c("justknobx")._("2546"):c("justknobx")._("2547"),maxWidth:b==="Inbox"?c("justknobx")._("2548"):c("justknobx")._("2549")}}g.getMaxPreviewHeightAndWidth=a}),98);
__d("MWMessageListMediaPressableContainer.react",["I64","LSIntEnum","LSMediaUrlAttachment","MWPThreadCapabilitiesContext","MWXPressable.react","MessagingAttachmentType","cr:4509","gkx","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=h||(h=d("react"));e=h;var l=e.useEffect,m=e.c;function a(a){var e=m(32),f=a.allowClickEventPropagation,g=a.ariaLabel,h=a.attachment,n=a.children,o=a.disabled,p=a.linkProps_,q=a.mediaRenderQpl,r=a.onHoverIn,s=a.onPress,t=a.overlayDisabled,u=a.testid;a=a.xstyle;t=t===void 0?!1:t;var v=d("MWPThreadCapabilitiesContext").useMWPThreadCapabilitiesContext();v=v.blurMediaEnabled;var w=c("gkx")("24098")&&v;v=(i||(i=d("I64"))).equal(h.attachmentType,(j||(j=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").IMAGE))||(i||(i=d("I64"))).equal(h.attachmentType,(j||(j=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").ANIMATED_IMAGE));var x=(i||(i=d("I64"))).equal(h.attachmentType,(j||(j=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").VIDEO)),y=v?"Image":x?"Video":"Media",z,A;e[0]!==q||e[1]!==w||e[2]!==y?(z=function(){q==null?void 0:q.addPoint("render-message-list-media-pressable-container",{bool:{is_blur_media:w},string:{media_type:y}})},A=[w,q,y],e[0]=q,e[1]=w,e[2]=y,e[3]=z,e[4]=A):(z=e[3],A=e[4]);l(z,A);if(b("cr:4509")!=null&&(v||x)&&w){z=x?"video":"image";e[5]!==h?(A=d("LSMediaUrlAttachment").previewUrl(h),e[5]=h,e[6]=A):A=e[6];e[7]!==g||e[8]!==o||e[9]!==p||e[10]!==y||e[11]!==s||e[12]!==t||e[13]!==u||e[14]!==z||e[15]!==A||e[16]!==a||e[17]!==n?(v=k.jsx(b("cr:4509"),{ariaLabel:g,disabled:o,linkProps:p,mediaType:y,onPress:s,overlayDisabled:t,testid:void 0,type:z,url:A,xstyle:a,children:n}),e[7]=g,e[8]=o,e[9]=p,e[10]=y,e[11]=s,e[12]=t,e[13]=u,e[14]=z,e[15]=A,e[16]=a,e[17]=n,e[18]=v):v=e[18];return v}e[19]!==s?(x=function(){return s()},e[19]=s,e[20]=x):x=e[20];e[21]!==f||e[22]!==g||e[23]!==o||e[24]!==p||e[25]!==r||e[26]!==x||e[27]!==t||e[28]!==u||e[29]!==a||e[30]!==n?(h=k.jsx(c("MWXPressable.react"),{allowClickEventPropagation:f,"aria-label":g,disabled:o,linkProps:p,onHoverIn:r,onPress:x,overlayDisabled:t,testid:void 0,xstyle:a,children:n}),e[21]=f,e[22]=g,e[23]=o,e[24]=p,e[25]=r,e[26]=x,e[27]=t,e[28]=u,e[29]=a,e[30]=n,e[31]=h):h=e[31];return h}g["default"]=a}),98);
__d("MWXAspectRatioContainer.react",["react","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=(i||(i=d("react"))).c,k=i,l={childInner:{maxHeight:"xmz0i5r",maxWidth:"x193iq5w",$$css:!0},inner:function(a){return[{paddingBottom:a==null?null:"x18061mc",position:"x1n2onr6",width:"xh8yej3",$$css:!0},{"--paddingBottom":function(a){return typeof a==="number"?a+"px":a!=null?a:void 0}(a)}]},outer:function(a,b,c){return[{maxHeight:c==null?null:"x1kb659o",maxWidth:b==null?null:"x10cxd3o",width:a==null?null:"x1bl4301",$$css:!0},{"--maxHeight":function(a){return typeof a==="number"?a+"px":a!=null?a:void 0}(c),"--maxWidth":function(a){return typeof a==="number"?a+"px":a!=null?a:void 0}(b),"--width":function(a){return typeof a==="number"?a+"px":a!=null?a:void 0}(a)}]}};function a(a){var b=j(18),d=a.children,e=a.height,f=a.maxHeight,g=a.maxWidth;a=a.width;e=a/e;g=g!=null&&f!=null?"min("+g+"px, "+f*e+"px)":f!=null?f*e+"px":g;var i;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(i={className:"x78zum5 x193iq5w"},b[0]=i):i=b[0];if(b[1]!==g||b[2]!==f||b[3]!==a){var m;m=(h||(h=c("stylex"))).props(l.outer(a,(m=g)!=null?m:"initial",(m=f)!=null?m:"initial"));b[1]=g;b[2]=f;b[3]=a;b[4]=m}else m=b[4];b[5]!==e?(g=(h||(h=c("stylex"))).props(l.inner(100/e+"%")),b[5]=e,b[6]=g):g=b[6];b[7]===Symbol["for"]("react.memo_cache_sentinel")?(f={className:"x5yr21d x17qophe x10l6tqk x13vifvy xh8yej3"},b[7]=f):f=b[7];b[8]!==d?(a=d==null?void 0:d(l.childInner),b[8]=d,b[9]=a):a=b[9];b[10]!==a?(e=k.jsx("div",babelHelpers["extends"]({},f,{children:a})),b[10]=a,b[11]=e):e=b[11];b[12]!==g||b[13]!==e?(d=k.jsx("div",babelHelpers["extends"]({},g,{children:e})),b[12]=g,b[13]=e,b[14]=d):d=b[14];b[15]!==m||b[16]!==d?(f=k.jsx("div",babelHelpers["extends"]({},i,{children:k.jsx("div",babelHelpers["extends"]({},m,{children:d}))})),b[15]=m,b[16]=d,b[17]=f):f=b[17];return f}g["default"]=a}),98);
__d("MWXMessageImage.react",["BaseImage.react","CometBlurredBackgroundImage.react","MWXAspectRatioContainer.react","react","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=(i||(i=d("react"))).c,k=i,l={container:function(a){return[{maxWidth:a==null?null:"x10cxd3o",$$css:!0},{"--maxWidth":function(a){return typeof a==="number"?a+"px":a!=null?a:void 0}(a)}]},image:{display:"x1lliihq",maxWidth:"x193iq5w",$$css:!0}};function a(a){var b=j(24),d,e,f,g,i,m,n,o,p;b[0]!==a?(p=a.children,e=a.height,i=a.maxHeight,f=a.maxWidth,g=a.renderImagePlaceholder,n=a.shouldBlur,d=a.width,o=a.xstyle,m=babelHelpers.objectWithoutPropertiesLoose(a,["children","height","maxHeight","maxWidth","renderImagePlaceholder","shouldBlur","width","xstyle"]),b[0]=a,b[1]=d,b[2]=e,b[3]=f,b[4]=g,b[5]=i,b[6]=m,b[7]=n,b[8]=o,b[9]=p):(d=b[1],e=b[2],f=b[3],g=b[4],i=b[5],m=b[6],n=b[7],o=b[8],p=b[9]);if(b[10]!==d||b[11]!==e||b[12]!==f||b[13]!==g||b[14]!==i||b[15]!==m||b[16]!==n){a=d==null||e==null?k.jsx("div",babelHelpers["extends"]({},(h||(h=c("stylex"))).props(l.container(f)),{children:(a=g==null?void 0:g())!=null?a:k.jsx(c("BaseImage.react"),babelHelpers["extends"]({},m,{objectFit:"contain",style:{maxHeight:i+"px"},xstyle:l.image}))})):k.jsx(c("MWXAspectRatioContainer.react"),{height:e,maxHeight:i,maxWidth:f,width:d,children:function(a){var b;return(b=g==null?void 0:g())!=null?b:n!==!0?k.jsx(c("BaseImage.react"),babelHelpers["extends"]({height:e,width:d,xstyle:a},m)):k.jsx(c("CometBlurredBackgroundImage.react"),babelHelpers["extends"]({xstyle:a},m))}});b[10]=d;b[11]=e;b[12]=f;b[13]=g;b[14]=i;b[15]=m;b[16]=n;b[17]=a}else a=b[17];f=a;b[18]!==o?(i=(h||(h=c("stylex")))(o),b[18]=o,b[19]=i):i=b[19];b[20]!==i||b[21]!==f||b[22]!==p?(a=k.jsxs("div",{className:i,children:[f,p]}),b[20]=i,b[21]=f,b[22]=p,b[23]=a):a=b[23];return a}g["default"]=a}),98);
__d("MWPMessageListImage.react",["LSMessagingThreadTypeUtil","MAWConvertExtendedContentOverlayIconGlyphToInformTreatmentRenderingType","MWInformedTreatment.react","MWLSThread","MWXImage.react","MWXMessageBubbleCornerStyles.react","MWXMessageImage.react","MWXPressable.react","ReQL","ReQLSuspense","gkx","react","stylex","useMWInformTreatmentFalcoEventLogger","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=j||(j=d("react"));b=j;b.useCallback;var l=b.useState,m=b.c,n={appAttr:{alignItems:"x6s0dn4",borderBottomWidth:"xso031l",borderTopColor:"x1pdss0j",borderEndColor:"xtcpoma",borderBottomColor:"x81c4ja",borderStartColor:"x8g6rb3",borderEndWidth:"xm81vs4",borderStartWidth:"xy80clv",borderTopStyle:"x13fuv20",borderEndStyle:"xu3j5b3",borderBottomStyle:"x1q0q8m5",borderStartStyle:"x26u7qi",borderTopWidth:"x972fbf",boxSizing:"x9f619",display:"x78zum5",lineHeight:"x1rfph6h",paddingTop:"x1iorvi4",paddingEnd:"xsyo7zv",paddingBottom:"xjkvuk6",paddingStart:"x16hj40l",$$css:!0},appIcon:{borderTopStartRadius:"x14yjl9h",borderTopEndRadius:"xudhj91",borderBottomEndRadius:"x18nykt9",borderBottomStartRadius:"xww2gxu",height:"xlup9mm",marginEnd:"x1w0mnb",objectFit:"x19kjcj4",width:"x1kky2od",$$css:!0},pressable:{alignItems:"x6s0dn4",display:"x78zum5",flexShrink:"xs83m0k",justifyContent:"xl56j7k",maxHeight:"xmz0i5r",$$css:!0},root:{display:"x78zum5",flexDirection:"xdt5ytf",marginTop:"xdj266r",marginEnd:"x11i5rnm",marginBottom:"xat24cr",marginStart:"x1mh8g0r",overflowX:"x6ikm8r",overflowY:"x10wlt62",position:"x1n2onr6",$$css:!0}};function o(a){var b=m(18),e=a.attachment,f=a.connectBottom,g=a.connectTop,i=a.outgoing;a=a.xstyle;i=i===!0?"right":"left";var j,l,o,p;if(b[0]!==i||b[1]!==f||b[2]!==g||b[3]!==e||b[4]!==a){p=Symbol["for"]("react.early_return_sentinel");bb0:{var q=d("MWXMessageBubbleCornerStyles.react").getMWXBubbleCornerStyles({align:i,connectBottom:f,connectTop:g,flatten:"top"}),r=e;l=r.attributionAppName;if(l==null){p=null;break bb0}j=r.attributionAppIcon;o=(h||(h=c("stylex")))(n.appAttr,a,q)}b[0]=i;b[1]=f;b[2]=g;b[3]=e;b[4]=a;b[5]=j;b[6]=l;b[7]=o;b[8]=p}else j=b[5],l=b[6],o=b[7],p=b[8];if(p!==Symbol["for"]("react.early_return_sentinel"))return p;b[9]!==j?(r=j!=null?k.jsx(c("MWXImage.react"),{alt:"",src:j,xstyle:n.appIcon}):null,b[9]=j,b[10]=r):r=b[10];b[11]===Symbol["for"]("react.memo_cache_sentinel")?(q="xzsf02u x1nxh6w3 x13faqbe",b[11]=q):q=b[11];b[12]!==l?(i=k.jsx("span",{className:q,children:l}),b[12]=l,b[13]=i):i=b[13];b[14]!==o||b[15]!==r||b[16]!==i?(f=k.jsxs("div",{className:o,children:[r,i]}),b[14]=o,b[15]=r,b[16]=i,b[17]=f):f=b[17];return f}function p(a){var b=m(26),e=a.attachment,g=a.height,h=a.setIsBlurredImageVisible;a=a.width;var j=(i||(i=c("useReStore")))(),l;b[0]!==j.tables.messages||b[1]!==e.messageId?(l=function(){return d("ReQL").fromTableAscending(j.tables.messages.index("messageId")).getKeyRange(e.messageId)},b[0]=j.tables.messages,b[1]=e.messageId,b[2]=l):l=b[2];var o;b[3]!==e.messageId||b[4]!==j?(o=[e.messageId,j],b[3]=e.messageId,b[4]=j,b[5]=o):o=b[5];l=d("ReQLSuspense").useFirstExn(l,o,f.id+":124");b[6]!==l?(o={message:l},b[6]=l,b[7]=o):o=b[7];var p=c("useMWInformTreatmentFalcoEventLogger")(o);o=(l=d("MWLSThread").useThread(e.threadKey,q))!=null?l:{isSecureThread:!1,threadType:null};l=o.isSecureThread;o=o.threadType;var r=e.gatingTitle,s=e.gatingType,t=e.previewUrl;o=d("MWInformedTreatment.react").checkIsInformedTreatmentVisible(r,s,t,o);if(s==null||r==null||!o)return null;o=s==="warning_screens";var u;b[8]!==l||b[9]!==s?(u=l?d("MAWConvertExtendedContentOverlayIconGlyphToInformTreatmentRenderingType").convertExtendedContentOverlayIconGlyphToInformTreatmentRenderingType(parseInt(s,10)):s,b[8]=l,b[9]=s,b[10]=u):u=b[10];l=u;s=g+"px";u=a!=null?a+"px":"100%";b[11]!==s||b[12]!==u?(g={height:s,width:u},b[11]=s,b[12]=u,b[13]=g):g=b[13];b[14]!==g||b[15]!==r||b[16]!==l||b[17]!==e.messageId||b[18]!==t?(a=k.jsx(d("MWInformedTreatment.react").MWInformedTreatment,{dimension:g,gatingTitle:r,gatingType:l,mediaRenderQpl:null,messageId:e.messageId,previewUrl:t}),b[14]=g,b[15]=r,b[16]=l,b[17]=e.messageId,b[18]=t,b[19]=a):a=b[19];s=a;b[20]!==o||b[21]!==r||b[22]!==h||b[23]!==p||b[24]!==s?(u=o?k.jsx(c("MWXPressable.react"),{onPress:function(){var a=d("MWInformedTreatment.react").getEventTitle(r);h(!0);a!=null&&p("tap_to_reveal",{name:a,type:"warning_screens"})},overlayRadius:"normal",xstyle:n.pressable,children:s}):s,b[20]=o,b[21]=r,b[22]=h,b[23]=p,b[24]=s,b[25]=u):u=b[25];return u}function q(a){return{isSecureThread:d("LSMessagingThreadTypeUtil").isArmadilloSecure(a.threadType),threadType:a.threadType}}function a(a){var b=m(29),e,f,g,h,i,j;b[0]!==a?(e=a.attachment,g=a.connectBottom,h=a.connectTop,f=a.outgoing,j=a.xstyle,i=babelHelpers.objectWithoutPropertiesLoose(a,["attachment","connectBottom","connectTop","outgoing","xstyle"]),b[0]=a,b[1]=e,b[2]=f,b[3]=g,b[4]=h,b[5]=i,b[6]=j):(e=b[1],f=b[2],g=b[3],h=b[4],i=b[5],j=b[6]);a=e.attributionAppName!=null;var q=f===!0?"right":"left";a=a===!0?"bottom":"none";var s;b[7]!==q||b[8]!==g||b[9]!==h||b[10]!==a?(s=d("MWXMessageBubbleCornerStyles.react").getMWXBubbleCornerStyles({align:q,connectBottom:g,connectTop:h,flatten:a}),b[7]=q,b[8]=g,b[9]=h,b[10]=a,b[11]=s):s=b[11];q=s;a=l(!1);s=a[0];var t=a[1];a=(a=d("MWLSThread").useThread(e.threadKey,r))!=null?a:!1;s=!s&&e.gatingTitle!=null&&e.gatingType!=null&&a;b[12]!==i||b[13]!==e?(a=function(){var a=i,b=a.height,c=a.maxHeight,d=a.maxWidth;a=a.width;return k.jsx(p,{attachment:e,height:b!=null?Math.min(b,c):c,setIsBlurredImageVisible:t,width:a!=null&&d!=null?Math.min(a,d):(b=a)!=null?b:d})},b[12]=i,b[13]=e,b[14]=a):a=b[14];a=a;s=s?a:void 0;b[15]!==j||b[16]!==q?(a=[n.root,j,q],b[15]=j,b[16]=q,b[17]=a):a=b[17];b[18]!==e||b[19]!==g||b[20]!==h||b[21]!==f||b[22]!==j?(q=k.jsx(o,{attachment:e,connectBottom:g,connectTop:h,outgoing:f,xstyle:j}),b[18]=e,b[19]=g,b[20]=h,b[21]=f,b[22]=j,b[23]=q):q=b[23];b[24]!==s||b[25]!==a||b[26]!==i||b[27]!==q?(g=k.jsx(c("MWXMessageImage.react"),babelHelpers["extends"]({renderImagePlaceholder:s,xstyle:a},i,{children:q})),b[24]=s,b[25]=a,b[26]=i,b[27]=q,b[28]=g):g=b[28];return g}function r(a){return d("LSMessagingThreadTypeUtil").isArmadilloSecure(a.threadType)||d("LSMessagingThreadTypeUtil").isPublicCMThread(a.threadType)&&c("gkx")("3643")}g.MWPMessageListImage=a}),98);
__d("MWV2ComposerMediaProgressBar.react",["MWPColorUtils","react","useMWPThreadTheme"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||(h=d("react"))).c,j=h;function a(a){var b=i(29),e=a.height;a=a.mediaStaging;var f=c("useMWPThreadTheme")();f=f.threadTheme;var g;b[0]!==a.hasError||b[1]!==f?(g=a.hasError?"var(--negative)":d("MWPColorUtils").int64ToHex(f.fallbackColor),b[0]=a.hasError,b[1]=f,b[2]=g):g=b[2];f=g;g=Math.ceil(a.progress*100);var h=(e/2).toString();h="M 0,"+h+" L 100,"+h;if(a.progress===1||a.progress===0)return null;b[3]===Symbol["for"]("react.memo_cache_sentinel")?(a="x1ey2m1c x17qophe x10l6tqk xh8yej3",b[3]=a):a=b[3];var k;b[4]!==e?(k=e.toString(),b[4]=e,b[5]=k):k=b[5];var l;b[6]!==k?(l={height:k},b[6]=k,b[7]=l):l=b[7];k="0 0 100 "+e.toString();var m;b[8]!==e?(m=e.toString(),b[8]=e,b[9]=m):m=b[9];var n;b[10]!==h||b[11]!==m?(n=j.jsx("path",{d:h,stroke:"rgba(0,0,0,.5)",strokeLinecap:"round",strokeWidth:m}),b[10]=h,b[11]=m,b[12]=n):n=b[12];m=g===0?0:e;b[13]!==m?(e=m.toString(),b[13]=m,b[14]=e):e=b[14];m=100-g|0;b[15]!==m?(g=m.toString(),b[15]=m,b[16]=g):g=b[16];b[17]!==g?(m={strokeDasharray:"100",strokeDashoffset:g,transition:"stroke-dashoffset .5s, stroke .5s"},b[17]=g,b[18]=m):m=b[18];b[19]!==h||b[20]!==f||b[21]!==e||b[22]!==m?(g=j.jsx("path",{d:h,stroke:f,strokeLinecap:"round",strokeWidth:e,style:m}),b[19]=h,b[20]=f,b[21]=e,b[22]=m,b[23]=g):g=b[23];b[24]!==l||b[25]!==k||b[26]!==n||b[27]!==g?(h=j.jsxs("svg",{"aria-hidden":!0,className:a,preserveAspectRatio:"none",style:l,viewBox:k,children:[n,g]}),b[24]=l,b[25]=k,b[26]=n,b[27]=g,b[28]=h):h=b[28];return h}g["default"]=a}),98);
__d("MWV2AttachmentProgressBar.react",["MWV2ComposerMediaProgressBar.react","ReQL","ReQLSuspense","react","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=(i||(i=d("react"))).c,k=i;function a(a){var b=j(7);a=a.attachment;var e=a.offlineAttachmentId,g=(h||(h=c("useReStore")))();b[0]!==e||b[1]!==g?(a=function(){return e!=null?d("ReQL").fromTableAscending(g.tables.media_staging).getKeyRange(e):d("ReQL").empty()},b[0]=e,b[1]=g,b[2]=a):a=b[2];var i;b[3]!==e?(i=[e],b[3]=e,b[4]=i):i=b[4];a=d("ReQLSuspense").useFirst(a,i,f.id+":24");if(a!=null&&a.isSent){b[5]!==a?(i=k.jsx(c("MWV2ComposerMediaProgressBar.react"),{height:5,mediaStaging:a}),b[5]=a,b[6]=i):i=b[6];return i}return null}g["default"]=a}),98);
__d("useMWMessageListAttachmentDimensions",["react"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");b.useMemo;var i=b.c;function a(a,b){var c=i(6);bb0:{var d=b.previewWidthLarge,e=b.previewHeightLarge;if(d!=null&&e!=null&&a==="Inbox"){c[0]!==d||c[1]!==e?(a=[d,e],c[0]=d,c[1]=e,c[2]=a):a=c[2];d=a;break bb0}c[3]!==b.previewWidth||c[4]!==b.previewHeight?(e=[b.previewWidth,b.previewHeight],c[3]=b.previewWidth,c[4]=b.previewHeight,c[5]=e):e=c[5];d=e}return d}g["default"]=a}),98);
__d("useMWV2FocusRowAfterClosingPushView",["MWV2MessageRowIsRowFocusedContext.react","react","useCometRouterState","usePrevious"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");var i=b.useContext,j=b.useLayoutEffect,k=b.c;function a(){var a=k(10),b=i(d("MWV2MessageRowIsRowFocusedContext.react").context),e=b.isDialogOpened,f=b.setIsDialogOpened,g=b.setFocused;b=c("useCometRouterState")();var h;if(b==null)h=0;else{b=b.pushViewStack;h=b==null?0:b.length}var l=c("usePrevious")(h);b=h;var m;a[0]!==l||a[1]!==e||a[2]!==b||a[3]!==f||a[4]!==g?(m=function(){if(l!=null){e===!0&&l>0&&h===0&&(f(function(){return!1}),g(function(){return!0}));return}},a[0]=l,a[1]=e,a[2]=b,a[3]=f,a[4]=g,a[5]=m):m=a[5];b=h;var n;a[6]!==e||a[7]!==l||a[8]!==b?(n=[e,l,b],a[6]=e,a[7]=l,a[8]=b,a[9]=n):n=a[9];j(m,n);return f}g["default"]=a}),98);
__d("MWV2MediaViewerFallback.react",["MWV2MediaViewerContainer.react","MWV2MediaViewerControlsFallback.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||(h=d("react"))).c,j=h;function a(a){var b=i(5),d=a.onClose;a=a.shouldShowMessengerLogo;var e;b[0]!==d?(e=j.jsx(c("MWV2MediaViewerControlsFallback.react"),{onClose:d}),b[0]=d,b[1]=e):e=b[1];b[2]!==e||b[3]!==a?(d=j.jsx(c("MWV2MediaViewerContainer.react"),{actions:e,shouldShowMessengerLogo:a,children:null}),b[2]=e,b[3]=a,b[4]=d):d=b[4];return d}g["default"]=a}),98);
__d("useMWV2MediaViewerShowDialog",["JSResourceForInteraction","MWV2MediaViewerFallback.react","react","useMWXLazyDialog"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;var j=b.useEffect,k=b.c;function l(a){return i.jsx(c("MWV2MediaViewerFallback.react"),{onClose:a})}l.displayName=l.name+" [from "+f.id+"]";function a(a){var b=k(8),d;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(d=c("JSResourceForInteraction")("MWV2MediaViewer.react").__setRef("useMWV2MediaViewerShowDialog"),b[0]=d):d=b[0];d=c("useMWXLazyDialog")(d,l);var e=d[0],f=d[1],g;b[1]!==a||b[2]!==f?(d=function(){a||f()},g=[f,a],b[1]=a,b[2]=f,b[3]=d,b[4]=g):(d=b[3],g=b[4]);j(d,g);b[5]!==e||b[6]!==f?(d=[e,f],b[5]=e,b[6]=f,b[7]=d):d=b[7];return d}g["default"]=a}),98);
__d("XCometMessengerMediaControllerRouteBuilder",["jsRouteBuilder"],(function(a,b,c,d,e,f,g){a=c("jsRouteBuilder")("/messenger_media/",Object.freeze({}),void 0);b=a;g["default"]=b}),98);
__d("XCometMessengerPhotoControllerRouteBuilder",["jsRouteBuilder"],(function(a,b,c,d,e,f,g){a=c("jsRouteBuilder")("/messenger_photo/",Object.freeze({}),void 0);b=a;g["default"]=b}),98);
__d("useMWV2MediaViewerURL",["I64","Int64Hooks","LSIntEnum","MessagingAttachmentType","XCometMessengerMediaControllerRouteBuilder","XCometMessengerPhotoControllerRouteBuilder","justknobx","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=(h||d("react")).c;function a(a){var b=k(6),e,f;b[0]!==a.attachmentType||b[1]!==a.attachmentFbid||b[2]!==a.messageId||b[3]!==a.threadKey?(e=function(){var b=(i||(i=d("I64"))).equal(a.attachmentType,(j||(j=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").ANIMATED_IMAGE));return b&&c("justknobx")._("1284")===!1?c("XCometMessengerPhotoControllerRouteBuilder").buildURL({fbid:a.attachmentFbid,message_id:a.messageId,photo_ids:void 0}):c("XCometMessengerMediaControllerRouteBuilder").buildURL({attachment_id:a.attachmentFbid,message_id:a.messageId,thread_id:i.to_string(a.threadKey)})},f=[a.threadKey,a.attachmentType,a.messageId,a.attachmentFbid],b[0]=a.attachmentType,b[1]=a.attachmentFbid,b[2]=a.messageId,b[3]=a.threadKey,b[4]=e,b[5]=f):(e=b[4],f=b[5]);return d("Int64Hooks").useMemoInt64(e,f)}g["default"]=a}),98);
__d("MWV2ChatImage.react",["fbt","I64","LSAuthorityLevel","LSIntEnum","MWChatImageInsetShadow.react","MWLSThreadDisplayContext","MWMessageListMediaPressableContainer.react","MWPBumpEntityKey","MWPMessageListImage.react","MWV2AttachmentProgressBar.react","MWV2LogMessageClick","MWXMessageBubbleCornerStyles.react","gkx","justknobx","react","useGetMediaGroupInformation","useGetMediaGroupStyles","useMWMediaViewerOpenQPLLogger","useMWMessageListAttachmentDimensions","useMWV2FocusRowAfterClosingPushView","useMWV2MediaViewerShowDialog","useMWV2MediaViewerURL","useReStore"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l,m=l||(l=d("react"));b=l;b.useCallback;var n=b.useEffect,o=b.c,p={container:{display:"x78zum5",overflowX:"x6ikm8r",overflowY:"x10wlt62",position:"x1n2onr6",$$css:!0},containerMinHeight:{minHeight:"xe0p6wg",$$css:!0}};function a(a){var b,e,f=o(79),g=a.attachment,l=a.connectBottom,q=a.connectTop,r=a.getPreviewUrl,s=a.isGroupedImage,t=a.isSecure,u=a.maxHeight,v=a.maxWidth,w=a.mediaRenderQpl,x=a.message,y=a.navigateToRouteForMediaViewer,z=a.outgoing,A=a.renderUnsupportedAttachment,B=a.shouldBlur;f[0]!==w?(a=function(){w==null?void 0:w.endFail("load-image-error")},f[0]=w,f[1]=a):a=f[1];a=a;var C;f[2]!==w?(C=function(){w==null?void 0:w.endSuccess()},f[2]=w,f[3]=C):C=f[3];C=C;var D=(i||(i=c("useReStore")))(),E=(b=y)!=null?b:!0;b=d("MWLSThreadDisplayContext").useMWLSThreadDisplayContext();b=c("useMWMessageListAttachmentDimensions")(b,g);var F=b[0];b=b[1];var G=c("useMWV2MediaViewerURL")(g),H=z===!0?"right":"left",I;f[4]!==H||f[5]!==l||f[6]!==q?(I=d("MWXMessageBubbleCornerStyles.react").getMWXBubbleCornerStyles({align:H,connectBottom:l,connectTop:q}),f[4]=H,f[5]=l,f[6]=q,f[7]=I):I=f[7];H=I;if(f[8]!==b){I=(j||(j=d("I64"))).to_float((I=b)!=null?I:(j||(j=d("I64"))).zero);f[8]=b;f[9]=I}else I=f[9];if(f[10]!==F){var J;J=(j||(j=d("I64"))).to_float((J=F)!=null?J:(j||(j=d("I64"))).zero);f[10]=F;f[11]=J}else J=f[11];I=d("useGetMediaGroupStyles").useGetMediaGroupTileImageRatios(s,I,J);J=I.resizeRatio;I=I.scaleRatio;F=F!=null?(j||(j=d("I64"))).to_float(F)*J:void 0;b=b!=null?(j||(j=d("I64"))).to_float(b)*J:void 0;J=J>1;e=s===!1?u:(J===!0?(e=b)!=null?e:0:u)*I;s=s===!1?v:(J?(u=F)!=null?u:0:v)*I;J=c("gkx")("23009");var K=c("useMWV2FocusRowAfterClosingPushView")();v=c("useMWV2MediaViewerShowDialog")((u=y)!=null?u:!0);var L=v[0],M=v[1],N=c("useGetMediaGroupInformation")(x,t===!0,w);I=d("useMWMediaViewerOpenQPLLogger").useMWMediaViewerOpenQPLLogger();var O=I.startFlow;f[12]!==r||f[13]!==g||f[14]!==w?(y=r(g,"MWV2ChatImage",w),f[12]=r,f[13]=g,f[14]=w,f[15]=y):y=f[15];var P=y;f[16]!==P||f[17]!==w||f[18]!==B?(u=function(){P!=null&&P.length>0&&(w==null?void 0:w.addPoint("render-chat-image",{bool:{has_blur:B}}))},v=[w,B,P],f[16]=P,f[17]=w,f[18]=B,f[19]=u,f[20]=v):(u=f[19],v=f[20]);n(u,v);if(P==null||P.length===0){w==null?void 0:w.endFail("empty_preview_url");f[21]!==A||f[22]!==g?(I=A!=null?A(g):null,f[21]=A,f[22]=g,f[23]=I):I=f[23];return I}f[24]!==E||f[25]!==x.authorityLevel||f[26]!==P||f[27]!==G?(r=E&&(j||(j=d("I64"))).gt(x.authorityLevel,(k||(k=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").CLIENT_PARTIAL))?{passthroughProps:{origSrc:P},url:G}:void 0,f[24]=E,f[25]=x.authorityLevel,f[26]=P,f[27]=G,f[28]=r):r=f[28];y=r;f[29]!==D||f[30]!==x||f[31]!==O||f[32]!==t||f[33]!==K||f[34]!==N||f[35]!==E||f[36]!==L||f[37]!==g?(u=function(){var a;d("MWV2LogMessageClick").log(D,x,28);O({attachmentType:"IMAGE",entryPoint:"thread_view",isSecure:(a=t)!=null?a:!1});K(function(){return!0});N!=null&&d("MWPBumpEntityKey").bumpEntityKeyWithAppId("maw.thread","image_group_click_"+N.tileSize+"_tile");if(!E)return L({attachment:g},function(){})},f[29]=D,f[30]=x,f[31]=O,f[32]=t,f[33]=K,f[34]=N,f[35]=E,f[36]=L,f[37]=g,f[38]=u):u=f[38];v=u;f[39]!==x.authorityLevel?(A=(j||(j=d("I64"))).le(x.authorityLevel,(k||(k=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").CLIENT_PARTIAL)),f[39]=x.authorityLevel,f[40]=A):A=f[40];f[41]!==E||f[42]!==M?(I=function(){if(!E)return M()},f[41]=E,f[42]=M,f[43]=I):I=f[43];f[44]===Symbol["for"]("react.memo_cache_sentinel")?(G=c("justknobx")._("2723")&&p.containerMinHeight,f[44]=G):G=f[44];f[45]!==H?(r=[p.container,H,G],f[45]=H,f[46]=r):r=f[46];f[47]!==g.titleText?(u=g.titleText!=null&&J?g.titleText:h._("__JHASH__mrw3CpFXi7r__JHASH__"),f[47]=g.titleText,f[48]=u):u=f[48];f[49]!==u||f[50]!==g||f[51]!==l||f[52]!==q||f[53]!==b||f[54]!==e||f[55]!==s||f[56]!==a||f[57]!==C||f[58]!==z||f[59]!==B||f[60]!==P||f[61]!==F?(G=m.jsx(d("MWPMessageListImage.react").MWPMessageListImage,{alt:u,attachment:g,connectBottom:l,connectTop:q,height:b,maxHeight:e,maxWidth:s,onError:a,onLoad:C,outgoing:z,shouldBlur:B,src:P,width:F}),f[49]=u,f[50]=g,f[51]=l,f[52]=q,f[53]=b,f[54]=e,f[55]=s,f[56]=a,f[57]=C,f[58]=z,f[59]=B,f[60]=P,f[61]=F,f[62]=G):G=f[62];f[63]!==x.authorityLevel||f[64]!==g?(J=(j||(j=d("I64"))).le(x.authorityLevel,(k||(k=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").CLIENT_PARTIAL))?m.jsx(c("MWV2AttachmentProgressBar.react"),{attachment:g}):null,f[63]=x.authorityLevel,f[64]=g,f[65]=J):J=f[65];f[66]!==H?(u=m.jsx(c("MWChatImageInsetShadow.react"),{xstyle:H}),f[66]=H,f[67]=u):u=f[67];f[68]!==g||f[69]!==A||f[70]!==y||f[71]!==w||f[72]!==I||f[73]!==v||f[74]!==r||f[75]!==G||f[76]!==J||f[77]!==u?(l=m.jsxs(c("MWMessageListMediaPressableContainer.react"),{attachment:g,disabled:A,linkProps_:y,mediaRenderQpl:w,onHoverIn:I,onPress:v,testid:void 0,xstyle:r,children:[G,J,u]},g.attachmentFbid),f[68]=g,f[69]=A,f[70]=y,f[71]=w,f[72]=I,f[73]=v,f[74]=r,f[75]=G,f[76]=J,f[77]=u,f[78]=l):l=f[78];return l}g["default"]=a}),226);
__d("MWResponsiveVideo.react",["CometObjectFitContainer.react","CometPlaceholder.react","MWLSThreadDisplayContext","MWPThreadCapabilitiesContext","MWXGlimmer.react","deferredLoadComponent","gkx","justknobx","react","requireDeferredForDisplay","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||(i=d("react"));b=i;var k=b.useEffect;b.useMemo;var l=b.c,m=c("deferredLoadComponent")(c("requireDeferredForDisplay")("MWChatVideoPlayer.react").__setRef("MWResponsiveVideo.react")),n={glimmer:{height:"x5yr21d",position:"x10l6tqk",width:"xh8yej3",$$css:!0},glimmerFallback:{borderBottomEndRadius:"x1gn5b1j",borderBottomStartRadius:"x230xth",borderTopEndRadius:"x1g8br2z",borderTopStartRadius:"x1tlxs6b",display:"x78zum5",height:"x5yr21d",overflowX:"x6ikm8r",overflowY:"x10wlt62",position:"x10l6tqk",width:"xh8yej3",$$css:!0}};function o(a){return[a==="Inbox"?240:180,140]}function a(a){var b=l(34),e=a.autoPlaySetting,f=a.connectTopStyles,g=a.errorBoundaryFallback,i=a.fbid,p=a.height,q=a.loops,r=a.maxHeight,s=a.maxWidth,t=a.mediaRenderQpl,u=a.shouldForcePauseOnClick,v=a.src;a=a.width;var w=d("MWLSThreadDisplayContext").useMWLSThreadDisplayContext(),x=a!=null?p!=null?[a,p]:[500,300]:[500,300];x=x[0]/x[1];x=x;var y=d("MWPThreadCapabilitiesContext").useMWPThreadCapabilitiesContext();y=y.hasLSThreadBitOffset;y=c("gkx")("24098")&&y(46);w=o(w);if(c("justknobx")._("1704")===!0){var z;z=Math.min((z=a)!=null?z:500,s,r*x).toString()+"px"}else{var A;z=Math.min((A=a)!=null?A:500,s).toString()+"px"}A=r.toString()+"px";s=y?w[1].toString(10)+"px":"";r=y?w[0].toString(10)+"px":"";b[0]!==A||b[1]!==s||b[2]!==r||b[3]!==z?(w={maxHeight:A,minHeight:s,minWidth:r,width:z},b[0]=A,b[1]=s,b[2]=r,b[3]=z,b[4]=w):w=b[4];A=w;s=A;b[5]!==t?(r=function(){t==null?void 0:t.addPoint("render-responsive-video")},z=[t],b[5]=t,b[6]=r,b[7]=z):(r=b[6],z=b[7]);k(r,z);b[8]===Symbol["for"]("react.memo_cache_sentinel")?(w="x193iq5w x11md1zd x450l9j x6ikm8r x10wlt62 x1n2onr6",b[8]=w):w=b[8];b[9]===Symbol["for"]("react.memo_cache_sentinel")?(A="x1ey2m1c xds687c x17qophe x10l6tqk x13vifvy x1vjfegm",b[9]=A):A=b[9];b[10]!==f?(r=(h||(h=c("stylex")))(n.glimmerFallback,f),b[10]=f,b[11]=r):r=b[11];b[12]===Symbol["for"]("react.memo_cache_sentinel")?(z=j.jsx(c("MWXGlimmer.react"),{index:0,xstyle:n.glimmer}),b[12]=z):z=b[12];b[13]!==r?(f=j.jsx("div",{className:r,children:z}),b[13]=r,b[14]=f):f=b[14];z=y?"off":e;r=q===!0?-1:0;e=(y=p)!=null?y:300;p=(q=a)!=null?q:500;b[15]!==z||b[16]!==g||b[17]!==i||b[18]!==r||b[19]!==t||b[20]!==e||b[21]!==p||b[22]!==v||b[23]!==u?(y=j.jsx(m,{autoPlaySetting:z,controls:"mwchat",errorBoundaryFallback:g,fbid:i,hideExpandButton:!0,loopCount:r,mediaRenderQpl:t,originalHeight:e,originalWidth:p,sdSrc:v,shouldForcePauseOnClick:u}),b[15]=z,b[16]=g,b[17]=i,b[18]=r,b[19]=t,b[20]=e,b[21]=p,b[22]=v,b[23]=u,b[24]=y):y=b[24];b[25]!==f||b[26]!==y?(a=j.jsx("div",{className:A,children:j.jsx(c("CometPlaceholder.react"),{fallback:f,name:"MWResponsiveVideo",children:y})}),b[25]=f,b[26]=y,b[27]=a):a=b[27];b[28]!==x?(q=j.jsx(c("CometObjectFitContainer.react"),{contentAspectRatio:x,objectFitMode:"CONTAINER_WIDTH_BASED_ASPECT_RATIO",children:null}),b[28]=x,b[29]=q):q=b[29];b[30]!==s||b[31]!==a||b[32]!==q?(z=j.jsxs("div",{className:w,style:s,children:[a,q]}),b[30]=s,b[31]=a,b[32]=q,b[33]=z):z=b[33];return z}g["default"]=a}),98);
__d("MWV2ChatVideo.react",["fbt","I64","LSAuthorityLevel","LSIntEnum","MWChatImageInsetShadow.react","MWLSThreadDisplayContext","MWMessageListMediaPressableContainer.react","MWResponsiveVideo.react","MWV2AttachmentProgressBar.react","MWV2LogMessageClick","MWVideoPlayerControllerContext.react","MWXGlimmer.react","MWXMessageBubbleCornerStyles.react","getVideoPlayerUserFacingErrorMessageFromError","gkx","react","recoverableViolation","useCometRouterDispatcher","useMWMediaViewerOpenQPLLogger","useMWV2FocusRowAfterClosingPushView","useMWV2MediaViewerShowDialog","useMWV2MediaViewerURL","useReStore"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l,m=l||(l=d("react"));b=l;var n=b.useContext,o=b.useEffect;b.useMemo;var p=b.useRef,q=b.c,r={glimmer:{height:"xpyat2d",marginTop:"x1gslohp",width:"x1oysuqx",$$css:!0},root:{backfaceVisibility:"xlp1x4z",backgroundColor:"x1eb86dx",display:"x1lliihq",maxWidth:"x193iq5w",overflowX:"x6ikm8r",overflowY:"x10wlt62",position:"x1n2onr6",$$css:!0}};function s(a){var b=q(70),e=a.attachment,f=a.autoPlaySetting,g=a.connectTop,l=a.getPlayableUrl,p=a.isSecure,s=a.loops,t=a.mediaRenderQpl,u=a.message,v=a.navigateToRouteForMediaViewer,w=a.outgoing,x=a.renderUnsupportedAttachment,y=v===void 0?!0:v,z=(i||(i=c("useReStore")))(),A=c("useCometRouterDispatcher")(),B=c("useMWV2MediaViewerURL")(e);a=w?"right":"left";b[0]!==a||b[1]!==g?(v=d("MWXMessageBubbleCornerStyles.react").getMWXBubbleCornerStyles({align:a,connectTop:g}),b[0]=a,b[1]=g,b[2]=v):v=b[2];w=v;var C=c("useMWV2FocusRowAfterClosingPushView")();a=d("MWLSThreadDisplayContext").useMWLSThreadDisplayContext();g=c("useMWV2MediaViewerShowDialog")(y);var D=g[0],E=g[1],F=n(c("MWVideoPlayerControllerContext.react"));b[3]!==l||b[4]!==e||b[5]!==t?(v=l(e,"MWV2ChatVideoInner",t),b[3]=l,b[4]=e,b[5]=t,b[6]=v):v=b[6];var G=v,H=d("useMWMediaViewerOpenQPLLogger").useMWMediaViewerOpenQPLLogger();b[7]!==t||b[8]!==G?(g=function(){t==null?void 0:t.addPoint("render-chat-video",{bool:{has_url:Boolean(G)}})},l=[t,G],b[7]=t,b[8]=G,b[9]=g,b[10]=l):(g=b[9],l=b[10]);o(g,l);if(G==null||G===""){t==null?void 0:t.endFail("empty_preview_url");b[11]!==x||b[12]!==e?(v=x!=null?x(e):null,b[11]=x,b[12]=e,b[13]=v):v=b[13];return v}if((e==null?void 0:e.playableUrlMimeType)==="video/x-ms-wmv"&&!(j||(j=d("I64"))).equal(u.sendStatusV2,(k||(k=d("LSIntEnum"))).ofNumber(2))){b[14]!==w?(g=m.jsx(c("MWXGlimmer.react"),{index:1,xstyle:[w,r.glimmer]}),b[14]=w,b[15]=g):g=b[15];return g}l=e.previewHeight;v=e.previewWidth;b[16]===Symbol["for"]("react.memo_cache_sentinel")?(g=h._("__JHASH__Sk-r4mWi0bD__JHASH__"),b[16]=g):g=b[16];var I;b[17]!==u.authorityLevel?(I=(j||(j=d("I64"))).le(u.authorityLevel,(k||(k=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").CLIENT_PARTIAL)),b[17]=u.authorityLevel,b[18]=I):I=b[18];var J;b[19]!==y||b[20]!==E?(J=function(){if(!y)return E()},b[19]=y,b[20]=E,b[21]=J):J=b[21];var K;b[22]!==z||b[23]!==u||b[24]!==H||b[25]!==p||b[26]!==C||b[27]!==y||b[28]!==D||b[29]!==e||b[30]!==F||b[31]!==A||b[32]!==B||b[33]!==G?(K=function(){var a;d("MWV2LogMessageClick").log(z,u,27);H.startFlow({attachmentType:"VIDEO",entryPoint:"thread_view",isSecure:(a=p)!=null?a:!1});C(function(){return!0});if(!y)return D({attachment:e},function(){});a=F.ref.current;if(a){var b=a.getCurrentState();b=b.volume;var f=a.getPlayheadPosition();A==null?void 0:A.go(B,{passthroughProps:{origSrc:G,startTimestamp:f,volumeSetting:b}});a.setMuted(!0,"product_initiated")}else c("recoverableViolation")("Missing controller","messenger_web_media",void 0,{trackOnly:!0})},b[22]=z,b[23]=u,b[24]=H,b[25]=p,b[26]=C,b[27]=y,b[28]=D,b[29]=e,b[30]=F,b[31]=A,b[32]=B,b[33]=G,b[34]=K):K=b[34];var L;b[35]!==w?(L=[r.root,w],b[35]=w,b[36]=L):L=b[36];var M;b[37]!==x||b[38]!==e?(M=x!=null&&c("gkx")("5619")?function(a){return x(e,a!=null?(a=c("getVideoPlayerUserFacingErrorMessageFromError")(a))!=null?a:void 0:void 0)}:void 0,b[37]=x,b[38]=e,b[39]=M):M=b[39];var N;b[40]!==l?(N=l!=null?(j||(j=d("I64"))).to_float(l):void 0,b[40]=l,b[41]=N):N=b[41];l=a==="Inbox"?500:167;b[42]!==v?(a=v!=null?(j||(j=d("I64"))).to_float(v):void 0,b[42]=v,b[43]=a):a=b[43];b[44]!==f||b[45]!==w||b[46]!==M||b[47]!==e.attachmentFbid||b[48]!==N||b[49]!==s||b[50]!==l||b[51]!==t||b[52]!==G||b[53]!==a?(v=m.jsx(c("MWResponsiveVideo.react"),{autoPlaySetting:f,connectTopStyles:w,errorBoundaryFallback:M,fbid:e.attachmentFbid,height:N,loops:s,maxHeight:200,maxWidth:l,mediaRenderQpl:t,shouldForcePauseOnClick:!0,src:G,width:a}),b[44]=f,b[45]=w,b[46]=M,b[47]=e.attachmentFbid,b[48]=N,b[49]=s,b[50]=l,b[51]=t,b[52]=G,b[53]=a,b[54]=v):v=b[54];b[55]!==u.authorityLevel||b[56]!==e?(f=(j||(j=d("I64"))).le(u.authorityLevel,(k||(k=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").CLIENT_PARTIAL))?m.jsx(c("MWV2AttachmentProgressBar.react"),{attachment:e}):null,b[55]=u.authorityLevel,b[56]=e,b[57]=f):f=b[57];b[58]!==w?(M=m.jsx(c("MWChatImageInsetShadow.react"),{xstyle:w}),b[58]=w,b[59]=M):M=b[59];b[60]!==e||b[61]!==I||b[62]!==t||b[63]!==J||b[64]!==K||b[65]!==L||b[66]!==v||b[67]!==f||b[68]!==M?(N=m.jsxs(c("MWMessageListMediaPressableContainer.react"),{ariaLabel:g,attachment:e,disabled:I,mediaRenderQpl:t,onHoverIn:J,onPress:K,overlayDisabled:!0,testid:void 0,xstyle:L,children:[v,f,M]}),b[60]=e,b[61]=I,b[62]=t,b[63]=J,b[64]=K,b[65]=L,b[66]=v,b[67]=f,b[68]=M,b[69]=N):N=b[69];return N}function a(a){var b=q(3),d=p(null);b[0]===Symbol["for"]("react.memo_cache_sentinel")?(d={ref:d},b[0]=d):d=b[0];d=d;d=d;b[1]!==a?(d=m.jsx(c("MWVideoPlayerControllerContext.react").Provider,{value:d,children:m.jsx(s,babelHelpers["extends"]({},a))}),b[1]=a,b[2]=d):d=b[2];return d}g["default"]=a}),226);
__d("MWV2ChatEmojiHotLike.react",["LSHotEmojiSize","MessengerHotLikeSVGReact.bs","gkx","react","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=(i||(i=d("react"))).c,k=i,l={largeHotLike:{height:"x1wkxgih",width:"xygnafs",$$css:!0},likePreview:{display:"x78zum5","float":"x1guec7k",height:"x1dnml7z",width:"x7tvc40",$$css:!0},likePreviewV2:{display:"x78zum5",height:"xsdox4t",paddingTop:"x1yrsyyn",paddingBottom:"x10b6aqq",width:"x1useyqa",$$css:!0},mediumHotLike:{height:"x1to3lk4",width:"xjzaux3",$$css:!0},noCustomLikePreview:{display:"x78zum5",justifyContent:"xl56j7k",$$css:!0}};function a(a){var b=j(6),e=a.hotEmojiSize;a=a.xstyle;var f;b[0]!==e||b[1]!==a?(f=(h||(h=c("stylex")))([!c("gkx")("23249")&&c("gkx")("2539")?[l.likePreviewV2,e===c("LSHotEmojiSize").MEDIUM&&l.mediumHotLike,e===c("LSHotEmojiSize").LARGE&&l.largeHotLike]:[l.likePreview,l.noCustomLikePreview],a]),b[0]=e,b[1]=a,b[2]=f):f=b[2];b[3]===Symbol["for"]("react.memo_cache_sentinel")?(e=k.jsx(d("MessengerHotLikeSVGReact.bs").MessengerHotLikeSVGReact,{color:"var(--mwp-primary-theme-color)"}),b[3]=e):e=b[3];b[4]!==f?(a=k.jsx("div",{"aria-label":"Like, thumbs up",className:f,role:"img",children:e}),b[4]=f,b[5]=a):a=b[5];return a}g["default"]=a}),98);
__d("getMWHotlikeSizeFromStickerId",["LSHotEmojiSize","StickerConstants"],(function(a,b,c,d,e,f,g){"use strict";var h=(b={},b[c("StickerConstants").HOT_LIKE_SMALL_STICKER_ID]=c("LSHotEmojiSize").SMALL,b[c("StickerConstants").HOT_LIKE_MEDIUM_STICKER_ID]=c("LSHotEmojiSize").MEDIUM,b[c("StickerConstants").HOT_LIKE_LARGE_STICKER_ID]=c("LSHotEmojiSize").LARGE,b);function a(a){return(a=h[a])!=null?a:c("LSHotEmojiSize").NONE}g["default"]=a}),98);
__d("getMWIsDefaultHotlikeStickerId",["StickerConstants"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return a===c("StickerConstants").HOT_LIKE_SMALL_STICKER_ID||a===c("StickerConstants").HOT_LIKE_MEDIUM_STICKER_ID||a===c("StickerConstants").HOT_LIKE_LARGE_STICKER_ID}g["default"]=a}),98);
__d("MWV2Sticker.react",["I64","MWChatImageSize","MWLSThreadDisplayContext","MWV2ChatEmojiHotLike.react","Sticker.react","getMWHotlikeSizeFromStickerId","getMWIsDefaultHotlikeStickerId","gkx","react","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=i||(i=d("react"));b=i;var l=b.useEffect;b.useMemo;var m=b.c;function n(a){var b=d("MWLSThreadDisplayContext").useMWLSThreadDisplayContext();b=b!=null?b==="Inbox"?.75:.5:.5;a<60?a=1:a=b;return a}function a(a){var b,e=m(33),f=a.attachment,g=a.getPreviewUrl,i=a.mediaRenderQpl,o=a.renderUnsupportedAttachment,p=a.scale;a=a.xstyle;var q;e[0]!==g||e[1]!==f||e[2]!==i?(q=g(f,"MWV2Sticker",i),e[0]=g,e[1]=f,e[2]=i,e[3]=q):q=e[3];var r=q;e[4]!==f.previewHeight?(g=f.previewHeight!=null?(j||(j=d("I64"))).to_int32(f.previewHeight):void 0,e[4]=f.previewHeight,e[5]=g):g=e[5];q=g;e[6]!==f.previewWidth?(g=f.previewWidth!=null?(j||(j=d("I64"))).to_int32(f.previewWidth):void 0,e[6]=f.previewWidth,e[7]=g):g=e[7];g=g;b=n((b=q)!=null?b:120);var s=g!=null&&q!=null;s=d("MWChatImageSize").useImageSize(r,s);var t;e[8]!==g||e[9]!==q||e[10]!==s?(t=g!=null&&q!=null?[g,q]:s!=null?[s.width,s.height]:[24,24],e[8]=g,e[9]=q,e[10]=s,e[11]=t):t=e[11];g=t;q=g[0];s=g[1];e[12]!==r||e[13]!==i?(t=function(){r==null||r.length===0?i==null?void 0:i.endFail("load-image-error"):(i==null?void 0:i.addPoint("render-sticker"),i==null?void 0:i.endSuccess())},g=[r,i],e[12]=r,e[13]=i,e[14]=t,e[15]=g):(t=e[14],g=e[15]);l(t,g);if(c("getMWIsDefaultHotlikeStickerId")(f.attachmentFbid)&&!c("gkx")("23249")&&c("gkx")("2539")){e[16]!==f.attachmentFbid?(t=c("getMWHotlikeSizeFromStickerId")(f.attachmentFbid),e[16]=f.attachmentFbid,e[17]=t):t=e[17];e[18]!==t?(g=k.jsx(c("MWV2ChatEmojiHotLike.react"),{hotEmojiSize:t}),e[18]=t,e[19]=g):g=e[19];return g}if(r==null||r.length===0){e[20]!==o||e[21]!==f?(t=o!=null?o(f):null,e[20]=o,e[21]=f,e[22]=t):t=e[22];return t}o=(g=f.accessibilitySummaryText)!=null?g:"";e[23]!==a?(t=(h||(h=c("stylex")))(a),e[23]=a,e[24]=t):t=e[24];a=(g=p)!=null?g:b;e[25]!==o||e[26]!==t||e[27]!==a||e[28]!==s||e[29]!==r||e[30]!==q||e[31]!==f.attachmentFbid?(p=k.jsx(c("Sticker.react"),{accessibilityLabel:o,animationTrigger:"load_and_hover",className:t,customColor:"var(--chat-composer-button-color)",enablePopoverIfPassesGK:!0,frameCount:0,frameRate:void 0,framesPerCol:0,framesPerRow:0,packID:void 0,paddedSpriteURI:void 0,scale:a,sourceHeight:s,sourceURI:r,sourceWidth:q,spriteURI:void 0,stickerID:f.attachmentFbid,tabIndex:-1,testid:void 0}),e[25]=o,e[26]=t,e[27]=a,e[28]=s,e[29]=r,e[30]=q,e[31]=f.attachmentFbid,e[32]=p):p=e[32];return p}g["default"]=a}),98);
__d("MWV2TombstonedMessage.react",["MWXMessageBubble.react","MWXMessageBubbleCornerStyles.react","MWXText.react","gkx","react","react-strict-dom"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;var j=b.useEffect,k=b.c,l={incoming:{color:"x18lvrbx",$$css:!0},message:{fontStyle:"x1k4tb9n",marginBottom:"x12nagc",marginTop:"x1gslohp",opacity:"x1ks1olk",$$css:!0},outgoing:{color:"xyk4ms5",$$css:!0},root:{borderTopColor:"x2z21go",borderEndColor:"x7glw7h",borderBottomColor:"xytfwv8",borderStartColor:"x1c7a9eh",borderTopStyle:"x13fuv20",borderEndStyle:"xu3j5b3",borderBottomStyle:"x1q0q8m5",borderStartStyle:"x26u7qi",borderTopWidth:"x178xt8z",borderEndWidth:"xm81vs4",borderBottomWidth:"xso031l",borderStartWidth:"xy80clv",maxWidth:"x193iq5w",paddingTop:"x1y1aw1k",paddingEnd:"xn6708d",paddingBottom:"xwib8y2",paddingStart:"x1ye3gou",wordBreak:"x13faqbe",$$css:!0}};function a(a){var b=k(12),e=a.children,f=a.connectBottom,g=a.connectTop,h=a.isOutgoing,m=a.isReply,n=a.mediaRenderQpl;a=a.xstyle;f=f===void 0?!1:f;g=g===void 0?!1:g;var o,p;b[0]!==n?(o=function(){n==null?void 0:n.addPoint("render-tombstoned-message",{bool:{has_preview:!1}}),n==null?void 0:n.endSuccess()},p=[n],b[0]=n,b[1]=o,b[2]=p):(o=b[1],p=b[2]);j(o,p);b[3]!==f||b[4]!==g?(o=d("MWXMessageBubbleCornerStyles.react").getMWXBubbleCornerStyles({connectBottom:f,connectTop:g}),b[3]=f,b[4]=g,b[5]=o):o=b[5];p=o;b[6]!==h||b[7]!==a||b[8]!==e||b[9]!==m||b[10]!==p?(f=c("gkx")("4809")?i.jsx(c("MWXMessageBubble.react"),{align:"right",children:i.jsx(c("MWXText.react"),{color:h?"white":"primary",type:"body3",children:i.jsx(d("react-strict-dom").html.div,{dir:"auto",style:[l.message,h?l.outgoing:l.incoming,a],children:e})}),color:m===!0?"quoted":h?"outgoing":"incoming",connectBottom:!1,connectTop:!1,testid:void 0,variant:"opaque"}):i.jsx(d("react-strict-dom").html.div,{"data-testid":void 0,style:[l.root,p,a],children:i.jsx(c("MWXText.react"),{color:"disabled",type:"body3",children:i.jsx(d("react-strict-dom").html.div,{style:l.message,children:e})})}),b[6]=h,b[7]=a,b[8]=e,b[9]=m,b[10]=p,b[11]=f):f=b[11];return f}g["default"]=a}),98);
__d("MWMessageListAttachment.react",["fbt","LSMediaUrlAttachment","MWLSThreadDisplayContext","MWMessageListImageSizingUtils","MWV2ChatImage.react","MWV2ChatVideo.react","MWV2Sticker.react","MWV2TombstonedMessage.react","cr:5622","gkx","react","recoverableViolation","stylex"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=j||(j=d("react")),l=j;l.useCallback;var m=l.c;function a(a){var b=m(8),d=a.isOutgoing;a=a.xstyle;var e;b[0]!==a?(e=(i||(i=c("stylex")))(a),b[0]=a,b[1]=e):e=b[1];b[2]===Symbol["for"]("react.memo_cache_sentinel")?(a=h._("__JHASH__962PS6SI-P2__JHASH__"),b[2]=a):a=b[2];b[3]!==d?(a=k.jsx(c("MWV2TombstonedMessage.react"),{isOutgoing:d,children:a}),b[3]=d,b[4]=a):a=b[4];b[5]!==e||b[6]!==a?(d=k.jsx("div",{className:e,children:a}),b[5]=e,b[6]=a,b[7]=d):d=b[7];return d}function e(a){var b=m(7),d=a.attachment,e=a.connectTop,f=a.mediaRenderQpl,g=a.message,h=a.navigateToRouteForMediaViewer;a=a.outgoing;var i=n;b[0]!==d||b[1]!==e||b[2]!==f||b[3]!==g||b[4]!==h||b[5]!==a?(i=k.jsx(c("MWV2ChatVideo.react"),{attachment:d,autoPlaySetting:c("gkx")("7350")?"off":void 0,connectTop:e,getPlayableUrl:i,loops:!c("gkx")("7350"),mediaRenderQpl:f,message:g,navigateToRouteForMediaViewer:h,outgoing:a}),b[0]=d,b[1]=e,b[2]=f,b[3]=g,b[4]=h,b[5]=a,b[6]=i):i=b[6];return i}function n(a){return d("LSMediaUrlAttachment").playableUrl(a)}function f(a){var c=m(8),d=a.attachment,e=a.connectBottom,f=a.connectTop,g=a.isReply,h=a.mediaRenderQpl,i=a.message;a=a.outgoing;var j=o;c[0]!==d||c[1]!==e||c[2]!==f||c[3]!==g||c[4]!==h||c[5]!==i||c[6]!==a?(j=k.jsx(b("cr:5622"),{attachment:d,connectBottom:e,connectTop:f,getPlayableUrl:j,isReply:g,isSecure:!1,mediaRenderQpl:h,message:i,outgoing:a}),c[0]=d,c[1]=e,c[2]=f,c[3]=g,c[4]=h,c[5]=i,c[6]=a,c[7]=j):j=c[7];return j}function o(a){return d("LSMediaUrlAttachment").playableUrl(a)}function p(a){var b,e=m(16),f=a.attachment,g=a.connectBottom,h=a.connectTop,i=a.mediaRenderQpl,j=a.message,l=a.navigateToRouteForMediaViewer,n=a.outgoing;a=a.renderUnsupportedAttachment;var o=d("MWLSThreadDisplayContext").useMWLSThreadDisplayContext(),p;e[0]!==o?(p=function(a){var b=a.previewUrlLarge;return b!=null&&o==="Inbox"?b:d("LSMediaUrlAttachment").previewUrl(a)},e[0]=o,e[1]=p):p=e[1];p=p;b=(b=o)!=null?b:void 0;var q;e[2]!==b?(q=d("MWMessageListImageSizingUtils").getMaxPreviewHeightAndWidth(!1,b,!1),e[2]=b,e[3]=q):q=e[3];b=q;q=b.maxHeight;b=b.maxWidth;var r;e[4]!==f||e[5]!==g||e[6]!==h||e[7]!==p||e[8]!==q||e[9]!==b||e[10]!==i||e[11]!==j||e[12]!==l||e[13]!==n||e[14]!==a?(r=k.jsx(c("MWV2ChatImage.react"),{attachment:f,connectBottom:g,connectTop:h,getPreviewUrl:p,maxHeight:q,maxWidth:b,mediaRenderQpl:i,message:j,navigateToRouteForMediaViewer:l,outgoing:n,renderUnsupportedAttachment:a}),e[4]=f,e[5]=g,e[6]=h,e[7]=p,e[8]=q,e[9]=b,e[10]=i,e[11]=j,e[12]=l,e[13]=n,e[14]=a,e[15]=r):r=e[15];return r}function q(a){var b=m(3),d=a.attachment;a=a.mediaRenderQpl;var e=r;b[0]!==d||b[1]!==a?(e=k.jsx(c("MWV2Sticker.react"),{attachment:d,getPreviewUrl:e,mediaRenderQpl:a}),b[0]=d,b[1]=a,b[2]=e):e=b[2];return e}function r(a){var b;b=(b=d("LSMediaUrlAttachment").playableUrl(a))!=null?b:d("LSMediaUrlAttachment").previewUrl(a);if(b!=null)return b;c("recoverableViolation")("Sticker Attachment has no preview_url or playable_url: "+a.attachmentFbid,"messenger_web_media")}g.MWMessageListAttachmentError=a;g.MWMessageListAttachmentVideo=e;g.MWMessageListAttachmentAudio=f;g.MWMessageListAttachmentImage=p;g.MWMessageListAttachmentSticker=q}),226);
__d("MWPMessageHasXMA",["I64","LSIntEnum"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a){return[(h||(h=d("I64"))).and_((i||(i=d("LSIntEnum"))).ofNumber(1024),a.displayedContentTypes),h.and_(i.ofNumber(2048),a.displayedContentTypes),h.and_(i.ofNumber(536870912),a.displayedContentTypes)].some(function(a){return(h||(h=d("I64"))).to_int32(a)!==0})}g["default"]=a}),98);
__d("mwpMessageIsReply",["LSIntEnum","LSMessageReplySourceTypeV2"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){return a.replySourceTypeV2!=null&&(h||(h=d("LSIntEnum"))).toNumber(a.replySourceTypeV2)!==c("LSMessageReplySourceTypeV2").FORWARD}g["default"]=a}),98);
__d("mwpMessageWithAttachmentHasPoll",["I64","LSIntEnum"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a){return(h||(h=d("I64"))).to_int32(h.and_((i||(i=d("LSIntEnum"))).ofNumber(32),a.displayedContentTypes))!==0}g["default"]=a}),98);
__d("MWPMessageListAttachmentContainer.react",["MWPMessageHasXMA","MWPMessageListColumn.react","mwpMessageIsReply","mwpMessageWithAttachmentHasPoll","react","react-strict-dom","xmaLayouts"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react"),j={container:{maxWidth:"x193iq5w",position:"x1n2onr6",zIndex:"x1vjfegm",$$css:!0},container_for_poll:{alignItems:"x6s0dn4",display:"x78zum5",flexDirection:"xdt5ytf",width:"xh8yej3",$$css:!0},container_for_top_margin:{marginTop:"x1gslohp",$$css:!0},container_for_xma:{width:"xh8yej3",$$css:!0},vr:{backgroundColor:"x1eb86dx",height:"x36qwtl",width:"xh8yej3",$$css:!0}};function a(a){var b=a.children,e=a.connectTop,f=a.hasTopMargin;f=f===void 0?!1:f;var g=a.message;a.outgoing;var h=a.paint;h=h===void 0?!0:h;var k=a.renderEmphasisRing,l=a.xmaLayout;a=a.xstyle;var m=c("MWPMessageHasXMA")(g),n=c("mwpMessageIsReply")(g),o=c("mwpMessageWithAttachmentHasPoll")(g);g=g.text;g=g!=null?g!=="":!1;o=i.jsx(d("react-strict-dom").html.div,{"data-testid":void 0,style:[j.container,m?j.container_for_xma:!1,o?j.container_for_poll:!1,f?j.container_for_top_margin:!1,a!==null?a:!1],children:b});return i.jsxs(i.Fragment,{children:[e&&(l===d("xmaLayouts").XMA_LAYOUTS.UNIFIED_LAYOUT||!m||!g)?i.jsx(d("react-strict-dom").html.div,{style:j.vr}):null,i.jsx(d("MWPMessageListColumn.react").MWPMessageListColumnShrinkwrap,{paint:!n&&h,children:k!=null?k(m,o):o})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWSearchPluginUtils",["isStringNullOrEmpty","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).c;function a(a){var b=i(15),c,d,e,f,g,h,j;if(b[0]!==a){j=Symbol["for"]("react.early_return_sentinel");bb0:{var k;k=(k=a==null?void 0:(k=a.split("?")[1])==null?void 0:k.split("&"))!=null?k:[];if(k.length===0){j=null;break bb0}g=[];f=[];h=[];d="";e="";c="";k.forEach(function(a){a=a.split("=");var b=a[0];a=a[1];var i=decodeURIComponent(a);b.includes("source_titles")&&g.push(i.replaceAll("+"," "));b.includes("source_sub_titles")&&f.push(i.replaceAll("+"," "));b.includes("source_urls")&&h.push(i);b==="source_query"&&(d=a==null?"":i.replaceAll("+"," "));b==="source_query_url"&&(e=i);b==="header"&&(c=i)})}b[0]=a;b[1]=c;b[2]=d;b[3]=e;b[4]=f;b[5]=g;b[6]=h;b[7]=j}else c=b[1],d=b[2],e=b[3],f=b[4],g=b[5],h=b[6],j=b[7];if(j!==Symbol["for"]("react.early_return_sentinel"))return j;k=c;a=d;j=e;var l;b[8]!==k||b[9]!==a||b[10]!==j||b[11]!==f||b[12]!==g||b[13]!==h?(l={header:k,source_query:a,source_query_url:j,source_sub_titles:f,source_titles:g,source_urls:h},b[8]=k,b[9]=a,b[10]=j,b[11]=f,b[12]=g,b[13]=h,b[14]=l):l=b[14];return l}function b(a){if(a.cta1Type==="xma_gen_ai_search_plugin_response_search_engine_attribution"&&a.cta2Type==="xma_gen_ai_search_plugin_response_sources")return!0;return j(a)?!0:!1}function e(a){return a.cta1Type==="xma_gen_ai_search_plugin_response_sources"}function j(a){return a.cta1Type==="xma_gen_ai_search_plugin_response_sources"&&c("isStringNullOrEmpty")(a.headerTitle)}g.useSearchPluginSources=a;g.isSearchPlugin=b;g.isSearchSingleBubblePlugin=e;g.isSearchPluginWithoutAttributionLink=j}),98);
__d("useMWPGetAttachmentCTA",["I64","ReQL","ReQLSuspense","react","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=(j||d("react")).c;function a(a){var b=k(6),e=(h||(h=c("useReStore")))(),g;b[0]!==e.tables.attachment_ctas||b[1]!==a?(g=function(){var b;return d("ReQL").fromTableAscending(e.tables.attachment_ctas).getKeyRange((b=a)!=null?b:(i||(i=d("I64"))).zero)},b[0]=e.tables.attachment_ctas,b[1]=a,b[2]=g):g=b[2];var j;b[3]!==e||b[4]!==a?(j=[e,a],b[3]=e,b[4]=a,b[5]=j):j=b[5];return d("ReQLSuspense").useFirst(g,j,f.id+":23")}g["default"]=a}),98);
__d("useMWPGetAttachments",["I64","ReQL","ReQLSuspense","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a){var b=(i||(i=c("useReStore")))(),e=a.messageId,g=a.threadKey;return d("ReQLSuspense").useArray(function(){return d("ReQL").fromTableAscending(b.tables.attachments).getKeyRange(g,e)},[b,e,g],f.id+":25").sort(function(a,b){return(h||(h=d("I64"))).compare(a.attachmentIndex,b.attachmentIndex)})}g["default"]=a}),98);
__d("MWPMessageListAttachment.react",["I64","LSIntEnum","MWPMessageListAttachmentContainer.react","MWPThreadCapabilitiesContext","MWSearchPluginUtils","MWVerticalRhythm","MessagingAttachmentType","gkx","isMWBumpMessage","react","useMWPGetAttachmentCTA","useMWPGetAttachments","xmaLayouts"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=h||(h=d("react"));b=h;var l=b.useEffect,m=b.c;function n(a){return(i||(i=d("I64"))).equal(a.attachmentType,(j||(j=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").IMAGE))}function a(a){var b=m(67),e=a.connectBottom,f=a.connectTop,g=a.mediaRenderQpl,h=a.message,o=a.renderAudioAttachment,p=a.renderEmphasisRing,q=a.renderEphemeralMediaAttachment,r=a.renderFileAttachment,s=a.renderImageAttachment,t=a.renderImageGrid,u=a.renderMultipleAttachments,v=a.renderStickerAttachment,w=a.renderUnsupportedAttachment,x=a.renderUnsupportedMultipleAttachments,y=a.renderVideoAttachment,z=a.renderWrapper,A=a.renderXMAAttachment;a=a.xmaLayout;var B=a===void 0?d("xmaLayouts").XMA_LAYOUTS.DEFAULT:a,C=c("useMWPGetAttachments")(h);a=c("useMWPGetAttachmentCTA")(C.length>0?C[0].attachmentCta1Id:null);var D;b[0]!==C?(D=C.length>0?d("MWSearchPluginUtils").isSearchSingleBubblePlugin(C[0]):!1,b[0]=C,b[1]=D):D=b[1];D=D;var E=d("MWPThreadCapabilitiesContext").useMWPThreadCapabilitiesContext();E=E.blurMediaEnabled;E=c("gkx")("24098")&&E;var F=C.length>0?C[0]:null,G,H;b[2]!==F||b[3]!==g?(G=function(){F!=null?(g==null?void 0:g.addAttachmentAnnotations==null?void 0:g.addAttachmentAnnotations(F),g==null?void 0:g.addPoint("render-message-list-attachment")):g==null?void 0:g.addPoint("missing-message-list-attachment")},H=[F,g],b[2]=F,b[3]=g,b[4]=G,b[5]=H):(G=b[4],H=b[5]);l(G,H);if(c("isMWBumpMessage")(h))return null;if(C.length!==1)if(C.length>1&&C.every(n))if(E){if(b[6]!==f||b[7]!==h||b[8]!==p||b[9]!==B||b[10]!==s||b[11]!==C||b[12]!==w){b[14]!==f||b[15]!==h||b[16]!==p||b[17]!==B||b[18]!==s||b[19]!==C.length||b[20]!==w?(G=function(a,b){return k.jsxs(k.Fragment,{children:[b!==0?k.jsx(c("MWVerticalRhythm"),{height:2}):null,k.jsx(c("MWPMessageListAttachmentContainer.react"),{connectTop:f,message:h,renderEmphasisRing:p,xmaLayout:B,children:s(a,b!==0,b!==C.length-1,w)})]},a.attachmentFbid)},b[14]=f,b[15]=h,b[16]=p,b[17]=B,b[18]=s,b[19]=C.length,b[20]=w,b[21]=G):G=b[21];H=C.map(G);b[6]=f;b[7]=h;b[8]=p;b[9]=B;b[10]=s;b[11]=C;b[12]=w;b[13]=H}else H=b[13];E=H}else{b[22]!==t||b[23]!==C?(G=t(C),b[22]=t,b[23]=C,b[24]=G):G=b[24];b[25]!==f||b[26]!==h||b[27]!==p||b[28]!==B||b[29]!==G?(H=k.jsx(c("MWPMessageListAttachmentContainer.react"),{connectTop:f,message:h,renderEmphasisRing:p,xmaLayout:B,children:G}),b[25]=f,b[26]=h,b[27]=p,b[28]=B,b[29]=G,b[30]=H):H=b[30];E=H}else{if(C.length>1){b[31]!==u||b[32]!==C?(t=u==null?void 0:u(C),b[31]=u,b[32]=C,b[33]=t):t=b[33];E=t;if(E!=null)return E}b[34]!==x||b[35]!==C?(G=x!=null?x(C):void 0,b[34]=x,b[35]=C,b[36]=G):G=b[36];E=G}else{var I=C[0];H=I.attachmentType;u=!(i||(i=d("I64"))).equal(H,(j||(j=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").AUDIO));t=I.attachmentType;b[37]!==g||b[38]!==w||b[39]!==I?(x=function(){g==null?void 0:g.endSuccess();return w(I)},b[37]=g,b[38]=w,b[39]=I,b[40]=x):x=b[40];G=x;b[41]!==t||b[42]!==s||b[43]!==I||b[44]!==f||b[45]!==e||b[46]!==w||b[47]!==y||b[48]!==o||b[49]!==v||b[50]!==A||b[51]!==a||b[52]!==r||b[53]!==q||b[54]!==G?(H=(i||(i=d("I64"))).equal(t,(j||(j=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").IMAGE))||(i||(i=d("I64"))).equal(t,(j||(j=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").ANIMATED_IMAGE))?s(I,f,e,w):(i||(i=d("I64"))).equal(t,(j||(j=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").VIDEO))?y(I):(i||(i=d("I64"))).equal(t,(j||(j=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").AUDIO))?o(I):(i||(i=d("I64"))).equal(t,(j||(j=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").STICKER))?v(I):(i||(i=d("I64"))).equal(t,(j||(j=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").XMA))?A(I,a):(i||(i=d("I64"))).equal(t,(j||(j=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").FILE))?r(I):(i||(i=d("I64"))).equal(t,(j||(j=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").EPHEMERAL_IMAGE))||(i||(i=d("I64"))).equal(t,(j||(j=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").EPHEMERAL_VIDEO))?q(I):G(),b[41]=t,b[42]=s,b[43]=I,b[44]=f,b[45]=e,b[46]=w,b[47]=y,b[48]=o,b[49]=v,b[50]=A,b[51]=a,b[52]=r,b[53]=q,b[54]=G,b[55]=H):H=b[55];b[56]!==f||b[57]!==D||b[58]!==h||b[59]!==u||b[60]!==p||b[61]!==B||b[62]!==H?(x=k.jsx(c("MWPMessageListAttachmentContainer.react"),{connectTop:f,hasTopMargin:D,message:h,paint:u,renderEmphasisRing:p,xmaLayout:B,children:H}),b[56]=f,b[57]=D,b[58]=h,b[59]=u,b[60]=p,b[61]=B,b[62]=H,b[63]=x):x=b[63];E=x}if(E!=null){b[64]!==z||b[65]!==E?(t=z!=null?z(E):E,b[64]=z,b[65]=E,b[66]=t):t=b[66];return t}return null}g["default"]=a}),98);
__d("MWV2ChatAttachmentParserUtils",[],(function(a,b,c,d,e,f){"use strict";function a(a){var b=a.startsWith("blob:");if(!b)return;b=a.length;return a.substring(5,b)}f.getBlobUrl=a}),66);
__d("formatFileSize",["fbt"],(function(a,b,c,d,e,f,g,h){var i=[function(a){return h._("__JHASH__eMlnaQRXRvN__JHASH__",[h._param("value",a,[0])])},function(a){return h._("__JHASH__3UzqYHovNJr__JHASH__",[h._param("value",a,[0])])},function(a){return h._("__JHASH___CyxwP2Ni02__JHASH__",[h._param("value",a,[0])])},function(a){return h._("__JHASH__B5cUSs7YWey__JHASH__",[h._param("value",a,[0])])},function(a){return h._("__JHASH__7EGP9din_0A__JHASH__",[h._param("value",a,[0])])},function(a){return h._("__JHASH__ghfLx6_Ho7n__JHASH__",[h._param("value",a,[0])])},function(a){return h._("__JHASH__osT4Py2kL4R__JHASH__",[h._param("value",a,[0])])}],j=0;function a(a,b){b===void 0&&(b=1024);if(a==null)return null;if(a===0)return i[j](0);var c=Math.floor(Math.log(Math.abs(a))/Math.log(b));a=a/Math.pow(b,c);a=Math.round(a*100)/100;return i[c](a)}g["default"]=a}),226);
__d("MWV2ChatFileV2.react",["fbt","ConstUriUtils","I64","LSMediaUrlAttachment","MDSTextPairing.react","MWChatFilePreview.react","MWChatMessageId","MWFilePressable.react","MWV2ChatAttachmentParserUtils","formatFileSize","react","recoverableViolation","stylex"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l=j||(j=d("react")),m=j.useMemo,n={root:{alignItems:"x6s0dn4",display:"x78zum5",userSelect:"x87ps6o",$$css:!0}};function a(a){var b=a.attachment,e=a.getPlayableUrlSecure;a=a.mediaRenderQpl;var f=m(function(){var a=b.filename;if(a!=null)return a;else return h._("__JHASH__uiTAWyhPCWI__JHASH__")},[b]),g=m(function(){var a=b.filesize!=null?(k||(k=d("I64"))).to_int32(b.filesize):void 0;if(a!=null)return c("formatFileSize")(a);else return null},[b]),j=m(function(){if(e!=null){var a;a=(a=e(b))!=null?a:"";return d("ConstUriUtils").getUri(a)}else{a=d("LSMediaUrlAttachment").playableUrl(b);if(a!=null){var f=d("MWV2ChatAttachmentParserUtils").getBlobUrl(a);if(f!=null)return d("ConstUriUtils").getUri(f);else return d("ConstUriUtils").getUri(a)}}c("recoverableViolation")("Attachment has no playable_url "+b.attachmentFbid,"messenger_web_media")},[b,e]);return l.jsx(c("MWFilePressable.react"),{attachmentID:b.attachmentFbid,entryPoint:"chat_file_v4",mediaRenderQpl:a,messageID:d("MWChatMessageId").makeSent((k||(k=d("I64"))).to_string(b.threadKey),b.messageId,k.to_string(b.timestampMs)),url:j==null?void 0:j.toString(),children:l.jsxs("div",{className:(i||(i=c("stylex")))(n.root,!1),"data-testid":void 0,children:[l.jsx(c("MWChatFilePreview.react"),{attachment:b,withPreview:!1}),l.jsxs("div",{className:"xzsf02u x1iyjqo2 x1s688f xz9dl7a xn6708d xsag5q8 x1ye3gou x13faqbe",children:[l.jsx(c("MDSTextPairing.react"),{headline:f,headlineLineLimit:3,level:4}),l.jsx("div",{className:"x889kno",children:l.jsx(c("MDSTextPairing.react"),{body:g,bodyColor:"secondary",bodyLineLimit:1,level:4,testid:void 0})})]})]})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("MWV2ChatImagesGrid.react",["fbt","CometPhotoGrid.react","FDSImageCover.react","LSMediaUrlAttachment","MWLSThreadDisplayContext","MWXMessageBubbleCornerStyles.react","MWXPressable.react","react","stylex","useMWV2MediaViewerURL"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=j||(j=d("react"));b=j;b.useCallback;b.useMemo;var l=b.c,m={large:{width:"x7cdydq",$$css:!0},pressable:{borderTopStartRadius:"x1lcm9me",borderTopEndRadius:"x1yr5g0i",borderBottomEndRadius:"xrt01vj",borderBottomStartRadius:"x10y3i5r",display:"x1lliihq",height:"x5yr21d",overflowX:"x6ikm8r",overflowY:"x10wlt62",width:"xh8yej3",$$css:!0},root:{maxWidth:"x193iq5w",overflowX:"x6ikm8r",overflowY:"x10wlt62",$$css:!0},small:{width:"x1so1ns2",$$css:!0}};function n(a){var b=l(2),c=d("MWLSThreadDisplayContext").useMWLSThreadDisplayContext(),e=a.previewUrlLarge;if(e!=null&&c==="Inbox")c=e;else{b[0]!==a?(e=d("LSMediaUrlAttachment").previewUrl(a),b[0]=a,b[1]=e):e=b[1];c=e}return c}function o(a){var b=l(17),d=a.attachment,e=a.mediaRenderQpl;b[0]!==e?(a=function(){e==null?void 0:e.endFail("load-image-error")},b[0]=e,b[1]=a):a=b[1];a=a;var f;b[2]!==e?(f=function(){e==null?void 0:e.endSuccess()},b[2]=e,b[3]=f):f=b[3];f=f;var g=n(d);d=c("useMWV2MediaViewerURL")(d);if(g==null){e==null?void 0:e.endFail("empty_preview_url");a();return null}var i;b[4]===Symbol["for"]("react.memo_cache_sentinel")?(i=h._("__JHASH__mrw3CpFXi7r__JHASH__"),b[4]=i):i=b[4];i=i;var j;b[5]!==g?(j={origSrc:g},b[5]=g,b[6]=j):j=b[6];var m;b[7]!==j||b[8]!==d?(m={passthroughProps:j,url:d},b[7]=j,b[8]=d,b[9]=m):m=b[9];b[10]!==a||b[11]!==f||b[12]!==g?(j=k.jsx(c("FDSImageCover.react"),{alt:i,onError:a,onLoad:f,src:g}),b[10]=a,b[11]=f,b[12]=g,b[13]=j):j=b[13];b[14]!==m||b[15]!==j?(d=k.jsx(c("MWXPressable.react"),{"aria-label":i,linkProps:m,overlayRadius:"compact",xstyle:p,children:j}),b[14]=m,b[15]=j,b[16]=d):d=b[16];return d}function p(){return[m.pressable]}function a(a){var b=l(15),e=a.attachments,f=a.connectBottom,g=a.connectTop,h=a.mediaRenderQpl;a=a.outgoing;var j=d("MWLSThreadDisplayContext").useMWLSThreadDisplayContext();a=a?"right":"left";if(b[0]!==a||b[1]!==f||b[2]!==g||b[3]!==j){var n=d("MWXMessageBubbleCornerStyles.react").getMWXBubbleCornerStyles({align:a,connectBottom:f,connectTop:g});n=(i||(i=c("stylex")))(m.root,j==="Inbox"?m.large:m.small,n);b[0]=a;b[1]=f;b[2]=g;b[3]=j;b[4]=n}else n=b[4];if(b[5]!==h||b[6]!==e){b[8]!==h?(a=function(a){return k.jsx(o,{attachment:a,mediaRenderQpl:h},a.attachmentFbid)},b[8]=h,b[9]=a):a=b[9];f=e.map(a);b[5]=h;b[6]=e;b[7]=f}else f=b[7];b[10]!==f?(g=k.jsx(c("CometPhotoGrid.react"),{children:f}),b[10]=f,b[11]=g):g=b[11];b[12]!==n||b[13]!==g?(j=k.jsx("div",{className:n,"data-testid":void 0,children:g}),b[12]=n,b[13]=g,b[14]=j):j=b[14];return j}g["default"]=a}),226);
__d("MWV2UnsupportedAttachment.react",["fbt","MDSCautionTriangleSvgIcon.react","MWXText.react","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||(i=d("react"));b=i;var k=b.useEffect,l=b.c;function a(a){var b=l(10),d=a.attachment,e=a.mediaRenderQpl;a=d.descriptionText;b[0]!==e?(d=function(){e==null?void 0:e.addPoint("render-unsupported-attachment")},b[0]=e,b[1]=d):d=b[1];k(d);var f,g;b[2]===Symbol["for"]("react.memo_cache_sentinel")?(d="x6s0dn4 x78zum5 xjkvuk6 x1iorvi4 x87ps6o",f=j.jsx("div",{className:"x6s0dn4 xgx9qek x14yjl9h xudhj91 x18nykt9 xww2gxu x78zum5 xl56j7k xmo9yow x1iorvi4 x150jy0e xjkvuk6 x1e558r4",children:j.jsx(c("MDSCautionTriangleSvgIcon.react"),{color:"primary",size:24})}),g="xzsf02u x1iyjqo2 x1s688f x13faqbe",b[2]=d,b[3]=f,b[4]=g):(d=b[2],f=b[3],g=b[4]);var i;b[5]===Symbol["for"]("react.memo_cache_sentinel")?(i=j.jsx(c("MWXText.react"),{type:"headline4",children:h._("__JHASH__Uhh5LwoNOuv__JHASH__")}),b[5]=i):i=b[5];var m;b[6]!==a?(m=a!=null?j.jsx("div",{className:"x889kno",children:j.jsx(c("MWXText.react"),{color:"secondary",type:"body4",children:a})}):null,b[6]=a,b[7]=m):m=b[7];b[8]!==m?(a=j.jsxs("div",{className:d,children:[f,j.jsxs("div",{className:g,children:[i,m]})]}),b[8]=m,b[9]=a):a=b[9];return a}g["default"]=a}),226);
__d("MWPBaseXMAAttachmentItem.react",["BaseImage.react","I64","LSIntEnum","LSMediaUrlAttachment","LSMediaUrlAttachmentItem","MNLSXMALayoutType","MWPThreadCapabilitiesContext","react","react-strict-dom"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=h||(h=d("react")),l=h,m=l.createContext,n=l.useContext;l.useMemo;var o=l.c,p=new Set(["xma_rtc_video","xma_rtc_missed_video","xma_rtc_missed_group_video","xma_rtc_ended_video","xma_rtc_new_video_default","xma_rtc_new_video_from_fb_share","xma_rtc_new_video_from_fb_video_share","xma_rtc_new_video_from_cowatch_share","xma_rtc_cowatch_start_video"]),q=new Set(["xma_rtc_audio","xma_rtc_missed_audio","xma_rtc_missed_group_audio","xma_rtc_ended_audio","xma_rtc_new_audio_default","xma_rtc_new_audio_from_fb_share","xma_rtc_new_audio_from_fb_video_share","xma_rtc_new_audio_from_cowatch_share"]),r=m({hasAtLeastOneCta:!1,isDisabledRtcXma:!1,renderPressable:function(a){return null}});function a(a){var b=o(20),c=a.attachment,e=a.attachmentItem,f=a.children;a=a.renderPressable;var g=d("MWPThreadCapabilitiesContext").useMWPThreadCapabilitiesContext();g=g.hasLSThreadBitOffset;var h;b[0]!==g?(h=g(25),b[0]=g,b[1]=h):h=b[1];h=h;var i;b[2]!==g?(i=g(24),b[2]=g,b[3]=i):i=b[3];g=i;i=c.defaultCtaType;c=e.attachmentCta1Id!=null;b[4]!==i||b[5]!==h||b[6]!==g?(e=i!=null?q.has(i)&&!h||p.has(i)&&!g:!1,b[4]=i,b[5]=h,b[6]=g,b[7]=e):e=b[7];i=e;b[8]!==c||b[9]!==i||b[10]!==a?(h={hasAtLeastOneCta:c,isDisabledRtcXma:i,renderPressable:a},b[8]=c,b[9]=i,b[10]=a,b[11]=h):h=b[11];g=h;e=g;b[12]!==c||b[13]!==i||b[14]!==a||b[15]!==f?(h=!c&&!i?a(f):f,b[12]=c,b[13]=i,b[14]=a,b[15]=f,b[16]=h):h=b[16];b[17]!==e||b[18]!==h?(g=k.jsx(r.Provider,{value:e,children:h}),b[17]=e,b[18]=h,b[19]=g):g=b[19];return g}function b(a){var b=o(3);a=a.children;var c=n(r);if(c.hasAtLeastOneCta&&!c.isDisabledRtcXma){var d;b[0]!==c||b[1]!==a?(d=c.renderPressable(a),b[0]=c,b[1]=a,b[2]=d):d=b[2];return d}else return a}var s={container:{display:"x78zum5",position:"x1n2onr6",width:"xh8yej3",$$css:!0},image:{flexGrow:"x1iyjqo2",height:"xt7dq6l",maxWidth:"x193iq5w",objectFit:"xl1xv1r",$$css:!0}};function e(a){var b=o(8),e=a.attachmentItem;a=a.url;var f=e.previewHeight;e=e.previewWidth;var g;b[0]!==f?(g=f!=null?(i||(i=d("I64"))).to_int32(f):void 0,b[0]=f,b[1]=g):g=b[1];b[2]!==e?(f=e!=null?(i||(i=d("I64"))).to_int32(e):void 0,b[2]=e,b[3]=f):f=b[3];b[4]!==g||b[5]!==a||b[6]!==f?(e=k.jsx(d("react-strict-dom").html.div,{style:s.container,children:k.jsx(c("BaseImage.react"),{height:g,src:a,width:f,xstyle:s.image})}),b[4]=g,b[5]=a,b[6]=f,b[7]=e):e=b[7];return e}function f(a){var b,c=a.attachment,e=a.attachmentItem,f=a.description,g=a.getPreviewUrl,h=a.mediaRenderQpl;a=a.preferLargePreview;a=a===void 0?!1:a;var i=d("LSMediaUrlAttachmentItem").playableUrl(e),j=d("LSMediaUrlAttachment").previewUrlLarge(c);b=a?(b=d("LSMediaUrlAttachmentItem").previewUrlLarge(e))!=null?b:d("LSMediaUrlAttachmentItem").previewUrl(e):d("LSMediaUrlAttachmentItem").previewUrl(e);g=g==null?d("LSMediaUrlAttachment").previewUrl(c):g(c,e,"MWPBaseXMAAttachmentItem.getXMAAttachmentItemPreview - "+f,h);f=a&&j!=null?j:(c=b)!=null?c:g;h=e.playableUrlMimeType;a=h!=null?h.includes("video")?"video":h.includes("image")?"image":"unsupported":"unsupported";if(a==="video"&&i!=null)return{type:"Video",url:i};if(f!=null)return{type:"Image",url:f};return a==="image"&&i!=null?{type:"Image",url:i}:{hasPlayableUrl:i!=null,hasPreviewUrl:f!=null,mimeType:a,playableUrlMimeType:e.playableUrlMimeType,type:"Unsupported"}}function t(a,b){var e=o(3),f=a.xmaLayoutType!=null&&!(i||(i=d("I64"))).equal(a.xmaLayoutType,(j||(j=d("LSIntEnum"))).ofNumber(c("MNLSXMALayoutType").HSCROLL)),g=b.titleText;g=g!=null||!f?g:a.titleText;b=b.subtitleText;f=b!=null||!f?b:a.subtitleText;e[0]!==g||e[1]!==f?(b=[g,f],e[0]=g,e[1]=f,e[2]=b):b=e[2];return b}g.MWPBaseXMAAttachmentItemPressableContext=r;g.MWPBaseXMAAttachmentItemPressable=a;g.MWPBaseXMAAttachmentItemPressableNested=b;g.MWPBaseXMAAttachmentItemImage=e;g.getXMAAttachmentItemPreview=f;g.useTitleAndSubtitle=t}),98);
__d("useMWChatOpenTabByThreadKey",["I64","LSAuthorityLevel","LSContactType","LSFactory","LSIntEnum","LSVerifyThreadRowExistsStoredProcedure","MWPActor.react","Promise","ReQL","gkx","promiseDone","react","useMWBaseChatOpenTabForUser","useMWChatOpenTabForPage","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l;e=l||d("react");var m=e.useCallback,n=e.useMemo;function a(a,e){var g=(k||(k=c("useReStore")))(),l=c("useMWBaseChatOpenTabForUser")(void 0,e),o=l.openTabByThreadKey,p=c("useMWChatOpenTabForPage")(e),q=d("MWPActor.react").useActor(),r=n(function(){return new(h||(h=b("Promise")))(function(b,e){var h=(e=d("ReQL")).mergeJoin(e.fromTableAscending(g.tables.participants).getKeyRange(a).filter(function(a){return!(i||(i=d("I64"))).equal(a.contactId,q)}),e.fromTableAscending(g.tables.contacts)),k={contents:function(){}};k.contents=h.subscribe(function(a,e){if(e.operation==="delete")return;a=e.value[1];if((i||(i=d("I64"))).ge(a.authorityLevel,(j||(j=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").AUTHORITATIVE))){k.contents();return b(a)}});c("promiseDone")(e.firstAsync(h),function(e){if(e!=null){e=e[1];if((i||(i=d("I64"))).ge(e.authorityLevel,(j||(j=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").AUTHORITATIVE))){k.contents();return b(e)}else return}c("promiseDone")(g.runInTransaction(function(b){return c("LSVerifyThreadRowExistsStoredProcedure")(c("LSFactory")(b),{syncGroup:(j||(j=d("LSIntEnum"))).ofNumber(1),threadKey:a,threadType:j.ofNumber(1)})},"readwrite",void 0,void 0,f.id+":90"))})})},[a,g]);return m(function(b){c("promiseDone")(r,function(e){var f=(i||(i=d("I64"))).to_string(a);e=e.contactType;if((i||(i=d("I64"))).equal(e,(j||(j=d("LSIntEnum"))).ofNumber(c("LSContactType").PAGE)))return p(f,!1);else return o(f,b&&c("gkx")("7413"))})},[r,o,p,a])}g["default"]=a}),98);
__d("MWXMAAttachmentActionTriggerWithOpenChatTab.react",["Int64Hooks","LSIntEnum","LSMessagingThreadTypeUtil","ReQL","promiseDone","react","useAsyncReStore","useCometRouterDispatcher","useMWChatOpenTabByThreadKey","useMWNavigation","useShouldShowMessagingEntrypointInCometRoot"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=(h||d("react")).c;function a(a){var b=j(3),c=a.children;a=a.threadKey;a=k(a);var d;b[0]!==c||b[1]!==a?(d=c(a),b[0]=c,b[1]=a,b[2]=d):d=b[2];return d}function k(a){var b=j(8),e=c("useShouldShowMessagingEntrypointInCometRoot")("CHAT"),f=c("useCometRouterDispatcher")(),g=c("useMWChatOpenTabByThreadKey")(a,"chatInThread"),h=c("useAsyncReStore")(),k=c("useMWNavigation")(),l,m;b[0]!==h||b[1]!==a||b[2]!==e||b[3]!==g||b[4]!==f||b[5]!==k?(l=function(b){var j=(i||(i=d("LSIntEnum"))).ofNumber(22);c("promiseDone")(h,function(h){c("promiseDone")(d("ReQL").firstAsync(d("ReQL").fromTableAscending(h.tables.threads).getKeyRange(a)),function(c){var h=(c==null?void 0:c.threadType)!=null&&d("LSMessagingThreadTypeUtil").isArmadilloSecure(c.threadType);if(e){var i=b.metaKey||b.ctrlKey||b.shiftKey;if(!i)return g(h)}else if(f!=null&&c!=null)return k.openInbox({threadKey:a,threadType:c.threadType},"chatInThread",j);else return})})},m=[f,e,h,k,g,a],b[0]=h,b[1]=a,b[2]=e,b[3]=g,b[4]=f,b[5]=k,b[6]=l,b[7]=m):(l=b[6],m=b[7]);return d("Int64Hooks").useCallbackInt64(l,m)}g["default"]=a}),98);
__d("XmaEventsFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("5680");b=d("FalcoLoggerInternal").create("xma_events",a);e=b;g["default"]=e}),98);
__d("MessengerWebUXLoggerXMAEventLoggingImpl",["CometPassiveGetRouterStateContext","CometProductAttribution","I64","LSMessagingThreadTypeUtil","LSXmaContentType","LsThreadType","WebUXLoggingEntryPointContextProvider","XmaEventsFalcoEvent","castToEnum","cr:1576","react","useSinglePartialViewImpression"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=h||d("react");j.useCallback;var k=j.useContext,l=j.useInsertionEffect,m=j.useRef,n=j.c;function a(){var a=n(2),b=p("xma_redirect_to_fb"),c;a[0]!==b?(c=function(a){b(a)},a[0]=b,a[1]=c):c=a[1];return c}function e(a){var b=n(3),d=p("xma_impression"),e;b[0]!==d||b[1]!==a?(e={onImpressionStart:function(){d(a)}},b[0]=d,b[1]=a,b[2]=e):e=b[2];return c("useSinglePartialViewImpression")(e)}function f(){var a=n(2),b=p("xma_click"),c;a[0]!==b?(c=function(a){b(a)},a[0]=b,a[1]=c):c=a[1];return c}function o(){var a=n(2),b=p("xma_fb_opened"),c;a[0]!==b?(c=function(a){b(a)},a[0]=b,a[1]=c):c=a[1];return c}function p(a){var e=n(5),f=k(d("WebUXLoggingEntryPointContextProvider").WebUXEntryPointLoggingContext),g=m(f),h;e[0]!==f?(h=function(){g.current=f},e[0]=f,e[1]=h):h=e[1];l(h);var j=k(c("CometPassiveGetRouterStateContext"));e[2]!==j||e[3]!==a?(h=function(e){var f,h=e.attachment.messageId;f=c("castToEnum")((i||(i=d("I64"))).to_int32((f=e.threadType)!=null?f:(i||(i=d("I64"))).zero),c("LsThreadType"),null);var k=e.threadType?d("LSMessagingThreadTypeUtil").isArmadilloSecure(e.threadType):!1,l=e.attachment.threadKey,m=i.to_string(l),n=g.current,o=r(e.attachment),p=d("CometProductAttribution").getMinifiedTopMostRouteProductAttribution(j),t=e.attachment.xmaContentType;t=s(t);var u={click_category:e==null?void 0:e.clickCategory,click_target_type:o,entrypoint:n,event:(e==null?void 0:e.isDirectToExternal)===!0?"xma_redirect_to_external_app":a,is_facebook_installed:null,is_fb_content:t,thread_id:m,thread_type:f};if(k===!0&&b("cr:1576")!=null){var v=q(e.message);b("cr:1576").log(function(){return babelHelpers["extends"]({},u,v,{navigation_chain:p,thread_key:(i||(i=d("I64"))).to_string(l)})})}else c("XmaEventsFalcoEvent").log(function(){return babelHelpers["extends"]({},u,{attribution_id_v2:p,message_id:h})})},e[2]=j,e[3]=a,e[4]=h):h=e[4];return h}function q(a){return a==null?{}:{forward:a.isForwarded,message_sender_id:(i||(i=d("I64"))).to_string(a.senderId),message_sent_time:i.to_string(i.div(a.timestampMs,i.of_string("1000")))}}function r(a){var b=a.defaultCtaType,c=a.attachmentLoggingType;a=a.cta1Type;var d=35;b==="xma_rtc_missed_audio"?d=37:b==="xma_rtc_missed_video"?d=36:b==="xma_rtc_missed_group_audio"?d=67:b==="xma_rtc_missed_group_video"?d=66:b==="xma_rtc_audio"?d=17:b==="xma_rtc_video"?d=18:b==="xma_rtc_ended_audio"?d=57:b==="xma_rtc_ended_video"?d=56:b==="xma_rtc_new_audio_default"?d=68:b==="xma_live_location_sharing"?(d=38,a==="xma_live_location_sharing"&&(d=39)):b==="xma_shops_pdp"?d=61:b==="xma_open_native"?d=41:b==="xma_web_url"?d=35:c==="xma_open_contact_share"?d=64:b==="xma_customer_information"?d=65:c==="xma_appointment_confirmed"?d=70:b==="xma_montage_share"&&(d=82);return d}function s(a){if(a==null)return null;a=(i||(i=d("I64"))).to_int32(a);return a===c("LSXmaContentType").FB_FEED_SHARE||a===c("LSXmaContentType").FB_STORY_REPLY||a===c("LSXmaContentType").FB_STORY_SHARE||a===c("LSXmaContentType").FB_STORY_MENTION||a===c("LSXmaContentType").FB_FEED_VIDEO_SHARE||a===c("LSXmaContentType").FB_GAMING_CUSTOM_UPDATE||a===c("LSXmaContentType").FB_PRODUCER_STORY_REPLY||a===c("LSXmaContentType").FB_EVENT||a===c("LSXmaContentType").FB_FEED_POST_PRIVATE_REPLY||a===c("LSXmaContentType").FB_SHORT||a===c("LSXmaContentType").MSG_RECEIVER_FETCH}g.useXMAEventsRedirectDefaultToFBLogger=a;g.useXMAEventsImpressionLoggerRef=e;g.useXMAEventsClickLogger=f;g.useXMAEventOpenInFBLogger=o}),98);
__d("logXMACtaClicked",["I64","LsDidTapCallToActionFalcoEvent"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){var b=a.cta,e=a.loggingDetails,f=a.source;if(e==null)return;a=b.actionContentBlob;var g=a!=null?i(a):"",n=a!=null?k(a):"",o=a!=null?j(a):"",p=a!=null?l(a):"",q=a!=null?m(a):"",r=e[1],s=e[0];c("LsDidTapCallToActionFalcoEvent").log(function(){return{action:{cta_type_unique_id:n,id:(h||(h=d("I64"))).to_string(b.ctaId),name:"",source:f,type:r},message:{campaign_id:o,id:b.messageId,marketing_message_impression_token:p,marketing_message_surface:q,notification_token:g},page:{id:s},target:{id:s},thread:{id:s}}})}function i(a){try{a=JSON.parse(a);a=a.notification_message_token;return a!=null?a:""}catch(a){return""}}function j(a){try{a=JSON.parse(a);a=a.mbs_mm_campaign_id;return a!=null?a:""}catch(a){return""}}function k(a){try{a=JSON.parse(a);a=a.mm_cta_unique_id;return a!=null?a:""}catch(a){return""}}function l(a){try{a=JSON.parse(a);a=a.mm_impression_token;return a!=null?a:""}catch(a){return""}}function m(a){try{a=JSON.parse(a);a=a.mm_surface;return a!=null?a:""}catch(a){return""}}g.logXMACtaClicked=a}),98);
__d("useMWChatPollXMAActionHandler",["JSResourceForInteraction","MWThreadKey.react","react","useMWXLazyDialog"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");b.useCallback;var i=b.c;function a(){var a=i(4),b=d("MWThreadKey.react").useMWThreadKeyMemoized(),e;a[0]===Symbol["for"]("react.memo_cache_sentinel")?(e=c("JSResourceForInteraction")("MWChatPollDetailsDialog.react").__setRef("useMWChatPollXMAActionHandler"),a[0]=e):e=a[0];e=c("useMWXLazyDialog")(e);var f=e[0];a[1]!==b||a[2]!==f?(e=function(a,c){if(b==null||a==null||c==null)return;return f({pollId:a,threadKey:b,title:c},function(){})},a[1]=b,a[2]=f,a[3]=e):e=a[3];return e}g["default"]=a}),98);
__d("useMWLinkHashXMAActionHandler",["ConstUriUtils","FBLogger","I64","LSCommunityInviteStatus","LSFactory","LSIntEnum","LSOptimisticFetchPendingGroupInviteStoredProcedure","MWCMGetValidId","MWCMStandaloneJoinDialog.entrypoint","MWCMStandaloneMemberJoinChatDialog.entrypoint","MWCMStandaloneRequestToJoinDialog.entrypoint","ReQL","ReQLSuspense","XMessengerDotComCometCommunityThreadsControllerRouteBuilder","gkx","goUriOnNewWindow","promiseDone","qex","react","requireDeferred","useCometRouterDispatcher","useMWNavigation","useMWXEntryPointDialog","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k;b=k||d("react");b.useCallback;var l=b.useRef,m=b.c,n=c("requireDeferred")("C4gEngagementFalcoEvent").__setRef("useMWLinkHashXMAActionHandler"),o=["ch","cm"];function p(a){a=d("ConstUriUtils").getUri(a);if(a==null?void 0:a.isSubdomainOfDomain("m.me")){a=a==null?void 0:(a=a.getPath())==null?void 0:a.split("/").filter(function(a){return a!==""});return(a==null?void 0:a.length)===2&&o.includes(a[0])?a[1]:null}return null}function a(){var a=m(10),b;a[0]===Symbol["for"]("react.memo_cache_sentinel")?(b={},a[0]=b):b=a[0];b=c("useMWXEntryPointDialog")(c("MWCMStandaloneRequestToJoinDialog.entrypoint"),b);var e=b[0];a[1]===Symbol["for"]("react.memo_cache_sentinel")?(b={},a[1]=b):b=a[1];b=c("useMWXEntryPointDialog")(c("MWCMStandaloneJoinDialog.entrypoint"),b);var g=b[0];a[2]===Symbol["for"]("react.memo_cache_sentinel")?(b={},a[2]=b):b=a[2];b=c("useMWXEntryPointDialog")(c("MWCMStandaloneMemberJoinChatDialog.entrypoint"),b);var k=b[0],o=(h||(h=c("useReStore")))(),q=c("useCometRouterDispatcher")(),r=c("gkx")("23433"),s=l(),t=c("useMWNavigation")();a[3]!==o||a[4]!==g||a[5]!==k||a[6]!==e||a[7]!==q||a[8]!==t?(b=function(a,b){if(a==null)return c("FBLogger")("messenger_web_sharing").info("Invalid url to extract link hash");var h=p(a);if(h==null)return c("FBLogger")("messenger_web_sharing").info("Invalid link hash in url");c("promiseDone")(o.runInTransaction(function(a){return c("LSOptimisticFetchPendingGroupInviteStoredProcedure")(c("LSFactory")(a),{linkHash:h})},"readwrite"));s.current=d("ReQL").fromTableAscending(o.tables.group_invitations_pending).getKeyRange(h).subscribe(function(a,l){if(l.operation!=="delete"){a=l.value;var m=a.communityId,p=a.communityJoinRequestStatus,u=a.threadId;if(!d("MWCMGetValidId").MWCMHasValidFbGroupId(m,!0))return;s.current==null?void 0:s.current();var v=d("ReQLSuspense").first(d("ReQL").fromTableAscending(o.tables.community_folders).getKeyRange(m),f.id+":150");if(b==="xma_join_community"||b==="xma_join_community_chat"){n.onReady(function(a){a.log(function(){return{action:"tap",client_extras:{has_invite:(v==null).toString(),has_pending_request:(i||(i=d("I64"))).to_string(p)},community_id:i.to_string(m),entry_point:"cm:xma",event:u==null?"request_to_join_community_initiated":"request_to_join_community_and_thread_initiated",surface:"message_thread",thread_id:u!=null?(i||(i=d("I64"))).to_string(u):void 0}})});if(v!=null&&(i||(i=d("I64"))).equal(v.inviteStatus,(j||(j=d("LSIntEnum"))).ofNumber(c("LSCommunityInviteStatus").INVITED)))return g({folder:v});return c("qex")._("1827")===!0&&(v==null?void 0:v.isMember)===!0?k({linkHash:h}):e({linkHash:h})}if(q==null)return;n.onReady(function(a){a.log(function(){return{action:"tap",community_id:(i||(i=d("I64"))).to_string(m),entry_point:"cm:xma",event:u==null?"redirect_to_community":"redirect_to_community_and_thread",surface:"message_thread",thread_id:u!=null?(i||(i=d("I64"))).to_string(u):void 0}})});if(u==null){l=c("XMessengerDotComCometCommunityThreadsControllerRouteBuilder").buildExtraURL("/c/{folder_id}/",{folder_id:(i||(i=d("I64"))).to_string(m)});if(r)return q.go(l,{});c("goUriOnNewWindow")("https://www.messenger.com"+l);return}if(r)return q.go(c("XMessengerDotComCometCommunityThreadsControllerRouteBuilder").buildURL({folder_id:(i||(i=d("I64"))).to_string(m),thread_key:i.to_string(u)}),{});c("promiseDone")(d("ReQL").firstAsync(d("ReQL").fromTableAscending(o.tables.threads).getKeyRange(u)),function(a){if(a!=null)return t.openInbox({threadKey:u,threadType:a.threadType},"xmaAttachment")})}})},a[3]=o,a[4]=g,a[5]=k,a[6]=e,a[7]=q,a[8]=t,a[9]=b):b=a[9];a=b;return a}g["default"]=a}),98);
__d("MWRollcallContributionsDialogContainer.react",["CometHideLayerOnEscape.react","CometTheme.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||(h=d("react"))).c,j=h;function a(a){var b=i(10),d=a.children,e=a.onClose;a=a.visibilityRef;var f;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(f="x1qjc9v5 xal61yo x9f619 x78zum5 xdt5ytf x1iyjqo2 x5yr21d x1n2onr6 x87ps6o x1uvtmcs",b[0]=f):f=b[0];var g;b[1]===Symbol["for"]("react.memo_cache_sentinel")?(g={display:"contents"},b[1]=g):g=b[1];b[2]!==d?(g=j.jsx(c("CometTheme.react"),{style:g,theme:"dark",children:d}),b[2]=d,b[3]=g):g=b[3];b[4]!==a||b[5]!==g?(d=j.jsx("div",{className:f,ref:a,children:g}),b[4]=a,b[5]=g,b[6]=d):d=b[6];b[7]!==e||b[8]!==d?(f=j.jsx(c("CometHideLayerOnEscape.react"),{onHide:e,children:d}),b[7]=e,b[8]=d,b[9]=f):f=b[9];return f}g["default"]=a}),98);
__d("MWRollcallContributionsDialogFallback.react",["fbt","ix","MDSColumn.react","MDSColumnItem.react","MDSGlimmer.react","MDSRow.react","MDSRowItem.react","MWRollcallContributionsDialogContainer.react","MWXIcon.react","fbicon","react"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j,k=(j||(j=d("react"))).c,l=j;function a(a){var b=k(14);a=a.onClose;var e,f;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(e=h._("__JHASH__l-5nlfLCheV__JHASH__"),f=d("fbicon")._(i("478232"),16),b[0]=e,b[1]=f):(e=b[0],f=b[1]);b[2]!==a?(e=l.jsx(c("MDSRowItem.react"),{children:l.jsx(c("MWXIcon.react"),{"aria-label":e,icon:f,onPress:a,size:20})}),b[2]=a,b[3]=e):e=b[3];b[4]===Symbol["for"]("react.memo_cache_sentinel")?(f=l.jsx(c("MDSRowItem.react"),{children:l.jsx(c("MDSGlimmer.react"),{index:0,xstyle:m.rollcallTitle})}),b[4]=f):f=b[4];var g;b[5]===Symbol["for"]("react.memo_cache_sentinel")?(g=h._("__JHASH__LLSQ7_q3mOX__JHASH__"),b[5]=g):g=b[5];b[6]===Symbol["for"]("react.memo_cache_sentinel")?(g=l.jsx(c("MDSRowItem.react"),{children:l.jsx(c("MWXIcon.react"),{"aria-label":g,disabled:!0,icon:d("fbicon")._(i("816819"),16),size:20})}),b[6]=g):g=b[6];b[7]!==e?(f=l.jsxs(c("MDSRow.react"),{paddingHorizontal:16,paddingVertical:16,spacing:0,verticalAlign:"center",children:[e,f,g]}),b[7]=e,b[8]=f):f=b[8];b[9]===Symbol["for"]("react.memo_cache_sentinel")?(g=l.jsx(c("MDSRowItem.react"),{children:l.jsx(c("MDSGlimmer.react"),{index:0,xstyle:m.profilePicture})}),b[9]=g):g=b[9];b[10]===Symbol["for"]("react.memo_cache_sentinel")?(e=l.jsx(c("MDSColumn.react"),{align:"center",expanding:!0,paddingVertical:20,spacing:20,verticalAlign:"center",children:l.jsxs(c("MDSColumnItem.react"),{children:[l.jsxs(c("MDSRow.react"),{align:"start",paddingHorizontal:0,paddingVertical:12,spacing:8,verticalAlign:"center",xstyle:m.contributionHeader,children:[g,l.jsx(c("MDSRowItem.react"),{children:l.jsx(c("MDSGlimmer.react"),{index:0,xstyle:m.profileName})})]}),l.jsx(c("MDSGlimmer.react"),{index:0,xstyle:m.contributionMedia})]})}),b[10]=e):e=b[10];b[11]!==a||b[12]!==f?(g=l.jsxs(c("MWRollcallContributionsDialogContainer.react"),{onClose:a,children:[f,e]}),b[11]=a,b[12]=f,b[13]=g):g=b[13];return g}var m={contributionHeader:{width:"x1cvmir6",$$css:!0},contributionMedia:{borderTopStartRadius:"xfh8nwu",borderTopEndRadius:"xoqspk4",borderBottomEndRadius:"x12v9rci",borderBottomStartRadius:"x138vmkv",height:"xuo6tqj",marginBottom:"x1e56ztr",width:"x1cvmir6",$$css:!0},profileName:{borderTopStartRadius:"x1lcm9me",borderTopEndRadius:"x1yr5g0i",borderBottomEndRadius:"xrt01vj",borderBottomStartRadius:"x10y3i5r",height:"x1qx5ct2",width:"x1oysuqx",$$css:!0},profilePicture:{borderTopStartRadius:"x14yjl9h",borderTopEndRadius:"xudhj91",borderBottomEndRadius:"x18nykt9",borderBottomStartRadius:"xww2gxu",height:"x10w6t97",width:"x1td3qas",$$css:!0},rollcallTitle:{borderTopStartRadius:"x1lq5wgf",borderTopEndRadius:"xgqcy7u",borderBottomEndRadius:"x30kzoy",borderBottomStartRadius:"x9jhf4c",height:"x10w6t97",width:"xdzyupr",$$css:!0}};g["default"]=a}),226);
__d("RollcallXmaCtaClickQplLogging",["QPLUserFlow","qpl"],(function(a,b,c,d,e,f,g){"use strict";function a(){c("QPLUserFlow").endSuccess(c("qpl")._(127406705,"1680"))}function b(){c("QPLUserFlow").endFailure(c("qpl")._(127406705,"1680"),"fail to load roll call information")}function d(a,b,d){c("QPLUserFlow").start(c("qpl")._(127406705,"1680"),{annotations:{string:{cta_title:d,entry_point:a,source_type:b}}})}g.endSuccessXMACtaClickQplLogging=a;g.endFailureXMACtaClickQplLogging=b;g.startXMACtaClickQplLogging=d}),98);
__d("RollcallXmaViewerQplLogging",["QPLUserFlow","qpl"],(function(a,b,c,d,e,f,g){"use strict";function a(){c("QPLUserFlow").endSuccess(c("qpl")._(127403136,"1137"))}function b(){c("QPLUserFlow").endFailure(c("qpl")._(127403136,"1137"),"error while doing actions in Rollcall viewer.")}function d(a,b,d){c("QPLUserFlow").start(c("qpl")._(127403136,"1137"),{annotations:{bool:{is_viewer_contribute:b},"int":{total_media_items:a},string:{source_type:d}}})}function e(){c("QPLUserFlow").addPoint(c("qpl")._(127403136,"1137"),"added_reaction")}function f(){c("QPLUserFlow").addPoint(c("qpl")._(127403136,"1137"),"unsend_contribution")}function h(){c("QPLUserFlow").addPoint(c("qpl")._(127403136,"1137"),"reset_prompt")}function i(){c("QPLUserFlow").addPoint(c("qpl")._(127403136,"1137"),"report_prompt")}function j(){c("QPLUserFlow").addPoint(c("qpl")._(127403136,"1137"),"report_contribution")}function k(){c("QPLUserFlow").addPoint(c("qpl")._(127403136,"1137"),"reply_contribution")}g.endSuccessXMARollCallViewerQplLogging=a;g.endFailureXMARollCallViewerQplLogging=b;g.startXMARollCallViewerQplLogging=d;g.addReactionRollCallViewerQplPoint=e;g.unsendContributionRollCallViewerQplPoint=f;g.resetPromptRollCallViewerQplPoint=h;g.reportPromptRollCallViewerQplPoint=i;g.reportContributionRollCallViewerQplPoint=j;g.replyContributionRollCallViewerQplPoint=k}),98);
__d("useRollcallContributionsXMAActionHandlerQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="23868899752758299"}),null);
__d("useRollcallContributionsXMAActionHandlerQuery.graphql",["useRollcallContributionsXMAActionHandlerQuery_facebookRelayOperation","relay-runtime"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{kind:"Literal",name:"surface_nux_id",value:10706},{kind:"Literal",name:"trigger",value:"COMMUNITY_MESSAGING_PROMPT"}],c=[{kind:"Literal",name:"supported",value:"TDHjT"}],d={kind:"InlineFragment",selections:[{args:null,documentName:"useRollcallContributionsXMAActionHandlerQuery",fragmentName:"CometQuickPromotionMessengerWebPromptsNuxDialogRendererStrategy_quickPromotionRef",fragmentPropName:"quickPromotionRef",kind:"ModuleImport"}],type:"CometQuickPromotionMessengerWebPromptsRendererStrategy",abstractKey:null};return{fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useRollcallContributionsXMAActionHandlerQuery",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:a,concreteType:"ViewerEligibleQuickPromotionsConnection",kind:"LinkedField",name:"eligible_promotions",plural:!1,selections:[{alias:null,args:null,concreteType:"QuickPromotion",kind:"LinkedField",name:"nodes",plural:!0,selections:[{alias:null,args:null,concreteType:"CometQuickPromotionSections",kind:"LinkedField",name:"comet_qp_sections",plural:!1,selections:[{alias:null,args:c,concreteType:null,kind:"LinkedField",name:"renderer_strategy",plural:!1,selections:[d],storageKey:'renderer_strategy(supported:"TDHjT")'}],storageKey:null}],storageKey:null}],storageKey:'eligible_promotions(surface_nux_id:10706,trigger:"COMMUNITY_MESSAGING_PROMPT")'}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[],kind:"Operation",name:"useRollcallContributionsXMAActionHandlerQuery",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:a,concreteType:"ViewerEligibleQuickPromotionsConnection",kind:"LinkedField",name:"eligible_promotions",plural:!1,selections:[{alias:null,args:null,concreteType:"QuickPromotion",kind:"LinkedField",name:"nodes",plural:!0,selections:[{alias:null,args:null,concreteType:"CometQuickPromotionSections",kind:"LinkedField",name:"comet_qp_sections",plural:!1,selections:[{alias:null,args:c,concreteType:null,kind:"LinkedField",name:"renderer_strategy",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},d],storageKey:'renderer_strategy(supported:"TDHjT")'}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}],storageKey:'eligible_promotions(surface_nux_id:10706,trigger:"COMMUNITY_MESSAGING_PROMPT")'}],storageKey:null}]},params:{id:b("useRollcallContributionsXMAActionHandlerQuery_facebookRelayOperation"),metadata:{},name:"useRollcallContributionsXMAActionHandlerQuery",operationKind:"query",text:null}}}();b("relay-runtime").PreloadableQueryRegistry.set(a.params.id,a);e.exports=a}),null);
__d("useRollcallContributionsXMAActionHandler",["CometRelay","I64","JSResourceForInteraction","LSMessagingThreadTypeUtil","MWChannelPromptContributionsDialog.entrypoint","MWChannelPromptContributionsDialogFallback.react","MWDidQueryPromptsNux","MWLSThread","MWRollcallContributionsDialogFallback.react","MessengerDiscoverableBroadcastChatsClientEventsFalcoEvent","RollcallXmaCtaClickQplLogging","RollcallXmaViewerQplLogging","gkx","mwCMIsAnyCMThread","promiseDone","react","useMWXEntryPointDialog","useMWXLazyDialog","usePrevious","useRollcallContributionsXMAActionHandlerQuery.graphql"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=i||(i=d("react"));e=i;e.useCallback;var l=e.useEffect,m=e.useState,n=e.c;function o(){var a=n(2),c=d("CometRelay").useRelayEnvironment(),e;a[0]!==c?(e=function(){return d("CometRelay").fetchQuery(c,h!==void 0?h:h=b("useRollcallContributionsXMAActionHandlerQuery.graphql"),{}).toPromise()},a[0]=c,a[1]=e):e=a[1];return e}function a(){var a=n(26),b=m((j||(j=d("I64"))).zero),e=b[0],f=b[1];b=m("");var g=b[0],h=b[1];b=m(j.zero);var i=b[0],k=b[1];b=m(null);var s=b[0],t=b[1];b=m(null);var u=b[0],v=b[1],w=c("usePrevious")(e),x=c("usePrevious")(i);a[0]===Symbol["for"]("react.memo_cache_sentinel")?(b=c("JSResourceForInteraction")("MWRollcallContributionsDialog.react").__setRef("useRollcallContributionsXMAActionHandler"),a[0]=b):b=a[0];b=c("useMWXLazyDialog")(b,r);var y=b[0];a[1]!==i?(b=(j||(j=d("I64"))).to_string(i),a[1]=i,a[2]=b):b=a[2];var z;a[3]!==b?(z={promptId:b},a[3]=b,a[4]=z):z=a[4];b=c("useMWXEntryPointDialog")(c("MWChannelPromptContributionsDialog.entrypoint"),z,void 0,q);var A=b[0];a[5]===Symbol["for"]("react.memo_cache_sentinel")?(z=c("JSResourceForInteraction")("MWCommunityMessagingPromptsNUXQuickPromotion.react").__setRef("useRollcallContributionsXMAActionHandler"),a[5]=z):z=a[5];b=c("useMWXLazyDialog")(z);var B=b[0],C=o();z=d("MWLSThread").useThread(e,p);a[6]!==z?(b=z!==void 0&&c("mwCMIsAnyCMThread")(z),a[6]=z,a[7]=b):b=a[7];var D=b;a[8]!==z?(b=z!==void 0&&d("LSMessagingThreadTypeUtil").isDiscoverablePublicBroadcastChannel(z),a[8]=z,a[9]=b):b=a[9];var E=b;a[10]!==D||a[11]!==e||a[12]!==i||a[13]!==w||a[14]!==x||a[15]!==E||a[16]!==A||a[17]!==g||a[18]!==y||a[19]!==u||a[20]!==s||a[21]!==C||a[22]!==B?(z=function(){D!=null&&!(j||(j=d("I64"))).is_zero(e)&&!(j||(j=d("I64"))).is_zero(i)&&w!==e&&x!==i&&(d("RollcallXmaCtaClickQplLogging").startXMACtaClickQplLogging("xma_www_button",D?"cm_thread":"friends_family_thread","open_viewer"),d("MWDidQueryPromptsNux").getDidQueryPromptsNux()||d("MWDidQueryPromptsNux").markDidQueryPromptsNux(),E&&c("gkx")("3111")?(A({rollCallId:i,threadKey:e,xmaMessageId:g},function(){d("RollcallXmaViewerQplLogging").endSuccessXMARollCallViewerQplLogging(),f((j||(j=d("I64"))).zero),k(j.zero),t(null)}),c("MessengerDiscoverableBroadcastChatsClientEventsFalcoEvent").log(function(){return{action_name:1,event_name:305,source:157,surface:7,thread_id:(j||(j=d("I64"))).to_string(e)}})):y({ctaType:u,rollCallId:i,scrollToContributionMessageId:s,threadKey:e},function(){d("RollcallXmaViewerQplLogging").endSuccessXMARollCallViewerQplLogging(),f((j||(j=d("I64"))).zero),h(""),k(j.zero),t(null)}),c("promiseDone")(C(),function(a){a=a==null?void 0:(a=a.viewer)==null?void 0:(a=a.eligible_promotions)==null?void 0:(a=a.nodes)==null?void 0:(a=a.find(function(a){return((a=a.comet_qp_sections)==null?void 0:a.renderer_strategy)!=null}))==null?void 0:(a=a.comet_qp_sections)==null?void 0:a.renderer_strategy;a&&B({asCreator:!1,rendererStrategy:a})}))},b=[D,x,w,i,A,e,s,C,B,u,y,g,E],a[10]=D,a[11]=e,a[12]=i,a[13]=w,a[14]=x,a[15]=E,a[16]=A,a[17]=g,a[18]=y,a[19]=u,a[20]=s,a[21]=C,a[22]=B,a[23]=z,a[24]=b):(z=a[23],b=a[24]);l(z,b);a[25]===Symbol["for"]("react.memo_cache_sentinel")?(z=function(a,b,c,d,e){h(e),f(b),k(a),t(c),v(d)},a[25]=z):z=a[25];return z}function p(a){return a.threadType}function q(a){return k.jsx(c("MWChannelPromptContributionsDialogFallback.react"),{onClose:a})}q.displayName=q.name+" [from "+f.id+"]";function r(a){return k.jsx(c("MWRollcallContributionsDialogFallback.react"),{onClose:a})}r.displayName=r.name+" [from "+f.id+"]";g.useRollcallContributionsXMAActionHandler=a}),98);
__d("logCallAttemptViaLocalhost",["MessengerDesktopDeeplinkEventFalcoEvent"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=a.funnelSessionId;c("MessengerDesktopDeeplinkEventFalcoEvent").logImmediately(function(){return{event:"attempt_localhost_deeplink",eventLocation:"browser",eventType:"call",funnelSessionId:b,mobile_app_source:"unknown"}})}g["default"]=a}),98);
__d("MWStartRTCCallUtils",["$InternalEnum","I64","Int64Hooks","LSContactBitOffset","LSContactBlockedByViewerStatus","LSContactReachabilityStatusType","LSContactType","LSIntEnum","LSMessagingThreadTypeUtil","LSThreadBitOffset","MWChatIsMessageRequest","MWPActor.react","MessengerDesktopDeepLinkUtils","MessengerDesktopLocalServerRequest","ODS","Promise","ReQL","ReQLSuspense","ZenonRTWebBrowserFeatureSupport","gkx","isFeatureLimitEnabled","logCallAttemptViaLocalhost","promiseDone","react","useIsReadOnlyFeatureLimitedWithThreadType","useMWGetOtherUserContact","useReStore","uuidv4"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l,m,n=j||d("react"),o=n.useCallback,p=n.useRef,q=n.c,r=b("$InternalEnum").Mirrored(["SECURE_VIDEO_UNSUPPORTED","SECURE_VOICE_UNSUPPORTED","VIDEO_SUPPORTED","VOICE_SUPPORTED","VIDEO_UNSUPPORTED","VOICE_UNSUPPORTED"]);function a(a){var e=p(c("uuidv4")()).current;return o(function(f,g,h){var j="/call?threadid="+g+"&isvideocall="+(f?1:0)+"&funnel_id="+e;(m||(m=d("ODS"))).bumpEntityKey(3303,"dapp_calling_entrypoints","initiating_dapp_call");c("logCallAttemptViaLocalhost")({funnelSessionId:e});c("promiseDone")((i||(i=b("Promise"))).all([new(c("MessengerDesktopLocalServerRequest"))(j,d("MessengerDesktopDeepLinkUtils").PORT).setOnLoadEndHandler(function(){}).setErrorHandler(function(b){(m||(m=d("ODS"))).bumpEntityKey(3303,"dapp_calling_entrypoints","call_failed_with_error_"+b),a(f,g,h)}).setTimeoutHandler(function(){(m||(m=d("ODS"))).bumpEntityKey(3303,"dapp_calling_entrypoints","call_timed_out"),a(f,g,h)}).send()]))},[a,e])}function e(a,e,f){var g=p(c("uuidv4")()).current;return d("Int64Hooks").useCallbackInt64(function(h){var j=(k||(k=d("I64"))).to_string(a),l=e==="video"?1:0;j="/call?threadid="+j+"&isvideocall="+l+"&funnel_id="+g;(m||(m=d("ODS"))).bumpEntityKey(3303,"dapp_calling_entrypoints","initiating_dapp_call");c("logCallAttemptViaLocalhost")({funnelSessionId:g});c("promiseDone")((i||(i=b("Promise"))).all([new(c("MessengerDesktopLocalServerRequest"))(j,d("MessengerDesktopDeepLinkUtils").PORT).setOnLoadEndHandler(function(){(m||(m=d("ODS"))).bumpEntityKey(3303,"dapp_calling_entrypoints","call_loaded_successfully")}).setErrorHandler(function(a){(m||(m=d("ODS"))).bumpEntityKey(3303,"dapp_calling_entrypoints","call_failed_with_error_"+a),f(h)}).setTimeoutHandler(function(){(m||(m=d("ODS"))).bumpEntityKey(3303,"dapp_calling_entrypoints","call_timed_out"),f(h)}).send()]))},[e,g,a,f])}function s(a,b,e){var f=q(12);a=v(a);var g,h=!1;if(a.length!==1)g=!1;else{var i,j=a[0];b=d("LSMessagingThreadTypeUtil").isOneToOne(b)&&j!=null&&!(k||(k=d("I64"))).equal(j.blockedByViewerStatus,(l||(l=d("LSIntEnum"))).ofNumber(c("LSContactBlockedByViewerStatus").UNBLOCKED));if(b){f[0]===Symbol["for"]("react.memo_cache_sentinel")?(b=[!1,!1],f[0]=b):b=f[0];return b}g=j!=null?(k||(k=d("I64"))).equal(j.contactType,(l||(l=d("LSIntEnum"))).ofNumber(c("LSContactType").PAGE)):!1;b=j!=null?(b=d("LSContactBitOffset").has(0,j))!=null?b:!0:!0;i=j!=null?(i=d("LSContactBitOffset").has(1,j))!=null?i:!0:!0;h=e&&j!=null&&j.blockedSinceTimestampMs==null&&!g&&(!b||!i)}if(!g){e=!h;j=!h;f[1]!==e||f[2]!==j?(b=[e,j],f[1]=e,f[2]=j,f[3]=b):b=f[3];return b}if(c("gkx")("23431")){f[4]!==a?(i=a.every(u),f[4]=a,f[5]=i):i=f[5];f[6]!==a?(g=a.every(t),f[6]=a,f[7]=g):g=f[7];f[8]!==i||f[9]!==g?(h=[i,g],f[8]=i,f[9]=g,f[10]=h):h=f[10];return h}f[11]===Symbol["for"]("react.memo_cache_sentinel")?(e=[!1,!1],f[11]=e):e=f[11];return e}function t(a){return a==null?!0:d("LSContactBitOffset").has(16,a)}function u(a){return a==null?!0:d("LSContactBitOffset").has(17,a)}function v(a){var b=q(9),e=(h||(h=c("useReStore")))(),g=d("MWPActor.react").useActor(),i;b[0]!==e.tables.participants||b[1]!==e.tables.contacts||b[2]!==a||b[3]!==g?(i=function(){return d("ReQL").fromTableAscending(e.tables.participants,["contactId"]).getKeyRange(a).take(2).filter(function(a){return!(k||(k=d("I64"))).equal(a.contactId,g)}).map(function(a){return d("ReQLSuspense").first(d("ReQL").fromTableAscending(e.tables.contacts,["contactType","blockedSinceTimestampMs","capabilities","capabilities2","blockedByViewerStatus"]).getKeyRange(a.contactId),f.id+":299")})},b[0]=e.tables.participants,b[1]=e.tables.contacts,b[2]=a,b[3]=g,b[4]=i):i=b[4];var j;b[5]!==e||b[6]!==a||b[7]!==g?(j=[e,a,g],b[5]=e,b[6]=a,b[7]=g,b[8]=j):j=b[8];return d("ReQLSuspense").useArray(i,j,f.id+":288")}function w(a){var b=q(22),e=a.folderName,g=a.threadKey,i=a.threadType,j=(h||(h=c("useReStore")))(),m=d("MWPActor.react").useActor(),n;b[0]!==j.tables.messages_ranges_v2__generated||b[1]!==g?(n=function(){return d("ReQL").fromTableDescending(j.tables.messages_ranges_v2__generated,["threadKey"]).getKeyRange(g)},b[0]=j.tables.messages_ranges_v2__generated,b[1]=g,b[2]=n):n=b[2];var o;b[3]!==j||b[4]!==g?(o=[j,g],b[3]=j,b[4]=g,b[5]=o):o=b[5];n=d("ReQLSuspense").useFirst(n,o,f.id+":320")!=null;b[6]!==j.tables.participants||b[7]!==g||b[8]!==m?(o=function(){return d("ReQL").fromTableAscending(j.tables.participants,["threadKey","contactId"]).getKeyRange(g,m)},b[6]=j.tables.participants,b[7]=g,b[8]=m,b[9]=o):o=b[9];var p;b[10]!==j||b[11]!==g||b[12]!==m?(p=[j,g,m],b[10]=j,b[11]=g,b[12]=m,b[13]=p):p=b[13];o=d("ReQLSuspense").useFirst(o,p,f.id+":329")!=null;b[14]===Symbol["for"]("react.memo_cache_sentinel")?(p=["contactReachabilityStatusType"],b[14]=p):p=b[14];p=c("useMWGetOtherUserContact")(g,i,p);var t=d("LSThreadBitOffset").has(25,a),u=d("LSThreadBitOffset").has(24,a),v;b[15]!==i?(v=d("LSMessagingThreadTypeUtil").isArmadilloSecure(i),b[15]=i,b[16]=v):v=b[16];v=v;var w=c("useIsReadOnlyFeatureLimitedWithThreadType")(i)&&(!v||c("isFeatureLimitEnabled")());a=s(g,a.threadType,v);var x=a[0];a=a[1];if(v&&(!d("ZenonRTWebBrowserFeatureSupport").isInsertableStreamsSupported()||!c("gkx")("23430"))){b[17]===Symbol["for"]("react.memo_cache_sentinel")?(v=[r.SECURE_VOICE_UNSUPPORTED,r.SECURE_VIDEO_UNSUPPORTED],b[17]=v):v=b[17];return v}v=(p==null?void 0:p.contactReachabilityStatusType)!=null?(k||(k=d("I64"))).equal(p.contactReachabilityStatusType,(l||(l=d("LSIntEnum"))).ofNumber(c("LSContactReachabilityStatusType").REACHABLE)):!0;p=p==null&&(k||(k=d("I64"))).equal(i,(l||(l=d("LSIntEnum"))).ofNumber(15));o=((k||(k=d("I64"))).equal(i,(l||(l=d("LSIntEnum"))).ofNumber(2))||(k||(k=d("I64"))).equal(i,(l||(l=d("LSIntEnum"))).ofNumber(16)))&&o||(k||(k=d("I64"))).equal(i,(l||(l=d("LSIntEnum"))).ofNumber(1))||(k||(k=d("I64"))).equal(i,(l||(l=d("LSIntEnum"))).ofNumber(15));i=d("MWChatIsMessageRequest").fn(e);e=!p&&!i&&n&&!w&&o&&v;if(e){p=x&&t?r.VOICE_SUPPORTED:r.VOICE_UNSUPPORTED;i=a&&u?r.VIDEO_SUPPORTED:r.VIDEO_UNSUPPORTED;b[18]!==p||b[19]!==i?(n=[p,i],b[18]=p,b[19]=i,b[20]=n):n=b[20];return n}b[21]===Symbol["for"]("react.memo_cache_sentinel")?(w=[r.VOICE_UNSUPPORTED,r.VIDEO_UNSUPPORTED],b[21]=w):w=b[21];return w}g.CanCallResult=r;g.useStartDesktopCall=a;g.useStartMessengerDesktopCall=e;g.useCanCall=w}),98);
__d("useShouldTryWithMessengerDesktop",["MWFacebookUserWithoutMessengerAccess","MessengerDesktopDeepLinkUtils","ODS","gkx","promiseDone","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i;b=h||d("react");var j=b.useEffect,k=b.useRef,l=b.useState,m=b.c;function a(){var a=m(2),b=l(!1),e=b[0],f=b[1],g=k(!1),h=d("MWFacebookUserWithoutMessengerAccess").useIsFacebookUserWithoutMessengerAccess();a[0]!==h?(b=function(){if(g.current)return;g.current=!0;if(h)return;if(c("gkx")("23670")||!d("MessengerDesktopDeepLinkUtils").isMessengerDesktopDeeplinkEligible())return;(i||(i=d("ODS"))).bumpEntityKey(3303,"dapp_calling_entrypoints","is_dapp_running");c("promiseDone")(d("MessengerDesktopDeepLinkUtils").isMessengerDesktopRunning(d("MessengerDesktopDeepLinkUtils").PORT).then(function(a){if(!a||a!==200){a||(i||(i=d("ODS"))).bumpEntityKey(3303,"dapp_calling_entrypoints","localhost_did_not_respond");a===500&&(i||(i=d("ODS"))).bumpEntityKey(3303,"dapp_calling_entrypoints","localhost_responded_but_crashed");return}f(!0)}))},a[0]=h,a[1]=b):b=a[1];j(b);return e}g["default"]=a}),98);
__d("useStartRTCCall",["MWLSStartPhoneCall","MWStartRTCCallUtils","useShouldTryWithMessengerDesktop"],(function(a,b,c,d,e,f,g){"use strict";function a(){var a=c("useShouldTryWithMessengerDesktop")(),b=d("MWLSStartPhoneCall").useMakeRTCCall();b=b[0];var e=d("MWStartRTCCallUtils").useStartDesktopCall(b);return a?e:b}g["default"]=a}),98);
__d("xmaAttachmentUtils",["I64","LSIntEnum","MNXMAPreviewImageDecorationType"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a){a=a.actionUrl;return(a==null?void 0:a.includes("groupcall"))===!0}function b(a){a=a.previewImageDecorationType;if(a==null)return!1;var b=(h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(c("MNXMAPreviewImageDecorationType").DXMA_LIVE));a=h.equal(a,i.ofNumber(c("MNXMAPreviewImageDecorationType").DXMA_LIVE_ENDED));return b||a}function e(a){var b=null;try{a=JSON.parse(a);a!=null&&typeof a==="object"&&Array.isArray(a)===!1&&a.postback_action_text!=null&&(b=a.postback_action_text)}catch(a){b=null}return b}g.isMeetingsAttachment=a;g.isLiveXMA=b;g.getPostbackTextFromCTAContentBlob=e}),98);
__d("useGetMWXMACtaRegistryHandler",["$InternalEnum","Actor","ConstUriUtils","CustomerInformationTemplateFalcoEvent","I64","LSIntEnum","MWChatXmaThirdPartyActionHandler","MWLSImagePostbackCtaHandler","MWLSPostbackCtaHandler","MWLSWebUrlCtaHandler","RoomsLinkUtils","XCometStoriesControllerRouteBuilder","cr:131","cr:236","cr:4538","cr:4539","emptyFunction","gkx","isStringNullOrEmpty","nullthrows","useEmptyFunction","useLSMessagingInitiatingSource","useLSMessagingSource","useMWChatPollXMAActionHandler","useMWLinkHashXMAActionHandler","useMWNavigation","useOpenSubthreadView","useRollcallContributionsXMAActionHandler","useStartRTCCall","xmaAttachmentUtils"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=(f=(e=b("cr:4539"))!=null?e:b("cr:131"))!=null?f:c("useEmptyFunction"),k=(f=(e=b("cr:4538"))!=null?e:b("cr:236"))!=null?f:c("useEmptyFunction"),l=b("$InternalEnum")({SUBTHREAD_LINK:"fb-messenger://community_subthread/"});function a(){var a=c("useLSMessagingInitiatingSource")(),b=c("useLSMessagingSource")(),e=d("Actor").useActor(),f=e[0];e=d("MWLSImagePostbackCtaHandler").usePostbackCtaHandler(b,a);b=c("useStartRTCCall")();var g=d("MWChatXmaThirdPartyActionHandler").useHandler(e,b),m=d("MWLSPostbackCtaHandler").usePostbackCtaHandler(),n=c("useMWLinkHashXMAActionHandler")(),o=c("useMWChatPollXMAActionHandler")(),p=d("useRollcallContributionsXMAActionHandler").useRollcallContributionsXMAActionHandler(),q=d("MWLSWebUrlCtaHandler").useShowWebViewDialog(),r=c("useMWNavigation")();a=k();var s=j({onSuccess:(e=a)!=null?e:c("emptyFunction")}),t=c("useOpenSubthreadView")();return function(a){var b=/^http(s)*\:\/\/m\.me\/([a-z0-9\.\_]+)$/i,e=a.actionUrl!=null&&b.test(a.actionUrl)?(b=a.actionUrl)==null?void 0:b.replace("m.me/","messenger.com/t/"):a.actionUrl,j=a.platformToken,k=a.type_,u=a.title,v=a.messageId,w=a.threadKey,x=a.attachmentFbid,y=a.targetId;b=["Title: "+u,"Type: "+k,"PlatformTokenPresent: "+(j!=null).toString(),"ActionUrlPresent: "+(e!=null).toString(),"ActionContentBlobPresent: "+(a.actionContentBlob!=null).toString()].join(", ");if(k==="xma_roll_call_open_viewer"||k==="xma_prompt_open_viewer_for_text"||k==="xma_roll_call_add_yours")return a.targetId==null?{actionType:"NOT_SUPPORTED",primaryInfo:void 0}:{actionType:"BUTTON",primaryInfo:function(){p(c("nullthrows")(a.targetId),w,null,k,v)},secondaryInfo:void 0};if(k==="xma_rtc_audio"||k==="xma_rtc_missed_audio"||k==="xma_rtc_new_audio_default"||k==="xma_rtc_ended_audio"){var z={hasVideo:!1,threadId:(h||(h=d("I64"))).to_string(w),trigger:k};y!=null&&(z.representedID=(h||(h=d("I64"))).to_string(y));return{actionType:"BUTTON",primaryInfo:function(){return g({NAME:"MakeRtcCall",VAL:z})},secondaryInfo:void 0}}if(k==="xma_rtc_video"||k==="xma_rtc_new_video_default"||k==="xma_rtc_new_video_from_fb_share"||k==="xma_rtc_new_video_from_fb_video_share"||k==="xma_rtc_missed_video"||k==="xma_rtc_ended_video")return{actionType:"BUTTON",primaryInfo:function(){return g({NAME:"MakeRtcCall",VAL:{hasVideo:!0,threadId:(h||(h=d("I64"))).to_string(w),trigger:k}})},secondaryInfo:void 0};if(k==="xma_postback"){var A=c("gkx")("3418")&&a.actionContentBlob!=null?d("xmaAttachmentUtils").getPostbackTextFromCTAContentBlob(a.actionContentBlob):null;return{actionType:"BUTTON",primaryInfo:function(){var a;return m(j,(a=A)!=null?a:u)},secondaryInfo:[(h||(h=d("I64"))).to_string(w),31]}}if(k==="xma_smag_postback"){var B=a.actionContentBlob!=null?JSON.parse(c("nullthrows")(a.actionContentBlob)):{},C=B.dialog;return{actionType:"BUTTON",primaryInfo:function(){return g({NAME:"HandleSMAGPostback",VAL:{dialog:C!=null?C:void 0,message:u,platformToken:j,url:e}})},secondaryInfo:void 0}}if(k==="xma_open_dialog"){if(e==null)return{actionType:"CTA_ERROR",primaryInfo:"Expected an open dialog url but didn't get any",secondaryInfo:"messenger_business_core_product"};B=(B=d("ConstUriUtils").getUri(e))==null?void 0:B.getQueryData==null?void 0:B.getQueryData();if(B==null)return{actionType:"CTA_ERROR",primaryInfo:"Expected a valid open dialog url but didn't get any",secondaryInfo:"messenger_business_core_product"};var D=String(B.page_id).toString(),E=String(B.guest_id).toString();return{actionType:"BUTTON",primaryInfo:function(){return g({NAME:"ShowGuestChatHistory",VAL:{guestId:E,pageId:D}})},secondaryInfo:void 0}}if(k==="xma_p2p_payment_details"||k==="xma_p2p_request_pay"||k==="xma_p2p_payment_details_receive_money"||k==="xma_p2p_verify_info"){var F=a.targetId;return F==null?{actionType:"CTA_ERROR",primaryInfo:"P2P Transaction encounterd without txn id",secondaryInfo:"messenger_privacy_web"}:{actionType:"BUTTON",primaryInfo:function(){return g({NAME:"P2PPaymentTransactionDetails",VAL:{currentStatus:null,id:(h||(h=d("I64"))).to_string(F)}})},secondaryInfo:void 0}}if(k==="fill_in_thread_form"||k==="filled_in_thread_form_successfully"){var G=a.actionContentBlob;return{actionType:"BUTTON",primaryInfo:function(){return g({NAME:"ShowInThreadFormDetails",VAL:JSON.parse(c("nullthrows")(G))})},secondaryInfo:void 0}}if(k==="xma_join_from_portal"&&e!=null)return{actionType:"BUTTON",primaryInfo:function(){return g({NAME:"MakeJoinRoomFromPortal",VAL:{linkUrl:e}})},secondaryInfo:void 0};if(k==="xma_live_location_sharing")return{actionType:"BUTTON",primaryInfo:function(){return g(a.nativeUrl!=null?{NAME:"ShowStaticLocationDetails",VAL:{msgId:v}}:{NAME:"ShowLiveLocationDetails",VAL:{messageId:v,titleString:u}})},secondaryInfo:void 0};if(k==="xma_web_url"&&(e!=null&&e.includes("://location_share")))return{actionType:"BUTTON",primaryInfo:function(){return g({NAME:"ShowStaticLocationDetails",VAL:{msgId:v}})},secondaryInfo:void 0};var H=a.actionContentBlob;if(k==="xma_join_community"||k==="xma_join_community_chat"||k==="xma_see_community"||k==="xma_see_community_chat")return{actionType:"BUTTON",primaryInfo:function(){return n(e,k)},secondaryInfo:void 0};if(k==="xma_poll_details_button"||k==="xma_poll_details_card")return{actionType:"BUTTON",primaryInfo:function(){return o(y,H)},secondaryInfo:void 0};if(k==="xma_otp_verification")return{actionType:"BUTTON",primaryInfo:function(){return g({NAME:"ShowPhoneVerificationDialog",VAL:JSON.parse(c("nullthrows")(H))})},secondaryInfo:void 0};if(H!=null&&y!=null)try{var I=JSON.parse(H);if(k==="xma_admod_chat_member_request")return{actionType:"BUTTON",primaryInfo:function(){var a=I.activityLogItemID,b=I.groupID,c=I.profileID;return g({NAME:"AdmodChatsShowMemberRequest",VAL:{activityLogItemId:a!=null?JSON.stringify(a):"",groupId:b!=null?JSON.stringify(b):"",profileId:c!=null?JSON.stringify(c):"",targetId:y!=null?(h||(h=d("I64"))).to_string(y):""}})},secondaryInfo:void 0};else if(k==="xma_admod_chat_pending_post")return{actionType:"BUTTON",primaryInfo:function(){var a=I.activityLogItemID,b=I.authorID,c=I.groupID,e=I.postID;return g({NAME:"AdmodChatsShowPendingPost",VAL:{activityLogItemId:a!=null?JSON.stringify(a):"",authorId:b!=null?JSON.stringify(b):"",groupId:c!=null?JSON.stringify(c):"",postId:e!=null?JSON.stringify(e):"",targetId:y!=null?(h||(h=d("I64"))).to_string(y):""}})},secondaryInfo:void 0}}catch(a){if(k!=="marketplace_xma_call_function")return{actionType:"NOT_SUPPORTED",primaryInfo:void 0}}var J=a.targetId;if(J!=null){var K={ctaId:a.ctaId,ctaType:k,orderID:(h||(h=d("I64"))).to_string(J)};if(k==="xma_p2m_payment_details")return{actionType:"BUTTON",primaryInfo:function(){return g({NAME:"P2MOrderDetails",VAL:K})},secondaryInfo:void 0};else if(k==="xma_p2m_attach_receipt")return{actionType:"BUTTON",primaryInfo:function(){return g({NAME:"P2MAttachBankSlip",VAL:K})},secondaryInfo:void 0};else if(k==="xma_p2m_offsite_bank_transfer")return{actionType:"BUTTON",primaryInfo:function(){return g({NAME:"P2MOffsiteBankTransferCTA",VAL:K})},secondaryInfo:void 0};else if(k==="xma_p2m_mark_as_paid")return{actionType:"BUTTON",primaryInfo:function(){return g({NAME:"P2MMarkAsPaid",VAL:{ctaId:a.ctaId,ctaType:k,orderID:(h||(h=d("I64"))).to_string(J)}})},secondaryInfo:void 0};else if(k==="xma_p2m_mark_as_shipped")return{actionType:"BUTTON",primaryInfo:function(){return g({NAME:"P2MMarkAsShipped",VAL:{ctaId:a.ctaId,ctaType:k,orderID:(h||(h=d("I64"))).to_string(J)}})},secondaryInfo:void 0};else if(k==="xma_p2m_mark_as_received")return{actionType:"BUTTON",primaryInfo:function(){return g({NAME:"P2MMarkAsReceived",VAL:{ctaId:a.ctaId,ctaType:k,orderID:(h||(h=d("I64"))).to_string(J)}})},secondaryInfo:void 0};if(k==="xma_p2m_checkout"){var L={orderID:(h||(h=d("I64"))).to_string(J),pageID:h.to_string(w)};return{actionType:"BUTTON",primaryInfo:function(){return g({NAME:"P2MCheckout",VAL:L})},secondaryInfo:void 0}}if(k==="xma_p2m_informational_message_bottom_sheet"){var M={contentType:JSON.parse(c("nullthrows")(H)),orderID:(h||(h=d("I64"))).to_string(J),pageID:h.to_string(w)};return{actionType:"BUTTON",primaryInfo:function(){return g({NAME:"P2MInformationalMessageBottomSheet",VAL:M})},secondaryInfo:void 0}}}if(k==="xma_p2m_async_controller"){var N={payload:JSON.parse(c("nullthrows")(H))};return N.payload.action_type==="mark_as_x"&&J!=null?{actionType:"BUTTON",primaryInfo:function(){var b;return g({NAME:"P2MMarkAsX",VAL:{ctaId:a.ctaId,ctaType:(b=N.payload.extra_data.cta_type)!=null?b:"",orderID:(h||(h=d("I64"))).to_string(J)}})}}:{actionType:"BUTTON",primaryInfo:function(){return g({NAME:"P2MAsyncControllerDialog",VAL:N})}}}if(k==="xma_ads_ai_survey")return{actionType:"BUTTON",primaryInfo:function(){return g({NAME:"ShowAdsAISurveyModal",VAL:JSON.parse(c("nullthrows")(H))})},secondaryInfo:void 0};if(k==="XMA_ADS_AI_ASSET_SELECTION"){var O=H!=null?JSON.parse(c("nullthrows")(H)):{};return{actionType:"BUTTON",primaryInfo:function(){var a;return g({NAME:"ShowAdsAILowProbabilityEntitySelectionModal",VAL:{adAccountID:O.ad_account_id,allowDraftSelection:(a=O.allow_draft_selection)!=null?a:!1,threadKey:w}})},secondaryInfo:void 0}}if(k==="xma_customer_information"){var P=(h||(h=d("I64"))).to_string(w);c("CustomerInformationTemplateFalcoEvent").log(function(){return{consumer_id:f,event_type:"mw_xma_impression",form_id:a.attachmentFbid,page_id:P}});var Q={actorId:f,eeMessageId:a.attachmentFbid,messageId:a.messageId,pageId:P};return{actionType:"BUTTON",primaryInfo:function(){return g({NAME:"BuyerShippingAddress",VAL:Q})},secondaryInfo:void 0}}if(H==null&&(k==="xma_direct_send"||k==="xma_biz_inbox_form_send"||k==="xma_feedback_send"))return{actionType:"CTA_ERROR",primaryInfo:"Expected pii_form data but didn't get any",secondaryInfo:"mb_apix"};if(k==="xma_direct_send")return{actionType:"BUTTON",primaryInfo:function(){return g({NAME:"ShowPIIForm",VAL:JSON.parse(c("nullthrows")(H))})},secondaryInfo:[(h||(h=d("I64"))).to_string(w),45]};if(k==="xma_biz_inbox_form_send")return{actionType:"BUTTON",primaryInfo:function(){return g({NAME:"ShowPIIFormForFormBuilder",VAL:{ctaType:k,nuxData:{description:"",seen:!0,title:"",url:"",url_text:""},piiForm:JSON.parse(c("nullthrows")(H))}})},secondaryInfo:[(h||(h=d("I64"))).to_string(w),45]};if(k==="xma_feedback_send")return{actionType:"BUTTON",primaryInfo:function(){return g({NAME:"ShowCustomerFeedbackForm",VAL:{feedbackFormId:c("nullthrows")(H)}})},secondaryInfo:[(h||(h=d("I64"))).to_string(w),69]};if(k==="xma_workplace_chat_bot_submit_feedback"){var R={feedbackActionContentBlob:c("nullthrows")(H)};return{actionType:"BUTTON",primaryInfo:function(){return g({NAME:"WorkplaceChatBotSubmitFeedback",VAL:R})},secondaryInfo:void 0}}if(k==="xma_work_meetings_invite"){B=d("RoomsLinkUtils").getRoomsLinkHash((B=a==null?void 0:a.actionUrl)!=null?B:"");return B!=null?{actionType:"POPOVER_BUTTON",primaryInfo:B}:{actionType:"NOT_SUPPORTED",primaryInfo:void 0}}if(k==="xma_account_link")return e==null?{actionType:"CTA_ERROR",primaryInfo:"Expected an account link url but didn't get any",secondaryInfo:"mb_apix"}:{actionType:"BUTTON",primaryInfo:function(){return g({NAME:"OpenAccountLinkUrl",VAL:e})},secondaryInfo:[(h||(h=d("I64"))).to_string(w),49]};if(k==="xma_open_joinable_call_invite_url")return{actionType:"BUTTON",primaryInfo:function(){var a;return g({NAME:"MakeWorkJoinableCallInvite",VAL:{linkUrl:(a=e)!=null?a:""}})},secondaryInfo:void 0};if(k==="xma_montage_share"){if(a.targetId==null)return{actionType:"NOT_SUPPORTED",primaryInfo:void 0};B=(B=c("XCometStoriesControllerRouteBuilder").buildUri({card_id:window.btoa("S:_ISC:"+(h||(h=d("I64"))).to_string(a.targetId)),view_single:!0}).setDomain("www.facebook.com"))==null?void 0:B.setProtocol("https");return B==null?{actionType:"NOT_SUPPORTED",primaryInfo:void 0}:{actionType:"URL",primaryInfo:c("nullthrows")(B).toString(),secondaryInfo:void 0}}if(k==="marketplace_xma_call_function")return a.actionContentBlob==null||a.targetId==null?{actionType:"NOT_SUPPORTED",primaryInfo:void 0}:{actionType:"BUTTON",primaryInfo:function(){return g({NAME:"ProcessMarketplaceCallFunction",VAL:{actionType:c("nullthrows")(a.actionContentBlob),attachmentFbid:x,messageId:v,targetId:c("nullthrows")(a.targetId)}})},secondaryInfo:void 0};if(k==="marketplace_xma_open_dialog"){if(e==null||a.actionContentBlob==null)return{actionType:"CTA_ERROR",primaryInfo:"Expected an open dialog url and actionContentBlob but didn't get any",secondaryInfo:"messenger_business_core_product"};B=d("ConstUriUtils").getUri(e);if(B==null)return{actionType:"CTA_ERROR",primaryInfo:"Found invalid url when creating CTA",secondaryInfo:"messenger_business_core_product"};var S=String(B.getQueryParam("listingID")).toString();return{actionType:"BUTTON",primaryInfo:function(){return g({NAME:"OpenMarketplaceDialog",VAL:{ctaType:c("nullthrows")(a.actionContentBlob),listingId:S,threadId:(h||(h=d("I64"))).to_string(w)}})},secondaryInfo:void 0}}if(k==="xma_ctm_in_thread_multiphoto_reply_image"){if(a.actionContentBlob==null)return{actionType:"NOT_SUPPORTED",primaryInfo:void 0};try{B=JSON.parse(a.actionContentBlob);var T=B.action_prefill,U=B.ad_id,V=B.customer_id,aa=B.index,ba=B.page_id,W=B.reply_image_uri;if(T==null||W==null)return{actionType:"NOT_SUPPORTED",primaryInfo:void 0};var ca='{"in_thread_multiphoto_xma_reply": true}';return{actionType:"BUTTON",primaryInfo:function(){return g({NAME:"SendImagePostback",VAL:{image:W,loggingDetails:{ad_id:U.toString(),consumer_id:V.toString(),index:aa,page_id:ba.toString()},message:T,platformToken:c("isStringNullOrEmpty")(j)?ca:j}})},secondaryInfo:void 0}}catch(a){return{actionType:"NOT_SUPPORTED",primaryInfo:void 0}}}if(k==="xma_disabled_cta")return{actionType:"DISABLED_BUTTON",primaryInfo:void 0};if(k==="xma_open_native"){B=a.nativeUrl;if(B!=null&&B.startsWith("fb-messenger://user-thread/")){var X=B.substr("fb-messenger://user-thread/".length);return{actionType:"DEEPLINK",primaryInfo:{loggingDetails:[(h||(h=d("I64"))).to_string(w),33],threadKey:h.of_string(X)}}}if(B!=null&&B.startsWith(l.SUBTHREAD_LINK)){try{X=new URL(B),B=X.searchParams.get("subthread_fbid")}catch(a){B=null}if(t!=null&&B!=null){var da=(h||(h=d("I64"))).of_string(B);return{actionType:"BUTTON",primaryInfo:function(){return t(da)},secondaryInfo:void 0}}}var Y=a.actionContentBlob;if(Y!=null)return{actionType:"BUTTON",primaryInfo:function(){return q(Y)},secondaryInfo:void 0};if(e!=null)if(e.includes("://m.me/j/")){if(a.targetId!=null){var ea=(h||(h=d("I64"))).to_string(a.targetId);return{actionType:"BUTTON",primaryInfo:function(){return r.openInbox({threadKey:(h||(h=d("I64"))).of_string(ea),threadType:(i||(i=d("LSIntEnum"))).ofNumber(152)},"xmaAttachment")},secondaryInfo:void 0}}return{actionType:"BUTTON",primaryInfo:function(){return s==null?void 0:s(e)},secondaryInfo:void 0}}else return{actionType:"URL",primaryInfo:e,secondaryInfo:[(h||(h=d("I64"))).to_string(w),33]};return{actionType:"CTA_ERROR",primaryInfo:"No Url found while parsing Open Native XMA "+b,secondaryInfo:"messenger_privacy_web"}}var Z=a.targetId;if(Z!=null)if(k==="xma_services_confirm_booking")return{actionType:"BUTTON",primaryInfo:function(){return g({NAME:"ConfirmAppointmentBooking",VAL:{requestID:(h||(h=d("I64"))).to_string(Z)}})},secondaryInfo:void 0};else if(k==="xma_services_view_appointment_details"){if(e!=null){B=(X=d("ConstUriUtils").getUri(e))==null?void 0:X.getQueryData==null?void 0:X.getQueryData();var fa=String(B==null?void 0:B.asset_id).toString();return{actionType:"BUTTON",primaryInfo:function(){return g({NAME:"ShowBookingDetails",VAL:{pageId:fa,requestId:(h||(h=d("I64"))).to_string(Z)}})},secondaryInfo:void 0}}}else if(k==="lead_forms_response"&&e!==null)return{actionType:"BUTTON",primaryInfo:function(){return g({NAME:"ViewFormDetails",VAL:{responseID:(h||(h=d("I64"))).to_string(Z)}})},secondaryInfo:void 0};if(H!=null&&H.length>0&&H!=="{}"&&!H.includes("notification_message_token")&&!H.includes("contact_type"))return{actionType:"BUTTON",primaryInfo:function(){return q(H)},secondaryInfo:void 0};if(e!=null){if(a.enableExtensions===!0){var $={actionLink:e,pageID:(h||(h=d("I64"))).to_string(w),sourceTitle:(X=u)!=null?X:"",userID:h.to_string(w)};if(k==="xma_open_rich_widget")return{actionType:"BUTTON",primaryInfo:function(){return g({NAME:"ShowMessengerRichWidgetExtension",VAL:$})},secondaryInfo:[(h||(h=d("I64"))).to_string(w),33]};else return{actionType:"BUTTON",primaryInfo:function(){return g({NAME:"ShowMessengerExtensions",VAL:$})},secondaryInfo:[(h||(h=d("I64"))).to_string(w),33]}}return{actionType:"URL",primaryInfo:e,secondaryInfo:[(h||(h=d("I64"))).to_string(w),32]}}return{actionType:"CTA_ERROR",primaryInfo:"Unknown CTA encountered while parsing XMA. "+b,secondaryInfo:"messenger_privacy_web"}}}g["default"]=a}),98);
__d("useMWXMAInformedAttachmentLabel",["fbt","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=(i||d("react")).c;function a(a,b,c){var d=j(25);a=a===void 0?"":a;c=c===void 0?"":c;var e;d[0]!==a?(e=h._("__JHASH__pK0fcBDpaEV__JHASH__",[h._param("attachment item title",a)]),d[0]=a,d[1]=e):e=d[1];var f;d[2]!==a?(f=h._("__JHASH__dJ_qZg1Bnj2__JHASH__",[h._param("attachment item title",a)]),d[2]=a,d[3]=f):f=d[3];var g;d[4]!==a?(g=h._("__JHASH__9UILySlE-wD__JHASH__",[h._param("attachment item title",a)]),d[4]=a,d[5]=g):g=d[5];var i;d[6]!==a?(i=h._("__JHASH__7LJaDiii2kF__JHASH__",[h._param("attachment item title",a)]),d[6]=a,d[7]=i):i=d[7];var k;d[8]!==a?(k=h._("__JHASH__JiWZCmbD51v__JHASH__",[h._param("attachment item title",a)]),d[8]=a,d[9]=k):k=d[9];var l;d[10]!==a?(l=h._("__JHASH__gmdVuVfF78Q__JHASH__",[h._param("attachment item title",a)]),d[10]=a,d[11]=l):l=d[11];var m;d[12]!==e||d[13]!==f||d[14]!==g||d[15]!==i||d[16]!==k||d[17]!==l?(m={ALTERED_MEDIA:e,ALTERED_PHOTO:f,FALSE_NEWS:g,MISLEADING_NEWS:i,MISSING_CONTEXT:k,SENSITIVE:l},d[12]=e,d[13]=f,d[14]=g,d[15]=i,d[16]=k,d[17]=l,d[18]=m):m=d[18];e=m;if(b==null||e[b]==null){if(a!=null&&a.length>0){if(c!=null&&c.length>0){d[19]!==a||d[20]!==c?(f=h._("__JHASH__MyCNS8a0zsm__JHASH__",[h._param("attachment item title",a),h._param("attachment item description",c)]),d[19]=a,d[20]=c,d[21]=f):f=d[21];return f}d[22]!==a?(g=h._("__JHASH__puD6Qkz5YPM__JHASH__",[h._param("attachment item title",a)]),d[22]=a,d[23]=g):g=d[23];return g}d[24]===Symbol["for"]("react.memo_cache_sentinel")?(i=h._("__JHASH__jjBS3qmKgnt__JHASH__"),d[24]=i):i=d[24];return i}return e[b]}g["default"]=a}),226);
__d("MWXMAAttachmentActionTriggerDefault.react",["BizInboxStateContext","I64","MWInboxRouteBuilder","MWLSThread","MWXLink.react","MWXMAAttachmentActionTriggerWithOpenChatTab.react","MWXPressable.react","MessengerWebUXLogger","MessengerWebUXLoggerXMAEventLoggingImpl","ReQL","ReQLSuspense","isCometRouterUrl","justknobx","logXMACtaClicked","react","react-forget-runtime","recoverableViolation","useGetMWXMACtaRegistryHandler","useMWXMAInformedAttachmentLabel","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=j||(j=d("react"));b=j;b.useContext;var l=b.c,m={link:{":hover_textDecoration":"x1lku1pv",$$css:!0}};function a(a){var b=l(39),e=a.attachment,g=a.attachmentItem,j=a.children;a=d("react-forget-runtime").useContextWithBailoutExperiment__unstable(c("BizInboxStateContext"),o);a=a.pageID;var p=(h||(h=c("useReStore")))(),q=g.defaultCtaId,r=g.defaultCtaType,s=g.threadKey,t=c("useMWXMAInformedAttachmentLabel")(g==null?void 0:g.titleText,e==null?void 0:e.gatingTitle,e==null?void 0:e.subtitleText),u;b[0]!==p.tables.messages||b[1]!==e.messageId?(u=function(){return d("ReQL").fromTableAscending(p.tables.messages.index("messageId")).getKeyRange(e.messageId)},b[0]=p.tables.messages,b[1]=e.messageId,b[2]=u):u=b[2];var v;b[3]!==p||b[4]!==e.messageId?(v=[p,e.messageId],b[3]=p,b[4]=e.messageId,b[5]=v):v=b[5];var w=d("ReQLSuspense").useFirst(u,v,f.id+":67");b[6]!==p.tables.attachment_ctas||b[7]!==q?(u=function(){var a;return d("ReQL").fromTableAscending(p.tables.attachment_ctas).getKeyRange((a=q)!=null?a:(i||(i=d("I64"))).zero)},b[6]=p.tables.attachment_ctas,b[7]=q,b[8]=u):u=b[8];b[9]!==p||b[10]!==q?(v=[p,q],b[9]=p,b[10]=q,b[11]=v):v=b[11];var x=d("ReQLSuspense").useFirst(u,v,f.id+":74");u=c("useGetMWXMACtaRegistryHandler")();var y=c("MessengerWebUXLogger").useInteractionLogger(),z=d("MessengerWebUXLoggerXMAEventLoggingImpl").useXMAEventsClickLogger(),A=d("MessengerWebUXLoggerXMAEventLoggingImpl").useXMAEventsRedirectDefaultToFBLogger(),B=d("MessengerWebUXLoggerXMAEventLoggingImpl").useXMAEventOpenInFBLogger(),C=d("MWLSThread").useThread(s,n);v=e.defaultCtaType==="xma_prompt_open_viewer_for_text";if(x==null)return j;var D;if(b[12]!==a||b[13]!==r||b[14]!==x||b[15]!==u||b[16]!==g.titleText||b[17]!==g.defaultCtaTitle||b[18]!==y||b[19]!==s||b[20]!==C||b[21]!==z||b[22]!==e||b[23]!==w||b[24]!==A||b[25]!==v||b[26]!==j||b[27]!==B||b[28]!==t){D=Symbol["for"]("react.early_return_sentinel");bb0:{if(a!=null&&(r==="xma_rtc_audio"||r==="xma_rtc_missed_audio"||r==="xma_rtc_new_audio_default"||r==="xma_rtc_ended_audio")){var E=babelHelpers["extends"]({},x,{targetId:(i||(i=d("I64"))).of_string(a)});E=u(E)}else E=u(x);switch(E.actionType){case"BUTTON":var F=E,G=F.primaryInfo,H=F.secondaryInfo;D=k.jsx(c("MWXPressable.react"),{"aria-label":(F=g.titleText)!=null?F:g.defaultCtaTitle,hideHoverOverlay:v,onPress:function(){y==null?void 0:y({ctaType:r,eventName:"open_xma_attachment_cta",threadKey:s,threadType:C});d("logXMACtaClicked").logXMACtaClicked({cta:x,loggingDetails:H,source:1});z==null?void 0:z({attachment:e,clickCategory:2,message:w,threadType:C});A({attachment:e,message:w,threadType:C});return G()},children:j});break bb0;case"DISABLED_BUTTON":F=(F=g.titleText)!=null?F:"";var I;b[30]!==F||b[31]!==j?(I=k.jsx(c("MWXPressable.react"),{"aria-label":F,disabled:!0,children:j}),b[30]=F,b[31]=j,b[32]=I):I=b[32];D=I;break bb0;case"URL":F=E.primaryInfo;var J=c("isCometRouterUrl")(F);if(!(F.startsWith("http")||F.startsWith("/"))){D=j;break bb0}var K=E.secondaryInfo;b[33]!==J||b[34]!==B||b[35]!==e||b[36]!==w||b[37]!==C?(I=function(a){J&&a&&B({attachment:e,message:w,threadType:C})},b[33]=J,b[34]=B,b[35]=e,b[36]=w,b[37]=C,b[38]=I):I=b[38];D=k.jsx(c("MWXLink.react"),{href:F,label:t,onClick:function(){d("logXMACtaClicked").logXMACtaClicked({cta:x,loggingDetails:K,source:1}),z==null?void 0:z({attachment:e,clickCategory:2,message:w,threadType:C}),A({attachment:e,isDirectToExternal:!J,message:w,threadType:C})},onNavigate:I,target:c("justknobx")._("1677")?void 0:"_blank",xstyle_DEPRECATED:m.link,children:j});break bb0;case"DEEPLINK":F=E.primaryInfo;var L=F.loggingDetails;I=F.threadKey;var M=function(){d("logXMACtaClicked").logXMACtaClicked({cta:x,loggingDetails:L,source:1}),z==null?void 0:z({attachment:e,clickCategory:2,message:w,threadType:C}),A==null?void 0:A({attachment:e,message:w,threadType:C})},N=d("MWInboxRouteBuilder").buildURL({thread_key:(i||(i=d("I64"))).to_string(I)});D=k.jsx(c("MWXMAAttachmentActionTriggerWithOpenChatTab.react"),{threadKey:I,children:function(a){return k.jsx(c("MWXLink.react"),{href:N,onClick:function(b){a(b);return M()},preventLocalNavigation:!0,xstyle_DEPRECATED:m.link,children:j})}});break bb0;case"CTA_ERROR":c("recoverableViolation")(E.primaryInfo,E.secondaryInfo,void 0,{trackOnly:!0});D=j;break bb0;case"NOT_SUPPORTED":D=j;break bb0;case"POPOVER_BUTTON":D=j;break bb0}}b[12]=a;b[13]=r;b[14]=x;b[15]=u;b[16]=g.titleText;b[17]=g.defaultCtaTitle;b[18]=y;b[19]=s;b[20]=C;b[21]=z;b[22]=e;b[23]=w;b[24]=A;b[25]=v;b[26]=j;b[27]=B;b[28]=t;b[29]=D}else D=b[29];if(D!==Symbol["for"]("react.early_return_sentinel"))return D}function n(a){return a.threadType}function o(a){return[a.pageID]}g["default"]=a}),98);
__d("MWXMAAttachmentActionTrigger.react",["MWXMAAttachmentActionTriggerDefault.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||(h=d("react"))).c,j=h;function a(a){var b=i(4),d=a.attachment,e=a.attachmentItem,f=a.children;a=a.isPressable;if(a){b[0]!==d||b[1]!==e||b[2]!==f?(a=j.jsx(c("MWXMAAttachmentActionTriggerDefault.react"),{attachment:d,attachmentItem:e,children:f}),b[0]=d,b[1]=e,b[2]=f,b[3]=a):a=b[3];return a}else return f}g["default"]=a}),98);
__d("MWRollCallXMAAttachmentItem.react",["BaseImage.react","MWXImage.react","MWXText.react","MWXVideoStatusListener.react","gkx","isStringNullOrEmpty","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;b.useCallback;var j=b.useEffect,k=b.useRef,l=b.c,m=160,n=213,o={avatar:{borderTopStartRadius:"x14yjl9h",borderTopEndRadius:"xudhj91",borderBottomEndRadius:"x18nykt9",borderBottomStartRadius:"xww2gxu",$$css:!0},media:{backgroundColor:"xwcfey6",backgroundPosition:"x1xsqp64",backgroundSize:"x18d0r48",borderTopStartRadius:"xfh8nwu",borderTopEndRadius:"xoqspk4",borderBottomEndRadius:"x12v9rci",borderBottomStartRadius:"x138vmkv",objectFit:"xl1xv1r",$$css:!0}};function a(a){var b=l(40),d=a.attachmentItem,e=a.mediaRenderQpl;a=d.faviconUrl;var f=d.playableUrl,g=d.previewUrl,h=d.subtitleText;d=d.titleText;var p,q;b[0]!==e||b[1]!==f||b[2]!==g?(p=function(){e==null?void 0:e.addPoint("render-roll-call-xma-attachment-item",{bool:{has_playable_url:!c("isStringNullOrEmpty")(f),has_preview_url:!c("isStringNullOrEmpty")(g)}}),!c("isStringNullOrEmpty")(f)&&!c("isStringNullOrEmpty")(g)&&(e==null?void 0:e.endSuccess())},q=[e,f,g],b[0]=e,b[1]=f,b[2]=g,b[3]=p,b[4]=q):(p=b[3],q=b[4]);j(p,q);p=k(null);b[5]!==e?(q=function(a){e==null?void 0:e.endFail("load-video-error",{string:{video_error_name:a}})},b[5]=e,b[6]=q):q=b[6];q=q;var r;b[7]!==e?(r=function(){e==null?void 0:e.endSuccess()},b[7]=e,b[8]=r):r=b[8];r=r;if(!c("isStringNullOrEmpty")(f)){var s;b[9]===Symbol["for"]("react.memo_cache_sentinel")?(s="xfh8nwu xoqspk4 x12v9rci x138vmkv xwfyxwz x1xx6w2s x6ikm8r x10wlt62 xq1dxzn",b[9]=s):s=b[9];b[10]!==q||b[11]!==r?(p=i.jsx(c("MWXVideoStatusListener.react"),{onError:q,onLoad:r,videoRef:p}),b[10]=q,b[11]=r,b[12]=p):p=b[12];b[13]===Symbol["for"]("react.memo_cache_sentinel")?(q="xwcfey6 x1xsqp64 x18d0r48 xfh8nwu xoqspk4 x12v9rci x138vmkv xl1xv1r",b[13]=q):q=b[13];b[14]!==f?(r=i.jsx("video",{className:q,height:n,muted:!0,src:f,width:m}),b[14]=f,b[15]=r):r=b[15];b[16]!==p||b[17]!==r?(q=i.jsxs("div",{className:s,children:[p,r]}),b[16]=p,b[17]=r,b[18]=q):q=b[18];return q}else if(!c("isStringNullOrEmpty")(g)){b[19]===Symbol["for"]("react.memo_cache_sentinel")?(s="xfh8nwu xoqspk4 x12v9rci x138vmkv xwfyxwz x1xx6w2s x6ikm8r x10wlt62 xq1dxzn",b[19]=s):s=b[19];b[20]!==e?(p=e==null?void 0:e.endFail("load-image-error"),b[20]=e,b[21]=p):p=b[21];b[22]!==e?(r=e==null?void 0:e.endSuccess(),b[22]=e,b[23]=r):r=b[23];b[24]!==p||b[25]!==r||b[26]!==g?(q=i.jsx("div",{className:s,children:i.jsx(c("BaseImage.react"),{height:n,onError:p,onLoad:r,src:g,width:m,xstyle:o.media})}),b[24]=p,b[25]=r,b[26]=g,b[27]=q):q=b[27];return q}else if(c("gkx")("7782")&&!c("isStringNullOrEmpty")(d)&&!c("isStringNullOrEmpty")(a)){b[28]===Symbol["for"]("react.memo_cache_sentinel")?(s="xfh8nwu xoqspk4 x12v9rci x138vmkv xwfyxwz x1xx6w2s x6ikm8r x10wlt62 xq1dxzn x9bbmet x78zum5 xdt5ytf xz9dl7a xn6708d xsag5q8 x1ye3gou",b[28]=s):s=b[28];b[29]!==a?(p=i.jsx(c("MWXImage.react"),{height:24,src:a,width:24,xstyle:o.avatar}),b[29]=a,b[30]=p):p=b[30];b[31]===Symbol["for"]("react.memo_cache_sentinel")?(r={className:"x1iyjqo2 xyamay9 x1l90r2v x1pi30zi"},b[31]=r):r=b[31];b[32]!==d?(q=i.jsx("div",babelHelpers["extends"]({},r,{children:i.jsx(c("MWXText.react"),{numberOfLines:6,type:"entityHeaderMeta3",children:d})})),b[32]=d,b[33]=q):q=b[33];b[34]!==h?(a=c("isStringNullOrEmpty")(h)?null:i.jsx("div",babelHelpers["extends"]({className:"x2lah0s x84yb8i"},{children:i.jsx(c("MWXText.react"),{type:"body4",children:h})})),b[34]=h,b[35]=a):a=b[35];b[36]!==p||b[37]!==q||b[38]!==a?(r=i.jsxs("div",{className:s,children:[p,q,a]}),b[36]=p,b[37]=q,b[38]=a,b[39]=r):r=b[39];return r}return null}g["default"]=a}),98);
__d("MWXMAAttachmentItemCtaButtonBase.react",["ix","AdsMessengerContext.react","I64","ImageIconSource","LSCTAIconType","LSIntEnum","MWInboxRouteBuilder","MWLSThread","MessengerWebUXLogger","ReQL","ReQLSuspense","react","recoverableViolation","requireDeferred","useReStore"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l,m=j||(j=d("react"));b=j;var n=b.useEffect,o=b.c,p=c("requireDeferred")("ZenonUserActionLoggerCommon").__setRef("MWXMAAttachmentItemCtaButtonBase.react");function q(a){if(a==null)return null;switch((l||(l=d("LSIntEnum"))).toNumber(a)){case c("LSCTAIconType").NONE:return null;case c("LSCTAIconType").FB:return new(c("ImageIconSource"))(h("814640"),16,16);default:return null}}function a(a){var b=o(37),e=a.ctaIconType,g=a.ctaId,h=a.getCtaRegistryHandler,j=a.renderButtonActionNonEventButton,l=a.renderDeeplinkActionButton,s=a.renderDisabledButtonActionButton,t=a.renderPopoverMenuButtonActionButton,u=a.renderUrlActionButton,v=a.threadKey,w=a.title,x=a.type,y=(i||(i=c("useReStore")))();a=d("MWLSThread").useThread(v,r);var z;b[0]!==x||b[1]!==v||b[2]!==a?(z={ctaType:x,eventName:"xma_attachment_cta",threadKey:v,threadType:a},b[0]=x,b[1]=v,b[2]=a,b[3]=z):z=b[3];v=c("MessengerWebUXLogger").useImpressionLoggerRef(z);b[4]!==y.tables.attachment_ctas||b[5]!==g?(a=function(){return d("ReQL").fromTableAscending(y.tables.attachment_ctas).getKeyRange(g)},b[4]=y.tables.attachment_ctas,b[5]=g,b[6]=a):a=b[6];b[7]!==y||b[8]!==g?(z=[y,g],b[7]=y,b[8]=g,b[9]=z):z=b[9];a=d("ReQLSuspense").useFirst(a,z,f.id+":123");var A;b[10]!==x?(z=function(){var a=["xma_rtc_audio","xma_rtc_missed_audio","xma_rtc_ended_audio","xma_rtc_video","xma_rtc_missed_video","xma_rtc_ended_video"].includes(x);a&&p.onReady(function(a){a.logImpression({surface:"admin_message"})})},A=[x],b[10]=x,b[11]=z,b[12]=A):(z=b[11],A=b[12]);n(z,A);z=d("AdsMessengerContext.react").useAdsMessengerContext();A=z.isMessengerInAds;z=z.maybeGetCallbackFromURI;if(a==null){var B;b[13]!==x||b[14]!==s||b[15]!==w||b[16]!==v?(B=x==="xma_disabled_cta"?m.jsx("div",{className:"x18xmwgd x1iyjqo2 xs83m0k x1iorvi4 x150jy0e xjkvuk6 x1e558r4",ref:v,children:s(w)}):null,b[13]=x,b[14]=s,b[15]=w,b[16]=v,b[17]=B):B=b[17];return B}var C;if(b[18]!==h||b[19]!==a||b[20]!==e||b[21]!==j||b[22]!==w||b[23]!==t||b[24]!==z||b[25]!==A||b[26]!==u||b[27]!==s||b[28]!==l){B=h(a);var D=q(e);C=null;bb0:switch(B.actionType){case"BUTTON":var E=B.secondaryInfo,F=B.primaryInfo;C=j(w,D,a,E,F);break bb0;case"POPOVER_BUTTON":t&&(C=t(w,a,B.primaryInfo));break bb0;case"URL":E=B.secondaryInfo;F=z==null?void 0:z(B.primaryInfo);A&&F!=null?C=j(w,D,a,E,F):C=u(w,D,a,E,B.primaryInfo);break bb0;case"DISABLED_BUTTON":b[30]!==s||b[31]!==w?(F=s(w),b[30]=s,b[31]=w,b[32]=F):F=b[32];C=F;break bb0;case"DEEPLINK":D=B.primaryInfo;E=D.loggingDetails;F=D.threadKey;D=d("MWInboxRouteBuilder").buildURL({thread_key:(k||(k=d("I64"))).to_string(F)});C=l(w,F,a,E,D);break bb0;case"CTA_ERROR":c("recoverableViolation")(B.primaryInfo,B.secondaryInfo,void 0,{trackOnly:!0});C=null;break bb0;case"NOT_SUPPORTED":C=null}b[18]=h;b[19]=a;b[20]=e;b[21]=j;b[22]=w;b[23]=t;b[24]=z;b[25]=A;b[26]=u;b[27]=s;b[28]=l;b[29]=C}else C=b[29];b[33]===Symbol["for"]("react.memo_cache_sentinel")?(F="x18xmwgd x1iyjqo2 xs83m0k x1iorvi4 x150jy0e xjkvuk6 x1e558r4",b[33]=F):F=b[33];b[34]!==v||b[35]!==C?(E=m.jsx("div",{className:F,ref:v,children:C}),b[34]=v,b[35]=C,b[36]=E):E=b[36];return E}function r(a){return a.threadType}g["default"]=a}),98);
__d("useMWCMPollsV1Enabled",["LSThreadBitOffset","MWLSThread"],(function(a,b,c,d,e,f,g){"use strict";function a(a){a=(a=d("MWLSThread").useThread(a,h))!=null?a:{};a=a.pollsV1UICapability;return a===!0}function h(a){return{pollsV1UICapability:d("LSThreadBitOffset").has(158,a)}}g["default"]=a}),98);
__d("useMWHasPollsVotingEnabled",["LSThreadBitOffset","MWLSThread"],(function(a,b,c,d,e,f,g){"use strict";function a(a){a=(a=d("MWLSThread").useThread(a,h))!=null?a:!1;return a}function h(a){return d("LSThreadBitOffset").has(170,a)}g["default"]=a}),98);
__d("MWXMAAttachmentItemCtaButton.react",["LSMessagingThreadTypeUtil","MDSButton.react","MWLSThread","MWXEntryPointPopoverTrigger.react","MWXMAAttachmentActionTriggerWithOpenChatTab.react","MWXMAAttachmentItemCtaButtonBase.react","MWXPopoverLoadingState.react","MWXTooltip.react","MessengerWebUXLogger","logXMACtaClicked","mwCMIsAnyCMThread","react","useGetMWXMACtaRegistryHandler","useMWCMPollsV1Enabled","useMWCMPollsV2Enabled","useMWHasPollsVotingEnabled"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||(h=d("react"))).c,j=h,k={root:{minWidth:"xktpd3l",$$css:!0}};function a(a){var b=i(32),e=a.ctaIconType,f=a.ctaId,g=a.messageId,h=a.popoverMenu,p=a.threadKey,q=a.title;a=a.type;var r=c("MessengerWebUXLogger").useInteractionLogger(),s=d("MWLSThread").useThread(p,o),t;b[0]!==a||b[1]!==p||b[2]!==s?(t={ctaType:a,eventName:"open_xma_attachment_cta",threadKey:p,threadType:s},b[0]=a,b[1]=p,b[2]=s,b[3]=t):t=b[3];var u=t;s=c("useGetMWXMACtaRegistryHandler")();t=c("useMWHasPollsVotingEnabled")(p);var v=c("useMWCMPollsV1Enabled")(p),w=c("useMWCMPollsV2Enabled")(p),x=d("MWLSThread").useThread(p,n),y=d("MWLSThread").useThread(p,m);if(!t&&(a==="xma_poll_details_button"||a==="xma_poll_details_card"))return null;if(((t=x)!=null?t:!1)&&!v&&!w&&a==="xma_poll_details_button")return null;b[4]!==y||b[5]!==r||b[6]!==u?(x=function(a,b,e,f,g){return j.jsx(c("MWXTooltip.react"),{tooltip:a,children:j.jsx(c("MDSButton.react"),{disabled:y,icon:b,isContainerTarget:!0,label:a,onPress:function(){r==null?void 0:r(u);d("logXMACtaClicked").logXMACtaClicked({cta:e,loggingDetails:f,source:2});return g()},type:"secondary"})})},b[4]=y,b[5]=r,b[6]=u,b[7]=x):x=b[7];b[8]!==r||b[9]!==u?(t=function(a,b,e,f,g){return j.jsx(c("MWXTooltip.react"),{tooltip:a,children:j.jsx(c("MWXMAAttachmentActionTriggerWithOpenChatTab.react"),{threadKey:b,children:function(b){return j.jsx(c("MDSButton.react"),{label:a,linkProps:{preventLocalNavigation:!0,url:g},onPress:function(a){b(a);r==null?void 0:r(u);return d("logXMACtaClicked").logXMACtaClicked({cta:e,loggingDetails:f,source:2})},type:"secondary"})}})})},b[8]=r,b[9]=u,b[10]=t):t=b[10];b[11]!==h||b[12]!==r||b[13]!==u?(v=h?function(a,b,e){return j.jsx(c("MWXEntryPointPopoverTrigger.react"),{align:"stretch",entryPointParams:{primaryInfo:e},fallback:j.jsx(c("MWXPopoverLoadingState.react"),{withArrow:!1,xstyle:k.root}),otherProps:{cta:b},popoverEntryPoint:h,popoverType:"menu",position:"below",preloadTrigger:"button",children:function(e,f){return j.jsx(c("MWXTooltip.react"),{tooltip:a,children:j.jsx(c("MDSButton.react"),{label:a,onPress:function(){r==null?void 0:r(u);d("logXMACtaClicked").logXMACtaClicked({cta:b,loggingDetails:void 0,source:2});return f()},ref:e,type:"secondary"})})}})}:void 0,b[11]=h,b[12]=r,b[13]=u,b[14]=v):v=b[14];b[15]!==y||b[16]!==q||b[17]!==r||b[18]!==u?(w=function(a,b,e,f,g){return j.jsx(c("MWXTooltip.react"),{tooltip:a,children:j.jsx(c("MDSButton.react"),{disabled:y,icon:b,label:q,linkProps:{target:"_blank",url:g},onPress:function(){r==null?void 0:r(u),d("logXMACtaClicked").logXMACtaClicked({cta:e,loggingDetails:f,source:2})},type:"secondary"})})},b[15]=y,b[16]=q,b[17]=r,b[18]=u,b[19]=w):w=b[19];var z;b[20]!==e||b[21]!==f||b[22]!==s||b[23]!==g||b[24]!==x||b[25]!==t||b[26]!==v||b[27]!==w||b[28]!==p||b[29]!==q||b[30]!==a?(z=j.jsx(c("MWXMAAttachmentItemCtaButtonBase.react"),{ctaIconType:e,ctaId:f,getCtaRegistryHandler:s,messageId:g,renderButtonActionNonEventButton:x,renderDeeplinkActionButton:t,renderDisabledButtonActionButton:l,renderPopoverMenuButtonActionButton:v,renderUrlActionButton:w,threadKey:p,title:q,type:a}),b[20]=e,b[21]=f,b[22]=s,b[23]=g,b[24]=x,b[25]=t,b[26]=v,b[27]=w,b[28]=p,b[29]=q,b[30]=a,b[31]=z):z=b[31];return z}function l(a){return j.jsx(c("MWXTooltip.react"),{tooltip:a,children:j.jsx(c("MDSButton.react"),{disabled:!0,label:a,type:"secondary"})})}l.displayName=l.name+" [from "+f.id+"]";function m(a){return d("LSMessagingThreadTypeUtil").isUnjoinedDiscoverablePublicBroadcastChannel(a.threadType)||d("LSMessagingThreadTypeUtil").isSocialChannelUnjoined(a.threadType)}function n(a){return c("mwCMIsAnyCMThread")(a.threadType)}function o(a){return a.threadType}g["default"]=a}),98);
__d("MWV2AttachmentLoadingPlaceholder.react",["MWXAspectRatioContainer.react","MWXGlimmer.react","MWXMessageBubbleCornerStyles.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;var j=b.useEffect,k=b.c,l={glimmer:{display:"x1lliihq",height:"x5yr21d",width:"xh8yej3",$$css:!0}};function a(a){var b=k(20),e=a.connectBottom,f=a.connectTop,g=a.descriptionForLogging,h=a.hasAppAttribution,m=a.height,n=a.maxHeight,o=a.maxWidth,p=a.mediaRenderQpl,q=a.outgoing,r=a.width,s=a.xstyle;a=n===void 0?200:n;n=o===void 0?480:o;var t;b[0]!==g||b[1]!==r||b[2]!==m||b[3]!==p?(o=function(){var a={string:{call_site:g}};r!=null&&m!=null?p==null?void 0:p.addPoint("render-loading-placeholder",a):p==null?void 0:p.addPoint("render-loading-placeholder-null-dimensions",a);return function(){p==null?void 0:p.addPoint("unmount-loading-placeholder",a)}},t=[m,p,r,g],b[0]=g,b[1]=r,b[2]=m,b[3]=p,b[4]=o,b[5]=t):(o=b[4],t=b[5]);j(o,t);if(r==null)return null;if(m==null)return null;o=q===!0?"right":"left";t=h===!0?"bottom":"none";b[6]!==o||b[7]!==e||b[8]!==f||b[9]!==t?(q=d("MWXMessageBubbleCornerStyles.react").getMWXBubbleCornerStyles({align:o,connectBottom:e,connectTop:f,flatten:t}),b[6]=o,b[7]=e,b[8]=f,b[9]=t,b[10]=q):q=b[10];var u=q;b[11]!==u||b[12]!==s?(h=function(a){return i.jsx(c("MWXGlimmer.react"),{index:1,xstyle:[a,l.glimmer,u,s]})},b[11]=u,b[12]=s,b[13]=h):h=b[13];b[14]!==m||b[15]!==a||b[16]!==n||b[17]!==r||b[18]!==h?(o=i.jsx("div",{"data-testid":void 0,children:i.jsx(c("MWXAspectRatioContainer.react"),{height:m,maxHeight:a,maxWidth:n,width:r,children:h})}),b[14]=m,b[15]=a,b[16]=n,b[17]=r,b[18]=h,b[19]=o):o=b[19];return o}g["default"]=a}),98);
__d("MWPXMAIconParser",["ConstUriUtils","recoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";function h(a){switch(a){case"clear":case"staticWhite":case"white":case"white70":case"black":case"black50":case"black34":case"black20":case"black12":case"black6":case"black4":case"bluegrey75":case"bluegrey50":case"placeholder-icon":case"blue":case"purple":case"gray":case"background":case"scarlet":case"steel":case"coregreen":case"coral":case"sky":case"coreblue":case"emerald":return"gray";case"red":return"cherry";case"green":return"lime";case"honey":return"lemon";default:c("recoverableViolation")("Unknown Icon color: "+a,"messenger_web_sharing");return"gray"}}function a(a){if(a==null)return;if(a.startsWith("https")||a.startsWith("blob"))return a;if(!a.startsWith("ls"))return;a=a.replace("ls","http");a=d("ConstUriUtils").getUri(a);if(a==null)return;var b=a.getQueryParam("icon");a=a.getQueryParam("circleColor");if(typeof b==="string"&&typeof a==="string"){a=h(a);return{color:a,icon:b}}return}g.parse=a}),98);
__d("MWXMAIconParser.react",["ix","MWPXMAIconParser","fbicon","recoverableViolation"],(function(a,b,c,d,e,f,g,h){"use strict";function i(a){switch(a){case"airplane":return d("fbicon")._(h("571771"),20);case"calendar":return d("fbicon")._(h("481118"),20);case"calendar-add":return d("fbicon")._(h("640913"),20);case"camcorder":return d("fbicon")._(h("493174"),20);case"camcorder-incoming":return d("fbicon")._(h("1096148"),20);case"camcorder-missed":return d("fbicon")._(h("662989"),20);case"camcorder-outgoing":return d("fbicon")._(h("1096150"),20);case"camcorder-plus":return d("fbicon")._(h("662993"),20);case"checkmark-circle":return d("fbicon")._(h("498146"),20);case"cross-circle":return d("fbicon")._(h("1501526"),20);case"currency-peso":return d("fbicon")._(h("1174630"),20);case"currency-pound":return d("fbicon")._(h("1174587"),20);case"currency-taka":return d("fbicon")._(h("182108"),20);case"currency-thai-baht":return d("fbicon")._(h("876716"),20);case"currency-usd":return d("fbicon")._(h("847056"),20);case"document-complete":return d("fbicon")._(h("728245"),20);case"friend-generic":return d("fbicon")._(h("502671"),20);case"friend-generic-checkmark":return d("fbicon")._(h("538342"),20);case"group":return d("fbicon")._(h("485091"),20);case"group-block":return d("fbicon")._(h("714636"),20);case"location":return d("fbicon")._(h("795388"),20);case"pin":return d("fbicon")._(h("481942"),20);case"phone":return d("fbicon")._(h("558161"),20);case"phone-incoming":return d("fbicon")._(h("1096151"),20);case"phone-outgoing":return d("fbicon")._(h("1096154"),20);case"shield":return d("fbicon")._(h("492714"),20);case"phone-missed":return d("fbicon")._(h("847457"),20);case"question-circle":return d("fbicon")._(h("1604445"),20);case"tag":return d("fbicon")._(h("502473"),20);case"watch":return d("fbicon")._(h("607169"),20);case"map":return d("fbicon")._(h("645715"),20);case"house-keyhole":return d("fbicon")._(h("1670302"),20);case"document":return d("fbicon")._(h("728245"),20);case"checkmark":return d("fbicon")._(h("477814"),20);case"shopping-cart":return d("fbicon")._(h("763120"),20);case"cross":return d("fbicon")._(h("478233"),20);default:c("recoverableViolation")("Unknown XMA Icon: "+a,"messenger_web_sharing");return}}function a(a){a=d("MWPXMAIconParser").parse(a);if(a==null)return;if(typeof a==="string")return a;var b=a.color;a=a.icon;a=i(a);if(a!=null)return{color:b,icon:a}}g.parse=a}),98);
__d("MWXMAAttachmentItemIcon.react",["CometPlaceholder.react","FDSImageCover.react","FDSSkittleIcon.react","MWV2AttachmentLoadingPlaceholder.react","MWXMAIconParser.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;var j=b.useEffect,k=b.c,l={loadingPlaceholder:{borderTopStartRadius:"x14yjl9h",borderTopEndRadius:"xudhj91",borderBottomEndRadius:"x18nykt9",borderBottomStartRadius:"xww2gxu",$$css:!0}};function a(a){var b=k(9),d=a.attachment,e=a.attachmentItem,f=a.getFaviconUrlXMA,g=a.mediaRenderQpl,h;b[0]!==g?(a=function(){return g==null?void 0:g.addPoint("render-xma-attachment-item-icon")},h=[g],b[0]=g,b[1]=a,b[2]=h):(a=b[1],h=b[2]);j(a,h);b[3]===Symbol["for"]("react.memo_cache_sentinel")?(a=i.jsx(c("MWV2AttachmentLoadingPlaceholder.react"),{descriptionForLogging:"MWXMAAttachmentItemIcon.Suspense",height:36,width:36,xstyle:l.loadingPlaceholder}),b[3]=a):a=b[3];b[4]!==d||b[5]!==e||b[6]!==f||b[7]!==g?(h=i.jsx(c("CometPlaceholder.react"),{fallback:a,name:"MWXMAAttachmentItemIcon.Suspense",children:i.jsx(m,{attachment:d,attachmentItem:e,getFaviconUrlXMA:f,mediaRenderQpl:g})}),b[4]=d,b[5]=e,b[6]=f,b[7]=g,b[8]=h):h=b[8];return h}function m(a){var b=k(17),e=a.attachment,f=a.attachmentItem,g=a.getFaviconUrlXMA,h=a.mediaRenderQpl;if(b[0]!==g||b[1]!==e||b[2]!==f||b[3]!==h){a=d("MWXMAIconParser.react").parse((a=g(e,f,"MWXMAAttachmentItemIconImpl",h))!=null?a:"");b[0]=g;b[1]=e;b[2]=f;b[3]=h;b[4]=a}else a=b[4];var l=a;b[5]!==h||b[6]!==l?(g=function(){return h==null?void 0:h.addPoint("render-xma-attachment-item-icon",{bool:{has_icon:l!=null}})},e=[l,h],b[5]=h,b[6]=l,b[7]=g,b[8]=e):(g=b[7],e=b[8]);j(g,e);if(l==null)return null;if(typeof l==="string"){b[9]===Symbol["for"]("react.memo_cache_sentinel")?(f="x6s0dn4 x78zum5 x5yr21d xq8finb",b[9]=f):f=b[9];b[10]===Symbol["for"]("react.memo_cache_sentinel")?(a={borderRadius:"50%",height:"36px",width:"36px"},b[10]=a):a=b[10];b[11]!==l?(g=i.jsx("div",{className:f,children:i.jsx(c("FDSImageCover.react"),{alt:"Icon for this message",src:l,style:a})}),b[11]=l,b[12]=g):g=b[12];return g}b[13]===Symbol["for"]("react.memo_cache_sentinel")?(e="x6s0dn4 x78zum5 x5yr21d xq8finb",b[13]=e):e=b[13];b[14]!==l.color||b[15]!==l.icon?(f=i.jsx("div",{className:e,children:i.jsx(c("FDSSkittleIcon.react"),{color:l.color,icon:l.icon,size:36})}),b[14]=l.color,b[15]=l.icon,b[16]=f):f=b[16];return f}g["default"]=a}),98);
__d("MWXMAAttachmentItemListItemsBase.react",["LSMediaUrlAttachment","react","react-strict-dom"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||(h=d("react"))).c,j=h;function a(a){var b=i(4),c=a.attachment,e=a.renderDefaultListItem,f=a.renderPercentageListItem;if(b[0]!==c||b[1]!==f||b[2]!==e){a=[{contactUrlExpirationTimestampList:c.listItemContactUrlExpirationTimestampList1,contactUrlFallbackList:c.listItemContactUrlFallbackList1,contactUrlList:d("LSMediaUrlAttachment").listItemContactUrlList1(c),id:c.listItemId1,progressBarFilledPercentage:c.listItemProgressBarFilledPercentage1,titleText:c.listItemTitleText1,totalCount:c.listItemTotalCount1},{contactUrlExpirationTimestampList:c.listItemContactUrlExpirationTimestampList2,contactUrlFallbackList:c.listItemContactUrlFallbackList2,contactUrlList:d("LSMediaUrlAttachment").listItemContactUrlList2(c),id:c.listItemId2,progressBarFilledPercentage:c.listItemProgressBarFilledPercentage2,titleText:c.listItemTitleText2,totalCount:c.listItemTotalCount2},{contactUrlExpirationTimestampList:c.listItemContactUrlExpirationTimestampList3,contactUrlFallbackList:c.listItemContactUrlFallbackList3,contactUrlList:d("LSMediaUrlAttachment").listItemContactUrlList3(c),id:c.listItemId3,progressBarFilledPercentage:c.listItemProgressBarFilledPercentage3,titleText:c.listItemTitleText3,totalCount:c.listItemTotalCount3}];var g=[];a.forEach(function(a){var b=a.contactUrlExpirationTimestampList,c=a.contactUrlFallbackList,d=a.contactUrlList,e=a.id,f=a.progressBarFilledPercentage,h=a.titleText;a=a.totalCount;if(e!=null){d=d!=null?d.split(","):[];var i=b!=null?b.split(","):[],j=c!=null?c.split(","):[];g.push({contacts:d.map(function(a,b){return{url:a,urlExpirationTimestamp:i[b],urlFallback:j[b]}}),id:e,progressBarFilledPercentage:f,titleText:h,totalCount:a})}});a=j.jsx(d("react-strict-dom").html.ul,{children:g.map(function(a){var b=a.progressBarFilledPercentage;return b!=null?f(a,b):e(a)})});b[0]=c;b[1]=f;b[2]=e;b[3]=a}else a=b[3];return a}g["default"]=a}),98);
__d("MWXMAAttachmentItemListItems.react",["I64","MWChatPollFacepile.react","MWLSThreadDisplayContext","MWXMAAttachmentItemListItemsBase.react","MWXText.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=(h||(h=d("react"))).c,k=h;function a(a){var b=j(6),e=a.attachment,f=a.onPollOptionFacepilePress,g=d("MWLSThreadDisplayContext").useMWLSThreadDisplayContext();b[0]!==g||b[1]!==f?(a=function(a,b){return k.jsxs("li",{className:"x14vqqas",children:[k.jsxs("div",{className:"x78zum5 x1qughib",children:[a.titleText!=null?k.jsx(c("MWXText.react"),{numberOfLines:g==="Inbox"?3:1,type:"headline4",children:a.titleText}):null,k.jsx("div",{className:"x1i64zmx",children:k.jsx(c("MWChatPollFacepile.react"),{contacts:a.contacts.map(function(a){return{name:void 0,profile_picture_url:a.url}}),countOverride:a.totalCount!=null?(i||(i=d("I64"))).to_int32(a.totalCount):void 0,direction:"reversed",gap:"negative",onPress:f!=null?function(){f(a.id)}:void 0,size:"small"})})]}),k.jsx("div",{className:"x1wpzbip x1lq5wgf xgqcy7u x30kzoy x9jhf4c xdk7pt xod5an3 x1xmf6yo",children:k.jsx("div",{className:"xsqyzxx x1lq5wgf xgqcy7u x30kzoy x9jhf4c xdk7pt",style:{width:(i||(i=d("I64"))).to_string(b)+"%"}})})]},i.to_string(a.id))},b[0]=g,b[1]=f,b[2]=a):a=b[2];var h;b[3]!==e||b[4]!==a?(h=k.jsx(c("MWXMAAttachmentItemListItemsBase.react"),{attachment:e,renderDefaultListItem:l,renderPercentageListItem:a}),b[3]=e,b[4]=a,b[5]=h):h=b[5];return h}function l(a){return k.jsx("li",{className:"xwwskcc x1q0q8m5 xso031l x1l1xfun x13fuv20 x178xt8z x14vqqas xsag5q8 xz9dl7a",children:k.jsxs("div",{children:[k.jsx(c("MWChatPollFacepile.react"),{contactWithBorder:!1,contacts:a.contacts.map(m),countOverride:a.totalCount!=null?(i||(i=d("I64"))).to_int32(a.totalCount):void 0,limit:9,overflowStyle:"overlayLastPhoto",size:"large"}),a.titleText!=null?k.jsx("div",{className:"xsgj6o6 x1xmf6yo",children:k.jsx(c("MWXText.react"),{color:"secondary",numberOfLines:2,type:"body4",children:a.titleText})}):null]})},(i||(i=d("I64"))).to_string(a.id))}l.displayName=l.name+" [from "+f.id+"]";function m(a){return{name:void 0,profile_picture_url:a.url}}g["default"]=a}),98);
__d("MessageProfileRangeTypeUtils",[],(function(a,b,c,d,e,f){"use strict";function a(a){if(a==="p")return"p";else if(a==="thread"||a==="t")return"t";else if(a==="thread_active"||a==="a")return"a";else if(a==="s")return"s";else if(a==="ai")return"ai";else if(a==="c")return"cc";else if(a==="cu")return"cu";else return"n"}f.ofString=a}),66);
__d("MWV2ChatTextParserUtils",["EmojiRenderer","EmoticonRenderer","I64","LSContactTypeExact","LSIntEnum","MWChatTextFormatting","MWLSContactTypeExactUtils","MessageProfileRangeTypeUtils","ReQL","ReQLSuspense","UnicodeUtils","XCometVanityURLControllerRouteBuilder","getURLRanges","gkx"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=new RegExp("/^[ \\r\\n\\s]*$/");function a(a){var b=d("EmojiRenderer").parse(a).map(function(a){return{length:a.length,offset:a.offset}}),c=d("EmoticonRenderer").parse(a).map(function(a){return{length:a.chars.length,offset:a.offset}});b=b.concat(c).sort(function(a,b){return a.offset-b.offset|0});if(b.length===0)return!1;var e={contents:0},f={contents:0};c=b.some(function(b){e.contents===b.offset?(e.contents=e.contents+b.length|0,f.contents=e.contents):f.contents=b.offset;var c=a.substring(e.contents,f.contents);e.contents=b.offset+b.length|0;return k.test(c)===!1});b=e.contents!==a.length&&!k.test(a.substring(f.contents));if(c)return!1;else return!b}function b(a,b){b===void 0&&(b=!1);var e=c("getURLRanges")(a),f=[];a=d("MWChatTextFormatting").getFormattingRanges(a,b);e.forEach(function(a){a={entity:{__typename:"Link",uri:a.entity.url},length:a.length,offset:a.offset};f.push(a)});return f.concat(a)}function l(a){if(c("gkx")("23433"))return"/t/"+a;else return"/messages/t/"+a}function m(a,b){try{a=d("ReQLSuspense").first(d("ReQL").fromTableAscending(a.tables.contacts).getKeyRange((h||(h=d("I64"))).of_string(b)),f.id+":115")}catch(b){a=void 0}if(a==null)return l(b);var e=a.contactTypeExact;if((h||(h=d("I64"))).equal(e,(i||(i=d("LSIntEnum"))).ofNumber(c("LSContactTypeExact").FB_USER)))return"https://www.facebook.com"+c("XCometVanityURLControllerRouteBuilder").buildURL({vanity:b});if(!d("MWLSContactTypeExactUtils").isIgContact(e))return l(b);e=a.secondaryName;if(e!=null)return"https://www.instagram.com/"+e+"/";else return l(b)}function e(a,b,c,e,f,g){b=b.split(",");var i=c.split(","),k=e.split(","),n=f.split(",");return b.reduce(function(b,c,e){var f=d("MessageProfileRangeTypeUtils").ofString(n[e]),o=Number(i[e]);e=Number(k[e]);var p=(j||(j=d("UnicodeUtils"))).strlen(g.slice(0,e));p=e-p;e=e-p;f==="t"||f==="a"?b.push({entity:{__typename:"Profile",id:c,uri:l(c)},length:o,offset:e}):f==="p"?b.push({entity:{__typename:"Profile",id:c,uri:m(a,c)},length:o,offset:e}):f==="cc"?b.push({entity:{__typename:"CommunityChannel",threadKey:(h||(h=d("I64"))).of_string(c)},length:o,offset:e}):f==="s"||f==="cu"?b.push({entity:{__typename:"Command"},length:o,offset:e}):f==="ai"&&b.push({entity:{__typename:"Ai"},length:o,offset:e});return b},[])}g.isEmojiOnlyMessage=a;g.findRanges=b;g.findRangesForMentions=e}),98);
__d("useMWPCombineTextRenderers",["react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).c;function a(a){var b=i(2),c;b[0]!==a?(c={},a.forEach(function(a){if(a==null)return;var b=a[0];a=a[1];var d=c[b];c[b]=d!=null?d.concat([a]):[a]}),b[0]=a,b[1]=c):c=b[1];return c}g["default"]=a}),98);
__d("getMAWLinkEntityRenderer.react",["MWMessageCellFocusTable.react","MWXLink.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=a.encryptedLink,e=a.target,f=a.testid,g=a.xstyle;return function(a,f){return i.jsx(d("MWMessageCellFocusTable.react").FocusTable[2],{children:i.jsx("span",{role:"gridcell",children:i.jsx(c("MWXLink.react"),{encryptedLink:b,href:f.uri,target:e,testid:void 0,xstyle_DEPRECATED:g,children:a})})})}}g["default"]=a}),98);
__d("useMWPLinkRendererFactory",["MWPThreadCapabilitiesContext","getMAWLinkEntityRenderer.react","gkx","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).c;function a(a){var b=i(3),e=d("MWPThreadCapabilitiesContext").useMWPThreadCapabilitiesContext(),f=e.disableLinks;b[0]!==f||b[1]!==a?(e=function(b,d,e,g){return c("gkx")("24165")&&f?void 0:[e,c("getMAWLinkEntityRenderer.react")({encryptedLink:a,target:g,testid:d,xstyle:b})]},b[0]=f,b[1]=a,b[2]=e):e=b[2];return e}g["default"]=a}),98);
__d("useMWTextRenderers",["CometErrorBoundary.react","GroupsCometJoinChatDialog.entrypoint","I64","MWCMThreadTypes.react","MWChatTextFormatting","MWInboxCommunityThreadsRouteBuilder","MWLSThread","MWMessageCellFocusTable.react","MWNavigationContext","MWXLink.react","react","useCommunityFolder","useMWCMShouldGoToFullScreenChatHook","useMWNavigation","useMWPCombineTextRenderers","useMWPLinkRendererFactory","useMWXEntryPointDialog"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=h||(h=d("react"));b=h;b.useCallback;b.useMemo;var k=b.c,l={bold:{fontWeight:"x1s688f",$$css:!0},colorForLink:{color:"x1heor9g",$$css:!0},highlight:{backgroundColor:"xacajkf",borderTopStartRadius:"x1lcm9me",borderTopEndRadius:"x1yr5g0i",borderBottomEndRadius:"xrt01vj",borderBottomStartRadius:"x10y3i5r",paddingTop:"x1nn3v0j",paddingEnd:"x4uap5",paddingBottom:"x1120s5i",paddingStart:"xkhd6sd",$$css:!0},underline:{color:"x1heor9g",textDecoration:"x1bvjpef",textDecorationLine:"xujl8zx",$$css:!0}};function m(a){var b=k(23),e=a.folder,f=a.node,g=a.thread;a=c("useMWNavigation")();var h=a.openTabOrInbox;a=(a=g.hasPendingInvitation)!=null?a:!1;var l=c("useMWCMShouldGoToFullScreenChatHook")(),m;b[0]!==a||b[1]!==l?(m={invited:a,shouldGoToMessenger:l,surface:"unknown"},b[0]=a,b[1]=l,b[2]=m):m=b[2];var n=m;b[3]!==e.fbGroupId?(a=(i||(i=d("I64"))).to_string(e.fbGroupId),b[3]=e.fbGroupId,b[4]=a):a=b[4];b[5]!==g.threadKey?(l=(i||(i=d("I64"))).to_string(g.threadKey),b[5]=g.threadKey,b[6]=l):l=b[6];b[7]!==a||b[8]!==l?(m={groupID:a,threadID:l},b[7]=a,b[8]=l,b[9]=m):m=b[9];e=m;a=c("useMWXEntryPointDialog")(c("GroupsCometJoinChatDialog.entrypoint"),e);var o=a[0];b[10]!==o||b[11]!==n?(l=function(){return o(n)},b[10]=o,b[11]=n,b[12]=l):l=b[12];var p=l;b[13]===Symbol["for"]("react.memo_cache_sentinel")?(m="x1s688f",b[13]=m):m=b[13];b[14]!==g.threadType||b[15]!==g.clientThreadKey||b[16]!==g.threadKey||b[17]!==p||b[18]!==h?(e=function(){if(d("MWCMThreadTypes.react").isUnjoinedCMThread(g.threadType))return p();else return h({clientThreadKey:g.clientThreadKey,threadKey:g.threadKey,threadType:g.threadType},"mention")},b[14]=g.threadType,b[15]=g.clientThreadKey,b[16]=g.threadKey,b[17]=p,b[18]=h,b[19]=e):e=b[19];b[20]!==e||b[21]!==f?(a=j.jsx(d("MWMessageCellFocusTable.react").FocusTable[2],{children:j.jsx("span",{className:m,role:"gridcell",children:j.jsx(c("MWXLink.react"),{onClick:e,children:f})})}),b[20]=e,b[21]=f,b[22]=a):a=b[22];return a}function n(a){var b=k(10),c=a.folder,e=a.thread,f;b[0]!==c.folderId?(f=(i||(i=d("I64"))).to_string(c.folderId),b[0]=c.folderId,b[1]=f):f=b[1];var g=f;b[2]!==e.threadKey?(c=(i||(i=d("I64"))).to_string(e.threadKey),b[2]=e.threadKey,b[3]=c):c=b[3];var h=c;b[4]!==g||b[5]!==h?(f=function(){return d("MWInboxCommunityThreadsRouteBuilder").buildURL({folder_id:g,thread_key:h})},b[4]=g,b[5]=h,b[6]=f):f=b[6];e=f;b[7]!==a.children||b[8]!==e?(c=j.jsx(d("MWNavigationContext").Provider,{children:a.children,value:e}),b[7]=a.children,b[8]=e,b[9]=c):c=b[9];return c}function o(a){var b=k(5),e=a.communityLinkFallback,f=a.node;a=a.threadKey;a=d("MWLSThread").useThreadExn(a);var g=c("useCommunityFolder")(a),h;b[0]!==g||b[1]!==f||b[2]!==a||b[3]!==e?(h=g!=null?j.jsx(n,{folder:g,thread:a,children:j.jsx(m,{folder:g,node:f,thread:a})}):e,b[0]=g,b[1]=f,b[2]=a,b[3]=e,b[4]=h):h=b[4];return h}var p=["Command",function(a){return j.jsx(d("MWMessageCellFocusTable.react").FocusTable[2],{children:j.jsx("span",{className:"x1s688f",role:"gridcell",children:a})})}],q=["Ai",function(a){return j.jsx(d("MWMessageCellFocusTable.react").FocusTable[2],{children:j.jsx("span",{className:"x1s688f",role:"gridcell",children:a})})}],r=["CommunityChannel",function(a,b){var e=j.jsx(d("MWMessageCellFocusTable.react").FocusTable[2],{children:j.jsx("span",{className:"x1s688f",role:"gridcell",children:a})});return j.jsx(c("CometErrorBoundary.react"),{fallback:function(){return e},children:j.jsx(o,{communityLinkFallback:e,node:a,threadKey:b.threadKey})})}];function a(a,b,e){var f=k(18);b=c("useMWPLinkRendererFactory")(b);var g;f[0]!==b||f[1]!==e?(g=b([l.underline],"chat_message_regular_link","Link",e),f[0]=b,f[1]=e,f[2]=g):g=f[2];var h;f[3]!==b||f[4]!==e?(h=b([l.bold,l.colorForLink],"profile_link","Profile",e),f[3]=b,f[4]=e,f[5]=h):h=f[5];var i;f[6]!==b||f[7]!==e?(i=b([l.highlight],"highlight","Highlight",e),f[6]=b,f[7]=e,f[8]=i):i=f[8];f[9]!==g||f[10]!==h||f[11]!==i?(b=[g,h,i,p,q,r],f[9]=g,f[10]=h,f[11]=i,f[12]=b):b=f[12];e=b;g=c("useMWPCombineTextRenderers")(e);h=a?d("MWChatTextFormatting").messageRenderer:d("MWChatTextFormatting").messageIncomingRenderer;f[13]!==h?(i=[h],f[13]=h,f[14]=i):i=f[14];f[15]!==g||f[16]!==i?(b=babelHelpers["extends"]({},g,{MessengerTextFormatting:i}),f[15]=g,f[16]=i,f[17]=b):b=f[17];e=b;return e}g["default"]=a}),98);
__d("MWXMAAttachmentItemBodyText.react",["MWV2ChatTextParserUtils","MWXMessageTextWithEntities.react","MWXText.react","justknobx","react","useMWTextRenderers"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||(h=d("react"))).c,j=h,k=c("justknobx")._("2986");function a(a){var b=i(6),e=a.bodyText;a=a.outgoing;a=c("useMWTextRenderers")(a,!1);var f;b[0]!==e?(f=d("MWV2ChatTextParserUtils").findRanges(e,k),b[0]=e,b[1]=f):f=b[1];f=f;var g;b[2]!==f||b[3]!==a||b[4]!==e?(g=j.jsx(c("MWXText.react"),{color:"primary",type:"meta3",children:j.jsx(c("MWXMessageTextWithEntities.react"),{ranges:f,renderers:a,text:e})}),b[2]=f,b[3]=a,b[4]=e,b[5]=g):g=b[5];return g}g["default"]=a}),98);
__d("MWXMAAttachmentSubtitleDecoration.react",["ix","Int64Hooks","LSIntEnum","MNXMASubtitleDecorationType","MWXIcon.react","fbicon","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=(i||(i=d("react"))).c,l=i;function a(a){var b=k(3),e=a.subtitleDecorationType,f;b[0]!==e?(a=function(){switch((j||(j=d("LSIntEnum"))).toNumber(e)){case c("MNXMASubtitleDecorationType").THREADS_ICON:return l.jsx(c("MWXIcon.react"),{color:"secondary",icon:d("fbicon")._(h("380222"),16)});default:return null}},f=[e],b[0]=e,b[1]=a,b[2]=f):(a=b[1],f=b[2]);return d("Int64Hooks").useMemoInt64(a,f)}g["default"]=a}),98);
__d("MWXIconBadgeCheckmark",["MWXSvgIcon","SVGIcon","cr:12309","gkx"],(function(a,b,c,d,e,f,g){"use strict";a=d("MWXSvgIcon").mwxSvgIcon(d("SVGIcon").svgIcon(b("cr:12309")),c("gkx")("23219"));g["default"]=a}),98);
__d("MWXMALiveAttachmentItemMainText.react",["I64","LSIntEnum","LSVerifiedType","MWXIconBadgeCheckmark","MWXIconStrict.react","MWXTextPairing.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=(h||(h=d("react"))).c,l=h;function a(a){var b=k(17),e=a.attachment,f=a.bodyLineLimit,g=a.facePileElement,h=a.headlineLineLimit;a=a.title;var m;b[0]!==e.verifiedType?(m=e.verifiedType!=null?(i||(i=d("I64"))).equal(e.verifiedType,(j||(j=d("LSIntEnum"))).ofNumber(c("LSVerifiedType").DEFAULT)):!1,b[0]=e.verifiedType,b[1]=m):m=b[1];m=m;var n;b[2]===Symbol["for"]("react.memo_cache_sentinel")?(n="x6s0dn4 x78zum5 xl56j7k",b[2]=n):n=b[2];var o;b[3]!==m?(o=m&&l.jsx("div",{className:"xsgj6o6",children:l.jsx(c("MWXIconStrict.react"),{color:"mds-accent",icon:c("MWXIconBadgeCheckmark"),size:12})}),b[3]=m,b[4]=o):o=b[4];b[5]!==a||b[6]!==o?(m=l.jsxs("div",{className:n,children:[a,o]}),b[5]=a,b[6]=o,b[7]=m):m=b[7];n=m;b[8]===Symbol["for"]("react.memo_cache_sentinel")?(a="x193iq5w x126k92a xh8yej3",b[8]=a):a=b[8];b[9]!==e.captionBodyText||b[10]!==f||b[11]!==n||b[12]!==h?(o=l.jsx(c("MWXTextPairing.react"),{body:e.captionBodyText,bodyColor:"secondary",bodyLineLimit:f,headline:n,headlineLineLimit:h,level:4,testid:void 0,textAlign:"center"}),b[9]=e.captionBodyText,b[10]=f,b[11]=n,b[12]=h,b[13]=o):o=b[13];b[14]!==o||b[15]!==g?(m=l.jsxs("div",{className:a,children:[o,g]}),b[14]=o,b[15]=g,b[16]=m):m=b[16];return m}g["default"]=a}),98);
__d("MWXMAAttachmentItemMainText.react",["fbt","I64","LSIntEnum","Locale","MNLSXMALayoutType","MNXMASubtitleDecorationType","MWXIconChevronLeft","MWXIconChevronRight","MWXIconStrict.react","MWXMAAttachmentItemBodyText.react","MWXMAAttachmentSubtitleDecoration.react","MWXMALiveAttachmentItemMainText.react","MWXText.react","MWXTextPairing.react","react","stylex","xmaAttachmentUtils","xmaLayouts"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l,m=(j||(j=d("react"))).c,n=j,o={hscroll:{paddingEnd:"xsyo7zv",paddingStart:"x16hj40l",$$css:!0},root:{maxWidth:"x193iq5w",whiteSpace:"x126k92a",width:"xh8yej3",$$css:!0},subthreadXMADescriptionRow:{justifyContent:"x1nhvcw1",$$css:!0},subthreadXMARow:{alignItems:"x6s0dn4",display:"x78zum5",justifyContent:"x1qughib",$$css:!0},withIcon:{paddingBottom:"xg8j3zb",paddingTop:"xyqdw3p",$$css:!0}};function a(a){var b=m(48),e=a.attachment,f=a.bodyLineLimit,g=a.bodyText,j=a.facePileElement,p=a.hasIcon,q=a.headlineLineLimit,r=a.isHscroll,s=a.outgoing,t=a.subtitleText,u=a.title;a=a.xmaLayout;s=s===void 0?!1:s;if(b[0]!==e.xmaLayoutType){var v;v=(k||(k=d("I64"))).equal((v=e.xmaLayoutType)!=null?v:(k||(k=d("I64"))).zero,(l||(l=d("LSIntEnum"))).ofNumber(c("MNLSXMALayoutType").THREAD_SHORTCUT));b[0]=e.xmaLayoutType;b[1]=v}else v=b[1];v=v;if(d("xmaAttachmentUtils").isLiveXMA(e)){var w;w=(w=u)!=null?w:"";var x;b[2]!==e||b[3]!==f||b[4]!==j||b[5]!==q||b[6]!==w?(x=n.jsx(c("MWXMALiveAttachmentItemMainText.react"),{attachment:e,bodyLineLimit:f,facePileElement:j,headlineLineLimit:q,title:w}),b[2]=e,b[3]=f,b[4]=j,b[5]=q,b[6]=w,b[7]=x):x=b[7];return x}b[8]===Symbol["for"]("react.memo_cache_sentinel")?(w=h._("__JHASH__SFJQf-uN6yj__JHASH__"),b[8]=w):w=b[8];x=w;b[9]===Symbol["for"]("react.memo_cache_sentinel")?(w=h._("__JHASH__-LANapr3SYq__JHASH__"),b[9]=w):w=b[9];w=w;var y=d("Locale").isRTL()?c("MWXIconChevronLeft"):c("MWXIconChevronRight");b[10]!==u||b[11]!==v||b[12]!==s||b[13]!==e.attachmentLoggingType||b[14]!==q?(y=u!==""?v?n.jsxs("div",{className:"x6s0dn4 x78zum5 x1qughib",children:[n.jsx(c("MWXText.react"),{color:s?"white":"secondary",type:"meta2",children:u}),n.jsx(c("MWXIconStrict.react"),{color:s?"white":"secondary",icon:y,size:12})]}):n.jsx(c("MWXTextPairing.react"),{headline:v?x:u,headlineLineLimit:q,level:4,testid:void 0,textAlign:e.attachmentLoggingType==="xma_view_event"?"center":"start"}):null,b[10]=u,b[11]=v,b[12]=s,b[13]=e.attachmentLoggingType,b[14]=q,b[15]=y):y=b[15];x=y;if(b[16]!==t||b[17]!==v||b[18]!==s||b[19]!==e.replyCount||b[20]!==j||b[21]!==f){y=t!==""?v?n.jsxs("div",{className:(i||(i=c("stylex")))([o.subthreadXMARow,o.subthreadXMADescriptionRow]),children:[j,n.jsx("div",{className:"x1k70j0n",children:n.jsx(c("MWXText.react"),{color:s?"white":"secondary",type:"meta2",children:e.replyCount==null||(k||(k=d("I64"))).equal(e.replyCount,(k||(k=d("I64"))).zero)?t:(k||(k=d("I64"))).gt((u=e.replyCount)!=null?u:(k||(k=d("I64"))).zero,(k||(k=d("I64"))).of_int32(20))?h._("__JHASH__Dd3JSX2bl8X__JHASH__"):h._("__JHASH__J-X-Y424pwe__JHASH__",[h._plural((k||(k=d("I64"))).to_int32((q=e.replyCount)!=null?q:(k||(k=d("I64"))).zero),"number")])})})]}):n.jsx("div",{className:"x889kno",children:n.jsx(c("MWXTextPairing.react"),{body:v?w:t,bodyColor:"secondary",bodyLineLimit:f,level:4,testid:void 0})}):null;b[16]=t;b[17]=v;b[18]=s;b[19]=e.replyCount;b[20]=j;b[21]=f;b[22]=y}else y=b[22];u=y;w=(q=e.subtitleDecorationType)!=null?q:(k||(k=d("I64"))).zero;b[23]!==w?(t=(l||(l=d("LSIntEnum"))).toNumber(w)===c("MNXMASubtitleDecorationType").THREADS_ICON?n.jsx("div",{className:"x1emribx x1k70j0n",children:n.jsx(c("MWXMAAttachmentSubtitleDecoration.react"),{subtitleDecorationType:w})}):null,b[23]=w,b[24]=t):t=b[24];v=t;b[25]!==e.captionBodyText?(j=e.captionBodyText!=null&&e.captionBodyText.length>0?n.jsx(c("MWXText.react"),{color:"primary",type:"meta3",children:e.captionBodyText}):null,b[25]=e.captionBodyText,b[26]=j):j=b[26];f=j;b[27]!==g||b[28]!==s?(y=g!=null&&g.length>0?n.jsx(c("MWXMAAttachmentItemBodyText.react"),{bodyText:g,outgoing:s}):null,b[27]=g,b[28]=s,b[29]=y):y=b[29];q=y;w=p?o.withIcon:r?o.hscroll:!1;b[30]!==w?(t=(i||(i=c("stylex")))(o.root,w),b[30]=w,b[31]=t):t=b[31];b[32]!==a||b[33]!==x||b[34]!==f?(e=a===d("xmaLayouts").XMA_LAYOUTS.UNIFIED_LAYOUT&&x!==null?n.jsx("div",{className:"xahult9",children:x}):f!=null?n.jsx("div",{className:"x1e56ztr",children:x}):x,b[32]=a,b[33]=x,b[34]=f,b[35]=e):e=b[35];b[36]===Symbol["for"]("react.memo_cache_sentinel")?(j="x6s0dn4 x78zum5",b[36]=j):j=b[36];b[37]!==v||b[38]!==u?(g=n.jsxs("div",{className:j,children:[v,u]}),b[37]=v,b[38]=u,b[39]=g):g=b[39];b[40]!==q?(s=q!=null&&n.jsx("div",{className:"x889kno",children:q}),b[40]=q,b[41]=s):s=b[41];b[42]!==t||b[43]!==e||b[44]!==f||b[45]!==g||b[46]!==s?(y=n.jsxs("div",{className:t,children:[e,f,g,s]}),b[42]=t,b[43]=e,b[44]=f,b[45]=g,b[46]=s,b[47]=y):y=b[47];return y}g["default"]=a}),226);
__d("MWXMAEventFacepiles.react",["ALT_PLACEHOLDER_FIXME","FDSPressableFacepile.react","I64","MWXText.react","ReQL","ReQLSuspense","react","stylex","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l=(j||(j=d("react"))).c,m=j,n={facepile:{display:"x78zum5",flexDirection:"xdt5ytf",maxWidth:"x193iq5w",paddingTop:"x889kno",paddingBottom:"x1a8lsjc",$$css:!0},root_center_aligned:{display:"x78zum5",justifyContent:"xl56j7k",$$css:!0},root_start_aligned:{display:"x78zum5",justifyContent:"x1nhvcw1",$$css:!0}};function a(a){var b=l(25),e=a.avatarText,g=a.count,j=a.ctaId,q=a.size,r=a.urls;a=a.xstyle;q=q===void 0?32:q;var s;b[0]!==j?(s=j!=null?(k||(k=d("I64"))).to_string(j):"",b[0]=j,b[1]=s):s=b[1];s=s;var t=(h||(h=c("useReStore")))(),u;b[2]!==j||b[3]!==t?(u=function(){return j!=null?d("ReQL").fromTableAscending(t.tables.attachment_ctas).getKeyRange(j):d("ReQL").empty()},b[2]=j,b[3]=t,b[4]=u):u=b[4];var v;b[5]!==t||b[6]!==s?(v=[t,s],b[5]=t,b[6]=s,b[7]=v):v=b[7];s=d("ReQLSuspense").useFirst(u,v,f.id+":52");b[8]!==g?(u=g!=null?(k||(k=d("I64"))).le(g,(k||(k=d("I64"))).of_int32(9)):!1,b[8]=g,b[9]=u):u=b[9];v=u;b[10]!==v||b[11]!==(s==null?void 0:s.actionUrl)?(u=v?void 0:{target:"_blank",url:s==null?void 0:s.actionUrl},b[10]=v,b[11]=s==null?void 0:s.actionUrl,b[12]=u):u=b[12];s=u;b[13]!==v||b[14]!==r?(u=v?r.map(p):r.slice(0,9).map(o),b[13]=v,b[14]=r,b[15]=u):u=b[15];v=u;u=e==null?n.root_center_aligned:n.root_start_aligned;var w;b[16]!==v||b[17]!==u||b[18]!==a||b[19]!==g||b[20]!==r.length||b[21]!==e||b[22]!==s||b[23]!==q?(w=v.length>0?m.jsx("div",{className:(i||(i=c("stylex")))(u),"data-testid":void 0,children:m.jsx("div",{className:(i||(i=c("stylex")))(n.facepile,a),role:"gridcell",children:m.jsx(c("FDSPressableFacepile.react"),{count:g!=null?(k||(k=d("I64"))).to_int32(g):r.length,isOverlapping:!0,isTextInline:e!=null,items:v,linkProps:s,size:q,text:e!=null?m.jsx(c("MWXText.react"),{color:"secondary",type:"body4",children:e}):void 0})})}):null,b[16]=v,b[17]=u,b[18]=a,b[19]=g,b[20]=r.length,b[21]=e,b[22]=s,b[23]=q,b[24]=w):w=b[24];return w}function o(a){return{alt:c("ALT_PLACEHOLDER_FIXME"),source:{uri:a}}}function p(a){return{alt:c("ALT_PLACEHOLDER_FIXME"),source:{uri:a}}}g["default"]=a}),98);
__d("getLSMediaAttachmentAvatarViewUrlList",["I64","LSMediaUrlUtils","isStringNullOrEmpty"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){var b=a.avatarViewUrlExpirationTimestampList,e=a.avatarViewUrlFallbackList;a=a.avatarViewUrlList;if(c("isStringNullOrEmpty")(a))if(!c("isStringNullOrEmpty")(b))return[];else if(e!=null)return e.split(", ");else return[];if(c("isStringNullOrEmpty")(b))return[];if(e==null)return[];a=a.split(", ");var f=b.split(", "),g=e.split(", ");return a.map(function(a,b){var c;try{c=d("LSMediaUrlUtils").isTimestampExpired((h||(h=d("I64"))).of_string(f[b]))}catch(a){c=!0}if(c){return(c=g[b])!=null?c:""}else return a})}g["default"]=a}),98);
__d("MWXMAAttachmentItemBody.react",["I64","LSIntEnum","LSMediaUrlAttachment","LSMediaUrlAttachmentItem","MDSTextPairing.react","MNLSXMALayoutType","MWLSThread","MWXMAAttachmentActionTrigger.react","MWXMAAttachmentItemCtaButton.react","MWXMAAttachmentItemIcon.react","MWXMAAttachmentItemListItems.react","MWXMAAttachmentItemMainText.react","MWXMAEventFacepiles.react","MessengerWebUXLoggerXMAEventLoggingImpl","ReQL","ReQLSuspense","getLSMediaAttachmentAvatarViewUrlList","react","stylex","useReStore","xmaLayouts"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l,m=j||(j=d("react"));b=j;var n=b.useEffect,o=b.c,p={buttonsOnly:{marginTop:"xdj266r",$$css:!0},buttonsWrapper:{justifySelf:"x1qab1bc",marginTop:"x14vqqas",$$css:!0},description:{display:"x78zum5",flexDirection:"x1q0g3np",flexGrow:"x1iyjqo2",marginEnd:"xw3qccf",$$css:!0},hasFavicon:{paddingEnd:"x4uap5",paddingStart:"xkhd6sd",$$css:!0},root:{display:"x78zum5",flexDirection:"xdt5ytf",flexGrow:"x1iyjqo2",justifyContent:"xl56j7k",marginTop:"x14vqqas",marginEnd:"xq8finb",marginBottom:"xod5an3",marginStart:"x16n37ib",minHeight:"xisnujt",$$css:!0},rootWithHeaderAndNoMedia:{marginTop:"xdj266r",$$css:!0},subthreadFacepiles:{marginEnd:"xmo9yow",marginTop:"x1k70j0n",paddingTop:"xexx8yu",paddingBottom:"x18d9i69",$$css:!0},xmaUnifiedtyles:{marginEnd:"xktsk01",marginBottom:"x1yztbdb",marginStart:"x1d52u69",marginTop:"x14vqqas",$$css:!0}};function a(a){var b=o(21),e=a.attachment,g=a.attachmentItem,j=a.bodyLineLimit,w=a.ctaPopoverMenu,x=a.facepiles,y=a.getFaviconUrlXMA,z=a.headlineLineLimit,A=a.isHscroll,B=a.isPressable,C=a.isSearchSingleBubblePlugin,D=a.isStandalone,E=a.mediaRenderQpl,F=a.onPollOptionFacepilePress,G=a.outgoing;a=a.xmaLayout;C=C===void 0?!1:C;G=G===void 0?!1:G;var H;H=!1;H=d("LSMediaUrlAttachment").faviconUrl(e)!=null||d("LSMediaUrlAttachmentItem").faviconUrl(g)!=null||e.hasXmaFavicon===!0;n(function(){return E==null?void 0:E.addPoint("render-xma-attachment-item-body",{bool:{has_icon:H}})},[H,E]);if(b[0]!==e.xmaLayoutType){var I;I=(k||(k=d("I64"))).equal((I=e.xmaLayoutType)!=null?I:(k||(k=d("I64"))).zero,(l||(l=d("LSIntEnum"))).ofNumber(c("MNLSXMALayoutType").THREAD_SHORTCUT));b[0]=e.xmaLayoutType;b[1]=I}else I=b[1];I=I;var J=!Boolean(g.titleText)&&!Boolean(g.subtitleText)&&!H,K=Boolean(g.titleText)||!D?g.titleText:e.titleText,L=Boolean(g.subtitleText)||!D?g.subtitleText:e.subtitleText,M=Boolean(g.bodyText)||!D?g.bodyText:e.bodyText,N;b[2]!==e?(N=c("getLSMediaAttachmentAvatarViewUrlList")(e),b[2]=e,b[3]=N):N=b[3];N=N;if(b[4]!==x||b[5]!==N||b[6]!==I||b[7]!==e.avatarViewContextText||b[8]!==e.avatarCount||b[9]!==g.attachmentCta1Id){var O;O=(O=x)!=null?O:N.length!==0&&!I?[m.jsx(c("MWXMAEventFacepiles.react"),{avatarText:e.avatarViewContextText,count:e.avatarCount,ctaId:g.attachmentCta1Id,urls:N},"xma-event-facepiles")]:[];b[4]=x;b[5]=N;b[6]=I;b[7]=e.avatarViewContextText;b[8]=e.avatarCount;b[9]=g.attachmentCta1Id;b[10]=O}else O=b[10];x=O;y=!Boolean(K)&&!Boolean(L)?[]:[m.jsx(c("MWXMAAttachmentActionTrigger.react"),{attachment:e,attachmentItem:g,isPressable:B,children:m.jsxs("div",{className:(h||(h=c("stylex")))(p.description,(I=H)!=null?I:p.hasFavicon),children:[m.jsx(c("MWXMAAttachmentItemIcon.react"),{attachment:e,attachmentItem:g,getFaviconUrlXMA:y,mediaRenderQpl:E}),m.jsx(c("MWXMAAttachmentItemMainText.react"),{attachment:e,bodyLineLimit:j,bodyText:M,facePileElement:(k||(k=d("I64"))).equal((O=e.avatarCount)!=null?O:(k||(k=d("I64"))).zero,(k||(k=d("I64"))).zero)?null:m.jsx(c("MWXMAEventFacepiles.react"),{avatarText:e.avatarViewContextText,count:e.avatarCount,ctaId:g.attachmentCta1Id,size:24,urls:N,xstyle:p.subthreadFacepiles}),hasIcon:H,headlineLineLimit:z,isHscroll:A,isStandalone:D,outgoing:G,subtitleText:(B=L)!=null?B:"",title:(I=K)!=null?I:"",xmaLayout:a})]})},"xma-action-trigger")];M=e.listItemsDescriptionText;O=e.listItemsDescriptionSubtitleText;N=e.cta2IconType;A=e.cta3IconType;D=e.listItemId1;G=e.listItemsSecondaryDescriptionText;L=e.messageId;B=e.threadKey;K=g.attachmentCta1Id;I=g.attachmentCta2Id;var P=g.attachmentCta3Id,Q=g.cta1IconType,R=g.cta1Title,S=g.cta1Type,T=g.cta2Title,U=g.cta2Type,V=g.cta3Title,W=g.cta3Type;J=S!=null&&R!=null&&K!=null?[m.jsxs("div",{className:(h||(h=c("stylex")))(p.buttonsWrapper,J?p.buttonsOnly:!1),children:[m.jsx(c("MWXMAAttachmentItemCtaButton.react"),{ctaIconType:Q,ctaId:K,messageId:L,threadKey:B,title:R,type:S}),U!=null&&T!=null&&I!=null?m.jsxs(m.Fragment,{children:[m.jsx(c("MWXMAAttachmentItemCtaButton.react"),{ctaIconType:N,ctaId:I,messageId:L,popoverMenu:w,threadKey:B,title:T,type:U}),W!=null&&V!=null&&P!=null?m.jsx(c("MWXMAAttachmentItemCtaButton.react"),{ctaIconType:A,ctaId:P,messageId:L,threadKey:B,title:V,type:W}):null]}):null]},"xma-cta-button")]:[];Q=M!=null?[m.jsx(t,{headlineLineLimit:z,listItemsDescriptionText:M},"xma-list-items-description-text")]:[];K=O!=null?[m.jsx(u,{bodyLineLimit:j,value:O},"xma-list-items-description-subtitle-text")]:[];R=D!=null?[m.jsx(c("MWXMAAttachmentItemListItems.react"),{attachment:e,onPollOptionFacepilePress:F},"list-item-1")]:[];S=G!=null?[m.jsx(v,{bodyLineLimit:j,listItemsSecondaryDescriptionText:G},"xma-list-items-secondary-description-text")]:[];N=[y,Q,K,x,R,S,J].reduce(s,[]);I=d("LSMediaUrlAttachment").previewUrl(e)!=null||d("LSMediaUrlAttachmentItem").playableUrl(g)!=null||d("LSMediaUrlAttachmentItem").previewUrl(g)!=null||d("LSMediaUrlAttachmentItem").previewUrlLarge(g)!=null||e.hasXmaPreview===!0;var X=(i||(i=c("useReStore")))();w=d("MWLSThread").useThread(B,r);b[11]!==X.tables.messages||b[12]!==e.messageId?(T=function(){return d("ReQL").fromTableAscending(X.tables.messages.index("messageId")).getKeyRange(e.messageId)},b[11]=X.tables.messages,b[12]=e.messageId,b[13]=T):T=b[13];b[14]!==X||b[15]!==e.messageId?(U=[X,e.messageId],b[14]=X,b[15]=e.messageId,b[16]=U):U=b[16];A=d("ReQLSuspense").useFirst(T,U,f.id+":365");b[17]!==e||b[18]!==A||b[19]!==w?(P={attachment:e,clickCategory:1,message:A,threadType:w},b[17]=e,b[18]=A,b[19]=w,b[20]=P):P=b[20];L=d("MessengerWebUXLoggerXMAEventLoggingImpl").useXMAEventsImpressionLoggerRef(P);return C?null:N.length===0?null:m.jsx("div",{className:(h||(h=c("stylex")))(p.root,a===d("xmaLayouts").XMA_LAYOUTS.UNIFIED_LAYOUT?p.xmaUnifiedtyles:!1,a!==d("xmaLayouts").XMA_LAYOUTS.UNIFIED_LAYOUT&&!I&&e.headerTitle!=null?p.rootWithHeaderAndNoMedia:!1),ref:L,children:N.map(q)})}function q(a,b){return m.jsx(m.Fragment,{children:a},String(b))}q.displayName=q.name+" [from "+f.id+"]";function r(a){return a.threadType}function s(a,b){return a.concat(b)}function t(a){var b=o(4),d=a.headlineLineLimit;a=a.listItemsDescriptionText;var e;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(e="x78zum5 x1q0g3np x1iyjqo2 xl56j7k xw3qccf",b[0]=e):e=b[0];b[1]!==a||b[2]!==d?(e=m.jsx("div",{className:e,children:m.jsx(c("MDSTextPairing.react"),{headline:a,headlineLineLimit:d,level:4,textAlign:"center"})}),b[1]=a,b[2]=d,b[3]=e):e=b[3];return e}function u(a){var b=o(4),d=a.bodyLineLimit;a=a.value;var e;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(e="x78zum5 xl56j7k xwib8y2 x889kno",b[0]=e):e=b[0];b[1]!==a||b[2]!==d?(e=m.jsx("div",{className:e,children:m.jsx(c("MDSTextPairing.react"),{body:a,bodyColor:"secondary",bodyLineLimit:d,level:4,textAlign:"center"})}),b[1]=a,b[2]=d,b[3]=e):e=b[3];return e}function v(a){var b=o(4),d=a.bodyLineLimit;a=a.listItemsSecondaryDescriptionText;var e;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(e="xod5an3",b[0]=e):e=b[0];b[1]!==a||b[2]!==d?(e=m.jsx("div",{className:e,children:m.jsx(c("MDSTextPairing.react"),{body:a,bodyColor:"secondary",bodyLineLimit:d,level:4})}),b[1]=a,b[2]=d,b[3]=e):e=b[3];return e}g["default"]=a}),98);
__d("MWXMAAttachmentItemImageDimensionCalculator",["I64","LSIntEnum","MNLSXMALayoutType","xmaLayouts"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a,b,e,f,g){var j=b.previewWidth!=null?(h||(h=d("I64"))).to_int32(b.previewWidth):0,k=a.previewWidth!=null?(h||(h=d("I64"))).to_int32(a.previewWidth):0,l=a.previewWidthLarge!=null?(h||(h=d("I64"))).to_int32(a.previewWidthLarge):0;j=j>0?j:k>0?k:l;k=b.previewHeight!=null?(h||(h=d("I64"))).to_int32(b.previewHeight):0;l=a.previewHeight!=null?(h||(h=d("I64"))).to_int32(a.previewHeight):0;var m=a.previewHeightLarge!=null?(h||(h=d("I64"))).to_int32(a.previewHeightLarge):0;k=k>0?k:l>0?l:m;l=b.defaultCtaType;l==="xma_montage_share"?m=!0:m=b.imageUrl==null?g:j===k;l=j!==0?k!==0?j/(k*1):0:0;a.xmaLayoutType!=null&&(h||(h=d("I64"))).equal(a.xmaLayoutType,(i||(i=d("LSIntEnum"))).ofNumber(c("MNLSXMALayoutType").STANDARD_DXMA))&&(l===0&&(l=2),m=!0);b=e;g={height:l===0?106:b/l,width:b};a={};f===d("xmaLayouts").XMA_LAYOUTS.UNIFIED_LAYOUT&&(k>j&&(g.height=b,g.width=l===0?106:b*l),a={aspectRatio:void 0,flexGrow:"0",height:g.height.toString()+"px",margin:"auto",width:g.width.toString()+"px"});e={height:(l===0?b-106:b/l).toString()+"px",width:b.toString()+"px"};return{aspectRatio:l,dimensions:g,dimensionsStyle:{height:g.height.toString()+"px",width:g.width.toString()+"px"},expand:m,informedTreatmentCardDimension:e,unifiedStyles:a}}g.calculateDimensions=a}),98);
__d("MWXIconClock",["MWXSvgIcon","SVGIcon","cr:12373","gkx"],(function(a,b,c,d,e,f,g){"use strict";a=d("MWXSvgIcon").mwxSvgIcon(d("SVGIcon").svgIcon(b("cr:12373")),c("gkx")("23219"));g["default"]=a}),98);
__d("MWXMAEarlyAccessOverlay.react",["fbt","I64","LSIntEnum","MNXMAPreviewImageDecorationType","MWXColumn.react","MWXColumnItem.react","MWXIconClock","MWXIconStrict.react","MWXRow.react","MWXRowItem.react","MWXText.react","ServerTime","gkx","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l=i||(i=d("react"));b=i;var m=b.useEffect;b.useMemo;var n=b.useState,o=b.c,p={pill:{backgroundColor:"xatbrnm",borderTopStartRadius:"x107yiy2",borderTopEndRadius:"xv8uw2v",borderBottomEndRadius:"x1tfwpuw",borderBottomStartRadius:"x2g32xy",$$css:!0}};function a(a){var b=o(17),e=a.attachment;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(a=d("ServerTime").getMillis(),b[0]=a):a=b[0];a=n(a);var f=a[0],g=a[1];b[1]!==e.previewOverlayCountdownExpiry||b[2]!==e.previewImageDecorationType?(a=function(){if(e.previewOverlayCountdownExpiry!=null&&e.previewImageDecorationType!==null&&(j||(j=d("I64"))).equal(e.previewImageDecorationType,(k||(k=d("LSIntEnum"))).ofNumber(c("MNXMAPreviewImageDecorationType").PILL))&&c("gkx")("1643")){var a=window.setInterval(function(){g(d("ServerTime").getMillis())},1e3);return function(){return window.clearInterval(a)}}},b[1]=e.previewOverlayCountdownExpiry,b[2]=e.previewImageDecorationType,b[3]=a):a=b[3];var i;b[4]!==e.previewImageDecorationType||b[5]!==e.previewOverlayCountdownExpiry||b[6]!==f?(i=[e.previewImageDecorationType,e.previewOverlayCountdownExpiry,f],b[4]=e.previewImageDecorationType,b[5]=e.previewOverlayCountdownExpiry,b[6]=f,b[7]=i):i=b[7];m(a,i);var q;bb0:{a=e.previewOverlayCountdownExpiry;if(a!=null){i=(j||(j=d("I64"))).to_float(a)*1e3-f;a=Math.floor(i/36e5);f=Math.floor(i/6e4)%60;i=Math.floor(i/1e3)%60;if(a<0&&f<0&&i<0){q=null;break bb0}var r;b[8]!==a||b[9]!==f||b[10]!==i?(r=a?h._("__JHASH__z-6zXNtvXEV__JHASH__",[h._param("hours",a)]):f?h._("__JHASH__J0Qi9lOhYJe__JHASH__",[h._param("minutes",f)]):i?h._("__JHASH__0RhXAr4DyYr__JHASH__",[h._param("seconds",i)]):null,b[8]=a,b[9]=f,b[10]=i,b[11]=r):r=b[11];q=r;break bb0}q=void 0}a=q;if(e.previewImageDecorationType==null||!c("gkx")("1643"))return null;if((j||(j=d("I64"))).equal(e.previewImageDecorationType,(k||(k=d("LSIntEnum"))).ofNumber(c("MNXMAPreviewImageDecorationType").BLUR))){b[12]===Symbol["for"]("react.memo_cache_sentinel")?(f="x1h6ucep x1ey2m1c x78zum5 xds687c x17qophe x10l6tqk x13vifvy",b[12]=f):f=b[12];b[13]===Symbol["for"]("react.memo_cache_sentinel")?(i=l.jsx(c("MWXColumnItem.react"),{align:"center",children:l.jsx(c("MWXIconStrict.react"),{color:"white",icon:c("MWXIconClock"),size:20})}),b[13]=i):i=b[13];b[14]===Symbol["for"]("react.memo_cache_sentinel")?(r=l.jsx("div",{className:f,children:l.jsx(c("MWXRow.react"),{align:"center",expanding:!0,children:l.jsx(c("MWXRowItem.react"),{verticalAlign:"center",children:l.jsxs(c("MWXColumn.react"),{spacing:16,children:[i,l.jsx(c("MWXColumnItem.react"),{align:"center",children:l.jsx(c("MWXText.react"),{color:"white",type:"body2",children:h._("__JHASH__wNWq__FwzYH__JHASH__")})})]})})})}),b[14]=r):r=b[14];return r}if((j||(j=d("I64"))).equal(e.previewImageDecorationType,(k||(k=d("LSIntEnum"))).ofNumber(c("MNXMAPreviewImageDecorationType").PILL))){b[15]!==a?(q=a!=null&&l.jsx("div",{className:"x1ey2m1c x78zum5 xds687c x17qophe x10l6tqk x13vifvy",children:l.jsx(c("MWXRow.react"),{align:"end",expanding:!0,verticalAlign:"top",children:l.jsxs(c("MWXRow.react"),{paddingHorizontal:8,paddingVertical:0,spacingHorizontal:4,xstyle:p.pill,children:[l.jsx(c("MWXRowItem.react"),{verticalAlign:"center",children:l.jsx(c("MWXIconStrict.react"),{color:"white",icon:c("MWXIconClock"),size:16})}),l.jsx(c("MWXRowItem.react"),{verticalAlign:"center",children:l.jsx(c("MWXText.react"),{color:"white",type:"body4",children:a})})]})})}),b[15]=a,b[16]=q):q=b[16];return q}return null}g["default"]=a}),226);
__d("MWXIconLive",["MWXSvgIcon","SVGIcon","cr:12483","gkx"],(function(a,b,c,d,e,f,g){"use strict";a=d("MWXSvgIcon").mwxSvgIcon(d("SVGIcon").svgIcon(b("cr:12483")),c("gkx")("23219"));g["default"]=a}),98);
__d("MWXMALivePill.react",["fbt","I64","LSIntEnum","MNXMAPreviewImageDecorationType","MWXRow.react","MWXRowItem.react","MWXText.react","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l=(i||(i=d("react"))).c,m=i,n={pill:{borderTopStartRadius:"x1lcm9me",borderTopEndRadius:"x1yr5g0i",borderBottomEndRadius:"xrt01vj",borderBottomStartRadius:"x10y3i5r",paddingTop:"x1nn3v0j",paddingBottom:"x1120s5i",paddingStart:"x16hj40l",paddingEnd:"xsyo7zv",paddingLeft:null,paddingRight:null,textTransform:"xtvhhri",$$css:!0},pillLive:{backgroundColor:"x1cdvf7c",$$css:!0},pillLiveEnded:{backgroundColor:"x2bj2ny",$$css:!0}};function a(a){var b=l(8);a=a.previewImageDecorationType;a=(j||(j=d("I64"))).equal(a,(k||(k=d("LSIntEnum"))).ofNumber(c("MNXMAPreviewImageDecorationType").DXMA_LIVE_ENDED));var e=a?n.pillLiveEnded:n.pillLive,f;b[0]!==e?(f=[n.pill,e],b[0]=e,b[1]=f):f=b[1];e=a?"primary":"white";b[2]===Symbol["for"]("react.memo_cache_sentinel")?(a=h._("__JHASH__naqiogLE-_g__JHASH__"),b[2]=a):a=b[2];b[3]!==e?(a=m.jsx(c("MWXRowItem.react"),{verticalAlign:"center",children:m.jsx(c("MWXText.react"),{color:e,type:"bodyLink4",children:a})}),b[3]=e,b[4]=a):a=b[4];b[5]!==f||b[6]!==a?(e=m.jsx(c("MWXRow.react"),{paddingHorizontal:0,paddingVertical:0,spacingHorizontal:0,xstyle:f,children:a}),b[5]=f,b[6]=a,b[7]=e):e=b[7];return e}g["default"]=a}),226);
__d("MWXMALiveOverlay.react",["fbt","MWXColumn.react","MWXColumnItem.react","MWXIconLive","MWXIconStrict.react","MWXMALivePill.react","MWXRow.react","MWXRowItem.react","MWXText.react","react","xmaAttachmentUtils"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=(i||(i=d("react"))).c,k=i;function a(a){var b=j(5),e=a.attachment;a=a.isUnjoined;var f=e.previewImageDecorationType;if(f==null)return null;e=d("xmaAttachmentUtils").isLiveXMA(e);var g;b[0]!==f?(g=k.jsx(c("MWXMALivePill.react"),{previewImageDecorationType:f}),b[0]=f,b[1]=g):g=b[1];f=g;if(e){b[2]!==a||b[3]!==f?(g=a?k.jsx("div",{className:"x1h6ucep x1ey2m1c x78zum5 xds687c x17qophe x10l6tqk x13vifvy",children:k.jsx(c("MWXRow.react"),{align:"center",expanding:!0,children:k.jsx(c("MWXRowItem.react"),{verticalAlign:"center",children:k.jsxs(c("MWXColumn.react"),{spacing:16,children:[k.jsx(c("MWXColumnItem.react"),{align:"center",children:k.jsx(c("MWXIconStrict.react"),{color:"white",icon:c("MWXIconLive"),size:36})}),k.jsx(c("MWXColumnItem.react"),{align:"center",children:k.jsx(c("MWXText.react"),{color:"primaryOnMedia",type:"body2",children:h._("__JHASH__Ck-x9Kir4L3__JHASH__")})})]})})})}):k.jsx("div",{className:"x1ey2m1c x78zum5 xds687c x17qophe x10l6tqk x13vifvy",children:k.jsx(c("MWXRow.react"),{align:"end",expanding:!0,verticalAlign:"top",children:k.jsx(c("MWXRowItem.react"),{children:f})})}),b[2]=a,b[3]=f,b[4]=g):g=b[4];return g}return null}g["default"]=a}),226);
__d("MWXMAAttachmentItemImage.react",["FDSImageCover.react","I64","LSIntEnum","LSMessagingThreadTypeUtil","MAWConvertExtendedContentOverlayIconGlyphToInformTreatmentRenderingType","MNXMAPreviewImageDecorationType","MWInformedTreatment.react","MWXMAAttachmentItemImageDimensionCalculator","MWXMAEarlyAccessOverlay.react","MWXMALiveOverlay.react","ReQL","ReQLSuspense","gkx","react","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l=k||(k=d("react"));b=k;var m=b.useEffect,n=b.useRef,o=b.c;function a(a){var b=o(73),e=a.attachment,g=a.attachmentItem,k=a.cardWidth,p=a.isStandalone,q=a.mediaRenderQpl,r=a.previewUrl,s=a.testid;a=a.xmaLayout;var t=(h||(h=c("useReStore")))(),u;b[0]!==t.tables.threads||b[1]!==e.threadKey?(u=function(){return d("ReQL").fromTableAscending(t.tables.threads,["threadType"]).getKeyRange(e.threadKey)},b[0]=t.tables.threads,b[1]=e.threadKey,b[2]=u):u=b[2];var v;b[3]!==t||b[4]!==e.threadKey?(v=[t,e.threadKey],b[3]=t,b[4]=e.threadKey,b[5]=v):v=b[5];u=d("ReQLSuspense").useFirst(u,v,f.id+":61");b[6]!==u?(v=u!=null&&d("LSMessagingThreadTypeUtil").isUnjoinedDiscoverablePublicBroadcastChannel(u==null?void 0:u.threadType),b[6]=u,b[7]=v):v=b[7];v=v;var w;b[8]!==u?(w=u!=null&&d("LSMessagingThreadTypeUtil").isArmadilloSecure(u.threadType),b[8]=u,b[9]=w):w=b[9];w=w;var x=e.gatingTitle,y=e.gatingType;u=d("MWInformedTreatment.react").checkIsInformedTreatmentVisible(x,y,r,u==null?void 0:u.threadType);var z;b[10]!==e||b[11]!==g||b[12]!==k||b[13]!==a||b[14]!==p?(z=d("MWXMAAttachmentItemImageDimensionCalculator").calculateDimensions(e,g,k,a,p),b[10]=e,b[11]=g,b[12]=k,b[13]=a,b[14]=p,b[15]=z):z=b[15];g=z;b[16]!==e.previewImageDecorationType?(k=e.previewImageDecorationType!=null&&(i||(i=d("I64"))).equal(e.previewImageDecorationType,(j||(j=d("LSIntEnum"))).ofNumber(c("MNXMAPreviewImageDecorationType").BLUR))&&c("gkx")("1643"),b[16]=e.previewImageDecorationType,b[17]=k):k=b[17];a=k;b[18]!==v||b[19]!==e.previewImageDecorationType?(p=v&&e.previewImageDecorationType!=null&&((i||(i=d("I64"))).equal(e.previewImageDecorationType,(j||(j=d("LSIntEnum"))).ofNumber(c("MNXMAPreviewImageDecorationType").DXMA_LIVE))||(i||(i=d("I64"))).equal(e.previewImageDecorationType,(j||(j=d("LSIntEnum"))).ofNumber(c("MNXMAPreviewImageDecorationType").DXMA_LIVE_ENDED))),b[18]=v,b[19]=e.previewImageDecorationType,b[20]=p):p=b[20];z=p;b[21]!==a||b[22]!==z?(k=a||z?{filter:"blur(15px)",transform:"scale(1.1)"}:{},b[21]=a,b[22]=z,b[23]=k):k=b[23];p=k;var A=n(null);b[24]!==q?(a=function(){var a=A.current;a!=null&&a.complete&&(q==null?void 0:q.endSuccess())},z=[q],b[24]=q,b[25]=a,b[26]=z):(a=b[25],z=b[26]);m(a,z);if(r.length===0||r===""){q==null?void 0:q.endFail("empty_preview_url");return null}if(x!=null&&y!=null&&u){b[27]!==w||b[28]!==y?(k=w?d("MAWConvertExtendedContentOverlayIconGlyphToInformTreatmentRenderingType").convertExtendedContentOverlayIconGlyphToInformTreatmentRenderingType(parseInt(y,10)):y,b[27]=w,b[28]=y,b[29]=k):k=b[29];a=k;b[30]!==g.informedTreatmentCardDimension||b[31]!==x||b[32]!==a||b[33]!==q||b[34]!==e.messageId||b[35]!==r?(z=l.jsx(d("MWInformedTreatment.react").MWInformedTreatment,{dimension:g.informedTreatmentCardDimension,gatingTitle:x,gatingType:a,isXMA:!0,mediaRenderQpl:q,messageId:e.messageId,previewUrl:r}),b[30]=g.informedTreatmentCardDimension,b[31]=x,b[32]=a,b[33]=q,b[34]=e.messageId,b[35]=r,b[36]=z):z=b[36];return z}if(g.expand){b[37]===Symbol["for"]("react.memo_cache_sentinel")?(u="x78zum5 x6ikm8r x10wlt62 x1n2onr6 xh8yej3",b[37]=u):u=b[37];b[38]!==q?(w=function(){return q==null?void 0:q.endFail("load-image-error")},y=function(){return q==null?void 0:q.endSuccess()},b[38]=q,b[39]=w,b[40]=y):(w=b[39],y=b[40]);b[41]!==g.aspectRatio||b[42]!==g.unifiedStyles||b[43]!==p?(k=babelHelpers["extends"]({aspectRatio:g.aspectRatio,flexGrow:"1",height:"auto",maxWidth:"100%",objectFit:"cover"},g.unifiedStyles,p),b[41]=g.aspectRatio,b[42]=g.unifiedStyles,b[43]=p,b[44]=k):k=b[44];b[45]!==w||b[46]!==y||b[47]!==r||b[48]!==k?(x=l.jsx("img",{alt:"",onError:w,onLoad:y,ref:A,src:r,style:k}),b[45]=w,b[46]=y,b[47]=r,b[48]=k,b[49]=x):x=b[49];b[50]!==e?(a=l.jsx(c("MWXMAEarlyAccessOverlay.react"),{attachment:e}),b[50]=e,b[51]=a):a=b[51];b[52]!==e||b[53]!==v?(z=l.jsx(c("MWXMALiveOverlay.react"),{attachment:e,isUnjoined:v}),b[52]=e,b[53]=v,b[54]=z):z=b[54];b[55]!==s||b[56]!==x||b[57]!==a||b[58]!==z?(p=l.jsxs("div",{className:u,"data-testid":void 0,children:[x,a,z]}),b[55]=s,b[56]=x,b[57]=a,b[58]=z,b[59]=p):p=b[59];return p}b[60]===Symbol["for"]("react.memo_cache_sentinel")?(w="x78zum5 x6ikm8r x10wlt62 x1n2onr6 xh8yej3",b[60]=w):w=b[60];b[61]!==q?(y=function(){return q==null?void 0:q.endFail("load-image-error")},k=function(){return q==null?void 0:q.endSuccess()},b[61]=q,b[62]=y,b[63]=k):(y=b[62],k=b[63]);b[64]===Symbol["for"]("react.memo_cache_sentinel")?(v={bottom:"0",left:"0",position:"absolute",right:"0",top:"0"},b[64]=v):v=b[64];b[65]!==y||b[66]!==k||b[67]!==r?(u=l.jsx(c("FDSImageCover.react"),{alt:"",onError:y,onLoad:k,src:r,style:v}),b[65]=y,b[66]=k,b[67]=r,b[68]=u):u=b[68];b[69]!==s||b[70]!==g.dimensionsStyle||b[71]!==u?(x=l.jsx("div",{className:w,"data-testid":void 0,style:g.dimensionsStyle,children:u}),b[69]=s,b[70]=g.dimensionsStyle,b[71]=u,b[72]=x):x=b[72];return x}g["default"]=a}),98);
__d("MWXMAAttachmentItemDefaultImagePreview.react",["CometPlaceholder.react","MWXMAAttachmentActionTrigger.react","MWXMAAttachmentItemImage.react","nullthrows","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;var j=b.useEffect,k=b.c;function a(a){var b=k(20),d=a.attachment,e=a.attachmentItem,f=a.attachmentPreview,g=a.cardWidth,h=a.isPressable,m=a.isStandalone,n=a.mediaRenderQpl,o=a.renderLoadingPlaceholder;a=a.xmaLayout;var p,q;b[0]!==n||b[1]!==f.url?(p=function(){n==null?void 0:n.addPoint("render-xma-attachment-item-default-image-preview",{bool:{has_attachment_preview_url:Boolean(f.url)}}),Boolean(f.url)||(n==null?void 0:n.endFail("image-missing-preview-url"))},q=[f.url,n],b[0]=n,b[1]=f.url,b[2]=p,b[3]=q):(p=b[2],q=b[3]);j(p,q);if(!Boolean(f.url))return null;b[4]!==o?(p=o("MWXMAAttachmentItemDefaultImagePreview.Suspense",!0),b[4]=o,b[5]=p):p=b[5];b[6]!==f.url?(q=c("nullthrows")(f.url),b[6]=f.url,b[7]=q):q=b[7];b[8]!==d||b[9]!==e||b[10]!==g||b[11]!==h||b[12]!==m||b[13]!==n||b[14]!==q||b[15]!==a?(o=i.jsx(l,{attachment:d,attachmentItem:e,cardWidth:g,isPressable:h,isStandalone:m,mediaRenderQpl:n,previewUrl:q,xmaLayout:a}),b[8]=d,b[9]=e,b[10]=g,b[11]=h,b[12]=m,b[13]=n,b[14]=q,b[15]=a,b[16]=o):o=b[16];b[17]!==p||b[18]!==o?(d=i.jsx(c("CometPlaceholder.react"),{fallback:p,name:"MWXMAAttachmentItemDefaultImagePreview",children:o}),b[17]=p,b[18]=o,b[19]=d):d=b[19];return d}function l(a){var b=k(16),d=a.attachment,e=a.attachmentItem,f=a.cardWidth,g=a.isPressable,h=a.isStandalone,l=a.mediaRenderQpl,m=a.previewUrl;a=a.xmaLayout;var n,o;b[0]!==l?(n=function(){l==null?void 0:l.addPoint("render-xma-attachment-item-default-image-preview-impl")},o=[l],b[0]=l,b[1]=n,b[2]=o):(n=b[1],o=b[2]);j(n,o);b[3]!==d||b[4]!==e||b[5]!==f||b[6]!==h||b[7]!==l||b[8]!==m||b[9]!==a?(n=i.jsx(c("MWXMAAttachmentItemImage.react"),{attachment:d,attachmentItem:e,cardWidth:f,isStandalone:h,mediaRenderQpl:l,previewUrl:m,testid:void 0,xmaLayout:a}),b[3]=d,b[4]=e,b[5]=f,b[6]=h,b[7]=l,b[8]=m,b[9]=a,b[10]=n):n=b[10];b[11]!==d||b[12]!==e||b[13]!==g||b[14]!==n?(o=i.jsx(c("MWXMAAttachmentActionTrigger.react"),{attachment:d,attachmentItem:e,isPressable:g,children:n}),b[11]=d,b[12]=e,b[13]=g,b[14]=n,b[15]=o):o=b[15];return o}g["default"]=a}),98);
__d("MWXMAAttachmentItemDefaultUnsupportedPreview.react",["MWXMALivePill.react","react","xmaAttachmentUtils"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;var j=b.useEffect,k=b.c;function a(a){var b=k(11),e=a.attachment,f=a.mediaRenderQpl,g=e.previewImageDecorationType;b[0]!==e?(a=d("xmaAttachmentUtils").isLiveXMA(e),b[0]=e,b[1]=a):a=b[1];var h=a,l;b[2]!==f||b[3]!==g||b[4]!==h||b[5]!==e?(a=function(){f==null?void 0:f.addPoint("render-xma-attachment-item-default-unsupported-preview",{bool:{has_preview_image_decoration_type:g!=null,is_live_xma:h}}),d("xmaAttachmentUtils").isLiveXMA(e)&&g!=null?f==null?void 0:f.endSuccess():f==null?void 0:f.endFail("missing-xma-media")},l=[e,h,f,g],b[2]=f,b[3]=g,b[4]=h,b[5]=e,b[6]=a,b[7]=l):(a=b[6],l=b[7]);j(a,l);if(d("xmaAttachmentUtils").isLiveXMA(e)&&g!=null){b[8]===Symbol["for"]("react.memo_cache_sentinel")?(a="x78zum5 xzueoph xkrivgy x1gryazu xhrpt6u",b[8]=a):a=b[8];b[9]!==g?(l=i.jsx("div",{className:a,children:i.jsx(c("MWXMALivePill.react"),{previewImageDecorationType:g})}),b[9]=g,b[10]=l):l=b[10];return l}return null}g["default"]=a}),98);
__d("MWXMAAttachmentItemAttribution.react",["react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||(h=d("react"))).c,j=h;function a(a){var b=i(10);a=a.attachment;a=a;var c=a.attributionAppIcon;a=a.attributionAppName;if(c!=null&&a!=null){var d,e;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(d="x6s0dn4 x1gn5b1j x230xth x78zum5 x1rfph6h x1iorvi4 xsyo7zv xjkvuk6 x16hj40l",e="x14yjl9h xudhj91 x18nykt9 xww2gxu xlup9mm x1kky2od",b[0]=d,b[1]=e):(d=b[0],e=b[1]);b[2]!==c?(e=j.jsx("img",{className:e,src:c}),b[2]=c,b[3]=e):e=b[3];b[4]===Symbol["for"]("react.memo_cache_sentinel")?(c="xzsf02u x1nxh6w3 x1mnrxsn x13faqbe",b[4]=c):c=b[4];b[5]!==a?(c=j.jsx("span",{className:c,children:a}),b[5]=a,b[6]=c):c=b[6];b[7]!==e||b[8]!==c?(a=j.jsxs("div",{className:d,children:[e,c]}),b[7]=e,b[8]=c,b[9]=a):a=b[9];return a}return null}g["default"]=a}),98);
__d("MWXMAAttachmentItemDefaultVideoPreview.react",["CometObjectFitContainer.react","CometPlaceholder.react","I64","MWXGlimmer.react","MWXMAAttachmentActionTrigger.react","MWXMAAttachmentItemAttribution.react","deferredLoadComponent","nullthrows","react","requireDeferredForDisplay"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=h||(h=d("react"));b=h;var k=b.useEffect,l=b.c,m=c("deferredLoadComponent")(c("requireDeferredForDisplay")("MWChatVideoPlayer.react").__setRef("MWXMAAttachmentItemDefaultVideoPreview.react")),n={glimmer:{height:"x5yr21d",position:"x10l6tqk",width:"xh8yej3",$$css:!0}};function a(a){var b=l(17),d=a.attachment,e=a.attachmentItem,f=a.attachmentPreview,g=a.isPressable,h=a.mediaRenderQpl;a=a.renderLoadingPlaceholder;var i,m;b[0]!==h||b[1]!==f.url?(i=function(){h==null?void 0:h.addPoint("render-xma-attachment-item-default-video-preview",{bool:{has_attachment_preview_url:Boolean(f.url)}}),Boolean(f.url)||(h==null?void 0:h.endFail("video-missing-preview-url"))},m=[f.url,h],b[0]=h,b[1]=f.url,b[2]=i,b[3]=m):(i=b[2],m=b[3]);k(i,m);if(!Boolean(f.url))return null;b[4]!==a?(i=a("MWXMAAttachmentItemDefaultVideoPreview.Suspense",!0),b[4]=a,b[5]=i):i=b[5];b[6]!==f.url?(m=c("nullthrows")(f.url),b[6]=f.url,b[7]=m):m=b[7];b[8]!==d||b[9]!==e||b[10]!==g||b[11]!==h||b[12]!==m?(a=j.jsx(o,{attachment:d,attachmentItem:e,isPressable:g,mediaRenderQpl:h,playableUrl:m}),b[8]=d,b[9]=e,b[10]=g,b[11]=h,b[12]=m,b[13]=a):a=b[13];b[14]!==i||b[15]!==a?(d=j.jsx(c("CometPlaceholder.react"),{fallback:i,name:"MWXMAAttachmentItemDefaultVideoPreview",children:a}),b[14]=i,b[15]=a,b[16]=d):d=b[16];return d}function o(a){var b=l(26),e=a.attachment,f=a.attachmentItem,g=a.isPressable,h=a.mediaRenderQpl;a=a.playableUrl;var n,o;b[0]!==h?(n=function(){h==null?void 0:h.addPoint("render-xma-attachment-item-default-video-preview-impl")},o=[h],b[0]=h,b[1]=n,b[2]=o):(n=b[1],o=b[2]);k(n,o);o=(n=e.shouldAutoplayVideo)!=null?n:!1;n=o?"none":"mwchat";var p;b[3]!==f.previewHeight?(p=f.previewHeight!=null?(i||(i=d("I64"))).to_int32(f.previewHeight):0,b[3]=f.previewHeight,b[4]=p):p=b[4];var r;b[5]!==f.previewWidth?(r=f.previewWidth!=null?(i||(i=d("I64"))).to_int32(f.previewWidth):0,b[5]=f.previewWidth,b[6]=r):r=b[6];var s;b[7]!==n||b[8]!==f.attachmentFbid||b[9]!==h||b[10]!==p||b[11]!==r||b[12]!==a?(s=j.jsx(m,{controls:n,fbid:f.attachmentFbid,hideExpandButton:!1,mediaRenderQpl:h,originalHeight:p,originalWidth:r,sdSrc:a,shouldForcePauseOnClick:!0}),b[7]=n,b[8]=f.attachmentFbid,b[9]=h,b[10]=p,b[11]=r,b[12]=a,b[13]=s):s=b[13];b[14]!==f||b[15]!==s?(n=j.jsx(q,{attachmentItem:f,testid:void 0,children:s}),b[14]=f,b[15]=s,b[16]=n):n=b[16];b[17]!==o||b[18]!==e?(p=o?j.jsx(c("MWXMAAttachmentItemAttribution.react"),{attachment:e}):null,b[17]=o,b[18]=e,b[19]=p):p=b[19];b[20]!==e||b[21]!==f||b[22]!==g||b[23]!==n||b[24]!==p?(r=j.jsxs(c("MWXMAAttachmentActionTrigger.react"),{attachment:e,attachmentItem:f,isPressable:g,children:[n,p]}),b[20]=e,b[21]=f,b[22]=g,b[23]=n,b[24]=p,b[25]=r):r=b[25];return r}function p(){var a=l(1),b;a[0]===Symbol["for"]("react.memo_cache_sentinel")?(b=j.jsx("div",{className:"x78zum5 x5yr21d x6ikm8r x10wlt62 x10l6tqk xh8yej3",children:j.jsx(c("MWXGlimmer.react"),{index:0,xstyle:n.glimmer})}),a[0]=b):b=a[0];return b}function q(a){var b,e=l(7),f=a.attachmentItem,g=a.children;a=a.testid;b=(i||(i=d("I64"))).to_int32((b=f.previewWidth)!=null?b:(i||(i=d("I64"))).zero);f=i.to_int32((f=f.previewHeight)!=null?f:(i||(i=d("I64"))).zero);b=b!==0?f!==0?b/f:0:0;f=f>250&&b<.8;f=f?.8:b;e[0]===Symbol["for"]("react.memo_cache_sentinel")?(b=j.jsx(p,{}),e[0]=b):b=e[0];e[1]!==g?(b=j.jsx(c("CometPlaceholder.react"),{fallback:b,name:"MWXMAAttachmentItemVideoContainer",children:g}),e[1]=g,e[2]=b):b=e[2];e[3]!==f||e[4]!==a||e[5]!==b?(g=j.jsx(c("CometObjectFitContainer.react"),{contentAspectRatio:f,testid:void 0,children:b}),e[3]=f,e[4]=a,e[5]=b,e[6]=g):g=e[6];return g}g["default"]=a}),98);
__d("MWXMAAttachmentItemDefaultPreviewInner.react",["LSMediaUrlAttachment","LSMediaUrlAttachmentItem","MWLSThreadDisplayContext","MWPBaseXMAAttachmentItem.react","MWXMAAttachmentItemDefaultImagePreview.react","MWXMAAttachmentItemDefaultUnsupportedPreview.react","MWXMAAttachmentItemDefaultVideoPreview.react","react","xmaAttachmentUtils"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;var j=b.useEffect,k=b.c;function a(a){var b=k(43),e=a.attachment,f=a.attachmentItem,g=a.cardWidth,h=a.getPreviewUrlXMA,l=a.isPressable,m=a.isStandalone,n=a.mediaRenderQpl,o=a.renderLoadingPlaceholder;a=a.xmaLayout;var p=d("MWLSThreadDisplayContext").useMWLSThreadDisplayContext(),q=p==="Inbox";b[0]!==e||b[1]!==f||b[2]!==h||b[3]!==n||b[4]!==q?(p=d("MWPBaseXMAAttachmentItem.react").getXMAAttachmentItemPreview({attachment:e,attachmentItem:f,description:"MWXMAAttachmentItemDefaultPreviewImpl",getPreviewUrl:h,mediaRenderQpl:n,preferLargePreview:q}),b[0]=e,b[1]=f,b[2]=h,b[3]=n,b[4]=q,b[5]=p):p=b[5];var r=p,s=(r.type==="Video"||r.type==="Image")&&r.url.length>0;b[6]!==e?(p=d("xmaAttachmentUtils").isLiveXMA(e),b[6]=e,b[7]=p):p=b[7];var t=p,u;b[8]!==n||b[9]!==e||b[10]!==f||b[11]!==s||b[12]!==r.hasPlayableUrl||b[13]!==r.hasPreviewUrl||b[14]!==r.url||b[15]!==r.type||b[16]!==r.playableUrlMimeType||b[17]!==r.mimeType||b[18]!==q||b[19]!==t||b[20]!==h?(p=function(){n==null?void 0:n.addPoint("render-xma-attachment-item-default-preview-impl",{bool:{attachment_has_playable_url:Boolean(d("LSMediaUrlAttachment").playableUrl(e)),attachment_has_preview_url:Boolean(d("LSMediaUrlAttachment").previewUrl(e)),attachment_has_preview_url_large:Boolean(d("LSMediaUrlAttachment").previewUrlLarge(e)),attachment_item_has_playable_url:Boolean(d("LSMediaUrlAttachmentItem").playableUrl(f)),attachment_item_has_preview_url:Boolean(d("LSMediaUrlAttachmentItem").previewUrl(f)),attachment_item_has_preview_url_large:Boolean(d("LSMediaUrlAttachmentItem").previewUrlLarge(f)),has_media:s,has_playable_url:r.hasPlayableUrl,has_preview_url:r.hasPreviewUrl,has_url:Boolean(r.url),is_large_surface:q,is_live_xma:t,is_preview_url_callback_fct_set:h!=null},string:{attachment_preview_type:r.type,playable_url_mime_type:r.playableUrlMimeType,preview_url_mime_type:r.mimeType}})},u=[e,f,r.hasPlayableUrl,r.hasPreviewUrl,r.mimeType,r.playableUrlMimeType,r.type,r.url,h,s,q,t,n],b[8]=n,b[9]=e,b[10]=f,b[11]=s,b[12]=r.hasPlayableUrl,b[13]=r.hasPreviewUrl,b[14]=r.url,b[15]=r.type,b[16]=r.playableUrlMimeType,b[17]=r.mimeType,b[18]=q,b[19]=t,b[20]=h,b[21]=p,b[22]=u):(p=b[21],u=b[22]);j(p,u);switch(r.type){case"Video":b[23]!==e||b[24]!==f||b[25]!==r||b[26]!==l||b[27]!==n||b[28]!==o?(p=i.jsx(c("MWXMAAttachmentItemDefaultVideoPreview.react"),{attachment:e,attachmentItem:f,attachmentPreview:r,isPressable:l,mediaRenderQpl:n,renderLoadingPlaceholder:o}),b[23]=e,b[24]=f,b[25]=r,b[26]=l,b[27]=n,b[28]=o,b[29]=p):p=b[29];return p;case"Image":b[30]!==e||b[31]!==f||b[32]!==r||b[33]!==g||b[34]!==l||b[35]!==m||b[36]!==n||b[37]!==o||b[38]!==a?(u=i.jsx(c("MWXMAAttachmentItemDefaultImagePreview.react"),{attachment:e,attachmentItem:f,attachmentPreview:r,cardWidth:g,isPressable:l,isStandalone:m,mediaRenderQpl:n,renderLoadingPlaceholder:o,xmaLayout:a}),b[30]=e,b[31]=f,b[32]=r,b[33]=g,b[34]=l,b[35]=m,b[36]=n,b[37]=o,b[38]=a,b[39]=u):u=b[39];return u;case"Unsupported":b[40]!==e||b[41]!==n?(p=i.jsx(c("MWXMAAttachmentItemDefaultUnsupportedPreview.react"),{attachment:e,mediaRenderQpl:n}),b[40]=e,b[41]=n,b[42]=p):p=b[42];return p}}g["default"]=a}),98);
__d("MWXMAAttachmentItemDefaultPreview.react",["CometHeroHoldTrigger.react","CometPlaceholder.react","LSMediaUrlAttachment","LSMediaUrlAttachmentItem","LSMessagingThreadTypeUtil","MWV2AttachmentLoadingPlaceholder.react","MWXMAAttachmentItemDefaultPreviewInner.react","MWXMAAttachmentItemImageDimensionCalculator","gkx","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;var j=b.useEffect,k=b.c,l={loadingPlaceholder:{borderTopStartRadius:"x168nmei",borderTopEndRadius:"x13lgxp2",borderBottomEndRadius:"x5pf9jr",borderBottomStartRadius:"xo71vjh",display:"x78zum5",overflowX:"x6ikm8r",overflowY:"x10wlt62",position:"x1n2onr6",width:"xh8yej3",$$css:!0}};function a(a){var b=k(37),e=a.attachment,f=a.attachmentItem,g=a.cardWidth,h=a.getPreviewUrlXMA,m=a.isPressable,n=a.isStandalone,o=a.mediaRenderQpl,p=a.threadType;a=a.xmaLayout;var q=d("LSMediaUrlAttachment").previewUrl(e)!=null||d("LSMediaUrlAttachmentItem").playableUrl(f)!=null||d("LSMediaUrlAttachmentItem").previewUrl(f)!=null||d("LSMediaUrlAttachmentItem").previewUrlLarge(f)!=null||e.hasXmaPreview===!0,r,s;b[0]!==o||b[1]!==e||b[2]!==f||b[3]!==q||b[4]!==h?(r=function(){o==null?void 0:o.addPoint("render-xma-attachment-item-default-preview",{bool:{attachment_has_playable_url:Boolean(d("LSMediaUrlAttachment").playableUrl(e)),attachment_has_preview_url:Boolean(d("LSMediaUrlAttachment").previewUrl(e)),attachment_has_preview_url_large:Boolean(d("LSMediaUrlAttachment").previewUrlLarge(e)),attachment_item_has_playable_url:Boolean(d("LSMediaUrlAttachmentItem").playableUrl(f)),attachment_item_has_preview_url:Boolean(d("LSMediaUrlAttachmentItem").previewUrl(f)),attachment_item_has_preview_url_large:Boolean(d("LSMediaUrlAttachmentItem").previewUrlLarge(f)),has_attachment_fbid:Boolean(e.attachmentFbid),has_media:e.hasMedia,has_preview:q,has_xma_preview:e.hasXmaPreview,is_attachment_fbid_number:!isNaN(e.attachmentFbid),is_preview_url_callback_fct_set:h!=null},string:{attachment_item_playable_url_mime_type:e.playableUrlMimeType,attachment_item_preview_url_mime_type:e.previewUrlMimeType,attachment_playable_url_mime_type:e.playableUrlMimeType,attachment_preview_url_mime_type:e.previewUrlMimeType}}),q||(o==null?void 0:o.endSuccess())},s=[e,f,h,q,o],b[0]=o,b[1]=e,b[2]=f,b[3]=q,b[4]=h,b[5]=r,b[6]=s):(r=b[5],s=b[6]);j(r,s);b[7]!==e||b[8]!==f||b[9]!==g||b[10]!==a||b[11]!==n?(r=d("MWXMAAttachmentItemImageDimensionCalculator").calculateDimensions(e,f,g,a,n),b[7]=e,b[8]=f,b[9]=g,b[10]=a,b[11]=n,b[12]=r):r=b[12];s=r;var t=s.dimensions.width,u=s.dimensions.height;r=s.aspectRatio;var v=g/(r>0?r:1);s=p!=null&&d("LSMessagingThreadTypeUtil").isArmadilloSecure(p);if(!q)return null;b[13]!==u||b[14]!==v||b[15]!==g||b[16]!==o||b[17]!==t?(r=function(a,b){return i.jsxs(i.Fragment,{children:[i.jsx(c("MWV2AttachmentLoadingPlaceholder.react"),{descriptionForLogging:a,height:u,maxHeight:v,maxWidth:g,mediaRenderQpl:o,width:t,xstyle:l.loadingPlaceholder}),!b&&i.jsx(c("CometHeroHoldTrigger.react"),{description:a,hold:!0})]})},b[13]=u,b[14]=v,b[15]=g,b[16]=o,b[17]=t,b[18]=r):r=b[18];p=r;if(s&&q&&e.hasMedia===!1&&c("gkx")("1336")){b[19]!==p?(r=p("MWXMAAttachmentItemDefaultPreview.NoMedia",!1),b[19]=p,b[20]=r):r=b[20];return r}b[21]!==q||b[22]!==p?(s=q&&p("MWXMAAttachmentItemDefaultPreview.Suspense",!0),b[21]=q,b[22]=p,b[23]=s):s=b[23];b[24]!==e||b[25]!==f||b[26]!==g||b[27]!==h||b[28]!==m||b[29]!==n||b[30]!==o||b[31]!==p||b[32]!==a?(r=i.jsx(c("MWXMAAttachmentItemDefaultPreviewInner.react"),{attachment:e,attachmentItem:f,cardWidth:g,getPreviewUrlXMA:h,isPressable:m,isStandalone:n,mediaRenderQpl:o,renderLoadingPlaceholder:p,xmaLayout:a}),b[24]=e,b[25]=f,b[26]=g,b[27]=h,b[28]=m,b[29]=n,b[30]=o,b[31]=p,b[32]=a,b[33]=r):r=b[33];b[34]!==s||b[35]!==r?(m=i.jsx(c("CometPlaceholder.react"),{fallback:s,name:"MWXMAAttachmentItemDefaultPreview",children:r}),b[34]=s,b[35]=r,b[36]=m):m=b[36];return m}g["default"]=a}),98);
__d("MWXMAAttachmentItemFBStoryPreview.react",["fbt","CometHeroHoldTrigger.react","CometPlaceholder.react","LSMediaUrlAttachment","LSMediaUrlAttachmentItem","LSMessagingThreadTypeUtil","MWLSThreadDisplayContext","MWPBaseXMAAttachmentItem.react","MWPContactContext.react","MWV2AttachmentLoadingPlaceholder.react","MWXColumn.react","MWXColumnItem.react","MWXIconAppFacebook","MWXIconStrict.react","MWXMAAttachmentActionTrigger.react","MWXMAAttachmentItemImage.react","MWXMAAttachmentItemImageDimensionCalculator","MWXProfilePhoto.react","MWXRow.react","MWXRowItem.react","MWXText.react","MWXTextPairing.react","getLSMediaContactProfilePictureUrl","gkx","nullthrows","react","xmaAttachmentUtils"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||(i=d("react"));b=i;var k=b.useEffect,l=b.c,m={loadingPlaceholder:{borderTopStartRadius:"x168nmei",borderTopEndRadius:"x13lgxp2",borderBottomEndRadius:"x5pf9jr",borderBottomStartRadius:"xo71vjh",display:"x78zum5",overflowX:"x6ikm8r",overflowY:"x10wlt62",position:"x1n2onr6",width:"xh8yej3",$$css:!0}};function a(a){var b=l(38),e=a.attachment,f=a.attachmentItem,g=a.cardWidth,h=a.getPreviewUrlXMA,i=a.isPressable,o=a.isStandalone,p=a.mediaRenderQpl,q=a.threadType;a=a.xmaLayout;var r=d("LSMediaUrlAttachment").previewUrl(e)!=null||d("LSMediaUrlAttachmentItem").playableUrl(f)!=null||d("LSMediaUrlAttachmentItem").previewUrl(f)!=null||d("LSMediaUrlAttachmentItem").previewUrlLarge(f)!=null||e.hasXmaPreview===!0,s,t;b[0]!==p||b[1]!==r?(s=function(){p==null?void 0:p.addPoint("render-xma-attachment-item-default-preview",{bool:{has_preview:r}}),r||(p==null?void 0:p.endSuccess())},t=[r,p],b[0]=p,b[1]=r,b[2]=s,b[3]=t):(s=b[2],t=b[3]);k(s,t);b[4]!==e||b[5]!==f||b[6]!==g||b[7]!==a||b[8]!==o?(s=d("MWXMAAttachmentItemImageDimensionCalculator").calculateDimensions(e,f,g,a,o),b[4]=e,b[5]=f,b[6]=g,b[7]=a,b[8]=o,b[9]=s):s=b[9];t=s;s=t.dimensions.width;var u=t.dimensions.height;t=t.aspectRatio;t=g/(t>0?t:1);q=q!=null&&d("LSMessagingThreadTypeUtil").isArmadilloSecure(q);if(!r)return null;if(q&&r&&e.hasMedia===!1&&c("gkx")("1336")){b[10]!==u||b[11]!==t||b[12]!==g||b[13]!==p||b[14]!==s?(q=j.jsx(c("MWV2AttachmentLoadingPlaceholder.react"),{descriptionForLogging:"MWXMAAttachmentItemFBStoryPreview.NoMedia",height:u,maxHeight:t,maxWidth:g,mediaRenderQpl:p,width:s,xstyle:m.loadingPlaceholder}),b[10]=u,b[11]=t,b[12]=g,b[13]=p,b[14]=s,b[15]=q):q=b[15];var v;b[16]===Symbol["for"]("react.memo_cache_sentinel")?(v=j.jsx(c("CometHeroHoldTrigger.react"),{description:"MWXMAAttachmentItemFBStoryPreview.NoMedia",hold:!0}),b[16]=v):v=b[16];b[17]!==q?(v=j.jsxs(j.Fragment,{children:[q,v]}),b[17]=q,b[18]=v):v=b[18];return v}b[19]!==r||b[20]!==u||b[21]!==t||b[22]!==g||b[23]!==p||b[24]!==s?(q=r&&j.jsx(c("MWV2AttachmentLoadingPlaceholder.react"),{descriptionForLogging:"MWXMAAttachmentItemFBStoryPreview.Suspense",height:u,maxHeight:t,maxWidth:g,mediaRenderQpl:p,width:s,xstyle:m.loadingPlaceholder}),b[19]=r,b[20]=u,b[21]=t,b[22]=g,b[23]=p,b[24]=s,b[25]=q):q=b[25];b[26]!==e||b[27]!==f||b[28]!==g||b[29]!==h||b[30]!==i||b[31]!==o||b[32]!==p||b[33]!==a?(v=j.jsx(n,{attachment:e,attachmentItem:f,cardWidth:g,getPreviewUrlXMA:h,isPressable:i,isStandalone:o,mediaRenderQpl:p,xmaLayout:a}),b[26]=e,b[27]=f,b[28]=g,b[29]=h,b[30]=i,b[31]=o,b[32]=p,b[33]=a,b[34]=v):v=b[34];b[35]!==q||b[36]!==v?(u=j.jsx(c("CometPlaceholder.react"),{fallback:q,name:"MWXMAAttachmentItemFBStoryPreview",children:v}),b[35]=q,b[36]=v,b[37]=u):u=b[37];return u}function n(a){var b=l(27),e=a.attachment,f=a.attachmentItem,g=a.cardWidth,i=a.getPreviewUrlXMA,m=a.isPressable,n=a.isStandalone,o=a.mediaRenderQpl;a=a.xmaLayout;var p=d("MWLSThreadDisplayContext").useMWLSThreadDisplayContext(),q=d("MWPContactContext.react").useMWPContactStableContext();q=q.contact;var r=p==="Inbox",s=d("MWPBaseXMAAttachmentItem.react").getXMAAttachmentItemPreview({attachment:e,attachmentItem:f,description:"MWXMAAttachmentItemFBStoryPreview.getXMAAttachmentItemPreview",getPreviewUrl:i,mediaRenderQpl:o,preferLargePreview:r}),t=(s.type==="Video"||s.type==="Image")&&s.url.length>0,u=d("xmaAttachmentUtils").isLiveXMA(e);k(function(){o==null?void 0:o.addPoint("render-xma-attachment-item-default-preview-impl",{bool:{attachment_has_playable_url:Boolean(d("LSMediaUrlAttachment").playableUrl(e)),attachment_has_preview_url:Boolean(d("LSMediaUrlAttachment").previewUrl(e)),attachment_has_preview_url_large:Boolean(d("LSMediaUrlAttachment").previewUrlLarge(e)),attachment_item_has_playable_url:Boolean(d("LSMediaUrlAttachmentItem").playableUrl(f)),attachment_item_has_preview_url:Boolean(d("LSMediaUrlAttachmentItem").previewUrl(f)),attachment_item_has_preview_url_large:Boolean(d("LSMediaUrlAttachmentItem").previewUrlLarge(f)),has_media:t,has_playable_url:s.hasPlayableUrl,has_preview_url:s.hasPreviewUrl,has_url:Boolean(s.url),is_large_surface:r,is_live_xma:u,is_preview_url_callback_fct_set:i!=null},string:{attachment_preview_type:s.type,playable_url_mime_type:s.playableUrlMimeType,preview_url_mime_type:s.mimeType}})},[e,f,s.hasPlayableUrl,s.hasPreviewUrl,s.mimeType,s.playableUrlMimeType,s.type,s.url,i,t,r,u,o]);if(s.url==null)return null;if(!Boolean(s.url)){o==null?void 0:o.endFail("image-missing-preview-url");return null}p=c("MWXMAAttachmentActionTrigger.react");var v;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(v="x1n2onr6 xh8yej3",b[0]=v):v=b[0];var w=c("MWXMAAttachmentItemImage.react"),x=c("nullthrows")(s.url),y;b[1]!==w||b[2]!==e||b[3]!==f||b[4]!==g||b[5]!==n||b[6]!==o||b[7]!==x||b[8]!==a?(y=j.jsx(w,{attachment:e,attachmentItem:f,cardWidth:g,isStandalone:n,mediaRenderQpl:o,previewUrl:x,testid:void 0,xmaLayout:a}),b[1]=w,b[2]=e,b[3]=f,b[4]=g,b[5]=n,b[6]=o,b[7]=x,b[8]=a,b[9]=y):y=b[9];b[10]===Symbol["for"]("react.memo_cache_sentinel")?(w="x146my0y x78zum5 x5yr21d x10l6tqk x17qophe x13vifvy xh8yej3",b[10]=w):w=b[10];b[11]!==q?(g=q&&j.jsx(c("MWXColumnItem.react"),{expanding:!0,verticalAlign:"space-between",children:j.jsxs(c("MWXRow.react"),{align:"start",spacingHorizontal:8,verticalAlign:"center",children:[j.jsx(c("MWXRowItem.react"),{children:j.jsx(c("MWXProfilePhoto.react"),{size:24,source:{uri:c("getLSMediaContactProfilePictureUrl")(q)}})}),j.jsx(c("MWXRowItem.react"),{children:j.jsx(c("MWXTextPairing.react"),{body:j.jsx(c("MWXText.react"),{color:"secondaryOnMedia",type:"bodyLink3",children:q.name}),level:4,metaColor:"secondaryOnMedia"})})]})}),b[11]=q,b[12]=g):g=b[12];b[13]===Symbol["for"]("react.memo_cache_sentinel")?(n=j.jsx(c("MWXRowItem.react"),{children:j.jsx(c("MWXIconStrict.react"),{color:"white",icon:c("MWXIconAppFacebook"),size:12})}),b[13]=n):n=b[13];b[14]===Symbol["for"]("react.memo_cache_sentinel")?(x=j.jsx(c("MWXColumnItem.react"),{paddingVertical:8,children:j.jsxs(c("MWXRow.react"),{align:"start",paddingVertical:8,spacingHorizontal:4,verticalAlign:"center",children:[n,j.jsx(c("MWXRowItem.react"),{children:j.jsx(c("MWXTextPairing.react"),{body:j.jsx(c("MWXText.react"),{color:"secondaryOnMedia",type:"bodyLink4",children:h._("__JHASH__kmxJ_4_Q1ZP__JHASH__")}),level:4,metaColor:"secondaryOnMedia"})})]})}),b[14]=x):x=b[14];b[15]!==g?(a=j.jsx("div",{className:w,children:j.jsxs(c("MWXColumn.react"),{children:[g,x]})}),b[15]=g,b[16]=a):a=b[16];b[17]!==v||b[18]!==y||b[19]!==a?(q=j.jsxs("div",{className:v,children:[y,a]}),b[17]=v,b[18]=y,b[19]=a,b[20]=q):q=b[20];b[21]!==p||b[22]!==e||b[23]!==f||b[24]!==m||b[25]!==q?(n=j.jsx(p,{attachment:e,attachmentItem:f,isPressable:m,children:q}),b[21]=p,b[22]=e,b[23]=f,b[24]=m,b[25]=q,b[26]=n):n=b[26];return n}g["default"]=a}),226);
__d("MWXMAAttachmentItemHeaderIcon.react",["FDSImageCover.react","FDSSkittleIcon.react","MWXMAIconParser.react","react","xmaLayouts"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;var j=b.useEffect,k=b.c;function a(a){var b=k(18),e=a.attachment,f=a.getHeaderUrlXMA,g=a.mediaRenderQpl;a=a.xmaLayout;a=a===void 0?d("xmaLayouts").XMA_LAYOUTS.DEFAULT:a;if(b[0]!==f||b[1]!==e||b[2]!==g){var h=f(e,"MWXMAAttachmentItemHeaderIcon",g);h=h==null?void 0:d("MWXMAIconParser.react").parse(h);b[0]=f;b[1]=e;b[2]=g;b[3]=h}else h=b[3];var l=h;b[4]!==g||b[5]!==l?(f=function(){return g==null?void 0:g.addPoint("render-xma-attachment-item-header-icon",{bool:{has_icon:l!=null}})},e=[l,g],b[4]=g,b[5]=l,b[6]=f,b[7]=e):(f=b[6],e=b[7]);j(f,e);if(l==null)return null;if(typeof l==="string"){h=a===d("xmaLayouts").XMA_LAYOUTS.UNIFIED_LAYOUT?"40px":"32px";b[8]===Symbol["for"]("react.memo_cache_sentinel")?(f="x6s0dn4 x78zum5 x5yr21d xq8finb",b[8]=f):f=b[8];b[9]!==h?(e={borderRadius:"50%",height:h,width:h},b[9]=h,b[10]=e):e=b[10];b[11]!==l||b[12]!==e?(a=i.jsx("div",{className:f,children:i.jsx(c("FDSImageCover.react"),{alt:"Icon for this message's header",src:l,style:e})}),b[11]=l,b[12]=e,b[13]=a):a=b[13];return a}b[14]===Symbol["for"]("react.memo_cache_sentinel")?(h="x6s0dn4 x78zum5 x5yr21d xq8finb",b[14]=h):h=b[14];b[15]!==l.color||b[16]!==l.icon?(f=i.jsx("div",{className:h,children:i.jsx(c("FDSSkittleIcon.react"),{color:l.color,icon:l.icon,size:36})}),b[15]=l.color,b[16]=l.icon,b[17]=f):f=b[17];return f}g["default"]=a}),98);
__d("MWXMAAttachmentItemHeaderIconWithPlaceholder.react",["CometPlaceholder.react","MWV2AttachmentLoadingPlaceholder.react","MWXMAAttachmentItemHeaderIcon.react","react","xmaLayouts"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;var j=b.useEffect,k=b.c,l={loadingPlaceholder:{borderTopStartRadius:"x14yjl9h",borderTopEndRadius:"xudhj91",borderBottomEndRadius:"x18nykt9",borderBottomStartRadius:"xww2gxu",$$css:!0}};function a(a){var b=k(14),e=a.attachment,f=a.getHeaderUrlXMA,g=a.mediaRenderQpl;a=a.xmaLayout;a=a===void 0?d("xmaLayouts").XMA_LAYOUTS.DEFAULT:a;var h,m;b[0]!==g?(h=function(){return g==null?void 0:g.addPoint("render-xma-attachment-item-header-icon-with-placeholder")},m=[g],b[0]=g,b[1]=h,b[2]=m):(h=b[1],m=b[2]);j(h,m);h=a===d("xmaLayouts").XMA_LAYOUTS.UNIFIED_LAYOUT?40:32;b[3]===Symbol["for"]("react.memo_cache_sentinel")?(m="x6s0dn4 x78zum5 x5yr21d xq8finb",b[3]=m):m=b[3];b[4]!==h?(m=i.jsx("div",{className:m,children:i.jsx(c("MWV2AttachmentLoadingPlaceholder.react"),{descriptionForLogging:"MWXMAAttachmentItemHeaderIconWithPlaceholder.Suspense",height:h,width:h,xstyle:l.loadingPlaceholder})}),b[4]=h,b[5]=m):m=b[5];b[6]!==e||b[7]!==f||b[8]!==g||b[9]!==a?(h=i.jsx(c("MWXMAAttachmentItemHeaderIcon.react"),{attachment:e,getHeaderUrlXMA:f,mediaRenderQpl:g,xmaLayout:a}),b[6]=e,b[7]=f,b[8]=g,b[9]=a,b[10]=h):h=b[10];b[11]!==m||b[12]!==h?(e=i.jsx(c("CometPlaceholder.react"),{fallback:m,name:"MWXMAAttachmentItemHeaderIconWithPlaceholder",children:h}),b[11]=m,b[12]=h,b[13]=e):e=b[13];return e}g["default"]=a}),98);
__d("MWXMAAttachmentItemHeader.react",["ix","I64","LSIntEnum","LSMediaUrlAttachment","LSVerifiedType","MWSearchPluginUtils","MWXIcon.react","MWXMAAttachmentItemHeaderIconWithPlaceholder.react","MWXText.react","MWXTextPairing.react","fbicon","react","stylex","xmaLayouts"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l,m=j||(j=d("react"));b=j;var n=b.useEffect,o=b.c,p={root:{alignItems:"x6s0dn4",display:"x78zum5",marginTop:"x14vqqas",marginEnd:"xq8finb",marginBottom:"xod5an3",marginStart:"x16n37ib",$$css:!0},withBorder:{borderBottomColor:"x1nb4dca",borderBottomStyle:"x1q0q8m5",borderBottomWidth:"xso031l",marginTop:"xdj266r",marginEnd:"x11i5rnm",marginBottom:"xat24cr",marginStart:"x1mh8g0r",paddingTop:"xz9dl7a",paddingBottom:"xsag5q8",paddingStart:"x1swvt13",paddingEnd:"x1pi30zi",paddingLeft:null,paddingRight:null,$$css:!0}};function a(a){var b=o(28),e=a.attachment,f=a.getHeaderUrlXMA,g=a.mediaRenderQpl;a=a.xmaLayout;a=a===void 0?d("xmaLayouts").XMA_LAYOUTS.DEFAULT:a;var j,q;b[0]!==g||b[1]!==e.headerTitle?(j=function(){return g==null?void 0:g.addPoint("render-xma-attachment-item-header",{bool:{has_title:e.headerTitle!=null}})},q=[e.headerTitle,g],b[0]=g,b[1]=e.headerTitle,b[2]=j,b[3]=q):(j=b[2],q=b[3]);n(j,q);j=e.headerTitle;if(j==null)return null;q=e.headerSubtitleText;var r=d("LSMediaUrlAttachment").headerImageUrl(e)!=null||e.hasXmaHeaderImage===!0,s=a===d("xmaLayouts").XMA_LAYOUTS.UNIFIED_LAYOUT,t;b[4]!==e?(t=d("MWSearchPluginUtils").isSearchSingleBubblePlugin(e),b[4]=e,b[5]=t):t=b[5];t=t;var u;b[6]!==e.verifiedType?(u=e.verifiedType!=null?(k||(k=d("I64"))).equal(e.verifiedType,(l||(l=d("LSIntEnum"))).ofNumber(c("LSVerifiedType").DEFAULT)):!1,b[6]=e.verifiedType,b[7]=u):u=b[7];u=u;var v=s?p.withBorder:!1,w;b[8]!==v?(w=(i||(i=c("stylex")))(p.root,v),b[8]=v,b[9]=w):w=b[9];b[10]!==r||b[11]!==e||b[12]!==f||b[13]!==g||b[14]!==a?(v=r!=null&&m.jsx(c("MWXMAAttachmentItemHeaderIconWithPlaceholder.react"),{attachment:e,getHeaderUrlXMA:f,mediaRenderQpl:g,xmaLayout:a}),b[10]=r,b[11]=e,b[12]=f,b[13]=g,b[14]=a,b[15]=v):v=b[15];b[16]!==s||b[17]!==t||b[18]!==q||b[19]!==j?(r=(s||t)&&q!==null&&q!=null&&q!==""?m.jsx(c("MWXTextPairing.react"),{headline:j,level:4,meta:q}):m.jsx(c("MWXText.react"),{type:"bodyLink3",children:j}),b[16]=s,b[17]=t,b[18]=q,b[19]=j,b[20]=r):r=b[20];b[21]!==u?(f=u?m.jsx("div",{className:"x78zum5 xsgj6o6",children:m.jsx(c("MWXIcon.react"),{color:"highlight",icon:d("fbicon")._(h("494936"),12)})}):null,b[21]=u,b[22]=f):f=b[22];b[23]!==w||b[24]!==v||b[25]!==r||b[26]!==f?(a=m.jsxs("div",{className:w,children:[v,r,f]}),b[23]=w,b[24]=v,b[25]=r,b[26]=f,b[27]=a):a=b[27];return a}g["default"]=a}),98);
__d("MWXMAAttachmentItemDefaultXMAContent.react",["I64","LSIntEnum","LSMediaUrlAttachment","LSMediaUrlAttachmentItem","LSMessagingThreadTypeUtil","LSXmaContentType","MAWIsXMAWithPlaintextHash","MAWLocalizationType","MNLSXMALayoutType","MWRollCallXMAAttachmentItem.react","MWSearchPluginUtils","MWV2TombstonedMessage.react","MWXMAAttachmentActionTriggerDefault.react","MWXMAAttachmentItemBody.react","MWXMAAttachmentItemDefaultPreview.react","MWXMAAttachmentItemFBStoryPreview.react","MWXMAAttachmentItemHeader.react","cr:5326","getMAWLocalizedFallbackMsgSnippet","gkx","qex","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=h||(h=d("react"));e=h;var l=e.useEffect,m=e.c;function a(a){var e=m(74),f=a.attachment,g=a.attachmentItem,h=a.bodyLineLimit,n=a.cardWidth,o=a.ctaPopoverMenu,p=a.facepiles,q=a.getFaviconUrlXMA,r=a.getHeaderUrlXMA,s=a.getPreviewUrlXMA,t=a.headlineLineLimit,u=a.isHscroll,v=a.isPressable,w=a.isStandalone,x=a.mediaRenderQpl,y=a.onPollOptionFacepilePress,z=a.outgoing,A=a.threadType;a=a.xmaLayout;z=z===void 0?!1:z;var B=f.defaultCtaType,C=f.xmaContentType,D;e[0]!==A?(D=A!=null&&d("LSMessagingThreadTypeUtil").isArmadilloSecure(A),e[0]=A,e[1]=D):D=e[1];D=D;var E=C!=null&&((i||(i=d("I64"))).equal(C,(j||(j=d("LSIntEnum"))).ofNumber(c("LSXmaContentType").FB_STORY_REPLY))||(i||(i=d("I64"))).equal(C,(j||(j=d("LSIntEnum"))).ofNumber(c("LSXmaContentType").FB_STORY_SHARE))||(i||(i=d("I64"))).equal(C,(j||(j=d("LSIntEnum"))).ofNumber(c("LSXmaContentType").FB_STORY_MENTION))||(i||(i=d("I64"))).equal(C,(j||(j=d("LSIntEnum"))).ofNumber(c("LSXmaContentType").FB_PRODUCER_STORY_REPLY)));C=C!=null&&(i||(i=d("I64"))).equal(C,(j||(j=d("LSIntEnum"))).ofNumber(c("LSXmaContentType").FB_STORY_MENTION));var F=f.xmaLayoutType!==void 0&&(j||(j=d("LSIntEnum"))).toNumber(f.xmaLayoutType)===c("MNLSXMALayoutType").SHARED_STACK,G;e[2]!==f?(G=d("MWSearchPluginUtils").isSearchSingleBubblePlugin(f),e[2]=f,e[3]=G):G=e[3];G=G;var H,I;e[4]!==x||e[5]!==F||e[6]!==B?(H=function(){x==null?void 0:x.addPoint("render-xma-attachment-default-content",{bool:{is_roll_call:F},string:{default_cta_type:B}})},I=[B,F,x],e[4]=x,e[5]=F,e[6]=B,e[7]=H,e[8]=I):(H=e[7],I=e[8]);l(H,I);if(F){e[9]!==g||e[10]!==x?(H=k.jsx(c("MWRollCallXMAAttachmentItem.react"),{attachmentItem:g,mediaRenderQpl:x}),e[9]=g,e[10]=x,e[11]=H):H=e[11];return H}if(E&&c("gkx")("1327")){I=d("LSMediaUrlAttachment").previewUrl(f)!=null||d("LSMediaUrlAttachmentItem").playableUrl(g)!=null||d("LSMediaUrlAttachmentItem").previewUrl(g)!=null||d("LSMediaUrlAttachmentItem").previewUrlLarge(g)!=null||f.hasXmaPreview===!0;if(!I){e[12]===Symbol["for"]("react.memo_cache_sentinel")?(H=c("getMAWLocalizedFallbackMsgSnippet")(d("MAWLocalizationType").LOCALIZATION_TYPE.UNAVAILABLE_STORY),e[12]=H):H=e[12];e[13]!==z||e[14]!==x?(E=k.jsx(c("MWV2TombstonedMessage.react"),{isOutgoing:z,mediaRenderQpl:x,children:H}),e[13]=z,e[14]=x,e[15]=E):E=e[15];return E}}if(C&&c("qex")._("1712")){e[16]!==f||e[17]!==g||e[18]!==n||e[19]!==s||e[20]!==v||e[21]!==w||e[22]!==x||e[23]!==A||e[24]!==a?(I=k.jsx(c("MWXMAAttachmentItemFBStoryPreview.react"),{attachment:f,attachmentItem:g,cardWidth:n,getPreviewUrlXMA:s,isPressable:v,isStandalone:w,mediaRenderQpl:x,threadType:A,xmaLayout:a}),e[16]=f,e[17]=g,e[18]=n,e[19]=s,e[20]=v,e[21]=w,e[22]=x,e[23]=A,e[24]=a,e[25]=I):I=e[25];return I}if(B==="xma_montage_share"){e[26]!==f||e[27]!==g||e[28]!==n||e[29]!==s||e[30]!==v||e[31]!==w||e[32]!==x||e[33]!==A||e[34]!==a?(H=k.jsx(c("MWXMAAttachmentItemDefaultPreview.react"),{attachment:f,attachmentItem:g,cardWidth:n,getPreviewUrlXMA:s,isPressable:v,isStandalone:w,mediaRenderQpl:x,threadType:A,xmaLayout:a}),e[26]=f,e[27]=g,e[28]=n,e[29]=s,e[30]=v,e[31]=w,e[32]=x,e[33]=A,e[34]=a,e[35]=H):H=e[35];return H}e[36]!==G||e[37]!==f||e[38]!==r||e[39]!==x||e[40]!==a||e[41]!==g?(E=G?k.jsx(c("MWXMAAttachmentActionTriggerDefault.react"),{attachment:f,attachmentItem:g,children:k.jsx(c("MWXMAAttachmentItemHeader.react"),{attachment:f,getHeaderUrlXMA:r,mediaRenderQpl:x,xmaLayout:a})}):k.jsx(c("MWXMAAttachmentItemHeader.react"),{attachment:f,getHeaderUrlXMA:r,mediaRenderQpl:x,xmaLayout:a}),e[36]=G,e[37]=f,e[38]=r,e[39]=x,e[40]=a,e[41]=g,e[42]=E):E=e[42];e[43]!==D||e[44]!==f||e[45]!==g||e[46]!==n||e[47]!==s||e[48]!==v||e[49]!==w||e[50]!==x||e[51]!==a||e[52]!==A?(C=D&&f.receiverFetchId==null&&d("MAWIsXMAWithPlaintextHash").isXMAWithPlaintextHash(f)&&b("cr:5326")!=null?k.jsx(b("cr:5326"),{attachment:f,attachmentItem:g,cardWidth:n,getPreviewUrlXMA:s,isPressable:v,isStandalone:w,mediaRenderQpl:x,xmaLayout:a}):k.jsx(c("MWXMAAttachmentItemDefaultPreview.react"),{attachment:f,attachmentItem:g,cardWidth:n,getPreviewUrlXMA:s,isPressable:v,isStandalone:w,mediaRenderQpl:x,threadType:A,xmaLayout:a}),e[43]=D,e[44]=f,e[45]=g,e[46]=n,e[47]=s,e[48]=v,e[49]=w,e[50]=x,e[51]=a,e[52]=A,e[53]=C):C=e[53];e[54]!==f||e[55]!==g||e[56]!==h||e[57]!==o||e[58]!==p||e[59]!==q||e[60]!==t||e[61]!==u||e[62]!==v||e[63]!==G||e[64]!==w||e[65]!==x||e[66]!==y||e[67]!==z||e[68]!==a?(I=k.jsx(c("MWXMAAttachmentItemBody.react"),{attachment:f,attachmentItem:g,bodyLineLimit:h,ctaPopoverMenu:o,facepiles:p,getFaviconUrlXMA:q,headlineLineLimit:t,isHscroll:u,isPressable:v,isSearchSingleBubblePlugin:G,isStandalone:w,mediaRenderQpl:x,onPollOptionFacepilePress:y,outgoing:z,xmaLayout:a}),e[54]=f,e[55]=g,e[56]=h,e[57]=o,e[58]=p,e[59]=q,e[60]=t,e[61]=u,e[62]=v,e[63]=G,e[64]=w,e[65]=x,e[66]=y,e[67]=z,e[68]=a,e[69]=I):I=e[69];e[70]!==E||e[71]!==C||e[72]!==I?(H=k.jsxs(k.Fragment,{children:[E,C,I]}),e[70]=E,e[71]=C,e[72]=I,e[73]=H):H=e[73];return H}g["default"]=a}),98);
__d("MWXMAPrivateAttachment.react",["fbt","ix","IconSource","LSMessagingThreadTypeUtil","MAWConvertExtendedContentOverlayIconGlyphToInformTreatmentRenderingType","MWInformedTreatment.react","MWLSThread","MWXIcon.react","MWXMAAttachmentActionTrigger.react","MWXText.react","emptyFunction","react"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j,k=j||(j=d("react"));b=j;var l=b.useEffect,m=b.c,n={sensitiveContent:{alignItems:"x6s0dn4",backdropFilter:"x1qb2erx",backgroundColor:"x1av1boa",display:"x78zum5",flexDirection:"xdt5ytf",height:"x5yr21d",justifyContent:"xl56j7k",textAlign:"x2b8uid",width:"xni59qk",$$css:!0}};function a(a){var b=m(34),e=a.attachment,f=a.attachmentItem,g=a.getPreviewUrlXMA,h=a.isPressable,i=a.mediaRenderQpl;a=g===void 0?c("emptyFunction"):g;var j=e.defaultCtaType,r=a(e,f,"MWXMAPrivateAttachment",i);a=(g=d("MWLSThread").useThread(e.threadKey,o))!=null?g:{isSecureThread:!1,threadType:null};var s=a.isSecureThread;g=a.threadType;a=e.gatingTitle;var t=e.gatingType,u=d("MWInformedTreatment.react").checkIsInformedTreatmentVisible(a,t,r,g),v;b[0]!==i||b[1]!==r||b[2]!==u||b[3]!==s||b[4]!==j?(g=function(){return i==null?void 0:i.addPoint("render-xma-private-attachment",{bool:{has_preview_url:r!=null,is_inform_treatment_visible:u,is_secure_thread:s},string:{default_cta_type:j}})},v=[j,u,s,i,r],b[0]=i,b[1]=r,b[2]=u,b[3]=s,b[4]=j,b[5]=g,b[6]=v):(g=b[5],v=b[6]);l(g,v);if(a!=null&&t!=null&&u){b[7]!==s||b[8]!==t?(g=s?d("MAWConvertExtendedContentOverlayIconGlyphToInformTreatmentRenderingType").convertExtendedContentOverlayIconGlyphToInformTreatmentRenderingType(parseInt(t,10)):t,b[7]=s,b[8]=t,b[9]=g):g=b[9];v=g;b[10]===Symbol["for"]("react.memo_cache_sentinel")?(t="x1iu8u7t xh8yej3",b[10]=t):t=b[10];b[11]===Symbol["for"]("react.memo_cache_sentinel")?(g={height:"100%",width:"100%"},b[11]=g):g=b[11];b[12]!==a||b[13]!==v||b[14]!==i||b[15]!==e.messageId||b[16]!==r?(t=k.jsx("div",{className:t,children:k.jsx(d("MWInformedTreatment.react").MWInformedTreatment,{dimension:g,gatingTitle:a,gatingType:v,isXMA:!0,mediaRenderQpl:i,messageId:e.messageId,previewUrl:r,xstyle:n.sensitiveContent})}),b[12]=a,b[13]=v,b[14]=i,b[15]=e.messageId,b[16]=r,b[17]=t):t=b[17];b[18]!==e||b[19]!==f||b[20]!==h||b[21]!==i?(g=k.jsx(q,{attachment:e,attachmentItem:f,isPressable:h,mediaRenderQpl:i,showPreview:!1}),b[18]=e,b[19]=f,b[20]=h,b[21]=i,b[22]=g):g=b[22];b[23]!==t||b[24]!==g?(a=k.jsxs(k.Fragment,{children:[t,g]}),b[23]=t,b[24]=g,b[25]=a):a=b[25];return a}if(j==="xma_montage_share"){b[26]!==e||b[27]!==i?(v=k.jsx(p,{attachment:e,mediaRenderQpl:i}),b[26]=e,b[27]=i,b[28]=v):v=b[28];return v}b[29]!==e||b[30]!==f||b[31]!==h||b[32]!==i?(t=k.jsx(q,{attachment:e,attachmentItem:f,isPressable:h,mediaRenderQpl:i,showPreview:!0}),b[29]=e,b[30]=f,b[31]=h,b[32]=i,b[33]=t):t=b[33];return t}function o(a){return{isSecureThread:d("LSMessagingThreadTypeUtil").isArmadilloSecure(a.threadType),threadType:a.threadType}}function p(a){var b=m(7),d=a.attachment,e=a.mediaRenderQpl,f;b[0]!==e?(a=function(){e==null?void 0:e.addPoint("render-xma-private-attachment-preview"),e==null?void 0:e.endSuccess({bool:{is_private_xma_preview:!0}})},f=[e],b[0]=e,b[1]=a,b[2]=f):(a=b[1],f=b[2]);l(a,f);b[3]===Symbol["for"]("react.memo_cache_sentinel")?(a=new(c("IconSource"))("FB",i("1423125"),32),b[3]=a):a=b[3];f=a;a=d.defaultCtaType;if(a==="xma_montage_share"){b[4]===Symbol["for"]("react.memo_cache_sentinel")?(d=k.jsx("div",{className:"x6s0dn4 x1qb2erx xjw5052 x78zum5 xdt5ytf x1dr9wh xl56j7k x2b8uid xni59qk",children:k.jsx("div",{className:"x14vqqas xq8finb xod5an3 x16n37ib",children:k.jsx(c("MWXIcon.react"),{icon:f})})}),b[4]=d):d=b[4];return d}b[5]===Symbol["for"]("react.memo_cache_sentinel")?(a=h._("__JHASH__EXLuTpYr-at__JHASH__"),b[5]=a):a=b[5];d=a;b[6]===Symbol["for"]("react.memo_cache_sentinel")?(a=k.jsxs("div",{className:"x6s0dn4 xzudefj x78zum5 xdt5ytf xl56j7k x2b8uid x1iu8u7t xh8yej3",children:[k.jsx("div",{className:"x14vqqas xq8finb xod5an3 x16n37ib",children:k.jsx(c("MWXIcon.react"),{icon:f})}),k.jsx(c("MWXText.react"),{color:"white",type:"bodyLink4",children:d})]}),b[6]=a):a=b[6];return a}function q(a){var b=m(17),d=a.attachment,e=a.attachmentItem,f=a.isPressable,g=a.mediaRenderQpl;a=a.showPreview;var i,j;b[0]!==g?(i=function(){g==null?void 0:g.addPoint("render-xma-private-attachment-private-body")},j=[g],b[0]=g,b[1]=i,b[2]=j):(i=b[1],j=b[2]);l(i,j);b[3]!==a||b[4]!==d||b[5]!==g?(i=a===!0&&k.jsx(p,{attachment:d,mediaRenderQpl:g}),b[3]=a,b[4]=d,b[5]=g,b[6]=i):i=b[6];b[7]!==i?(j=k.jsx(k.Fragment,{children:i}),b[7]=i,b[8]=j):j=b[8];b[9]===Symbol["for"]("react.memo_cache_sentinel")?(a="x78zum5 x1q0g3np x1iyjqo2 xw3qccf",i="x78zum5 xdt5ytf x1iyjqo2 xl56j7k x14vqqas xq8finb xod5an3 x16n37ib x193iq5w xisnujt x1jzhcrs xh8yej3",b[9]=a,b[10]=i):(a=b[9],i=b[10]);b[11]===Symbol["for"]("react.memo_cache_sentinel")?(a=k.jsx("div",{className:a,children:k.jsx("div",{className:i,children:k.jsx(c("MWXText.react"),{type:"meta4",children:h._("__JHASH__N1DOsSnTIti__JHASH__")})})}),b[11]=a):a=b[11];b[12]!==d||b[13]!==e||b[14]!==f||b[15]!==j?(i=k.jsxs(c("MWXMAAttachmentActionTrigger.react"),{attachment:d,attachmentItem:e,isPressable:f,children:[j,a]}),b[12]=d,b[13]=e,b[14]=f,b[15]=j,b[16]=i):i=b[16];return i}g["default"]=a}),226);
__d("MWXMAAttachmentItem.react",["I64","LSIntEnum","LSMediaUrlAttachment","LSMediaUrlAttachmentItem","MNLSXMALayoutType","MWCMThreadTypes.react","MWLSThreadDisplayContext","MWPBaseXMAAttachmentItem.react","MWPThreadCapabilitiesContext","MWXMAAttachmentActionTrigger.react","MWXMAAttachmentItemDefaultXMAContent.react","MWXMAPrivateAttachment.react","ReQL","ReQLSuspense","WAArmadilloXMA.pb","react","stylex","useReStore","xmaLayouts"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l,m=l||(l=d("react"));b=l;b.useCallback;var n=b.useEffect,o=b.c,p={root:{display:"x78zum5",flexDirection:"xdt5ytf",height:"x5yr21d",$$css:!0},withBorder:{borderTopColor:"x1exxf4d",borderEndColor:"x1y71gwh",borderBottomColor:"x1nb4dca",borderStartColor:"xu1343h",borderTopStyle:"x13fuv20",borderEndStyle:"xu3j5b3",borderBottomStyle:"x1q0q8m5",borderStartStyle:"x26u7qi",borderTopWidth:"x178xt8z",borderEndWidth:"xm81vs4",borderBottomWidth:"xso031l",borderStartWidth:"xy80clv",$$css:!0}},q=new Set(["xma_rtc_video","xma_rtc_missed_video","xma_rtc_missed_group_video","xma_rtc_ended_video","xma_rtc_new_video_default","xma_rtc_new_video_from_fb_share","xma_rtc_new_video_from_fb_video_share","xma_rtc_new_video_from_cowatch_share","xma_rtc_cowatch_start_video"]),r=new Set(["xma_rtc_audio","xma_rtc_missed_audio","xma_rtc_missed_group_audio","xma_rtc_ended_audio","xma_rtc_new_audio_default","xma_rtc_new_audio_from_fb_share","xma_rtc_new_audio_from_fb_video_share","xma_rtc_new_audio_from_cowatch_share"]);function a(a){var b=o(56),e=a.attachment,g=a.attachmentItem,l=a.bodyLineLimit,t=a.cardWidth,u=a.ctaPopoverMenu,v=a.facepiles,w=a.getFaviconUrlXMA,x=a.getHeaderUrlXMA,y=a.getPreviewUrlXMA,z=a.headlineLineLimit,A=a.isHscroll,B=a.isStandalone,C=a.mediaRenderQpl,D=a.onPollOptionFacepilePress,E=a.outgoing;a=a.xmaLayout;l=l===void 0?3:l;t=t===void 0?300:t;x=x===void 0?d("LSMediaUrlAttachment").headerImageUrl:x;z=z===void 0?3:z;E=E===void 0?!1:E;a=a===void 0?d("xmaLayouts").XMA_LAYOUTS.DEFAULT:a;var F=d("MWPThreadCapabilitiesContext").useMWPThreadCapabilitiesContext(),G=F.rtcVideoCallEnabled;F=F.rtcVoiceCallEnabled;var H=d("MWLSThreadDisplayContext").useMWLSThreadDisplayContext()==="Inbox",I;b[0]!==H?(I=function(a,b,c,e){a=d("MWPBaseXMAAttachmentItem.react").getXMAAttachmentItemPreview({attachment:a,attachmentItem:b,description:"MWXMAAttachmentItem.getDefaultUrl - "+c,mediaRenderQpl:e,preferLargePreview:H});switch(a.type){case"Video":case"Image":return a.url;case"Unsupported":return}},b[0]=H,b[1]=I):I=b[1];I=I;var J=(h||(h=c("useReStore")))(),K;b[2]!==J.tables.threads||b[3]!==e.threadKey?(K=function(){return d("ReQL").fromTableAscending(J.tables.threads,["threadType"]).getKeyRange(e.threadKey)},b[2]=J.tables.threads,b[3]=e.threadKey,b[4]=K):K=b[4];var L;b[5]!==J||b[6]!==e.threadKey?(L=[J,e.threadKey],b[5]=J,b[6]=e.threadKey,b[7]=L):L=b[7];K=d("ReQLSuspense").useFirst(K,L,f.id+":129");L=e.defaultCtaType;var M;b[8]!==L||b[9]!==F||b[10]!==G?(M=L!=null?r.has(L)&&!F||q.has(L)&&!G:!1,b[8]=L,b[9]=F,b[10]=G,b[11]=M):M=b[11];var N=M;F=(L=e.shouldAutoplayVideo)!=null?L:!1;G=F&&e.attributionAppIcon!=null&&e.attributionAppName!=null;M=G?p.withBorder:!1;b[12]!==M?(L=(k||(k=c("stylex")))(p.root,M),b[12]=M,b[13]=L):L=b[13];F=L;G=g.attachmentCta1Id!=null;var O=e.gatingType===d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_OVERLAY_ICON_GLYPH.PRIVATE.toString();b[14]!==K?(M=K?d("MWCMThreadTypes.react").isUnjoinedCMThread(K.threadType):!1,b[14]=K,b[15]=M):M=b[15];var P=M;if(b[16]!==e.xmaLayoutType){M=(i||(i=d("I64"))).equal((L=e.xmaLayoutType)!=null?L:(i||(i=d("I64"))).zero,(j||(j=d("LSIntEnum"))).ofNumber(c("MNLSXMALayoutType").THREAD_SHORTCUT));b[16]=e.xmaLayoutType;b[17]=M}else M=b[17];var Q=M,R=e.cta1Type==="xma_join_community"||e.cta1Type==="xma_join_community_chat";L=P&&Q||N||R;var S;b[18]!==C||b[19]!==R||b[20]!==O||b[21]!==N||b[22]!==Q||b[23]!==P?(M=function(){return C==null?void 0:C.addPoint("render-xma-attachment-item",{bool:{is_join_xma:R,is_private_xma:O,is_rtc_xma_disabled:N,is_subthread_xma:Q,is_unjoined_cm_thread:P}})},S=[C,N,O,P,Q,R],b[18]=C,b[19]=R,b[20]=O,b[21]=N,b[22]=Q,b[23]=P,b[24]=M,b[25]=S):(M=b[24],S=b[25]);n(M,S);M=!G&&!L;if(b[26]!==O||b[27]!==y||b[28]!==I||b[29]!==G||b[30]!==L||b[31]!==e||b[32]!==g||b[33]!==C||b[34]!==w||b[35]!==(K==null?void 0:K.threadType)||b[36]!==l||b[37]!==t||b[38]!==u||b[39]!==v||b[40]!==x||b[41]!==z||b[42]!==A||b[43]!==B||b[44]!==D||b[45]!==E||b[46]!==a){S=O?m.jsx(c("MWXMAPrivateAttachment.react"),{attachment:e,attachmentItem:g,getPreviewUrlXMA:(S=y)!=null?S:I,isPressable:G&&!L,mediaRenderQpl:C}):m.jsx(c("MWXMAAttachmentItemDefaultXMAContent.react"),{attachment:e,attachmentItem:g,bodyLineLimit:l,cardWidth:t,ctaPopoverMenu:u,facepiles:v,getFaviconUrlXMA:(S=w)!=null?S:s,getHeaderUrlXMA:x,getPreviewUrlXMA:(S=y)!=null?S:I,headlineLineLimit:z,isHscroll:A,isPressable:G&&!L,isStandalone:B,mediaRenderQpl:C,onPollOptionFacepilePress:D,outgoing:E,threadType:K==null?void 0:K.threadType,xmaLayout:a});b[26]=O;b[27]=y;b[28]=I;b[29]=G;b[30]=L;b[31]=e;b[32]=g;b[33]=C;b[34]=w;b[35]=K==null?void 0:K.threadType;b[36]=l;b[37]=t;b[38]=u;b[39]=v;b[40]=x;b[41]=z;b[42]=A;b[43]=B;b[44]=D;b[45]=E;b[46]=a;b[47]=S}else S=b[47];b[48]!==F||b[49]!==S?(y=m.jsx("div",{className:F,"data-testid":void 0,children:S}),b[48]=F,b[49]=S,b[50]=y):y=b[50];b[51]!==e||b[52]!==g||b[53]!==M||b[54]!==y?(I=m.jsx(c("MWXMAAttachmentActionTrigger.react"),{attachment:e,attachmentItem:g,isPressable:M,children:y}),b[51]=e,b[52]=g,b[53]=M,b[54]=y,b[55]=I):I=b[55];return I}function s(a,b){return(a=(a=d("LSMediaUrlAttachment").faviconUrl(a))!=null?a:d("LSMediaUrlAttachmentItem").faviconUrl(b))!=null?a:""}g["default"]=a}),98);
__d("MWXMAAttachmentHorizontalItems.react",["fbt","FDSHScroll.react","I64","MWXMAAttachmentItem.react","MWXMessageBubbleCornerStyles.react","react","stylex"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l=(k||(k=d("react"))).c,m=k,n=284,o={centerElement:{borderTopStartRadius:"x1lcm9me",borderTopEndRadius:"x1yr5g0i",borderBottomEndRadius:"xrt01vj",borderBottomStartRadius:"x10y3i5r",$$css:!0},firstElement:{borderBottomEndRadius:"xrt01vj",borderTopEndRadius:"x1yr5g0i",borderTopStartRadius:"x1lcm9me",$$css:!0},flexibleContainer:{"@media (max-width: 1439px)_maxWidth":"x1bu0bv6","@media (min-width: 1440px)_maxWidth":"x6vbh5p",$$css:!0},lastElement:{borderBottomStartRadius:"x10y3i5r",borderTopStartRadius:"x1lcm9me",$$css:!0},spacer:{marginTop:"xifccgj",$$css:!0}};function a(a){var b=l(33),e,f,g,k,p,q;b[0]!==a?(k=a.attachmentItems,e=a.fullWidthContainer,f=a.hasText,p=a.xstyle,g=a.cardWidth,q=babelHelpers.objectWithoutPropertiesLoose(a,["attachmentItems","fullWidthContainer","hasText","xstyle","cardWidth"]),b[0]=a,b[1]=e,b[2]=f,b[3]=g,b[4]=k,b[5]=p,b[6]=q):(e=b[1],f=b[2],g=b[3],k=b[4],p=b[5],q=b[6]);a=e===void 0?!1:e;var r=f===void 0?!1:f,s,t,u,v;if(b[7]!==a||b[8]!==g||b[9]!==k||b[10]!==p||b[11]!==r||b[12]!==q){var w=d("MWXMessageBubbleCornerStyles.react").getMWXBubbleCornerStyles();e=!a&&o.flexibleContainer;b[19]!==e?(f=(i||(i=c("stylex")))(e),b[19]=e,b[20]=f):f=b[20];e=d("FDSHScroll.react").Container;b[21]===Symbol["for"]("react.memo_cache_sentinel")?(s=h._("__JHASH__grvWiY5ySlo__JHASH__"),b[21]=s):s=b[21];b[22]!==g?(t=g!=null?{type:"fixed",width:g}:{minWidth:n,type:"responsive"},b[22]=g,b[23]=t):t=b[23];u=8;v=k.map(function(a,b){var e=b===0;b=b===k.length-1;var f=!e&&!b;return m.jsx(d("FDSHScroll.react").Child,{expanding:!0,children:m.jsx("div",{className:"xjbqb8w x5yr21d xh8yej3",children:m.jsx("div",{className:(i||(i=c("stylex")))(w,p,e&&r&&o.firstElement,b&&r&&o.lastElement,f&&r&&o.centerElement,r&&o.spacer),children:m.jsx(c("MWXMAAttachmentItem.react"),babelHelpers["extends"]({},q,{attachmentItem:a,cardWidth:g,isStandalone:!1}))})})},(j||(j=d("I64"))).to_string(a.attachmentIndex))});b[7]=a;b[8]=g;b[9]=k;b[10]=p;b[11]=r;b[12]=q;b[13]=e;b[14]=s;b[15]=t;b[16]=u;b[17]=v;b[18]=f}else e=b[13],s=b[14],t=b[15],u=b[16],v=b[17],f=b[18];b[24]!==e||b[25]!==s||b[26]!==t||b[27]!==u||b[28]!==v?(a=m.jsx(e,{accessibilityLabel:s,cardWidth:t,gap:u,children:v}),b[24]=e,b[25]=s,b[26]=t,b[27]=u,b[28]=v,b[29]=a):a=b[29];b[30]!==f||b[31]!==a?(e=m.jsx("div",{className:f,children:a}),b[30]=f,b[31]=a,b[32]=e):e=b[32];return e}g["default"]=a}),226);
__d("MWPResponsiveImageGrid.react",["BaseImage.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||(h=d("react"))).c,j=h,k={gridImage:{bottom:"x1ey2m1c",height:"x5yr21d",end:"xds687c",start:"x17qophe",left:null,right:null,objectFit:"xl1xv1r",objectPosition:"x115dhu7",position:"x10l6tqk",top:"x13vifvy",width:"xh8yej3",$$css:!0}};function a(a){var b=i(5);a=a.urls;var c;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(c="x78zum5 x1a02dak x8182xy x1kgmq87",b[0]=c):c=b[0];var d;b[1]!==a?(d=a.map(l),b[1]=a,b[2]=d):d=b[2];b[3]!==d?(a=j.jsx("ul",{className:c,children:d}),b[3]=d,b[4]=a):a=b[4];return a}function l(a){return j.jsx("li",{className:"x1yu6fn4",children:j.jsx("div",{className:"xqtp20y x12mruv9 xr9ek0c x1vrad04 x1n2onr6",children:j.jsx(c("BaseImage.react"),{src:a,xstyle:k.gridImage})})},a)}l.displayName=l.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWPXMAIgProfile.react",["MWPResponsiveImageGrid.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;b.useMemo;var j=b.c,k=function(a){a=a.previewUrl;return a};function a(a){var b=j(5);a=a.attachmentItems;var d;b[0]!==a?(d=a.map(k).filter(Boolean),b[0]=a,b[1]=d):d=b[1];a=d;d=a;b[2]===Symbol["for"]("react.memo_cache_sentinel")?(a="x193iq5w xgqtt45 xdzyupr",b[2]=a):a=b[2];b[3]!==d?(a=i.jsx("div",{className:a,children:i.jsx(c("MWPResponsiveImageGrid.react"),{urls:d})}),b[3]=d,b[4]=a):a=b[4];return a}g["default"]=a}),98);
__d("MWXMAAttachmentItemIgProfile.react",["LSMediaUrlAttachment","MWPXMAIgProfile.react","MWXMAAttachmentActionTrigger.react","MWXMAAttachmentItemHeader.react","react","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||(i=d("react"));b=i;var k=b.useEffect,l=b.c;function a(a){var b=l(19),e=a.attachment,f=a.attachmentItems,g=a.getHeaderUrlXMA,i=a.mediaRenderQpl;a=a.xstyle;g=g===void 0?d("LSMediaUrlAttachment").headerImageUrl:g;var m,n;b[0]!==i?(m=function(){i==null?void 0:i.endSuccess()},n=[i],b[0]=i,b[1]=m,b[2]=n):(m=b[1],n=b[2]);k(m,n);m=f[0];b[3]!==a?(n=(h||(h=c("stylex")))(a),b[3]=a,b[4]=n):n=b[4];b[5]!==e||b[6]!==g||b[7]!==i?(a=j.jsx(c("MWXMAAttachmentItemHeader.react"),{attachment:e,getHeaderUrlXMA:g,mediaRenderQpl:i}),b[5]=e,b[6]=g,b[7]=i,b[8]=a):a=b[8];b[9]!==f?(g=j.jsx(c("MWPXMAIgProfile.react"),{attachmentItems:f}),b[9]=f,b[10]=g):g=b[10];b[11]!==n||b[12]!==a||b[13]!==g?(f=j.jsxs("div",{className:n,"data-testid":void 0,children:[a,g]}),b[11]=n,b[12]=a,b[13]=g,b[14]=f):f=b[14];b[15]!==e||b[16]!==m||b[17]!==f?(n=j.jsx(c("MWXMAAttachmentActionTrigger.react"),{attachment:e,attachmentItem:m,isPressable:!0,children:f}),b[15]=e,b[16]=m,b[17]=f,b[18]=n):n=b[18];return n}g["default"]=a}),98);
__d("MWRollCallTimerPill.react",["fbt","I64","MWXText.react","react","useInterval"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=i||(i=d("react"));b=i;b.useMemo;var l=b.useState,m=b.c;function n(a){var b=1e3,c=b*60,d=c*60,e=d*24;a=a;var f=Math.floor(a/e);a-=f*e;e=Math.floor(a/d);a-=e*d;d=Math.floor(a/c);a-=d*c;c=Math.floor(a/b);a-=c*b;return{days:f,hours:e,minutes:d,seconds:c}}function a(a){var b,e=m(16);a=a.attachment;b=(j||(j=d("I64"))).to_float((b=a.countdownTimestampMs)!=null?b:(j||(j=d("I64"))).zero);b=b;var f;e[0]===Symbol["for"]("react.memo_cache_sentinel")?(f=Date.now(),e[0]=f):f=e[0];f=l(f);var g=f[0],i=f[1];f=g>b;var o;e[1]===Symbol["for"]("react.memo_cache_sentinel")?(o=function(){i(Date.now())},e[1]=o):o=e[1];var p;e[2]===Symbol["for"]("react.memo_cache_sentinel")?(p=[i],e[2]=p):p=e[2];c("useInterval")(o,f?6e4:1e3,p);if(!f){o=n(b-g);p=o.minutes;f=o.seconds;o=("0"+p).slice(-2)+":"+("0"+f).slice(-2)}else if(a.cta1Type==="xma_roll_call_open_viewer"){e[3]===Symbol["for"]("react.memo_cache_sentinel")?(p=h._("__JHASH__iEcmesFoHMR__JHASH__"),e[3]=p):p=e[3];o=p}else{f=g-b;e[4]!==f?(a=n(f),e[4]=f,e[5]=a):a=e[5];p=a;g=p.days;b=p.hours;f=p.minutes;if(g>30){e[6]===Symbol["for"]("react.memo_cache_sentinel")?(a=h._("__JHASH__FgpGUEY9N0G__JHASH__"),e[6]=a):a=e[6];o=a}else if(g>0){e[7]!==g?(p=h._("__JHASH__UZjF4IaHC-f__JHASH__",[h._param("days",g)]),e[7]=g,e[8]=p):p=e[8];o=p}else if(b>0){e[9]!==b?(a=h._("__JHASH__4LZO7x78s0P__JHASH__",[h._param("hours",b)]),e[9]=b,e[10]=a):a=e[10];o=a}else{e[11]!==f?(g=h._("__JHASH__JXYYWJwIx9x__JHASH__",[h._param("minutes",Math.max(1,f))]),e[11]=f,e[12]=g):g=e[12];o=g}}e[13]===Symbol["for"]("react.memo_cache_sentinel")?(p="x1h0vfkc x1a2cdl4 xnhgr82 x1qt0ttw xgk8upj x9f619 x78zum5 xdt5ytf x1qx5ct2 xl56j7k xkrivgy x1gryazu x1sxyh0 xurb0ha xeq5yr9",e[13]=p):p=e[13];e[14]!==o?(b=k.jsx("div",{className:p,children:k.jsx(c("MWXText.react"),{numberOfLines:1,type:"meta4",children:o})}),e[14]=o,e[15]=b):b=e[15];return b}g["default"]=a}),226);
__d("MWXMAAttachmentSharedStackFrontCard.react",["CometContainerPressable.react","I64","LSAuthorityLevel","LSIntEnum","LSMessagingThreadTypeUtil","MWChannelPromptTimerPill.react","MWChatPollFacepile.react","MWLSThread","MWRollCallTimerPill.react","MWXMAAttachmentItemCtaButton.react","MWXSpinner.react","MWXText.react","MessengerWebUXLoggerXMAEventLoggingImpl","ReQL","ReQLSuspense","getLSMediaAttachmentAvatarViewUrlList","react","stylex","useCurrentDisplayMode","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l,m=l||(l=d("react"));b=l;var n=b.useEffect,o=b.c,p={containerPressable:{height:"x5yr21d",$$css:!0},frontCard:{backgroundColor:"x9bbmet",borderTopStartRadius:"xfh8nwu",borderTopEndRadius:"xoqspk4",borderBottomEndRadius:"x12v9rci",borderBottomStartRadius:"x138vmkv",boxShadow:"x28gwc1",boxSizing:"x9f619",display:"x78zum5",flexDirection:"xdt5ytf",height:"x5yr21d",overflowX:"xw2csxc",overflowY:"x1odjw0f",paddingTop:"xz9dl7a",paddingEnd:"xn6708d",paddingBottom:"xsag5q8",paddingStart:"x1ye3gou",width:"xh8yej3",$$css:!0},frontCardDarkMode:{boxShadow:"xdxoyvu",$$css:!0}};function a(a){var b=o(48),e=a.attachment,g=a.mediaRenderQpl;a=a.xstyle;var l=c("getLSMediaAttachmentAvatarViewUrlList")(e),s=(h||(h=c("useReStore")))(),t;b[0]!==s.tables.messages||b[1]!==e.messageId?(t=function(){return d("ReQL").fromTableAscending(s.tables.messages.index("messageId")).getKeyRange(e.messageId)},b[0]=s.tables.messages,b[1]=e.messageId,b[2]=t):t=b[2];var u;b[3]!==s||b[4]!==e.messageId?(u=[s,e.messageId],b[3]=s,b[4]=e.messageId,b[5]=u):u=b[5];t=d("ReQLSuspense").useFirst(t,u,f.id+":80");u=d("MWLSThread").useThread(e.threadKey,r);var v;b[6]!==e||b[7]!==t||b[8]!==u?(v={attachment:e,clickCategory:1,message:t,threadType:u},b[6]=e,b[7]=t,b[8]=u,b[9]=v):v=b[9];t=d("MessengerWebUXLoggerXMAEventLoggingImpl").useXMAEventsImpressionLoggerRef(v);v=(j||(j=d("LSIntEnum"))).toNumber(e.authorityLevel)===c("LSAuthorityLevel").OPTIMISTIC;var w=c("useCurrentDisplayMode")()==="dark",x;b[10]!==u?(x=u===void 0?!1:d("LSMessagingThreadTypeUtil").isDiscoverablePublicBroadcastChannel(u),b[10]=u,b[11]=x):x=b[11];u=x;x=e.countdownTimestampMs;var y;b[12]!==x||b[13]!==u||b[14]!==e?(y=x!=null&&!(k||(k=d("I64"))).equal(x,(k||(k=d("I64"))).zero)?u?m.jsx(c("MWChannelPromptTimerPill.react"),{countdownTimestampMs:x}):m.jsx(c("MWRollCallTimerPill.react"),{attachment:e}):null,b[12]=x,b[13]=u,b[14]=e,b[15]=y):y=b[15];x=y;var z;b[16]!==g?(y=function(){g==null?void 0:g.endSuccess()},z=[g],b[16]=g,b[17]=y,b[18]=z):(y=b[17],z=b[18]);n(y,z);y=w&&p.frontCardDarkMode;b[19]!==y||b[20]!==a?(z=(i||(i=c("stylex")))(p.frontCard,y,a),b[19]=y,b[20]=a,b[21]=z):z=b[21];b[22]===Symbol["for"]("react.memo_cache_sentinel")?(w="x78zum5 xdt5ytf x1iyjqo2 x1xmf6yo",b[22]=w):w=b[22];b[23]!==e.titleText?(y=m.jsx("div",{className:w,children:m.jsx(c("MWXText.react"),{align:"center",numberOfLines:3,type:"headlineEmphasized4",children:e.titleText})}),b[23]=e.titleText,b[24]=y):y=b[24];b[25]===Symbol["for"]("react.memo_cache_sentinel")?(a="xr1yuqi xkrivgy x4ii5y1 x1gryazu",b[25]=a):a=b[25];w=v?m.jsx(c("MWXSpinner.react"),{color:"disabled",size:24}):m.jsx(c("MWChatPollFacepile.react"),{contacts:l.map(q),countOverride:u&&e.avatarCount!=null?(k||(k=d("I64"))).to_float(e.avatarCount):void 0,direction:"reversed",gap:"negative",isPrompt:u,limit:u?3:void 0,size:u?"mediumLarge":"large"});b[26]!==a||b[27]!==w?(v=m.jsx("div",{className:a,children:w}),b[26]=a,b[27]=w,b[28]=v):v=b[28];b[29]===Symbol["for"]("react.memo_cache_sentinel")?(l="x1xmf6yo",b[29]=l):l=b[29];b[30]!==e.attachmentCta1Id||b[31]!==e.cta1Title||b[32]!==e.cta1Type||b[33]!==e.messageId||b[34]!==e.threadKey?(a=e.attachmentCta1Id!=null&&e.cta1Title!=null&&e.cta1Type!=null?m.jsx(c("MWXMAAttachmentItemCtaButton.react"),{ctaId:e.attachmentCta1Id,messageId:e.messageId,threadKey:e.threadKey,title:e.cta1Title,type:e.cta1Type}):null,b[30]=e.attachmentCta1Id,b[31]=e.cta1Title,b[32]=e.cta1Type,b[33]=e.messageId,b[34]=e.threadKey,b[35]=a):a=b[35];b[36]!==a?(w=m.jsx("div",{className:l,children:a}),b[36]=a,b[37]=w):w=b[37];b[38]!==z||b[39]!==t||b[40]!==x||b[41]!==y||b[42]!==v||b[43]!==w?(l=m.jsxs("div",{className:z,ref:t,children:[x,y,v,w]}),b[38]=z,b[39]=t,b[40]=x,b[41]=y,b[42]=v,b[43]=w,b[44]=l):l=b[44];a=l;b[45]!==u||b[46]!==a?(z=u?m.jsx(c("CometContainerPressable.react"),{xstyle:p.containerPressable,children:a}):a,b[45]=u,b[46]=a,b[47]=z):z=b[47];return z}function q(a){return{name:void 0,profile_picture_url:a}}function r(a){return a.threadType}g["default"]=a}),98);
__d("MWXMAAttachmentSharedStackItem.react",["Locale","MWXMAAttachmentItem.react","MWXMAAttachmentSharedStackConstants","react","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=(i||(i=d("react"))).c,k=i,l={stackItem:{borderTopStartRadius:"x107yiy2",borderTopEndRadius:"xv8uw2v",borderBottomEndRadius:"x1tfwpuw",borderBottomStartRadius:"x2g32xy",bottom:"x1ey2m1c",boxShadow:"x28gwc1",start:"x17qophe",overflowX:"x6ikm8r",overflowY:"x10wlt62",position:"x10l6tqk",$$css:!0}};function a(a){var b=j(13),e=a.attachment,f=a.attachmentItem,g=a.index,i=a.mediaRenderQpl,m=a.totalItems;a=a.xstyle;var n=g%2===0?-4:4,o=0,p=0;bb0:switch(g){case 0:o=0;p=-12;break bb0;case 1:o=58;p=-20;break bb0;case 2:o=34,p=-28}d("Locale").isRTL()&&(o=o*-1,n=n*-1);if((e.defaultCtaType==="xma_prompt_open_viewer_for_text"||e.defaultCtaType==="xma_roll_call_open_viewer")&&f.previewUrl===void 0&&f.titleText===void 0)return null;var q;b[0]!==a?(q=(h||(h=c("stylex")))(l.stackItem,a),b[0]=a,b[1]=q):q=b[1];a="rotate("+n+"deg) translateX("+o+"px) translateY("+p+"px)";n=m-g;b[2]!==a||b[3]!==n?(o={height:d("MWXMAAttachmentSharedStackConstants").STACK_ITEM_HEIGHT,transform:a,width:d("MWXMAAttachmentSharedStackConstants").STACK_ITEM_WIDTH,zIndex:n},b[2]=a,b[3]=n,b[4]=o):o=b[4];b[5]!==e||b[6]!==f||b[7]!==i?(p=k.jsx(c("MWXMAAttachmentItem.react"),{attachment:e,attachmentItem:f,cardWidth:d("MWXMAAttachmentSharedStackConstants").STACK_ITEM_WIDTH,isHscroll:!1,isStandalone:!1,mediaRenderQpl:i}),b[5]=e,b[6]=f,b[7]=i,b[8]=p):p=b[8];b[9]!==q||b[10]!==o||b[11]!==p?(m=k.jsx("div",{className:q,style:o,children:p}),b[9]=q,b[10]=o,b[11]=p,b[12]=m):m=b[12];return m}g["default"]=a}),98);
__d("MWXMAAttachmentSharedStackLayout.react",["LSMessagingThreadTypeUtil","MWLSThread","MWXMAAttachmentSharedStackConstants","MWXMAAttachmentSharedStackItem.react","react","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||(i=d("react")),k=i.useMemo,l={centered:{marginTop:"xr1yuqi",marginEnd:"xkrivgy",marginBottom:"x4ii5y1",marginStart:"x1gryazu",$$css:!0},stackContainer:{position:"x1n2onr6",$$css:!0}};function a(a){var b,e=a.attachment,f=a.attachmentItems,g=a.centered;g=g===void 0?!1:g;var i=a.children;a=a.xstyle;b=(b=d("MWLSThread").useThread(e.threadKey,function(a){return d("LSMessagingThreadTypeUtil").isDiscoverablePublicBroadcastChannel(a.threadType)}))!=null?b:!1;var m=b?f.slice(1,4):f.slice(0,3);b=k(function(){switch(m.length){case 0:return d("MWXMAAttachmentSharedStackConstants").STACK_ITEM_HEIGHT+8;case 1:return d("MWXMAAttachmentSharedStackConstants").STACK_ITEM_HEIGHT+20;case 2:return d("MWXMAAttachmentSharedStackConstants").STACK_ITEM_HEIGHT+30;default:return d("MWXMAAttachmentSharedStackConstants").STACK_ITEM_HEIGHT+40}},[m.length]);f=d("MWXMAAttachmentSharedStackConstants").STACK_ITEM_WIDTH+64;return j.jsxs("div",{className:(h||(h=c("stylex")))(l.stackContainer,a,g&&l.centered),style:{height:b,width:f},children:[m.map(function(a,b){return j.jsx(c("MWXMAAttachmentSharedStackItem.react"),{attachment:e,attachmentItem:a,index:b,mediaRenderQpl:null,totalItems:m.length},b)}),j.jsx("div",{className:"x1ey2m1c x10l6tqk x3f4u1h",style:{height:d("MWXMAAttachmentSharedStackConstants").STACK_ITEM_HEIGHT,width:d("MWXMAAttachmentSharedStackConstants").STACK_ITEM_WIDTH,zIndex:m.length+1},children:i})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWXMAAttachmentSubthreadShortcutLayout.react",["MWXMessageBubbleCornerStyles.react","react","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=(i||(i=d("react"))).c,k=i,l={background:{backgroundColor:"x1xr0vuk",$$css:!0},centered:{marginTop:"xr1yuqi",marginEnd:"xkrivgy",marginBottom:"x4ii5y1",marginStart:"x1gryazu",$$css:!0},outgoingBackground:{backgroundAttachment:"x1nr1p0w",backgroundColor:"x11jlvup",backgroundImage:"xl54vp5",color:"x14ctfv",$$css:!0}};function a(a){var b=j(6),e=a.children,f=a.outgoing;a=a.xstyle;if(b[0]!==f||b[1]!==a){var g=d("MWXMessageBubbleCornerStyles.react").getMWXBubbleCornerStyles();g=(h||(h=c("stylex")))(g,a,l.centered,f?l.outgoingBackground:l.background);b[0]=f;b[1]=a;b[2]=g}else g=b[2];b[3]!==g||b[4]!==e?(f=k.jsx("div",{className:g,children:e}),b[3]=g,b[4]=e,b[5]=f):f=b[5];return f}g["default"]=a}),98);
__d("MWXMAAttachmentVerticalLayout.react",["CometPlaceholder.react","MWLSThreadDisplayContext","MWXGlimmer.react","MWXMessageBubbleCornerStyles.react","react","react-strict-dom","xmaLayouts"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||(h=d("react"))).c,j=h,k={centered:{marginTop:"xr1yuqi",marginEnd:"xkrivgy",marginBottom:"x4ii5y1",marginStart:"x1gryazu",$$css:!0},glimmer:{height:"x1m3v4wt",width:"xdzyupr",$$css:!0},glimmerChatTabWidth:{width:"x1t9vceh",$$css:!0},glimmerMissingPreview:{height:"xqvfhly",$$css:!0}};function a(a){var b=i(21),e=a.attachment,f=a.centered,g=a.children,h=a.connectBottom,l=a.connectTop,m=a.hasText,n=a.outgoing,o=a.xmaLayout;a=a.xstyle;f=f===void 0?!1:f;m=m===void 0?!1:m;n=n?"right":"left";m=m;o=o!==d("xmaLayouts").XMA_LAYOUTS.UNIFIED_LAYOUT&&m?"top":"none";b[0]!==n||b[1]!==h||b[2]!==l||b[3]!==o?(m=d("MWXMessageBubbleCornerStyles.react").getMWXBubbleCornerStyles({align:n,connectBottom:h,connectTop:l,flatten:o}),b[0]=n,b[1]=h,b[2]=l,b[3]=o,b[4]=m):m=b[4];n=m;h=f&&k.centered;b[5]!==n||b[6]!==h?(l=[n,h],b[5]=n,b[6]=h,b[7]=l):l=b[7];o=l;m=(e==null?void 0:e.previewHeightLarge)==null&&(e==null?void 0:e.previewHeight)==null;f=d("MWLSThreadDisplayContext").useMWLSThreadDisplayContext()==="ChatTab";n=f&&k.glimmerChatTabWidth;h=m&&k.glimmerMissingPreview;b[8]!==n||b[9]!==h||b[10]!==o?(l=j.jsx(c("MWXGlimmer.react"),{index:1,xstyle:[k.glimmer,n,h].concat(o)}),b[8]=n,b[9]=h,b[10]=o,b[11]=l):l=b[11];b[12]!==a||b[13]!==o?(e=[a,o],b[12]=a,b[13]=o,b[14]=e):e=b[14];b[15]!==e||b[16]!==g?(f=j.jsx(d("react-strict-dom").html.div,{style:e,children:g}),b[15]=e,b[16]=g,b[17]=f):f=b[17];b[18]!==l||b[19]!==f?(m=j.jsx(c("CometPlaceholder.react"),{fallback:l,name:"MWXMAAttachmentVerticalLayout",children:f}),b[18]=l,b[19]=f,b[20]=m):m=b[20];return m}g["default"]=a}),98);
__d("MWXMAAttachment.react",["I64","Int64Hooks","LSIntEnum","LSXmaContentType","MNLSXMALayoutType","MWLSThreadDisplayContext","MWXMAAttachmentHorizontalItems.react","MWXMAAttachmentItem.react","MWXMAAttachmentItemIgProfile.react","MWXMAAttachmentSharedStackFrontCard.react","MWXMAAttachmentSharedStackLayout.react","MWXMAAttachmentSubthreadShortcutLayout.react","MWXMAAttachmentVerticalLayout.react","ReQL","ReQLSuspense","react","recoverableViolation","stylex","useReStore","xmaAttachmentUtils","xmaLayouts"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l,m=(l||(l=d("react"))).c,n=l;function o(a){return{attachmentCta1Id:a.attachmentCta1Id,attachmentCta2Id:a.attachmentCta2Id,attachmentCta3Id:a.attachmentCta3Id,attachmentFbid:a.attachmentFbid,attachmentIndex:a.attachmentIndex,cta1Title:a.cta1Title,cta1Type:a.cta1Type,cta2Title:a.cta2Title,cta2Type:a.cta2Type,cta3Title:a.cta3Title,cta3Type:a.cta3Type,dashManifest:a.dashManifest,defaultActionEnableExtensions:!1,defaultActionUrl:void 0,defaultButtonType:void 0,defaultCtaId:a.defaultCtaId,defaultCtaTitle:a.defaultCtaTitle,defaultCtaType:a.defaultCtaType,defaultWebviewHeightRatio:void 0,faviconUrl:a.faviconUrl,faviconUrlExpirationTimestampMs:a.faviconUrlExpirationTimestampMs,faviconUrlFallback:a.faviconUrlFallback,imageUrl:a.imageUrl,messageId:a.messageId,originalPageSenderId:a.originalPageSenderId,playableUrl:a.playableUrl,playableUrlExpirationTimestampMs:a.playableUrlExpirationTimestampMs,playableUrlFallback:a.playableUrlFallback,playableUrlMimeType:a.playableUrlMimeType,previewHeight:a.previewHeight,previewUrl:a.previewUrl,previewUrlExpirationTimestampMs:a.previewUrlExpirationTimestampMs,previewUrlFallback:a.previewUrlFallback,previewUrlLarge:a.previewUrlLarge,previewUrlMimeType:a.previewUrlMimeType,previewWidth:a.previewWidth,subtitleText:a.subtitleText,threadKey:a.threadKey,titleText:a.titleText}}var p={cardWidth:{maxWidth:"xw5ewwj",width:"xh8yej3",$$css:!0},cardWidthChatTab:{maxWidth:"x1i5r0r9",width:"xh8yej3",$$css:!0},liveCardWidth:{marginBottom:"x1e56ztr",width:"xdzyupr",$$css:!0},liveCardWidthChatTab:{marginBottom:"x1e56ztr",width:"x1t9vceh",$$css:!0},outgoing_xma:{marginStart:"x1gryazu",$$css:!0},storyCardWidth:{maxWidth:"x18qnofl",width:"xh8yej3",$$css:!0}},q={card:{height:"x5yr21d",overflowX:"x6ikm8r",overflowY:"x10wlt62",verticalAlign:"xxymvpz",$$css:!0},opaqueCard:{backgroundColor:"x1xr0vuk",$$css:!0},rootForHScrollInChatTab:{maxWidth:"xaka53j",$$css:!0}};function a(a){var b=m(155),e=a.attachment,g=a.bodyLineLimit,l=a.cardWidth,r=a.connectBottom,s=a.connectTop,t=a.ctaPopoverMenu,u=a.facepiles,v=a.fullWidthContainer,w=a.getFaviconUrlXMA,x=a.getHeaderUrlXMA,y=a.getPreviewUrlXMA,z=a.hasText,A=a.headlineLineLimit,B=a.mediaRenderQpl,C=a.onPollOptionFacepilePress,D=a.outgoing,E=a.xmaLayout;a=a.xstyle;v=v===void 0?!1:v;z=z===void 0?!1:z;E=E===void 0?d("xmaLayouts").XMA_LAYOUTS.DEFAULT:E;var F=(h||(h=c("useReStore")))(),G=e.attachmentFbid,H=e.attachmentType,I=e.cta1Type,J=e.defaultCtaType,K=e.isBorderless,L=e.xmaContentType,M=e.xmaLayoutType,N;b[0]!==F.tables.attachment_items||b[1]!==G?(N=function(){return d("ReQL").fromTableAscending(F.tables.attachment_items).getKeyRange(G)},b[0]=F.tables.attachment_items,b[1]=G,b[2]=N):N=b[2];var O;b[3]!==G||b[4]!==F?(O=[G,F],b[3]=G,b[4]=F,b[5]=O):O=b[5];N=d("ReQLSuspense").useArray(N,O,f.id+":172");var P;b[6]!==M?(O=function(){return M!=null?[(j||(j=d("I64"))).equal(M,(k||(k=d("LSIntEnum"))).ofNumber(c("MNLSXMALayoutType").HSCROLL)),(j||(j=d("I64"))).equal(M,(k||(k=d("LSIntEnum"))).ofNumber(c("MNLSXMALayoutType").XCENTER)),(j||(j=d("I64"))).equal(M,(k||(k=d("LSIntEnum"))).ofNumber(c("MNLSXMALayoutType").SINGLE)),(j||(j=d("I64"))).equal(M,(k||(k=d("LSIntEnum"))).ofNumber(c("MNLSXMALayoutType").SHARED_STACK)),(j||(j=d("I64"))).equal(M,(k||(k=d("LSIntEnum"))).ofNumber(c("MNLSXMALayoutType").THREAD_SHORTCUT)),(j||(j=d("I64"))).equal(M,(k||(k=d("LSIntEnum"))).ofNumber(c("MNLSXMALayoutType").STANDARD_DXMA))]:[!1,!1,!1]},P=[M],b[6]=M,b[7]=O,b[8]=P):(O=b[7],P=b[8]);O=d("Int64Hooks").useMemoInt64(O,P);P=O[0];var Q=O[1],R=O[2],S=O[3],T=O[4];O=O[5];var U;b[9]!==e?(U=d("xmaAttachmentUtils").isLiveXMA(e),b[9]=e,b[10]=U):U=b[10];U=U;var V=d("MWLSThreadDisplayContext").useMWLSThreadDisplayContext(),W=null;if(S){b[11]!==e||b[12]!==B?(S=n.jsx(c("MWXMAAttachmentSharedStackFrontCard.react"),{attachment:e,mediaRenderQpl:B}),b[11]=e,b[12]=B,b[13]=S):S=b[13];var X;b[14]!==e||b[15]!==N||b[16]!==S?(X=n.jsx(c("MWXMAAttachmentSharedStackLayout.react"),{attachment:e,attachmentItems:N,children:S}),b[14]=e,b[15]=N,b[16]=S,b[17]=X):X=b[17];W=X}else if(T){S=N[0];b[18]!==e||b[19]!==S||b[20]!==g||b[21]!==l||b[22]!==t||b[23]!==u||b[24]!==w||b[25]!==x||b[26]!==y||b[27]!==A||b[28]!==P||b[29]!==B||b[30]!==D||b[31]!==E?(X=n.jsx(c("MWXMAAttachmentItem.react"),{attachment:e,attachmentItem:S,bodyLineLimit:g,cardWidth:l,ctaPopoverMenu:t,facepiles:u,getFaviconUrlXMA:w,getHeaderUrlXMA:x,getPreviewUrlXMA:y,headlineLineLimit:A,isHscroll:P,isStandalone:!0,mediaRenderQpl:B,outgoing:D,xmaLayout:E}),b[18]=e,b[19]=S,b[20]=g,b[21]=l,b[22]=t,b[23]=u,b[24]=w,b[25]=x,b[26]=y,b[27]=A,b[28]=P,b[29]=B,b[30]=D,b[31]=E,b[32]=X):X=b[32];b[33]!==D||b[34]!==X?(T=n.jsx(c("MWXMAAttachmentSubthreadShortcutLayout.react"),{outgoing:D,xstyle:q.card,children:X}),b[33]=D,b[34]=X,b[35]=T):T=b[35];W=T}else if(P){b[36]===Symbol["for"]("react.memo_cache_sentinel")?(S=[q.card,q.opaqueCard],b[36]=S):S=b[36];b[37]!==e||b[38]!==N||b[39]!==g||b[40]!==l||b[41]!==t||b[42]!==u||b[43]!==v||b[44]!==w||b[45]!==x||b[46]!==y||b[47]!==z||b[48]!==A||b[49]!==P||b[50]!==B||b[51]!==E?(X=n.jsx(c("MWXMAAttachmentHorizontalItems.react"),{attachment:e,attachmentItems:N,bodyLineLimit:g,cardWidth:l,ctaPopoverMenu:t,facepiles:u,fullWidthContainer:v,getFaviconUrlXMA:w,getHeaderUrlXMA:x,getPreviewUrlXMA:y,hasText:z,headlineLineLimit:A,isHscroll:P,mediaRenderQpl:B,xmaLayout:E,xstyle:S}),b[37]=e,b[38]=N,b[39]=g,b[40]=l,b[41]=t,b[42]=u,b[43]=v,b[44]=w,b[45]=x,b[46]=y,b[47]=z,b[48]=A,b[49]=P,b[50]=B,b[51]=E,b[52]=X):X=b[52];W=X}else if(R&&N.length===6){b[53]===Symbol["for"]("react.memo_cache_sentinel")?(T=[q.card,q.opaqueCard],b[53]=T):T=b[53];b[54]!==e||b[55]!==N||b[56]!==x||b[57]!==B?(S=n.jsx(c("MWXMAAttachmentItemIgProfile.react"),{attachment:e,attachmentItems:N,getHeaderUrlXMA:x,mediaRenderQpl:B}),b[54]=e,b[55]=N,b[56]=x,b[57]=B,b[58]=S):S=b[58];b[59]!==e||b[60]!==r||b[61]!==s||b[62]!==D||b[63]!==E||b[64]!==S?(v=n.jsx(c("MWXMAAttachmentVerticalLayout.react"),{attachment:e,centered:!0,connectBottom:r,connectTop:s,outgoing:D,xmaLayout:E,xstyle:T,children:S}),b[59]=e,b[60]=r,b[61]=s,b[62]=D,b[63]=E,b[64]=S,b[65]=v):v=b[65];W=v}else if(Q&&N.length===1){b[66]===Symbol["for"]("react.memo_cache_sentinel")?(X=[q.card,q.opaqueCard],b[66]=X):X=b[66];R=N[0];b[67]!==e||b[68]!==R||b[69]!==g||b[70]!==l||b[71]!==t||b[72]!==u||b[73]!==w||b[74]!==x||b[75]!==y||b[76]!==A||b[77]!==P||b[78]!==B||b[79]!==C||b[80]!==E?(T=n.jsx(c("MWXMAAttachmentItem.react"),{attachment:e,attachmentItem:R,bodyLineLimit:g,cardWidth:l,ctaPopoverMenu:t,facepiles:u,getFaviconUrlXMA:w,getHeaderUrlXMA:x,getPreviewUrlXMA:y,headlineLineLimit:A,isHscroll:P,isStandalone:!0,mediaRenderQpl:B,onPollOptionFacepilePress:C,xmaLayout:E}),b[67]=e,b[68]=R,b[69]=g,b[70]=l,b[71]=t,b[72]=u,b[73]=w,b[74]=x,b[75]=y,b[76]=A,b[77]=P,b[78]=B,b[79]=C,b[80]=E,b[81]=T):T=b[81];b[82]!==e||b[83]!==r||b[84]!==s||b[85]!==D||b[86]!==E||b[87]!==T?(S=n.jsx(c("MWXMAAttachmentVerticalLayout.react"),{attachment:e,centered:!0,connectBottom:r,connectTop:s,outgoing:D,xmaLayout:E,xstyle:X,children:T}),b[82]=e,b[83]=r,b[84]=s,b[85]=D,b[86]=E,b[87]=T,b[88]=S):S=b[88];W=S}else if(N.length===0){v=K!==!0&&q.opaqueCard;b[89]!==v?(R=[q.card,v],b[89]=v,b[90]=R):R=b[90];b[91]!==e?(C=o(e),b[91]=e,b[92]=C):C=b[92];b[93]!==e||b[94]!==C||b[95]!==g||b[96]!==l||b[97]!==t||b[98]!==u||b[99]!==w||b[100]!==x||b[101]!==y||b[102]!==A||b[103]!==P||b[104]!==B||b[105]!==E?(X=n.jsx(c("MWXMAAttachmentItem.react"),{attachment:e,attachmentItem:C,bodyLineLimit:g,cardWidth:l,ctaPopoverMenu:t,facepiles:u,getFaviconUrlXMA:w,getHeaderUrlXMA:x,getPreviewUrlXMA:y,headlineLineLimit:A,isHscroll:P,isStandalone:!0,mediaRenderQpl:B,xmaLayout:E}),b[93]=e,b[94]=C,b[95]=g,b[96]=l,b[97]=t,b[98]=u,b[99]=w,b[100]=x,b[101]=y,b[102]=A,b[103]=P,b[104]=B,b[105]=E,b[106]=X):X=b[106];b[107]!==e||b[108]!==r||b[109]!==s||b[110]!==z||b[111]!==D||b[112]!==E||b[113]!==R||b[114]!==X?(T=n.jsx(c("MWXMAAttachmentVerticalLayout.react"),{attachment:e,connectBottom:r,connectTop:s,hasText:z,outgoing:D,xmaLayout:E,xstyle:R,children:X}),b[107]=e,b[108]=r,b[109]=s,b[110]=z,b[111]=D,b[112]=E,b[113]=R,b[114]=X,b[115]=T):T=b[115];W=T}else if(N.length===1){b[116]===Symbol["for"]("react.memo_cache_sentinel")?(S=[q.card,q.opaqueCard],b[116]=S):S=b[116];K=N[0];b[117]!==e||b[118]!==K||b[119]!==g||b[120]!==l||b[121]!==t||b[122]!==u||b[123]!==w||b[124]!==x||b[125]!==y||b[126]!==A||b[127]!==P||b[128]!==B||b[129]!==D||b[130]!==E?(v=n.jsx(c("MWXMAAttachmentItem.react"),{attachment:e,attachmentItem:K,bodyLineLimit:g,cardWidth:l,ctaPopoverMenu:t,facepiles:u,getFaviconUrlXMA:w,getHeaderUrlXMA:x,getPreviewUrlXMA:y,headlineLineLimit:A,isHscroll:P,isStandalone:!0,mediaRenderQpl:B,outgoing:D,xmaLayout:E}),b[117]=e,b[118]=K,b[119]=g,b[120]=l,b[121]=t,b[122]=u,b[123]=w,b[124]=x,b[125]=y,b[126]=A,b[127]=P,b[128]=B,b[129]=D,b[130]=E,b[131]=v):v=b[131];b[132]!==e||b[133]!==r||b[134]!==s||b[135]!==z||b[136]!==D||b[137]!==E||b[138]!==v?(C=n.jsx(c("MWXMAAttachmentVerticalLayout.react"),{attachment:e,connectBottom:r,connectTop:s,hasText:z,outgoing:D,xmaLayout:E,xstyle:S,children:v}),b[132]=e,b[133]=r,b[134]=s,b[135]=z,b[136]=D,b[137]=E,b[138]=v,b[139]=C):C=b[139];W=C}else B==null?void 0:B.endFail("unknown_combination_of_xma_items_and_layout"),c("recoverableViolation")("Unknown combination of XMA items and layout. n Attachment Items: "+String(N.length)+", XMA Layout Type: "+(M==null?"na":(j||(j=d("I64"))).to_string(M))+", Attachment Type: "+(j||(j=d("I64"))).to_string(H)+",  XMA content Type: "+(L==null?"na":(j||(j=d("I64"))).to_string(L))+", default CTA type: "+(J==null?"na":J)+", CTA 1 type: "+(I==null?"na":I),"messenger_web_sharing",void 0,{trackOnly:!0});b[140]!==L?(R=L!=null&&(j||(j=d("I64"))).equal(L,(k||(k=d("LSIntEnum"))).ofNumber(c("LSXmaContentType").FB_STORY_MENTION)),b[140]=L,b[141]=R):R=b[141];X=R;if(b[142]!==E||b[143]!==D||b[144]!==X||b[145]!==V||b[146]!==O||b[147]!==a||b[148]!==P||b[149]!==Q||b[150]!==U){T=E===d("xmaLayouts").XMA_LAYOUTS.UNIFIED_LAYOUT?[p.cardWidth,D&&p.outgoing_xma]:X?p.storyCardWidth:p.cardWidth;K=V==="ChatTab";g=O?K?p.cardWidthChatTab:p.cardWidth:a;l=K?p.liveCardWidthChatTab:p.liveCardWidth;t=(i||(i=c("stylex")))(P&&K&&q.rootForHScrollInChatTab,!P&&!Q&&!U&&T,U?l:g);b[142]=E;b[143]=D;b[144]=X;b[145]=V;b[146]=O;b[147]=a;b[148]=P;b[149]=Q;b[150]=U;b[151]=t}else t=b[151];b[152]!==t||b[153]!==W?(u=n.jsx("div",{className:t,children:W}),b[152]=t,b[153]=W,b[154]=u):u=b[154];return u}g.xmaCardStyles=p;g.MWXMAAttachment=a}),98);
__d("useMWIsChatEntityThread",["LSThreadBitOffset","MWLSThread"],(function(a,b,c,d,e,f,g){"use strict";function a(a){a=Boolean(d("MWLSThread").useThread(a,h));return a}function h(a){return d("LSThreadBitOffset").has(136,a)}g.useMWIsChatEntityThread=a}),98);
__d("MWMessageListAttachmentContainer.react",["CometErrorBoundary.react","MWChatBubbleEmphasisRing.react","MWLSThreadDisplayContext","MWMessageListAttachment.react","MWPMessageListAttachment.react","MWV2ChatFileV2.react","MWV2ChatImagesGrid.react","MWV2UnsupportedAttachment.react","MWXMAAttachment.react","MWXMessageBubble.react","mwpMessageIsReply","react","useMWIsChatEntityThread"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||(h=d("react"))).c,j=h,k={bubble:{paddingTop:"xexx8yu",paddingEnd:"x4uap5",paddingBottom:"x18d9i69",paddingStart:"xkhd6sd",$$css:!0}};function a(a){var b=i(61),e=a.connectBottom,f=a.connectTop,g=a.hasEmphasisRing,h=a.hasText,m=a.mediaRenderQpl,n=a.message,o=a.navigateToRouteForMediaViewer,p=a.outgoing,q=a.xstyle;a=g===void 0?!1:g;var r=h===void 0?!1:h;g=d("MWLSThreadDisplayContext").useMWLSThreadDisplayContext();var s=g==="ChatTab"?180:void 0,t=d("useMWIsChatEntityThread").useMWIsChatEntityThread(n.threadKey);b[0]!==e||b[1]!==f||b[2]!==n||b[3]!==m||b[4]!==p?(h=function(a){return j.jsx(d("MWMessageListAttachment.react").MWMessageListAttachmentAudio,{attachment:a,connectBottom:e,connectTop:f,isReply:c("mwpMessageIsReply")(n),mediaRenderQpl:m,message:n,outgoing:p})},b[0]=e,b[1]=f,b[2]=n,b[3]=m,b[4]=p,b[5]=h):h=b[5];b[6]!==a||b[7]!==f||b[8]!==p?(g=a?function(a,b){return j.jsx(c("MWChatBubbleEmphasisRing.react"),{connectBottom:!1,connectTop:f,hasXMA:a,outgoing:p,precedesXMA:!1,children:b})}:void 0,b[6]=a,b[7]=f,b[8]=p,b[9]=g):g=b[9];b[10]!==p||b[11]!==e||b[12]!==f||b[13]!==m?(a=function(a){return j.jsx(c("MWXMessageBubble.react"),{align:p?"right":"left",color:"incoming",connectBottom:e,connectTop:f,xstyle:k.bubble,children:j.jsx(c("MWV2ChatFileV2.react"),{attachment:a,mediaRenderQpl:m})})},b[10]=p,b[11]=e,b[12]=f,b[13]=m,b[14]=a):a=b[14];var u;b[15]!==m||b[16]!==n||b[17]!==o||b[18]!==p?(u=function(a,b,c,e){return j.jsx(d("MWMessageListAttachment.react").MWMessageListAttachmentImage,{attachment:a,connectBottom:c,connectTop:b,mediaRenderQpl:m,message:n,navigateToRouteForMediaViewer:o,outgoing:p,renderUnsupportedAttachment:e})},b[15]=m,b[16]=n,b[17]=o,b[18]=p,b[19]=u):u=b[19];var v;b[20]!==e||b[21]!==f||b[22]!==m||b[23]!==p?(v=function(a){return j.jsx(c("MWV2ChatImagesGrid.react"),{attachments:a,connectBottom:e,connectTop:f,mediaRenderQpl:m,outgoing:p})},b[20]=e,b[21]=f,b[22]=m,b[23]=p,b[24]=v):v=b[24];var w;b[25]!==m?(w=function(a){return j.jsx(d("MWMessageListAttachment.react").MWMessageListAttachmentSticker,{attachment:a,mediaRenderQpl:m})},b[25]=m,b[26]=w):w=b[26];var x;b[27]!==p||b[28]!==e||b[29]!==f||b[30]!==m?(x=function(a){return j.jsx(c("MWXMessageBubble.react"),{align:p?"right":"left",color:"incoming",connectBottom:e,connectTop:f,children:j.jsx(c("MWV2UnsupportedAttachment.react"),{attachment:a,mediaRenderQpl:m})})},b[27]=p,b[28]=e,b[29]=f,b[30]=m,b[31]=x):x=b[31];var y;b[32]!==f||b[33]!==m||b[34]!==n||b[35]!==o||b[36]!==p?(y=function(a){return j.jsx(d("MWMessageListAttachment.react").MWMessageListAttachmentVideo,{attachment:a,connectTop:f,mediaRenderQpl:m,message:n,navigateToRouteForMediaViewer:o,outgoing:p})},b[32]=f,b[33]=m,b[34]=n,b[35]=o,b[36]=p,b[37]=y):y=b[37];var z;b[38]!==p||b[39]!==q||b[40]!==t||b[41]!==s||b[42]!==e||b[43]!==f||b[44]!==r||b[45]!==m?(z=function(a){return j.jsx(c("CometErrorBoundary.react"),{fallback:function(a){return j.jsx(d("MWMessageListAttachment.react").MWMessageListAttachmentError,{isOutgoing:p,xstyle:q})},children:j.jsx(d("MWXMAAttachment.react").MWXMAAttachment,{attachment:a,bodyLineLimit:t?10:3,cardWidth:s,connectBottom:e,connectTop:f,hasText:r,mediaRenderQpl:m,outgoing:p,xstyle:q})})},b[38]=p,b[39]=q,b[40]=t,b[41]=s,b[42]=e,b[43]=f,b[44]=r,b[45]=m,b[46]=z):z=b[46];var A;b[47]!==e||b[48]!==f||b[49]!==m||b[50]!==n||b[51]!==h||b[52]!==g||b[53]!==a||b[54]!==u||b[55]!==v||b[56]!==w||b[57]!==x||b[58]!==y||b[59]!==z?(A=j.jsx(c("MWPMessageListAttachment.react"),{connectBottom:e,connectTop:f,mediaRenderQpl:m,message:n,renderAudioAttachment:h,renderEmphasisRing:g,renderEphemeralMediaAttachment:l,renderFileAttachment:a,renderImageAttachment:u,renderImageGrid:v,renderStickerAttachment:w,renderUnsupportedAttachment:x,renderVideoAttachment:y,renderXMAAttachment:z}),b[47]=e,b[48]=f,b[49]=m,b[50]=n,b[51]=h,b[52]=g,b[53]=a,b[54]=u,b[55]=v,b[56]=w,b[57]=x,b[58]=y,b[59]=z,b[60]=A):A=b[60];return A}function l(){return null}b=j.memo(a);g["default"]=b}),98);
__d("MWMessageListDisplayContext.react",["react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));c=h;var j=c.useContext;c.useMemo;var k=c.c,l=i.createContext("standard");function a(a){var b=k(3),c=a.children;a=a.value;a=a===void 0?"standard":a;var d;b[0]!==a||b[1]!==c?(d=i.jsx(l.Provider,{value:a,children:c}),b[0]=a,b[1]=c,b[2]=d):d=b[2];return d}function b(){var a=k(4),b=j(l),c=b==="pinnedMessages",d=b==="reportMessages";b=b==="standard";var e;a[0]!==c||a[1]!==d||a[2]!==b?(e={isPinnedMessageList:c,isReportMessageList:d,isStandardMessageList:b},a[0]=c,a[1]=d,a[2]=b,a[3]=e):e=a[3];c=e;return c}g.MWMessageListDisplayContextProvider=a;g.useMWMessageListDisplayContext=b}),98);
__d("MWMessageSendingContext.react",["emptyFunction","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));e=h;f=e.createContext;var j=e.useContext;e.useMemo;var k=e.useRef,l=e.c,m=f({findSendingMessage:c("emptyFunction").thatReturnsFalse,trackSendingMessage:c("emptyFunction"),untrackSendingMessage:c("emptyFunction")});function a(a){var b=l(4);a=a.children;var c;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(c=new Set(),b[0]=c):c=b[0];var d=k(c);b[1]===Symbol["for"]("react.memo_cache_sentinel")?(c={findSendingMessage:function(a){return d.current.has(a)},trackSendingMessage:function(a){d.current.add(a)},untrackSendingMessage:function(a){d.current["delete"](a)}},b[1]=c):c=b[1];c=c;c=c;b[2]!==a?(c=i.jsx(m.Provider,{value:c,children:a}),b[2]=a,b[3]=c):c=b[3];return c}function b(){return j(m)}d={Provider:a,useHook:b};g["default"]=d}),98);
__d("MWMessageOutgoingStatus.react",["MWMessageDeliverySentTimestamp","MWMessageDeliveryStatus","MWMessageSendingContext.react","MWPMessageListColumn.react","MWStatusText.react","clearTimeout","react","react-strict-dom","setTimeout","useServerTime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;var j=b.useEffect,k=b.useMemo,l=b.useRef,m=b.useState,n=3e3,o={mountAnimation:{animationDuration:"x4afe7t",animationName:"x1nuzdyh",animationTimingFunction:"x4hg4is",display:"x1rg5ohu",$$css:!0},statusText:{paddingTop:"xexx8yu",paddingEnd:"x4uap5",paddingBottom:"x18d9i69",paddingStart:"xkhd6sd",position:"x1n2onr6",$$css:!0},statusTextRow:{backgroundColor:"x1eb86dx",display:"x78zum5",justifyContent:"x13a6bvl",$$css:!0}};function a(a){var b=a.alignLeft,e=a.isLastMessage,f=a.message,g=a.status,h=a.xstyle;a=m(!1);var p=a[0],q=a[1],r=l(null),s=l(!1);a=c("MWMessageSendingContext.react").useHook();var t=a.findSendingMessage,u=a.trackSendingMessage,v=a.untrackSendingMessage,w=c("useServerTime")();j(function(){v(f.offlineThreadingId);g.type==="Sending"?(u(f.offlineThreadingId),r.current=c("setTimeout")(function(){q(!0)},n)):r.current&&c("clearTimeout")(r.current);return function(){r.current&&c("clearTimeout")(r.current)}},[t,f.offlineThreadingId,g.type,u,v]);a=k(function(){g.type==="Sending"?u(f.offlineThreadingId):t(f.offlineThreadingId)&&(s.current=!0);var a=g.type==="Sending"||s.current;a=[o.statusText,a&&o.mountAnimation,h];switch(g.type){case"Sending":return p?i.jsx(c("MWStatusText.react"),{alignLeft:b,text:d("MWMessageDeliveryStatus").Titles.sending.toString(),xstyle:a}):i.jsx(d("MWPMessageListColumn.react").MWPMessageListColumnVerticalRhythm,{height:17});case"Sent":case"Delivered":return e?i.jsx(c("MWStatusText.react"),{alignLeft:b,text:d("MWMessageDeliverySentTimestamp").getSentTitleWithTimestamp(f.timestampMs,w).toString(),xstyle:a}):null;case"Error":return i.jsx(c("MWStatusText.react"),{alignLeft:b,error:!0,text:d("MWMessageDeliveryStatus").Titles.error.toString(),xstyle:a});default:return null}},[b,t,e,f.offlineThreadingId,f.timestampMs,w,p,g.type,u,h]);return i.jsx(d("react-strict-dom").html.div,{"data-testid":void 0,style:[o.statusTextRow],children:a})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWMessageUnsentTimestampText.react",["fbt","I64","getMessengerPreciseTimestamp","gkx","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=(i||(i=d("react"))).c,l=i;function a(a){var b=k(11),e=a.timestampMs;a=a.unsentTimestampMs;var f;b[0]!==e?(f=h._("__JHASH__L93MxMH-RPL__JHASH__",[h._param("time",c("getMessengerPreciseTimestamp")((j||(j=d("I64"))).to_float(e)))]),b[0]=e,b[1]=f):f=b[1];b[2]!==f?(e=l.jsx("div",{children:f}),b[2]=f,b[3]=e):e=b[3];b[4]!==a?(f=c("gkx")("7855")?h._("__JHASH__6L85PWgp0uQ__JHASH__",[h._param("time",c("getMessengerPreciseTimestamp")((j||(j=d("I64"))).to_float(a)))]):h._("__JHASH__exEcskNfDMO__JHASH__",[h._param("time",c("getMessengerPreciseTimestamp")((j||(j=d("I64"))).to_float(a)))]),b[4]=a,b[5]=f):f=b[5];b[6]!==f?(a=l.jsx("div",{children:f}),b[6]=f,b[7]=a):a=b[7];b[8]!==e||b[9]!==a?(f=l.jsxs("div",{children:[e,a]}),b[8]=e,b[9]=a,b[10]=f):f=b[10];return f}g["default"]=a}),226);
__d("MWMultiReactConstants",[],(function(a,b,c,d,e,f){"use strict";a=3;b=20;c=3;d=9;e=180;var g=2;f.DEFAULT_MAX_REACTION_PREVIEWED_ALLOWED=a;f.CM_MAX_REACTION_EMOJIS_ALLOWED=b;f.PUBLIC_CHANNELS_MAX_REACTIONS_EMOJIS_PREVIEWED_WHEN_COLLAPSED=c;f.SPACING_PER_COUNT_CHARACTER=d;f.REACTIONS_ROW_EXPAND_COLLAPSE_ANIMATION_TOTAL_DURATION=e;f.REACTION_BUTTON_BUBBLE_EASE_FACTOR=g}),66);
__d("MWNotificationMessageInstantGameCustomUpdateMuteManagementAdminMsgCta.react",["LSCustomUpdateMuteManagementStoredProcedure","LSFactory","LSIntEnum","MWAdminTextLayout.react","MWXLink.react","ReQL","ReQLSuspense","promiseDone","react","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=j||(j=d("react"));b=j;b.useCallback;var l=b.c;function a(a){var b=l(19),e=a.message,g=a.shouldMute,j=(h||(h=c("useReStore")))();b[0]!==j.tables.admin_message_ctas||b[1]!==e.threadKey||b[2]!==e.messageId?(a=function(){return d("ReQL").fromTableAscending(j.tables.admin_message_ctas).getKeyRange(e.threadKey,e.messageId)},b[0]=j.tables.admin_message_ctas,b[1]=e.threadKey,b[2]=e.messageId,b[3]=a):a=b[3];var m;b[4]!==j||b[5]!==e.messageId||b[6]!==e.threadKey?(m=[j,e.messageId,e.threadKey],b[4]=j,b[5]=e.messageId,b[6]=e.threadKey,b[7]=m):m=b[7];var n=d("ReQLSuspense").useFirst(a,m,f.id+":32");b[8]!==n||b[9]!==g||b[10]!==j||b[11]!==e.threadKey?(a=function(){if((n==null?void 0:n.targetId)==null)return;var a=n.targetId,b=g?(i||(i=d("LSIntEnum"))).ofNumber(0):(i||(i=d("LSIntEnum"))).ofNumber(1);c("promiseDone")(j.runInTransaction(function(d){return c("LSCustomUpdateMuteManagementStoredProcedure")(c("LSFactory")(d),{gameId:a,mutedUserId:e.threadKey,userActionType:b})},"readwrite",void 0,void 0,f.id+":55"))},b[8]=n,b[9]=g,b[10]=j,b[11]=e.threadKey,b[12]=a):a=b[12];m=a;b[13]!==e.adminMsgCtaTitle||b[14]!==m?(a=e.adminMsgCtaTitle!=null?k.jsx(c("MWXLink.react"),{onClick:m,target:"_blank",children:e.adminMsgCtaTitle}):void 0,b[13]=e.adminMsgCtaTitle,b[14]=m,b[15]=a):a=b[15];m=a;b[16]!==m||b[17]!==e?(a=k.jsx(c("MWAdminTextLayout.react"),{cta:m,message:e}),b[16]=m,b[17]=e,b[18]=a):a=b[18];return a}g["default"]=a}),98);
__d("MWNotificationMessageInstantGameSubscriptionManagementAdminMsgCta.react",["I64","LSFactory","LSIntEnum","LSUpdateBotSubscriptionStoredProcedure","MWAdminTextLayout.react","MWXLink.react","promiseDone","react","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l=k||(k=d("react"));b=k;b.useCallback;var m=b.c;function a(a){var b=m(12),e=a.message,g=a.shouldSubscribe,k=(h||(h=c("useReStore")))();b[0]!==e.threadKey?(a=(i||(i=d("I64"))).to_string(e.threadKey),b[0]=e.threadKey,b[1]=a):a=b[1];var n=a;b[2]!==g||b[3]!==k||b[4]!==n?(a=function(){var a=g?(j||(j=d("LSIntEnum"))).ofNumber(0):(j||(j=d("LSIntEnum"))).ofNumber(1);c("promiseDone")(k.runInTransaction(function(b){return c("LSUpdateBotSubscriptionStoredProcedure")(c("LSFactory")(b),{threadKey:(i||(i=d("I64"))).of_string(n),userActionType:a})},"readwrite",void 0,void 0,f.id+":41"))},b[2]=g,b[3]=k,b[4]=n,b[5]=a):a=b[5];var o=a;b[6]!==e.adminMsgCtaTitle||b[7]!==o?(a=e.adminMsgCtaTitle!=null?l.jsx(c("MWXLink.react"),{onClick:function(){return o()},target:"_blank",children:e.adminMsgCtaTitle}):void 0,b[6]=e.adminMsgCtaTitle,b[7]=o,b[8]=a):a=b[8];a=a;var p;b[9]!==a||b[10]!==e?(p=l.jsx(c("MWAdminTextLayout.react"),{cta:a,message:e}),b[9]=a,b[10]=e,b[11]=p):p=b[11];return p}g["default"]=a}),98);
__d("MWNotificationMessageManageNotificationsLazyDialogTrigger.react",["JSResourceForInteraction","emptyFunction","react","useMWXLazyDialog"],(function(a,b,c,d,e,f,g){"use strict";var h;h||d("react");var i=c("JSResourceForInteraction")("MWNotificationMessagesManageNotificationsDialog.react").__setRef("MWNotificationMessageManageNotificationsLazyDialogTrigger.react");function a(a){var b=a.isOptOut,d=a.renderer,e=a.targetId;a=a.threadKey;var f={isOptOut:b,targetId:e,threadKey:a};b=c("useMWXLazyDialog")(i);var g=b[0];e=function(){return g(f,c("emptyFunction"))};return d(e)}g["default"]=a}),98);
__d("MWNotificationMessageManageNotificationsAdminMsgCta.react",["CometTextWithEntities.react","MWNotificationMessageManageNotificationsLazyDialogTrigger.react","MWXPressable.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||(h=d("react"))).c,j=h;function a(a){var b=i(7),d=a.isOptOut,e=a.targetId,f=a.threadKey,g=a.title;b[0]!==g?(a=function(a){return j.jsx(c("MWXPressable.react"),{onPress:function(){return a()},children:j.jsx(c("CometTextWithEntities.react"),{text:g})})},b[0]=g,b[1]=a):a=b[1];a=a;var h;b[2]!==d||b[3]!==a||b[4]!==e||b[5]!==f?(h=j.jsx(c("MWNotificationMessageManageNotificationsLazyDialogTrigger.react"),{isOptOut:d,renderer:a,targetId:e,threadKey:f}),b[2]=d,b[3]=a,b[4]=e,b[5]=f,b[6]=h):h=b[6];return h}g["default"]=a}),98);
__d("MWPMessageAuthor.react",["I64","Int64Hooks","LSAuthorityLevel","LSContactBlockedByViewerStatus","LSContactGender","LSContactIdType","LSContactType","LSContactViewerRelationship","LSContactWorkForeignEntityType","LSFactory","LSIntEnum","LSVerifyContactRowExistsStoredProcedure","MWPContactContext.react","ReQL","ReQLSuspense","mwCMIsCMSubthread","promiseDone","react","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l=k||(k=d("react")),m=k;m.useMemo;var n=m.c;function o(a){var b=n(16),e=a.children,g=a.contactId,j=(h||(h=c("useReStore")))();b[0]!==j.tables.contacts||b[1]!==g?(a=function(){return d("ReQL").fromTableAscending(j.tables.contacts).getKeyRange(g)},b[0]=j.tables.contacts,b[1]=g,b[2]=a):a=b[2];var k;b[3]!==j||b[4]!==g?(k=[j,g],b[3]=j,b[4]=g,b[5]=k):k=b[5];a=d("ReQLSuspense").useFirst(a,k,f.id+":51");b[6]!==a?(k={contact:a,nickname:void 0},b[6]=a,b[7]=k):k=b[7];a=k;k=a;var m;b[8]!==j||b[9]!==g?(a=function(){c("promiseDone")(j.runInTransaction(function(a){return c("LSVerifyContactRowExistsStoredProcedure")(c("LSFactory")(a),{authorityLevel:(i||(i=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").CLIENT_PARTIAL),blockedByViewerStatus:i.ofNumber(c("LSContactBlockedByViewerStatus").UNBLOCKED),contactIdType:i.ofNumber(c("LSContactIdType").FBID),contactType:i.ofNumber(c("LSContactType").USER),contactViewerRelationship:i.ofNumber(c("LSContactViewerRelationship").UNKNOWN),gender:i.ofNumber(c("LSContactGender").UNKNOWN),id:g,isBlocked:!1,isMemorialized:!1,isSelf:!1,workForeignEntityType:i.ofNumber(c("LSContactWorkForeignEntityType").UNKNOWN)})},"readwrite",void 0,void 0,f.id+":65"))},m=[j,g],b[8]=j,b[9]=g,b[10]=a,b[11]=m):(a=b[10],m=b[11]);d("Int64Hooks").useEffectInt64(a,m);b[12]!==k.contact||b[13]!==k.nickname||b[14]!==e?(a=l.jsx(d("MWPContactContext.react").MWPContactContextProvider,{contact:k.contact,nickname:k.nickname,children:e}),b[12]=k.contact,b[13]=k.nickname,b[14]=e,b[15]=a):a=b[15];return a}function p(a){var b=n(7),c=a.children,e=a.contact;a=a.nickname;var f;b[0]!==e||b[1]!==a?(f={contact:e,nickname:a},b[0]=e,b[1]=a,b[2]=f):f=b[2];e=f;a=e;b[3]!==a.contact||b[4]!==a.nickname||b[5]!==c?(f=l.jsx(d("MWPContactContext.react").MWPContactContextProvider,{contact:a.contact,nickname:a.nickname,children:c}),b[3]=a.contact,b[4]=a.nickname,b[5]=c,b[6]=f):f=b[6];return f}function a(a){var b=n(25),e=a.children,g=a.contactId,k=a.threadKey,m=(h||(h=c("useReStore")))();b[0]!==m.tables.contacts||b[1]!==g?(a=function(){return d("ReQL").fromTableAscending(m.tables.contacts).getKeyRange(g)},b[0]=m.tables.contacts,b[1]=g,b[2]=a):a=b[2];var q;b[3]!==g||b[4]!==m?(q=[g,m],b[3]=g,b[4]=m,b[5]=q):q=b[5];a=d("ReQLSuspense").useFirst(a,q,f.id+":126");q=(q=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableAscending(m.tables.participants,["nickname"]).getKeyRange(k,g)},[g,m,k],f.id+":130"))==null?void 0:q.nickname;var r;b[6]!==m.tables.threads||b[7]!==m.tables.contextual_profile_v1||b[8]!==k||b[9]!==g?(r=function(){return d("ReQL").fromTableAscending(m.tables.threads,["parentThreadKey","secondaryParentThreadKey","threadType"]).getKeyRange(k).map(function(a){var b=a.parentThreadKey,e=a.secondaryParentThreadKey;a=a.threadType;a=d("ReQLSuspense").first(d("ReQL").fromTableAscending(m.tables.contextual_profile_v1,["profileName"]).getKeyRange(g,c("mwCMIsCMSubthread")(a)&&e!=null?e:b),f.id+":155");return a==null?void 0:a.profileName})},b[6]=m.tables.threads,b[7]=m.tables.contextual_profile_v1,b[8]=k,b[9]=g,b[10]=r):r=b[10];var s;b[11]!==m||b[12]!==k||b[13]!==g?(s=[m,k,g],b[11]=m,b[12]=k,b[13]=g,b[14]=s):s=b[14];r=d("ReQLSuspense").useFirst(r,s,f.id+":146");s=r!=null?r:q;if(a!=null)if((j||(j=d("I64"))).ge(a.authorityLevel,(i||(i=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").AUTHORITATIVE_PENDING_REPLACEMENT))){b[15]!==a||b[16]!==s||b[17]!==e?(r=l.jsx(p,{contact:a,nickname:s,children:e}),b[15]=a,b[16]=s,b[17]=e,b[18]=r):r=b[18];return r}else{b[19]!==g||b[20]!==e?(q=l.jsx(o,{contactId:g,children:e}),b[19]=g,b[20]=e,b[21]=q):q=b[21];return q}else{b[22]!==g||b[23]!==e?(a=l.jsx(o,{contactId:g,children:e}),b[22]=g,b[23]=e,b[24]=a):a=b[24];return a}}m=l.memo(a,function(a,b){if(a!=null&&b!=null&&(j||(j=d("I64"))).equal(a.contactId,b.contactId)&&(j||(j=d("I64"))).equal(a.threadKey,b.threadKey))return a.children===b.children;else return!1});function b(){var a=n(2),b=d("MWPContactContext.react").useMWPContactStableContext();b=b.authorName;var c;a[0]!==b?(c=[b],a[0]=b,a[1]=c):c=a[1];return c}function e(){var a=n(3),b=d("MWPContactContext.react").useMWPContactFullContext();b=b.contact;var c=b!=null?b.name:void 0,e;a[0]!==c||a[1]!==b?(e=[c,b],a[0]=c,a[1]=b,a[2]=e):e=a[2];return e}g.MissingContactProvider=o;g.Provider=p;g.MWPMessageAuthor=m;g.useAuthorName=b;g.useAuthorFullName=e}),98);
__d("MWPAccessibleEyebrowsText.react",["fbt","MWPMessageAuthor.react","react","react-strict-dom"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=(i||(i=d("react"))).c,k=i,l={visuallyHidden:{clip:"xzpqnlu",clipPath:"x1hyvwdk",height:"xjm9jq1",overflowX:"x6ikm8r",overflowY:"x10wlt62",position:"x10l6tqk",width:"x1i1rx1s",$$css:!0}};function a(a){var b=j(7),c=a.message;a=a.outgoing;var e=d("MWPMessageAuthor.react").useAuthorName();e=e[0];var f;b[0]!==a?(f=a?h._("__JHASH__950lIWTelJN__JHASH__"):h._("__JHASH__uufWL2Zp_42__JHASH__"),b[0]=a,b[1]=f):f=b[1];f=f;var g;b[2]!==c.isAdminMessage||b[3]!==e||b[4]!==a||b[5]!==f?(g=!c.isAdminMessage&&k.jsx(d("react-strict-dom").html.span,{style:l.visuallyHidden,children:e!=null&&!a?e:f}),b[2]=c.isAdminMessage,b[3]=e,b[4]=a,b[5]=f,b[6]=g):g=b[6];return g}g["default"]=a}),226);
__d("MWPAudioHighlightStylesHooks",["react"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");b.useMemo;var i=b.c,j={incoming:{backgroundColor:"x1arowe1",opacity:"x1ptxcow",$$css:!0},outgoing:{backgroundColor:"x14hiurz",opacity:"xz5rk10",$$css:!0},root:{transform:"x5i6ehr",$$css:!0}};function a(a){var b=i(2);a=a?j.outgoing:j.incoming;var c;b[0]!==a?(c=[j.root,a],b[0]=a,b[1]=c):c=b[1];a=c;return a}g.useHighlightStyles=a}),98);
__d("MWPAudioPlayerIcons.react",["react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||(h=d("react"))).c,j=h;function a(a){var b=i(2);a=a.color;var c;b[0]!==a?(c=j.jsx("svg",{"aria-hidden":!0,height:"24px",viewBox:"0 0 36 36",width:"24px",children:j.jsx("path",{d:"M10 25.5v-15a1.5 1.5 0 012.17-1.34l15 7.5a1.5 1.5 0 010 2.68l-15 7.5A1.5 1.5 0 0110 25.5z",fill:a})}),b[0]=a,b[1]=c):c=b[1];return c}function b(a){var b=i(2);a=a.color;var c;b[0]!==a?(c=j.jsx("svg",{"aria-hidden":!0,height:"24px",viewBox:"0 0 36 36",width:"24px",children:j.jsx("rect",{fill:a,height:"18",rx:"2",width:"18",x:"9",y:"9"})}),b[0]=a,b[1]=c):c=b[1];return c}function c(a){var b=i(2);a=a.color;var c;b[0]!==a?(c=j.jsx("svg",{"aria-hidden":!0,height:"24px",viewBox:"0 0 36 36",width:"24px",children:j.jsx("path",{d:"M11 8.5c-.83 0-1.5.67-1.5 1.5v16c0 .83.67 1.5 1.5 1.5h4c.83 0 1.5-.67 1.5-1.5V10c0-.83-.67-1.5-1.5-1.5h-4zM21 8.5c-.83 0-1.5.67-1.5 1.5v16c0 .83.67 1.5 1.5 1.5h4c.83 0 1.5-.67 1.5-1.5V10c0-.83-.67-1.5-1.5-1.5h-4z",fill:a})}),b[0]=a,b[1]=c):c=b[1];return c}g.PlayIcon=a;g.StopIcon=b;g.PauseIcon=c}),98);
__d("MWPAudioPlaybackThreadContext.react",["I64","Int64Hooks","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=h||(h=d("react"));c=h;e=c.createContext;var k=c.useContext,l=c.c;f={threadKey:(i||(i=d("I64"))).zero};var m=e(f);function a(){return k(m).threadKey}function b(a){var b=l(6),c=a.children,e=a.threadKey,f;b[0]!==e?(a=function(){return{threadKey:e}},f=[e],b[0]=e,b[1]=a,b[2]=f):(a=b[1],f=b[2]);a=d("Int64Hooks").useMemoInt64(a,f);b[3]!==a||b[4]!==c?(f=j.jsx(m.Provider,{value:a,children:c}),b[3]=a,b[4]=c,b[5]=f):f=b[5];return f}g.useMWPAudioPlaybackThreadKey=a;g.MWPAudioPlaybackThreadContextProvider=b}),98);
__d("MWPAudioPlaybackContext.react",["fbt","$InternalEnum","I64","Int64Hooks","MWPAudioPlaybackThreadContext.react","Promise","ReQL","ReQLSuspense","asyncToGeneratorRuntime","bx","clearTimeout","emptyFunction","gkx","react","react-forget-runtime","useReStore"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l,m=k||(k=d("react")),n=k,o=n.createContext;n.useCallback;n.useContext;var p=n.useEffect;n.useMemo;var q=n.useRef,r=n.useState,s=n.c,t=b("$InternalEnum")({SLOW:.5,NORMAL:1,FAST:1.5,DOUBLE:2});function u(a){var b=new Audio();b.preload="auto";b.src=a;b.load();return b}function v(){return u(c("bx").getURL(c("bx")("577")))}function w(a){var b=Array.from(t.members()),c=b.findIndex(function(b){return b===a});c=c+1;return b[c%b.length]}function x(a){return h._("__JHASH__T0e3ZJkGlxz__JHASH__",[h._param("playback rate",a,[0])])}x.displayName=x.name+" [from "+f.id+"]";n={activeAudio:null,activeMessageId:null,activeThreadKey:(l||(l=d("I64"))).zero,addMessageId:c("emptyFunction"),addNextPlayableUrl:c("emptyFunction"),clearActiveAudio:c("emptyFunction"),clearNextPlayableUrl:c("emptyFunction"),getMessageId:c("emptyFunction"),getNewOrExistingAudio:u,getNewOrExistingAudioWithRetry:function(){return(j||(j=b("Promise"))).resolve(u(""))},getNextPlayableUrl:c("emptyFunction"),onChangePlaybackRate:c("emptyFunction"),playbackRateLabel:x(t.NORMAL),setUseOutOfChatPlayback:c("emptyFunction")};var y=o(n);function a(a,b,e,f,g){var h=s(23),i=d("react-forget-runtime").useContextWithBailoutExperiment__unstable(y,z),j=i.activeAudio,k=i.activeThreadKey,m=i.addMessageId,n=i.addNextPlayableUrl,o=i.clearNextPlayableUrl,p=i.getNewOrExistingAudio,q=i.setUseOutOfChatPlayback,r=d("MWPAudioPlaybackThreadContext.react").useMWPAudioPlaybackThreadKey();h[0]!==g||h[1]!==k||h[2]!==r||h[3]!==q?(i=function(){if(!g||(l||(l=d("I64"))).is_zero(k)||(l||(l=d("I64"))).is_zero(r))return;q(!(l||(l=d("I64"))).equal(k,r));return function(){q((l||(l=d("I64"))).equal(k,r))}},h[0]=g,h[1]=k,h[2]=r,h[3]=q,h[4]=i):i=h[4];var t;h[5]!==j||h[6]!==k||h[7]!==q||h[8]!==g||h[9]!==r?(t=[j,k,q,g,r],h[5]=j,h[6]=k,h[7]=q,h[8]=g,h[9]=r,h[10]=t):t=h[10];d("Int64Hooks").useEffectInt64(i,t);h[11]!==a||h[12]!==e||h[13]!==m||h[14]!==g||h[15]!==b||h[16]!==f||h[17]!==n||h[18]!==o||h[19]!==p||h[20]!==r?(j=function(){if(a!=null&&a!==""){var d;d=c("gkx")("6679")?a.concat((d=e)!=null?d:""):a;e!=null&&m(d,e);if(!g)return u(a);if(b!=null&&b!==""){var h;h=c("gkx")("6679")?b.concat((h=f)!=null?h:""):b;n(d,h);f!=null&&m(h,f)}else o(d);return p(a,r,e)}},i=[m,n,o,p,e,f,b,a,g,r],h[11]=a,h[12]=e,h[13]=m,h[14]=g,h[15]=b,h[16]=f,h[17]=n,h[18]=o,h[19]=p,h[20]=r,h[21]=j,h[22]=i):(j=h[21],i=h[22]);return d("Int64Hooks").useMemoInt64(j,i)}function z(a){return[a.activeAudio,a.activeThreadKey,a.addMessageId,a.addNextPlayableUrl,a.clearNextPlayableUrl,a.getNewOrExistingAudio,a.setUseOutOfChatPlayback]}function e(a,e,f,g,h){var i=s(23),j=d("react-forget-runtime").useContextWithBailoutExperiment__unstable(y,A),k=j.activeAudio,m=j.activeThreadKey,n=j.addMessageId,o=j.addNextPlayableUrl,p=j.clearNextPlayableUrl,q=j.getNewOrExistingAudioWithRetry,t=j.setUseOutOfChatPlayback,v=d("MWPAudioPlaybackThreadContext.react").useMWPAudioPlaybackThreadKey();i[0]!==h||i[1]!==m||i[2]!==v||i[3]!==t?(j=function(){if(!h||(l||(l=d("I64"))).is_zero(m)||(l||(l=d("I64"))).is_zero(v))return;t(!(l||(l=d("I64"))).equal(m,v));return function(){t((l||(l=d("I64"))).equal(m,v))}},i[0]=h,i[1]=m,i[2]=v,i[3]=t,i[4]=j):j=i[4];var w;i[5]!==k||i[6]!==m||i[7]!==t||i[8]!==h||i[9]!==v?(w=[k,m,t,h,v],i[5]=k,i[6]=m,i[7]=t,i[8]=h,i[9]=v,i[10]=w):w=i[10];d("Int64Hooks").useEffectInt64(j,w);k=r(null);j=k[0];var x=k[1];i[11]!==a||i[12]!==f||i[13]!==n||i[14]!==h||i[15]!==e||i[16]!==g||i[17]!==o||i[18]!==p||i[19]!==q||i[20]!==v?(w=function(){var d=function(){var d=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){if(a!=null&&a!==""){var b;b=c("gkx")("6679")?a.concat((b=f)!=null?b:""):a;f!=null&&n(b,f);if(!h){x(u(a));return}if(e!=null&&e!==""){var d;d=c("gkx")("6679")?e.concat((d=g)!=null?d:""):e;o(b,d);g!=null&&n(d,g)}else p(b);d=(yield q(a,v,f));x(d);return}});return function(){return d.apply(this,arguments)}}();d()["catch"](function(){})},k=[n,o,p,q,f,g,e,a,h,v],i[11]=a,i[12]=f,i[13]=n,i[14]=h,i[15]=e,i[16]=g,i[17]=o,i[18]=p,i[19]=q,i[20]=v,i[21]=w,i[22]=k):(w=i[21],k=i[22]);d("Int64Hooks").useEffectInt64(w,k);return j}function A(a){return[a.activeAudio,a.activeThreadKey,a.addMessageId,a.addNextPlayableUrl,a.clearNextPlayableUrl,a.getNewOrExistingAudioWithRetry,a.setUseOutOfChatPlayback]}function B(){var a=s(3),b=d("react-forget-runtime").useContextWithBailoutExperiment__unstable(y,C),c=b.onChangePlaybackRate;b=b.playbackRateLabel;var e;a[0]!==b||a[1]!==c?(e=[b,c],a[0]=b,a[1]=c,a[2]=e):e=a[2];return e}function C(a){return[a.onChangePlaybackRate,a.playbackRateLabel]}function D(){var a=s(24),b=d("react-forget-runtime").useContextWithBailoutExperiment__unstable(y,E),e=b.activeAudio,g=b.activeMessageId,h=b.activeThreadKey,j=b.clearActiveAudio,k=b.clearNextPlayableUrl,l=b.getMessageId;b=b.getNextPlayableUrl;var m=(i||(i=c("useReStore")))(),n;a[0]!==m.tables.threads||a[1]!==h?(n=function(){return d("ReQL").fromTableDescending(m.tables.threads).getKeyRange(h)},a[0]=m.tables.threads,a[1]=h,a[2]=n):n=a[2];var o;a[3]!==m||a[4]!==h?(o=[m,h],a[3]=m,a[4]=h,a[5]=o):o=a[5];n=d("ReQLSuspense").useFirst(n,o,f.id+":307");o=e==null?void 0:e.src;if(a[6]!==o||a[7]!==g){var p;p=c("gkx")("6679")?o==null?void 0:o.concat((p=g)!=null?p:""):o;a[6]=o;a[7]=g;a[8]=p}else p=a[8];o=p;a[9]!==o||a[10]!==b?(g=o==null?null:b(o),a[9]=o,a[10]=b,a[11]=g):g=a[11];var q=g;a[12]!==q||a[13]!==l||a[14]!==m.tables.messages?(p=function(){var a=q==null?null:l(q);return a==null?d("ReQL").empty():d("ReQL").fromTableAscending(m.tables.messages.index("messageId"),["isUnsent"]).getKeyRange(a).filter(function(a){return!a.isUnsent})},a[12]=q,a[13]=l,a[14]=m.tables.messages,a[15]=p):p=a[15];a[16]!==m||a[17]!==l||a[18]!==q?(b=[m,l,q],a[16]=m,a[17]=l,a[18]=q,a[19]=b):b=a[19];g=d("ReQLSuspense").useFirst(p,b,f.id+":319");o!=null&&q!=null&&g==null&&k(o);a[20]!==e||a[21]!==j||a[22]!==n?(p=[e,j,n],a[20]=e,a[21]=j,a[22]=n,a[23]=p):p=a[23];return p}function E(a){return[a.activeAudio,a.activeMessageId,a.activeThreadKey,a.clearActiveAudio,a.clearNextPlayableUrl,a.getMessageId,a.getNextPlayableUrl]}function F(a){var e=s(33);a=a.children;var f;e[0]===Symbol["for"]("react.memo_cache_sentinel")?(f=new Map(),e[0]=f):f=e[0];var g=q(f);e[1]===Symbol["for"]("react.memo_cache_sentinel")?(f=new Map(),e[1]=f):f=e[1];var h=q(f);e[2]===Symbol["for"]("react.memo_cache_sentinel")?(f=[],e[2]=f):f=e[2];var i=q(f);e[3]===Symbol["for"]("react.memo_cache_sentinel")?(f=new Map(),e[3]=f):f=e[3];var k=q(f);e[4]===Symbol["for"]("react.memo_cache_sentinel")?(f=new Set(),e[4]=f):f=e[4];var n=q(f),o;e[5]===Symbol["for"]("react.memo_cache_sentinel")?(f=function(){var a=i.current;return function(){while(a.length>0){var b=a.pop(),c=b[0],d=b[1];b=b[2];c.removeEventListener(d,b);c.pause()}}},o=[],e[5]=f,e[6]=o):(f=e[5],o=e[6]);p(f,o);f=r(t.NORMAL);var z=f[0],A=f[1];e[7]!==z?(o=x(z),e[7]=z,e[8]=o):o=e[8];f=o;var B=f;o=r((l||(l=d("I64"))).zero);var C=o[0],D=o[1];f=r(null);var E=f[0],F=f[1];o=r(null);f=o[0];var G=o[1];o=r(!1);var H=o[0],I=o[1];o=(f==null?void 0:f.paused)===!1;H=H&&o?f:null;var J=H;e[9]===Symbol["for"]("react.memo_cache_sentinel")?(o=function(a,b){k.current.set(a,b)},e[9]=o):o=e[9];var K=o;e[10]===Symbol["for"]("react.memo_cache_sentinel")?(f=function(a){return k.current.get(a)},e[10]=f):f=e[10];var L=f;e[11]===Symbol["for"]("react.memo_cache_sentinel")?(H=function(){G(function(a){a!=null&&a.pause();return null}),F(null)},e[11]=H):H=e[11];var M=H;e[12]===Symbol["for"]("react.memo_cache_sentinel")?(o=function(a){h.current["delete"](a)},e[12]=o):o=e[12];var N=o;e[13]!==z?(f=function(a,b,d){var e,f=c("gkx")("6679")?a.concat((e=d)!=null?e:""):a,j=(e=g.current.get(f))!=null?e:u(a);j.playbackRate=z;e=function(a,b){j.addEventListener(a,b),i.current.push([j,a,b])};a=function(){var a=h.current.get(f);if(a!=null){var b=g.current.get(a),c=k.current.get(a);if(b!=null&&b.paused)return void v().play().then(function(){G(b);F(c);return b.play()["catch"](function(){G(null),F(null)})})}G(null);F(null)};e("ended",a);a=function(){for(var a of g.current.values())a!==j&&a.pause();G(j);F(d);D(b)};e("playing",a);g.current.set(f,j);return j},e[13]=z,e[14]=f):f=e[14];var O=f;e[15]!==z?(H=function(a,b,d){var e,f=c("gkx")("6679")?a.concat((e=d)!=null?e:""):a,j=(e=g.current.get(f))!=null?e:u(a);j.playbackRate=z;e=function(a,b){j.addEventListener(a,b),i.current.push([j,a,b])};a=function(){var a=h.current.get(f);if(a!=null){var b=g.current.get(a),c=k.current.get(a);if(b!=null&&b.paused)return void v().play().then(function(){G(b);F(c);return b.play()["catch"](function(){G(null),F(null)})})}G(null);F(null)};e("ended",a);a=function(){for(var a of g.current.values())a!==j&&a.pause();G(j);F(d);D(b)};e("playing",a);g.current.set(f,j);return j},e[15]=z,e[16]=H):H=e[16];var P=H;e[17]!==P?(o=function(a,d,e){var f=new(j||(j=b("Promise")))(function(b,f){var h=P(a,d,e),i=c("gkx")("6679")?a.concat((f=e)!=null?f:""):a,j=window.setTimeout(function(){h.readyState===0&&!n.current.has(i)&&(n.current.add(i),g.current["delete"](i),b(P(a,d,e)))},2e3);h.addEventListener("durationchange",function(){c("clearTimeout")(j),b(h)})});return f},e[17]=P,e[18]=o):o=e[18];var Q=o;e[19]===Symbol["for"]("react.memo_cache_sentinel")?(f=function(a){return h.current.get(a)},e[19]=f):f=e[19];var R=f;e[20]===Symbol["for"]("react.memo_cache_sentinel")?(H=function(){A(function(a){a=w(a);for(var b of g.current.values())b.playbackRate=a;return a})},e[20]=H):H=e[20];var S=H;e[21]===Symbol["for"]("react.memo_cache_sentinel")?(o=function(a,b){h.current.set(a,b)},e[21]=o):o=e[21];var T=o;e[22]!==J||e[23]!==E||e[24]!==C||e[25]!==O||e[26]!==Q||e[27]!==B?(f=function(){return{activeAudio:J,activeMessageId:E,activeThreadKey:C,addMessageId:K,addNextPlayableUrl:T,clearActiveAudio:M,clearNextPlayableUrl:N,getMessageId:L,getNewOrExistingAudio:O,getNewOrExistingAudioWithRetry:Q,getNextPlayableUrl:R,onChangePlaybackRate:S,playbackRateLabel:B,setUseOutOfChatPlayback:I}},H=[J,E,K,C,T,M,N,L,O,Q,R,S,B],e[22]=J,e[23]=E,e[24]=C,e[25]=O,e[26]=Q,e[27]=B,e[28]=f,e[29]=H):(f=e[28],H=e[29]);o=d("Int64Hooks").useMemoInt64(f,H);e[30]!==o||e[31]!==a?(f=m.jsx(y.Provider,{value:o,children:a}),e[30]=o,e[31]=a,e[32]=f):f=e[32];return f}g.useMWPAudioPlaybackElement=a;g.useMWPAudioPlaybackElementWithRetry=e;g.useMWPAudioPlaybackRate=B;g.useMWPAudioOutOfChatPlayback=D;g.MWPAudioPlaybackContextProvider=F}),226);
__d("MWPAudioPlayerUtils",["fbt","$InternalEnum","MWLSThreadDisplayContext","MWPAudioPlaybackContext.react","cancelAnimationFrame","getErrorNameFromMediaErrorCode","gkx","promiseDone","react","requestAnimationFrameAcrossTransitions","useStable"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||(i=d("react")),k=i,l=k.createContext,m=k.useCallback,n=k.useContext,o=k.useEffect,p=k.useRef,q=k.useState,r=k.c,s=b("$InternalEnum").Mirrored(["PLAYER","RECORDER"]),t=l(s.PLAYER),u=c("gkx")("24145");function v(){var a=n(t);return u&&a===s.PLAYER}function a(a,b){if(b==null)return 0;b=b.getBoundingClientRect();var c=b.left;b=b.width;a=a.clientX-c;c=b>0&&a>0?a/b:0;return w(c,0,1)}function w(a,b,c){return Math.min(Math.max(b,a),c)}function e(a){var b=r(5),c=a.currentTime;a=a.duration;var d;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(d=h._("__JHASH__cCPjPb_WWZb__JHASH__"),b[0]=d):d=b[0];c=Math.floor((c=c)!=null?c:0);var e;b[1]===Symbol["for"]("react.memo_cache_sentinel")?(e={position:"absolute"},b[1]=e):e=b[1];b[2]!==a||b[3]!==c?(d=j.jsx("div",{"aria-label":d,"aria-valuemax":a,"aria-valuemin":0,"aria-valuenow":c,role:"slider",style:e,tabIndex:0}),b[2]=a,b[3]=c,b[4]=d):d=b[4];return d}function f(){var a=r(2),b=v();if(b){a[0]===Symbol["for"]("react.memo_cache_sentinel")?(b={marginLeft:12,marginRight:12},a[0]=b):b=a[0];return b}a[1]===Symbol["for"]("react.memo_cache_sentinel")?(b={marginLeft:6,marginRight:6},a[1]=b):b=a[1];return b}function x(a){return m(function(b){var c=a.current;if(c!=null){b.stopPropagation();return c.updateHighlight(0)}},[a])}function y(a,b,d,e,f,g){var h=r(13),i=f===void 0?!1:f,j=p();h[0]!==g||h[1]!==i||h[2]!==e||h[3]!==b||h[4]!==a?(f=function(){var d=function(a){var b=j.current;if(b!=null)return b.updateHighlight(a)};if(g){i?d(100):d(0);return}if(e){var f={contents:void 0},h,k=function e(g){var i;if(b.current!=null)i=b.current.currentTime/b.current.duration;else{var j=f.contents,k=0;j!=null?k=g-j:f.contents=g;i=k/(a*1e3)}j=Math.min(i*100,100);d(j);if(j<100){h=c("requestAnimationFrameAcrossTransitions")(e);return}};h=c("requestAnimationFrameAcrossTransitions")(k);return function(){h!=null&&c("cancelAnimationFrame")(h)}}if(b.current!=null){k=b.current.currentTime/b.current.duration;d(k*100)}},h[0]=g,h[1]=i,h[2]=e,h[3]=b,h[4]=a,h[5]=f):f=h[5];var k;h[6]!==a||h[7]!==e||h[8]!==g||h[9]!==b||h[10]!==i||h[11]!==d?(k=[a,e,g,j,b,i,d],h[6]=a,h[7]=e,h[8]=g,h[9]=b,h[10]=i,h[11]=d,h[12]=k):k=h[12];o(f,k);return j}var z=b("$InternalEnum").Mirrored(["ENDED","LOADING","NONE","PAUSED","PLAYING"]);function A(a,b,c,e,f,g,h,i){var j=v();a=d("MWPAudioPlaybackContext.react").useMWPAudioPlaybackElement(a,b,c,e,j);return C(a,j,f,g,h,i)}function B(a,b,c,e,f,g,h,i){var j=v();a=d("MWPAudioPlaybackContext.react").useMWPAudioPlaybackElementWithRetry(a,b,c,e,j);return C(a,j,f,g,h,i)}function C(a,b,d,e,f,g){var h=r(23),i;h[0]!==d?(i=function(){return d},h[0]=d,h[1]=i):i=h[1];var j=c("useStable")(i),k=p(a);i=q(z.NONE);var l=i[0],m=i[1];h[2]!==a?(i=function(){var b;return(b=a==null?void 0:a.currentTime)!=null?b:0},h[2]=a,h[3]=i):i=h[3];i=q(i);var n=i[0],s=i[1],t;h[4]!==a?(i=function(){if(a==null){m(z.NONE);return}a.ended&&m(z.ENDED);m(function(){return a.paused?z.PAUSED:z.PLAYING});s(a.currentTime);k.current=a},t=[a],h[4]=a,h[5]=i,h[6]=t):(i=h[5],t=h[6]);o(i,t);h[7]!==g||h[8]!==b?(i=function(){var a=k.current;g==null?void 0:g.addPoint("render-audio-player-controller",{bool:{has_audio:a!=null},"int":{audio_ready_state:a==null?void 0:a.readyState}});if(a==null)return;var d=function(a){a=a.currentTarget;a=a.error;var b=c("getErrorNameFromMediaErrorCode")(a==null?void 0:a.code);g==null?void 0:g.endFail("load-audio-error",{string:{audio_error_message:a==null?void 0:a.message,audio_error_name:b}})},e=function(){g==null?void 0:g.endSuccess()},f=function(){return m(z.PAUSED)},h=function(){return m(z.PLAYING)},i=function(){return m(z.LOADING)},j=function(){k.current!=null&&s(k.current.currentTime)},l=function(){k.current!=null&&(k.current.currentTime=0,s(0)),m(z.ENDED)},n=function(){g==null?void 0:g.addPoint("audio-duration-change",{"int":{audio_ready_state:a.readyState}})},o=function(){g==null?void 0:g.addPoint("loaded-metadata",{"int":{audio_ready_state:a.readyState}})},p=function(){g==null?void 0:g.addPoint("loaded-data",{"int":{audio_ready_state:a.readyState}})},q=function(){k.current=a,f(),g==null?void 0:g.addPoint("can-play",{"int":{audio_ready_state:a.readyState}}),c("gkx")("6429")||e()},r=function(){g==null?void 0:g.addPoint("can-play-through",{"int":{audio_ready_state:a.readyState}}),c("gkx")("6429")&&e()};a!=null&&a.readyState>=2&&e();a.addEventListener("loadstart",i);a.addEventListener("timeupdate",j);a.addEventListener("playing",h);a.addEventListener("pause",f);a.addEventListener("ended",l);a.addEventListener("error",d);a.addEventListener("durationchange",n);a.addEventListener("loadedmetadata",o);a.addEventListener("loadeddata",p);a.addEventListener("canplay",q);a.addEventListener("canplaythrough",r);return function(){a.removeEventListener("loadstart",i),a.removeEventListener("timeupdate",j),a.removeEventListener("playing",h),a.removeEventListener("pause",f),a.removeEventListener("ended",l),a.removeEventListener("error",d),a.removeEventListener("durationchange",n),a.removeEventListener("loadedmetadata",o),a.removeEventListener("loadeddata",p),a.removeEventListener("canplay",q),a.removeEventListener("canplaythrough",r),b||a.pause()}},h[7]=g,h[8]=b,h[9]=i):i=h[9];h[10]!==a||h[11]!==g||h[12]!==b?(t=[a,g,b],h[10]=a,h[11]=g,h[12]=b,h[13]=t):t=h[13];o(i,t);h[14]!==l||h[15]!==j?(i=function(){var a=k.current;if(a==null)return;switch(l){case z.NONE:case z.LOADING:return;case z.ENDED:case z.PAUSED:c("promiseDone")(a.play(),function(){return m(z.PLAYING)},j);return;case z.PLAYING:a.pause();m(z.PAUSED);return}},h[14]=l,h[15]=j,h[16]=i):i=h[16];t=i;h[17]===Symbol["for"]("react.memo_cache_sentinel")?(i=function(a){var b=k.current;if(b==null)return;b.currentTime=a;s(a)},h[17]=i):i=h[17];i=i;f=y(f,k,n,l===z.PLAYING,e,l===z.ENDED);h[18]!==l||h[19]!==n||h[20]!==t||h[21]!==f?(e=[l,n,k,t,f,i],h[18]=l,h[19]=n,h[20]=t,h[21]=f,h[22]=e):e=h[22];return e}function D(){var a=r(17),b=d("MWPAudioPlaybackContext.react").useMWPAudioOutOfChatPlayback(),e=b[0],f=b[1];b=b[2];var g;a[0]!==e?(g=function(){if(e==null)return z.NONE;return e.ended?z.ENDED:e.paused?z.PAUSED:z.PLAYING},a[0]=e,a[1]=g):g=a[1];g=q(g);var h=g[0],i=g[1];a[2]!==e?(g=function(){return e!=null?e.duration-e.currentTime:0},a[2]=e,a[3]=g):g=a[3];g=q(g);var j=g[0],k=g[1],l;a[4]!==e?(g=function(){if(e==null)return;var a=function(){return k(e.duration-e.currentTime)},b=function(){return i(z.LOADING)},d=function(){return i(z.ENDED)};e.addEventListener("timeupdate",a);e.addEventListener("loadstart",b);e.addEventListener("ended",d);c("promiseDone")(e.play(),function(){return i(z.PLAYING)});return function(){e.removeEventListener("timeupdate",a),e.removeEventListener("loadstart",b),e.removeEventListener("ended",d)}},l=[e],a[4]=e,a[5]=g,a[6]=l):(g=a[5],l=a[6]);o(g,l);a[7]!==e||a[8]!==h?(g=function(){if(e==null)return;switch(h){case z.NONE:case z.LOADING:return;case z.ENDED:case z.PAUSED:c("promiseDone")(e.play(),function(){return i(z.PLAYING)});return;case z.PLAYING:e.pause();i(z.PAUSED);return}},a[7]=e,a[8]=h,a[9]=g):g=a[9];l=g;g=h===z.PLAYING;var m=e!=null&&b!=null&&u,n;a[10]!==b||a[11]!==g||a[12]!==m||a[13]!==j||a[14]!==l||a[15]!==f?(n=[b,g,m,j,l,f],a[10]=b,a[11]=g,a[12]=m,a[13]=j,a[14]=l,a[15]=f,a[16]=n):n=a[16];return n}function E(a,b){var c=d("MWLSThreadDisplayContext").useMWLSThreadDisplayContext();return((a=a)!=null?a:c==="Inbox")?218:c==="ChatTab"&&b===!0?148:180}function F(a){var b=v();return b&&a===s.PLAYER?70:36}g.UseCase=s;g.UseCaseContext=t;g.isEnabled=u;g.useShowNewUX=v;g.getMousePos=a;g.ScreenReaderLabel=e;g.usePlaybackButtonContainerStyle=f;g.useResetHighlightProgress=x;g.useProgressLiveUpdate=y;g.State=z;g.useControlCenter=A;g.useControlCenterWithRetry=B;g.useOutOfChatControlCenter=D;g.useCalculatePlayerWidth=E;g.useCalculatePlayerHeight=F}),226);
__d("MWPAudioPlaybackIcon.react",["MWPAudioPlayerIcons.react","MWPAudioPlayerUtils","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||(h=d("react"))).c,j=h;function a(a){var b=i(4),c=a.disabled,e=a.hasEnded,f=a.isPaused,g=a.isPlaying;a=a.outgoing;var h=d("MWPAudioPlayerUtils").useShowNewUX();h=h?a?"var(--always-white)":"var(--progress-ring-neutral-foreground)":a?"var(--chat-outgoing-message-bubble-background-color)":void 0;if(g){b[0]!==h?(a=j.jsx(d("MWPAudioPlayerIcons.react").PauseIcon,{color:h}),b[0]=h,b[1]=a):a=b[1];return a}if(f||e||c){b[2]!==h?(g=j.jsx(d("MWPAudioPlayerIcons.react").PlayIcon,{color:h}),b[2]=h,b[3]=g):g=b[3];return g}return null}g["default"]=a}),98);
__d("MWPAudioPlayerSharedStyles",[],(function(a,b,c,d,e,f,g){"use strict";a={bar:{backgroundColor:"x14hiurz",borderTopStartRadius:"x1inr27j",borderTopEndRadius:"x1vcqv9c",borderBottomEndRadius:"xfrm7hi",borderBottomStartRadius:"xpbad92",boxShadow:"x49dmcg",height:"xn3w4p2",position:"x10l6tqk",top:"xwa60dl",transform:"x1cb1t30",width:"x51ohtg",zIndex:"x1vjfegm",$$css:!0},common:{alignItems:"x6s0dn4",alignSelf:"xkh2ocl",backgroundAttachment:"x1nr1p0w",borderTopStartRadius:"x1tlxs6b",borderTopEndRadius:"x1g8br2z",borderBottomEndRadius:"x1gn5b1j",borderBottomStartRadius:"x230xth",display:"x78zum5",flexGrow:"x1iyjqo2",justifyContent:"x1qughib",outline:"x1k4qllp",$$css:!0},commonIncoming:{backgroundColor:"x1xr0vuk",$$css:!0},commonOutgoing:{backgroundColor:"x11jlvup",$$css:!0},commonOutgoingReply:{backgroundImage:"xl54vp5",$$css:!0},commonReply:{outline:"x1ucz5p",$$css:!0},container:{alignItems:"x6s0dn4",display:"x78zum5",flexGrow:"x1iyjqo2",justifyContent:"x1qughib",overflowX:"x6ikm8r",overflowY:"x10wlt62",position:"x1n2onr6",$$css:!0},highlight:{height:"x5yr21d",start:"x17qophe",left:null,right:null,position:"x10l6tqk",top:"x13vifvy",width:"xh8yej3",$$css:!0},incomingWaveFormStyle:{fill:"x1f9y4dh",$$css:!0},mask:{height:"x5yr21d",position:"x10l6tqk",width:"xh8yej3",$$css:!0},outgoingWaveFormStyle:{fill:"xe3v8dz",$$css:!0},playbackButtonContainer:{marginStart:"x1mnrxsn",marginEnd:"x1w0mnb",marginLeft:null,marginRight:null,$$css:!0},pressable:{alignItems:"x6s0dn4",backgroundColor:"x14hiurz",borderTopStartRadius:"x14yjl9h",borderTopEndRadius:"xudhj91",borderBottomEndRadius:"x18nykt9",borderBottomStartRadius:"xww2gxu",display:"x78zum5",height:"xxk0z11",justifyContent:"xl56j7k",minWidth:"xnei2rj",$$css:!0},rightSideBottom:{backgroundColor:"x14hiurz",borderTopStartRadius:"xfj52jq",borderTopEndRadius:"xykzs3s",borderBottomEndRadius:"x17xv1ja",borderBottomStartRadius:"x1mvicbb",$$css:!0},rightSideImprove:{marginStart:"x16n37ib",marginEnd:"xq8finb",marginLeft:null,marginRight:null,width:"x1691je0",$$css:!0},rightSideMargin:{marginTop:"x1gslohp",$$css:!0},rightSideTop:{alignItems:"x6s0dn4",color:"x1a3ma36",display:"x78zum5",fontSize:"x1nxh6w3",fontWeight:"x1s688f",height:"xi0exxh",justifyContent:"xl56j7k",marginStart:"x1mnrxsn",marginEnd:"x1w0mnb",marginLeft:null,marginRight:null,position:"x1n2onr6",userSelect:"x87ps6o",width:"x1r9kitl",$$css:!0},scrubber:{alignItems:"x6s0dn4",display:"x78zum5",height:"x5yr21d",position:"x1n2onr6",width:"xh8yej3",zIndex:"x1vjfegm",$$css:!0},transparent:{height:"x5yr21d",overflowX:"x6ikm8r",overflowY:"x10wlt62",paddingTop:"xexx8yu",paddingEnd:"x4uap5",paddingBottom:"x18d9i69",paddingStart:"xkhd6sd",position:"x1n2onr6","::after_borderTopColor":"x14617ij","::after_borderEndColor":"x1b5s2of","::after_borderBottomColor":"xv84cap","::after_borderStartColor":"x15ngzmr","::after_borderTopStartRadius":"xwuuf8d","::after_borderTopEndRadius":"xpd6q6o","::after_borderBottomEndRadius":"x1n6g0fn","::after_borderBottomStartRadius":"xu4xob7","::after_borderTopStyle":"xynf4tj","::after_borderEndStyle":"xdspwft","::after_borderBottomStyle":"x1r9ni5o","::after_borderStartStyle":"x1d52zm6","::after_borderTopWidth":"x1gnji40","::after_borderEndWidth":"xymhjbi","::after_borderBottomWidth":"x1ekxc0f","::after_borderStartWidth":"x5arhyh","::after_bottom":"x14apmda","::after_content":"x1s928wv","::after_display":"xhkezso","::after_end":"xhyvd7x","::after_pointerEvents":"x2q1x1w","::after_position":"x1j6awrg","::after_start":"x1aneyt","::after_left":null,"::after_right":null,"::after_top":"xso615a",$$css:!0},transparentBar:{backgroundColor:"xjbqb8w",borderTopStartRadius:"x1inr27j",borderTopEndRadius:"x1vcqv9c",borderBottomEndRadius:"xfrm7hi",borderBottomStartRadius:"xpbad92",boxShadow:"x49dmcg",height:"xn3w4p2",position:"x10l6tqk",top:"xwa60dl",transform:"x1cb1t30",width:"x51ohtg",zIndex:"x1vjfegm",$$css:!0},waveform:{height:"xn3w4p2",position:"x1n2onr6",width:"xh8yej3",$$css:!0}};g.styles=a}),98);
__d("MWPAudioPlayerButtons.react",["MWPAudioPlaybackContext.react","MWPAudioPlayerSharedStyles","MWPAudioPlayerUtils","MWXPressable.react","react","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=(i||(i=d("react"))).c,k=i;function a(a){var b=j(9);a=a.outgoing;var e=d("MWPAudioPlayerUtils").useShowNewUX(),f=d("MWPAudioPlaybackContext.react").useMWPAudioPlaybackRate(),g=f[0];f=f[1];if(!e)return null;e=a?"var(--always-white)":"var(--progress-ring-neutral-foreground)";b[0]===Symbol["for"]("react.memo_cache_sentinel")?(a=(h||(h=c("stylex")))(d("MWPAudioPlayerSharedStyles").styles.rightSideTop,d("MWPAudioPlayerSharedStyles").styles.rightSideMargin,d("MWPAudioPlayerSharedStyles").styles.rightSideBottom,d("MWPAudioPlayerSharedStyles").styles.rightSideImprove),b[0]=a):a=b[0];var i;b[1]!==e?(i={backgroundColor:"var(--placeholder-text-on-media)",borderRadius:10,color:e},b[1]=e,b[2]=i):i=b[2];b[3]!==i||b[4]!==g?(e=k.jsx("div",{className:a,style:i,children:g}),b[3]=i,b[4]=g,b[5]=e):e=b[5];b[6]!==f||b[7]!==e?(a=k.jsx(c("MWXPressable.react"),{onPress:f,overlayDisabled:!0,children:e}),b[6]=f,b[7]=e,b[8]=a):a=b[8];return a}function b(a){var b=j(9),e=a.disabled,f=a.icon,g=a.label;a=a.onPress;var h=d("MWPAudioPlayerUtils").useShowNewUX(),i;b[0]!==h?(i=h?{backgroundColor:"transparent"}:{},b[0]=h,b[1]=i):i=b[1];i=i;var l;b[2]!==g||b[3]!==e||b[4]!==a||b[5]!==h||b[6]!==i||b[7]!==f?(l=k.jsx(c("MWXPressable.react"),{"aria-label":g,disabled:e,onPress:a,overlayDisabled:h,overlayRadius:"50%",style:i,testid:void 0,xstyle:d("MWPAudioPlayerSharedStyles").styles.pressable,children:f}),b[2]=g,b[3]=e,b[4]=a,b[5]=h,b[6]=i,b[7]=f,b[8]=l):l=b[8];return l}g.PlaybackRateButton=a;g.AudioPlayerPlaybackButton=b}),98);
__d("MWPAudioPlayerLabels",["fbt"],(function(a,b,c,d,e,f,g,h){"use strict";a=h._("__JHASH__KhMMxBdqg3x__JHASH__");b=h._("__JHASH__2rBFW-RfRDV__JHASH__");c=h._("__JHASH__IubwmxlTNhe__JHASH__");g.playLabel=a;g.stopLabel=b;g.pauseLabel=c}),226);
__d("MWPAudioPlaybackButton.react",["fbt","MWPAudioPlaybackIcon.react","MWPAudioPlayerButtons.react","MWPAudioPlayerLabels","MWPAudioPlayerSharedStyles","MWPAudioPlayerUtils","MWXCircleButton.react","MWXIconExclamationMarkCircle","MWXIconRefreshAlt","MWXIconStrict.react","MWXSpinner.react","react","stylex"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=(j||(j=d("react"))).c,l=j;function a(a){var b=k(18),e=a.isError,f=a.isLoading,g=a.isRetryableError,j=a.onPress,m=a.scrubberRef,n=a.disabled,o=a.hasEnded,p=a.isPaused,q=a.isPlaying;a=a.outgoing;var r=d("MWPAudioPlayerUtils").usePlaybackButtonContainerStyle();m=d("MWPAudioPlayerUtils").useResetHighlightProgress(m);var s=q||p;if(f){b[0]===Symbol["for"]("react.memo_cache_sentinel")?(f=(i||(i=c("stylex")))(d("MWPAudioPlayerSharedStyles").styles.pressable),b[0]=f):f=b[0];var t=s?m:void 0,u;b[1]===Symbol["for"]("react.memo_cache_sentinel")?(u=l.jsx(c("MWXSpinner.react"),{color:"disabled",size:16}),b[1]=u):u=b[1];b[2]!==t||b[3]!==r?(f=l.jsx("div",{className:f,onMouseMove:t,style:r,children:u}),b[2]=t,b[3]=r,b[4]=f):f=b[4];return f}u=s?m:void 0;b[5]!==e||b[6]!==n||b[7]!==o||b[8]!==p||b[9]!==q||b[10]!==a||b[11]!==j||b[12]!==g?(t=e!==!0?l.jsx(d("MWPAudioPlayerButtons.react").AudioPlayerPlaybackButton,{disabled:n,icon:l.jsx(c("MWPAudioPlaybackIcon.react"),{disabled:n,hasEnded:o,isPaused:p,isPlaying:q,outgoing:a}),label:q?d("MWPAudioPlayerLabels").pauseLabel:d("MWPAudioPlayerLabels").playLabel,onPress:j}):g===!0?l.jsx(c("MWXCircleButton.react"),{color:"black",icon:c("MWXIconRefreshAlt"),label:h._("__JHASH__BGxC_0TtXwE__JHASH__"),onPress:j,size:40,type:"normal"}):l.jsx("div",{className:"x6s0dn4 xwcfey6 x14yjl9h xudhj91 x18nykt9 xww2gxu x14ctfv x78zum5 x1vqgdyp xl56j7k x100vrsf",children:l.jsx(c("MWXIconStrict.react"),{color:"black",icon:c("MWXIconExclamationMarkCircle"),size:20})}),b[5]=e,b[6]=n,b[7]=o,b[8]=p,b[9]=q,b[10]=a,b[11]=j,b[12]=g,b[13]=t):t=b[13];b[14]!==u||b[15]!==r||b[16]!==t?(f=l.jsx("div",{onMouseMove:u,style:r,children:t}),b[14]=u,b[15]=r,b[16]=t,b[17]=f):f=b[17];return f}g["default"]=a}),226);
__d("MWPAudioPlayerContainer.react",["MWPAudioPlayerSharedStyles","MWPAudioPlayerUtils","react","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||(i=d("react"));b=i;var k=b.useEffect,l=b.useRef;function a(a){var b=a.audioEl,e=a.children,f=a.hasScrubber,g=a.mediaRenderQpl,i=a.scrubberRef,m=a.style,n=a.testid,o=a.useCase,p=d("MWPAudioPlayerUtils").useShowNewUX(),q=l();n=function(a){var c=b.current,e=q.current;c!=null&&e!=null&&Number.isFinite(c.duration)&&(c.currentTime=d("MWPAudioPlayerUtils").getMousePos(a,e)*c.duration)};a=function(a){if(q.current!=null&&i.current!=null)return i.current.updateHighlight(d("MWPAudioPlayerUtils").getMousePos(a,q.current)*100)};var r=function(){if(i.current!=null)return i.current.updateHighlight(0)},s=d("MWPAudioPlayerUtils").useCalculatePlayerHeight(o);s=babelHelpers["extends"]({cursor:f?"pointer":"default",height:s},m);m=f&&!p;k(function(){g==null?void 0:g.addPoint("render-audio-player-container",{bool:{show_new_ux:p},string:{use_case:o===d("MWPAudioPlayerUtils").UseCase.PLAYER?"Player":"Recorder"}})},[g,p,o]);return j.jsx(d("MWPAudioPlayerUtils").UseCaseContext.Provider,{value:o,children:j.jsx("div",{className:(h||(h=c("stylex")))(d("MWPAudioPlayerSharedStyles").styles.container),"data-testid":void 0,onClick:m?n:void 0,onMouseLeave:f?r:void 0,onMouseMove:m?a:void 0,ref:q,style:s,children:e})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWPAudioPlayerScrubberBar.react",["fbt","MWPAudioPlayerSharedStyles","react","stylex"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=(j||(j=d("react"))).c,l=j;b=l.forwardRef(a);e=b;function a(a,b){var e=k(11),f=a.xPosition,g=a.currentTime;a=a.duration;var j;e[0]===Symbol["for"]("react.memo_cache_sentinel")?(j=h._("__JHASH__cCPjPb_WWZb__JHASH__"),e[0]=j):j=e[0];var m=g===0?d("MWPAudioPlayerSharedStyles").styles.transparentBar:d("MWPAudioPlayerSharedStyles").styles.bar,n;e[1]!==m?(n=(i||(i=c("stylex")))(m),e[1]=m,e[2]=n):n=e[2];m=f.toFixed(2)+"%";e[3]!==m?(f={left:m},e[3]=m,e[4]=f):f=e[4];e[5]!==a||e[6]!==g||e[7]!==n||e[8]!==b||e[9]!==f?(m=l.jsx("div",{"aria-label":j,"aria-valuemax":a,"aria-valuemin":0,"aria-valuenow":g,className:n,ref:b,role:"slider",style:f}),e[5]=a,e[6]=g,e[7]=n,e[8]=b,e[9]=f,e[10]=m):m=e[10];return m}f=e;g["default"]=f}),226);
__d("MWPAudioPlayerWaveform.react",["MWChatRecorderUtils","MWPAudioPlayerSharedStyles","react","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||(i=d("react"));b=i;var k=b.useLayoutEffect,l=b.useMemo,m=b.useRef,n=b.useState,o=b.c,p=Float32Array.of(.5,.1875,.375,.75,.5,1,1,.75,.25,.375,.75,1,1,.5,.75,1,.75,.75,.5,.25,.25,.375,.5,1,.75,.5,.5,.75,.25,.5,.75,1,.5,.25,.75),q=3,r=3,s=44,t=4;function u(a,b){var c=l(function(){return a==null||a===""?p:Float32Array.from(a.split(",").map(Number))},[a]);return l(function(){if(b<=0||c.length===0)return[];var a=Math.floor(b/(r*2));a=d("MWChatRecorderUtils").linearConversion(d("MWChatRecorderUtils").computeWaveformAmplitudes(c,a),t,s);return a.map(function(a,b){a=Math.ceil(a);var c=q,d=r;b=b*r*2;var e="calc(50% - "+a/2+"px)";return{height:a,rx:c,width:d,x:b,y:e}})},[b,c])}function v(a){var b=o(22),e,f,g,i,l,p;b[0]!==a?(e=a.disabled,f=a.hasEnded,g=a.isPlaying,i=a.outgoing,l=a.scrubberLeft,p=babelHelpers.objectWithoutPropertiesLoose(a,["disabled","hasEnded","isPlaying","outgoing","scrubberLeft"]),b[0]=a,b[1]=e,b[2]=f,b[3]=g,b[4]=i,b[5]=l,b[6]=p):(e=b[1],f=b[2],g=b[3],i=b[4],l=b[5],p=b[6]);var q=e===void 0?!1:e,r=f===void 0?!1:f,s=g===void 0?!1:g,t=m(null);a=n("auto");e=a[0];var u=a[1];b[7]!==q||b[8]!==r||b[9]!==s||b[10]!==i||b[11]!==l?(f=function(){var a=t.current;u(function(){if(q)return"var(--disabled-button-text)";var b="auto";(r||s)&&(b=i===!0?"var(--non-media-pressed-on-dark)":"var(--secondary-button-background-on-dark)");if(a==null)return b;var c=a.getBoundingClientRect();c=c.left;return l>c?i===!0?"var(--always-white)":"var(--progress-ring-neutral-foreground)":b})},g=[q,r,s,i,l],b[7]=q,b[8]=r,b[9]=s,b[10]=i,b[11]=l,b[12]=f,b[13]=g):(f=b[12],g=b[13]);k(f,g);a=i===!0?d("MWPAudioPlayerSharedStyles").styles.outgoingWaveFormStyle:d("MWPAudioPlayerSharedStyles").styles.incomingWaveFormStyle;b[14]!==a?(f=(h||(h=c("stylex")))(a),b[14]=a,b[15]=f):f=b[15];g=f;b[16]!==e?(a={fill:e},b[16]=e,b[17]=a):a=b[17];b[18]!==p||b[19]!==g||b[20]!==a?(f=j.jsx("rect",babelHelpers["extends"]({},p,{className:g,ref:t,style:a})),b[18]=p,b[19]=g,b[20]=a,b[21]=f):f=b[21];return f}function a(a){var b=o(20),e=a.disabled,f=a.hasEnded,g=a.isListened,i=a.isPlaying,l=a.outgoing,p=a.scrubberLeft;a=a.waveformData;var q=m(null),r=n(0),s=r[0],t=r[1],w=f===!0||g===!0;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(r=function(){if(q.current!=null){var a=q.current.getBoundingClientRect();t(a.width)}},f=[],b[0]=r,b[1]=f):(r=b[0],f=b[1]);k(r,f);g=u(a,s);if(g.length===0){b[2]===Symbol["for"]("react.memo_cache_sentinel")?(r=j.jsx("div",{className:(h||(h=c("stylex")))(d("MWPAudioPlayerSharedStyles").styles.waveform),ref:q}),b[2]=r):r=b[2];return r}b[3]===Symbol["for"]("react.memo_cache_sentinel")?(f=(h||(h=c("stylex")))(d("MWPAudioPlayerSharedStyles").styles.waveform),b[3]=f):f=b[3];b[4]===Symbol["for"]("react.memo_cache_sentinel")?(a=(h||(h=c("stylex")))(d("MWPAudioPlayerSharedStyles").styles.mask),b[4]=a):a=b[4];if(b[5]!==e||b[6]!==w||b[7]!==i||b[8]!==l||b[9]!==p||b[10]!==g){b[12]!==e||b[13]!==w||b[14]!==i||b[15]!==l||b[16]!==p?(s=function(a,b){return j.createElement(v,babelHelpers["extends"]({},a,{disabled:e,hasEnded:w,isPlaying:i,key:b,outgoing:l,scrubberLeft:p}))},b[12]=e,b[13]=w,b[14]=i,b[15]=l,b[16]=p,b[17]=s):s=b[17];r=g.map(s);b[5]=e;b[6]=w;b[7]=i;b[8]=l;b[9]=p;b[10]=g;b[11]=r}else r=b[11];b[18]!==r?(s=j.jsx("div",{className:f,ref:q,children:j.jsx("svg",{"aria-hidden":!0,className:a,children:r})}),b[18]=r,b[19]=s):s=b[19];return s}g["default"]=a}),98);
__d("MWPAudioPlayerHighlight.react",["fbt","MWPAudioPlayerScrubberBar.react","MWPAudioPlayerSharedStyles","MWPAudioPlayerUtils","MWPAudioPlayerWaveform.react","react","stylex"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=j||(j=d("react"));e=j;var l=e.useImperativeHandle,m=e.useLayoutEffect,n=e.useRef,o=e.useState,p=e.c,q=k.forwardRef(a);function a(a,b){var e=a.audioEl,f=a.children,g=a.disabled,j=a.duration,p=a.hasEnded,q=a.isListened,s=a.isPlaying;s=s===void 0?!0:s;var t=a.onUpdateScrubber,u=a.outgoing,v=a.waveformData;a=a.xstyle;var w=d("MWPAudioPlayerUtils").useShowNewUX(),x=n(),y=n(),z=o(0),A=z[0],B=z[1];z=o(0);var C=z[0],D=z[1];m(function(){if((e==null?void 0:e.current)!=null&&y.current!=null&&j!=null&&j>0){var a=e.current.currentTime,b=y.current;D(r(b,a/j*100))}},[e,j]);l(b,function(){return{updateHighlight:function(a){var b=x.current,c=y.current;if(b==null)return;if(w){if(c!=null){c=r(c,a);D(c)}}else b.style.transform="translateX("+(a-100).toFixed(1)+"%)"}}},[w]);z=function(a){if(x.current!=null){var b,c;b=(b=x.current)==null?void 0:b.getBoundingClientRect();b=(b=b==null?void 0:b.left)!=null?b:0;b=a.clientX-b;c=(c=(c=x.current)==null?void 0:c.offsetWidth)!=null?c:0;B(b/c*100);if(j!=null&&j>0){b=d("MWPAudioPlayerUtils").getMousePos(a,x.current)*j;if(t!=null&&y.current!=null){c=y.current;t(b);D(r(c,b/j*100))}}}};b=Math.floor((b=e==null?void 0:(b=e.current)==null?void 0:b.currentTime)!=null?b:0);if(w){return k.jsxs(k.Fragment,{children:[f,k.jsxs("div",{className:(i||(i=c("stylex")))(d("MWPAudioPlayerSharedStyles").styles.highlight,d("MWPAudioPlayerSharedStyles").styles.scrubber),onMouseDownCapture:z,ref:x,children:[k.jsx(c("MWPAudioPlayerScrubberBar.react"),{currentTime:b,duration:(z=e==null?void 0:(f=e.current)==null?void 0:f.duration)!=null?z:0,ref:y,xPosition:A}),k.jsx(c("MWPAudioPlayerWaveform.react"),{disabled:g,hasEnded:p,isListened:q,isPlaying:s,outgoing:u,scrubberLeft:C,waveformData:v})]})]})}return k.jsx("div",{"aria-label":h._("__JHASH__cCPjPb_WWZb__JHASH__"),"aria-valuemax":(z=e==null?void 0:(f=e.current)==null?void 0:f.duration)!=null?z:0,"aria-valuemin":0,"aria-valuenow":b,className:(i||(i=c("stylex")))(d("MWPAudioPlayerSharedStyles").styles.highlight,a),ref:x,role:"slider"})}a.displayName=a.name+" [from "+f.id+"]";function r(a,b){a.style.left=b.toFixed(2)+"%";a.style.transition="transform 1s ease-out";b=a.getBoundingClientRect();a=b.left;return a}function b(a){var b=p(17),c=a.disabled,e=a.hasScrubber,f=a.progressHighlightRef,g=a.scrubberRef,h=a.audioEl,i=a.children,j=a.currentTime,l=a.duration,m=a.hasEnded,n=a.isListened,o=a.isPlaying,r=a.onUpdateScrubber,s=a.outgoing,t=a.waveformData;a=a.xstyle;o=o===void 0?!0:o;var u=d("MWPAudioPlayerUtils").useShowNewUX(),v;b[0]!==u||b[1]!==h||b[2]!==c||b[3]!==l||b[4]!==m||b[5]!==n||b[6]!==o||b[7]!==r||b[8]!==s||b[9]!==f||b[10]!==t||b[11]!==a||b[12]!==i||b[13]!==e||b[14]!==j||b[15]!==g?(v=u?k.jsx(q,{audioEl:h,disabled:c,duration:l,hasEnded:m,isListened:n,isPlaying:o,onUpdateScrubber:r,outgoing:s,ref:f,waveformData:t,xstyle:a,children:i}):k.jsxs(k.Fragment,{children:[k.jsx(q,{ref:f,xstyle:a}),e?k.jsx(d("MWPAudioPlayerUtils").ScreenReaderLabel,{currentTime:j,duration:l}):null,k.jsx(q,{ref:g,xstyle:a}),i]}),b[0]=u,b[1]=h,b[2]=c,b[3]=l,b[4]=m,b[5]=n,b[6]=o,b[7]=r,b[8]=s,b[9]=f,b[10]=t,b[11]=a,b[12]=i,b[13]=e,b[14]=j,b[15]=g,b[16]=v):v=b[16];return v}g.MWPAudioPlayerHighlightV1=q;g.MWPAudioPlayerHighlightV2=b}),226);
__d("MWPAudioPlayerKeyCommands.react",["fbt","CometComponentWithKeyCommands.react","CometKeys","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||(i=d("react"));b=i;var k=b.useCallback,l=b.useMemo;function m(a){if(a>30)return 5;else if(a>10)return 3;else if(a>5)return 2;else if(a>2)return 1;else return.5}function a(a){var b=a.audioEl;a=a.children;var d=k(function(){if(b.current==null)return;var a=b.current.duration;b.current.currentTime-=m(a)},[b]),e=k(function(){if(b.current==null)return;var a=b.current.duration;b.current.currentTime+=m(a)},[b]),f=k(function(){b.current!=null&&(b.current.currentTime=0)},[b]),g=k(function(){if(b.current==null)return;var a=b.current.duration;b.current.currentTime=a},[b]),i=l(function(){var a;return[{command:{key:(a=c("CometKeys")).UP},description:h._("__JHASH__0poPtptaPoq__JHASH__"),handler:e},{command:{key:a.DOWN},description:h._("__JHASH__rYkfY7o-Wnk__JHASH__"),handler:d},{command:{key:a.LEFT},description:h._("__JHASH__1Lid3qpGe7D__JHASH__"),handler:d},{command:{key:a.RIGHT},description:h._("__JHASH__SFoCE2wpUn9__JHASH__"),handler:e},{command:{key:a.HOME},description:h._("__JHASH__d6P7X8Ve8io__JHASH__"),handler:f},{command:{key:a.END},description:h._("__JHASH__QXmXaNdkPYM__JHASH__"),handler:g}]},[d,e,f,g]);return j.jsx(c("CometComponentWithKeyCommands.react"),{commandConfigs:i,children:a})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("MWPAudioPlayerTimer.react",["MWPAudioPlayerSharedStyles","MWPAudioPlayerUtils","formatDurationSeconds","react","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=(i||(i=d("react"))).c,k=i;function a(a){var b=j(13),e=a.disabled,f=a.outgoing;a=a.time;e=e===void 0?!1:e;f=f===void 0?!0:f;var g=d("MWPAudioPlayerUtils").useShowNewUX(),i;b[0]!==g||b[1]!==f||b[2]!==e?(i=g?{color:f?e?"var(--disabled-button-text)":"var(--always-white)":e?"var(--disabled-button-text)":"var(--progress-ring-neutral-foreground)"}:{color:f?"var(--chat-composer-button-color)":"var(--always-black)",cursor:"pointer"},b[0]=g,b[1]=f,b[2]=e,b[3]=i):i=b[3];f=i;e=!g&&d("MWPAudioPlayerSharedStyles").styles.rightSideBottom;i=g&&d("MWPAudioPlayerSharedStyles").styles.rightSideImprove;b[4]!==e||b[5]!==i?(g=(h||(h=c("stylex")))(d("MWPAudioPlayerSharedStyles").styles.rightSideTop,e,i),b[4]=e,b[5]=i,b[6]=g):g=b[6];b[7]!==a?(e=c("formatDurationSeconds")(a),b[7]=a,b[8]=e):e=b[8];b[9]!==g||b[10]!==f||b[11]!==e?(i=k.jsx("div",{className:g,"data-testid":void 0,role:"timer",style:f,children:e}),b[9]=g,b[10]=f,b[11]=e,b[12]=i):i=b[12];return i}g["default"]=a}),98);
__d("MWPMessageParsingUtils",["I64","LSBitFlag","LSIntEnum","LSMessageReplySourceTypeV2","gkx","isStringNullOrEmpty"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=280,k=3e5;function l(a){return!c("isStringNullOrEmpty")(a.text)}function m(a){a=a.replySourceTypeV2;return a==null?!1:!(h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessageReplySourceTypeV2").FORWARD))}function n(a){a=a.replySourceTypeV2;return a==null?!1:(h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessageReplySourceTypeV2").FORWARD))}function o(a){return((a=a.text)!=null?a:"").length>j}var p=[128,256].concat(c("gkx")("4809")?[65536,131072,262144,524288,1048576,2097152,4194304,8388608,16777216,33554432,67108864]:[],[4096,512]).filter(Boolean);function q(a){return a.isAdminMessage||p.some(function(b){return d("LSBitFlag").has((i||(i=d("LSIntEnum"))).ofNumber(b),a.displayedContentTypes)})||o(a)}function r(a,b){if(b===void 0)return!0;var c=Math.abs((h||(h=d("I64"))).to_float(a.timestampMs)-h.to_float(b.timestampMs))>k,e=n(a),f=h.equal(a.senderId,b.senderId);if(b.isUnsent||a.isUnsent||b.isExpired||a.isExpired||m(a)||!f||c||e||q(a))return!0;else return q(b)}function s(a,b){return b==null||r(a,b)}function t(a,b){return b==null||r(b,a)}function a(a,b,c){return c==="below"?l(a)?!0:!s(a,b):!1}function b(a,b,c){if(c==="below")return!t(a,b);else if(t(a,b))return!1;else return l(a)}e={shouldConnectBottom:b,shouldConnectTop:a};g.hasText=l;g.isReplyToSomething=m;g.isForwarded=n;g.isLongText=o;g.shouldBeStandalone=q;g.isInDifferentGroup=r;g.isStartOfGroup=s;g.isEndOfGroup=t;g.MessageWithAttachments=e}),98);
__d("MWReactionUtils",["LSMessagingThreadTypeUtil","MWCMThreadTypes.react","ReQL","ReQLSuspense","useIsMultiReactionEnabled","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b){var e,g=(h||(h=c("useReStore")))(),i=d("useIsMultiReactionEnabled").useIsMultiReactEnabled(b);e=(e=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableAscending(g.tables.threads,["threadSubtype","threadType"]).getKeyRange(b)},[g,b],f.id+":30"))!=null?e:{};var j=e.threadSubtype;e=e.threadType;if(!(e!=null&&d("LSMessagingThreadTypeUtil").isDiscoverableChannel(e))&&!(e!=null&&d("MWCMThreadTypes.react").isBroadcastThread(e))&&!(j!=null&&d("MWCMThreadTypes.react").isIGBroadcastChannelThread(j)))return;if(i)return;a.sort(function(a,b){return a.count===b.count&&a.reactionLiteral!=null&&b.reactionLiteral!=null?a.reactionLiteral.localeCompare(b.reactionLiteral):b.count-a.count})}g.useSortReactionsForBroadcastChat=a}),98);
__d("useIsReactionDialogEnabled",["LSMessagingThreadTypeUtil","LSThreadBitOffset","MWLSThread"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return(a=d("MWLSThread").useThread(a,h))!=null?a:!1}function h(a){return d("LSThreadBitOffset").has(184,a)||d("LSMessagingThreadTypeUtil").isArmadilloSecure(a.threadType)}g["default"]=a}),98);
__d("MWPMessageReactions.react",["fbt","EmojiRenderer","I64","JSResourceForInteraction","LSFactory","LSIssueReactionsV2DetailsUsersListFetchStoredProcedure","LSMessagingThreadTypeUtil","LSPlatformWaitForTaskCompletion","MWChatReactionsUtils","MWLSThread","MWMultiReactConstants","MWReactionUtils","MWV2MessageRowIsRowFocusedContext.react","MWXPressable.react","ReQL","ReQLSuspense","emptyFunction","gkx","intlList","promiseDone","react","useIsMultiReactionEnabled","useIsReactionDialogEnabled","useIsReactionsV2Enabled","useMWXLazyDialog","useReStore"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l=k||(k=d("react")),m=k,n=m.useCallback,o=m.useContext,p=m.useDeferredValue,q=m.useMemo,r=m.useRef,s=m.useState,t=m.c,u=c("gkx")("24166")?d("MWChatReactionsUtils").heartType2:d("MWChatReactionsUtils").heartType1;function a(a){var b=t(4),e=(i||(i=c("useReStore")))(),g,h;b[0]!==a||b[1]!==e.tables.reactions?(g=function(){if(a==null)return d("ReQL").empty();var b=a.messageId,c=a.threadKey;return d("ReQL").fromTableAscending(e.tables.reactions).getKeyRange(c,b).map(function(a){return d("MWChatReactionsUtils").isHeart(a.reaction)?{actorId:a.actorId,authorityLevel:a.authorityLevel,messageId:a.messageId,reaction:u,threadKey:a.threadKey,timestampMs:a.timestampMs}:a})},h=[a,e.tables.reactions],b[0]=a,b[1]=e.tables.reactions,b[2]=g,b[3]=h):(g=b[2],h=b[3]);b=p(d("ReQLSuspense").useArray(g,h,f.id+":64"));return b}function b(a){var b=t(8),e=(i||(i=c("useReStore")))(),g=a.messageId,h=a.threadKey;b[0]!==e.tables.reactions_v2||b[1]!==h||b[2]!==g?(a=function(){return d("ReQL").fromTableAscending(e.tables.reactions_v2).getKeyRange(h,g)},b[0]=e.tables.reactions_v2,b[1]=h,b[2]=g,b[3]=a):a=b[3];var j;b[4]!==e||b[5]!==h||b[6]!==g?(j=[e,h,g],b[4]=e,b[5]=h,b[6]=g,b[7]=j):j=b[7];b=d("ReQLSuspense").useArray(a,j,f.id+":91");return b}function e(a){var b=t(8),e=(i||(i=c("useReStore")))(),g=a.messageId,h=a.threadKey;b[0]!==e.tables.reactions_v2||b[1]!==h||b[2]!==g?(a=function(){return d("ReQL").fromTableAscending(e.tables.reactions_v2).getKeyRange(h,g).filter(function(a){return(j||(j=d("I64"))).gt(a.count,j.zero)})},b[0]=e.tables.reactions_v2,b[1]=h,b[2]=g,b[3]=a):a=b[3];var k;b[4]!==e||b[5]!==h||b[6]!==g?(k=[e,h,g],b[4]=e,b[5]=h,b[6]=g,b[7]=k):k=b[7];b=d("ReQLSuspense").useArray(a,k,f.id+":105");return b}function v(a,b){a=a!=null?c("intlList")(a.map(function(a){return a.join("")}),c("intlList").CONJUNCTIONS.AND,c("intlList").DELIMITERS.COMMA):"";return h._("__JHASH__tSgM5wXgT0G__JHASH__",[h._plural(b,"number"),h._param("the comma separated list of emojis used to react on this message",a)])}function w(a){return a.map(function(a,b){b=d("EmojiRenderer").parse(a).map(function(a){return a.emoji});return b.length!==1?[""]:b[0]}).filter(function(a){return a.join("")!==""})}function x(a){var b=a.children,e=a.dialogResource,g=a.message,h=a.onPress;a.outgoing;var k=a.reactions,m=a.reactionsV2;a=a.shouldUseVariant16ForReactionsV2;var p=a===void 0?!1:a,t=g.messageId,u=g.threadKey;a=o(d("MWV2MessageRowIsRowFocusedContext.react").context);var x=a.setFocused,y=a.setIsDialogOpened,z=(i||(i=c("useReStore")))();a=s(!1);var A=a[0],B=a[1];a=function(){B(function(a){return!a})};var C=d("useIsReactionsV2Enabled").useIsReactionsV2Enabled(u),D=d("useIsMultiReactionEnabled").useIsMultiReactEnabled(u),E=d("MWLSThread").useThread(u,function(a){return d("LSMessagingThreadTypeUtil").isDiscoverableChannel(a.threadType)}),F=D?d("MWMultiReactConstants").CM_MAX_REACTION_EMOJIS_ALLOWED:3,G=c("useIsReactionDialogEnabled")(u),H=r(new Map()),I=n(function(){C&&c("promiseDone")(c("LSPlatformWaitForTaskCompletion")(z,function(a){return c("LSIssueReactionsV2DetailsUsersListFetchStoredProcedure")(c("LSFactory")(a),{messageId:g.messageId,threadId:u})},"issueReactionsV2DetailsUsersListFetch").then(function(){return H.current.forEach(function(a){return a()})}))},[z,C,g.messageId,u]),J=d("ReQLSuspense").useArray(function(){return d("ReQL").fromTableAscending(z.tables.reactions_v2).getKeyRange(u,t).filter(function(a){return(j||(j=d("I64"))).gt(a.count,j.zero)}).map(function(a){var b=d("ReQLSuspense").first(d("ReQL").fromTableAscending(z.tables.reaction_v2_types).getKeyRange(a.reactionFbid),f.id+":224");b=p?b==null?void 0:b.reactionLiteralVariant16:b==null?void 0:b.reactionLiteral;return babelHelpers["extends"]({},a,{count:(j||(j=d("I64"))).to_int32(a.count),reactionLiteral:b})})},[z,u,t,p],f.id+":218");d("MWReactionUtils").useSortReactionsForBroadcastChat(J,u);var K=Array.from(new Set(J.map(function(a){return(a=a.reactionLiteral)!=null?a:""})));E=D&&E===!0?K:K.slice(0,F);K=m!=null&&C?w(E):w(Array.from(new Set(k.map(function(a){a=a.reaction;return a}))).slice(0,F));E=m!=null&&C?(j||(j=d("I64"))).to_int32(J.reduce(function(a,b){return(j||(j=d("I64"))).add(a,j.of_int32(b.count))},(j||(j=d("I64"))).zero)):k.length;F=v(K,E);m=r(null);J=q(function(){return e!=null?e:C?c("JSResourceForInteraction")("MWBroadcastChatReactionsDialog.react").__setRef("MWPMessageReactions.react"):c("JSResourceForInteraction")("MWV2ChatReactionsDialog.react").__setRef("MWPMessageReactions.react")},[e,C]);var L=q(function(){return{message:g,onLoadComplete:function(a){H.current.set(a,a);return function(){H.current["delete"](a)}},thread:{threadKey:u}}},[g,u]),M=n(function(){y(function(){return!1}),x(function(){return!0})},[x,y]);J=c("useMWXLazyDialog")(J);var N=J[0],O=n(function(a){y(function(){return!0}),N(babelHelpers["extends"]({},L,{initialTab:a}),M),h==null?void 0:h(),I()},[L,M,h,y,N,I]);J={eventName:"open_message_reactions_dialog",threadKey:u};return D||!G?b(K,E,k,g,u,O,A,a):l.jsx(c("MWXPressable.react"),{"aria-label":F,loggingEvent:J,onPress:function(){return O()},overlayDisabled:!0,ref:m,children:b(K,E,k,g,u,O,!1,c("emptyFunction"))})}x.displayName=x.name+" [from "+f.id+"]";g.useReactions=a;g.useReactionsV2=b;g.useNonZeroCountReactionsV2=e;g.MWPMessageReactions=x}),226);
__d("isMWEditedMessage",["I64"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){var b=a.editCount!=null&&(h||(h=d("I64"))).gt(a.editCount,(h||(h=d("I64"))).zero);return b&&!a.isUnsent}g["default"]=a}),98);
__d("MWPBaseMessageContent.react",["I64","LSReplyMessageAttachmentType","MAWIsFBXMA","MAWIsReceiverFetchXmaInLoadingState","MWAttachmentContext","MWPMessageHasXMA","MWPMessageListColumn.react","MWPMessageParsingUtils","MWPMessageReactions.react","MWPThreadCapabilitiesContext","gkx","isMWBumpMessage","isMWEditedMessage","mwpMessageHasAttachment","mwpMessageIsReply","react","useXMAPreviewsDisabledSetting","xmaLayouts"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=h||(h=d("react"));b=h;var k=b.useContext,l=b.useEffect;function a(a){var b=a.attachmentRenderPosition,e=a.isEmojiOnly,f=a.isFirstMessageInGroup,g=a.isLastMessageInGroup,h=a.isMessagePinned,m=a.isNextMessagePinned,n=a.isSearchPluginAttachment,o=a.isSecureMessage,p=a.mediaRenderQpl,q=a.message,r=a.nextMessage,s=a.outgoing,t=a.prevMessage,u=a.renderAttachment,v=a.renderEmoji,w=a.renderMessageBubble,x=a.shouldRenderMessageContent;a=a.xmaLayout;var y=d("MWPThreadCapabilitiesContext").useMWPThreadCapabilitiesContext();y=y.disableLinks;var z=c("mwpMessageIsReply")(q),A=c("isMWEditedMessage")(q),B=r!=null&&c("isMWEditedMessage")(r),C=d("MWPMessageParsingUtils").hasText(q),D=c("MWPMessageHasXMA")(q),E=d("MWPMessageReactions.react").useReactions(q);E=E.length>0;var F=d("MWPMessageReactions.react").useReactions(t);F=F.length>0;var G=c("gkx")("24165")&&y&&D&&q.textHasLinks;l(function(){p==null?void 0:p.addAnnotations({bool:{message_type_supports_attachment:c("mwpMessageHasAttachment")(q)}}),c("mwpMessageHasAttachment")(q)&&!G&&(p==null?void 0:p.addPoint("base-message-render-attachment"))},[p,q,G]);y=c("isMWBumpMessage")(q);var H=k(c("MWAttachmentContext"));H=H!=null&&H.length>0?H[0]:null;var I=c("useXMAPreviewsDisabledSetting")();o=o===!0&&I&&d("MAWIsFBXMA").isFBXMA(H==null?void 0:H.xmaContentType);I=d("MAWIsReceiverFetchXmaInLoadingState").isReceiverFetchXmaInLoadingState(q.displayedContentTypes,H);H=!I&&!o&&!y&&D&&b==="below"&&!G&&!n;y=b==="below"?!z&&!f&&!h&&!A&&!F:!1;D=I||o||!g&&!m&&!B&&!E||(a===d("xmaLayouts").XMA_LAYOUTS.UNIFIED_LAYOUT?H:!1);x?n=q.text!=null?e?z?j.jsx("div",{className:"x1n2onr6 x1vjfegm",children:v(q)}):z?null:j.jsxs(d("MWPMessageListColumn.react").MWPMessageListColumnShrinkwrap,{children:[y?j.jsx("div",{className:"x1eb86dx x36qwtl xh8yej3"}):null,j.jsx("div",{className:"x1n2onr6 x1vjfegm",children:v(q)})]}):q.text!==""?j.jsxs(j.Fragment,{children:[y||b==="above"?j.jsx("div",{className:"x1eb86dx x36qwtl xh8yej3"}):null,j.jsxs("div",{className:"x78zum5 xh8yej3",role:"none",children:[s?j.jsx(d("MWPMessageListColumn.react").MWPMessageListColumnGrow,{paint:!z,children:j.jsx(d("MWPMessageListColumn.react").MWPMessageListColumnHorizontalSpacer,{})}):null,w(q,y,D,H,s),s?null:j.jsx(d("MWPMessageListColumn.react").MWPMessageListColumnGrow,{paint:!z,children:j.jsx(d("MWPMessageListColumn.react").MWPMessageListColumnHorizontalSpacer,{})})]})]}):null:null:n=null;f=q.replyAttachmentType!==void 0&&(i||(i=d("I64"))).to_float(q.replyAttachmentType)===c("LSReplyMessageAttachmentType").ROLL_CALL_TEXT_CONTRIBUTION;var J;c("mwpMessageHasAttachment")(q)&&!G&&!f&&(J=u(d("MWPMessageParsingUtils").MessageWithAttachments.shouldConnectTop(q,t,b),d("MWPMessageParsingUtils").MessageWithAttachments.shouldConnectBottom(q,r,b),C));return j.jsxs(j.Fragment,{children:[b==="above"?J:null,n,b==="below"?J:null]})}a.displayName=a.name+" [from "+f.id+"]";g.MWPBaseMessageContent=a}),98);
__d("MWPBaseMessageContentWithPinnedMessageSupport.react",["MWPBaseMessageContent.react","react","useMWPIsMessagePinned"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react")),j=h.useMemo;function a(a){var b=a.attachmentRenderPosition,e=a.isEmojiOnly,f=a.isFirstMessageInGroup,g=a.isLastMessageInGroup,h=a.isSearchPluginAttachment,k=a.isSecureMessage,l=a.mediaRenderQpl,m=a.message,n=a.nextMessage,o=a.outgoing,p=a.prevMessage,q=a.renderAttachment,r=a.renderEmoji,s=a.renderMessageBubble,t=a.shouldRenderMessageContent,u=a.xmaLayout,v=c("useMWPIsMessagePinned")(m),w=c("useMWPIsMessagePinned")(n);return j(function(){return i.jsx(d("MWPBaseMessageContent.react").MWPBaseMessageContent,{attachmentRenderPosition:b,isEmojiOnly:e,isFirstMessageInGroup:f,isLastMessageInGroup:g,isMessagePinned:v,isNextMessagePinned:w,isSearchPluginAttachment:h,isSecureMessage:k,mediaRenderQpl:l,message:m,nextMessage:n,outgoing:o,prevMessage:p,renderAttachment:q,renderEmoji:r,renderMessageBubble:s,shouldRenderMessageContent:t,xmaLayout:u})},[b,e,f,g,v,w,h,l,m,n,o,p,q,r,s,t,u])}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("mwpIsMessageUnsupported",["I64"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b){return(h||(h=d("I64"))).equal(a.displayedContentTypes,(h||(h=d("I64"))).zero)&&b.length===0}g["default"]=a}),98);
__d("mwv2MessageIsEmojiOnly",["EmojiRenderer","EmoticonRenderer","ReStoreVaulting"],(function(a,b,c,d,e,f,g){"use strict";var h=/^[ \r\n\s]*$/;function a(a,b){if(a==null)return!1;var c=d("ReStoreVaulting").maybeUnvault(a);a=d("EmojiRenderer").parse(c).map(function(a){return{length:a.length,offset:a.offset}});b=b?d("EmoticonRenderer").parse(c).map(function(a){return{length:a.chars.length,offset:a.offset}}):[];a=a.concat(b);if(a.length===0)return!1;b=a.sort(function(a,b){return a.offset-b.offset|0});var e={contents:0},f={contents:0};a=b.some(function(a){e.contents===a.offset?(e.contents=e.contents+a.length|0,f.contents=e.contents):f.contents=a.offset;var b=c.substring(e.contents,f.contents);e.contents=a.offset+a.length|0;return h.test(b)===!1});b=e.contents!==c.length&&!h.test(c.substring(f.contents));if(a)return!1;else return!b}g["default"]=a}),98);
__d("MWPBaseMessage.react",["LSBitFlag","LSIntEnum","MWAttachmentContext","MWBlockingProtectionContext.react","MWGroupBlockingProtectionUtils","MWPBaseMessageContentWithPinnedMessageSupport.react","MWPMessageListColumn.react","MessengerWebUXLogger","mwpIsMessageUnsupported","mwv2MessageIsEmojiOnly","react","react-strict-dom","useGetMediaGroupInformation","xmaLayouts"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=h||(h=d("react"));b=h;var k=b.useContext,l=b.c,m={container:{alignItems:"x1cy8zhl",display:"x78zum5",flexDirection:"xdt5ytf",maxWidth:"x193iq5w",position:"x1n2onr6",userSelect:"x1kxipp6",$$css:!0},footerForGroupedImageStack:{paddingEnd:"x1pi30zi",$$css:!0},footerForGroupedImageTile:{paddingEnd:"x1tyevoi",$$css:!0},outgoing:{alignItems:"xuk3077",$$css:!0},row_container:{display:"x78zum5",width:"xh8yej3",$$css:!0}};function n(a,b){if(d("LSBitFlag").has((i||(i=d("LSIntEnum"))).ofNumber(128),a.displayedContentTypes))return!0;else return c("mwv2MessageIsEmojiOnly")(a.text,b)}function a(a){var b,e=l(67),f=a.attachmentRenderPosition,g=a.checkEmoticon,h=a.isFirstMessageInGroup,i=a.isLastMessageInGroup,o=a.isSearchPluginAttachment,p=a.isSecureMessage,q=a.mediaRenderQpl,r=a.message,s=a.nextMessage,t=a.outgoing,u=a.prevMessage,v=a.reactions,w=a.renderAttachment,x=a.renderEmoji,y=a.renderMessageBubble,z=a.renderMessageContainer,A=a.renderMessageFooter,B=a.renderMessageFromBlockee,C=a.renderUnsentMessage,D=a.renderUnsupportedMessage,E=a.shouldRenderMessageContent;a=a.xmaLayout;f=f===void 0?"below":f;o=o===void 0?!1:o;E=E===void 0?!0:E;a=a===void 0?d("xmaLayouts").XMA_LAYOUTS.DEFAULT:a;var F;e[0]===Symbol["for"]("react.memo_cache_sentinel")?(F={eventName:"messagelist_message_impression"},e[0]=F):F=e[0];F=c("MessengerWebUXLogger").useImpressionLoggerRef(F);var G=d("MWGroupBlockingProtectionUtils").useMWIsContactBlocked(r.threadKey),H=c("MWBlockingProtectionContext.react").useHook(),I=H.addMessageId;H=H.findMessageId;b=c("useGetMediaGroupInformation")(r,(b=p)!=null?b:!1,q);var J=k(c("MWAttachmentContext"));J=c("mwpIsMessageUnsupported")(r,J);if(r.isUnsent)if(C!=null){var K;e[1]!==C?(K=C(),e[1]=C,e[2]=K):K=e[2];e[3]!==K?(C=j.jsx(d("MWPMessageListColumn.react").MWPMessageListColumnShrinkwrap,{children:K}),e[3]=K,e[4]=C):C=e[4];return C}else return null;if(J)if(D!=null){e[5]!==D?(K=D(),e[5]=D,e[6]=K):K=e[6];e[7]!==K?(C=j.jsx(d("MWPMessageListColumn.react").MWPMessageListColumnShrinkwrap,{children:K}),e[7]=K,e[8]=C):C=e[8];return C}else return null;if(!H(r.messageId)&&G&&B!=null){e[9]!==I||e[10]!==r.messageId?(J=function(){I(r.messageId)},e[9]=I,e[10]=r.messageId,e[11]=J):J=e[11];e[12]!==B||e[13]!==J?(D=B(J),e[12]=B,e[13]=J,e[14]=D):D=e[14];e[15]!==D?(K=j.jsx(d("MWPMessageListColumn.react").MWPMessageListColumnShrinkwrap,{children:D}),e[15]=D,e[16]=K):K=e[16];return K}e[17]!==r||e[18]!==g?(C=n(r,g),e[17]=r,e[18]=g,e[19]=C):C=e[19];H=C;e[20]!==f||e[21]!==H||e[22]!==h||e[23]!==i||e[24]!==o||e[25]!==p||e[26]!==q||e[27]!==r||e[28]!==s||e[29]!==t||e[30]!==u||e[31]!==w||e[32]!==x||e[33]!==y||e[34]!==E||e[35]!==a?(G=j.jsx(c("MWPBaseMessageContentWithPinnedMessageSupport.react"),{attachmentRenderPosition:f,isEmojiOnly:H,isFirstMessageInGroup:h,isLastMessageInGroup:i,isSearchPluginAttachment:o,isSecureMessage:p,mediaRenderQpl:q,message:r,nextMessage:s,outgoing:t,prevMessage:u,renderAttachment:w,renderEmoji:x,renderMessageBubble:y,shouldRenderMessageContent:E,xmaLayout:a}),e[20]=f,e[21]=H,e[22]=h,e[23]=i,e[24]=o,e[25]=p,e[26]=q,e[27]=r,e[28]=s,e[29]=t,e[30]=u,e[31]=w,e[32]=x,e[33]=y,e[34]=E,e[35]=a,e[36]=G):G=e[36];B=G;e[37]!==t?(J=t?j.jsx(d("MWPMessageListColumn.react").MWPMessageListColumnGrow,{children:j.jsx(d("MWPMessageListColumn.react").MWPMessageListColumnHorizontalSpacer,{})}):null,e[37]=t,e[38]=J):J=e[38];e[39]!==z||e[40]!==t||e[41]!==B?(D=z!=null?z(B,[m.container,t?m.outgoing:!1]):j.jsx(d("react-strict-dom").html.div,{style:[m.container,t?m.outgoing:!1],children:B}),e[39]=z,e[40]=t,e[41]=B,e[42]=D):D=e[42];e[43]!==t?(K=t?null:j.jsx(d("MWPMessageListColumn.react").MWPMessageListColumnGrow,{children:j.jsx(d("MWPMessageListColumn.react").MWPMessageListColumnHorizontalSpacer,{})}),e[43]=t,e[44]=K):K=e[44];e[45]!==F||e[46]!==J||e[47]!==D||e[48]!==K?(g=j.jsxs(d("react-strict-dom").html.div,{ref:F,role:"none",style:m.row_container,children:[J,D,K]}),e[45]=F,e[46]=J,e[47]=D,e[48]=K,e[49]=g):g=e[49];e[50]!==H||e[51]!==v?(C=H&&v.length>0?j.jsx(d("MWPMessageListColumn.react").MWPMessageListColumnVerticalRhythm,{height:5}):null,e[50]=H,e[51]=v,e[52]=C):C=e[52];f=b!=null&&b.groupSize>=4&&m.footerForGroupedImageStack;h=!t&&b!=null&&b.groupSize<4&&m.footerForGroupedImageTile;e[53]!==f||e[54]!==h?(i=[f,h],e[53]=f,e[54]=h,e[55]=i):i=e[55];e[56]!==A?(o=A(),e[56]=A,e[57]=o):o=e[57];e[58]!==i||e[59]!==o?(p=j.jsx(d("MWPMessageListColumn.react").MWPMessageListColumnShrinkwrap,{children:j.jsx(d("react-strict-dom").html.div,{style:i,children:o})}),e[58]=i,e[59]=o,e[60]=p):p=e[60];e[61]!==C||e[62]!==p?(q=j.jsxs(j.Fragment,{children:[C,p]}),e[61]=C,e[62]=p,e[63]=q):q=e[63];e[64]!==g||e[65]!==q?(s=j.jsxs(j.Fragment,{children:[g,q]}),e[64]=g,e[65]=q,e[66]=s):s=e[66];return s}g["default"]=a}),98);
__d("MWPBaseMessageListRowCountdown.react",["MAWEphemeralMessageTimer.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||(h=d("react"))).c,j=h;function a(a){var b=i(8),d=a.ariaHidden,e=a.ephemeralDurationInSec,f=a.expirationTimestamp;a=a.handleMessageExpired;d=d===void 0?!1:d;var g;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(g="x78zum5 xdt5ytf x1c4vz4f xl56j7k x4ii5y1 xr1yuqi x1e558r4 x150jy0e x1vjfegm",b[0]=g):g=b[0];var h;b[1]!==e||b[2]!==f||b[3]!==a?(h=j.jsx(c("MAWEphemeralMessageTimer.react"),{ephemeralDurationInSec:e,expirationTimestamp:f,handleMessageExpired:a}),b[1]=e,b[2]=f,b[3]=a,b[4]=h):h=b[4];b[5]!==d||b[6]!==h?(e=j.jsx("div",{"aria-hidden":d,className:g,children:h}),b[5]=d,b[6]=h,b[7]=e):e=b[7];return e}g["default"]=a}),98);
__d("MWXMessageBubbleRow.react",["react","react-strict-dom"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||(h=d("react"))).c,j=h,k={addOn:{display:"x78zum5",flexGrow:"x1c4vz4f",flexShrink:"x2lah0s",$$css:!0},bubble:{minWidth:"xeuugli",zIndex:"x1vjfegm",$$css:!0},container:{display:"x78zum5",$$css:!0},containerRight:{flexDirection:"x15zctf7",$$css:!0},opaque:{backgroundColor:"x1eb86dx",$$css:!0},paddingBottom:function(a){return[{paddingBottom:a==null?null:"x18061mc",$$css:!0},{"--paddingBottom":function(a){return typeof a==="number"?a+"px":a!=null?a:void 0}(a)}]},paddingEnd:function(a){function b(b){return a.apply(this,arguments)}b.toString=function(){return a.toString()};return b}(function(a){return[{paddingEnd:a==null?null:"x55ruut",paddingLeft:null,paddingRight:null,$$css:!0},{"--paddingEnd":function(a){return typeof a==="number"?a+"px":a!=null?a:void 0}(a)}]}),paddingStart:function(a){function b(b){return a.apply(this,arguments)}b.toString=function(){return a.toString()};return b}(function(a){return[{paddingStart:a==null?null:"xjz4gdx",paddingLeft:null,paddingRight:null,$$css:!0},{"--paddingStart":function(a){return typeof a==="number"?a+"px":a!=null?a:void 0}(a)}]}),spacer:{flexBasis:"x1r8uery",flexGrow:"x1iyjqo2",$$css:!0}},l={bottom:{alignSelf:"xpvyfi4",$$css:!0},center:{alignSelf:"xamitd3",$$css:!0},top:{alignSelf:"xqcrz7y",$$css:!0}},m={left:{end:k.paddingStart,start:k.paddingEnd},right:{end:k.paddingEnd,start:k.paddingStart}};function n(a){var b=i(8),c=a.children,e=a.gap,f=a.paddingBottom,g=a.rowAlign,h=a.testid,n=a.type;a=a.verticalAlign;var o;b[0]!==c||b[1]!==f||b[2]!==e||b[3]!==g||b[4]!==n||b[5]!==a||b[6]!==h?(o=c!=null?j.jsx(d("react-strict-dom").html.div,{"data-testid":void 0,style:[k.opaque,k.addOn,f!=null&&k.paddingBottom(f),e!=null&&m[g][n](e)],children:j.jsx(d("react-strict-dom").html.div,{style:[k.container,g==="right"&&k.containerRight,l[a]],children:c})}):null,b[0]=c,b[1]=f,b[2]=e,b[3]=g,b[4]=n,b[5]=a,b[6]=h,b[7]=o):o=b[7];return o}function a(a){var b=i(25),c=a.addOnEnd,e=a.addOnEndGap,f=a.addOnEndVerticalAlign,g=a.addOnPaddingBottom,h=a.addOnStart,l=a.addOnStartGap,m=a.addOnStartVerticalAlign,o=a.align,p=a.children,q=a.opaque,r=a.testid;a=a.xstyle;e=e===void 0?0:e;f=f===void 0?"center":f;g=g===void 0?0:g;l=l===void 0?0:l;m=m===void 0?"center":m;o=o===void 0?"right":o;q=q===void 0?!1:q;var s=o==="right"&&k.containerRight;q=q&&k.opaque;var t;b[0]!==s||b[1]!==q||b[2]!==a?(t=[k.container,s,q,a],b[0]=s,b[1]=q,b[2]=a,b[3]=t):t=b[3];b[4]!==l||b[5]!==g||b[6]!==o||b[7]!==m||b[8]!==h?(s=j.jsx(n,{gap:l,paddingBottom:g,rowAlign:o,testid:void 0,type:"start",verticalAlign:m,children:h}),b[4]=l,b[5]=g,b[6]=o,b[7]=m,b[8]=h,b[9]=s):s=b[9];b[10]!==p?(q=p!=null?j.jsx(d("react-strict-dom").html.div,{style:k.bubble,children:p}):null,b[10]=p,b[11]=q):q=b[11];b[12]!==e||b[13]!==g||b[14]!==o||b[15]!==f||b[16]!==c?(a=j.jsx(n,{gap:e,paddingBottom:g,rowAlign:o,type:"end",verticalAlign:f,children:c}),b[12]=e,b[13]=g,b[14]=o,b[15]=f,b[16]=c,b[17]=a):a=b[17];b[18]===Symbol["for"]("react.memo_cache_sentinel")?(l=j.jsx(d("react-strict-dom").html.div,{style:[k.opaque,k.spacer]}),b[18]=l):l=b[18];b[19]!==r||b[20]!==t||b[21]!==s||b[22]!==q||b[23]!==a?(m=j.jsxs(d("react-strict-dom").html.div,{"data-testid":void 0,style:t,children:[s,q,a,l]}),b[19]=r,b[20]=t,b[21]=s,b[22]=q,b[23]=a,b[24]=m):m=b[24];return m}g["default"]=a}),98);
__d("MWPBaseMessageListRow.react",["BaseThemeProvider.react","I64","LSIntEnum","MWCombineThemeConfigs","MWMessageDeliveryStatus","MWPBaseMessageListRowActions.react","MWPBaseMessageListRowCountdown.react","MWPMessageListColumn.react","MWPMessageParsingUtils","MWXMessageBubbleRow.react","cr:8668","mwpMessageIsReply","react","stylex","useEmptyFunction"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l=i||(i=d("react")),m=i,n=m.useCallback,o=m.useMemo,p=m.c,q=(m=b("cr:8668"))!=null?m:c("useEmptyFunction");function a(a){var b=p(2),c=a.children,e=a.message;a=a.prevMessage;e=d("MWPMessageParsingUtils").isStartOfGroup(e,a);if(e){b[0]!==c?(a=c(),b[0]=c,b[1]=a):a=b[1];return a}return null}function r(a){return(j||(j=d("I64"))).equal(j.and_(a.displayedContentTypes,(k||(k=d("LSIntEnum"))).ofNumber(2048)),j.zero)}var s={container:{display:"x78zum5",$$css:!0},multiReact:{zIndex:"x1vjfegm",$$css:!0},multiReactIncoming:{marginStart:"x1liizu2",$$css:!0},multiReactOutgoing:{display:"x78zum5",flexDirection:"x15zctf7",marginEnd:"xw3qccf",marginStart:"x1mh8g0r",$$css:!0}};function e(a){var b,e=p(29),f=a.children,g=a.handleMessageExpired,i=a.hasMessageEmphasisRing,j=a.hasReactions,k=a.message,m=a.outgoing,n=a.renderGutterItem,o=a.renderMessageActions,t=a.renderMultiReactions;a=a.renderProfile;var u;e[0]!==k?(u=c("mwpMessageIsReply")(k),e[0]=k,e[1]=u):u=e[1];u=u;var v=k.ephemeralExpirationTs,w=k.ephemeralDurationInSec,x=k.isUnsent,y=d("MWMessageDeliveryStatus").getFromSendStatus(k.sendStatusV2).type==="Sending"||d("MWMessageDeliveryStatus").getFromSendStatus(k.sendStatusV2).type==="Error";b=(b=q(k.threadKey))!=null?b:!1;b=b;var z;e[2]!==t?(z=t&&t(),e[2]=t,e[3]=z):z=e[3];t=z;z=t!=null;var A;e[4]!==k||e[5]!==v||e[6]!==x||e[7]!==w||e[8]!==g||e[9]!==o||e[10]!==y?(A=r(k)?l.jsxs(l.Fragment,{children:[v!=null&&!x?l.jsx(c("MWPBaseMessageListRowCountdown.react"),{ephemeralDurationInSec:w,expirationTimestamp:v,handleMessageExpired:g}):null,o(y)]}):l.jsx(d("MWPBaseMessageListRowActions.react").MWPBaseMessageListRowActionsEmptyList,{}),e[4]=k,e[5]=v,e[6]=x,e[7]=w,e[8]=g,e[9]=o,e[10]=y,e[11]=A):A=e[11];k=b?"bottom":"center";v=j?18:0;e[12]!==m||e[13]!==n||e[14]!==a?(x=m?n():l.jsx(d("MWPMessageListColumn.react").MWPMessageListColumnProfile,{children:a()}),e[12]=m,e[13]=n,e[14]=a,e[15]=x):x=e[15];w=m?"right":"left";g=!m||u||i===!0;e[16]!==A||e[17]!==k||e[18]!==v||e[19]!==x||e[20]!==w||e[21]!==g||e[22]!==f?(o=l.jsx(c("MWXMessageBubbleRow.react"),{addOnEnd:A,addOnEndVerticalAlign:k,addOnPaddingBottom:v,addOnStart:x,addOnStartVerticalAlign:"bottom",align:w,opaque:g,testid:void 0,children:f}),e[16]=A,e[17]=k,e[18]=v,e[19]=x,e[20]=w,e[21]=g,e[22]=f,e[23]=o):o=e[23];y=o;e[24]!==z||e[25]!==m||e[26]!==t||e[27]!==y?(b=z?l.jsxs("div",{className:"x78zum5 xdt5ytf x1n2onr6",role:"none",children:[y,l.jsx(d("MWPMessageListColumn.react").MWPMessageListColumnGrow,{children:l.jsx("div",{className:(h||(h=c("stylex")))(s.container,s.multiReact,m?s.multiReactOutgoing:s.multiReactIncoming),children:t})})]}):y,e[24]=z,e[25]=m,e[26]=t,e[27]=y,e[28]=b):b=e[28];return b}function t(a){var b=p(2),c=a.children,e=a.message,f=a.nextMessage;a=a.showContent;e=d("MWPMessageParsingUtils").isEndOfGroup(e,f);if(e||a===!0){b[0]!==c?(f=c(),b[0]=c,b[1]=f):f=b[1];return f}return null}b={"mwp-reply-background-color":"var(--comment-footer-background)"};m={"mwp-reply-background-color":"var(--comment-footer-background)"};var u={dark:m,light:b,type:"VARIABLES"};function v(a){var b=a.children,e=a.domElementRef;a.message;var f=a.role,g=a.setHovered,i=a.stopHoveringRef,j=a.theme,k=j===void 0?u:j,m=a.xstyle,p=n(function(){return g(function(){return!1})},[g]);return l.jsx(c("BaseThemeProvider.react"),{config:o(function(){return d("MWCombineThemeConfigs").combine(u,k)},[k]),children:function(a,d){return l.jsx("div",{className:(h||(h=c("stylex")))(a,m),onMouseEnter:function(){i.current&&i.current(),g(function(){return!0}),i.current=p},onMouseLeave:function(){if(i.current===p){p();i.current=function(){};return}},ref:e,role:f,style:babelHelpers["extends"]({},d),children:b})}})}v.displayName=v.name+" [from "+f.id+"]";g.MWPBaseMessageListRowBeforeContent=a;g.MWPBaseMessageListRowBody=e;g.MWPBaseMessageListRowFooter=t;g.MWPBaseMessageListRow=v}),98);
__d("MercuryTimestamp",["fbt","formatDate"],(function(a,b,c,d,e,f,g){a=864e5;var h=6*a,i={getFormatedTimestamp:function(a){var b=a/1e3;return i.getFormattedTimestampByBucket(b,i.getTimeBucket(a))},getAbsoluteTimestamp:function(a){if(a==null)return null;else{a=i.getFormatedTimestamp(a);return a.absolute}},getRelativeTimestamp:function(a){a=i.getFormatedTimestamp(a);return a.relative},getFormattedTimestampByBucket:function(a,c){switch(c){case 0:return{absolute:g._("__JHASH__EpdLnM9AeUo__JHASH__").toString(),relative:b("formatDate")(a,"g:ia")};case 1:return{absolute:b("formatDate")(a,"l"),relative:b("formatDate")(a,"D")};case 3:return{absolute:b("formatDate")(a,"F j"),relative:b("formatDate")(a,"M j")};default:return{absolute:b("formatDate")(a,"F j, Y"),relative:b("formatDate")(a,"n/j/y")}}},getTimeBucket:function(a){a=new Date(a);var b=new Date();b=new Date(b.getFullYear(),b.getMonth(),b.getDate());if(b<a)return 0;else if(b.getTime()-h<a.getTime())return 1;else if(b.getFullYear()===a.getFullYear())return 3;else return 4},getPreciseTimestamp:function(a){return b("formatDate")(new Date(a),i.getPreciseFormat(a))},getPreciseFormat:function(a){a=i.getTimeBucket(a);switch(a){case 0:return"g:ia";case 1:return"l g:ia";case 3:return"F jS, g:ia";case 4:default:return"F j, Y g:i a"}}};e.exports=i}),130);
__d("MWPBaseMessageRowHeaderTimestamp.react",["I64","MercuryTimestamp","react","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=(j||(j=d("react"))).c,l=j;function a(a){var b=k(9),e=a.message,f=a.renderText,g=a.renderTimestamp;a=a.xstyle;var j;b[0]!==a?(j=(h||(h=c("stylex")))(a),b[0]=a,b[1]=j):j=b[1];b[2]!==e.timestampMs||b[3]!==g||b[4]!==f?(a=f(g(c("MercuryTimestamp").getRelativeTimestamp((i||(i=d("I64"))).to_float(e.timestampMs)))),b[2]=e.timestampMs,b[3]=g,b[4]=f,b[5]=a):a=b[5];b[6]!==j||b[7]!==a?(e=l.jsx("div",{className:j,children:a}),b[6]=j,b[7]=a,b[8]=e):e=b[8];return e}g["default"]=a}),98);
__d("MWXHovercardTrigger.react",["BaseHovercardTrigger.react"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=c("BaseHovercardTrigger.react")}),98);
__d("MWPMessageAdModOrHostText.react",["fbt","BaseMiddot.react","MWCMGetValidId","MWCMHostTextHovercard.entrypoint","MWXHovercardTrigger.react","MWXText.react","react","react-strict-dom","useMWCMIsSenderAdModOrChatHost"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=(i||(i=d("react"))).c,k=i;function l(a){var b=j(15),e=a.communityId,f=a.senderId,g=a.shouldRenderSenderName;a=a.threadKey;e=c("useMWCMIsSenderAdModOrChatHost")(e,a,f);f=e.isAdmin;var i=e.isChatHost;e=e.isModerator;var l;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(l=h._("__JHASH__l4xCpI5VHpV__JHASH__"),b[0]=l):l=b[0];l=l;var o;b[1]===Symbol["for"]("react.memo_cache_sentinel")?(o=h._("__JHASH__hz8R4t8GDy7__JHASH__"),b[1]=o):o=b[1];o=o;var p;b[2]!==a?(p={onClose:n,threadKey:a},b[2]=a,b[3]=p):p=b[3];b[4]===Symbol["for"]("react.memo_cache_sentinel")?(a={},b[4]=a):a=b[4];b[5]!==p?(a=k.jsx(c("MWXHovercardTrigger.react"),{align:"middle",display:"inline-block",popoverEntryPoint:c("MWCMHostTextHovercard.entrypoint"),popoverOtherProps:p,popoverProps:a,position:"above",children:m}),b[5]=p,b[6]=a):a=b[6];p=a;b[7]!==g||b[8]!==f||b[9]!==e||b[10]!==i||b[11]!==p?(a=g&&(f||e||i)&&k.jsxs(k.Fragment,{children:[k.jsx(c("BaseMiddot.react"),{}),k.jsx(d("react-strict-dom").html.span,{"data-testid":void 0,children:f?l:e?o:p})]}),b[7]=g,b[8]=f,b[9]=e,b[10]=i,b[11]=p,b[12]=a):a=b[12];b[13]!==a?(l=k.jsx(k.Fragment,{children:a}),b[13]=a,b[14]=l):l=b[14];return l}function m(a){return k.jsx(c("MWXText.react"),{ref:a,type:"meta4",children:h._("__JHASH__bZRJOb_t9fa__JHASH__")})}m.displayName=m.name+" [from "+f.id+"]";function n(){}function a(a){var b=a.communityId,c=a.message;a=a.shouldRenderSenderName;return!d("MWCMGetValidId").MWCMHasValidFbGroupId(b,!1)?null:k.jsx(l,{communityId:b,senderId:c.senderId,shouldRenderSenderName:a,threadKey:c.threadKey})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("MWXIconBot",["MWXSvgIcon","SVGIcon","cr:12328","gkx"],(function(a,b,c,d,e,f,g){"use strict";a=d("MWXSvgIcon").mwxSvgIcon(d("SVGIcon").svgIcon(b("cr:12328")),c("gkx")("23219"));g["default"]=a}),98);
__d("usePinnedTextAnimation",["react","useDebouncedValue"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");var i=b.useEffect,j=b.useRef,k=b.useState,l=b.c,m={mountAnimation:{animationDuration:"x5hsz1j",animationName:"x127lhb5",animationTimingFunction:"x4hg4is",$$css:!0},unmountAnimation:{animationDuration:"x5hsz1j",animationFillMode:"x10e4vud",animationName:"xvma63k",animationTimingFunction:"x4hg4is",$$css:!0}};function a(a){var b=l(6),d=k(!1),e=d[0],f=d[1],g=j(a),h;b[0]!==a?(d=function(){a!==g.current&&f(!0),g.current=a},h=[a],b[0]=a,b[1]=d,b[2]=h):(d=b[1],h=b[2]);i(d,h);d=e?m.mountAnimation:null;h=c("useDebouncedValue")(a,200);b[3]!==d||b[4]!==h?(e={mountAnimation:d,shouldShow:h,unmountAnimation:m.unmountAnimation},b[3]=d,b[4]=h,b[5]=e):e=b[5];return e}g["default"]=a}),98);
__d("MWPMessageEyebrows.react",["fbt","Actor","BaseMiddot.react","I64","LSContactBitOffset","LSContactBlockedByViewerStatus","LSIntEnum","LSMessagingThreadTypeUtil","MWEditedEyebrow.react","MWLSThread","MWMessageListDisplayContext.react","MWPAccessibleEyebrowsText.react","MWPContactContext.react","MWPMessageAdModOrHostText.react","MWPMessageAuthor.react","MWPMessageListColumn.react","MWPThreadIsPage.react","MWXIconBadgeCheckmark","MWXIconBot","MWXIconStrict.react","ReQL","ReQLSuspense","isMWEditedMessage","react","react-strict-dom","useMWPIsMessagePinned","usePinnedTextAnimation","useReStore"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l,m=(l||(l=d("react"))).c,n=l,o={alignEnd:{justifyContent:"x13a6bvl",$$css:!0},alignStart:{justifyContent:"x1nhvcw1",$$css:!0},botBadge:{display:"x1rg5ohu",paddingStart:"x1e558r4",position:"x1n2onr6",top:"xs7f9wi",$$css:!0},color:{color:"x186z157",$$css:!0},container:{display:"x78zum5",marginTop:"x1anpbxc",paddingBottom:"x10b6aqq",paddingStart:"x1ye3gou",$$css:!0},separator:{paddingEnd:"x19um543",paddingStart:"x1m6msm",$$css:!0}};function p(a){var b=m(5),c=a.children;a=a.outgoing;a=a?o.alignEnd:o.alignStart;var e;b[0]!==a?(e=[o.container,a],b[0]=a,b[1]=e):e=b[1];b[2]!==e||b[3]!==c?(a=n.jsx(d("react-strict-dom").html.div,{style:e,children:c}),b[2]=e,b[3]=c,b[4]=a):a=b[4];return a}function a(a){var b=m(63),e=a.isFirstMessageInGroup,g=a.isLastMessageInGroup,l=a.message,s=a.outgoing,t=a.renderPaidPartnerShipText,u=a.renderPinnedText,v=a.renderTextWrapper;a=a.shouldRenderSenderName;var w=d("MWPMessageAuthor.react").useAuthorName();w=w[0];var x=d("MWPContactContext.react").useMWPContactStableContext(),y=x.contact;x=x.nickname;var z=d("Actor").useActor();z=z[0];var A=d("MWMessageListDisplayContext.react").useMWMessageListDisplayContext(),B=A.isReportMessageList,C=(i||(i=c("useReStore")))(),D=d("MWLSThread").useThread(l.threadKey,r),E;b[0]!==D||b[1]!==C?(A=function(){return D?d("ReQL").fromTableAscending(C.tables.community_folders).getKeyRange(D).map(function(a){return a.folderId}):d("ReQL").empty()},E=[C,D],b[0]=D,b[1]=C,b[2]=A,b[3]=E):(A=b[2],E=b[3]);var F=d("ReQLSuspense").useFirst(A,E,f.id+":110");b[4]!==l?(A=c("isMWEditedMessage")(l),b[4]=l,b[5]=A):A=b[5];var G=A;E=d("MWPThreadIsPage.react").useIsPage();A=d("MWLSThread").useThread(l.threadKey,q);A=A!=null&&d("LSMessagingThreadTypeUtil").isDiscoverablePublicBroadcastChannel(A);var H=y?!(j||(j=d("I64"))).equal(y.blockedByViewerStatus,(k||(k=d("LSIntEnum"))).ofNumber(c("LSContactBlockedByViewerStatus").UNBLOCKED)):!1,I;b[6]!==E||b[7]!==l.senderId||b[8]!==l.threadKey||b[9]!==s?(I=E&&!(j||(j=d("I64"))).equal(l.senderId,l.threadKey)&&!s,b[6]=E,b[7]=l.senderId,b[8]=l.threadKey,b[9]=s,b[10]=I):I=b[10];E=I;var J=a||E&&!A;b[11]!==y?(I=y?d("LSContactBitOffset").has(77,y):!1,b[11]=y,b[12]=I):I=b[12];var K=I;b[13]!==y?(a=y?d("LSContactBitOffset").has(84,y):!1,b[13]=y,b[14]=a):a=b[14];var L=a,M=c("useMWPIsMessagePinned")(l);E=c("usePinnedTextAnimation")(M);var N=E.mountAnimation,O=E.unmountAnimation,P=l.isPaidPartnership===!0;A=J||M||G||P;if(b[15]!==x){y=(I=x)!=null?I:h._("__JHASH__4LwiFWKMkVy__JHASH__");b[15]=x;b[16]=y}else y=b[16];a=y;E=z===(j||(j=d("I64"))).to_string(l.senderId);var Q;if(b[17]!==E||b[18]!==a||b[19]!==w||b[20]!==g||b[21]!==e||b[22]!==A||b[23]!==l||b[24]!==s||b[25]!==J||b[26]!==M||b[27]!==H||b[28]!==v||b[29]!==F||b[30]!==N||b[31]!==O||b[32]!==u||b[33]!==G||b[34]!==K||b[35]!==L||b[36]!==P||b[37]!==t||b[38]!==B){I=Symbol["for"]("react.early_return_sentinel");bb0:{x=E?a.toString():w==null?void 0:w.toString();var R=g&&e;y=h._("__JHASH__G4Bi2CYTkJR__JHASH__");if(!A){b[41]!==l||b[42]!==s?(z=n.jsx(c("MWPAccessibleEyebrowsText.react"),{message:l,outgoing:s}),b[41]=l,b[42]=s,b[43]=z):z=b[43];I=z;break bb0}b[44]!==J||b[45]!==M||b[46]!==H||b[47]!==s||b[48]!==v||b[49]!==F||b[50]!==l||b[51]!==N||b[52]!==O||b[53]!==u||b[54]!==G||b[55]!==R||b[56]!==e||b[57]!==K||b[58]!==L||b[59]!==P||b[60]!==t||b[61]!==B?(z=function(a){var b=J&&a!=null||M||H;a=n.jsx(p,{outgoing:s,children:v(n.jsxs(d("react-strict-dom").html.span,{style:o.color,children:[(J||H)&&a!=null&&n.jsx(d("react-strict-dom").html.span,{"data-testid":void 0,children:a}),n.jsx(c("MWPMessageAdModOrHostText.react"),{communityId:F,message:l,shouldRenderSenderName:J}),M&&!H&&n.jsx(d("react-strict-dom").html.span,{style:M?N:O,children:u(l,J)}),H&&n.jsxs(n.Fragment,{children:[n.jsx(d("react-strict-dom").html.span,{children:n.jsx(c("BaseMiddot.react"),{})}),n.jsx(d("react-strict-dom").html.span,{"data-testid":void 0,children:h._("__JHASH__3kkmPi45q6Z__JHASH__")})]}),G&&n.jsx(d("MWEditedEyebrow.react").MWEditedEyebrow,{hasPadding:!R&&!e,separatorStyle:b?o.separator:null}),K===!0?n.jsx(d("react-strict-dom").html.span,{style:o.botBadge,children:n.jsx(c("MWXIconStrict.react"),{color:"secondary",icon:c("MWXIconBot"),size:12})}):null,L&&n.jsx(d("react-strict-dom").html.span,{style:o.botBadge,children:n.jsx(c("MWXIconStrict.react"),{color:"primaryAccent",icon:c("MWXIconBadgeCheckmark"),size:12})}),P&&t!=null&&t(l)]}))});return B?n.jsx(d("MWPMessageListColumn.react").MWPMessageListColumnGrow,{children:a}):n.jsx(d("MWPMessageListColumn.react").MWPMessageListColumnWithGutters,{shrinkwrap:!0,children:a})},b[44]=J,b[45]=M,b[46]=H,b[47]=s,b[48]=v,b[49]=F,b[50]=l,b[51]=N,b[52]=O,b[53]=u,b[54]=G,b[55]=R,b[56]=e,b[57]=K,b[58]=L,b[59]=P,b[60]=t,b[61]=B,b[62]=z):z=b[62];z=z;Q=l.takedownState!=null?z(y.toString()):z(x)}b[17]=E;b[18]=a;b[19]=w;b[20]=g;b[21]=e;b[22]=A;b[23]=l;b[24]=s;b[25]=J;b[26]=M;b[27]=H;b[28]=v;b[29]=F;b[30]=N;b[31]=O;b[32]=u;b[33]=G;b[34]=K;b[35]=L;b[36]=P;b[37]=t;b[38]=B;b[39]=Q;b[40]=I}else Q=b[39],I=b[40];return I!==Symbol["for"]("react.early_return_sentinel")?I:Q}function q(a){return a.threadType}function r(a){return a.parentThreadKey}g["default"]=a}),226);
__d("MWPBaseMessageRowHeader.react",["BaseHeading.react","BaseRow.react","BaseRowItem.react","LSIntEnum","LSMessageReplySourceTypeV2","MWMessageListDisplayContext.react","MWPBaseMessageRowHeaderTimestamp.react","MWPContactContext.react","MWPMessageEyebrows.react","MWPMessageListColumn.react","MWPThreadIsPage.react","mwpMessageIsReply","react","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=(i||(i=d("react"))).c,l=i,m={alignEnd:{alignItems:"xuk3077",$$css:!0},header:{display:"x78zum5",flexDirection:"xdt5ytf",$$css:!0},timestamp:{marginTop:"x1anpbxc",paddingEnd:"x11eofan",$$css:!0},timestampWithSnippet:{marginTop:"x1ok221b",paddingEnd:"x11eofan",$$css:!0}};function n(a,b,e,f){var g=k(8),h=a.replySnippet;h=h!=null?h!=="":!1;var i=a.replySourceTypeV2!=null&&(j||(j=d("LSIntEnum"))).toNumber(a.replySourceTypeV2)===c("LSMessageReplySourceTypeV2").FORWARD;if(h){g[0]!==e||g[1]!==a||g[2]!==f?(h=e(a,f),g[0]=e,g[1]=a,g[2]=f,g[3]=h):h=g[3];return h}if(!i)return null;g[4]!==b||g[5]!==a||g[6]!==f?(e=b(a,f),g[4]=b,g[5]=a,g[6]=f,g[7]=e):e=g[7];return e}function a(a){var b=k(39),e=a.alwaysRenderSenderName,f=a.isAnyCMThread,g=a.isFirstMessageInGroup,i=a.isGroupThread,j=a.isLastMessageInGroup,o=a.message,p=a.outgoing,q=a.renderForwardSnippet,r=a.renderMessageEyebrows,s=a.renderPaidPartnerShipText,t=a.renderPinnedText,u=a.renderReplySnippet,v=a.renderTextWrapper;a=a.renderTimestamp;e=e===void 0?!1:e;f=f===void 0?!1:f;var w=c("mwpMessageIsReply")(o);q=n(o,q,u,p);u=d("MWPContactContext.react").useMWPContactStableContext();u=u.nickname;var x=d("MWMessageListDisplayContext.react").useMWMessageListDisplayContext();x=x.isReportMessageList;u=g&&u!=null&&f;f=e||i&&g&&!p&&!w||u;if(q!=null){e=p?m.alignEnd:!1;b[0]!==e?(i=(h||(h=c("stylex")))(m.header,e),b[0]=e,b[1]=i):i=b[1];b[2]!==x||b[3]!==q?(w=x?l.jsx(d("MWPMessageListColumn.react").MWPMessageListColumnGrow,{children:q}):l.jsx(d("MWPMessageListColumn.react").MWPMessageListColumnWithGutters,{shrinkwrap:!0,children:q}),b[2]=x,b[3]=q,b[4]=w):w=b[4];b[5]!==i||b[6]!==w?(u=l.jsx("div",{className:i,role:"none",children:w}),b[5]=i,b[6]=w,b[7]=u):u=b[7];e=u}else if(r!=null){b[8]!==r||b[9]!==o||b[10]!==p||b[11]!==v||b[12]!==f?(x=r(o,p,v,f),b[8]=r,b[9]=o,b[10]=p,b[11]=v,b[12]=f,b[13]=x):x=b[13];e=x}else{b[14]!==g||b[15]!==j||b[16]!==o||b[17]!==p||b[18]!==s||b[19]!==t||b[20]!==v||b[21]!==f?(i=l.jsx(c("MWPMessageEyebrows.react"),{isFirstMessageInGroup:g,isLastMessageInGroup:j,message:o,outgoing:p,renderPaidPartnerShipText:s,renderPinnedText:t,renderTextWrapper:v,shouldRenderSenderName:f}),b[14]=g,b[15]=j,b[16]=o,b[17]=p,b[18]=s,b[19]=t,b[20]=v,b[21]=f,b[22]=i):i=b[22];b[23]!==o.threadKey||b[24]!==i?(w=l.jsx(d("MWPThreadIsPage.react").Provider,{threadKey:o.threadKey,children:i}),b[23]=o.threadKey,b[24]=i,b[25]=w):w=b[25];e=w}u=q!=null?m.timestampWithSnippet:m.timestamp;b[26]!==a||b[27]!==o||b[28]!==v||b[29]!==u?(r=a!=null?l.jsx(c("MWPBaseMessageRowHeaderTimestamp.react"),{message:o,renderText:v,renderTimestamp:a,xstyle:u}):null,b[26]=a,b[27]=o,b[28]=v,b[29]=u,b[30]=r):r=b[30];x=r;if(g){j=p?"backward":"forward";b[31]!==e?(s=l.jsx(c("BaseRowItem.react"),{children:l.jsx(c("BaseHeading.react"),{children:e})}),b[31]=e,b[32]=s):s=b[32];b[33]!==x?(t=x!=null?l.jsx(c("BaseRowItem.react"),{children:l.jsx(c("BaseHeading.react"),{children:x})}):null,b[33]=x,b[34]=t):t=b[34];b[35]!==j||b[36]!==s||b[37]!==t?(f=l.jsx(d("MWPMessageListColumn.react").MWPMessageListColumnGrow,{children:l.jsxs(c("BaseRow.react"),{direction:j,children:[s,t]})}),b[35]=j,b[36]=s,b[37]=t,b[38]=f):f=b[38];return f}else return e}g["default"]=a}),98);
__d("MWPComposerDraftMessages",["FBLogger","I64","LSMessagingThreadTypeUtil","MAWFindFirstUrl","MAWIsLinkPreviewXMAEnabled","MWHasLinksUtil","cr:5710","justknobx","uuidv4"],(function(a,b,c,d,e,f,g){"use strict";var h,i=new Map(),j=void 0;function k(){return Array.from(i.values()).some(function(a){return a.messageText.trim()!==""})}function l(a){return i.get((h||(h=d("I64"))).to_string(a))}function m(){if(!c("justknobx")._("2955")||b("cr:5710")==null||j!=null)return;j=b("cr:5710").onBeforeUnload(function(){if(k())return"You have pending messages. Please wait for them to be sent before closing the window.";return})}function a(a){var b=a.deleteLinkPreviewXMATableData,e=a.fetchAndWriteLinkPreviewXMA,f=a.message,g=a.threadKey;a=a.threadType;if(f==null){i["delete"]((h||(h=d("I64"))).to_string(g));if(i.size===0){var k;(k=j)==null?void 0:k.remove();j=void 0}return}if(i.has((h||(h=d("I64"))).to_string(g)))n(g,f);else{k=c("uuidv4")();i.set((h||(h=d("I64"))).to_string(g),{id:k,linkPreviewAbortToken:null,linkPreviewURL:null,messageText:f})}k=a!=null&&d("LSMessagingThreadTypeUtil").isArmadilloSecure(a);k&&d("MAWIsLinkPreviewXMAEnabled").isLinkPreviewXMAEnabled()&&o(g,f,e,b);m()}function n(a,b){var e=l(a);if(e==null){c("FBLogger")("messenger_web_messaging").mustfix("currentDraft was null in updateDraftMessageText");return}i.set((h||(h=d("I64"))).to_string(a),babelHelpers["extends"]({},e,{messageText:b}))}function o(a,b,e,f){var g,h=l(a);if(h==null){c("FBLogger")("messenger_web_sharing").mustfix("currentDraft was null in updateDraftMessageURL");return}var i=h==null?void 0:h.linkPreviewURL,j=h==null?void 0:h.linkPreviewAbortToken;g=(g=d("MAWFindFirstUrl").findFirstUrl(b))!=null?g:[];b=d("MWHasLinksUtil").getHasLinks(b);b=b?(b=(b=g[0])==null?void 0:b.entity.url)!=null?b:null:null;if(i===b)return;if(b==null){f&&void f({draftId:h.id});j==null?void 0:j.abort();p({linkPreviewURL:null,threadKey:a});q({linkPreviewAbortToken:null,threadKey:a});return}p({linkPreviewURL:b,threadKey:a});i=e&&e({draftId:h.id,urls:g})||null;q({linkPreviewAbortToken:i,threadKey:a})}function p(a){var b=a.linkPreviewURL;a=a.threadKey;var e=l(a);if(e==null){c("FBLogger")("messenger_web_messaging").mustfix("currentDraft was null in setDraftMessageURL");return}i.set((h||(h=d("I64"))).to_string(a),babelHelpers["extends"]({},e,{linkPreviewURL:b}))}function q(a){var b=a.linkPreviewAbortToken;a=a.threadKey;var e=l(a);if(e==null){c("FBLogger")("messenger_web_messaging").mustfix("currentDraft was null in setDraftMessageURL");return}i.set((h||(h=d("I64"))).to_string(a),babelHelpers["extends"]({},e,{linkPreviewAbortToken:b}))}g.getDraftMessage=l;g.updateDraftMessage=a}),98);
__d("MWTheme.react",["I64","cr:4128","emptyFunction","react","react-forget-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=h||(h=d("react")),k=h,l=k.createContext,m=k.useContext,n=k.useEffect;k.useMemo;var o=k.c;function a(a,b){a=a!=null?a:.4;var c=parseInt(b.slice(1,3),16),d=parseInt(b.slice(3,5),16);b=parseInt(b.slice(5,7),16);a=a.toFixed(4);return"rgba("+c+","+d+","+b+","+a+")"}function e(a){return a.type==="solid"?a.color:a.colors[0]}function f(a){return"#"+a.slice(2)}function p(a){a=(i||(i=d("I64"))).to_int32(a);var b=(a&16711680)>>>16,c=(a&65280)>>>8;a=a&255;var e=function(a){return a.toString(16).padStart(2,"0")};return"#"+(e(b)+(e(c)+e(a)))}var q=l({clearTheme:c("emptyFunction"),setTheme:c("emptyFunction"),theme:b("cr:4128")});function r(){return m(q).theme}function s(){var a=o(6),b=d("react-forget-runtime").useContextWithBailoutExperiment__unstable(q,t),c=b.clearTheme;b=b.setTheme;var e,f;a[0]!==c?(e=function(){return c},f=[c],a[0]=c,a[1]=e,a[2]=f):(e=a[1],f=a[2]);n(e,f);a[3]!==b||a[4]!==c?(e=[b,c],a[3]=b,a[4]=c,a[5]=e):e=a[5];return e}function t(a){return[a.clearTheme,a.setTheme]}function u(a){var b=o(7),d=a.children,e=a.clearTheme,f=a.setTheme;a=a.theme;e=(e=e)!=null?e:c("emptyFunction");f=(f=f)!=null?f:c("emptyFunction");var g;b[0]!==e||b[1]!==f||b[2]!==a?(g={clearTheme:e,setTheme:f,theme:a},b[0]=e,b[1]=f,b[2]=a,b[3]=g):g=b[3];e=g;f=e;b[4]!==f||b[5]!==d?(a=j.jsx(q.Provider,{value:f,children:d}),b[4]=f,b[5]=d,b[6]=a):a=b[6];return a}function v(a){return a.type==="gradient"}g.defaultTheme=b("cr:4128");g.lighten=a;g.top=e;g.aRGBtoHex=f;g.intToHex=p;g.useTheme=r;g.usePreview=s;g.MWThemeProvider=u;g.isGradient=v}),98);
__d("MWPDateBreak.react",["BaseHeading.react","BaseTimestamp.react","MWTheme.react","MWXText.react","formatDate","react","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=(i||(i=d("react"))).c,k=i,l={mask:{backgroundColor:"x1eb86dx",$$css:!0},root:{marginBottom:"xjpr12u",marginTop:"xr9ek0c",textAlign:"x2b8uid",$$css:!0}};function m(a){var b=j(8),d=a.renderTextWrapper;a=a.timestamp;var e;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(e="x186z157 xk50ysn",b[0]=e):e=b[0];var f;b[1]!==a?(f=c("formatDate")(new Date(a),{future:"g:ia",older:"m/d/Y g:ia",thisYear:"M jS, g:ia",today:"g:ia",withinWeek:"D g:ia"}),b[1]=a,b[2]=f):f=b[2];b[3]!==f?(a=k.jsx("span",{className:e,children:f}),b[3]=f,b[4]=a):a=b[4];e=a;if(d!=null){b[5]!==d||b[6]!==e?(f=d(e),b[5]=d,b[6]=e,b[7]=f):f=b[7];return f}return e}function a(a){var b=j(16),e=a.renderTextWrapper;a=a.timestamp;var f=d("MWTheme.react").useTheme(),g;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(g="xzpqnlu x1hyvwdk xqtp20y x6ikm8r x10wlt62 xnalus7",b[0]=g):g=b[0];var i;b[1]!==a?(i=new Date(a),b[1]=a,b[2]=i):i=b[2];b[3]!==i?(g=k.jsx("div",{className:g,children:k.jsx(c("BaseTimestamp.react"),{date:i})}),b[3]=i,b[4]=g):g=b[4];b[5]!==f?(i=(h||(h=c("stylex")))(l.root,d("MWTheme.react").isGradient(f)&&l.mask),b[5]=f,b[6]=i):i=b[6];b[7]!==e||b[8]!==a?(f=k.jsx(c("MWXText.react"),{color:"tertiary",type:"meta4",children:k.jsx(m,{renderTextWrapper:e,timestamp:a})}),b[7]=e,b[8]=a,b[9]=f):f=b[9];b[10]!==i||b[11]!==f?(e=k.jsx("div",{"aria-hidden":!0,className:i,"data-scope":"date_break",children:f}),b[10]=i,b[11]=f,b[12]=e):e=b[12];b[13]!==g||b[14]!==e?(a=k.jsxs(c("BaseHeading.react"),{testid:void 0,children:[g,e]}),b[13]=g,b[14]=e,b[15]=a):a=b[15];return a}g["default"]=a}),98);
__d("MWPJumpToMostRecentMessageButtonAnimationWrapper.react",["react","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||(i=d("react"));b=i;var k=b.useEffect;b.useMemo;var l=b.useState,m=b.c,n={animateIn:{animationDuration:"x2mfxb",animationName:"x1j49z95",transform:"x1dufm33",$$css:!0},animateOut:{animationDuration:"x2mfxb",animationName:"x1j4bph1",transform:"xk9af5f",$$css:!0},animationWrapper:{bottom:"x1ey2m1c",start:"x14yxtea",position:"x10l6tqk",zIndex:"x1vjfegm",$$css:!0}};function a(a){var b=m(12),d=a.children,e=a.visible;a=l(e);var f=a[0],g=a[1],i;b[0]!==e?(a=function(){e&&g(!0)},i=[e,g],b[0]=e,b[1]=a,b[2]=i):(a=b[1],i=b[2]);k(a,i);bb0:{if(f){b[3]===Symbol["for"]("react.memo_cache_sentinel")?(a="xqtp20y x1n2onr6 xh8yej3",b[3]=a):a=b[3];i=e?n.animateIn:n.animateOut;b[4]!==i?(f=(h||(h=c("stylex")))([n.animationWrapper,i]),b[4]=i,b[5]=f):f=b[5];b[6]!==e?(i=function(a){e||g(!1)},b[6]=e,b[7]=i):i=b[7];b[8]!==f||b[9]!==i||b[10]!==d?(a=j.jsx("div",{className:a,children:j.jsx("div",{className:f,onAnimationEnd:i,children:d})}),b[8]=f,b[9]=i,b[10]=d,b[11]=a):a=b[11];f=a;break bb0}f=null}return f}g["default"]=a}),98);
__d("MWPMessageListFocusTable.react",["FocusRegion.react","MWMessageTableFocusTable.react","MWV2MessageListIsRowModalContext.react","emptyFunction","focusScopeQueries","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;var j=b.useCallback,k=b.useMemo;function l(a,b,c){return b["data-scope"]==="date_break"}function a(a){var b=a.ariaLabel,e=a.children,f=a.hasMessages,g=f===void 0?!0:f;f=a.modal;var h=a.onNavigate,m=h===void 0?c("emptyFunction"):h;h=a.setModal;var n=a.wrapX;n=n===void 0?!1:n;a=a.wrapY;a=a===void 0?!1:a;var o=j(function(a){m(a);var b=a.type;switch(b){case"PAGE_DOWN":case"PAGE_UP":break;default:return}b=b==="PAGE_DOWN";a.preventDefault();var c=a.currentRowIndex+(b?1:-1)|0,d=!1;while(!d){var e=a.getCell(c,a.currentCellIndex);if(e==null){var f=a.getCell(b?c-1|0:0,a.currentCellIndex);f!=null&&a.focusCell(f);d=!0}else{f=e.scopeRef.current;f=f!=null?f.DO_NOT_USE_queryFirstNode(l):null;f==null?c=b?c+1|0:c-1|0:(a.focusCell(e),d=!0)}}},[]),p=k(function(){return g?i.jsx("div",{"aria-label":b,className:"x1uipg7g xu3j5b3 xol2nv xlauuyb x26u7qi x19p7ews x78zum5 xdt5ytf x1iyjqo2 x6ikm8r x10wlt62",role:"grid",children:e}):i.jsx("div",{className:"x1uipg7g xu3j5b3 xol2nv xlauuyb x26u7qi x19p7ews x78zum5 xdt5ytf x1iyjqo2 x6ikm8r x10wlt62",children:e})},[b,e,g]);return i.jsx(d("MWV2MessageListIsRowModalContext.react").MWV2MessageListIsRowModalContextProvider,{value:h,children:i.jsx(d("FocusRegion.react").FocusRegion,{recoverFocusQuery:d("MWMessageTableFocusTable.react").scopeQuery,stopOnFocusWithinPropagation:!1,children:i.jsx(d("MWMessageTableFocusTable.react").FocusTable[0],{allowModifiers:!0,disabled:f!=="",onNavigate:o,tabScopeQuery:d("focusScopeQueries").tabbableScopeQuery,wrapX:n,wrapY:a,children:p})})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWPMessageListRowWithKeyboardInteractions.react",["fbt","BaseHeadingContextWrapper.react","CometScreenReaderText.react","FocusInertRegion.react","FocusRegion.react","FocusWithinHandler.react","I64","KeyCommandHandler.react","MDSTextPairing.react","MWEditMessageOverlay.react","MWMessageCellFocusTable.react","MWMessageCellKeyCommands.react","MWMessageTableFocusTable.react","MWPBaseMessageListRow.react","MWPMessageAuthor.react","MWV2MessageListIsRowModalContext.react","MWV2MessageRowActionsContext.react","MWV2MessageRowIsRowFocusedContext.react","MWXPressable.react","ReactDOM","TimestampUtils","emptyFunction","focusScopeQueries","gkx","react","setTimeout","stylex","useCometTheme","useMAWEditMessageData","useMWPEditMessageDeemphasizer","useServerTime"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l=j||(j=d("react"));e=j;e.useCallback;var m=e.useEffect,n=e.useId;e.useMemo;var o=e.useRef,p=e.c,q={cell:{display:"x78zum5",flexDirection:"xdt5ytf",position:"x1n2onr6",$$css:!0},cellFocusVisible:{zIndex:"x1vjfegm",$$css:!0},cellModal:{outline:"x1k66dxp",outlineOffset:"x1g40iwv","@media (-webkit-min-device-pixel-ratio: 0)_outline":"x1bkw7pg",$$css:!0},enterModalButton:{backgroundColor:"x1h0vfkc",borderTopStartRadius:"x1lq5wgf",borderTopEndRadius:"xgqcy7u",borderBottomEndRadius:"x30kzoy",borderBottomStartRadius:"x9jhf4c",boxShadow:"x152obne",end:"xlr8s2x",left:null,right:null,paddingTop:"xz9dl7a",paddingEnd:"xn6708d",paddingBottom:"xsag5q8",paddingStart:"x1ye3gou",position:"x10l6tqk",top:"x1qiirwl",transform:"x105ttfm",zIndex:"x1vjfegm",$$css:!0},enterModalButtonVisible:{opacity:"x1hc1fzr",$$css:!0},row:{position:"x1n2onr6",$$css:!0},visuallyHidden:{clip:"xzpqnlu",clipPath:"x1hyvwdk",height:"xjm9jq1",overflowX:"x6ikm8r",overflowY:"x10wlt62",position:"x10l6tqk",width:"x1i1rx1s",$$css:!0}};function r(a){var b=a.key;(b==="ArrowUp"||b==="ArrowDown"||b==="ArrowLeft"||b==="ArrowRight"||b==="PageUp"||b==="PageDown"||b==="Home"||b==="End")&&a.preventDefault()}var s=h._("__JHASH__U5V4JiyTDSI__JHASH__"),t=h._("__JHASH__GoIrDg5lzef__JHASH__"),u=h._("__JHASH__ctLNxPXr8we__JHASH__"),v=l.forwardRef(a);function a(a,b){var d=p(17),e=a.ariaLabel,f=a.focusable,g=a.onPress,h=a.text;a=a.xstyle;var i=c("useCometTheme")("invert"),j=i[0];i=i[1];var k;d[0]!==g?(k=function(){return g()},d[0]=g,d[1]=k):k=d[1];var m;d[2]!==i||d[3]!==a?(m=[i,q.enterModalButton,a],d[2]=i,d[3]=a,d[4]=m):m=d[4];d[5]!==h?(i=l.jsx(c("MDSTextPairing.react"),{body:h,bodyColor:"primary",level:4}),d[5]=h,d[6]=i):i=d[6];d[7]!==e||d[8]!==f||d[9]!==k||d[10]!==b||d[11]!==m||d[12]!==i?(a=l.jsx(c("MWXPressable.react"),{"aria-label":e,focusable:f,onPress:k,ref:b,xstyle:m,children:i}),d[7]=e,d[8]=f,d[9]=k,d[10]=b,d[11]=m,d[12]=i,d[13]=a):a=d[13];d[14]!==j||d[15]!==a?(h=l.jsx(j,{children:a}),d[14]=j,d[15]=a,d[16]=h):h=d[16];return h}function b(a){var b=p(62),e=a.children,f=a.domElementRef,g=a.focusCellOnRender,j=a.isDialogOpened,w=a.isFocused,x=a.isModal,y=a.message,z=a.messageDomID,A=a.outgoing,B=a.setFocused,C=a.setHovered,D=a.setIsDialogOpened,E=a.stopHoveringRef;a=a.theme;var F=g===void 0?!1:g,G=d("MWV2MessageListIsRowModalContext.react").useMWV2MessageListIsRowModal(),H=o(null),I=n();b[0]!==G||b[1]!==y.messageId||b[2]!==I?(g=function(){G(function(){return y.messageId}),c("setTimeout")(function(){d("FocusRegion.react").focusRegionById(I,d("focusScopeQueries").tabbableScopeQuery)},0)},b[0]=G,b[1]=y.messageId,b[2]=I,b[3]=g):g=b[3];var J=g;b[4]!==G?(g=function(){G(function(){return""});var a=H.current;if(a!=null)return a.focus()},b[4]=G,b[5]=g):g=b[5];var K=g;g=d("TimestampUtils").getTimestamp(c("useServerTime")(),new Date((k||(k=d("I64"))).to_float(y.timestampMs)));var L=d("MWPMessageAuthor.react").useAuthorName();L=L[0];A=A?h._("__JHASH__g90cYI08lR4__JHASH__"):L!=null?L:h._("__JHASH__I4KHPAQ-RAf__JHASH__");var M=n();L=c("CometScreenReaderText.react");g=h._("__JHASH__BGN2Md9i0L4__JHASH__",[h._param("Stringified timestamp of the incoming message",g),h._param("Name of the author of the incoming message",A)]);b[6]!==L||b[7]!==M||b[8]!==g?(A=l.jsx(L,{id:M,text:g}),b[6]=L,b[7]=M,b[8]=g,b[9]=A):A=b[9];var N=A,O=n(),P=o(null),Q=c("gkx")("22803");L=o(c("emptyFunction"));g=o(c("emptyFunction"));A=o(c("emptyFunction"));var R=o(c("emptyFunction")),S;b[10]!==j||b[11]!==B||b[12]!==D?(S={isDialogOpened:j,setFocused:B,setIsDialogOpened:D},b[10]=j,b[11]=B,b[12]=D,b[13]=S):S=b[13];D=S;S=D;b[14]===Symbol["for"]("react.memo_cache_sentinel")?(D={forwardMessage:A,openReactionsMenu:L,removeMessage:R,replyToMessage:g},b[14]=D):D=b[14];A=D;L=A;var T=c("useMAWEditMessageData")()!=null;R=c("useMWPEditMessageDeemphasizer")(y.messageId);b[15]!==w||b[16]!==B||b[17]!==G||b[18]!==j||b[19]!==x||b[20]!==y.messageId?(g=function(a){if(w!==a){B(function(){return a});return G(function(){if((a||j)&&x)return y.messageId;else return""})}},b[15]=w,b[16]=B,b[17]=G,b[18]=j,b[19]=x,b[20]=y.messageId,b[21]=g):g=b[21];D=g;b[22]!==w||b[23]!==B?(A=function(a){w!==a&&B(function(){return a});var b=P.current;if(a&&b!=null){c("setTimeout")(function(){try{return b.scrollIntoView({behavior:"smooth",block:"nearest"})}catch(a){return b.scrollIntoView(!1)}},0);return}},b[22]=w,b[23]=B,b[24]=A):A=b[24];g=A;var U;b[25]!==F?(A=function(){if(F){var a;(a=H.current)==null?void 0:a.focus();(a=H.current)==null?void 0:a.scrollIntoView()}},U=[F],b[25]=F,b[26]=A,b[27]=U):(A=b[26],U=b[27]);m(A,U);A=T?c("emptyFunction"):C;b[28]!==R?(U=[q.row,R],b[28]=R,b[29]=U):U=b[29];C=T?void 0:D;R=T?void 0:g;b[30]!==x||b[31]!==T||b[32]!==I||b[33]!==z||b[34]!==M||b[35]!==O||b[36]!==e||b[37]!==N||b[38]!==K||b[39]!==J||b[40]!==y?(D=function(a,b){a=l.jsx(d("MWMessageTableFocusTable.react").FocusTable[2],{children:l.jsx("div",{className:(i||(i=c("stylex")))(q.cell,x?q.cellModal:!1,b?q.cellFocusVisible:!1),"data-release-focus-from":"CLICK","data-scope":d("MWMessageTableFocusTable.react").scopeID,ref:H,role:"gridcell",tabIndex:T?-1:0,children:l.jsx(c("FocusInertRegion.react"),{disabled:x,focusQuery:d("focusScopeQueries").tabbableScopeQuery,children:x?l.jsxs(l.Fragment,{children:[l.jsx(d("FocusRegion.react").FocusRegion,{autoFocusQuery:d("focusScopeQueries").tabbableScopeQuery,autoRestoreFocus:!0,containFocusQuery:d("focusScopeQueries").tabbableScopeQuery,id:I,recoverFocusQuery:d("focusScopeQueries").tabbableScopeQuery,children:l.jsx(c("KeyCommandHandler.react"),{onKeyDown:r,children:l.jsxs("div",{"aria-describedby":z,"aria-labelledby":M,id:O,role:"dialog",children:[e,x?N:null,l.jsx(v,{ariaLabel:t,focusable:!0,onPress:K,text:h._("__JHASH__PEyi9JodUw1__JHASH__"),xstyle:q.enterModalButtonVisible})]})})}),d("ReactDOM").createPortal(l.jsx("div",{"aria-owns":O}),document.body)]}):e})})});return l.jsxs(l.Fragment,{children:[l.jsx(d("MWMessageCellFocusTable.react").keyCommands,{onEnter:x||T?void 0:J,onEscape:x?K:void 0,onSpace:x||T?void 0:J,children:Q?l.jsx(d("MWMessageCellKeyCommands.react").keyCommands,{message:y,children:a}):a}),l.jsx("div",{role:"gridcell",children:l.jsx(v,{ariaLabel:x?h._("__JHASH__7kFsaJ4_Q_k__JHASH__"):s,focusable:x,onPress:J,ref:P,text:x?h._("__JHASH__7kFsaJ4_Q_k__JHASH__"):u,xstyle:b&&!x?q.enterModalButtonVisible:q.visuallyHidden})})]})},b[30]=x,b[31]=T,b[32]=I,b[33]=z,b[34]=M,b[35]=O,b[36]=e,b[37]=N,b[38]=K,b[39]=J,b[40]=y,b[41]=D):D=b[41];b[42]!==C||b[43]!==R||b[44]!==D?(g=l.jsx(d("MWMessageTableFocusTable.react").FocusTable[1],{children:l.jsx(c("FocusWithinHandler.react"),{onFocusChange:C,onFocusVisibleChange:R,children:D})}),b[42]=C,b[43]=R,b[44]=D,b[45]=g):g=b[45];b[46]!==y.messageId?(C=l.jsx(c("MWEditMessageOverlay.react"),{messageId:y.messageId}),b[46]=y.messageId,b[47]=C):C=b[47];b[48]!==g||b[49]!==C?(R=l.jsxs(l.Fragment,{children:[g,C]}),b[48]=g,b[49]=C,b[50]=R):R=b[50];b[51]!==f||b[52]!==y||b[53]!==A||b[54]!==E||b[55]!==a||b[56]!==U||b[57]!==R?(D=l.jsx(d("MWV2MessageRowActionsContext.react").MWV2MessageRowActionsContextProvider,{value:L,children:l.jsx(d("MWPBaseMessageListRow.react").MWPBaseMessageListRow,{domElementRef:f,message:y,role:"row",setHovered:A,stopHoveringRef:E,theme:a,xstyle:U,children:R})}),b[51]=f,b[52]=y,b[53]=A,b[54]=E,b[55]=a,b[56]=U,b[57]=R,b[58]=D):D=b[58];b[59]!==S||b[60]!==D?(g=l.jsx(c("BaseHeadingContextWrapper.react"),{children:l.jsx(d("MWV2MessageRowIsRowFocusedContext.react").MWV2MessageRowIsRowFocusedContextProvider,{value:S,children:D})}),b[59]=S,b[60]=D,b[61]=g):g=b[61];return g}g["default"]=b}),226);
__d("MWPNewMessageDraftContext.react",["react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));c=h;e=c.createContext;var j=c.useContext,k=c.useRef,l=c.c,m=e();function a(a){var b=l(2);a=a.children;var c=k("");b[0]!==a?(c=i.jsx(m.Provider,{value:c,children:a}),b[0]=a,b[1]=c):c=b[1];return c}function b(){return j(m)}g.MWPNewMessageDraftContextProvider=a;g.useNewMessageDraftContext=b}),98);
__d("MWPSendMessageLogger",["LSIntEnum","LSPendingTasksPluginType","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h,i=c("requireDeferred")("MWLogSend").__setRef("MWPSendMessageLogger");function a(a,b,e,f,g,j,k,l,m,n,o,p){var q=n!=null&&(h||(h=d("LSIntEnum"))).unwrapIntEnum(n)===c("LSPendingTasksPluginType").IGD_INSTAMADILLO,r=q?1:0;i.onReady(function(c){return c.log(a,{actor:f,additionalTags:q?["armadillo_express"]:void 0,attachmentFbids:j,attachmentType:l,backend:r,ephemeralDurationInSec:p,hasReply:m,isInstamadilloTTLC:o,offlineThreadingId:g,sendType:0,source:k,threadKey:b,threadType:e})})}g.log=a}),98);
__d("MWPThreadGradientBackground.react",["BaseTheme.react","MWPColorUtils","MWPThemeCSSProvider.react","isStringNullOrEmpty","react","useMWPThreadTheme"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;var j=b.useEffect,k=b.useState,l=b.c,m={container:{backgroundPosition:"x1xsqp64",backgroundSize:"x18d0r48",display:"x78zum5",flexBasis:"x1r8uery",flexDirection:"xdt5ytf",flexGrow:"x1iyjqo2",maxHeight:"xmz0i5r",overflowX:"x6ikm8r",overflowY:"x10wlt62",position:"x1n2onr6",$$css:!0}},n=new Map();function o(){var a=l(21),b=c("useMWPThreadTheme")(),e=b.backgroundGradientColors,f=b.outgoingGradientColors;b=b.threadTheme;var g=b.backgroundUrl;b=b.fallbackColor;var h;a[0]!==g?(h=g!=null&&n.has(g)?g:void 0,a[0]=g,a[1]=h):h=a[1];h=k(h);var i=h[0],m=h[1],o=d("MWPThemeCSSProvider.react").useIsThemeV2(),p;a[2]!==g||a[3]!==o?(h=function(){if(g==null||!o)return;if(n.has(g)){m(g);return}var a;a=!1;var b=new Image();b.src=g;b.onload=function(){n.set(g,b);if(a)return;m(g)};return function(){a=!0}},p=[g,o],a[2]=g,a[3]=o,a[4]=h,a[5]=p):(h=a[4],p=a[5]);j(h,p);if(o&&(!c("isStringNullOrEmpty")(g)||e.length>0)){if(g===i&&g!=null){h="url("+g+")";a[6]!==h?(p={backgroundImage:h},a[6]=h,a[7]=p):p=a[7];return p}if(e.length>1){a[8]!==e?(i=d("MWPColorUtils").gradient(e),a[8]=e,a[9]=i):i=a[9];a[10]!==i?(h={backgroundImage:i},a[10]=i,a[11]=h):h=a[11];return h}else{if(a[12]!==e||a[13]!==b){h=d("MWPColorUtils").int64ToHex((i=e==null?void 0:(p=e[0])==null?void 0:p.color)!=null?i:b);a[12]=e;a[13]=b;a[14]=h}else h=a[14];a[15]!==h?(p={backgroundColor:h},a[15]=h,a[16]=p):p=a[16];return p}}if(f.length>1){a[17]!==f?(i=d("MWPColorUtils").gradient(f),a[17]=f,a[18]=i):i=a[18];a[19]!==i?(e={backgroundImage:i},a[19]=i,a[20]=e):e=a[20];return e}}function a(a){var b,d=l(3);a=a.children;b=(b=o())!=null?b:{};var e;d[0]!==b||d[1]!==a?(e=i.jsx(c("BaseTheme.react"),{style:b,xstyle:m.container,children:a}),d[0]=b,d[1]=a,d[2]=e):e=d[2];return e}g.MWPThreadGradientBackground=a}),98);
__d("MWPreloadedText",["react"],(function(a,b,c,d,e,f,g){"use strict";var h;a=(h||d("react")).createContext;b=a({text:null});g["default"]=b}),98);
__d("MWUnvaultedText",["cr:2472","react"],(function(a,b,c,d,e,f,g){"use strict";var h;c=h||d("react");c.useMemo;var i=c.c,j=function(a,c){if(b("cr:2472")==null||c==null||c==="")return c;return a?b("cr:2472").unvaultOrThrow(c):b("cr:2472").unvault(c,!0)};function a(a,b){var c=i(3),d;c[0]!==a||c[1]!==b?(d=j(a,b),c[0]=a,c[1]=b,c[2]=d):d=c[2];a=d;b=a;return b}g.getMWUnvaultedText=j;g.useMWUnvaultedText=a}),98);
__d("MWV2AdminMsgArmadilloEphemeralChangeDuration.react",["MWAdminTextLayout.react","cr:7125","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||(h=d("react"))).c,j=h;function a(a){var d=i(6);a=a.message;var e=a.adminMsgCtaTitle,f;d[0]!==e||d[1]!==a.threadKey?(f=e!=null&&b("cr:7125")!=null?j.jsx("div",{className:"xz94kzr x1rg5ohu xo1l8bm",children:j.jsx(b("cr:7125"),{threadKey:a.threadKey,title:e})}):null,d[0]=e,d[1]=a.threadKey,d[2]=f):f=d[2];e=f;d[3]!==e||d[4]!==a?(f=j.jsx(c("MWAdminTextLayout.react"),{cta:e,message:a}),d[3]=e,d[4]=a,d[5]=f):f=d[5];return f}g["default"]=a}),98);
__d("MWV2AdminMsgBMGenAIConsumerDisclaimerLearnMore.react",["fbt","MWAdminMsgCtaLink.react","MWAdminTextLayout.react","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=(i||(i=d("react"))).c,k=i;function a(a){var b=j(3);a=a.message;var d;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(d=k.jsx(c("MWAdminMsgCtaLink.react"),{href:"https://www.facebook.com/legal/ai-terms",target:"_blank",children:h._("__JHASH__0TSM4SpHjsx__JHASH__")}),b[0]=d):d=b[0];b[1]!==a?(d=k.jsx(c("MWAdminTextLayout.react"),{cta:d,message:a}),b[1]=a,b[2]=d):d=b[2];return d}g["default"]=a}),226);
__d("MWV2AdminMsgDMLearnMore.react",["fbt","IGDDisappearingMessagesStrings","MWAdminTextLayout.react","MWXLink.react","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=(i||(i=d("react"))).c,k=i;function a(a){var b=j(3);a=a.message;var e;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(e=k.jsx(c("MWXLink.react"),{href:d("IGDDisappearingMessagesStrings").LEARN_MORE_LINK,target:"_blank",children:h._("__JHASH__t0_WbzixXKp__JHASH__")}),b[0]=e):e=b[0];b[1]!==a?(e=k.jsx(c("MWAdminTextLayout.react"),{cta:e,message:a}),b[1]=a,b[2]=e):e=b[2];return e}g["default"]=a}),226);
__d("XPolarisDirectInboxControllerRouteBuilder",["jsExtraRouteBuilder"],(function(a,b,c,d,e,f,g){a=c("jsExtraRouteBuilder")("/direct/inbox/",Object.freeze({initial_e2ee_toggle_position:!1,recurring_notification:!1}),["/direct/t/{?thread_key}/","/direct/{?subpage}/{?folder}/"],void 0);b=a;g["default"]=b}),98);
__d("useAdminMessageCTATitleProvider",["cr:1374","qex","react","useMAWSeparateReadsSelector"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).c;function a(a,e,f){var g=i(2);a=b("cr:1374")(a,e);if(g[0]!==f){var h;h=f&&((h=c("qex")._("62"))!=null?h:!1);g[0]=f;g[1]=h}else h=g[1];f=d("useMAWSeparateReadsSelector").useMAWSeparateReadsSelector("Title",e.adminMsgCtaTitle,a,h);return f}g["default"]=a}),98);
__d("MWV2AdminMsgE2EECutoverRollback.react",["CurrentEnvironment","I64","MWAdminTextLayout.react","MWInboxRouteBuilder","MWXLink.react","ReQL","ReQLSuspense","WALoggerDeferred","XPolarisDirectInboxControllerRouteBuilder","promiseDone","react","react-strict-dom","useAdminMessageCTATitleProvider","useIsSecureMessage","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["Failed to generate the url, thread is missing in mi_act_mapping table for threadKey ",""]);k=function(){return a};return a}var l=j||d("react"),m={adminTextCta:{color:"xz94kzr",display:"x1rg5ohu",fontWeight:"xk50ysn",$$css:!0}};function a(a){var b=a.message,e=(h||(h=c("useReStore")))();a=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableAscending(e.tables.mi_act_mapping_table).getKeyRange(b.threadKey).map(function(a){return(i||(i=d("I64"))).to_string(a.jid)})},[e,b.threadKey],f.id+":43");var g;a!=null?c("CurrentEnvironment").instagramdotcom?g=c("XPolarisDirectInboxControllerRouteBuilder").buildExtraURL("/direct/t/{?thread_key}/",{thread_key:a}):g=d("MWInboxRouteBuilder").buildURL({thread_key:a}):(c("promiseDone")(d("WALoggerDeferred").LOG(k(),(i||(i=d("I64"))).to_string(b.threadKey))),g=d("MWInboxRouteBuilder").buildHomeURL());a=c("useIsSecureMessage")(e,b,{fallbackIsSecure:!0});a=c("useAdminMessageCTATitleProvider")(e,b,a);g=a!=null?l.jsx(d("react-strict-dom").html.div,{style:m.adminTextCta,children:l.jsx(c("MWXLink.react"),{href:g,target:"_self",children:a})}):null;return l.jsx(c("MWAdminTextLayout.react"),{cta:g,message:b})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWV2AdminMsgE2EEDescription.react",["fbt","CurrentEnvironment","JSResourceForInteraction","MDSLockSvgIcon.react","MWAdminTextLayout.react","MWXLink.react","XInstagramHelpDotComContentControllerRouteBuilder","react","useAdminMessageCTATitleProvider","useIsSecureMessage","useMWXLazyDialog","useReStore"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=(j||(j=d("react"))).c,l=j,m=c("JSResourceForInteraction")("MAWLearnMoreCutoverDialog.react").__setRef("MWV2AdminMsgE2EEDescription.react"),n=h._("__JHASH__8YEBJluoCs5__JHASH__");function a(a){var b=k(12);a=a.message;var d=(i||(i=c("useReStore")))();if(b[0]===Symbol["for"]("react.memo_cache_sentinel")){var e;e=(e=c("XInstagramHelpDotComContentControllerRouteBuilder").buildUri({cms_id:"491565145294150"}).setDomain("help.instagram.com"))==null?void 0:(e=e.setProtocol("https"))==null?void 0:e.toString();b[0]=e}else e=b[0];e=e;var f;b[1]===Symbol["for"]("react.memo_cache_sentinel")?(f={},b[1]=f):f=b[1];var g=f;f=c("useMWXLazyDialog")(m);var h=f[0];b[2]!==h?(f=function(){return h(g)},b[2]=h,b[3]=f):f=b[3];f=f;var j;b[4]===Symbol["for"]("react.memo_cache_sentinel")?(j={fallbackIsSecure:!0},b[4]=j):j=b[4];j=c("useIsSecureMessage")(d,a,j);d=c("useAdminMessageCTATitleProvider")(d,a,j);b[5]!==d||b[6]!==f?(j=d!=null?c("CurrentEnvironment").instagramdotcom?l.jsx(c("MWXLink.react"),{href:e,target:"_blank",children:n}):l.jsx("div",{className:"xz94kzr x1rg5ohu xk50ysn",children:l.jsx(c("MWXLink.react"),{onClick:f,target:"_blank",children:d})}):null,b[5]=d,b[6]=f,b[7]=j):j=b[7];e=j;b[8]===Symbol["for"]("react.memo_cache_sentinel")?(d=l.jsx("div",{className:"x1o583il x1rg5ohu x177n6bx x1n2onr6",children:l.jsx(c("MDSLockSvgIcon.react"),{color:"tertiary",size:16})}),b[8]=d):d=b[8];b[9]!==e||b[10]!==a?(f=l.jsxs(l.Fragment,{children:[d,l.jsx(c("MWAdminTextLayout.react"),{cta:e,message:a})]}),b[9]=e,b[10]=a,b[11]=f):f=b[11];return f}g["default"]=a}),226);
__d("MWV2AdminMsgICDC.react",["fbt","MWAdminTextLayout.react","MWXLink.react","react","react-strict-dom"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=(i||(i=d("react"))).c,k=i,l="https://www.facebook.com/help/147596532316790";function a(a){var b=j(3);a=a.message;var e;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(e=k.jsx(d("react-strict-dom").html.div,{children:k.jsx(c("MWXLink.react"),{color_DEPRECATED:"blueLink",href:l,target:"_blank",children:h._("__JHASH__t0_WbzixXKp__JHASH__")})}),b[0]=e):e=b[0];b[1]!==a?(e=k.jsx(c("MWAdminTextLayout.react"),{cta:e,message:a}),b[1]=a,b[2]=e):e=b[2];return e}g["default"]=a}),226);
__d("MWV2AdminMsgNotificationMessageManageNotifications.react",["I64","MWAdminTextLayout.react","MWNotificationMessageManageNotificationsAdminMsgCta.react","ReQL","ReQLSuspense","react","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=(j||(j=d("react"))).c,l=j;function a(a){var b=k(17),e=a.isOptOut,g=a.message,j=(h||(h=c("useReStore")))();b[0]!==j.tables.admin_message_ctas||b[1]!==g.threadKey||b[2]!==g.messageId||b[3]!==g.adminMsgCtaId?(a=function(){var a;return d("ReQL").fromTableAscending(j.tables.admin_message_ctas).getKeyRange(g.threadKey,g.messageId,(a=g.adminMsgCtaId)!=null?a:(i||(i=d("I64"))).neg_one)},b[0]=j.tables.admin_message_ctas,b[1]=g.threadKey,b[2]=g.messageId,b[3]=g.adminMsgCtaId,b[4]=a):a=b[4];var m;b[5]!==j||b[6]!==g?(m=[j,g],b[5]=j,b[6]=g,b[7]=m):m=b[7];a=d("ReQLSuspense").useFirst(a,m,f.id+":35");m=g.adminMsgCtaTitle;var n=a==null?void 0:a.targetId,o;b[8]!==m||b[9]!==a||b[10]!==n||b[11]!==e||b[12]!==g.threadKey?(o=m!=null&&a!=null&&n!=null?l.jsx("div",{className:"x1rg5ohu x1s688f",children:l.jsx(c("MWNotificationMessageManageNotificationsAdminMsgCta.react"),{isOptOut:e,targetId:n,threadKey:g.threadKey,title:m})}):null,b[8]=m,b[9]=a,b[10]=n,b[11]=e,b[12]=g.threadKey,b[13]=o):o=b[13];m=o;b[14]!==m||b[15]!==g?(a=l.jsx(c("MWAdminTextLayout.react"),{cta:m,message:g}),b[14]=m,b[15]=g,b[16]=a):a=b[16];return a}g["default"]=a}),98);
__d("P2bDifferentiationPrivacyDisclosureOpenClickWebFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("3008");b=d("FalcoLoggerInternal").create("p2b_differentiation_privacy_disclosure_open_click_web",a);e=b;g["default"]=e}),98);
__d("MWV2AdminMsgP2BPrivacyDisclosure.react",["I64","JSResourceForInteraction","MWAdminTextLayout.react","MWXLink.react","P2bDifferentiationPrivacyDisclosureOpenClickWebFalcoEvent","ReQL","ReQLSuspense","react","useMWXLazyDialog","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=(j||(j=d("react"))).c,l=j,m=c("JSResourceForInteraction")("MWPrivacyDisclosureDialog.react").__setRef("MWV2AdminMsgP2BPrivacyDisclosure.react");function a(a){var b=k(15),e=a.message,g=(h||(h=c("useReStore")))();b[0]!==g.tables.admin_message_ctas||b[1]!==e.threadKey||b[2]!==e.messageId||b[3]!==e.adminMsgCtaId?(a=function(){var a;return d("ReQL").fromTableAscending(g.tables.admin_message_ctas).getKeyRange(e.threadKey,e.messageId,(a=e.adminMsgCtaId)!=null?a:(i||(i=d("I64"))).neg_one)},b[0]=g.tables.admin_message_ctas,b[1]=e.threadKey,b[2]=e.messageId,b[3]=e.adminMsgCtaId,b[4]=a):a=b[4];var j;b[5]!==g||b[6]!==e?(j=[g,e],b[5]=g,b[6]=e,b[7]=j):j=b[7];a=d("ReQLSuspense").useFirst(a,j,f.id+":31");j=c("useMWXLazyDialog")(m);var n=j[0];j=a==null?void 0:a.title;b[8]!==j||b[9]!==n||b[10]!==e.threadKey?(a=j!=null?l.jsx(c("MWXLink.react"),{onClick:function(){n({entryPoint:"ADMIN_TEXT",threadKey:e.threadKey},function(){}),c("P2bDifferentiationPrivacyDisclosureOpenClickWebFalcoEvent").log(function(){return{consumer_id:"0",entry_point:"ADMIN_TEXT",page_id:(i||(i=d("I64"))).to_string(e.threadKey)}})},children:j}):null,b[8]=j,b[9]=n,b[10]=e.threadKey,b[11]=a):a=b[11];j=a;b[12]!==j||b[13]!==e?(a=l.jsx(c("MWAdminTextLayout.react"),{cta:j,message:e}),b[12]=j,b[13]=e,b[14]=a):a=b[14];return a}g["default"]=a}),98);
__d("MWV2AdminMsgPostMessageRemoveActions.react",["C4GFalcoLoggerDeferred","I64","JSResourceForInteraction","MWAdminTextLayout.react","MWXLink.react","ReQL","ReQLSuspense","react","useMWXLazyDialog","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=i||(i=d("react"));b=i;b.useCallback;var l=b.c,m=c("JSResourceForInteraction")("MWCMAdmodRemoveMessageOtherActionsDialog.react").__setRef("MWV2AdminMsgPostMessageRemoveActions.react");function n(a){var b=l(7),e=a.senderId,f=a.threadKey;a=a.title;var g=c("useMWXLazyDialog")(m),h=g[0];b[0]!==f||b[1]!==h||b[2]!==e?(g=function(){d("C4GFalcoLoggerDeferred").logC4GEngagementFalcoEvent({action:"tap",event:"message_removed_more_actions_sheet_rendered",surface:"thread_view",thread_id:(j||(j=d("I64"))).to_string(f)}),h({senderId:e,threadKey:f})},b[0]=f,b[1]=h,b[2]=e,b[3]=g):g=b[3];g=g;var i;b[4]!==g||b[5]!==a?(i=k.jsx(c("MWXLink.react"),{color_DEPRECATED:"highlight",onClick:g,role:"button",children:a}),b[4]=g,b[5]=a,b[6]=i):i=b[6];return i}function a(a){var b=l(17),e=a.message,g=(h||(h=c("useReStore")))();b[0]!==g.tables.admin_message_ctas||b[1]!==e.threadKey||b[2]!==e.messageId||b[3]!==e.adminMsgCtaId?(a=function(){var a;return d("ReQL").fromTableAscending(g.tables.admin_message_ctas).getKeyRange(e.threadKey,e.messageId,(a=e.adminMsgCtaId)!=null?a:(j||(j=d("I64"))).neg_one)},b[0]=g.tables.admin_message_ctas,b[1]=e.threadKey,b[2]=e.messageId,b[3]=e.adminMsgCtaId,b[4]=a):a=b[4];var i;b[5]!==g||b[6]!==e?(i=[g,e],b[5]=g,b[6]=e,b[7]=i):i=b[7];a=d("ReQLSuspense").useFirst(a,i,f.id+":63");i=a==null?void 0:a.title;a=a==null?void 0:a.actionUrl;var m=null;if(a!=null){if(b[8]!==a){var o=new URL(a);o=o.searchParams.get("removed_msg_sender_id");b[8]=a;b[9]=o}else o=b[9];m=o}b[10]!==m||b[11]!==i||b[12]!==e.threadKey?(a=m!=null&&i!=null?k.jsx(n,{senderId:m,threadKey:e.threadKey,title:i}):null,b[10]=m,b[11]=i,b[12]=e.threadKey,b[13]=a):a=b[13];o=a;b[14]!==o||b[15]!==e?(m=k.jsx(c("MWAdminTextLayout.react"),{cta:o,message:e}),b[14]=o,b[15]=e,b[16]=m):m=b[16];return m}g["default"]=a}),98);
__d("MWV2AdminMsgServiceBookingLegalDisclaimer.react",["I64","JSResourceForInteraction","MWAdminTextLayout.react","MWXLink.react","ReQL","ReQLSuspense","react","useMWXLazyDialog","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=(j||(j=d("react"))).c,l=j,m=c("JSResourceForInteraction")("MWPrivacyDisclosureDialog.react").__setRef("MWV2AdminMsgServiceBookingLegalDisclaimer.react");function a(a){var b=k(15),e=a.message,g=(h||(h=c("useReStore")))();b[0]!==g.tables.admin_message_ctas||b[1]!==e.threadKey||b[2]!==e.messageId||b[3]!==e.adminMsgCtaId?(a=function(){var a;return d("ReQL").fromTableAscending(g.tables.admin_message_ctas).getKeyRange(e.threadKey,e.messageId,(a=e.adminMsgCtaId)!=null?a:(i||(i=d("I64"))).neg_one)},b[0]=g.tables.admin_message_ctas,b[1]=e.threadKey,b[2]=e.messageId,b[3]=e.adminMsgCtaId,b[4]=a):a=b[4];var j;b[5]!==g||b[6]!==e?(j=[g,e],b[5]=g,b[6]=e,b[7]=j):j=b[7];a=d("ReQLSuspense").useFirst(a,j,f.id+":32");j=c("useMWXLazyDialog")(m);var n=j[0];j=a==null?void 0:a.title;b[8]!==j||b[9]!==n||b[10]!==e.threadKey?(a=j!=null?l.jsx(c("MWXLink.react"),{onClick:function(){return n({entryPoint:"ADMIN_TEXT",threadKey:e.threadKey},function(){})},children:j}):null,b[8]=j,b[9]=n,b[10]=e.threadKey,b[11]=a):a=b[11];j=a;b[12]!==j||b[13]!==e?(a=l.jsx(c("MWAdminTextLayout.react"),{cta:j,message:e}),b[12]=j,b[13]=e,b[14]=a):a=b[14];return a}g["default"]=a}),98);
__d("MWV2AdminMsgShowPinnedMessages.react",["JSResourceForInteraction","LSMessagingThreadTypeUtil","MWAdminMsgCtaLink.react","MWAdminTextLayout.react","MWPBumpEntityKey","MessengerWebUXLogger","ReQL","ReQLSuspense","react","useAdminMessageCTATitleProvider","useIsSecureMessage","useMWXLazyDialog","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=(i||(i=d("react"))).c,k=i,l=c("JSResourceForInteraction")("MWPinnedMessagesDialog.react").__setRef("MWV2AdminMsgShowPinnedMessages.react");function a(a){var b=j(21),e=a.message,g=(h||(h=c("useReStore")))();a=c("useMWXLazyDialog")(l);var i=a[0];b[0]!==g.tables.threads||b[1]!==e.threadKey?(a=function(){return d("ReQL").fromTableAscending(g.tables.threads,["threadType"]).getKeyRange(e.threadKey)},b[0]=g.tables.threads,b[1]=e.threadKey,b[2]=a):a=b[2];var m;b[3]!==g||b[4]!==e.threadKey?(m=[g,e.threadKey],b[3]=g,b[4]=e.threadKey,b[5]=m):m=b[5];var n=d("ReQLSuspense").useFirst(a,m,f.id+":36"),o=c("MessengerWebUXLogger").useInteractionLogger();b[6]!==e.threadKey||b[7]!==n||b[8]!==o||b[9]!==i?(a=function(){var a={eventName:"open_view_pinned_messages_dialog",threadKey:e.threadKey,threadType:n==null?void 0:n.threadType};o==null?void 0:o(a);d("MWPBumpEntityKey").bumpEntityKeyWithAppId("mw_pinned_messages","see_all_admin_msg_cta");return i({threadKey:e.threadKey},function(){})},b[6]=e.threadKey,b[7]=n,b[8]=o,b[9]=i,b[10]=a):a=b[10];m=a;b[11]!==n?(a=n!=null&&d("LSMessagingThreadTypeUtil").isArmadilloSecure(n==null?void 0:n.threadType),b[11]=n,b[12]=a):a=b[12];var p;b[13]!==a?(p={fallbackIsSecure:a},b[13]=a,b[14]=p):p=b[14];a=c("useIsSecureMessage")(g,e,p);p=c("useAdminMessageCTATitleProvider")(g,e,a);b[15]!==p||b[16]!==m?(a=p!=null?k.jsx(c("MWAdminMsgCtaLink.react"),{onClick:m,children:p}):null,b[15]=p,b[16]=m,b[17]=a):a=b[17];p=a;b[18]!==p||b[19]!==e?(m=k.jsx(c("MWAdminTextLayout.react"),{cta:p,message:e}),b[18]=p,b[19]=e,b[20]=m):m=b[20];return m}g["default"]=a}),98);
__d("MWV2AdminMsgViewMessagesDualThreadCutover.react",["I64","LSFactory","LSIntEnum","LSPlatformWaitForTaskCompletion","LSVerifyThreadRowExistsStoredProcedure","MWAdminTextLayout.react","MWXLink.react","MWXText.react","ReQL","WALoggerDeferred","asyncToGeneratorRuntime","promiseDone","react","useAsyncReStore","useMWNavigation"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["[Dual-thread-cutover] Failed to navitage to open messages thread ",""]);k=function(){return a};return a}var l=h||(h=d("react")),m=h.useCallback;function a(a){var e=a.message,f=c("useAsyncReStore")(),g=c("useMWNavigation")();a=m(function(){c("promiseDone")(f,function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b,f=(b=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.tables.mi_act_mapping_table).getKeyRange(e.threadKey))))==null?void 0:b.jid;f&&(yield c("LSPlatformWaitForTaskCompletion")(a,function(a){return c("LSVerifyThreadRowExistsStoredProcedure")(c("LSFactory")(a),{syncGroup:(i||(i=d("LSIntEnum"))).ofNumber(1),threadKey:f,threadType:i.ofNumber(1)})},"readwrite"));b=f?yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.tables.threads).getKeyRange(f)):null;b?g.openTabOrInbox({clientThreadKey:b.clientThreadKey,threadKey:b.threadKey,threadType:b.threadType},"preCutoverThread"):void d("WALoggerDeferred").LOG(k(),(j||(j=d("I64"))).to_string(e.threadKey))});return function(b){return a.apply(this,arguments)}}())},[f,e.threadKey,g]);var h=e.adminMsgCtaTitle;a=h!=null?l.jsx(c("MWXLink.react"),{onClick:a,role:"button",children:l.jsx(c("MWXText.react"),{color:"blueLink",type:"body4",children:h})}):null;return l.jsx(c("MWAdminTextLayout.react"),{cta:a,message:e})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWV2AdminMsgViewPoll.react",["I64","MWAdminMsgCtaLink.react","MWAdminTextLayout.react","ReQL","ReQLSuspense","justknobx","react","useMWChatPollXMAActionHandler","useMWHasPollsVotingEnabled","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=j||(j=d("react")),l=j.useCallback;function a(a){var b=a.message,e=(h||(h=c("useReStore")))(),g=d("ReQLSuspense").useFirst(function(){var a;return d("ReQL").fromTableAscending(e.tables.admin_message_ctas).getKeyRange(b.threadKey,b.messageId,(a=b.adminMsgCtaId)!=null?a:(i||(i=d("I64"))).neg_one)},[e,b],f.id+":28");a=c("useMWHasPollsVotingEnabled")(b.threadKey);var j=c("useMWChatPollXMAActionHandler")(),m=l(function(){j(g==null?void 0:g.targetId,g==null?void 0:g.targetTitle)},[g==null?void 0:g.targetId,g==null?void 0:g.targetTitle,j]);if(!c("justknobx")._("1987")||!a||g==null)return k.jsx(c("MWAdminTextLayout.react"),{message:b});a=g==null?void 0:g.title;m=a!=null?k.jsx(c("MWAdminMsgCtaLink.react"),{onClick:m,children:a}):null;return k.jsx(c("MWAdminTextLayout.react"),{cta:m,message:b})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWV2AdminMsgWebUrl.react",["AdsMessengerContext.react","I64","MWAdminTextLayout.react","MWXLink.react","ReQL","ReQLSuspense","react","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=j||(j=d("react"));b=j;var l=b.useContext,m=b.c;function a(a){var b=m(15),e=a.message,g=(h||(h=c("useReStore")))();b[0]!==g.tables.admin_message_ctas||b[1]!==e.threadKey||b[2]!==e.messageId||b[3]!==e.adminMsgCtaId?(a=function(){var a;return d("ReQL").fromTableAscending(g.tables.admin_message_ctas).getKeyRange(e.threadKey,e.messageId,(a=e.adminMsgCtaId)!=null?a:(i||(i=d("I64"))).neg_one)},b[0]=g.tables.admin_message_ctas,b[1]=e.threadKey,b[2]=e.messageId,b[3]=e.adminMsgCtaId,b[4]=a):a=b[4];var j;b[5]!==g||b[6]!==e?(j=[g,e],b[5]=g,b[6]=e,b[7]=j):j=b[7];a=d("ReQLSuspense").useFirst(a,j,f.id+":26");j=l(d("AdsMessengerContext.react").AdsMessengerContext);var n=a==null?void 0:a.title;a=a==null?void 0:a.actionUrl;j=(j==null?void 0:j.messengerLinkColor)||"primary";var o;b[8]!==n||b[9]!==a||b[10]!==j?(o=n!=null&&a!=null?k.jsx(c("MWXLink.react"),{color_DEPRECATED:j,href:a,target:"_blank",children:n}):null,b[8]=n,b[9]=a,b[10]=j,b[11]=o):o=b[11];n=o;b[12]!==n||b[13]!==e?(a=k.jsx(c("MWAdminTextLayout.react"),{cta:n,message:e}),b[12]=n,b[13]=e,b[14]=a):a=b[14];return a}g["default"]=a}),98);
__d("MWV2SBGProactiveChatMutationUrl.react",["CometRelay","I64","LWICometProactiveChatOptInMutation.react","MWAdminMsgCtaLink.react","MWAdminTextLayout.react","ReQL","ReQLSuspense","react","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=(j||(j=d("react"))).c,l=j;function a(a){var b=k(17),e=a.message,g=a.opted_in,j=d("CometRelay").useRelayEnvironment(),m=(h||(h=c("useReStore")))();b[0]!==m.tables.admin_message_ctas||b[1]!==e.threadKey||b[2]!==e.messageId||b[3]!==e.adminMsgCtaId?(a=function(){var a;return d("ReQL").fromTableAscending(m.tables.admin_message_ctas).getKeyRange(e.threadKey,e.messageId,(a=e.adminMsgCtaId)!=null?a:(i||(i=d("I64"))).neg_one)},b[0]=m.tables.admin_message_ctas,b[1]=e.threadKey,b[2]=e.messageId,b[3]=e.adminMsgCtaId,b[4]=a):a=b[4];var n;b[5]!==m||b[6]!==e?(n=[m,e],b[5]=m,b[6]=e,b[7]=n):n=b[7];a=d("ReQLSuspense").useFirst(a,n,f.id+":32");a=(n=a==null?void 0:a.title)!=null?n:"";b[8]!==j||b[9]!==g?(n=function(){return d("LWICometProactiveChatOptInMutation.react").commitProactiveChatOptInMutation({entryPoint:"sbg_messenger_xmat",environment:j,optInValue:g,setLoading:function(){},setOptedIn:function(){}})},b[8]=j,b[9]=g,b[10]=n):n=b[10];n=n;var o;b[11]!==a||b[12]!==n?(o=a!=null?l.jsx(c("MWAdminMsgCtaLink.react"),{onClick:n,children:a}):null,b[11]=a,b[12]=n,b[13]=o):o=b[13];a=o;b[14]!==a||b[15]!==e?(n=l.jsx(c("MWAdminTextLayout.react"),{cta:a,message:e}),b[14]=a,b[15]=e,b[16]=n):n=b[16];return n}g["default"]=a}),98);
__d("MWV2ChatAdminMessage.react",["MWAdminTextLayout.react","MWNotificationMessageInstantGameCustomUpdateMuteManagementAdminMsgCta.react","MWNotificationMessageInstantGameSubscriptionManagementAdminMsgCta.react","MWV2AdminMsgArmadilloEphemeralChangeDuration.react","MWV2AdminMsgBMGenAIConsumerDisclaimerLearnMore.react","MWV2AdminMsgDMLearnMore.react","MWV2AdminMsgE2EECutoverRollback.react","MWV2AdminMsgE2EEDescription.react","MWV2AdminMsgICDC.react","MWV2AdminMsgNotificationMessageManageNotifications.react","MWV2AdminMsgP2BPrivacyDisclosure.react","MWV2AdminMsgPostMessageRemoveActions.react","MWV2AdminMsgServiceBookingLegalDisclaimer.react","MWV2AdminMsgShowPinnedMessages.react","MWV2AdminMsgViewMessagesDualThreadCutover.react","MWV2AdminMsgViewPoll.react","MWV2AdminMsgWebUrl.react","MWV2SBGProactiveChatMutationUrl.react","MWXText.react","gkx","react","react-strict-dom"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||(h=d("react"))).c,j=h,k={color:{color:"x186z157",fontWeight:"xk50ysn",$$css:!0},container:{paddingTop:"xyamay9",paddingBottom:"x1l90r2v",paddingStart:"x5ib6vp",paddingEnd:"xc73u3c",paddingLeft:null,paddingRight:null,$$css:!0},containerThatPrecedesAdminMessage:{paddingBottom:"x1a8lsjc",$$css:!0},containerThatProceedsAdminMessage:{paddingTop:"x889kno",$$css:!0},content:{marginTop:"xr1yuqi",marginEnd:"xkrivgy",marginBottom:"x4ii5y1",marginStart:"x1gryazu",maxWidth:"x1ekjcvx",textAlign:"x2b8uid",wordBreak:"x13faqbe",$$css:!0}};function l(a){if(a!=null)return a.isAdminMessage;else return!1}function m(a){var b=i(8),c=a.children,e=a.nextMessage;a=a.prevMessage;a=l(a)?k.containerThatProceedsAdminMessage:!1;e=l(e)?k.containerThatPrecedesAdminMessage:!1;var f;b[0]!==a||b[1]!==e?(f=[k.container,a,e],b[0]=a,b[1]=e,b[2]=f):f=b[2];b[3]!==c?(a=j.jsx(d("react-strict-dom").html.div,{style:k.content,children:c}),b[3]=c,b[4]=a):a=b[4];b[5]!==f||b[6]!==a?(e=j.jsx(d("react-strict-dom").html.div,{"data-testid":void 0,style:f,children:a}),b[5]=f,b[6]=a,b[7]=e):e=b[7];return e}function n(a){var b=i(44);a=a.message;bb0:switch(a.adminMsgCtaType){case"admin_msg_armadillo_ephemeral_change_duration":var d;b[0]!==a?(d=j.jsx(c("MWV2AdminMsgArmadilloEphemeralChangeDuration.react"),{message:a}),b[0]=a,b[1]=d):d=b[1];return d;case"admin_msg_dual_thread_cutover":b[2]!==a?(d=j.jsx(c("MWV2AdminMsgViewMessagesDualThreadCutover.react"),{message:a}),b[2]=a,b[3]=d):d=b[3];return d;case"admin_msg_web_url":b[4]!==a?(d=j.jsx(c("MWV2AdminMsgWebUrl.react"),{message:a}),b[4]=a,b[5]=d):d=b[5];return d;case"admin_msg_sbg_proactive_chat_opt_in":b[6]!==a?(d=j.jsx(c("MWV2SBGProactiveChatMutationUrl.react"),{message:a,opted_in:!0}),b[6]=a,b[7]=d):d=b[7];return d;case"admin_msg_sbg_proactive_chat_opt_out":b[8]!==a?(d=j.jsx(c("MWV2SBGProactiveChatMutationUrl.react"),{message:a,opted_in:!1}),b[8]=a,b[9]=d):d=b[9];return d;case"admin_msg_p2b_privacy_disclosure":if(c("gkx")("24144")){b[10]!==a?(d=j.jsx(c("MWV2AdminMsgP2BPrivacyDisclosure.react"),{message:a}),b[10]=a,b[11]=d):d=b[11];return d}else break bb0;case"admin_notification_messages_opt_out":b[12]!==a?(d=j.jsx(c("MWV2AdminMsgNotificationMessageManageNotifications.react"),{isOptOut:!0,message:a}),b[12]=a,b[13]=d):d=b[13];return d;case"admin_notification_messages_opt_in":b[14]!==a?(d=j.jsx(c("MWV2AdminMsgNotificationMessageManageNotifications.react"),{isOptOut:!1,message:a}),b[14]=a,b[15]=d):d=b[15];return d;case"admin_msg_thread_level_cutover":b[16]!==a?(d=j.jsx(c("MWV2AdminMsgE2EEDescription.react"),{message:a}),b[16]=a,b[17]=d):d=b[17];return d;case"admin_msg_e2ee_thread":return null;case"admin_msg_cutover_rollback":b[18]!==a?(d=j.jsx(c("MWV2AdminMsgE2EECutoverRollback.react"),{message:a}),b[18]=a,b[19]=d):d=b[19];return d;case"xmat_instant_game_bot_message_subscribe":b[20]!==a?(d=j.jsx(c("MWNotificationMessageInstantGameSubscriptionManagementAdminMsgCta.react"),{message:a,shouldSubscribe:!0}),b[20]=a,b[21]=d):d=b[21];return d;case"xmat_instant_game_bot_message_unsubscribe":b[22]!==a?(d=j.jsx(c("MWNotificationMessageInstantGameSubscriptionManagementAdminMsgCta.react"),{message:a,shouldSubscribe:!1}),b[22]=a,b[23]=d):d=b[23];return d;case"admin_msg_view_pin_msgs_v2":b[24]!==a?(d=j.jsx(c("MWV2AdminMsgShowPinnedMessages.react"),{message:a}),b[24]=a,b[25]=d):d=b[25];return d;case"xmat_instant_game_custom_update_message_mute":b[26]!==a?(d=j.jsx(c("MWNotificationMessageInstantGameCustomUpdateMuteManagementAdminMsgCta.react"),{message:a,shouldMute:!0}),b[26]=a,b[27]=d):d=b[27];return d;case"xmat_instant_game_custom_update_message_unmute":b[28]!==a?(d=j.jsx(c("MWNotificationMessageInstantGameCustomUpdateMuteManagementAdminMsgCta.react"),{message:a,shouldMute:!1}),b[28]=a,b[29]=d):d=b[29];return d;case"admin_message_service_booking_legal_disclaimer":b[30]!==a?(d=j.jsx(c("MWV2AdminMsgServiceBookingLegalDisclaimer.react"),{message:a}),b[30]=a,b[31]=d):d=b[31];return d;case"admin_msg_admod_post_msg_remove_actions":b[32]!==a?(d=j.jsx(c("MWV2AdminMsgPostMessageRemoveActions.react"),{message:a}),b[32]=a,b[33]=d):d=b[33];return d;case"admin_msg_poll_details":b[34]!==a?(d=j.jsx(c("MWV2AdminMsgViewPoll.react"),{message:a}),b[34]=a,b[35]=d):d=b[35];return d;case"admin_msg_icdc":b[36]!==a?(d=j.jsx(c("MWV2AdminMsgICDC.react"),{message:a}),b[36]=a,b[37]=d):d=b[37];return d;case"admin_msg_ig_dm_learn_more":b[38]!==a?(d=j.jsx(c("MWV2AdminMsgDMLearnMore.react"),{message:a}),b[38]=a,b[39]=d):d=b[39];return d;case"admin_msg_bm_genai_consumer_disclaimer_learn_more":b[40]!==a?(d=j.jsx(c("MWV2AdminMsgBMGenAIConsumerDisclaimerLearnMore.react"),{message:a}),b[40]=a,b[41]=d):d=b[41];return d}b[42]!==a?(d=j.jsx(c("MWAdminTextLayout.react"),{message:a}),b[42]=a,b[43]=d):d=b[43];return d}function a(a){var b=i(6),e=a.message,f=a.nextMessage;a=a.prevMessage;if(e.adminMsgCtaType==="admin_msg_e2ee_thread")return null;var g;b[0]!==e?(g=j.jsx(c("MWXText.react"),{color:"tertiary",type:"meta4",children:j.jsx(d("react-strict-dom").html.div,{style:k.color,children:j.jsx(n,{message:e})})}),b[0]=e,b[1]=g):g=b[1];b[2]!==f||b[3]!==a||b[4]!==g?(e=j.jsx(m,{nextMessage:f,prevMessage:a,children:g}),b[2]=f,b[3]=a,b[4]=g,b[5]=e):e=b[5];return e}g.isAdminMessage=l;g.MWV2ChatAdminMessageContainer=m;g.MWV2ChatAdminMessage=a}),98);
__d("MWV2ChatBubble.react",["MWXMessageBubble.react","mwpMessageIsReply","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||(h=d("react"))).c,j=h;function a(a){var b=i(9),d=a.emphasized,e=a.message,f=a.xmaLayout,g=a.children,h=a.connectBottom,k=a.connectTop,l=a.outgoing;a=a.precedesXMA;e=c("mwpMessageIsReply")(e);var m=l?"right":"left";l=l?"outgoing":"incoming";e=e||d?"opaque":"default";b[0]!==m||b[1]!==l||b[2]!==h||b[3]!==k||b[4]!==a||b[5]!==e||b[6]!==f||b[7]!==g?(d=j.jsx(c("MWXMessageBubble.react"),{align:m,color:l,connectBottom:h,connectTop:k,precedesXMA:a,variant:e,xmaLayout:f,children:g}),b[0]=m,b[1]=l,b[2]=h,b[3]=k,b[4]=a,b[5]=e,b[6]=f,b[7]=g,b[8]=d):d=b[8];return d}g["default"]=a}),98);
__d("MWV2ChatBubbleContainer.react",["MWChatBubbleEmphasisRing.react","MWV2ChatBubble.react","react","xmaLayouts"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||(h=d("react"))).c,j=h;function a(a){var b=i(15),e,f,g,h,k;b[0]!==a?(e=a.hasEmphasisRing,h=a.message,f=a.xmaLayout,g=a.children,k=babelHelpers.objectWithoutPropertiesLoose(a,["hasEmphasisRing","message","xmaLayout","children"]),b[0]=a,b[1]=e,b[2]=f,b[3]=g,b[4]=h,b[5]=k):(e=b[1],f=b[2],g=b[3],h=b[4],k=b[5]);a=e===void 0?!1:e;e=f===void 0?d("xmaLayouts").XMA_LAYOUTS.DEFAULT:f;b[6]!==g||b[7]!==a||b[8]!==h||b[9]!==e||b[10]!==k?(f=j.jsx(c("MWV2ChatBubble.react"),babelHelpers["extends"]({children:g,emphasized:a,message:h,xmaLayout:e},k)),b[6]=g,b[7]=a,b[8]=h,b[9]=e,b[10]=k,b[11]=f):f=b[11];g=f;if(a){b[12]!==k||b[13]!==g?(h=j.jsx(c("MWChatBubbleEmphasisRing.react"),babelHelpers["extends"]({hasXMA:!1},k,{children:g})),b[12]=k,b[13]=g,b[14]=h):h=b[14];return h}return g}g["default"]=a}),98);
__d("MWV2ChatComposerGetViewContent",["Lexical","MessengerLexicalActorNode","MessengerLexicalEntityTextNode","cr:3101","cr:6138"],(function(a,b,c,d,e,f,g){"use strict";var h=b("cr:3101")||b("cr:6138");a={getRanges:function(a){var b=[],c=0;a.getEditorState().read(function(){var a=d("Lexical").$getRoot().getFirstChild();a instanceof d("Lexical").ElementNode&&a.getChildren().forEach(function(a){if(d("MessengerLexicalEntityTextNode").isMessengerLexicalEntityTextNode(a)){var e=a.getEntity();b.push({id:e.id,length:a.getTextContent().length,offset:c,type:d("MessengerLexicalActorNode").$isMessengerLexicalActorNode(a)?a.getRangeType():"p"})}if(h!=null&&a instanceof h.MessengerLexicalCommandNode){e=a.getEntity();b.push({id:e.commandId,length:a.getTextContent().length,offset:c,type:a.getRangeType()})}c+=a.getTextContent().length})});return b}};c=a;g["default"]=c}),98);
__d("MWV2ChatEmoji.react",["CometTextWithEntities.react","I64","LSHotEmojiSize","LSIntEnum","MWChatBubbleEmphasisRing.react","MWChatTextTransform","MWV2ChatEmojiHotLike.react","ReStoreVaulting","gkx","justknobx","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=h||(h=d("react"));b=h;b.useMemo;var l=b.c,m=(e={},e[c("LSHotEmojiSize").NONE]=32,e[c("LSHotEmojiSize").SMALL]=32,e[c("LSHotEmojiSize").MEDIUM]=56,e[c("LSHotEmojiSize").LARGE]=96,e);function a(a){var b=l(14),e=a.hasEmphasisRing,f=a.isSecureMessage;a=a.message;e=e===void 0?!1:e;f=f===void 0?!1:f;var g=a.hotEmojiSize,h=g!=null&&((i||(i=d("I64"))).equal(g,(j||(j=d("LSIntEnum"))).ofNumber(c("LSHotEmojiSize").SMALL))||(i||(i=d("I64"))).equal(g,(j||(j=d("LSIntEnum"))).ofNumber(c("LSHotEmojiSize").MEDIUM))||(i||(i=d("I64"))).equal(g,(j||(j=d("LSIntEnum"))).ofNumber(c("LSHotEmojiSize").LARGE))),n;b[0]!==g?(n=g?(j||(j=d("LSIntEnum"))).unwrapIntEnum(g):c("LSHotEmojiSize").NONE,b[0]=g,b[1]=n):n=b[1];g=n;b[2]!==g?(n=d("MWChatTextTransform").textTransformsWithOptions({size:!c("gkx")("23249")&&c("gkx")("2539")?m[g]:32}),b[2]=g,b[3]=n):n=b[3];n=n;n=n;a=a.text;if(a==null)return null;var o;b[4]!==a?(o=d("ReStoreVaulting").maybeUnvault(a),b[4]=a,b[5]=o):o=b[5];a=o;if(f&&h&&a==="\ud83d\udc4d"){b[6]!==g?(o=k.jsx(c("MWV2ChatEmojiHotLike.react"),{hotEmojiSize:g}),b[6]=g,b[7]=o):o=b[7];return o}b[8]===Symbol["for"]("react.memo_cache_sentinel")?(f=c("justknobx")._("3030"),b[8]=f):f=b[8];b[9]!==a||b[10]!==n?(h=k.jsx(c("CometTextWithEntities.react"),{text:a,transforms:n,withLineBreaks:f,withParagraphs:!0}),b[9]=a,b[10]=n,b[11]=h):h=b[11];g=h;if(e){b[12]!==g?(o=k.jsx(c("MWChatBubbleEmphasisRing.react"),{connectBottom:!1,connectTop:!1,hasXMA:!1,outgoing:!1,precedesXMA:!1,children:g}),b[12]=g,b[13]=o):o=b[13];return o}return g}g["default"]=a}),98);
__d("MWV2ChatErrorBubble.react",["fbt","MWV2TombstonedMessage.react","gkx","react","react-strict-dom"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=(i||(i=d("react"))).c,k=i,l={vr:{height:"x36qwtl",width:"xh8yej3",$$css:!0},withBackground:{backgroundColor:"x1eb86dx",$$css:!0},withRepliedMessage:{zIndex:"x1vjfegm",$$css:!0}};function a(a){var b=j(9),e=a.isOutgoing;a=a.isReply;var f=!c("gkx")("4809"),g=a?l.withRepliedMessage:f&&l.withBackground,i;b[0]!==a?(i=a?null:k.jsx(d("react-strict-dom").html.div,{style:[l.vr,f&&l.withBackground]}),b[0]=a,b[1]=i):i=b[1];b[2]===Symbol["for"]("react.memo_cache_sentinel")?(a=h._("__JHASH__fgvjfNhcDBr__JHASH__"),b[2]=a):a=b[2];b[3]!==e?(f=k.jsx(c("MWV2TombstonedMessage.react"),{isOutgoing:e,xstyle:f&&l.withBackground,children:a}),b[3]=e,b[4]=f):f=b[4];b[5]!==g||b[6]!==i||b[7]!==f?(a=k.jsxs(d("react-strict-dom").html.div,{style:g,children:[i,f]}),b[5]=g,b[6]=i,b[7]=f,b[8]=a):a=b[8];return a}g["default"]=a}),226);
__d("MWV2ChatSeenHeadsRow.react",["fbt","JSResourceForInteraction","MDSGlimmer.react","MWLSThreadDisplayContext","MWV2MessageRowIsRowFocusedContext.react","MWXImage.react","MWXPressable.react","MWXTooltip.react","MWXTooltipGroup.react","getFBTSafeGenderFromGenderConst","getMessengerPreciseTimestamp","react","react-forget-runtime","react-strict-dom","useMWXLazyDialog"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||(i=d("react"));b=i;b.useContext;var k=b.useRef,l=b.c,m=5,n=c("JSResourceForInteraction")("MWV2ChatSeenHeadsDialog.react").__setRef("MWV2ChatSeenHeadsRow.react"),o={heads:{display:"x78zum5",flexShrink:"x2lah0s",$$css:!0},img:{borderTopStartRadius:"x1rcc7c0",borderTopEndRadius:"xbtbmw4",borderBottomEndRadius:"x1lie4ck",borderBottomStartRadius:"x16hxpj1",height:"x1v9usgg",paddingEnd:"x19um543",paddingStart:"x1m6msm",verticalAlign:"xxymvpz",width:"x6jxa94",$$css:!0},mask:{backgroundColor:"x1eb86dx",$$css:!0},overflow:{backgroundColor:"x1qhmfi1",borderTopStartRadius:"x1lq5wgf",borderTopEndRadius:"xgqcy7u",borderBottomEndRadius:"x30kzoy",borderBottomStartRadius:"x9jhf4c",color:"xi81zsa",fontSize:"x1ncwhqj",fontWeight:"x117nqv4",lineHeight:"x1hkbg2g",marginTop:"xdj266r",marginEnd:"x11i5rnm",marginBottom:"xat24cr",marginStart:"x1mh8g0r",paddingTop:"xexx8yu",paddingEnd:"x150jy0e",paddingBottom:"x18d9i69",paddingStart:"x1e558r4",textAlign:"x2b8uid",$$css:!0},root:{display:"x78zum5",paddingBottom:"x1120s5i",$$css:!0},spacer:{flexBasis:"x1r8uery",flexGrow:"x1iyjqo2",$$css:!0}};function p(a,b,e,f){if(!e)return[];e=Math.max(Math.floor(b-9),0);a=a.slice(e,b);var g="\n"+h._("__JHASH__8_D_WS90lqj__JHASH__",[h._param("Number of additional views",e,[0])]).toString();a=j.jsxs(d("react-strict-dom").html.ul,{children:[a.reverse().map(function(a,b){return j.jsx(d("react-strict-dom").html.li,{children:a.name},String(b))}),e>0?j.jsx(d("react-strict-dom").html.li,{children:g},"overflow"):null]});e=h._("__JHASH__hpZlVXKj1CE__JHASH__",[h._param("the number of additional viewers",b,[0])]);return[j.jsx(c("MWXTooltip.react"),{align:f==="Inbox"?"middle":"end",forceInlineDisplay:!0,label:e,position:"above",tooltip:a,children:j.jsx(d("react-strict-dom").html.span,{style:o.overflow,children:e})},"overflow")]}function q(a){var b=l(12),d=a.displayContext,e=a.index;a=a.user;var f;b[0]!==a.timestamp||b[1]!==a.gender||b[2]!==a.name?(f=a.timestamp>0?h._("__JHASH__i65FoHjBJBT__JHASH__",[h._name("full name",a.name,c("getFBTSafeGenderFromGenderConst")(a.gender)),h._param("seen time",c("getMessengerPreciseTimestamp")(a.timestamp))]):h._("__JHASH__o0y2JESDXU1__JHASH__",[h._name("full name",a.name,c("getFBTSafeGenderFromGenderConst")(a.gender))]),b[0]=a.timestamp,b[1]=a.gender,b[2]=a.name,b[3]=f):f=b[3];f=f;d=d==="Inbox"?"middle":"end";var g;b[4]!==a.imageSrc||b[5]!==e||b[6]!==f?(g=a.imageSrc===""?j.jsx(c("MDSGlimmer.react"),{index:e,xstyle:o.img}):j.jsx(c("MWXImage.react"),{alt:f,src:a.imageSrc,xstyle:o.img}),b[4]=a.imageSrc,b[5]=e,b[6]=f,b[7]=g):g=b[7];b[8]!==d||b[9]!==f||b[10]!==g?(a=j.jsx(c("MWXTooltip.react"),{align:d,forceInlineDisplay:!0,position:"above",tooltip:f,children:g}),b[8]=d,b[9]=f,b[10]=g,b[11]=a):a=b[11];return a}function r(a,b){var c=a.length,d=c>m;c=Math.max(Math.floor(c-(d?m-1:m)),0);var e=a.slice(c);return[].concat(p(a,c,d,b),e.map(function(a,c){return j.jsx(q,{displayContext:b,index:c,user:a},a.id)}))}function a(a){var b=l(26),e=a.messageSeenBy,f=a.xstyle;a=d("react-forget-runtime").useContextWithBailoutExperiment__unstable(d("MWV2MessageRowIsRowFocusedContext.react").context,s);var g=a.setFocused,i=a.setIsDialogOpened;a=e.length;var m=d("MWLSThreadDisplayContext").useMWLSThreadDisplayContext(),p=k(null),q;b[0]!==e?(q={messageSeenBy:e},b[0]=e,b[1]=q):q=b[1];var t=q;q=c("useMWXLazyDialog")(n);var u=q[0];b[2]!==u||b[3]!==t||b[4]!==i||b[5]!==g?(q=function(){return u(t,function(){i(function(){return!1}),g(function(){return!0})})},b[2]=u,b[3]=t,b[4]=i,b[5]=g,b[6]=q):q=b[6];var v=q,w;b[7]===Symbol["for"]("react.memo_cache_sentinel")?(q=[o.root,o.mask],w=j.jsx(d("react-strict-dom").html.div,{style:o.spacer}),b[7]=q,b[8]=w):(q=b[7],w=b[8]);var x;b[9]!==a?(x=h._("__JHASH__JhvMDLpCFuF__JHASH__",[h._param("number of participants who have seen this message",String(a))]).toString(),b[9]=a,b[10]=x):x=b[10];b[11]!==i||b[12]!==v?(a=function(){i(function(){return!0}),v()},b[11]=i,b[12]=v,b[13]=a):a=b[13];var y;b[14]!==f?(y=function(){return[o.heads,f]},b[14]=f,b[15]=y):y=b[15];var z;b[16]!==e||b[17]!==m?(z=r(e,m),b[16]=e,b[17]=m,b[18]=z):z=b[18];b[19]!==z?(e=j.jsx(c("MWXTooltipGroup.react"),{children:z}),b[19]=z,b[20]=e):e=b[20];b[21]!==x||b[22]!==a||b[23]!==y||b[24]!==e?(m=j.jsxs(d("react-strict-dom").html.div,{role:"none",style:q,children:[w,j.jsx(c("MWXPressable.react"),{"aria-label":x,onPress:a,overlayDisabled:!0,ref:p,xstyle:y,children:e})]}),b[21]=x,b[22]=a,b[23]=y,b[24]=e,b[25]=m):m=b[25];return m}function s(a){return[a.setFocused,a.setIsDialogOpened]}g["default"]=a}),226);
__d("MWV2ChatTextUtils",["AdsAIMessengerUtils","MWPVisibleMessageContext.react","MWV2ChatTextParserUtils","justknobx","react","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=(i||d("react")).useMemo;function a(a,b){if(b.length===0)return a;var c=0,d="";b.forEach(function(b){var e=b.offset;b=b.length;d+=a.substring(c,e);b=e+b;d+="\u2066"+a.substring(e,b)+"\u2069";c=b});c<a.length&&(d+=a.substring(c));return d}function k(a,b,c){var e=b.mentionIds,f=b.mentionLengths,g=b.mentionOffsets;b=b.mentionTypes;return e!=null&&f!=null&&g!=null&&b!=null?d("MWV2ChatTextParserUtils").findRangesForMentions(a,e,f,g,b,c):[]}function l(a,b,c){if(a==null)return[];if(a.messageId!==c)return[];var d=b.indexOf(a.contextLine);if(d>-1)return a.highlights.map(function(a){return{entity:{__typename:"Highlight"},length:a.matchLength,offset:a.matchOffset+d}});else return[]}function b(a,b){var e=(h||(h=c("useReStore")))(),f=d("MWPVisibleMessageContext.react").useMWPVisibleMessageContext(),g=f.visibleMessage,i=d("AdsAIMessengerUtils").isMessageFromAdsAIBot(b)&&c("justknobx")._("2986");return j(function(){return a==null||d("MWV2ChatTextParserUtils").isEmojiOnlyMessage(a)?[]:k(e,{mentionIds:b.mentionIds,mentionLengths:b.mentionLengths,mentionOffsets:b.mentionOffsets,mentionTypes:b.mentionTypes},a).concat(d("MWV2ChatTextParserUtils").findRanges(a,i)).concat(l(g==null?void 0:g,a,b.messageId))},[a,b.mentionIds,b.mentionLengths,b.mentionOffsets,b.mentionTypes,b.messageId,e,g,i])}g.getRTLOMitigatedText=a;g.useRanges=b}),98);
__d("MWXMessageBaseMessageListText.react",["MWChatTextTransform","MWXMessageTextWithEntities.react","MWXText.react","react","react-strict-dom"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||(h=d("react"))).c,j=h,k={incoming:{color:"x18lvrbx",$$css:!0},outgoing:{color:"xyk4ms5",$$css:!0},regular:{marginTop:"x1gslohp",marginEnd:"x11i5rnm",marginBottom:"x12nagc",marginStart:"x1mh8g0r",textAlign:"x1yc453h",whiteSpace:"x126k92a",$$css:!0}};function a(a){var b=i(14),e=a.outgoing,f=a.text,g=a.xstyle,h=a.ranges,l=a.renderers;a=a.transforms;if(f==null)return null;var m=e?"white":"primary";e=e?k.outgoing:k.incoming;var n;b[0]!==e||b[1]!==g?(n=[k.regular,e,g],b[0]=e,b[1]=g,b[2]=n):n=b[2];g=(e=a)!=null?e:d("MWChatTextTransform").textTransforms;b[3]!==h||b[4]!==l||b[5]!==f||b[6]!==g?(a=j.jsx(c("MWXMessageTextWithEntities.react"),{ranges:h,renderers:l,text:f,transforms:g,withParagraphs:!1}),b[3]=h,b[4]=l,b[5]=f,b[6]=g,b[7]=a):a=b[7];b[8]!==n||b[9]!==a?(e=j.jsx(d("react-strict-dom").html.div,{dir:"auto",style:n,children:a}),b[8]=n,b[9]=a,b[10]=e):e=b[10];b[11]!==m||b[12]!==e?(h=j.jsx(c("MWXText.react"),{color:m,type:"body3",children:e}),b[11]=m,b[12]=e,b[13]=h):h=b[13];return h}g["default"]=a}),98);
__d("MWXMessageListText.react",["I64","LSIntEnum","LSMessageReplySourceTypeV2","MWChatTextTransform","MWXMessageBaseMessageListText.react","MWXMessageBlockQuote.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=(h||(h=d("react"))).c,l=h;function a(a){var b=k(14),e=a.message,f=a.xstyleForForwarded,g=a.xstyleForText,h=a.outgoing,m=a.ranges,n=a.renderers,o=a.text;a=a.transforms;if(o==null)return null;var p;b[0]!==e.replySourceTypeV2?(p=e.replySourceTypeV2!=null&&(i||(i=d("I64"))).equal(e.replySourceTypeV2,(j||(j=d("LSIntEnum"))).ofNumber(c("LSMessageReplySourceTypeV2").FORWARD)),b[0]=e.replySourceTypeV2,b[1]=p):p=b[1];e=p;a=(p=a)!=null?p:d("MWChatTextTransform").textTransforms;b[2]!==h||b[3]!==m||b[4]!==n||b[5]!==o||b[6]!==a||b[7]!==g?(p=l.jsx(c("MWXMessageBaseMessageListText.react"),{outgoing:h,ranges:m,renderers:n,text:o,transforms:a,xstyle:g}),b[2]=h,b[3]=m,b[4]=n,b[5]=o,b[6]=a,b[7]=g,b[8]=p):p=b[8];m=p;b[9]!==e||b[10]!==h||b[11]!==f||b[12]!==m?(n=e?l.jsx(c("MWXMessageBlockQuote.react"),{outgoing:h,xstyle:f,children:m}):m,b[9]=e,b[10]=h,b[11]=f,b[12]=m,b[13]=n):n=b[13];return n}g["default"]=a}),98);
__d("MWV2ChatText.react",["MWUnvaultedText","MWV2ChatTextUtils","MWXMessageListText.react","isMWBumpMessage","react","useMWTextRenderers","useStringWithSubstitutions"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;b.useMemo;var j=b.c;function a(a){var b=j(13),e=a.isSecureMessage,f=a.message;a=a.outgoing;var g=c("useMWTextRenderers")(a,e),h=f.text;h=d("MWUnvaultedText").useMWUnvaultedText(e,h);var m=d("MWV2ChatTextUtils").useRanges(h,f);if(h==null)return null;if(e&&c("isMWBumpMessage")(f)){var n;b[0]!==f||b[1]!==a||b[2]!==m||b[3]!==g||b[4]!==h?(n=i.jsx(l,{message:f,outgoing:a,ranges:m,renderers:g,text:h}),b[0]=f,b[1]=a,b[2]=m,b[3]=g,b[4]=h,b[5]=n):n=b[5];return n}b[6]!==e||b[7]!==f||b[8]!==a||b[9]!==m||b[10]!==g||b[11]!==h?(n=i.jsx(k,{isSecureMessage:e,message:f,outgoing:a,ranges:m,renderers:g,text:h}),b[6]=e,b[7]=f,b[8]=a,b[9]=m,b[10]=g,b[11]=h,b[12]=n):n=b[12];return n}function k(a){var b=j(8),e=a.isSecureMessage,f=a.message,g=a.outgoing,h=a.ranges,k=a.renderers;a=a.text;if(b[0]!==f.mentionIds){var l;l=new Set((l=(l=f.mentionIds)==null?void 0:l.split==null?void 0:l.split(","))!=null?l:[]);b[0]=f.mentionIds;b[1]=l}else l=b[1];l=l;l=l;l=(e=d("useStringWithSubstitutions").useStringWithMentionSubstitutionsAndUpdatedRanges(e?a:null,h,l))!=null?e:{textWithSubstitutions:a,updatedRanges:h};e=l.textWithSubstitutions;a=l.updatedRanges;b[2]!==f||b[3]!==g||b[4]!==a||b[5]!==k||b[6]!==e?(h=i.jsx(c("MWXMessageListText.react"),{message:f,outgoing:g,ranges:a,renderers:k,text:e}),b[2]=f,b[3]=g,b[4]=a,b[5]=k,b[6]=e,b[7]=h):h=b[7];return h}function l(a){var b,e=j(6),f=a.message,g=a.outgoing,h=a.ranges,k=a.renderers;a=a.text;b=(b=d("useStringWithSubstitutions").useStringWithSubstitutions(a,f.threadKey))!=null?b:a;e[0]!==f||e[1]!==g||e[2]!==h||e[3]!==k||e[4]!==b?(a=i.jsx(c("MWXMessageListText.react"),{message:f,outgoing:g,ranges:h,renderers:k,text:b}),e[0]=f,e[1]=g,e[2]=h,e[3]=k,e[4]=b,e[5]=a):a=e[5];return a}g["default"]=a}),98);
__d("useMAWUnsendContentInSecureThread",["fbt","MWPMessageAuthor.react","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=(i||d("react")).c;function a(a){a=j(3);var b=d("MWPMessageAuthor.react").useAuthorName();b=b[0];if(b!=null){var c;a[0]!==b?(c=h._("__JHASH___lYaXtrKDTe__JHASH__",[h._param("first name",b)]),a[0]=b,a[1]=c):c=a[1];return c}a[2]===Symbol["for"]("react.memo_cache_sentinel")?(b=h._("__JHASH__I-2GRtvMpnJ__JHASH__"),a[2]=b):b=a[2];return b}g["default"]=a}),226);
__d("MWV2ChatUnsentMessage.react",["fbt","I64","MWLSThread","MWPMessageAuthor.react","MWV2TombstonedMessage.react","MWXPressable.react","MWXText.react","ReQL","ReQLSuspense","XCometGroupAdminActivitiesControllerRouteBuilder","mwCMIsAnyCMThread","react","useCommunityFolder","useMAWUnsendContentInSecureThread","useReStore"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l=(j||(j=d("react"))).c,m=j,n={linkText:{paddingTop:"x1y1aw1k",paddingBottom:"xwib8y2",paddingStart:"x16hj40l",paddingEnd:"xsyo7zv",paddingLeft:null,paddingRight:null,$$css:!0}};function o(a){var b=l(5),e=a.attachment,f=a.isSecureMessage;a=a.message;var g;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(g=h._("__JHASH__I-2GRtvMpnJ__JHASH__"),b[0]=g):g=b[0];g=g;a=c("useMAWUnsendContentInSecureThread")(a);var i=d("MWPMessageAuthor.react").useAuthorName();i=i[0];if(f)f=a;else if(i!=null){b[1]!==i?(a=h._("__JHASH___lYaXtrKDTe__JHASH__",[h._param("first name",i)]),b[1]=i,b[2]=a):a=b[2];f=a}else if(e!=null){i=e.descriptionText;f=i!=null?i:g}else f=g;b[3]!==f?(a=m.jsx(c("MWV2TombstonedMessage.react"),{isOutgoing:!1,children:f}),b[3]=f,b[4]=a):a=b[4];return a}function p(a){var b=l(5);a=a.attachment;if(a!=null){a=a.descriptionText;var d;b[0]!==a?(d=a!=null?a:h._("__JHASH__eGohYC1zonu__JHASH__"),b[0]=a,b[1]=d):d=b[1];a=d}else{b[2]===Symbol["for"]("react.memo_cache_sentinel")?(d=h._("__JHASH__eGohYC1zonu__JHASH__"),b[2]=d):d=b[2];a=d}b[3]!==a?(d=m.jsx(c("MWV2TombstonedMessage.react"),{isOutgoing:!0,children:a}),b[3]=a,b[4]=d):d=b[4];return d}function q(a){var b=l(10),e=a.attachment;a=a.thread;a=c("useCommunityFolder")(a);if(e!=null){e=e.cta1Title;var f;b[0]!==e?(f=e!=null?e:h._("__JHASH__8jyfQXNgswL__JHASH__"),b[0]=e,b[1]=f):f=b[1];e=f}else{b[2]===Symbol["for"]("react.memo_cache_sentinel")?(f=h._("__JHASH__8jyfQXNgswL__JHASH__"),b[2]=f):f=b[2];e=f}if(a!=null){f="https://www.facebook.com"+c("XCometGroupAdminActivitiesControllerRouteBuilder").buildURL({idorvanity:(k||(k=d("I64"))).to_string(a.fbGroupId)});b[3]!==f?(a={url:f},b[3]=f,b[4]=a):a=b[4];b[5]!==e?(f=m.jsx(c("MWXText.react"),{color:"blueLink",type:"meta2",children:e}),b[5]=e,b[6]=f):f=b[6];b[7]!==a||b[8]!==f?(e=m.jsx(c("MWXPressable.react"),{linkProps:a,overlayDisabled:!0,xstyle:r,children:f}),b[7]=a,b[8]=f,b[9]=e):e=b[9];return e}else return null}function r(){return[n.linkText]}function a(a){var b=l(20),e=a.isSecureMessage,g=a.message;a=a.outgoing;var h=(i||(i=c("useReStore")))(),j=g.messageId,k=g.threadKey,n=d("MWLSThread").useThread(k),r;b[0]!==h.tables.attachments||b[1]!==k||b[2]!==j?(r=function(){return d("ReQL").fromTableAscending(h.tables.attachments).getKeyRange(k,j)},b[0]=h.tables.attachments,b[1]=k,b[2]=j,b[3]=r):r=b[3];var s;b[4]!==h||b[5]!==j||b[6]!==k?(s=[h,j,k],b[4]=h,b[5]=j,b[6]=k,b[7]=s):s=b[7];r=d("ReQLSuspense").useFirst(r,s,f.id+":145");if(r!=null){s=r.cta1Type;s=s!=null?s==="xma_view_activity_log":!1}else s=!1;var t;b[8]!==a||b[9]!==r||b[10]!==e||b[11]!==g?(t=a?m.jsx(p,{attachment:r}):m.jsx(o,{attachment:r,isSecureMessage:e,message:g}),b[8]=a,b[9]=r,b[10]=e,b[11]=g,b[12]=t):t=b[12];b[13]!==n||b[14]!==s||b[15]!==r?(a=n!=null&&s&&c("mwCMIsAnyCMThread")(n.threadType)?m.jsx(q,{attachment:r,thread:n}):null,b[13]=n,b[14]=s,b[15]=r,b[16]=a):a=b[16];b[17]!==t||b[18]!==a?(e=m.jsxs(m.Fragment,{children:[t,a]}),b[17]=t,b[18]=a,b[19]=e):e=b[19];return e}g.MWV2ChatUnsentMessage=a}),226);
__d("MWV2ComposerActionsContext.react",["react","react-forget-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;c=b.createContext;b.useContext;b.useMemo;var j=b.c,k=c({});function a(a){var b=j(6),c=a.children,e=a.onMessageSendAttempt;a=d("react-forget-runtime").useContextWithBailoutExperiment__unstable(k,l);var f=a.onMessageSendAttempt;b[0]!==f||b[1]!==e?(a={onMessageSendAttempt:function(a){f==null?void 0:f(a),e==null?void 0:e(a)}},b[0]=f,b[1]=e,b[2]=a):a=b[2];a=a;a=a;var g;b[3]!==a||b[4]!==c?(g=i.jsx(k.Provider,{value:a,children:c}),b[3]=a,b[4]=c,b[5]=g):g=b[5];return g}function l(a){return[a.onMessageSendAttempt]}g.MWV2ComposerActionsContext=k;g.MWV2ComposerActionsListener=a}),98);
__d("MWV2FileDropzone.react",["fbt","LSFactory","LSIssueNewErrorStoredProcedure","LSMessagingThreadTypeUtil","LSThreadBitOffset","MWCMThreadTypes.react","MWXText.react","cometIsMimeTypeForMedia","gkx","promiseDone","react","recoverableViolation","stylex","useFileDragEvents","useReStore"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l=k||(k=d("react"));b=k;e=b.createContext;var m=b.useCallback,n=b.useRef,o=b.c,p=e({current:{enabled:!0,handler:null}});function q(a){var b=o(3),c=a.children;a=a.fileUploadHandlerConfigRef;var d=p.Provider;b[0]!==a||b[1]!==c?(d=l.jsx(d,{value:a,children:c}),b[0]=a,b[1]=c,b[2]=d):d=b[2];return d}var r={root:{display:"x78zum5",flexDirection:"xdt5ytf",flexGrow:"x1iyjqo2",maxWidth:"x193iq5w",minHeight:"x2lwn1j",position:"x1n2onr6",$$css:!0}};function s(a){if(a==null)return[];a=a.dataTransfer;return a==null?[]:a.types}function t(a){switch(a){case 0:return void 0;case 1:return h._("__JHASH__M7mGXjgzxvT__JHASH__").toString();default:return h._("__JHASH__UaK2GgtSNQH__JHASH__").toString()}}function u(a,b){var d=t(b);if(d==null)return;c("promiseDone")(a.runInTransaction(function(a){return c("LSIssueNewErrorStoredProcedure")(c("LSFactory")(a),{errorBodyText:d,errorTitleText:d})},"readwrite",void 0,void 0,f.id+":122"))}function v(a){a=a.type;return d("cometIsMimeTypeForMedia").isMimeTypeForPhoto(a)||d("cometIsMimeTypeForMedia").isMimeTypeForVideo(a)?!0:a.startsWith("audio/")}var w=new Set(["text/plain","text/html","text/uri-list"]);function a(a){var b=a.children,e=a.isDisabled,f=a.isMediaOnly,g=a.thread;a=a.xstyle;var k=n({enabled:!1,handler:null}),o=n(null),p=(i||(i=c("useReStore")))(),t=g!=null?(d("MWCMThreadTypes.react").isBroadcastThread(g.threadType)||d("LSMessagingThreadTypeUtil").isDiscoverablePublicBroadcastChannel(g.threadType)||d("LSMessagingThreadTypeUtil").isAiBot(g.threadType))&&!d("LSThreadBitOffset").has(56,g):!1;g=!c("gkx")("24132");var x=e===!0||g||t;e=function(a){var b;return((b=k.current)==null?void 0:b.handler)==null?!1:!s(a).some(function(a){return w.has(a)})};g=c("useFileDragEvents")(function(){return!1},void 0,e);e=m(function(a){var b;if(((b=k.current)==null?void 0:b.enabled)===!1)return;b=(b=k.current)==null?void 0:b.handler;if(b==null){if(!t){var d=k.current==null?"fileUploadHandlerConfigRef was not setup to handle dropped file!":"fileUploadHandlerConfigRef.current.handler was not setup to handle dropped file";c("recoverableViolation")(d,"messenger_web_media")}return}d=Array.from(a);a=f?d.filter(v):d;d.length!==a.length&&u(p,d.length);!x&&a.length!==0&&b(a)},[f,x,t,p]);c("useFileDragEvents")(e,o.current,function(a){return!0});return l.jsxs("div",{className:(j||(j=c("stylex")))(r.root,(e=a)!=null?e:!1),ref:o,children:[l.jsx(q,{fileUploadHandlerConfigRef:k,children:b}),!x&&g?l.jsx("div",{className:"x6s0dn4 x1h0vfkc x1ey2m1c x78zum5 xds687c x17qophe xl56j7k x10l6tqk x13vifvy x1vjfegm",children:l.jsx(c("MWXText.react"),{type:"body1",children:h._("__JHASH__Cpq0daihgaG__JHASH__")})}):null]})}a.displayName=a.name+" [from "+f.id+"]";g.mWV2FileDropzoneContext=p;g.MWV2FileDropzone=a}),226);
__d("MWV2MessageActionsVisibility.react",["react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).useRef;function a(){return i(j)}function j(){}g.useStopHoveringRef=a}),98);
__d("MWV2MessageEndOfGroupContentTextOnly.react",["fbt","MWMessageDeliveryStatus","MWStatusText.react","intlSummarizeNumber","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=(i||(i=d("react"))).c,k=i,l={statusText:{paddingBottom:"xwib8y2",paddingTop:"x1iorvi4",$$css:!0}};function m(a){var b=j(6),d=a.alignLeft,e=a.enableSeenInfo;a=a.num;if(!e){b[0]===Symbol["for"]("react.memo_cache_sentinel")?(e=k.jsx(k.Fragment,{}),b[0]=e):e=b[0];return e}b[1]!==a?(e=h._("__JHASH__SlWkB_YFGR6__JHASH__",[h._param("seenByNumber",c("intlSummarizeNumber")(a))]).toString(),b[1]=a,b[2]=e):e=b[2];b[3]!==d||b[4]!==e?(a=k.jsx(c("MWStatusText.react"),{alignLeft:d,text:e,xstyle:l.statusText}),b[3]=d,b[4]=e,b[5]=a):a=b[5];return a}function a(a){var b=j(13),e=a.alignLeft,f=a.enableSeenInfo;a=a.status;f=f===void 0?!0:f;var g;if(b[0]!==a||b[1]!==f||b[2]!==e){g=Symbol["for"]("react.early_return_sentinel");bb0:{var h=d("MWMessageDeliveryStatus").getBroadcastStatusTitle(a);bb1:switch(a.type){case"NoneStatus":g=null;break bb0;case"Error":g=k.jsx(c("MWStatusText.react"),{error:!0,text:h.toString(),xstyle:l.statusText});break bb0;case"SingleSeenHead":var i;b[4]!==f?(i=k.jsx(m,{enableSeenInfo:f,num:1}),b[4]=f,b[5]=i):i=b[5];g=i;break bb0;case"MultipleSeenHeads":case"DeliveredAndRead":break bb1;case"SeenCount":b[6]!==e||b[7]!==f||b[8]!==a.count?(i=k.jsx(m,{alignLeft:e,enableSeenInfo:f,num:a.count}),b[6]=e,b[7]=f,b[8]=a.count,b[9]=i):i=b[9];g=i;break bb0;case"Loading":g=k.jsx(c("MWStatusText.react"),{alignLeft:e,text:h.toString(),xstyle:l.statusText});break bb0;case"RetriableError":g=k.jsx(c("MWStatusText.react"),{alignLeft:e,error:!0,text:h.toString(),xstyle:l.statusText});break bb0;default:g=k.jsx(c("MWStatusText.react"),{text:h.toString(),xstyle:l.statusText});break bb0}}b[0]=a;b[1]=f;b[2]=e;b[3]=g}else g=b[3];if(g!==Symbol["for"]("react.early_return_sentinel"))return g;b[10]!==f||b[11]!==a.heads.length?(i=k.jsx(m,{enableSeenInfo:f,num:a.heads.length}),b[10]=f,b[11]=a.heads.length,b[12]=i):i=b[12];return i}g["default"]=a}),226);
__d("MWV2MessageEndOfGroupContent.react",["LSMessagingThreadTypeUtil","MWChatSingleSeenHeadRow.react","MWClickToRevealMustacheText.react","MWLSThread","MWMessageDeliveryStatus","MWMessageOutgoingStatus.react","MWPMessageListColumn.react","MWV2ChatSeenHeadsRow.react","MWV2MessageEndOfGroupContentTextOnly.react","justknobx","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||(h=d("react"))).c,j=h,k={baseStyle:{marginEnd:"xpdqn1h",marginTop:"x1gslohp",$$css:!0},lastMessage:{marginBottom:"x12nagc",$$css:!0},nonLastMessage:{marginBottom:"xod5an3",$$css:!0},seenHeads:{marginTop:"x1gslohp",marginEnd:"xw3qccf",marginBottom:"xjpr12u",marginStart:"x1mh8g0r",$$css:!0}};function a(a){var b=i(34),e=a.alignLeft,f=a.enableSeenInfo,g=a.hasTextBasedMessageReceipts,h=a.isFromBlockedContact,m=a.isLastMessage,n=a.isOutgoing,o=a.isTextOnly,p=a.message;a=a.status;f=f===void 0?!0:f;var q=d("MWLSThread").useThread(p.threadKey,l);if(m&&g&&a.type==="NoneStatus"){var r;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(r=j.jsx(d("MWPMessageListColumn.react").MWPMessageListColumnVerticalRhythm,{height:17}),b[0]=r):r=b[0];return r}if(h){b[1]!==p.messageId?(r=j.jsx(c("MWClickToRevealMustacheText.react"),{messageId:p.messageId}),b[1]=p.messageId,b[2]=r):r=b[2];return r}if(o===!0){b[3]!==e||b[4]!==f||b[5]!==a?(h=j.jsx(c("MWV2MessageEndOfGroupContentTextOnly.react"),{alignLeft:e,enableSeenInfo:f,status:a}),b[3]=e,b[4]=f,b[5]=a,b[6]=h):h=b[6];return h}if(a.type==="MultipleSeenHeads"){r=g&&(m?k.lastMessage:k.nonLastMessage);o=g&&k.baseStyle;b[7]!==r||b[8]!==o?(h=[k.seenHeads,r,o],b[7]=r,b[8]=o,b[9]=h):h=b[9];b[10]!==a.heads||b[11]!==h?(r=j.jsx(d("MWPMessageListColumn.react").MWPMessageListColumnShrinkwrap,{children:j.jsx(c("MWV2ChatSeenHeadsRow.react"),{messageSeenBy:a.heads,xstyle:h})}),b[10]=a.heads,b[11]=h,b[12]=r):r=b[12];return r}if(m===!0&&q===!0&&g===!0&&a.type==="SeenCount"){if(a.count>0||!c("justknobx")._("2943")){b[13]!==e||b[14]!==f||b[15]!==a?(o=j.jsx(c("MWV2MessageEndOfGroupContentTextOnly.react"),{alignLeft:e,enableSeenInfo:f,status:a}),b[13]=e,b[14]=f,b[15]=a,b[16]=o):o=b[16];return o}b[17]===Symbol["for"]("react.memo_cache_sentinel")?(h=j.jsx(d("MWPMessageListColumn.react").MWPMessageListColumnVerticalRhythm,{height:22}),b[17]=h):h=b[17];return h}if(g&&a.type==="SingleSeenHead"){r=a.head;b[18]!==a.head?(q=d("MWMessageDeliveryStatus").getSingleSeenHead(a.head),b[18]=a.head,b[19]=q):q=b[19];f=m?k.lastMessage:k.nonLastMessage;b[20]!==f?(o=[f,k.baseStyle],b[20]=f,b[21]=o):o=b[21];b[22]!==a.head||b[23]!==q||b[24]!==o?(h=j.jsx(c("MWChatSingleSeenHeadRow.react"),{head:r,text:q,xstyle:o}),b[22]=a.head,b[23]=q,b[24]=o,b[25]=h):h=b[25];return h}if(n&&g){f=m?k.lastMessage:k.nonLastMessage;b[26]!==f?(r=[f,k.baseStyle],b[26]=f,b[27]=r):r=b[27];b[28]!==e||b[29]!==m||b[30]!==p||b[31]!==a||b[32]!==r?(q=j.jsx(c("MWMessageOutgoingStatus.react"),{alignLeft:e,isLastMessage:m,message:p,status:a,xstyle:r}),b[28]=e,b[29]=m,b[30]=p,b[31]=a,b[32]=r,b[33]=q):q=b[33];return q}return null}function l(a){return d("LSMessagingThreadTypeUtil").isDiscoverablePublicBroadcastChannel(a.threadType)}g.MWV2MessageEndOfGroupContent=a}),98);
__d("MWV2MessageProfilePhotoMenuQuery$Parameters",["MWV2MessageProfilePhotoMenuQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a={kind:"PreloadableConcreteRequest",params:{id:b("MWV2MessageProfilePhotoMenuQuery_facebookRelayOperation"),metadata:{},name:"MWV2MessageProfilePhotoMenuQuery",operationKind:"query",text:null}};e.exports=a}),null);
__d("MWV2MessageProfilePhotoMenu.entrypoint",["JSResourceForInteraction","MWV2MessageProfilePhotoMenuQuery$Parameters"],(function(a,b,c,d,e,f,g){"use strict";a={getPreloadProps:function(a){var b=a.groupID;a=a.userID;return{queries:{messageProfilePhotoMenuQueryRef:{parameters:c("MWV2MessageProfilePhotoMenuQuery$Parameters"),variables:{groupID:b,userID:a}}}}},root:c("JSResourceForInteraction")("MWV2MessageProfilePhotoMenu.react").__setRef("MWV2MessageProfilePhotoMenu.entrypoint")};g["default"]=a}),98);
__d("MWXIconAccount",["MWXSvgIcon","SVGIcon","cr:12266","gkx"],(function(a,b,c,d,e,f,g){"use strict";a=d("MWXSvgIcon").mwxSvgIcon(d("SVGIcon").svgIcon(b("cr:12266")),c("gkx")("23219"));g["default"]=a}),98);
__d("MWV2MessageProfilePhotoContent.react",["fbt","FDSImageCover.react","I64","LSContactBitOffset","MWLSThread","MWPActor.react","MWPContactContext.react","MWPreloadableQueries","MWV2MessageProfilePhotoMenu.entrypoint","MWXEntryPointPopoverTrigger.react","MWXGlimmer.react","MWXIconAccount","MWXIconStrict.react","MWXPressable.react","MWXTooltip.react","QE2Logger","ReQLSuspense","getLSMediaContactProfilePictureUrl","mwCMIsAnyCMThread","qex","react","useReStore"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l=(k||(k=d("react"))).c,m=k,n=h._("__JHASH__G4Bi2CYTkJR__JHASH__"),o={glimmer:{borderTopStartRadius:"x14yjl9h",borderTopEndRadius:"xudhj91",borderBottomEndRadius:"x18nykt9",borderBottomStartRadius:"xww2gxu",height:"x5yr21d",width:"xh8yej3",$$css:!0},profile:{alignItems:"xuk3077",display:"x78zum5",flexShrink:"x2lah0s",height:"x1fgtraw",maxWidth:"x193iq5w",width:"xgd8bvy",$$css:!0}};function a(a){var b=l(35),e=a.ariaHidden,g=a.isGroupThread;a=a.message;e=e===void 0?!1:e;var h=d("MWPContactContext.react").useMWPContactStableContext(),k=h.contact;h=h.nickname;var p=d("MWPActor.react").useActor(),q=(i||(i=c("useReStore")))(),r=d("MWLSThread").useThread(a.threadKey),s=r==null?void 0:r.parentThreadKey;r=r==null?void 0:r.threadType;var t,u;b[0]!==q||b[1]!==s?(t=function(){var a;return d("MWPreloadableQueries").getCommunityFolderQuery(q,(a=s)!=null?a:(j||(j=d("I64"))).zero).map(function(a){return a.fbGroupId})},u=[q,s],b[0]=q,b[1]=s,b[2]=t,b[3]=u):(t=b[2],u=b[3]);t=d("ReQLSuspense").useFirst(t,u,f.id+":72");b[4]!==r?(u=r?c("mwCMIsAnyCMThread")(r):!1,b[4]=r,b[5]=u):u=b[5];var v=u;if(a.takedownState!=null){b[6]===Symbol["for"]("react.memo_cache_sentinel")?(r=m.jsx(c("MWXTooltip.react"),{align:"middle",position:"start",tooltip:n,children:m.jsx(c("MWXIconStrict.react"),{alt:n,color:"secondary",icon:c("MWXIconAccount"),size:28})}),b[6]=r):r=b[6];u=r}else if(k!=null&&c("getLSMediaContactProfilePictureUrl")(k)!==""){var w;r=h!=null?h+" ("+k.name+")":k.name;h=(h=d("LSContactBitOffset").has(77,k))!=null?h:!1;w=(w=d("LSContactBitOffset").has(84,k))!=null?w:!1;w=!w&&!h;b[7]!==w||b[8]!==v?(h=w&&v&&c("qex")._("20")===!0,b[7]=w,b[8]=v,b[9]=h):h=b[9];w=h;h=k.name;var x;b[10]!==k?(x=c("getLSMediaContactProfilePictureUrl")(k),b[10]=k,b[11]=x):x=b[11];var y;b[12]===Symbol["for"]("react.memo_cache_sentinel")?(y={borderRadius:"50%"},b[12]=y):y=b[12];b[13]!==k.name||b[14]!==x?(h=m.jsx(c("FDSImageCover.react"),{alt:h,src:x,style:y}),b[13]=k.name,b[14]=x,b[15]=h):h=b[15];var z=h;b[16]!==v?(y=function(a){a&&(v&&d("QE2Logger").logExposureForUser("cm_web_group_message_profile_photo_menu"))},b[16]=v,b[17]=y):y=b[17];if(b[18]!==w||b[19]!==t||b[20]!==p||b[21]!==g||b[22]!==a||b[23]!==v||b[24]!==z){x=w?m.jsx(c("MWXEntryPointPopoverTrigger.react"),{entryPointParams:{groupID:(j||(j=d("I64"))).to_string((k=t)!=null?k:(j||(j=d("I64"))).zero),userID:(j||(j=d("I64"))).to_string(p)},otherProps:{isGroupThread:g,message:a},popoverEntryPoint:c("MWV2MessageProfilePhotoMenu.entrypoint"),position:"above",children:function(a,b,e,f,g,h){return m.jsx(c("MWXPressable.react"),{onHoverIn:f,onHoverOut:g,onPress:function(){v&&d("QE2Logger").logExposureForUser("cm_web_group_message_profile_photo_menu"),b()},onPressIn:h,overlayRadius:"50%",ref:a,xstyle:o.profile,children:z})}}):z;b[18]=w;b[19]=t;b[20]=p;b[21]=g;b[22]=a;b[23]=v;b[24]=z;b[25]=x}else x=b[25];b[26]!==y||b[27]!==r||b[28]!==x?(h=m.jsx(c("MWXTooltip.react"),{align:"middle",onVisibilityChange:y,position:"start",tooltip:r,children:x}),b[26]=y,b[27]=r,b[28]=x,b[29]=h):h=b[29];u=h}else{b[30]===Symbol["for"]("react.memo_cache_sentinel")?(k=m.jsx(c("MWXGlimmer.react"),{index:1,xstyle:o.glimmer}),b[30]=k):k=b[30];u=k}b[31]===Symbol["for"]("react.memo_cache_sentinel")?(w="xuk3077 x78zum5 x2lah0s x1fgtraw x193iq5w xgd8bvy",b[31]=w):w=b[31];b[32]!==e||b[33]!==u?(t=m.jsx("div",{"aria-hidden":e,className:w,children:u}),b[32]=e,b[33]=u,b[34]=t):t=b[34];return t}g["default"]=a}),226);
__d("MWV2MessageProfilePhoto.react",["MWV2MessageProfilePhotoContent.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||(h=d("react"))).c,j=h;function a(a){var b=i(8),d=a.ariaHidden,e=a.display,f=a.isGroupThread;a=a.message;d=d===void 0?!1:d;e=e===void 0?"visible":e;var g;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(g="xgd8bvy",b[0]=g):g=b[0];var h;b[1]!==e||b[2]!==d||b[3]!==f||b[4]!==a?(h=e==="visible"&&j.jsx(c("MWV2MessageProfilePhotoContent.react"),{ariaHidden:d,isGroupThread:f,message:a}),b[1]=e,b[2]=d,b[3]=f,b[4]=a,b[5]=h):h=b[5];b[6]!==h?(e=j.jsx("div",{className:g,children:h}),b[6]=h,b[7]=e):e=b[7];return e}g["default"]=a}),98);
__d("MWV2MessageStartOfGroupContent.react",["I64","MWPDateBreak.react","MWPMessageListColumn.react","MWV2ChatAdminMessage.react","MWV2MessageRowSimple.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=(h||(h=d("react"))).c,k=h;function l(a,b){if(b!=null)return(i||(i=d("I64"))).compare(i.abs(i.sub(a.timestampMs,b.timestampMs)),i.of_string("900000"))>0;else return!0}function m(a){var b=j(12),e=a.domElementRef,f=a.message,g=a.prevMessage;a=a.renderTextWrapper;if(l(f,g)){var h;b[0]!==f.timestampMs?(h=(i||(i=d("I64"))).to_float(f.timestampMs),b[0]=f.timestampMs,b[1]=h):h=b[1];var m;b[2]!==a||b[3]!==h?(m=k.jsx(c("MWPDateBreak.react"),{renderTextWrapper:a,timestamp:h}),b[2]=a,b[3]=h,b[4]=m):m=b[4];b[5]!==f||b[6]!==g||b[7]!==m?(a=k.jsx(d("MWPMessageListColumn.react").MWPMessageListColumnShrinkwrap,{children:k.jsx(d("MWV2ChatAdminMessage.react").MWV2ChatAdminMessageContainer,{nextMessage:f,prevMessage:g,children:m})}),b[5]=f,b[6]=g,b[7]=m,b[8]=a):a=b[8];b[9]!==e||b[10]!==a?(h=k.jsx(c("MWV2MessageRowSimple.react"),{domElementRef:e,children:a}),b[9]=e,b[10]=a,b[11]=h):h=b[11];return h}else return null}function a(a){var b=j(5),c=a.domElementRef,d=a.message,e=a.prevMessage;a=a.renderTextWrapper;var f;b[0]!==c||b[1]!==d||b[2]!==e||b[3]!==a?(f=k.jsx(m,{domElementRef:c,message:d,prevMessage:e,renderTextWrapper:a}),b[0]=c,b[1]=d,b[2]=e,b[3]=a,b[4]=f):f=b[4];return f}g["default"]=a}),98);
__d("MWV2MessageTimestampTooltip.react",["fbt","I64","LSIntEnum","MWMessageUnsentTimestampText.react","MWXTooltip.react","cr:1654","cr:6194","getMessengerPreciseTimestamp","gkx","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l=i||(i=d("react"));e=i;var m=e.useMemo,n=e.c;function o(a){var b=n(2);a=a.ts;a=a!=null?"Uploaded to EB: "+a:null;var c;b[0]!==a?(c=l.jsx("div",{children:a}),b[0]=a,b[1]=c):c=b[1];return c}function p(a){var b=n(2);a=a.ts;a=a!=null&&a>0?"Send Latency: "+a.toString()+"ms":null;var c;b[0]!==a?(c=l.jsx("div",{children:a}),b[0]=a,b[1]=c):c=b[1];return c}function a(a){var e=a.children,f=a.message,g=b("cr:1654")==null?void 0:b("cr:1654")(f.messageId),i=b("cr:6194")==null?void 0:b("cr:6194")(f.messageId);a=m(function(){var a=f.isUnsent,b=f.unsentTimestampMs;if((j||(j=d("I64"))).equal(f.displayedContentTypes,(k||(k=d("LSIntEnum"))).ofNumber(65536))&&!c("gkx")("2161")){var e=h._("__JHASH__OwAZycr4-8G__JHASH__");return[e,e]}if(b!=null&&a)return[l.jsx(c("MWMessageUnsentTimestampText.react"),{timestampMs:f.timestampMs,unsentTimestampMs:b},"first"),h._("__JHASH__8eZEd_EeDsx__JHASH__")];e=h._("__JHASH__GNnexJRNZQN__JHASH__",[h._param("time",c("getMessengerPreciseTimestamp")((j||(j=d("I64"))).to_float(f.timestampMs)))]);return[l.jsxs("div",{"data-testid":void 0,children:[l.jsx(p,{ts:g}),l.jsx(o,{ts:i}),l.jsx("div",{children:e})]},"first"),e]},[f,g,i]);var n=a[0];a=a[1];return l.jsx(c("MWXTooltip.react"),{align:"middle",label:a,position:"start",tooltip:n,children:e})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("MWV2SetupS2SLoggingShared",["I64","LSIntEnum","MWChatInteraction","MWLSLogSend","MWSharedMsgLogUtils","MWVersion","ReQL","ReQLSubscribe","asyncToGeneratorRuntime","err","sendToSentQPLLogger"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function j(a,b){d("sendToSentQPLLogger").markSendToSentPoint(a,"received_successful_server_ack"),d("sendToSentQPLLogger").markSendToSentSuccess(a),d("MWChatInteraction").remove(d("MWChatInteraction").s2sKey(b))}function k(a,b){d("sendToSentQPLLogger").markSendToSentFail(a,"send_message_server_error",c("err")("send_message_server_error")),d("MWChatInteraction").remove(d("MWChatInteraction").s2sKey(b))}function l(a){d("sendToSentQPLLogger").markSendToSentPoint(a,"sending_message")}function a(a){var c=a.db,e=a.isCommunityEvent,f=a.isMessageRequest,g=a.s2sInstanceKey,m=a.source,n=a.threadType,o=a.traceSendMessageAPI,p={isCommunityEvent:e,isMessageRequest:f,mwVersion:d("MWVersion").v2,source:m,threadType:n};return function(a){d("MWLSLogSend").logSentHeroInteraction(o,a,p);d("MWChatInteraction").set(d("MWChatInteraction").s2sKey(a),String(g));d("sendToSentQPLLogger").addSendToSentAnnotations(g,{bool:{subscription_points_gk:!0},string:{entrypoint:d("MWSharedMsgLogUtils").getEntrypointAnnotation(m),is_community_event:e===!0?"true":"false",is_message_request:f===!0?"true":"false",thread_type:n==null?"unknown":(h||(h=d("I64"))).to_string(n)}});var q=!1,r=d("ReQL").fromTableAscending(c.tables.messages.index("optimistic")).getKeyRange(a),s=d("ReQLSubscribe").subscribeToFirst(r,function(b){b!=null&&(h||(h=d("I64"))).equal(b.sendStatusV2,(i||(i=d("LSIntEnum"))).ofNumber(2))?(q=!0,j(g,a),s()):b!=null&&(h||(h=d("I64"))).equal(b.sendStatusV2,(i||(i=d("LSIntEnum"))).ofNumber(4))?(q=!0,k(g,a),s()):b!=null&&(h||(h=d("I64"))).equal(b.sendStatusV2,(i||(i=d("LSIntEnum"))).ofNumber(1))&&l(g)});window.setTimeout(b("asyncToGeneratorRuntime").asyncToGenerator(function*(){if(!q){var a=(yield d("ReQL").firstAsync(r));q||d("sendToSentQPLLogger").addSendToSentAnnotations(g,{string:{status_after_10s:a?""+(i||(i=d("LSIntEnum"))).toNumber(a.sendStatusV2):"none"}})}}),1e4);window.setTimeout(function(){s()},6e4)}}g["default"]=a}),98);
__d("MWXIconLike",["MWXSvgIcon","SVGIcon","cr:12480","gkx"],(function(a,b,c,d,e,f,g){"use strict";a=d("MWXSvgIcon").mwxSvgIcon(d("SVGIcon").svgIcon(b("cr:12480")),c("gkx")("23219"));g["default"]=a}),98);
__d("MWXUseLatch",["CometThrottle","Run","debounce","react"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");var i=b.useEffect;b.useMemo;var j=b.c;function a(a,b,e){var f=j(17),g=b!=null?b:!1,h;f[0]!==g||f[1]!==a?(b=function(){if(!g)return;var b=d("Run").onUnload(function(){return a(!1)});return function(){return b.remove()}},h=[g,a],f[0]=g,f[1]=a,f[2]=b,f[3]=h):(b=f[2],h=f[3]);i(b,h);var k,l;if(f[4]!==a||f[5]!==e){var m={contents:!1};l=c("debounce")(function(){if(!m.contents)return a(!1)},e|0);f[9]!==a?(b=c("CometThrottle")(function(){return a(!0)},3e3,{leading:!0,trailing:!1}),f[9]=a,f[10]=b):b=f[10];k=b;h=function(){a(!1),m.contents=!0};f[4]=a;f[5]=e;f[6]=h;f[7]=k;f[8]=l}else h=f[6],k=f[7],l=f[8];b=h;f[11]!==k||f[12]!==l?(e=function(){k();return l()},f[11]=k,f[12]=l,f[13]=e):e=f[13];h=e;f[14]!==h||f[15]!==b?(e=[h,b],f[14]=h,f[15]=b,f[16]=e):e=f[16];h=e;return h}g.useLatch=a}),98);
__d("MessagingLoggingUtils",["I64","MessagingAttachmentType"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){a=(h||(h=d("I64"))).to_int32(a);switch(a){case c("MessagingAttachmentType").NONE:return 1;case c("MessagingAttachmentType").STICKER:return 4;case c("MessagingAttachmentType").IMAGE:return 8;case c("MessagingAttachmentType").ANIMATED_IMAGE:return 6;case c("MessagingAttachmentType").VIDEO:return 10;case c("MessagingAttachmentType").AUDIO:return 11;case c("MessagingAttachmentType").FILE:return 9;case c("MessagingAttachmentType").XMA:return 13;case c("MessagingAttachmentType").EPHEMERAL_IMAGE:return 8;case c("MessagingAttachmentType").EPHEMERAL_VIDEO:return 5;case c("MessagingAttachmentType").SELFIE_STICKER:return 22;case c("MessagingAttachmentType").SOUND_BITE:return 23;default:return 1}}g.convertI64ToAttachmentType=a}),98);
__d("MessengerDefaultTheme",["CurrentEnvironment","I64"],(function(a,b,c,d,e,f,g){"use strict";var h;a={color:c("CurrentEnvironment").messengerdotcom?"#0099FF":"#0084FF",id:(h||(h=d("I64"))).of_string("196241301102133"),label:"Default Blue",type:"solid"};g["default"]=a}),98);
__d("ReQLObservable",["SortedAsyncIterable","applyChangesToBPlusTree","asyncToGeneratorRuntime","createBPlusTreeFromSorted","isPromise","promiseDone","relay-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,e){return d("relay-runtime").Observable.create(function(f){var g=e(a),i=function(a){if(f.closed)return;f.next(a)},j,k=[],l=g.subscribe(function(a,b){k.push([a,b])}),m=a.subscribeToCommit(function(){if(f.closed)return;if(j!=null&&k.length>0){var a=j;c("applyChangesToBPlusTree")(a,k)&&i(Array.from(a.entries()))}}),n=g.iterator(d("SortedAsyncIterable").getOrCreateContext(g)),o=[];c("promiseDone")(b("asyncToGeneratorRuntime").asyncToGenerator(function*(){while(!f.closed){var a=n.next();(h||(h=c("isPromise")))(a)&&(a=(yield a));if(a.done)break;o.push(a.value)}if(f.closed)return;a=j=c("createBPlusTreeFromSorted")(o,g.direction);i(c("applyChangesToBPlusTree")(a,k)?Array.from(a.entries()):o)})());return function(){l(),m()}})}g.create=a}),98);
__d("XmaEventsE2eeFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("1399");b=d("FalcoLoggerInternal").create("xma_events_e2ee",a);e=b;g["default"]=e}),98);
__d("fetch",[],(function(a,b,c,d,e,f){"use strict";a=window.fetch;b=a;f["default"]=b}),66);
__d("fetchMWPAudioWaveformDataForURL",["AudioContextSingleton","FBLogger","Promise","asyncToGeneratorRuntime","fetch"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(a){var b=[];for(var c=0;c<a.numberOfChannels;c++)b.push(a.getChannelData(c));a=b.reduce(function(a,b){return a+b.length},0);c=new Float32Array(a);for(a=0;a<b.length;a++)for(var d=0;d<b[a].length;d++)c[d*b.length+a]=b[a][d];return c}function j(a){var d=c("AudioContextSingleton").get();return new(h||(h=b("Promise")))(function(b,c){d.decodeAudioData(a,b,c)})}function a(a){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=a.toString();try{var b=(yield c("fetch")(a));b=(yield b.arrayBuffer());b=(yield j(b));return i(b)}catch(b){c("FBLogger")("messenger_web_media","audio_waveform_error").catching(b).mustfix("Error fetching waveform data for URL: %s",a);return Float32Array.of()}});return k.apply(this,arguments)}g["default"]=a}),98);
__d("issueLSAudioMediaSendJob",["I64","LSDatabaseSingletonLazyWrapper","LSFactory","LSInsertNewMediaSendStoredProcedure","LSMarkSubJobCompletedV2StoredProcedure","MWPComposerMediaUploadUtil","MWPOpenComposerUtils","ReQL","asyncToGeneratorRuntime","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(a,b,c,e){if(a==null)return;if(!a.startsWith("blob:"))return;var f={contents:function(){}};f.contents=d("ReQL").fromTableAscending(c.tables.attachments).getKeyRange(e).subscribe(function(c,d){if(d.operation==="put"){c=d.value;if(c.attachmentFbid!==b.toString())return;d=c.playableUrl;d!=null&&!d.startsWith("blob:")&&(f.contents(),URL.revokeObjectURL(a))}})}function a(a,b,c,d,e,f,g,h,i,k,l){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,g,j,k,l,m,n,o,p,q){yield c("LSInsertNewMediaSendStoredProcedure")(c("LSFactory")(a),{attachmentType:m.attachment_type,inMessageIndex:(h||(h=d("I64"))).zero,isSecure:!1,offlineAttachmentId:k,offlineThreadingId:l,sendByServer:!1,shouldTranscode:!1,useDoublePhase:!1});a=function(a,g){if(g==null||g.length===0)return;var n=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=(yield c("LSDatabaseSingletonLazyWrapper")());return a.runInTransaction(function(){var f=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){b=c("LSFactory")(b);yield c("LSMarkSubJobCompletedV2StoredProcedure")(b,{fbid:(h||(h=d("I64"))).of_string(g),offlineAttachmentId:k});yield d("MWPOpenComposerUtils").resumeSendJob(b,l,j);i(m.playable_url,g,a,e)});return function(a){return f.apply(this,arguments)}}(),"readwrite",void 0,void 0,f.id+":99")});return function(){return a.apply(this,arguments)}}();c("promiseDone")(n(),function(){p==null?void 0:p(a)})};var r=function(a,b){q==null?void 0:q((b=b.response.getErrorDescriptionString())!=null?b:"unknown_upload_failure",a)};yield d("MWPComposerMediaUploadUtil").startUpload(o,void 0,a,r,!0,[n.file],[k],void 0,void 0,n.waveformData,void 0,h.to_string(g))});return j.apply(this,arguments)}g["default"]=a}),98);
__d("issueLSMediaSendJobs",["ArmadilloDataTraceCheckPoint","I64","LSAppendDataTraceAddonStoredProcedure","LSFactory","LSGenerateTraceId","LSInsertNewMediaSendStoredProcedure","LSMarkSubJobCompletedV2StoredProcedure","MWConsole","MWMediaTraceHandler","MWPOpenComposerUtils","MessagingLoggingUtils","Promise","asyncToGeneratorRuntime","gkx","updateAndFlushLSDataTrace"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function j(a,b,c,d){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c,e){b!=null&&(yield d("MWMediaTraceHandler").logMediaSendStart(a,b,c,(i||(i=d("I64"))).of_int32(e)))});return k.apply(this,arguments)}function l(a,b,c){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e){e!=null&&c("gkx")("23995")&&(yield c("LSAppendDataTraceAddonStoredProcedure")(c("LSFactory")(a),{checkPointId:d("ArmadilloDataTraceCheckPoint").armadilloTlcControlOpenThread,dataTraceId:e,syncChannel:(i||(i=d("I64"))).minus_one,tags:b}))});return m.apply(this,arguments)}function a(a,b,c,d,e){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,f,g,k){var m=c("LSGenerateTraceId")(),n=k[0];n=d("MessagingLoggingUtils").convertI64ToAttachmentType(n.attachmentType);yield j(a,m,(i||(i=d("I64"))).of_int32(g.length),n);var o=0;n=g.map(function(){var g=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b,g){yield c("LSInsertNewMediaSendStoredProcedure")(c("LSFactory")(a),{attachmentType:b.attachment_type,inMessageIndex:(i||(i=d("I64"))).of_int32(g),isSecure:!1,offlineAttachmentId:b.attachment_fbid,offlineThreadingId:f,sendByServer:!1,shouldTranscode:!1,useDoublePhase:!1});yield d("MWPOpenComposerUtils").updateMediaStaging(a,b.attachment_fbid,function(a){return babelHelpers["extends"]({},a,{isSent:!0})});g=k.find(function(a){return a.offlineAttachmentId===b.offline_attachment_id});if(g!=null){var h=g.fbid;h!=null&&(yield c("LSMarkSubJobCompletedV2StoredProcedure")(c("LSFactory")(a),{fbid:h,offlineAttachmentId:b.attachment_fbid}),yield d("MWPOpenComposerUtils").deleteMediaStaging(a,b.attachment_fbid),yield d("MWPOpenComposerUtils").updateAttachment(a,e,f,b.attachment_fbid,function(a){return babelHelpers["extends"]({},a,{attachmentFbid:(i||(i=d("I64"))).to_string(h)})}),o++)}c("gkx")("24136")&&(yield d("MWPOpenComposerUtils").updateAttachment(a,e,f,b.attachment_fbid,function(a){return babelHelpers["extends"]({},a,{previewHeight:void 0,previewWidth:void 0})}))});return function(a,b){return g.apply(this,arguments)}}());yield (h||(h=b("Promise"))).allSettled(n);yield d("MWPOpenComposerUtils").resumeSendJob(c("LSFactory")(a),f,m);yield l(a,i.to_string(e),m);yield c("updateAndFlushLSDataTrace")(a,m);return{sentWithAllFilesUploaded:o===g.length}});return n.apply(this,arguments)}g["default"]=a}),98);
__d("issueSendInstamadilloMediaMessage",["IGDBridgedAPI","MWPOpenComposerUtils","Promise","asyncToGeneratorRuntime","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b,c){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,f){c("promiseDone")(c("IGDBridgedAPI").sendMediaMessage({offlineThreadingId:f}));f=e.map(function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){yield d("MWPOpenComposerUtils").updateMediaStaging(a,b.attachment_fbid,function(a){return babelHelpers["extends"]({},a,{isSent:!0})})});return function(a){return c.apply(this,arguments)}}());yield (h||(h=b("Promise"))).allSettled(f)});return i.apply(this,arguments)}g["default"]=a}),98);
__d("useIsAdsAIChat",["AdsAIMessengerUtils","ReQL","ReQLSuspense","react","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i;b=i||d("react");b.useMemo;var j=b.c;function a(a){var b=j(9),e=(h||(h=c("useReStore")))(),g;b[0]!==e.tables.participants||b[1]!==a?(g=function(){return d("ReQL").fromTableAscending(e.tables.participants,["contactId"]).getKeyRange(a)},b[0]=e.tables.participants,b[1]=a,b[2]=g):g=b[2];var i;b[3]!==e||b[4]!==a?(i=[e,a],b[3]=e,b[4]=a,b[5]=i):i=b[5];g=d("ReQLSuspense").useArray(g,i,f.id+":23");if(b[6]!==g){b[8]===Symbol["for"]("react.memo_cache_sentinel")?(i=function(a){return d("AdsAIMessengerUtils").isAdsAIParticipant(a.contactId)},b[8]=i):i=b[8];i=g.some(i);b[6]=g;b[7]=i}else i=b[7];g=i;b=g;return b}g["default"]=a}),98);
__d("useMAWDeleteLinkPreviewXMATableData",["FBLogger","Int64Hooks","LSMessagingThreadTypeUtil","asyncToGeneratorRuntime","react","useAsyncReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).c;function a(a){var e=i(5),g=c("useAsyncReStore")(),h;e[0]!==a?(h=a!=null&&d("LSMessagingThreadTypeUtil").isArmadilloSecure(a),e[0]=a,e[1]=h):h=e[1];var j=h;e[2]!==j||e[3]!==g?(a=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var d=a.draftId;if(!j)return;a=(yield g);a=(yield a.runInTransaction(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b;b=null;yield a.e2ee_composer_draft_link_preview.get(d).then(function(a){a=JSON.parse((a=a==null?void 0:a.data)!=null?a:"{}");b=a.iframeMediaURL});yield a.e2ee_composer_draft_link_preview["delete"](d);return b});return function(b){return a.apply(this,arguments)}}(),"readwrite",void 0,void 0,f.id+":40"));if(a!=null)try{URL.revokeObjectURL(a)}catch(b){a=b;c("FBLogger")("messenger_web_sharing").mustfix("Failed to revoke the object URL with, failed with error: %s",a)}});return function(b){return a.apply(this,arguments)}}(),e[2]=j,e[3]=g,e[4]=a):a=e[4];return d("Int64Hooks").useCallbackInt64(a)}g["default"]=a}),98);
__d("useMAWFetchAndWriteLinkPreviewXMATableData",["ConstUriUtils","E2EELinkPreviewXMADataStatus","E2EELinkPreviewXMADataType","FBLogger","I64","Int64Hooks","LSMessagingThreadTypeUtil","MAWExternalLinkUtil","MAWIsLinkPreviewWaitForXmaEnabled","MAWPreProcessLinkPreviewQPL","MWPComposerDraftMessages","asyncToGeneratorRuntime","getRequestConstUri","isFacebookURI","promiseDone","react","useAsyncReStore","useMAWDeleteLinkPreviewXMATableData","useXMAPreviewsDisabledSetting"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=(h||d("react")).c,k=function(){var a=!1;return{abort:function(){a=!0},isAborted:function(){return a}}};function e(a){var e=j(9),f=a.threadKey;a=a.threadType;var g=c("useAsyncReStore")(),h;e[0]!==a?(h=a!=null&&d("LSMessagingThreadTypeUtil").isArmadilloSecure(a),e[0]=a,e[1]=h):h=e[1];var i=h,n=c("useMAWDeleteLinkPreviewXMATableData")(a);e[2]===Symbol["for"]("react.memo_cache_sentinel")?(h=c("getRequestConstUri")(),e[2]=h):h=e[2];var p=h,q=c("useXMAPreviewsDisabledSetting")();e[3]!==i||e[4]!==q||e[5]!==g||e[6]!==n||e[7]!==f?(a=function(a){var e=a.draftId,h=a.urls,j=k();a=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){if(!i)return;var a=d("ConstUriUtils").getUri(h[0].entity.url);if(a==null)return;var b=d("MAWPreProcessLinkPreviewQPL").startMediaPreProcessLinkPreviewQpl({draftId:e,url:a.toString()}),k=c("isFacebookURI")(a),r=c("isFacebookURI")(p);r=k&&r;if(k&&q){l({abortToken:j,dbPromise:g,deleteLinkPreviewXMATableData:n,draftId:e,qplEvent:b,qplSubspanPoint:"write_fb_disabled",status:c("E2EELinkPreviewXMADataStatus").DISABLED,threadKey:f,xmaData:null});b.endCancel({string:{cancel_reason:"fb_xmas_disabled"}},706);return}l({abortToken:j,dbPromise:g,deleteLinkPreviewXMATableData:n,draftId:e,qplEvent:b,qplSubspanPoint:"write_loading_status",status:c("E2EELinkPreviewXMADataStatus").LOADING,threadKey:f,xmaData:{title:a.getDomain(),url:a.toString()}});b.addAnnotations({bool:{should_fetch_from_og:r},string:{link_type:k?"facebook":"external"}});k=r?yield m(a.toString(),b):yield o(h,b);r=k.dataType;a=k.xmaData;l({abortToken:j,dataType:r,dbPromise:g,deleteLinkPreviewXMATableData:n,draftId:e,qplEvent:b,qplSubspanPoint:"write_xma_data",status:c("E2EELinkPreviewXMADataStatus").LOADED,threadKey:f,xmaData:a})});return function(){return a.apply(this,arguments)}}();a();return j},e[3]=i,e[4]=q,e[5]=g,e[6]=n,e[7]=f,e[8]=a):a=e[8];return d("Int64Hooks").useCallbackInt64(a)}function l(a){var b=a.abortToken,e=a.dataType,g=a.dbPromise,h=a.deleteLinkPreviewXMATableData,j=a.draftId,k=a.qplEvent,l=a.qplSubspanPoint,m=a.status,n=a.threadKey,o=a.xmaData;k.addAnnotations({"int":{data_type:e}});if(d("MAWIsLinkPreviewWaitForXmaEnabled").isLinkPreviewWaitForXmaEnabled()){if(b.isAborted()){k.endCancel({string:{cancel_reason:"fetch_aborted"}},706);return}}else{a=d("MWPComposerDraftMessages").getDraftMessage(n);var p=(a==null?void 0:a.id)!==j;a=(a==null?void 0:a.linkPreviewURL)!==(o==null?void 0:o.url);if(p||a){k.addPoint(l+"_abort");k.endCancel({string:{cancel_reason:p?"draft_id_changed_abort":"draft_url_changed_abort"}},706);return}}k.addPoint(l+"_start");c("promiseDone")(g,function(a){return a.runInTransaction(function(a){return a.e2ee_composer_draft_link_preview.put({data:o!=null?JSON.stringify(o):void 0,dataType:e!=null?(i||(i=d("I64"))).of_int32(e):void 0,draftId:j,status:(i||(i=d("I64"))).of_int32(m)})},"readwrite",void 0,void 0,f.id+":237").then(function(a){if(d("MAWIsLinkPreviewWaitForXmaEnabled").isLinkPreviewWaitForXmaEnabled())b.isAborted()&&(k.endCancel({string:{cancel_reason:"fetch_aborted_delete"}},706),void h({draftId:a[0]}));else{var c=d("MWPComposerDraftMessages").getDraftMessage(n),e=(c==null?void 0:c.id)!==a[0];c=(c==null?void 0:c.linkPreviewURL)!==(o==null?void 0:o.url);(e||c)&&(k.addPoint(l+"_delete"),k.endCancel({string:{cancel_reason:e?"draft_id_changed_delete":"draft_url_changed_delete"}},706),void h({draftId:a[0]}))}k.addPoint(l+"_success");l==="write_xma_data"&&k.endSuccess()})["catch"](function(a){k.endFail(l+"_failed",{string:{data_status:String(m),error:"Error thrown when writing Link Preview XMA data to LSDB table. Error: "+a}}),c("FBLogger")("messenger_web_sharing").catching(a).mustfix("Failed to write Link Preview XMA data to LSDB table.")})})}function m(a,b){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var e;b.addPoint("fetch_fb_og_data_start");e=(e=(e=d("ConstUriUtils").getUri(a))==null?void 0:e.getDomain())!=null?e:a;try{var f;b.addPoint("http_request_start");var g=(yield window.fetch(a,{credentials:"omit",referrerPolicy:"no-referrer"}));b.addPoint("http_response_end");if(!g.ok){b.addPoint("fetch_fb_og_data_end",{string:{fetch_fb_og_data_end:"http_response_error",response_status_code:String(g.status),xma_data_returned:"fallback"}});return q(e,a)}g=(yield g.text());var h=new DOMParser();h=h.parseFromString(g,"text/html");h.querySelector("parsererror")&&b.addPoint("html_parsererror");g=(g=h.querySelector('meta[property="og:image"]'))==null?void 0:g.getAttribute("content");f=(f=h.querySelector('meta[name="description"]'))==null?void 0:f.getAttribute("content");h=(h=h.querySelector('meta[property="og:title"]'))==null?void 0:h.getAttribute("content");if(g==null&&f==null&&h==null){b.addPoint("fetch_fb_og_data_end",{string:{fetch_fb_og_data_end:"og_data_is_null",xma_data_returned:"fallback"}});return q(e,a)}b.addPoint("fetch_fb_og_data_success",{string:{xma_data_returned:"rich_xma"}});return{dataType:c("E2EELinkPreviewXMADataType").FB_CLIENT_FETCH,xmaData:{author_name:(f=f)!=null?f:void 0,iframeMediaURL:g,thumbnail_url:(f=g)!=null?f:void 0,title:(g=h)!=null?g:e,url:a}}}catch(c){b.addPoint("fetch_fb_og_data_end",{string:{fetch_fb_og_data_end:"failed_to_fetch_data",xma_data_returned:"fallback"}});return q(e,a)}});return n.apply(this,arguments)}function o(a,b){return p.apply(this,arguments)}function p(){p=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b,e){e.addPoint("fetch_external_link_oembed_data_start");var f=d("MAWExternalLinkUtil").findFirstAvailableOembedUrlAndRequestPair(b);b=b[0].entity.url;var g=null;if(f!=null){b=f.oEmbedUrl;try{e.addPoint("get_oembed_response_start"),g=(yield d("MAWExternalLinkUtil").getOembedResponse({fallbackUrl:b,qplEvent:e,request:f.oEmbedRequest})),e.addPoint("get_oembed_response_success")}catch(a){e.addPoint("get_oembed_response_returned_null",{string:{get_oembed_response_returned_null:"Error thrown when fetching oEmbed data for External Link XMA. Error message: "+a}}),e.addPoint("get_oembed_response_end"),c("FBLogger")("messenger_web_sharing").catching(a).mustfix("[External link] Error thrown when fetching oEmbed data for External Link XMA.")}}f=(f=d("ConstUriUtils").getUri(b))==null?void 0:f.getDomain();if(g==null){var h;e.addPoint("fetch_external_link_oembed_data_success",{string:{xma_data_returned:"fallback"}});return q((h=f)!=null?h:b,b)}e==null?void 0:e.addPoint("get_image_blob_response_start");h=(yield d("MAWExternalLinkUtil").getImageBlobResponse({qplEvent:e,url:(h=g)==null?void 0:h.thumbnail_url}));var i=null;if(h!=null&&d("MAWExternalLinkUtil").allowedPreviewTypes.includes(h.type)){h=new File([h],"preview",{type:h.type});i=a.URL.createObjectURL(h)}e==null?void 0:e.addPoint("get_image_blob_response_end",{bool:{media_url_is_null:i==null}});e.addPoint("fetch_external_link_oembed_data_success",{string:{xma_data_returned:"rich_xma"}});return{dataType:c("E2EELinkPreviewXMADataType").OEMBED,xmaData:babelHelpers["extends"]({iframeMediaURL:i},g,{title:(h=g.title)!=null?h:f,url:(e=g.url)!=null?e:b})}});return p.apply(this,arguments)}function q(a,b){return{dataType:c("E2EELinkPreviewXMADataType").FALLBACK,xmaData:{title:a,url:b}}}g["default"]=e}),98);
__d("useMWAttachmentUpdater",["Int64Hooks","ReQL","asyncToGeneratorRuntime","react","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=(i||d("react")).c;function a(a){var e=j(6),g=a.attachmentFbid,i=a.messageId,k=a.threadKey,l=(h||(h=c("useReStore")))(),m;e[0]!==l||e[1]!==k||e[2]!==i||e[3]!==g?(a=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){yield l.runInTransaction(function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){b=b.attachments;var c=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(b).getKeyRange(k,i,g)));c!=null&&(yield b.put(babelHelpers["extends"]({},c,a)))});return function(a){return c.apply(this,arguments)}}(),"readwrite",void 0,void 0,f.id+":26")});return function(b){return a.apply(this,arguments)}}(),m=[l,k,i,g],e[0]=l,e[1]=k,e[2]=i,e[3]=g,e[4]=a,e[5]=m):(a=e[4],m=e[5]);return d("Int64Hooks").useCallbackInt64(a,m)}g["default"]=a}),98);
__d("useMWLSSaveDrafts",["CometDebounce","Int64Hooks","LexicalText","MAWIsLinkPreviewWaitForXmaEnabled","MWPComposerDraftMessages","MWPNewMessageDraftContext.react","isStringNullOrEmpty","justknobx","react","useMAWDeleteLinkPreviewXMATableData","useMAWFetchAndWriteLinkPreviewXMATableData"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).useCallback,j=250,k=c("justknobx")._("3119");function a(a){var b=a.editor,e=a.isPreviewThread,f=a.threadKey,g=a.threadType,h=d("MAWIsLinkPreviewWaitForXmaEnabled").isLinkPreviewWaitForXmaEnabled()?k:j,l=c("useMAWFetchAndWriteLinkPreviewXMATableData")({threadKey:f,threadType:g}),m=c("useMAWDeleteLinkPreviewXMATableData")(g),n=d("MWPNewMessageDraftContext.react").useNewMessageDraftContext(),o=i(function(a){e&&n!=null?n.current=a:d("MWPComposerDraftMessages").updateDraftMessage({deleteLinkPreviewXMATableData:m,fetchAndWriteLinkPreviewXMA:l,message:a,threadKey:f,threadType:g})},[m,l,e,n,f,g]);d("Int64Hooks").useEffectInt64(function(){b.registerUpdateListener(c("CometDebounce")(function(a){a=a.editorState;a=a.read(function(){return d("LexicalText").$rootTextContent()});if(c("isStringNullOrEmpty")(a)){o(a);return}o(a)},{wait:h}))},[h,b,o]);d("Int64Hooks").useEffectInt64(function(){var a=b.getEditorState().read(function(){return d("LexicalText").$rootTextContent()});o(a)},[b,o])}g["default"]=a}),98);
__d("useMWMarkThreadAsReadWhenNewMessagesArrive",["I64","Int64Hooks","MWLSThreadDisplayContext","MWV2IsTabFocusedContext.react","ReQL","ReQLObservable","UserActivity","asyncToGeneratorRuntime","cr:268","gkx","promiseDone","react","useAsyncReStore","useEmptyFunction","useMWInboxPassiveContext","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=(i||d("react")).c,l=(e=b("cr:268"))!=null?e:c("useEmptyFunction");function m(a,b,c,d,e){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e,f,g){var h=(yield d("ReQL").firstAsync(d("ReQL").fromTableDescending(a.tables.messages).getKeyRange(b)));if(h==null)return!1;a=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.tables.threads).getKeyRange(b)));if(a==null)return!1;b=g!==void 0?g==="ChatTab"?e:g==="Inbox"&&c("gkx")("24041")?!f.isPassive:!0:!0;e=(j||(j=d("I64"))).gt(h.timestampMs,a.lastActivityTimestampMs)?h.timestampMs:a.lastActivityTimestampMs;g=(j||(j=d("I64"))).gt(e,a.lastReadWatermarkTimestampMs);return c("UserActivity").isOnTab()&&c("UserActivity").isActive()&&b&&g});return n.apply(this,arguments)}function o(a,e){var f=k(8),g=c("useAsyncReStore")(),h=d("MWV2IsTabFocusedContext.react").useIsTabFocused(),i=d("MWLSThreadDisplayContext").useMWLSThreadDisplayContext(),j=c("useMWInboxPassiveContext")(),l,n;f[0]!==g||f[1]!==a||f[2]!==h||f[3]!==j||f[4]!==i||f[5]!==e?(l=function(){c("promiseDone")(b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var b=(yield g);if(yield m(b,a,h,j,i))return e()})())},n=[g,a,h,j,i,e],f[0]=g,f[1]=a,f[2]=h,f[3]=j,f[4]=i,f[5]=e,f[6]=l,f[7]=n):(l=f[6],n=f[7]);return d("Int64Hooks").useCallbackInt64(l,n)}function p(a,e,f,g){var i=k(7),j=(h||(h=c("useReStore")))(),l,m;i[0]!==a||i[1]!==e||i[2]!==f||i[3]!==j||i[4]!==g?(l=function(){var c=function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var b=a();typeof b!=="boolean"&&(b=(yield b));if(b&&!e())return f()});return function(){return c.apply(this,arguments)}}();window.addEventListener("focus",c);document.hasFocus()&&c();var h=d("ReQLObservable").create(j,function(){return d("ReQL").fromTableDescending(j.tables.messages).getKeyRange(g)}).subscribe({next:c});return function(){window.removeEventListener("focus",c),h.unsubscribe()}},m=[f,a,e,g,j],i[0]=a,i[1]=e,i[2]=f,i[3]=j,i[4]=g,i[5]=l,i[6]=m):(l=i[5],m=i[6]);d("Int64Hooks").useEffectInt64(l,m)}function a(a,b,c,d){b=o(a.threadKey,b);l(a);p(c,d,b,a.threadKey);return b}g["default"]=a}),98);
__d("useMWNextAttachment",["ReQL","ReQLSuspense","justknobx","react","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=(i||d("react")).c;function a(a,b){var e=j(23),g=(h||(h=c("useReStore")))(),i;e[0]!==g.tables.messages||e[1]!==b.threadKey||e[2]!==b.primarySortKey||e[3]!==b.secondarySortKey?(i=function(){return d("ReQL").fromTableAscending(g.tables.messages.index("messageDisplayOrder")).getKeyRange(b.threadKey).bounds({gt:d("ReQL").key(b.primarySortKey,b.secondarySortKey)}).filter(function(a){return!a.isUnsent})},e[0]=g.tables.messages,e[1]=b.threadKey,e[2]=b.primarySortKey,e[3]=b.secondarySortKey,e[4]=i):i=e[4];var k;e[5]!==g||e[6]!==b.threadKey||e[7]!==b.primarySortKey?(k=[g,b.threadKey,b.primarySortKey],e[5]=g,e[6]=b.threadKey,e[7]=b.primarySortKey,e[8]=k):k=e[8];var l=d("ReQLSuspense").useFirst(i,k,f.id+":25");e[9]!==g.tables.messages||e[10]!==a.messageId?(i=function(){return d("ReQL").fromTableAscending(g.tables.messages.index("messageId")).bounds({gt:d("ReQL").key(a.messageId)}).filter(function(a){return!a.isUnsent})},e[9]=g.tables.messages,e[10]=a.messageId,e[11]=i):i=e[11];e[12]!==g||e[13]!==a.messageId?(k=[g,a.messageId],e[12]=g,e[13]=a.messageId,e[14]=k):k=e[14];var m=d("ReQLSuspense").useFirst(i,k,f.id+":39");e[15]!==l||e[16]!==g.tables.attachments||e[17]!==m?(i=function(){return c("justknobx")._("2376")?l!=null?d("ReQL").fromTableAscending(g.tables.attachments).getKeyRange(l.threadKey,l.messageId):d("ReQL").empty():m!=null?d("ReQL").fromTableAscending(g.tables.attachments).getKeyRange(m.threadKey,m.messageId):d("ReQL").empty()},e[15]=l,e[16]=g.tables.attachments,e[17]=m,e[18]=i):i=e[18];e[19]!==g||e[20]!==l||e[21]!==m?(k=[g,l,m],e[19]=g,e[20]=l,e[21]=m,e[22]=k):k=e[22];e=d("ReQLSuspense").useFirst(i,k,f.id+":47");return e}g["default"]=a}),98);
__d("useMWPAriaLabelForMessageListGrid",["fbt","Int64Hooks","MWPActor.react","MWPGetThreadTitle","ReQL","ReQLSuspense","react","useReStore"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=(j||d("react")).c;function a(a){var b=k(11),e=d("MWPActor.react").useActor(),g=(i||(i=c("useReStore")))(),j,l;b[0]!==a.threadName||b[1]!==a.threadKey||b[2]!==g?(j=function(){return a.threadName!=null?d("ReQL").empty():d("ReQL").leftJoin(d("ReQL").fromTableAscending(g.tables.participants,["contactId","nickname"]).getKeyRange(a.threadKey),d("ReQL").fromTableAscending(g.tables.contacts,["name","rank","contactType","firstName","capabilities","capabilities2"])).take(8)},l=[g,a.threadKey,a.threadName],b[0]=a.threadName,b[1]=a.threadKey,b[2]=g,b[3]=j,b[4]=l):(j=b[3],l=b[4]);var m=d("ReQLSuspense").useArray(j,l,f.id+":32");b[5]!==a.threadName||b[6]!==a.threadType||b[7]!==m||b[8]!==e?(j=function(){var b;if(a.threadName!=null)return h._("__JHASH__NOo4A_R8oVU__JHASH__",[h._param("name of conversation",a.threadName)]).toString();b=(b=d("MWPGetThreadTitle").computeThreadTitle(void 0,a.threadType,m,e))!=null?b:"";return h._("__JHASH__KCW8qihKWub__JHASH__",[h._param("participant list",b)]).toString()},l=[e,m,a.threadName,a.threadType],b[5]=a.threadName,b[6]=a.threadType,b[7]=m,b[8]=e,b[9]=j,b[10]=l):(j=b[9],l=b[10]);return d("Int64Hooks").useMemoInt64(j,l)}g["default"]=a}),226);
__d("useMWPAudioWaveformData.react",["ConstUriUtils","FBLogger","asyncToGeneratorRuntime","fetchMWPAudioWaveformDataForURL","promiseDone","react","useMWAttachmentUpdater"],(function(a,b,c,d,e,f,g){"use strict";var h;e=h||d("react");e.useCallback;var i=e.useEffect,j=e.useState,k=e.c,l=3,m=",",n=["blob:","data:"];function a(a,e){var f=k(11),g=j(a.waveformData),h=g[0],o=g[1],p=c("useMWAttachmentUpdater")(a);f[0]!==e?(g=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){if(e!=null&&e!==""){var a=d("ConstUriUtils").getUri(e);if(a!=null&&n.includes(a.getProtocol())){a=(yield c("fetchMWPAudioWaveformDataForURL")(a));a.length>l&&o(a.join(m))}}});return function(){return a.apply(this,arguments)}}(),f[0]=e,f[1]=g):g=f[1];var q=g,r;f[2]!==h||f[3]!==q?(g=function(){if(h!=null&&h.length>l)return;c("promiseDone")(q())},r=[q,h],f[2]=h,f[3]=q,f[4]=g,f[5]=r):(g=f[4],r=f[5]);i(g,r);f[6]!==h||f[7]!==a.waveformData||f[8]!==p?(g=function(){h!=null&&h.length>l&&h!==a.waveformData&&p({waveformData:h})["catch"](function(a){c("FBLogger")("messenger_web_media","audio_waveform_error").catching(a).mustfix("Error from updating attachment waveform data")})},r=[a.waveformData,p,h],f[6]=h,f[7]=a.waveformData,f[8]=p,f[9]=g,f[10]=r):(g=f[9],r=f[10]);i(g,r);return h}g["default"]=a}),98);
__d("useMWPComposerAutoFocus",["MWChatFocusComposerContext","MWPReplyContext.react","MWV2IsTabFocusedContext.react","deepEquals","react","react-forget-runtime","usePrevious"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");b.useCallback;b.useContext;var i=b.useEffect,j=b.c;function k(a){var b;b=(b=document.activeElement)==null?void 0:(b=b.attributes.getNamedItem("id"))==null?void 0:b.value;if(b==null?void 0:b.includes("prevent-composer-focus-steal"))return;return a.focus(function(){})}function a(a){var b=j(19),e=a.editor,f=a.focusEditorDelayed,g=a.hasUnsentAttachments,h=a.isPreviewThread,m=a.isQuickchat,n=g===void 0?!1:g;a=h===void 0?!1:h;g=d("MWChatFocusComposerContext").useMWChatFocusComposer();h=g.setFocusComposer;g=d("react-forget-runtime").useContextWithBailoutExperiment__unstable(d("MWPReplyContext.react").MWPReplyContext,l);var o=g.reply,p=c("usePrevious")(o),q;b[0]!==p||b[1]!==o||b[2]!==m||b[3]!==f||b[4]!==e?(g=function(){(p==null?o!=null:!c("deepEquals")(p,o))&&(m&&f?f(e):k(e))},q=[e,o,p,f,m],b[0]=p,b[1]=o,b[2]=m,b[3]=f,b[4]=e,b[5]=g,b[6]=q):(g=b[5],q=b[6]);i(g,q);g=d("MWV2IsTabFocusedContext.react").useIsTabFocused();var r=g&&!a;b[7]!==r||b[8]!==m||b[9]!==f||b[10]!==e?(q=function(){r&&(m&&f?f(e):k(e))},g=[e,r,f,m],b[7]=r,b[8]=m,b[9]=f,b[10]=e,b[11]=q,b[12]=g):(q=b[11],g=b[12]);i(q,g);b[13]!==n||b[14]!==m||b[15]!==f||b[16]!==e?(a=function(){n&&(m&&f?f(e):k(e))},q=[e,n,f,m],b[13]=n,b[14]=m,b[15]=f,b[16]=e,b[17]=a,b[18]=q):(a=b[17],q=b[18]);i(a,q);h(function(){m&&f?f(e):k(e)})}function l(a){return[a.reply]}g["default"]=a}),98);
__d("usePrepopulateLexicalEditor",["Lexical","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).useLayoutEffect;function a(a,b,c){i(function(){if(b==null)return;a.update(function(){if(b!=null){var a=d("Lexical").$getRoot(),e=a.getFirstChild();d("Lexical").$isParagraphNode(e)||(e=d("Lexical").$createParagraphNode(),a.append(e));a=d("Lexical").$createTextNode(b);e.clear();e.append(a);c===!0&&e.selectEnd()}})},[a])}g["default"]=a}),98);
__d("useMWPComposerEditorDraftText",["MWPComposerDraftMessages","MWPNewMessageDraftContext.react","MWPreloadedText","react","useMWLSSaveDrafts","usePrepopulateLexicalEditor"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).useContext;function a(a){var b=a.editor,e=a.isPreviewThread;e=e===void 0?!1:e;var f=a.isQuickchat;f=f===void 0?!1:f;var g=a.threadKey;a=a.threadType;var h=d("MWPNewMessageDraftContext.react").useNewMessageDraftContext(),j=i(c("MWPreloadedText"));h=j.text!=null?j.text:h!=null?h.current:(j=d("MWPComposerDraftMessages").getDraftMessage(g))==null?void 0:j.messageText;c("useMWLSSaveDrafts")({editor:b,isPreviewThread:e,threadKey:g,threadType:a});c("usePrepopulateLexicalEditor")(b,f?void 0:h);return h}g["default"]=a}),98);
__d("useMWPLexicalClearEditor",["Lexical","react"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");var i=b.useLayoutEffect,j=b.c;function a(a,b){var c=j(4),e=b===void 0?!1:b,f;c[0]!==a||c[1]!==e?(b=function(){return a.registerCommand(d("Lexical").CLEAR_EDITOR_COMMAND,function(){a.update(function(){var a=d("Lexical").$getRoot(),b=d("Lexical").$getSelection(),c=d("Lexical").$createParagraphNode();a.clear();a.append(c);b!==null&&(c.select(),e===!0&&d("Lexical").$isRangeSelection(b)&&(b.format=0))});return!0},d("Lexical").COMMAND_PRIORITY_EDITOR)},f=[e,a],c[0]=a,c[1]=e,c[2]=b,c[3]=f):(b=c[2],f=c[3]);i(b,f)}g["default"]=a}),98);
__d("useMWPMarkAudioAttachmentAsConsumed.react",["FBLogger","react","useMWAttachmentUpdater"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");var i=b.useEffect,j=b.c;function a(a,b){var d=j(5),e=c("useMWAttachmentUpdater")(b),f=b.isAttachmentConsumed,g;d[0]!==a||d[1]!==f||d[2]!==e?(b=function(){var b=a==null?void 0:a.current;if(b==null)return;var d=function(){(f==null||f===!1)&&e({isAttachmentConsumed:!0})["catch"](function(a){c("FBLogger")("messenger_web_media","attachment_update_error").catching(a).mustfix("Error marking attachment as consumed.")})};b.addEventListener("ended",d);return function(){b.removeEventListener("ended",d)}},g=[a,f,e],d[0]=a,d[1]=f,d[2]=e,d[3]=b,d[4]=g):(b=d[3],g=d[4]);i(b,g)}g["default"]=a}),98);
__d("useMWPSafelyMarkThreadAsRead",["I64","Int64Hooks","LSFactory","LSMessagingThreadTypeUtil","LSOptimisticMarkThreadReadV2StoredProcedure","ServerTime","cr:886","promiseDone","react","useMAWMarkThreadAsRead","useMWMarkThreadAsReadWhenNewMessagesArrive","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=(j||d("react")).c;function a(a,e,g,j){var l=k(12),m=(h||(h=c("useReStore")))(),n=a.consistentThreadFbid,o=a.threadKey,p=a.threadType,q=c("useMAWMarkThreadAsRead")(a),r;l[0]!==n||l[1]!==j||l[2]!==o||l[3]!==p?(r={consistentThreadFbid:n,entryPoint:j,threadKey:o,threadType:p},l[0]=n,l[1]=j,l[2]=o,l[3]=p,l[4]=r):r=l[4];var s=b("cr:886")(r);l[5]!==s||l[6]!==p||l[7]!==q||l[8]!==m||l[9]!==o?(n=function(){s==null?void 0:s();if(d("LSMessagingThreadTypeUtil").isArmadilloSecure(p)){q();return}c("promiseDone")(m.runInTransaction(function(a){return c("LSOptimisticMarkThreadReadV2StoredProcedure")(c("LSFactory")(a),{readWatermarkTimestampMs:(i||(i=d("I64"))).of_float(d("ServerTime").getMillis()),threadKey:o})},"readwrite","ui",void 0,f.id+":62"))},j=[m,s,q,o,p],l[5]=s,l[6]=p,l[7]=q,l[8]=m,l[9]=o,l[10]=n,l[11]=j):(n=l[10],j=l[11]);r=d("Int64Hooks").useCallbackInt64(n,j);return c("useMWMarkThreadAsReadWhenNewMessagesArrive")(a,r,e,g)}g["default"]=a}),98);
__d("useMWV2FileDropzoneRegisterHandler",["MWV2FileDropzone.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");var i=b.useContext,j=b.useEffect;function a(a){var b=i(d("MWV2FileDropzone.react").mWV2FileDropzoneContext);j(function(){var c={enabled:!0,handler:a};b.current=c;return function(){c.enabled=!1,c.handler=null}},[b,a])}g["default"]=a}),98);
__d("useMWV2SendOpenMessageImplShared",["ArmadilloDataTraceCheckPoint","I64","IGDGetMessagePluginInfo","IGDThreadTTLCUtils","Int64Hooks","LSAppendDataTraceAddonStoredProcedure","LSAuthorityLevel","LSFactory","LSIntEnum","LSMailboxType","LSMessageReplySourceType","LSMessageReplySourceTypeV2","LSOptimisticSendMessageV2StoredProcedure","LSPendingTasksPluginType","LSShape","MWPActor.react","MWPReplyContext.react","MWPSendMessageLogger","MessagePowerUp","MessagingAttachmentType","Promise","asyncToGeneratorRuntime","gkx","react","sendToSentQPLLogger","useLSMessagingInitiatingSource"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l=(i||d("react")).useContext;function m(a,b,c){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e){e!=null&&c("gkx")("23995")&&(yield c("LSAppendDataTraceAddonStoredProcedure")(c("LSFactory")(a),{checkPointId:d("ArmadilloDataTraceCheckPoint").armadilloTlcControlOpenThread,dataTraceId:e,syncChannel:(k||(k=d("I64"))).minus_one,tags:b}))});return n.apply(this,arguments)}function a(a){var e=a.authorityLevel,f=a.disableMarkRead,g=a.ephemeralDurationInSec,i=a.onOptimisticMessageCreation,n=a.skipUrlPreviewGen,o=a.threadKey,p=a.threadType,q=d("MWPActor.react").useActor();a=l(d("MWPReplyContext.react").MWPReplyContext);var r=a.reply,s=c("useLSMessagingInitiatingSource")();return d("Int64Hooks").useCallbackInt64(function(a,l){var t=l.afterSend,u=l.attributionAppId,v=l.dataclassParams,w=l.dataTraceId,x=l.externalAttachmentUrl,y=l.hotEmojiSize,z=l.logSendPoint,A=l.mentionData,B=l.messageText,C=l.messageTypeParams,D=l.multitabEnv,E=l.optimisticAttachmentPreview,F=l.platformToken,G=l.pluginType,H=l.profileRanges,I=l.richTextFormatType,J=l.s2sInstanceKey,K=l.setupS2SLogging,L=l.source,M=l.stickerID,N=l.traceSendMessageAPI,O=l.transaction;return P(O);function P(a){return Q.apply(this,arguments)}function Q(){Q=b("asyncToGeneratorRuntime").asyncToGenerator(function*(l){var P=c("LSFactory")(l),Q=c("gkx")("24135");yield m(l,(k||(k=d("I64"))).to_string(o),w);var R=C.hasAttachment,S=C.hasGif,T=C.hasLinks,U=C.hasSticker,V=C.hasText,W=(yield l.threads.get(o)),X=T?d("IGDThreadTTLCUtils").isInstamadilloTTLCLinkEnabled(W):d("IGDThreadTTLCUtils").isInstamadilloTTLCTextEnabled(W);W=(yield d("IGDGetMessagePluginInfo").IGDGetMessagePluginInfo(l,r,function(){return(h||(h=b("Promise"))).resolve({openEb:X,pluginType:X?(j||(j=d("LSIntEnum"))).ofNumber(c("LSPendingTasksPluginType").IGD_INSTAMADILLO):G})}));l=W.openEb;W=W.pluginType;P=(yield c("LSOptimisticSendMessageV2StoredProcedure")(P,{dataclassParams:v!=null?JSON.stringify(v):void 0,extraSendMessageParams:d("LSShape").ofRecord({attribution_app_id:u,calculate_denormalizations:!1,data_trace_id:(P=w)!=null?P:void 0,ephemeral_duration_in_sec:g,external_attachment_url:x,hot_emoji_size:y,initiating_source:s,mark_read:f===!0?!1:(k||(k=d("I64"))).ge(e,(j||(j=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").AUTHORITATIVE)),mention_data:A,multitab_env:D,openEb:l,optimistic_attachment_preview:E,platform_token:F,plugin_type:W,power_up_style:(j||(j=d("LSIntEnum"))).ofNumber(c("MessagePowerUp").NONE),qpl_instance_key:J.toString(),reply_source_id:r==null?void 0:r.messageId,reply_source_type:r!=null?(j||(j=d("LSIntEnum"))).ofNumber(c("LSMessageReplySourceType").MESSAGE):void 0,reply_source_type_v2:r!=null?(j||(j=d("LSIntEnum"))).ofNumber(c("LSMessageReplySourceTypeV2").MESSAGE):void 0,rich_text_format_type:I,skip_url_preview_gen:n,source:L,sticker_id:M,text_has_links:T&&Q}),mailboxType:j.ofNumber(c("LSMailboxType").MESSENGER),senderId:q,text:B,threadKey:o,threadType:p}));z("create_optimistic_message_end");d("MWPSendMessageLogger").log(a,o,p,q,void 0,[],L,c("MessagingAttachmentType").NONE,r!=null,W,X,g);if(!R){Q=P[0];K(Q);N.addAnnotationBoolean("is_instamadillo_ttlc",X&&l===!0);d("sendToSentQPLLogger").addSendToSentAnnotations(J,{bool:{is_instamadillo_ttlc:X&&l===!0}})}i!=null&&i({TAG:0,hasLink:T,hasMention:H!=null&&H.length>0,isGIF:S,isReply:!!(r&&r.messageId!==""),isSticker:U,isText:V,offlineThreadingId:P[0]});t!=null&&(yield t(O));return P});return Q.apply(this,arguments)}},[o,r,g,s,f,e,n,q,p,i])}g["default"]=a}),98);
__d("useMWV2SendOpenMessageImpl",["react","useMWV2SendOpenMessageImplShared"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).c;function a(a){var b=i(8),d=a.disableMarkRead,e=a.ephemeralDurationInSec,f=a.onOptimisticMessageCreation,g=a.skipUrlPreviewGen;a=a.thread;var h;b[0]!==a.authorityLevel||b[1]!==a.threadKey||b[2]!==a.threadType||b[3]!==d||b[4]!==e||b[5]!==f||b[6]!==g?(h={authorityLevel:a.authorityLevel,disableMarkRead:d,ephemeralDurationInSec:e,onOptimisticMessageCreation:f,skipUrlPreviewGen:g,threadKey:a.threadKey,threadType:a.threadType},b[0]=a.authorityLevel,b[1]=a.threadKey,b[2]=a.threadType,b[3]=d,b[4]=e,b[5]=f,b[6]=g,b[7]=h):h=b[7];return c("useMWV2SendOpenMessageImplShared")(h)}g["default"]=a}),98);
__d("useMWV2SendOpenStagedMedia",["I64","IGDGetMessagePluginInfo","IGDThreadTTLCUtils","Int64Hooks","LSFactory","LSIntEnum","LSLocalApplyOptimisticMessageWithAttachmentsV2StoredProcedure","LSMessageReplySourceType","LSMessageReplySourceTypeV2","LSMessagingThreadTypeUtil","LSPendingTasksPluginType","LSShape","LSThreadBitOffset","LSVec","MWConsole","MWPActor.react","MWPComposerMediaUploadUtil","MWPReplyContext.react","MWPSendMessageLogger","MessagingAttachmentType","MessagingLoggingUtils","MessengerWebEventsFalcoEvent","Promise","asyncToGeneratorRuntime","issueLSMediaSendJobs","issueSendInstamadilloMediaMessage","react","react-forget-runtime","sendToSentQPLLogger","useLSMessagingInitiatingSource"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k;e=i||d("react");e.useContext;var l=e.c;function a(a,e,f){var g=l(11),i=d("MWPActor.react").useActor(),n=d("react-forget-runtime").useContextWithBailoutExperiment__unstable(d("MWPReplyContext.react").MWPReplyContext,m),o=n.reply,p=c("useLSMessagingInitiatingSource")();g[0]!==f?(n=d("LSThreadBitOffset").has(40,f),g[0]=f,g[1]=n):n=g[1];var q=n,r;g[2]!==f||g[3]!==o||g[4]!==q||g[5]!==a||g[6]!==p||g[7]!==i||g[8]!==e?(n=function(){var g=b("asyncToGeneratorRuntime").asyncToGenerator(function*(g,l){var m=l.isFirstMessage,n=l.isFirstMessageText,r=l.mediaStagings,s=l.pluginType,t=l.s2sInstanceKey,u=l.sendFirstMessageSeparately,v=l.setupS2SLogging,w=l.source,x=l.traceSendMessageAPI;l=l.transaction;m=m===void 0?!1:m;u=u===void 0?!1:u;if(r.length===0)return;var y;y=!1;if(r.length===1){var z=r[0];(k||(k=d("I64"))).to_int32(z.attachmentType)===c("MessagingAttachmentType").IMAGE?y=d("IGDThreadTTLCUtils").isInstamadilloTTLCImageEnabled(f):(k||(k=d("I64"))).to_int32(z.attachmentType)===c("MessagingAttachmentType").VIDEO&&(y=d("IGDThreadTTLCUtils").isInstamadilloTTLCVideoEnabled(f))}z=(yield d("IGDGetMessagePluginInfo").IGDGetMessagePluginInfo(l,o,function(){return(h||(h=b("Promise"))).resolve({openEb:y,pluginType:y?(j||(j=d("LSIntEnum"))).ofNumber(c("LSPendingTasksPluginType").IGD_INSTAMADILLO):s})}));var A=z.openEb;z=z.pluginType;var B=r[0];B=d("MessagingLoggingUtils").convertI64ToAttachmentType(B.attachmentType);var C=d("MWPComposerMediaUploadUtil").createPartitionedAttachments(r,q),D;D=!0;for(var E=0;E<C.length;E++)if(!m||!u||E===0&&m&&!n){var F=C[E],G=(yield c("LSLocalApplyOptimisticMessageWithAttachmentsV2StoredProcedure")(c("LSFactory")(l),{extraSendMessageParams:d("LSShape").ofRecord({attachments:c("LSVec").ofArray(F.map(d("LSShape").ofRecord)),ephemeral_duration_in_sec:a,external_attachment_url:void 0,initiating_source:p,mark_read:!1,platform_ref:void 0,platform_token:void 0,plugin_type:z,reply_source_id:o==null?void 0:o.messageId,reply_source_type:o!=null?(j||(j=d("LSIntEnum"))).ofNumber(c("LSMessageReplySourceType").MESSAGE):void 0,reply_source_type_v2:o!=null?(j||(j=d("LSIntEnum"))).ofNumber(c("LSMessageReplySourceTypeV2").MESSAGE):void 0,source:w}),senderId:i,threadKey:f.threadKey,threadType:f.threadType}));G=G[0];E===0&&(v(G),x.addAnnotationBoolean("is_instamadillo_ttlc",y&&A===!0),d("sendToSentQPLLogger").addSendToSentAnnotations(t,{bool:{is_instamadillo_ttlc:y&&A===!0}}));yield l.messages_optimistic_context.add({externalAttachmentUrl:void 0,initiatingSource:p,markThreadRead:!1,messageId:void 0,offlineThreadingId:G,openEb:A,platformRef:void 0,platformToken:void 0,replySourceId:void 0,replySourceType:void 0,sendType:void 0,skipUrlPreviewGen:void 0,taskId:(k||(k=d("I64"))).of_string(G),threadAttributionSource:w,threadKey:f.threadKey});e==null?void 0:e({TAG:2,numberOfAttachments:F.length,offlineThreadingId:G});if(z!=null&&(j||(j=d("LSIntEnum"))).unwrapIntEnum(z)===c("LSPendingTasksPluginType").IGD_INSTAMADILLO)yield c("issueSendInstamadilloMediaMessage")(l,F,G);else{var H=(yield c("issueLSMediaSendJobs")(l,f.threadKey,G,F,r));D=D&&H.sentWithAllFilesUploaded}d("MWPSendMessageLogger").log(g,f.threadKey,f.threadType,i,G,F.map(function(a){return a.attachment_fbid}),w,B,o!=null,z,y,a)}H=(k||(k=d("I64"))).to_string(f.threadKey);G=d("LSMessagingThreadTypeUtil").isGroup(f.threadType)?[H,null]:[null,H];var I=G[0],J=G[1];c("MessengerWebEventsFalcoEvent").log(function(){return{event_name:D?"hit_send_message_with_all_files_uploaded":"hit_send_message_with_files_pending",extra_data:null,other_user_fbid:J,thread_fbid:I}})});return function(a,b){return g.apply(this,arguments)}}(),r=[o,q,f,a,p,i,e],g[2]=f,g[3]=o,g[4]=q,g[5]=a,g[6]=p,g[7]=i,g[8]=e,g[9]=n,g[10]=r):(n=g[9],r=g[10]);return d("Int64Hooks").useCallbackInt64(n,r)}function m(a){return[a.reply]}g["default"]=a}),98);
__d("useMWV2SendOpenVoiceClipImplShared",["I64","IGDGetMessagePluginInfo","IGDThreadTTLCUtils","Int64Hooks","LSFactory","LSIntEnum","LSLocalApplyOptimisticMessageWithAttachmentsV2StoredProcedure","LSMessageReplySourceType","LSMessageReplySourceTypeV2","LSPendingTasksPluginType","LSShape","LSVec","MWMediaTraceHandler","MWPActor.react","MWPComposerMediaUploadUtil","MWPReplyContext.react","MessagingLoggingUtils","OfflineThreadingId","Promise","asyncToGeneratorRuntime","issueLSAudioMediaSendJob","issueSendInstamadilloMediaMessage","react","react-forget-runtime","sendToSentQPLLogger","useLSMessagingInitiatingSource"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k;e=i||d("react");e.useContext;var l=e.c;function m(a,b,c,d){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c,e){b!=null&&(yield d("MWMediaTraceHandler").logMediaSendStart(a,b,c,(k||(k=d("I64"))).of_int32(e)))});return n.apply(this,arguments)}function a(a){var e=l(14),f=a.ephemeralDurationInSec,g=a.onOptimisticMessageCreation,i=a.onUploadFailure,n=a.onUploadStart,p=a.onUploadSuccess,q=a.sendMessageLogger,r=a.skipUrlPreviewGen,s=a.threadKey,t=a.threadType,u=d("MWPActor.react").useActor();a=d("react-forget-runtime").useContextWithBailoutExperiment__unstable(d("MWPReplyContext.react").MWPReplyContext,o);var v=a.reply,w=c("useLSMessagingInitiatingSource")(),x;e[0]!==s||e[1]!==v||e[2]!==f||e[3]!==w||e[4]!==u||e[5]!==t||e[6]!==r||e[7]!==g||e[8]!==n||e[9]!==p||e[10]!==i||e[11]!==q?(a=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e){var l=e.dataTraceId,o=e.pluginType,x=e.s2sInstanceKey,y=e.setupS2SLogging,z=e.source,A=e.traceSendMessageAPI,B=e.transaction;e=e.voiceClip;var C=c("LSFactory")(B),D=d("OfflineThreadingId").createOfflineThreadingID(),E=d("MWPComposerMediaUploadUtil").getAudioAttachment(D,e.file,e.duration,e.waveformData);yield m(B,l,(k||(k=d("I64"))).one,2);var F=(yield B.threads.get(s)),G=d("IGDThreadTTLCUtils").isInstamadilloTTLCAudioEnabled(F);F=(yield d("IGDGetMessagePluginInfo").IGDGetMessagePluginInfo(B,v,function(){return(h||(h=b("Promise"))).resolve({openEb:G,pluginType:G?(j||(j=d("LSIntEnum"))).ofNumber(c("LSPendingTasksPluginType").IGD_INSTAMADILLO):o})}));var H=F.openEb;F=F.pluginType;C=(yield c("LSLocalApplyOptimisticMessageWithAttachmentsV2StoredProcedure")(C,{extraSendMessageParams:d("LSShape").ofRecord({attachments:c("LSVec").ofArray([d("LSShape").ofRecord(E)]),ephemeral_duration_in_sec:f,external_attachment_url:void 0,initiating_source:w,mark_read:!1,platform_ref:void 0,platform_token:void 0,plugin_type:F,reply_source_id:v==null?void 0:v.messageId,reply_source_type:v!=null?(j||(j=d("LSIntEnum"))).ofNumber(c("LSMessageReplySourceType").MESSAGE):void 0,reply_source_type_v2:v!=null?(j||(j=d("LSIntEnum"))).ofNumber(c("LSMessageReplySourceTypeV2").MESSAGE):void 0,source:z}),senderId:u,threadKey:s,threadType:t}));C=C[0];y(C);A.addAnnotationBoolean("is_instamadillo_ttlc",G&&H===!0);d("sendToSentQPLLogger").addSendToSentAnnotations(x,{bool:{is_instamadillo_ttlc:G&&H===!0}});yield B.messages_optimistic_context.add({externalAttachmentUrl:void 0,initiatingSource:w,markThreadRead:!1,messageId:void 0,offlineThreadingId:C,openEb:H,platformRef:void 0,platformToken:void 0,replySourceId:void 0,replySourceType:void 0,sendType:void 0,skipUrlPreviewGen:r,taskId:k.of_string(C),threadAttributionSource:z,threadKey:s});g!=null&&g({TAG:1,offlineThreadingId:C});F!=null&&(j||(j=d("LSIntEnum"))).unwrapIntEnum(F)===c("LSPendingTasksPluginType").IGD_INSTAMADILLO?yield c("issueSendInstamadilloMediaMessage")(B,[E],C):yield c("issueLSAudioMediaSendJob")(B,s,u,l,D,C,E,e,n,p,i);q(a,{actor:u,attachmentFbids:[E.attachment_fbid],attachmentType:d("MessagingLoggingUtils").convertI64ToAttachmentType(E.attachment_type),hasReply:v!=null,isInstamadilloTTLC:H,key:s,offlineThreadingId:C,pluginType:F,source:z,type:t})});return function(b,c){return a.apply(this,arguments)}}(),x=[s,f,w,v,u,t,r,g,q,n,p,i],e[0]=s,e[1]=v,e[2]=f,e[3]=w,e[4]=u,e[5]=t,e[6]=r,e[7]=g,e[8]=n,e[9]=p,e[10]=i,e[11]=q,e[12]=a,e[13]=x):(a=e[12],x=e[13]);return d("Int64Hooks").useCallbackInt64(a,x)}function o(a){return[a.reply]}g["default"]=a}),98);
__d("useMWV2SendOpenVoiceClip",["Int64Hooks","MWPSendMessageLogger","react","useMWV2SendOpenVoiceClipImplShared"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).c;function a(a){var b=i(13),e=a.ephemeralDurationInSec,f=a.onOptimisticMessageCreation,g=a.onUploadFailure,h=a.onUploadStart,j=a.onUploadSuccess,k=a.skipUrlPreviewGen;a=a.thread;var l,m;b[0]!==e?(l=function(a,b){var c=b.actor,f=b.attachmentFbids,g=b.attachmentType,h=b.hasReply,i=b.isInstamadilloTTLC,j=b.key,k=b.offlineThreadingId,l=b.pluginType,m=b.source;b=b.type;c!=null&&d("MWPSendMessageLogger").log(a,j,b,c,k,f,m,g,h,l,i,e)},m=[e],b[0]=e,b[1]=l,b[2]=m):(l=b[1],m=b[2]);l=d("Int64Hooks").useCallbackInt64(l,m);b[3]!==e||b[4]!==f||b[5]!==g||b[6]!==h||b[7]!==j||b[8]!==l||b[9]!==k||b[10]!==a.threadKey||b[11]!==a.threadType?(m={ephemeralDurationInSec:e,onOptimisticMessageCreation:f,onUploadFailure:g,onUploadStart:h,onUploadSuccess:j,sendMessageLogger:l,skipUrlPreviewGen:k,threadKey:a.threadKey,threadType:a.threadType},b[3]=e,b[4]=f,b[5]=g,b[6]=h,b[7]=j,b[8]=l,b[9]=k,b[10]=a.threadKey,b[11]=a.threadType,b[12]=m):m=b[12];return c("useMWV2SendOpenVoiceClipImplShared")(m)}g["default"]=a}),98);
__d("useMWV2SendOpenMessage",["I64","Int64Hooks","LSGenerateTraceId","LSIntEnum","LSMessagingThreadTypeUtil","LSShape","MWPReplyContext.react","MWSharedMsgLogUtils","MWV2ComposerActionsContext.react","MWV2SetupS2SLoggingShared","MultipleTabsLogger","ReQL","asyncToGeneratorRuntime","gkx","hasDefaultThreadOneToOneCapability","react","react-forget-runtime","sendToSentQPLLogger","useAsyncReStore","useLSMessagingInitiatingSource","useMWLSDefaultThreadSource","useMWV2SendOpenMessageImpl","useMWV2SendOpenStagedMedia","useMWV2SendOpenVoiceClip"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;e=h||d("react");e.useContext;var k=e.c;function a(a){var e=k(39),g=a.disableMarkRead,h=a.ephemeralDurationInSec,n=a.onOptimisticMessageCreation,o=a.onUploadFailure,p=a.onUploadStart,q=a.onUploadSuccess,r=a.pluginType,s=a.skipUrlPreviewGen,t=a.thread,u=c("useAsyncReStore")();a=d("react-forget-runtime").useContextWithBailoutExperiment__unstable(d("MWPReplyContext.react").MWPReplyContext,m);var v=a.reply;a=c("useLSMessagingInitiatingSource")();var w=c("useMWLSDefaultThreadSource")(),x;e[0]!==h||e[1]!==n||e[2]!==o||e[3]!==p||e[4]!==q||e[5]!==s||e[6]!==t?(x={ephemeralDurationInSec:h,onOptimisticMessageCreation:n,onUploadFailure:o,onUploadStart:p,onUploadSuccess:q,skipUrlPreviewGen:s,thread:t},e[0]=h,e[1]=n,e[2]=o,e[3]=p,e[4]=q,e[5]=s,e[6]=t,e[7]=x):x=e[7];var y=c("useMWV2SendOpenVoiceClip")(x),z=c("useMWV2SendOpenStagedMedia")(h,n,t);p=(o=g)!=null?o:!1;e[8]!==p||e[9]!==h||e[10]!==n||e[11]!==s||e[12]!==t?(q={disableMarkRead:p,ephemeralDurationInSec:h,onOptimisticMessageCreation:n,skipUrlPreviewGen:s,thread:t},e[8]=p,e[9]=h,e[10]=n,e[11]=s,e[12]=t,e[13]=q):q=e[13];var A=c("useMWV2SendOpenMessageImpl")(q);e[14]!==t?(x=d("LSMessagingThreadTypeUtil").isMessageRequest(t),e[14]=t,e[15]=x):x=e[15];var B=x;g=d("react-forget-runtime").useContextWithBailoutExperiment__unstable(d("MWV2ComposerActionsContext.react").MWV2ComposerActionsContext,l);var C=g.onMessageSendAttempt;e[16]!==C||e[17]!==w||e[18]!==t||e[19]!==u||e[20]!==B||e[21]!==v||e[22]!==y||e[23]!==r||e[24]!==A||e[25]!==z?(o=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,g,h,k,l,m,n,o,p,q,s,x,D,E,F,G,H,I){var J=q===void 0?!1:q,K=s===void 0?!1:s,L;L=!1;C==null?void 0:C(!0);var M=function(a){x.addMarkerPoint(a,"AppTiming"),d("sendToSentQPLLogger").markSendToSentPoint(D,a)},N=w(t.threadKey),O=c("LSGenerateTraceId")(),P={contents:1};E=t.eventStartTimestampMs!=null;G=t.threadType;var Q=(yield u),R=c("MWV2SetupS2SLoggingShared")({db:Q,isCommunityEvent:E,isMessageRequest:B,s2sInstanceKey:D,source:(i||(i=d("LSIntEnum"))).unwrapIntEnum(N),threadType:G,traceSendMessageAPI:x});if(c("gkx")("24121")){H=(yield c("hasDefaultThreadOneToOneCapability")(t.threadKey,Q));H&&(M("invalid_send_to_default_e2ee"),d("sendToSentQPLLogger").addSendToSentAnnotations(D,{string:{invalid_send_to_default_e2ee_attribution:(j||(j=d("I64"))).to_string(N)}}))}q=(yield d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(Q.tables.media_staging).filter(function(a){return!a.isSent&&(j||(j=d("I64"))).equal(a.threadKey,t.threadKey)})));var S=d("MWSharedMsgLogUtils").getMessageTypeParams({externalAttachmentUrl:l,hotEmojiSize:h,mediaStagings:q,messageText:a,reply:v,stickerId:g,threadType:t.threadType,voiceClip:n}),T=(yield d("MWSharedMsgLogUtils").getSendToSentAnnotations(t,S,i.unwrapIntEnum(N))),U=(yield d("MultipleTabsLogger").hasMultipleTabs());return Q.runInTransaction(function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){d("MWSharedMsgLogUtils").addSendMessageMetadataForInteractionTrace(x,S,t);d("sendToSentQPLLogger").addSendToSentAnnotations(D,T);if(n!=null){(J===!1||K===!0)&&(yield y(Q,{dataTraceId:O,pluginType:r,s2sInstanceKey:D,setupS2SLogging:R,source:N,traceSendMessageAPI:x,transaction:b,voiceClip:n}));return}var c=S.hasGif,f=S.hasHotEmoji,i=S.hasSticker,q=S.hasText;i||f?P.contents=4:c&&(P.contents=6);var s=e!=null?d("LSShape").ofRecord({mention_ids:e.map(function(a){return a.id}).join(","),mention_lengths:e.map(function(a){return String(a.length)}).join(","),mention_offsets:e.map(function(a){return String(a.offset)}).join(","),mention_types:e.length!==0?e.map(function(a){return a.type}).join(","):void 0}):void 0;M("create_optimistic_message_start");if(q||i||f||c){L=!0;if(J===!1||K===!0){yield A(Q,{afterSend:p,attributionAppId:k,dataclassParams:I,dataTraceId:O,externalAttachmentUrl:l,hotEmojiSize:h,logSendPoint:M,mentionData:s,messageText:a,messageTypeParams:S,multitabEnv:U,optimisticAttachmentPreview:m,platformToken:o,pluginType:r,profileRanges:e,richTextFormatType:F,s2sInstanceKey:D,setupS2SLogging:R,source:N,stickerID:g,traceSendMessageAPI:x,transaction:b});if(J===!0)return}}else p!=null&&(yield p(b));!i&&!c&&!f&&(yield z(Q,{isFirstMessage:K,isFirstMessageText:L,mediaStagings:yield d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(b.media_staging).filter(function(a){return!a.isSent&&(j||(j=d("I64"))).equal(a.threadKey,t.threadKey)})),pluginType:r,s2sInstanceKey:D,sendFirstMessageSeparately:J,setupS2SLogging:R,source:N,traceSendMessageAPI:x,transaction:b}))});return function(a){return c.apply(this,arguments)}}(),"readwrite","ui",void 0,f.id+":250")});return function(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){return a.apply(this,arguments)}}(),e[16]=C,e[17]=w,e[18]=t,e[19]=u,e[20]=B,e[21]=v,e[22]=y,e[23]=r,e[24]=A,e[25]=z,e[26]=o):o=e[26];e[27]!==C||e[28]!==w||e[29]!==t||e[30]!==u||e[31]!==a||e[32]!==B||e[33]!==v||e[34]!==y||e[35]!==A||e[36]!==z||e[37]!==r?(p=[C,w,t,u,a,B,v,y,A,z,r],e[27]=C,e[28]=w,e[29]=t,e[30]=u,e[31]=a,e[32]=B,e[33]=v,e[34]=y,e[35]=A,e[36]=z,e[37]=r,e[38]=p):p=e[38];return d("Int64Hooks").useCallbackInt64(o,p)}function l(a){return[a.onMessageSendAttempt]}function m(a){return[a.reply]}g["default"]=a}),98);
__d("useMWXLexicalHasText",["LexicalText","react"],(function(a,b,c,d,e,f,g){"use strict";var h;c=h||d("react");var i=c.useCallback,j=c.useEffect,k=c.useRef,l=c.useState,m=c.c;function n(a){return a.getEditorState().read(d("LexicalText").$isRootTextContentEmptyCurry(a.isComposing()))}function o(a){var b=m(5),c;b[0]!==a?(c=function(){return!n(a)},b[0]=a,b[1]=c):c=b[1];c=l(c);var d=c[0],e=c[1],f;b[2]!==a?(c=function(){return a.registerUpdateListener(function(){e(!n(a))})},f=[a],b[2]=a,b[3]=c,b[4]=f):(c=b[3],f=b[4]);j(c,f);return d}function a(a){var b=a.editor;a=a.initialValue;var c=k(a);return{useHasText:i(function(){var a,d=k((a=c.current)!=null?a:!1);j(function(){d.current=!1},[]);return o(b)||d.current},[b])}}function b(a){var b=a.editor;a=a.initialValue;a=k(a);var c=k((a=a.current)!=null?a:!1);j(function(){c.current=!1},[]);return o(b)||c.current}g.useMWXLexicalHasText_DEPRECATED=a;g.useMWXLexicalHasText=b}),98);
__d("useMWXLexicalOnTypingChanged",["LexicalText","MWXUseLatch","react"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");var i=b.useEffect,j=b.useRef,k=b.c;function a(a){var b=k(6),c=a.editor;a=a.onTypingStateChanged;a=d("MWXUseLatch").useLatch(a,!0,5e3);var e=a[0],f=a[1],g=j(""),h;b[0]!==f||b[1]!==e||b[2]!==c?(a=function(){var a=function(a){a=a.editorState.read(function(){return d("LexicalText").$rootTextContent()});if(a!==g.current){g.current=a;if(a==="")return f();else return e()}};return c.registerUpdateListener(a)},h=[e,f,c],b[0]=f,b[1]=e,b[2]=c,b[3]=a,b[4]=h):(a=b[3],h=b[4]);i(a,h);b[5]===Symbol["for"]("react.memo_cache_sentinel")?(a={},b[5]=a):a=b[5];return a}g["default"]=a}),98);
__d("useRegisterMAWThreadEvent",["I64","Int64Hooks","LSAuthorityLevel","LSIntEnum","LSMessagingThreadTypeUtil","MAWMiActOnActThreadReady","MAWThreadEvent","Promise","promiseDone","react","useMWGetOtherUserContact","useMWIsReadReceiptsDisabledForThread","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l,m=(j||d("react")).c;function a(a){var e=m(11),f=a.authorityLevel,g=a.threadKey,j=a.threadType,n;e[0]!==f?(n=(k||(k=d("I64"))).ge(f,(l||(l=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").AUTHORITATIVE)),e[0]=f,e[1]=n):n=e[1];var o=n,p=(i||(i=c("useReStore")))(),q=c("useMWIsReadReceiptsDisabledForThread")(a.threadKey);e[2]===Symbol["for"]("react.memo_cache_sentinel")?(f=["capabilities","capabilities2","contactViewerRelationship","blockedByViewerStatus"],e[2]=f):f=e[2];var r=c("useMWGetOtherUserContact")(a.threadKey,a.threadType,f);e[3]!==j||e[4]!==o||e[5]!==p||e[6]!==g||e[7]!==r||e[8]!==q?(n=function(){d("LSMessagingThreadTypeUtil").isArmadilloSecure(j)&&o&&c("promiseDone")(d("MAWMiActOnActThreadReady").onActThreadReady(p.tables,g,"useRegisterMAWThreadEvent",function(a,c){d("MAWThreadEvent").setThreadEventHandler(c,r,q);return(h||(h=b("Promise"))).resolve()}))},a=[g,j,o,p,q,r],e[3]=j,e[4]=o,e[5]=p,e[6]=g,e[7]=r,e[8]=q,e[9]=n,e[10]=a):(n=e[9],a=e[10]);d("Int64Hooks").useEffectInt64(n,a)}g["default"]=a}),98);/*FB_PKG_DELIM*/
__d("ArrowDownOutline20.svg.react",["react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){return i.jsxs("svg",babelHelpers["extends"]({viewBox:"0 0 20 20",width:"1em",height:"1em",fill:"currentColor"},a,{children:[a.title!=null&&i.jsx("title",{children:a.title}),a.children!=null&&i.jsx("defs",{children:a.children}),i.jsxs("g",{fillRule:"evenodd",transform:"translate(-90 -248)",children:[i.jsx("path",{fillRule:"nonzero",d:"M95.322 258.928a.75.75 0 0 0-1.06 1.06l5.208 5.209a.75.75 0 0 0 1.06 0l5.209-5.208a.75.75 0 0 0-1.06-1.06L100 263.605l-4.678-4.678z"}),i.jsx("path",{fillRule:"nonzero",d:"M99.25 251.333v12.813a.75.75 0 1 0 1.5 0v-12.813a.75.75 0 1 0-1.5 0z"})]})]}))}a.displayName=a.name+" [from "+f.id+"]";a._isSVG=!0;b=a;g["default"]=b}),98);
__d("CometIXTFacebookProactiveWarningFlowTriggerRootQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="8924638857580978"}),null);
__d("CometIXTFacebookProactiveWarningFlowTriggerRootQuery$Parameters",["CometIXTFacebookProactiveWarningFlowTriggerRootQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a={kind:"PreloadableConcreteRequest",params:{id:b("CometIXTFacebookProactiveWarningFlowTriggerRootQuery_facebookRelayOperation"),metadata:{},name:"CometIXTFacebookProactiveWarningFlowTriggerRootQuery",operationKind:"query",text:null}};e.exports=a}),null);
__d("CometIXTFacebookProactiveWarningFlowTriggerEntryPoint.entrypoint",["CometIXTFacebookProactiveWarningFlowTriggerRootQuery$Parameters","JSResourceForInteraction","WebPixelRatio","react","uuidv4"],(function(a,b,c,d,e,f,g){"use strict";var h;h||c("react");a={getPreloadProps:function(a){return{queries:{reference:{parameters:c("CometIXTFacebookProactiveWarningFlowTriggerRootQuery$Parameters"),variables:{input:babelHelpers["extends"]({},a,{nt_context:null,trigger_session_id:c("uuidv4")()}),scale:d("WebPixelRatio").get()}}}}},root:c("JSResourceForInteraction")("CometIXTFacebookProactiveWarningFlowTriggerRoot.react").__setRef("CometIXTFacebookProactiveWarningFlowTriggerEntryPoint.entrypoint")};b=a;g["default"]=b}),98);
__d("ComponentMountUnmountSubspanLogger.react",["InteractionTracingMetrics","hero-tracing-placeholder","performanceNow","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i;b=i||d("react");var j=b.useContext,k=b.useEffect,l=b.c;function a(a){var b=l(4),e=a.description,f=j(d("hero-tracing-placeholder").HeroInteractionIDContext),g;b[0]!==f||b[1]!==e?(a=function(){var a=(h||(h=c("performanceNow")))();return function(){if(f!=null){var b=(h||(h=c("performanceNow")))();c("InteractionTracingMetrics").addSubspan(f,e,"AppTiming",a,b,{})}}},g=[e,f],b[0]=f,b[1]=e,b[2]=a,b[3]=g):(a=b[2],g=b[3]);k(a,g)}g["default"]=a}),98);
__d("E2EELinkPreviewXMASendStatus",[],(function(a,b,c,d,e,f){a=Object.freeze({SENDING:1});f["default"]=a}),66);
__d("MAWMessagesRangesUtils",["I64"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){return{hasMoreAfter:!1,hasMoreBefore:!1,isLoadingAfter:!1,isLoadingBefore:!1,maxMessageId:"",maxTimestampMs:(h||(h=d("I64"))).max_int,minMessageId:"",minTimestampMs:h.min_int,threadKey:a}}function b(a){var b=a.direction,c=a.mawFetchResult;a=a.range;var e=[].concat(c.msgs).sort(function(a,b){return a.sortOrderMs-b.sortOrderMs}),f=e.length>0?e[0]:void 0;e=e.length>0?e[e.length-1]:void 0;switch(b){case"asc":return babelHelpers["extends"]({},a,{hasMoreAfter:c.hasMoreAfter,isLoadingAfter:!1,maxMessageId:(b=e==null?void 0:e.msgId)!=null?b:a.maxMessageId,maxTimestampMs:(h||(h=d("I64"))).max(a.maxTimestampMs,(e==null?void 0:e.sortOrderMs)!=null?(h||(h=d("I64"))).of_float(e==null?void 0:e.sortOrderMs):a.maxTimestampMs)});case"desc":return babelHelpers["extends"]({},a,{hasMoreBefore:c.hasMoreBefore,isLoadingBefore:!1,minMessageId:(b=f==null?void 0:f.msgId)!=null?b:a.minMessageId,minTimestampMs:(h||(h=d("I64"))).min(a.minTimestampMs,(f==null?void 0:f.sortOrderMs)!=null?(h||(h=d("I64"))).of_float(f==null?void 0:f.sortOrderMs):a.minTimestampMs)})}}function c(a,b){return b==="asc"?a.maxTimestampMs:a.minTimestampMs}g.getRangeForFailure=a;g.getNewMAWRange=b;g.getTimestampForRange=c}),98);
__d("EBDeanonRangeExtension",["FBLogger","MAWFetchDeanonMetadataUsingCache","MAWFetchEBDeanonMessagesMetadata","MAWFetchLocalMessagesAndMetadata","MAWMessageIntegrityChecker","MAWMessagesRangesUtils","MAWMsgType","MAWPutMessagesToDB","Promise","WATagsLogger","asyncToGeneratorRuntime","err","gkx"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[","] Filtered deanon data (to be compared with local) [","]"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["[","] Raw deanon data [","]"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["[","] Encountered unavailable or ciphertext message, EB restore is required"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["[","] Deanon fetch failed"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["[","] Fetching deanon and local data for page size ",""]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["[","] EB restore deanon optimisation is enabled"]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["[","] EB restore deanon optimisation is disabled"]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose(["[","] Range is not valid for EB deanon ",""]);p=function(){return a};return a}function q(){var a=babelHelpers.taggedTemplateLiteralLoose(["Local external ids do not match de-anon. Local: [","], ToExistInLocal: [","]"]);q=function(){return a};return a}function r(){var a=babelHelpers.taggedTemplateLiteralLoose(["Local data exists but in the wrong order."]);r=function(){return a};return a}function s(){var a=babelHelpers.taggedTemplateLiteralLoose(["Local data was sufficient, skipping EB restore"]);s=function(){return a};return a}function t(){var a=babelHelpers.taggedTemplateLiteralLoose(["Not enough local metadata. Expected (","), got (",")."]);t=function(){return a};return a}function u(){var a=babelHelpers.taggedTemplateLiteralLoose(["Deanon data is empty, check if de-anon API is enabled: bunnylol labyrinth <user_id>"]);u=function(){return a};return a}function v(){var a=babelHelpers.taggedTemplateLiteralLoose(["Comparing deanon (size ",") and local (size ",") metadata"]);v=function(){return a};return a}var w=d("WATagsLogger").TAGS(["EBDeanonRangeExtension"]);function x(a){return c("err")("Unhandled direction: "+a)}function y(a){return a.filter(function(a){return a.type_===d("MAWMsgType").MSG_TYPE.UNAVAILABLE||a.type_===d("MAWMsgType").MSG_TYPE.CIPHERTEXT}).length>0}function a(a){return z.apply(this,arguments)}function z(){z=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var e=a.chatJid,f=a.db,g=a.direction,q=a.dispatch,r=a.includeOriginalMsg,s=a.logger,t=a.pageSize;a=a.range;if(!d("MAWFetchEBDeanonMessagesMetadata").isRangeValidForEBDeanonFetch(g,a)){w.LOG(p(),e,a.threadKey);return(h||(h=b("Promise"))).resolve(null)}if(!c("gkx")("5390")){w.LOG(o(),e);return(h||(h=b("Promise"))).resolve(null)}w.LOG(n(),e);var u=r?t:t+1,v=D(g);w.LOG(m(),e,u);u=(yield (h||(h=b("Promise"))).all([c("MAWFetchDeanonMetadataUsingCache")({chatJid:e,direction:g,includeReferenceTimestamp:!0,logger:s,pageSize:u,range:a,sortFn:v}),c("MAWFetchLocalMessagesAndMetadata")({chatJid:e,direction:g,includeOriginalMsg:!0,logger:s,pageSize:u,range:a,sortFn:v})]));var x=u[0];u=u[1];var z=u.localMsgsMetadata;u=u.mawFetchResult;if(x.success===!1){w.WARN(l(),e);c("FBLogger")("messenger_web_product").warn("EBMessageRangeDataSource: Deanon messages metadata fetch failed, try to fetch messages from EB");return(h||(h=b("Promise"))).resolve(null)}if(y(u.msgs)){w.WARN(k(),e);return(h||(h=b("Promise"))).resolve(null)}r=A({includeOriginalMsg:r,mawFetchResult:u,sortedDeanonMsgsMetadata:x.value,sortedLocalMsgsMetadata:z});u=r.filteredDeanonMsgsMetadata;z=r.filteredLocalMsgsMetadata;r=r.filteredMawFetchResult;w.LOG(j(),e,x.value.map(function(a){return"{"+a.externalId+", "+a.sortOrderMs+"}"}).join(", "));w.LOG(i(),e,u.map(function(a){return"{"+a.externalId+", "+a.sortOrderMs+"}"}).join(", "));return B({db:f,deanonMsgsMetadata:u,direction:g,dispatch:q,localMsgsMetadata:z,logger:s,mawFetchResult:r,pageSize:t,range:a,sortFn:v})});return z.apply(this,arguments)}function A(a){var b=a.includeOriginalMsg,c=a.mawFetchResult,d=a.sortedDeanonMsgsMetadata;a=a.sortedLocalMsgsMetadata;if(b===!0||a.length===0)return{filteredDeanonMsgsMetadata:d,filteredLocalMsgsMetadata:a,filteredMawFetchResult:c};var e=a[0].externalId,f=a[0].sortOrderMs;b=a.slice(1);a=d.slice(d.findIndex(function(a){return a.externalId===e})+1);d=c.msgs.filter(function(a){return!(a.externalId===e&&a.sortOrderMs===f)});return{filteredDeanonMsgsMetadata:a,filteredLocalMsgsMetadata:b,filteredMawFetchResult:babelHelpers["extends"]({},c,{msgs:d})}}function B(a){return C.apply(this,arguments)}function C(){C=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var e=a.db,f=a.deanonMsgsMetadata,g=a.direction,i=a.dispatch,j=a.localMsgsMetadata,k=a.logger,l=a.mawFetchResult,m=a.pageSize,n=a.range;a=a.sortFn;k==null?void 0:k.markQPLPoint("maw_vs_eb_deanon_comparison_start");j=E(j,f,m,a);k==null?void 0:k.markQPLPoint("maw_vs_eb_deanon_comparison_end");k==null?void 0:k.addQPLAnnotations({bool:{is_data_restored_locally_when_extending_range:j}});c("FBLogger")("messenger_web_product").info("EBMessageRangeDataSource: Optimistic range extension using Deanon, isDataPresentLocally: %s",j.toString());if(!j)return(h||(h=b("Promise"))).resolve(null);k==null?void 0:k.markQPLPoint("insert_msgs_to_lsdb_start","begin inserting the messages into LSDB");yield d("MAWPutMessagesToDB").insertMessageResponseIntoDatabase(e,l,i,k==null?void 0:k.getInstanceKey());k==null?void 0:k.markQPLPoint("insert_msgs_to_lsdb_end");return(h||(h=b("Promise"))).resolve(d("MAWMessagesRangesUtils").getNewMAWRange({direction:g,mawFetchResult:l,range:n}))});return C.apply(this,arguments)}function D(a){switch(a){case"asc":return d("MAWMessageIntegrityChecker").compareMessageMetadataForAscOrder;case"desc":return d("MAWMessageIntegrityChecker").compareMessageMetadataForDescOrder;default:a;throw x(a)}}function E(a,b,c,d){w.LOG(v(),b.length,a.length);if(b.length===0){w.WARN(u());return!1}var e=[].concat(b,a).reduce(function(a,b){a[b.externalId]=b;return a},{});b=new Set([].concat(a.map(function(a){return a.externalId}),b.map(function(a){return a.externalId})));b=Array.from(b).map(function(a){return e[a]}).sort(d).slice(0,c);if(a.length<b.length){w.LOG(t(),b.length,a.length);return!1}d=b.every(function(b,c){return b.externalId===a[c].externalId});if(d)w.LOG(s());else{var f=new Set(a.map(function(a){return a.externalId}));b.every(function(a,b){return f.has(a.externalId)})&&w.WARN(r());w.LOG(q(),a.map(function(a){return a.externalId}).join(", "),b.map(function(a){return a.externalId}).join(", "))}return d}g.unhandledDirectionError=x;g.getRangeFromLocalDataIfConsistent=a;g.excludeOffsetMsgIfNecessary=A;g.isDeanonDataPresentLocally=E}),98);
__d("MAWFetchDeanonMetadataUsingCache",["EBDeanonRangeExtension","FBLogger","I64","MAWFetchEBDeanonMessagesMetadata","WAResultOrError","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=new Map();new Map();function a(a){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.chatJid,e=a.direction,f=a.includeReferenceTimestamp,g=a.logger,h=a.pageSize,i=a.range;a=a.sortFn;var j=k(b,e,g,i);if(j!=null&&j.length>=h){c("FBLogger")("messenger_web_product").info("EBMessageRangeDataSource: Using cached Deanon messages metadata for comparison to local data");return d("WAResultOrError").makeResult(j)}h=(yield d("MAWFetchEBDeanonMessagesMetadata").fetchEBDeanonMessagesMetadata({chatJid:b,direction:e,includeReferenceTimestamp:f,logger:g,range:i,sortFn:a}));h.success===!0&&m(b,e,g,h.value,i);return h});return j.apply(this,arguments)}function k(a,b,c,e){c==null?void 0:c.markQPLPoint("deanon_cache_fetch_start");a=(a=i.get(a))==null?void 0:a.get(b);if(a==null)return null;var f=b==="asc"?e.maxTimestampMs:e.minTimestampMs;e=(h||(h=d("I64"))).ge(f,a.minTimestampMs)&&(h||(h=d("I64"))).le(f,a.maxTimestampMs);if(!e)return null;e=-1;switch(b){case"asc":e=a.msgsMetadata.findIndex(function(a){return(h||(h=d("I64"))).ge(h.of_float(a.sortOrderMs),f)});break;case"desc":e=a.msgsMetadata.findIndex(function(a){return(h||(h=d("I64"))).le(h.of_float(a.sortOrderMs),f)});break;default:b;throw d("EBDeanonRangeExtension").unhandledDirectionError(b)}b=a.msgsMetadata.slice(e);c==null?void 0:c.markQPLPoint("deanon_cache_fetch_end");return b}function l(a,b,c,d){var e;e=(e=i.get(a))!=null?e:new Map();e.set(b,{maxTimestampMs:d.max,minTimestampMs:d.min,msgsMetadata:c});i.set(a,e)}function m(a,b,c,e,f){if(e.length===0)return;c==null?void 0:c.markQPLPoint("deanon_cache_replace_start");var g=(h||(h=d("I64"))).of_float(e[e.length-1].sortOrderMs);switch(b){case"asc":l(a,b,e,{max:g,min:f.maxTimestampMs});break;case"desc":l(a,b,e,{max:f.minTimestampMs,min:g});break;default:b;throw d("EBDeanonRangeExtension").unhandledDirectionError(b)}c==null?void 0:c.markQPLPoint("deanon_cache_replace_end")}g["default"]=a}),98);
__d("MAWFetchEBDeanonMessagesMetadata",["DateConsts","EBDeanonRangeExtension","EBFormatUtils","FBLogger","I64","MAWEBDeanonFetch","Promise","WAResultOrError"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=100,k="timeout",l=10*d("DateConsts").MS_PER_SEC;function a(a){var e=a.chatJid,f=a.direction,g=a.includeReferenceTimestamp,o=a.logger,p=a.range;a=a.sortFn;c("FBLogger")("messenger_web_product").info("EBMessageRangeDataSource: Issuing fetch request to EB Deanon API");o==null?void 0:o.markQPLPoint("eb_fetch_deanon_start");f=m(f);p=(i||(i=d("I64"))).to_float(d("EBFormatUtils").adjustTs(n(f,p),f));return(h||(h=b("Promise"))).race([d("MAWEBDeanonFetch").fetchMessagesMetadataFromEBDeanon({chatJid:e,count:j,direction:f,includeReferenceTimestamp:g,referenceTimestampMs:p,sortFn:a}),new h(function(a){return window.setTimeout(function(){return a(d("WAResultOrError").makeError(k))},l)})]).then(function(a){o==null?void 0:o.markQPLPoint("eb_fetch_deanon_end");return a})}function m(a){switch(a){case"asc":return"after";case"desc":return"before";default:a;throw d("EBDeanonRangeExtension").unhandledDirectionError(a)}}function n(a,b){switch(a){case"after":return b.maxTimestampMs;case"before":return b.minTimestampMs;default:a;throw d("EBDeanonRangeExtension").unhandledDirectionError(a)}}function e(a,b){a=m(a);b=n(a,b);switch(a){case"after":return!(i||(i=d("I64"))).equal(b,(i||(i=d("I64"))).max_int);case"before":return!(i||(i=d("I64"))).equal(b,(i||(i=d("I64"))).min_int);default:a;throw d("EBDeanonRangeExtension").unhandledDirectionError(a)}}g.fetchEBDeanonMessagesMetadata=a;g.isRangeValidForEBDeanonFetch=e}),98);
__d("MAWFetchLocalMessagesAndMetadata",["MAWFetchMessagesForMLv2","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.chatJid,c=a.direction,e=a.includeOriginalMsg,f=a.logger,g=a.pageSize,h=a.range;a=a.sortFn;b=(yield d("MAWFetchMessagesForMLv2").fetchMessagesFromMAW({chatJid:b,direction:c,includeOriginalMsg:e,logger:f,pageSize:g,range:h}));c=i(b.msgs).sort(a);return{localMsgsMetadata:c,mawFetchResult:b}});return h.apply(this,arguments)}function i(a){return a.map(function(a){return{externalId:a.externalId,msgType:a.type_,sortOrderMs:a.sortOrderMs}})}g["default"]=a}),98);
__d("MAWFetchMessagesForMLv2",["EBDeanonRangeExtension","MAWSecureLocalDBFetch","err"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=a.chatJid,d=a.direction,e=a.includeOriginalMsg,f=a.logger,g=a.pageSize;a=a.range;f==null?void 0:f.markQPLPoint("wait_secure_local_db_fetch_start");return c("MAWSecureLocalDBFetch")({actionType:"user",chatJid:b,config:{admin:!0,editMsgHistory:!0,media:!0,reactions:!0,receiverFetch:!0,xma:!0},count:g,direction:h(d),offsetMsg:{includeOriginalMsg:e,messageId:d==="asc"?a.maxMessageId:a.minMessageId},timestampMs:d==="asc"?a.maxTimestampMs:a.minTimestampMs}).then(function(a){if(a.success===!1){var b;f==null?void 0:f.markQPLPoint("wait_secure_local_db_fetch_failed");throw(b=a.payload)!=null?b:c("err")(a.error)}f==null?void 0:f.markQPLPoint("wait_secure_local_db_fetch_end");return a.value})}function h(a){switch(a){case"asc":return"after";case"desc":return"before";default:a;throw d("EBDeanonRangeExtension").unhandledDirectionError(a)}}g.fetchMessagesFromMAW=a;g.translateDirectionForMaw=h}),98);
__d("MAWFetchMessagesFromEBForMLv2",["DateConsts","I64","MAWEBFetch","MAWFetchMessagesForMLv2","MAWMessagesRangesUtils","MAWTraceUtils","MWEncryptedBackUpEBNotEnabledError","Promise","WAResultOrError","WATagsLogger","asyncToGeneratorRuntime","gkx","recoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["EBMessageRangeDataSource: Failed to fetch messages from EB. Message: "," TraceId: "," Request: ",""]);j=function(){return a};return a}var k="timeout",l=c("gkx")("6581")?15*d("DateConsts").MS_PER_SEC:10*d("DateConsts").MS_PER_SEC;function a(a){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var e=a.chatJid,f=a.db,g=a.direction,m=a.logger,o=a.pageSize;a=a.range;m==null?void 0:m.markQPLPoint("wait_eb_fetch_start");var p=d("MAWMessagesRangesUtils").getTimestampForRange(a,g),q=e+":"+(i||(i=d("I64"))).to_string(p)+":"+g+":"+o,r=d("MAWTraceUtils").createTraceId();e=(yield (h||(h=b("Promise"))).race([c("MAWEBFetch")({chatJid:e,count:o,db:f,direction:d("MAWFetchMessagesForMLv2").translateDirectionForMaw(g),timestampMs:p,traceId:r}),new h(function(a){return window.setTimeout(function(){return a(d("WAResultOrError").makeError(k))},l)})]));if(e.success===!1){m==null?void 0:m.markQPLPoint("eb_fetch_response_fail");m==null?void 0:m.addQPLAnnotations({string:{eb_failure_reason:e.error,eb_restore_status:e.error}});e.error!==k&&e.error!==d("MWEncryptedBackUpEBNotEnabledError").EB_NOT_ENABLED&&d("WATagsLogger").TAGS(["maw_message_core","EBMessageRangeDataSource",r]).ERROR(j(),e.error,r,q);return e}m==null?void 0:m.addQPLAnnotations({string:{eb_restore_status:"success"}});o=n({direction:g,fetchResult:e.value,range:a});m==null?void 0:m.markQPLPoint("wait_eb_fetch_end");return d("WAResultOrError").makeResult({raw:e.value,recovered:o})});return m.apply(this,arguments)}function n(a){var b=a.direction,e=a.fetchResult,f=a.range;a=b==="asc"?e.messages.filter(function(a){return a.sortOrderMs!=null&&(i||(i=d("I64"))).ge((i||(i=d("I64"))).of_float(a.sortOrderMs),f.maxTimestampMs)}):e.messages.filter(function(a){return a.sortOrderMs!=null&&(i||(i=d("I64"))).le((i||(i=d("I64"))).of_float(a.sortOrderMs),f.minTimestampMs)});var g=babelHelpers["extends"]({},e,{messages:a});a.length!==e.messages.length&&c("recoverableViolation")("EBMessageRangeDataSource: EB fetch API returned invalid messages outside requested timerange","messenger_web_product");a.length===0&&(b==="asc"&&e.hasMoreAfter&&(g.hasMoreAfter=!1,c("recoverableViolation")("EBMessageRangeDataSource: Unexpected null messages after","messenger_web_product")),b==="desc"&&e.hasMoreBefore&&(g.hasMoreBefore=!1,c("recoverableViolation")("EBMessageRangeDataSource: Unexpected null messages before","messenger_web_product")));return g}g["default"]=a}),98);
__d("MessageRangeSet",["I64","ReplayLastSubject","err"],(function(a,b,c,d,e,f,g){"use strict";var h,i=function(b){babelHelpers.inheritsLoose(a,b);function a(a){var c;c=b.call(this,a)||this;c.value=a;return c}var c=a.prototype;c.next=function(a){this.value=a,b.prototype.next.call(this,a)};return a}(d("ReplayLastSubject").ReplayLastSubject),j=function(b){babelHelpers.inheritsLoose(a,b);function a(a){var c;c=b.call(this,a)||this;for(var d=arguments.length,e=new Array(d>1?d-1:0),f=1;f<d;f++)e[f-1]=arguments[f];e.forEach(function(a){c.subscribe({complete:function(){return a.complete()},error:function(b){return a.error(b)},next:function(b){return a.next(b)}})});c.next(a);return c}return a}(i);a=function(){function a(){this.$1=new Set()}var b=a.prototype;b.$2=function(a){for(var b=this.$1,c=Array.isArray(b),e=0,b=c?b:b[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var f;if(c){if(e>=b.length)break;f=b[e++]}else{e=b.next();if(e.done)break;f=e.value}f=f;var g=f.value;if((h||(h=d("I64"))).le(g.minTimestampMs,a)&&((h||(h=d("I64"))).ge(g.maxTimestampMs,a)||!g.hasMoreAfter))return f}return null};b.getRangeForTimestamp=function(a){return this.$2(a)};b.upsertRange=function(a){var b=Array.from(this.$1.values()).filter(function(b){return l(b.value,a)});if(b.length===0){var c=new i(a);this.$1.add(c);return c}c=k.apply(void 0,b.map(function(a){return a.value}).concat([a]));if(b.length===1){var d=b[0];d.next(c);return d}for(var d=b,e=Array.isArray(d),f=0,d=e?d:d[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var g;if(e){if(f>=d.length)break;g=d[f++]}else{f=d.next();if(f.done)break;g=f.value}g=g;this.$1["delete"](g)}g=babelHelpers.construct(j,[c].concat(b));this.$1.add(g);return g};return a}();function k(){for(var a=arguments.length,b=new Array(a),e=0;e<a;e++)b[e]=arguments[e];if(b.length===0)throw c("err")("Cannot merge 0 ranges");var f=b[0].threadKey,g=b[0].minTimestampMs,i=b[0].hasMoreAfter,j=b[0].hasMoreBefore,k=b[0].maxMessageId,l=b[0].minMessageId,m=b[0].maxTimestampMs;for(var n=1;n<b.length;n++){var o=b[n];(h||(h=d("I64"))).le(o.minTimestampMs,g)&&((h||(h=d("I64"))).equal(o.minTimestampMs,g)?j=j&&o.hasMoreBefore:j=o.hasMoreBefore,g=o.minTimestampMs,l=o.minMessageId);(h||(h=d("I64"))).ge(o.maxTimestampMs,m)&&((h||(h=d("I64"))).equal(o.maxTimestampMs,m)?i=i&&o.hasMoreAfter:i=o.hasMoreAfter,m=o.maxTimestampMs,k=o.maxMessageId)}return{hasMoreAfter:i,hasMoreBefore:j,isLoadingAfter:!1,isLoadingBefore:!1,maxMessageId:k,maxTimestampMs:m,minMessageId:l,minTimestampMs:g,threadKey:f}}function l(a,b){var c=(h||(h=d("I64"))).le(b.minTimestampMs,a.minTimestampMs),e=c?b:a;c=c?a:b;return m(e,c.minTimestampMs)?!0:!1}function m(a,b){return(h||(h=d("I64"))).ge(b,a.minTimestampMs)&&(h||(h=d("I64"))).le(b,a.maxTimestampMs)}g["default"]=a}),98);
__d("findMsgsWithMinAndMaxTimestamp",[],(function(a,b,c,d,e,f){"use strict";function a(a){a=a.filter(function(a){return a.sortOrderMs!=null});var b=null,c=null;for(var a=a,d=Array.isArray(a),e=0,a=d?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var f,g;if(d){if(e>=a.length)break;g=a[e++]}else{e=a.next();if(e.done)break;g=e.value}g=g;if(g.sortOrderMs==null)continue;(((f=b)==null?void 0:f.sortOrderMs)==null||b.sortOrderMs<g.sortOrderMs)&&(b=g);(((f=c)==null?void 0:f.sortOrderMs)==null||c.sortOrderMs>g.sortOrderMs)&&(c=g)}return[c,b]}f["default"]=a}),66);
__d("switchMap",["relay-runtime"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){return d("relay-runtime").Observable.create(function(c){var d,e=a.subscribe({complete:c.complete,error:c.error,next:function(a){var e;(e=d)==null?void 0:e.unsubscribe();d=b(a).subscribe(c)}});return function(){var a;(a=d)==null?void 0:a.unsubscribe();e.unsubscribe()}})}g["default"]=a}),98);
__d("EBMessageRangeDataSource",["EBDeanonRangeExtension","FBLogger","I64","LSDatabaseSingleton","LSEncryptedBackupsBackupTenancy","LSIntEnum","MAWEncryptedBackupUtils","MAWFetchMessagesForMLv2","MAWFetchMessagesFromEBForMLv2","MAWMessageIntegrityEBFetchStatus","MAWMessagesRangesUtils","MAWMiActOnActThreadReady","MAWPutMessagesToDB","MLV2DataSourceLogger","MessageRangeSet","Promise","ReQL","ReQLObservable","ReplayLastSubject","asyncToGeneratorRuntime","findMsgsWithMinAndMaxTimestamp","gkx","justknobx","nullthrows","recoverableViolation","relay-runtime","switchMap"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l=20;e=c("justknobx")._("3177");var m=Math.max(3,e-5),n=function(){function a(a){var e=this;this.$2=new(c("MessageRangeSet"))();this.getOrCreateMessageRangeCoveringCursor=function(a,b,c){c=e.$2.getRangeForTimestamp(a.timestampMs);b==null?void 0:b.annotateMessageRangesDataSource("EBMessageRangeDataSource");if(c!=null)return c;b=(k||(k=d("I64"))).equal(a.timestampMs,k.max_int);c={hasMoreAfter:!b,hasMoreBefore:!0,isLoadingAfter:!1,isLoadingBefore:!1,maxMessageId:(c=a.messageId)!=null?c:"",maxTimestampMs:a.timestampMs,minMessageId:(b=a.messageId)!=null?b:"",minTimestampMs:a.timestampMs,threadKey:e.$1};b=e.$2.upsertRange(c);return b};this.extendRange=function(a,f,g){var i=d("MLV2DataSourceLogger").getMLV2LoggerForThread(e.$1,f);a=e.$2.getRangeForTimestamp(a.minTimestampMs);if(a==null){c("recoverableViolation")("EBDataSource: Requested to extend a nonexisting range","maw_message_core");i==null?void 0:i.markQPLPoint("extend_range_invalid");return(h||(h=b("Promise"))).resolve()}var j=a.value;if(f==="asc"&&(!j.hasMoreAfter||j.isLoadingAfter)){i==null?void 0:i.markQPLPoint("extend_range_skipped");return(h||(h=b("Promise"))).resolve()}if(f==="desc"&&(!j.hasMoreBefore||j.isLoadingBefore)){i==null?void 0:i.markQPLPoint("extend_range_skipped");return(h||(h=b("Promise"))).resolve()}a.next(babelHelpers["extends"]({},j,{isLoadingAfter:j.isLoadingAfter||f==="asc",isLoadingBefore:j.isLoadingBefore||f==="desc"}));return e.$3(a.value,f,void 0,g)};this.$3=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,f,g){f===void 0&&(f=l);var h=!1,j=d("MLV2DataSourceLogger").getMLV2LoggerForThread(e.$1,b),k=(yield (i||(i=d("LSDatabaseSingleton"))).LSDatabaseSingleton);j==null?void 0:j.markQPLPoint("eb_wait_act_thread_start");var m=(yield d("MAWMiActOnActThreadReady").waitForACTThreadReady(k.tables,e.$1,"MAWMessageRangeDataSourceForThread"));m=m.chatJid;j==null?void 0:j.markQPLPoint("eb_wait_act_thread_end");var n=(yield d("EBDeanonRangeExtension").getRangeFromLocalDataIfConsistent({chatJid:m,db:k,direction:b,dispatch:g,includeOriginalMsg:h,logger:j,pageSize:f,range:a}));if(n!=null){j==null?void 0:j.addQPLAnnotations({string:{eb_restore_status:"skipped"}});j==null?void 0:j.markQPLPoint("maw_upsert_range_start");e.$2.upsertRange(babelHelpers["extends"]({},n,{threadKey:e.$1}));j==null?void 0:j.markQPLPoint("maw_upsert_range_end");return}j==null?void 0:j.addQPLAnnotations({string:{eb_restore_status:"pending"}});n=(yield c("MAWFetchMessagesFromEBForMLv2")({chatJid:m,db:k,direction:b,logger:j,pageSize:f,range:a}));if(n.success===!1){d("MAWMessageIntegrityEBFetchStatus").recordEBFailure(e.$1);e.$2.upsertRange(d("MAWMessagesRangesUtils").getRangeForFailure(e.$1));return}m=(yield d("MAWFetchMessagesForMLv2").fetchMessagesFromMAW({chatJid:m,direction:b,includeOriginalMsg:h,logger:j,pageSize:f,range:a}));j==null?void 0:j.markQPLPoint("insert_msgs_to_lsdb_start","begin inserting the messages into LSDB");yield d("MAWPutMessagesToDB").insertMessageResponseIntoDatabase(k,m,g,j==null?void 0:j.getInstanceKey());j==null?void 0:j.markQPLPoint("insert_msgs_to_lsdb_end");e.$4({direction:b,ebFetchResult:n.value,logger:j,mawFetchResult:m,range:a})});return function(b,c,d,e){return a.apply(this,arguments)}}();this.$1=a}var e=a.prototype;e.$4=function(a){var b=a.direction,e=a.ebFetchResult,f=a.logger,g=a.mawFetchResult,h=a.range;f==null?void 0:f.markQPLPoint("maw_upsert_range_start");var i=e.raw,j=e.recovered.messages;a=j.map(function(a){return a.sortOrderMs}).filter(Boolean);a=[Math.min.apply(Math,a),Math.max.apply(Math,a)];var l=a[0];a=a[1];var n=d("MAWMessagesRangesUtils").getTimestampForRange(h,b),o=b==="desc"?[(k||(k=d("I64"))).of_float(l),n]:[n,(k||(k=d("I64"))).of_float(a)];l=g.msgs.filter(function(a){return(k||(k=d("I64"))).ge((k||(k=d("I64"))).of_float(a.sortOrderMs),o[0])&&(k||(k=d("I64"))).le((k||(k=d("I64"))).of_float(a.sortOrderMs),o[1])});var p,q;if(l.length===0){n=c("gkx")("842")||c("gkx")("4767");if(!n){c("recoverableViolation")("EBMessageRangeDataSource: No local messages found within EB response range","messenger_web_product");f==null?void 0:f.markQPLPoint("eb_fetch_has_no_local_msg_overlap");this.$2.upsertRange(d("MAWMessagesRangesUtils").getRangeForFailure(this.$1));return}c("FBLogger")("messenger_web_product").mustfix("EBMessageRangeDataSource: No local messages found within EB response range for protobuf. Filtered EB payload size: %s, original EB payload size: %s, original EB hasMoreBefore: %s, original EB hasMoreAfter: %s",j.length,i.messages.length,i.hasMoreBefore,i.hasMoreAfter);j.sort(function(a,b){return((a=a.sortOrderMs)!=null?a:0)-((a=b.sortOrderMs)!=null?a:0)});p=j.length>0?j[0]:void 0;q=j.length>0?j[j.length-1]:void 0}else{a=c("findMsgsWithMinAndMaxTimestamp")(l);p=a[0];q=a[1]}g=babelHelpers["extends"]({},h,function(){switch(b){case"asc":var a,f;a=(a=(a=q)==null?void 0:a.msgId)!=null?a:h.maxMessageId;f=(k||(k=d("I64"))).max(h.maxTimestampMs,((f=q)==null?void 0:f.sortOrderMs)!=null?(k||(k=d("I64"))).of_float((f=q)==null?void 0:f.sortOrderMs):h.maxTimestampMs);if(i.hasMoreAfter===!0){var g=!1;(k||(k=d("I64"))).equal(h.maxTimestampMs,f)&&h.maxMessageId===a?(c("FBLogger")("messenger_web_product").mustfix("EBMessageRangeDataSource: stuck in the same max timestamp: %s",(k||(k=d("I64"))).to_string(f)),c("gkx")("5340")&&(g=!0,f=(k||(k=d("I64"))).add(f,k.of_int32(1)))):j.length<m&&c("gkx")("5340")&&(g=!0);g&&(f=(k||(k=d("I64"))).equal(f,(k||(k=d("I64"))).max_int)?f:(k||(k=d("I64"))).add(f,(k||(k=d("I64"))).of_int32(1)))}return{hasMoreAfter:e.recovered.hasMoreAfter,isLoadingAfter:!1,maxMessageId:a,maxTimestampMs:f};case"desc":f=(a=(g=p)==null?void 0:g.msgId)!=null?a:h.minMessageId;g=(k||(k=d("I64"))).min(h.minTimestampMs,((g=p)==null?void 0:g.sortOrderMs)!=null?(k||(k=d("I64"))).of_float((a=p)==null?void 0:a.sortOrderMs):h.minTimestampMs);if(i.hasMoreBefore===!0){a=!1;(k||(k=d("I64"))).equal(h.minTimestampMs,g)&&h.minMessageId===f?(c("FBLogger")("messenger_web_product").mustfix("EBMessageRangeDataSource: stuck in the same min timestamp: %s",(k||(k=d("I64"))).to_string(g)),c("gkx")("5340")&&(a=!0)):j.length<m&&c("gkx")("5340")&&(a=!0);a&&(g=(k||(k=d("I64"))).equal(g,(k||(k=d("I64"))).min_int)?g:(k||(k=d("I64"))).sub(g,(k||(k=d("I64"))).of_int32(1)))}return{hasMoreBefore:e.recovered.hasMoreBefore,isLoadingBefore:!1,minMessageId:f,minTimestampMs:g}}}());this.$2.upsertRange(g);f==null?void 0:f.markQPLPoint("maw_upsert_range_end")};return a}(),o=function(){function a(a){var e=this;this.$1=new Map();this.$3=!1;this.getOrCreateMessageRangeCoveringCursor=function(a,b,f){var g=a.threadKey;return c("switchMap")(e.$2,function(c){return!c?d("relay-runtime").Observable.from(new(d("ReplayLastSubject").ReplayLastSubject)({hasMoreAfter:!1,hasMoreBefore:!1,isLoadingAfter:!1,isLoadingBefore:!1,maxMessageId:"",maxTimestampMs:(k||(k=d("I64"))).max_int,minMessageId:"",minTimestampMs:k.min_int,threadKey:g})):d("relay-runtime").Observable.from(e.$4(g).getOrCreateMessageRangeCoveringCursor(a,b,f))})};this.extendRange=function(a,c,f){var g=a.threadKey,i=d("MLV2DataSourceLogger").getMLV2LoggerForThread(g,c);if(!e.$3){i==null?void 0:i.markQPLPoint("eb_extend_range_skipped_due_to_disabled");return(h||(h=b("Promise"))).resolve()}return e.$4(g).extendRange(a,c,f)};this.$2=d("ReQLObservable").create(a,function(){return d("ReQL").fromTableAscending(a.tables.secure_encrypted_backups_client_state).take(1).map(function(a){var b=d("MAWEncryptedBackupUtils").getBackupTenancyFromClientStateRow(a);b!=null&&a.backupTenancy==null&&c("FBLogger")("messenger_web_product").warn("Previously broken state of invalid backup tenancy is caught");return b!=null&&(k||(k=d("I64"))).equal(b,(j||(j=d("LSIntEnum"))).ofNumber(c("LSEncryptedBackupsBackupTenancy").PRODUCTION))})}).map(function(a){return Boolean(a==null?void 0:(a=a[0])==null?void 0:a[1])})["do"]({next:function(a){e.$3=a}})}var e=a.prototype;e.$4=function(a){var b=(k||(k=d("I64"))).to_string(a);if(!this.$1.has(b)){a=new n(a);this.$1.set(b,a)}return c("nullthrows")(this.$1.get(b))};return a}(),p,q;function a(a){(p==null||q!==a)&&(q=a,p=new o(a));return p}g["default"]=a}),98);
__d("GroupsCometChatEditChatDialogQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="6517941274957526"}),null);
__d("GroupsCometChatEditChatDialogQuery$Parameters",["GroupsCometChatEditChatDialogQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a={kind:"PreloadableConcreteRequest",params:{id:b("GroupsCometChatEditChatDialogQuery_facebookRelayOperation"),metadata:{},name:"GroupsCometChatEditChatDialogQuery",operationKind:"query",text:null}};e.exports=a}),null);
__d("GroupsCometChatEditChatDialog.entrypoint",["GroupsCometChatEditChatDialogQuery$Parameters","JSResourceForInteraction"],(function(a,b,c,d,e,f,g){"use strict";a={getPreloadProps:function(a){a=a.threadID;return{queries:{queryReference:{options:{fetchPolicy:"network-only"},parameters:c("GroupsCometChatEditChatDialogQuery$Parameters"),variables:{threadID:a}}}}},root:c("JSResourceForInteraction")("GroupsCometChatEditChatDialog.react").__setRef("GroupsCometChatEditChatDialog.entrypoint")};g["default"]=a}),98);
__d("useIXTProactiveWarningFlowTriggerDialog",["cr:2998","cr:3116"],(function(a,b,c,d,e,f,g){"use strict";function a(a,c){return b("cr:3116")(b("cr:2998"),a,void 0,void 0,{baseModalProps:c})}g["default"]=a}),98);
__d("IXTProactiveWarningFollowUpActionsCell.react",["FDSButton.react","react","useIXTProactiveWarningFlowTriggerDialog"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||(h=d("react"))).c,j=h;function a(a){var b=i(12),d=a.context,e=a.label,f=a.onClose,g=a.onPress,h=a.setPWDismissTime;b[0]!==d?(a={proactive_warning_request_context:d,trigger_event_type:"OPEN_PROACTIVE_WARNING_FLOW"},b[0]=d,b[1]=a):a=b[1];d=c("useIXTProactiveWarningFlowTriggerDialog")(a);var k=d[0];b[2]!==f?(a=function(){f()},b[2]=f,b[3]=a):a=b[3];var l=a;b[4]!==h||b[5]!==g||b[6]!==k||b[7]!==l?(d=function(){h(),g(),k({flowCallbacks:{onClose:l}})},b[4]=h,b[5]=g,b[6]=k,b[7]=l,b[8]=d):d=b[8];b[9]!==e||b[10]!==d?(a=j.jsx(c("FDSButton.react"),{label:e,onPress:d,reduceEmphasis:!1,type:"secondary"}),b[9]=e,b[10]=d,b[11]=a):a=b[11];return a}g["default"]=a}),98);
__d("LSClearReactionsV2DetailsAndRange",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(a){return b.sequence([function(a){return b.forEach(b.db.table(239).fetch(),function(a){return a["delete"]()})},function(a){return b.forEach(b.db.table(243).fetch(),function(a){return a["delete"]()})}])},function(a){return b.resolve(c)}])}a.__sproc_name__="LSMailboxClearReactionsV2DetailsAndRangeStoredProcedure";e.exports=a}),null);
__d("LSClearReactionsV2DetailsAndRangeStoredProcedure",["LSClearReactionsV2DetailsAndRange","cr:8709"],(function(a,b,c,d,e,f,g){function a(a){return c("LSClearReactionsV2DetailsAndRange")(a)}g["default"]=a}),98);
__d("LSCommunityPublicGroupParticipationApprovalStatus",[],(function(a,b,c,d,e,f){a=Object.freeze({CAN_PARTICIPATE:1,PARTICIPATION_REQUEST_REQUIRED:2,PARTICIPATION_REQUEST_PENDING:3});f["default"]=a}),66);
__d("LSContactCapabilityBitOffset",[],(function(a,b,c,d,e,f){a=Object.freeze({MESSAGE:0,REPLY_MESSAGE:1,JOIN_GROUP:2,BLOCK:3,SEE:4,SEE_FACEBOOK_PROFILE:5,PAYMENT:6,CAMERA:7,MEDIA_PICKER:8,STICKER:9,GIF:10,AUDIO_CLIPS:11,SHARED_MEDIA:12,REACTIONS:13,SEEN_HEADS:14,THREAD_DETAILS:15,RTC_VIDEO_CALL:16,RTC_VOICE_CALL:17,THREAD_FEEDBACK_AND_REPORT:18,GO_TO_SECRET_CONVERSATION:19,MAKE_ADMIN:20,REMOVE_FROM_GROUP:21,REMOVE_AS_ADMIN:22,VERIFIED:23,DISAPPEARING_MODE:24,SEE_MESSAGE:25,PSEUDO_BLOCK:26,PUSHABLE:27,MESSAGE_BLOCK_PLACED:28,FACEBOOK_BLOCK_PLACED:29,VIEWER_IS_UNCONNECTED:64,PAGE_PLATFORM_BOT:65,RESTRICT_PLACED:66,IS_XAC_ELIGIBLE:67,IS_GROUPS_XAC_ELIGIBLE:68,IS_GROUPS_XAC_CALLING_ELIGIBLE:69,IS_E2EE_ONLY:70,IS_ELIGIBLE_FOR_SAFETY_NOTICE:71,NOVI:72,IS_CONTACT_SHAREABLE:73,IS_HIDDEN:74,IS_THREAD_CUTOVER_USER:75,HAS_CUTOVER_THREAD:76,IS_COMMUNITY_BOT_PAGE:77,IS_NOT_SEARCHABLE:78,CAN_UPSELL_VOICEMAIL:79,DEFAULT_E2EE_THREADS:80,INCALL_CAPTIONS:81,IS_INTERNAL:82,DEFAULT_E2EE_THREAD_ONE_TO_ONE:83,IS_GROUP_UPDATES_BOT:84,LINK_TO_IG_PROFILE:85,IS_MARKETPLACE_NOT_CONSENTED:86,IS_GAMING_NOT_CONSENTED:87,DISABLE_MP_DMA_THREAD_COMPOSER:88,IS_GAMING_CONSENT_UNDECIDED:89,IS_GAMING_CONSENTED:90,IS_MSPLIT_NOT_CONSENTED:91,IS_MSPLIT_CONSENT_UNDECIDED:92,WORK_CHAT_GOVERNANCE_BLOCKED:93,HAS_P2P_DISAPPEARING_MESSAGES_THREAD:94,HAS_INSTAMADILLO_CUTOVER_THREAD:95,HAS_TTLC_CLIP_ENABLED:96,HAS_TTLC_GENERIC_XMA_SHARE_ENABLED:97,HAS_TTLC_MEDIA_SHARE_ENABLED:98,HAS_TTLC_STORY_SHARE_ENABLED:99,ELIGIBLE_FOR_META_VERIFIED_LABEL:100,HAS_JENGA_WORKCHAT_DEFLECTION_ENABLED:101,RESTRICT_CREATING_GROUP_THREAD:102,IS_USER_GENERATED_CHARACTER_BOT:103,IS_FRIENDING_RESTRICTED:104});f["default"]=a}),66);
__d("LS_Contact",[],(function(a,b,c,d,e,f){function a(a){return a.context}function b(a){return a.value}function c(a){return a.value.phoneNumber}function d(a){return a.value.normalizedNameForSearch}function e(a){return a.value.profilePictureFallbackUrl}function g(a){return a.value.profilePictureUrlExpirationTimestampMs}function h(a){return a.value.profilePictureLargeUrl}function i(a){return a.value.profilePictureLargeFallbackUrl}function j(a){return a.value.profilePictureLargeUrlExpirationTimestampMs}function k(a){return a.value.contactReachabilityStatusType}function l(a){return a.value.capabilities2}function m(a){return a.value.id}function n(a){return a.value.profilePictureUrl}function o(a){return a.value.name}function p(a){return a.value.normalizedSearchTerms}function q(a){return a.value.isMessengerUser}function r(a){return a.value.isMemorialized}function s(a){return a.value.isManagedByViewer}function t(a){return a.value.blockedByViewerStatus}function u(a){return a.value.optimisticBlockedByViewerStatus}function v(a){return a.value.optimisticBlockedByViewerStatusTimestampMs}function w(a){return a.value.pendingMnUserBlockAction}function x(a){return a.value.pendingMnUserBlockActionTimestampMs}function y(a){return a.value.pendingFbUserBlockAction}function z(a){return a.value.pendingFbUserBlockActionTimestampMs}function A(a){return a.value.rank}function B(a){return a.value.firstName}function C(a){return a.value.contactType}function D(a){return a.value.pendingMessengerRestrictAction}function E(a){return a.value.contactTypeExact}function F(a){return a.value.messengerCallLogThirdPartyId}function G(a){return a.value.profileRingColor}function H(a){return a.value.requiresMultiway}function I(a){return a.value.blockedSinceTimestampMs}function J(a){return a.value.fbUnblockedSinceTimestampMs}function K(a){return a.value.canViewerMessage}function L(a){return a.value.emailAddress}function M(a){return a.value.profileRingColorExpirationTimestampMs}function N(a){return a.value.workCompanyId}function O(a){return a.value.workCompanyName}function P(a){return a.value.workJobTitle}function Q(a){return a.value.profileRingState}function R(a){return a.value.deviceContactId}function S(a){return a.value.workForeignEntityType}function T(a){return a.value.capabilities}function U(a){return a.value.contactViewerRelationship}function V(a){return a.value.gender}function W(a){return a.value.secondaryName}function X(a){return a.value.username}function Y(a){return a.value.restrictionType}function Z(a){return a.value.waConnectStatus}function $(a){return a.value.isEmployee}function aa(a){return a.value.pageType}function ba(a){return a.value.authorityLevel}f.__context=a;f.__lightspeed_table_row=b;f.phone_number=c;f.normalized_name_for_search=d;f.profile_picture_fallback_url=e;f.profile_picture_url_expiration_timestamp_ms=g;f.profile_picture_large_url=h;f.profile_picture_large_fallback_url=i;f.profile_picture_large_url_expiration_timestamp_ms=j;f.contact_reachability_status_type=k;f.capabilities_2=l;f.id_=m;f.profile_picture_url=n;f.name=o;f.normalized_search_terms=p;f.is_messenger_user=q;f.is_memorialized=r;f.is_managed_by_viewer=s;f.blocked_by_viewer_status=t;f.optimistic_blocked_by_viewer_status=u;f.optimistic_blocked_by_viewer_status_timestamp_ms=v;f.pending_mn_user_block_action=w;f.pending_mn_user_block_action_timestamp_ms=x;f.pending_fb_user_block_action=y;f.pending_fb_user_block_action_timestamp_ms=z;f.rank=A;f.first_name=B;f.contact_type=C;f.pending_messenger_restrict_action=D;f.contact_type_exact=E;f.messenger_call_log_third_party_id=F;f.profile_ring_color=G;f.requires_multiway=H;f.blocked_since_timestamp_ms=I;f.fb_unblocked_since_timestamp_ms=J;f.can_viewer_message=K;f.email_address=L;f.profile_ring_color_expiration_timestamp_ms=M;f.work_company_id=N;f.work_company_name=O;f.work_job_title=P;f.profile_ring_state=Q;f.device_contact_id=R;f.work_foreign_entity_type=S;f.capabilities=T;f.contact_viewer_relationship=U;f.gender=V;f.secondary_name=W;f.username=X;f.restriction_type=Y;f.wa_connect_status=Z;f.is_employee=$;f.page_type=aa;f.authority_level=ba}),66);
__d("LSContactHasCapability__has_capability$normalization.graphql",["LS_Contact","LS_Contact"],(function(a,b,c,d,e,f){"use strict";a={kind:"SplitOperation",metadata:{},name:"LSContactHasCapability__has_capability$normalization",selections:[{kind:"ClientExtension",selections:[{name:"capabilities",args:null,kind:"RelayResolver",storageKey:null,isOutputType:!0,resolverInfo:{resolverFunction:b("LS_Contact").capabilities,rootFragment:null}},{name:"capabilities_2",args:null,kind:"RelayResolver",storageKey:null,isOutputType:!0,resolverInfo:{resolverFunction:b("LS_Contact").capabilities_2,rootFragment:null}}]}]};e.exports=a}),null);
__d("LSContactHasCapability__has_capability.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"LSContactHasCapability__has_capability",selections:[{alias:null,args:null,kind:"ScalarField",name:"capabilities",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"capabilities_2",storageKey:null}],type:"LS_Contact",abstractKey:null};e.exports=a}),null);
__d("LSEditMessage",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.db.table(12).fetch([[[a[0]]],"messageId"]).next().then(function(c,d){var e=c.done;c=c.value;return e?0:(d=c.item,(b.i64.eq(a[1],b.i64.cast([0,20]))||b.i64.le(d.authorityLevel,a[1]))&&b.i64.le(a[3],b.i64.cast([0,5]))?b.forEach(b.filter(b.db.table(12).fetch([[[d.threadKey,d.timestampMs,a[0]]]]),function(c){return b.i64.eq(c.threadKey,d.threadKey)&&b.i64.eq(b.i64.cast([0,0]),b.i64.cast([0,0]))&&b.i64.eq(c.timestampMs,d.timestampMs)&&c.messageId===a[0]}),function(c){var d=c.update;c.item;return d({authorityLevel:a[1],editCount:a[3],text:a[2],sendStatus:b.i64.eq(a[1],b.i64.cast([0,20]))?b.i64.cast([0,1]):b.i64.cast([0,2]),sendStatusV2:b.i64.eq(a[1],b.i64.cast([0,20]))?b.i64.cast([0,1]):b.i64.cast([0,2])})}):b.resolve())})},function(a){return b.resolve(c)}])}a.__sproc_name__="LSMailboxEditMessageStoredProcedure";e.exports=a}),null);
__d("LSFetchAdditionalThreadData",["LSIssueNewTask"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return d[0]=new c.Map(),d[0].set("thread_key",a[0]),d[1]=d[0].get("thread_key"),d[0],d[2]=c.toJSON(d[0]),c.storedProcedure(b("LSIssueNewTask"),["fetch_additional_thread_data","_",c.i64.to_string(d[1])].join(""),c.i64.cast([0,733]),d[2],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))},function(a){return c.resolve(e)}])}a.__sproc_name__="LSMailboxFetchAdditionalThreadDataStoredProcedure";e.exports=a}),null);
__d("LSFetchAdditionalThreadDataStoredProcedure",["LSFetchAdditionalThreadData","cr:8709"],(function(a,b,c,d,e,f,g){function a(a,b){return c("LSFetchAdditionalThreadData")(b.threadKey,a)}g["default"]=a}),98);
__d("LSFetchProactiveWarningsIfNeeded",["LSIssueNewTask"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(b){return c.db.table(9).fetch([[[a[0]]]]).next().then(function(a,b){var e=a.done;a=a.value;return e?d[0]=c.i64.cast([0,1]):(b=a.item,d[5]=b.syncGroup,c.i64.neq(d[5],void 0)?d[4]=d[5]:d[4]=c.i64.cast([0,1]),d[0]=d[4])})},function(e){return c.db.table(183).fetch([[[a[0]]]]).next().then(function(e,f){var g=e.done;e=e.value;return g?c.sequence([function(b){return c.db.table(183).put({threadKey:a[0],suspectId:a[0]})},function(e){return d[4]=new c.Map(),d[4].set("thread_key",a[0]),d[4].set("sync_group",d[0]),d[5]=c.toJSON(d[4]),c.storedProcedure(b("LSIssueNewTask"),"proactive_warnings_fetch_queue",c.i64.cast([0,192]),d[5],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))},function(a){return d[2]=c.i64.cast([0,1])}]):(f=e.item,c.sequence([function(e){return d[5]=f.nextCheckTimestampMs,d[4]=c.i64.of_float(Date.now()),c.i64.neq(d[5],void 0)&&c.i64.ge(d[4],d[5])?c.sequence([function(b){return c.db.table(183).put({threadKey:a[0],suspectId:a[0]})},function(e){return d[7]=new c.Map(),d[7].set("thread_key",a[0]),d[7].set("sync_group",d[0]),d[8]=c.toJSON(d[7]),c.storedProcedure(b("LSIssueNewTask"),"proactive_warnings_fetch_queue",c.i64.cast([0,192]),d[8],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))},function(a){return d[6]=c.i64.cast([0,1])}]):c.resolve((c.i64.neq(d[5],void 0)&&f.tag!==void 0?d[7]=c.i64.cast([0,2]):d[7]=c.i64.cast([0,3]),d[6]=d[7]))},function(a){return d[2]=d[6]}]))})}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSProactiveWarningsFetchProactiveWarningsIfNeededStoredProcedure";e.exports=a}),null);
__d("LSFetchProactiveWarningsIfNeededStoredProcedure",["LSFetchProactiveWarningsIfNeeded","cr:8709"],(function(a,b,c,d,e,f,g){function a(a,b){return c("LSFetchProactiveWarningsIfNeeded")(b.threadKey,a)}g["default"]=a}),98);
__d("LSGroupPollEventType",[],(function(a,b,c,d,e,f){a=Object.freeze({QUESTION_CREATION:1,ADD_OPTION:2,ADD_UNVOTED_OPTION:3,UPDATE_VOTE:4,MULTIPLE_UPDATES:5,QUESTION_CLOSED:6,QUESTION_BUMPED:7,QUESTION_DELETION_SUCCESS:8,QUESTION_DELETION_FAILURE:9});f["default"]=a}),66);
__d("LSIssuePointQueryForRollCallConversion",["LSIssueNewTask"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return d[0]=new c.Map(),d[0].set("roll_call_id",a[1]),d[0].set("thread_key",a[0]),d[0].set("query_purpose",c.i64.cast([0,2])),d[1]=c.toJSON(d[0]),c.storedProcedure(b("LSIssueNewTask"),"roll_call_point_query",c.i64.cast([0,611]),d[1],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))},function(a){return c.resolve(e)}])}a.__sproc_name__="LSMailboxIssuePointQueryForRollCallConversionStoredProcedure";e.exports=a}),null);
__d("LSIssuePointQueryForRollCallConversionStoredProcedure",["LSIssuePointQueryForRollCallConversion","cr:8709"],(function(a,b,c,d,e,f,g){function a(a,b){return c("LSIssuePointQueryForRollCallConversion")(b.threadKey,b.rollCallId,a)}g["default"]=a}),98);
__d("LSIssuePollCreationForThreadTask",["LSGetViewerFBID","LSIssueNewTaskWithExtraOperations"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(b){return c.db.table(9).fetch([[[a[1]]]]).next().then(function(a,b){var e=a.done;a=a.value;return e?d[0]=c.i64.cast([0,1]):(b=a.item,d[8]=b.syncGroup,c.i64.neq(d[8],void 0)?d[7]=d[8]:d[7]=c.i64.cast([0,1]),d[0]=d[7])})},function(e){return d[2]=new c.Map(),d[2].set("question_text",a[0]),d[2].set("thread_key",a[1]),d[2].set("options",a[2]),d[2].set("sync_group",d[0]),c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[3]=a[0],a})},function(b){return c.db.table(9).fetch([[[a[1]]]]).next().then(function(a,b){var e=a.done;a=a.value;return e?d[4]=!1:(b=a.item,c.sequence([function(a){return c.filter(c.db.table(14).fetch([[[b.threadKey,d[3]]]]),function(a){return c.i64.eq(a.threadKey,b.threadKey)&&c.i64.eq(c.i64.cast([0,0]),b.mailboxType)&&c.i64.eq(a.contactId,d[3])}).next().then(function(e,f){var a=e.done;e=e.value;return a?d[7]=!1:(f=e.item,c.i64.eq(b.threadType,c.i64.cast([0,152]))?(d[10]=f.threadRoles,c.i64.lt(c.i64.cast([0,7]),c.i64.cast([0,0]))||c.i64.gt(c.i64.cast([0,7]),c.i64.cast([0,7]))?d[11]=!1:d[11]=!c.i64.eq(c.i64.and_(c.i64.lsl_(c.i64.cast([0,1]),c.i64.to_int32(c.i64.cast([0,7]))),d[10]),c.i64.cast([0,0])),d[12]=b.capabilities,d[13]=b.capabilities2,d[14]=b.capabilities3,d[15]=b.capabilities4,d[17]=c.i64.div(c.i64.cast([0,223]),c.i64.cast([0,64])),d[18]=c.i64.lsl_(c.i64.cast([0,1]),c.i64.to_int32(c.i64.sub(c.i64.cast([0,223]),c.i64.mul(d[17],c.i64.cast([0,64]))))),c.i64.lt(c.i64.cast([0,223]),c.i64.cast([0,0]))||c.i64.gt(c.i64.cast([0,223]),c.i64.cast([0,253]))?d[16]=!1:(c.i64.eq(d[17],c.i64.cast([0,0]))?d[19]=!c.i64.eq(c.i64.and_(d[18],d[12]),c.i64.cast([0,0])):(c.i64.eq(d[17],c.i64.cast([0,1]))?d[20]=!c.i64.eq(c.i64.and_(d[18],d[13]),c.i64.cast([0,0])):(c.i64.eq(d[17],c.i64.cast([0,2]))?d[21]=!c.i64.eq(c.i64.and_(d[18],d[14]),c.i64.cast([0,0])):(c.i64.eq(d[17],c.i64.cast([0,3]))?d[22]=!c.i64.eq(c.i64.and_(d[18],d[15]),c.i64.cast([0,0])):d[22]=!1,d[21]=d[22]),d[20]=d[21]),d[19]=d[20]),d[16]=d[19]),d[11]===d[16]?0:(function(a){c.logger(a).mustfix(a)}("LS::assert is failed. Thread role and thread capability don't agree for Broadcast Channels message-as-page functionality; aborting"),c["throw"]("LS::assert is failed. Thread role and thread capability don't agree for Broadcast Channels message-as-page functionality; aborting")),d[9]=d[11]):d[9]=!1,d[7]=d[9])})},function(a){return d[4]=d[7]}]))})},function(a){return d[4]?d[2].set("perform_action_as_page",!0):0,d[6]=c.toJSON(d[2]),c.storedProcedure(b("LSIssueNewTaskWithExtraOperations"),"poll_creation",c.i64.cast([0,163]),d[6],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),void 0,c.i64.cast([0,0]))}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSMailboxIssuePollCreationForThreadTaskStoredProcedure";e.exports=a}),null);
__d("LSIssuePollCreationForThreadTaskStoredProcedure",["LSIssuePollCreationForThreadTask","cr:8709"],(function(a,b,c,d,e,f,g){function a(a,b){return c("LSIssuePollCreationForThreadTask")(b.questionText,b.threadKey,b.options,a)}g["default"]=a}),98);
__d("LSNullstateCTAType",[],(function(a,b,c,d,e,f){a=Object.freeze({NONE:0,GET_STARTED:1,ICEBREAKER:2,PRIVACY_DISCLOSURE:3,MP_EMPTY_ICEBREAKER:4});f["default"]=a}),66);
__d("LSOptimisticEditMessage",["LSEditMessage","LSIssueNewTaskAndGetTaskID"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.db.table(12).fetch([[[a[0]]],"messageId"]).next().then(function(e,f){var g=e.done;e=e.value;return g?0:(f=e.item,d[2]=f.editCount,d[1]=c.i64.of_float(Date.now()),c.i64.lt(d[2]==null?c.i64.cast([0,0]):d[2],c.i64.cast([0,5]))&&c.i64.le(d[1],c.i64.add(f.timestampMs,c.i64.cast([0,9e5])))?c.sequence([function(e){return c.storedProcedure(b("LSEditMessage"),f.messageId,c.i64.cast([0,20]),a[1],c.i64.add(d[2]==null?c.i64.cast([0,0]):d[2],c.i64.cast([0,1])))},function(e){return d[3]=new c.Map(),d[3].set("message_id",a[0]),d[3].set("text",a[1]),c.i64.gt(c.i64.cast([0,0]),c.i64.cast([0,0]))?(d[7]=c.i64.of_float(Date.now()),d[4]=c.i64.add(d[7],c.i64.cast([0,0]))):d[4]=c.i64.cast([0,0]),d[5]=c.toJSON(d[3]),c.storedProcedure(b("LSIssueNewTaskAndGetTaskID"),"edit_message",c.i64.cast([0,742]),d[5],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,d[4],c.i64.cast([0,0])).then(function(a){return a=a,d[6]=a[0],a})},function(a){return void 0!==void 0?(d[7]=c.i64.of_float(Date.now()),c.forEach(c.db.table(2).fetch([[[d[6]]]]),function(a){var b=a.update;a.item;return b({dataTraceId:void 0,initTraceTimestampMs:d[7]})})):c.resolve()}]):c.resolve(void 0!==void 0?0:0))})},function(a){return c.resolve(e)}])}a.__sproc_name__="LSMailboxOptimisticEditMessageStoredProcedure";e.exports=a}),null);
__d("LSOptimisticEditMessageStoredProcedure",["LSOptimisticEditMessage","cr:8709"],(function(a,b,c,d,e,f,g){function a(a,b){return c("LSOptimisticEditMessage")(b.messageId,b.text,a)}g["default"]=a}),98);
__d("getOrRequestMWChatPresenceStatusForContactId",["requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h=c("requireDeferred")("MessengerMQTTPresence").__setRef("getOrRequestMWChatPresenceStatusForContactId");function a(a,b){var c=a.getStatus(b);a=a.getChatVisibility();if(c!=null||!a)return c;h.onReady(function(a){return a.sendAdditionalBuddyRequest(b)})}g["default"]=a}),98);
__d("useMWChatHasActiveContact",["I64","PresenceStatusContext","getOrRequestMWChatPresenceStatusForContactId","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i;b=h||d("react");b.useCallback;var j=b.useContext,k=b.useEffect,l=b.useState,m=b.c;function a(a){var b=m(10),e=j(c("PresenceStatusContext")),f;b[0]!==e?(f=function(a){return a.map((i||(i=d("I64"))).to_string).some(function(a){a=c("getOrRequestMWChatPresenceStatusForContactId")(e,a);return(a==null?void 0:a.status)===2})},b[0]=e,b[1]=f):f=b[1];var g=f;b[2]!==g||b[3]!==a?(f=g(a),b[2]=g,b[3]=a,b[4]=f):f=b[4];f=l(f);var h=f[0],n=f[1],o;b[5]!==e||b[6]!==g||b[7]!==a?(f=function(){return e.addListener(function(){return n(g(a))})},o=[a,g,e],b[5]=e,b[6]=g,b[7]=a,b[8]=f,b[9]=o):(f=b[8],o=b[9]);k(f,o);return h}g.useMWChatHasActiveContact=a}),98);
__d("useMWChatPresenceStatus",["I64","PresenceStatusContext","getOrRequestMWChatPresenceStatusForContactId","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i;b=h||d("react");var j=b.useContext,k=b.useEffect,l=b.useState,m=b.c;function a(a){var b=m(9),e=j(c("PresenceStatusContext")),f,g,h;b[0]!==a||b[1]!==e?(h=(i||(i=d("I64"))).to_string(a),f=l,g=c("getOrRequestMWChatPresenceStatusForContactId")(e,h),b[0]=a,b[1]=e,b[2]=f,b[3]=g,b[4]=h):(f=b[2],g=b[3],h=b[4]);a=f(g);f=a[0];var n=a[1];b[5]!==e||b[6]!==h?(g=function(){return e.addListener(function(){return n(function(){return c("getOrRequestMWChatPresenceStatusForContactId")(e,h)})})},a=[e,h],b[5]=e,b[6]=h,b[7]=g,b[8]=a):(g=b[7],a=b[8]);k(g,a);return f}g["default"]=a}),98);
__d("LSPresenceStatusText.react",["fbt","FDSRelativeTimestamp.react","I64","LSContactTypeExact","LSIntEnum","MessengerMSplitFlag","isArmadillo","react","useMWChatHasActiveContact","useMWChatPresenceStatus","useServerTime"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l=(i||(i=d("react"))).c,m=i,n=h._("__JHASH__KJ9BpmLEozf__JHASH__"),o=function(){return null},p=function(a){return a};function q(a){var b=l(10),e=a.contactId,f=a.contactTypeExact,g=a.renderNullState;a=a.renderWrapper;e=c("useMWChatPresenceStatus")(e);var i=c("useServerTime")();f=f!=null&&(j||(j=d("I64"))).equal(f,(k||(k=d("LSIntEnum"))).ofNumber(c("LSContactTypeExact").MESSENGER_ONLY_NOT_ALLOWED_ON_FB));if(c("MessengerMSplitFlag").is_msplit_account||f){b[0]!==g?(f=g(),b[0]=g,b[1]=f):f=b[1];return f}f=(e==null?void 0:e.status)===2;e=(e==null?void 0:e.last_active_time)!=null&&e.last_active_time!==0?e.last_active_time*1e3:void 0;if(f){b[2]!==a?(f=a(n),b[2]=a,b[3]=f):f=b[3];return f}if(e!=null){b[4]!==e||b[5]!==i||b[6]!==a?(f=a(h._("__JHASH___H_8HkZmS8j__JHASH__",[h._param("time",c("FDSRelativeTimestamp.react").getRelativeTimestamp(i,new Date(e),"minimized"))])),b[4]=e,b[5]=i,b[6]=a,b[7]=f):f=b[7];return f}b[8]!==g?(e=g(),b[8]=g,b[9]=e):e=b[9];return e}function r(a){var b=l(7),c=a.participants,d=a.renderNullState;a=a.renderWrapper;if(c.length!==1){var e;b[0]!==d?(e=d(),b[0]=d,b[1]=e):e=b[1];return e}e=c[0];c=e.contactID;e=e.contactTypeExact;var f;b[2]!==c||b[3]!==e||b[4]!==d||b[5]!==a?(f=m.jsx(q,{contactId:c,contactTypeExact:e,renderNullState:d,renderWrapper:a}),b[2]=c,b[3]=e,b[4]=d,b[5]=a,b[6]=f):f=b[6];return f}function s(a){var b=l(6),c=a.participants,e=a.renderNullState;a=a.renderWrapper;var f;b[0]!==c?(f=c.map(t),b[0]=c,b[1]=f):f=b[1];c=f;f=d("useMWChatHasActiveContact").useMWChatHasActiveContact(c);if(f){b[2]!==a?(c=a(n),b[2]=a,b[3]=c):c=b[3];return c}else{b[4]!==e?(f=e(),b[4]=e,b[5]=f):f=b[5];return f}}function t(a){return a.contactID}function a(a){var b=l(8),e=a.participants,f=a.renderNullState,g=a.renderWrapper;a=a.threadType;f=f===void 0?o:f;g=g===void 0?p:g;if((j||(j=d("I64"))).equal(a,(k||(k=d("LSIntEnum"))).ofNumber(1))||(j||(j=d("I64"))).equal(a,(k||(k=d("LSIntEnum"))).ofNumber(15))&&c("isArmadillo")()){var h;b[0]!==e||b[1]!==f||b[2]!==g?(h=m.jsx(r,{participants:e,renderNullState:f,renderWrapper:g}),b[0]=e,b[1]=f,b[2]=g,b[3]=h):h=b[3];return h}else if((j||(j=d("I64"))).equal(a,(k||(k=d("LSIntEnum"))).ofNumber(2))||(j||(j=d("I64"))).equal(a,(k||(k=d("LSIntEnum"))).ofNumber(16))&&c("isArmadillo")()){b[4]!==e||b[5]!==f||b[6]!==g?(h=m.jsx(s,{participants:e,renderNullState:f,renderWrapper:g}),b[4]=e,b[5]=f,b[6]=g,b[7]=h):h=b[7];return h}return null}g["default"]=a}),226);
__d("LSRelayConnections",["FBLogger"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return a.end_cursor}function b(a){return a.has_next_page}function d(a){return a.has_previous_page}function e(a){return(a=a.is_loading_next)!=null?a:!1}function f(a){return(a=a.is_loading_previous)!=null?a:!1}function h(a){return a.start_cursor}function i(a){return JSON.stringify(a)}function j(a){return JSON.parse(a)}function k(a,b){if(a.length>b.first+1)throw c("FBLogger")("meteora").mustfixThrow("Got more edges (%s) than expected given the limit (%s).",a.length,b.first);var d=a[0],e=a.length>=b.first+1;b=e?b.first-1:a.length-1;a=a.length>0?a[b]:null;return{end_cursor:a!=null?i(a.value[0]):null,has_next_page:e,has_previous_page:!1,start_cursor:d!=null?i(d.value[0]):null}}function l(a){var b;if(((b=a.first)!=null?b:0)<=0)throw c("FBLogger")("meteora").mustfixThrow("Invalid `first` argument passed to connection: expected > 0 but got %s",String(a.first))}function m(a,b){a=a;b.after!=null&&(a=a.bounds({gt:j(b.after)}));b.before!=null&&(a=a.bounds({lt:j(b.before)}));a=a.take(b.first+1);return a}g.end_cursor=a;g.has_next_page=b;g.has_previous_page=d;g.is_loading_next=e;g.is_loading_previous=f;g.start_cursor=h;g.keyToCursor=i;g.cursorToKey=j;g.pageInfoFromEdges=k;g.validateArgsOrThrow=l;g.applyConnectionArgs=m}),98);
__d("LSRelayContextDB",["LSDatabaseSingleton","cr:8556","err","unrecoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){switch(a){case"PROD":return(h||(h=d("LSDatabaseSingleton"))).getLSDatabaseSingletonPromiseOrValue();case"EXAMPLE":if(b("cr:8556")==null)throw c("err")("Loading test data on prod");return b("cr:8556").getExampleLSDatabasePromise();default:throw c("unrecoverableViolation")("Unsupported dbType: "+a,"lightspeed_resolvers")}}g.getLSDbStoragePromise=a}),98);
__d("LSRelayContext",["LSRelayContextDB","Promise","RelayAPIConfig","isPromise","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a){a=a.dbType;a=k(a);return a instanceof(i||(i=b("Promise")))?a.then(function(a){return{actorID:c("RelayAPIConfig").actorID,db:a}}):{actorID:c("RelayAPIConfig").actorID,db:a}}var j={};function k(a){if(j[a]==null){var b=d("LSRelayContextDB").getLSDbStoragePromise(a);j[a]=b;(h||(h=c("isPromise")))(b)&&c("promiseDone")(b,function(b){j[a]=b})}return j[a]}g.getContext=a}),98);
__d("LSRelayLiveResolvers",["LSRelayConnections","ReQLObservable","areEqual","emptyFunction","relay-runtime","transformObservableToLiveState"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b){return j(k(a,b),function(b){return b.map(function(b){b[0];b=b[1];return{context:a,value:b}})})}function b(a,b,c){d("LSRelayConnections").validateArgsOrThrow(c);return j(k(a,function(a){return d("LSRelayConnections").applyConnectionArgs(b(a),c)}),function(b){b=b.map(function(b){return{context:a,value:b}});return{context:a,value:{edges:b.slice(0,c.first),page_info:d("LSRelayConnections").pageInfoFromEdges(b,c)}}})}function e(a,b){return j(k(a,function(a){return b(a).take(1)}),function(b){return b.length>0?{context:a,value:b[0][1]}:null})}function f(a,b,c){return j(k(a,function(a){return b(a).take(1)}),function(b){return{context:a,value:c(b==null?void 0:(b=b[0])==null?void 0:b[1])}})}var i={read:function(){return null},subscribe:function(){return c("emptyFunction")}};function j(a,b){var c=a.read;a=a.subscribe;return{read:function(){var a=c();if(d("relay-runtime").isSuspenseSentinel(a))return d("relay-runtime").suspenseSentinel();else return b(a)},subscribe:a}}function k(a,b){return c("transformObservableToLiveState")(d("relay-runtime").Observable.create(function(e){var f,g=d("ReQLObservable").create(a.db,b).subscribe({complete:e.complete,error:e.error,next:function(a){if((h||(h=c("areEqual")))(a,f))return;f=a;e.next(a)}});return g}))}g.iterableToPluralFieldLiveResolver_MAY_CAUSE_OVERFETCHING=a;g.iterableToConnectionLiveResolver=b;g.iterableToFirstValueLiveResolver=e;g.iterableToMappedValueLiveResolver=f;g.nullValueLiveState=i;g.mapLiveState=j;g.makeLiveState=k}),98);
__d("LSRoot__thread",["LSRelayLiveResolvers","ReQL"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){a=a.context;return d("LSRelayLiveResolvers").iterableToFirstValueLiveResolver(a,function(a){return d("ReQL").fromTableAscending(a.tables.threads).getKeyRange(b.threadKey).take(1)})}g.thread=a}),98);
__d("LSRoot__viewer",[],(function(a,b,c,d,e,f){"use strict";function a(a){a=a.context;return{context:a,value:{}}}f.viewer=a}),66);
__d("LSSendTypingIndicator",["LSIssueNewFireAndForgetTask"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(b){return c.db.table(9).fetch([[[a[0]]]]).next().then(function(a,b){var e=a.done;a=a.value;return e?d[0]=c.i64.cast([0,1]):(b=a.item,d[6]=b.syncGroup,c.i64.neq(d[6],void 0)?d[5]=d[6]:d[5]=c.i64.cast([0,1]),d[0]=d[5])})},function(b){return d[4]=["typing","_",c.i64.to_string(a[0])].join(""),c.forEach(c.filter(c.db.table(5).fetch(),function(a){return d[4]===a.queueName}),function(a){return a["delete"]()})},function(e){return d[2]=new c.Map(),d[2].set("thread_key",a[0]),d[2].set("is_group_thread",a[1]),d[2].set("is_typing",a[2]),d[2].set("attribution",c.i64.cast([0,0])),d[2].set("sync_group",d[0]),d[3]=c.toJSON(d[2]),c.storedProcedure(b("LSIssueNewFireAndForgetTask"),d[4],c.i64.cast([0,3]),d[3])}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSTypingSendTypingIndicatorStoredProcedure";e.exports=a}),null);
__d("LSSendTypingIndicatorStoredProcedure",["LSSendTypingIndicator","cr:8709"],(function(a,b,c,d,e,f,g){function a(a,b){return c("LSSendTypingIndicator")(b.threadKey,b.isGroupThread,b.isTyping,a)}g["default"]=a}),98);
__d("LSSetProactiveWarningDismissTime",["LSIssueNewTask"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(b){return c.db.table(9).fetch([[[a[0]]]]).next().then(function(a,b){var e=a.done;a=a.value;return e?d[0]=c.i64.cast([0,1]):(b=a.item,d[8]=b.syncGroup,c.i64.neq(d[8],void 0)?d[7]=d[8]:d[7]=c.i64.cast([0,1]),d[0]=d[7])})},function(e){return d[2]=c.i64.of_float(Date.now()),d[6]=c.i64.div(d[2],c.i64.cast([0,1e3])),d[3]=new c.Map(),d[3].set("thread_key",a[0]),d[3].set("timestamp",d[6]),d[3].set("sync_group",d[0]),d[4]=d[3].get("thread_key"),d[3],d[5]=c.toJSON(d[3]),c.storedProcedure(b("LSIssueNewTask"),c.i64.to_string(d[4]),c.i64.cast([0,438]),d[5],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))},function(b){return c.forEach(c.db.table(9).fetch([[[a[0]]]]),function(a){var b=a.update;a.item;return b({proactiveWarningDismissTime:d[6]})})}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSMailboxSetProactiveWarningDismissTimeStoredProcedure";e.exports=a}),null);
__d("LSSetProactiveWarningDismissTimeStoredProcedure",["LSSetProactiveWarningDismissTime","cr:8709"],(function(a,b,c,d,e,f,g){function a(a,b){return c("LSSetProactiveWarningDismissTime")(b.threadKey,a)}g["default"]=a}),98);
__d("LSThreadCapabilityBitOffset",[],(function(a,b,c,d,e,f){a=Object.freeze({PAYMENT:0,CAMERA:1,MEDIA_PICKER:2,STICKER:3,GIF:4,GO_TO_SECRET_CONVERSATION:5,COLOR_CUSTOMIZATION:6,EMOJI_CUSTOMIZATION:7,THREAD_DETAILS_PROFILE_BUTTON:8,NICKNAMES:9,BLOCK:10,CALIBRA:12,MESSENGER_KIDS_MANAGE_KID_ACCOUNT:13,AUDIO_CLIPS:14,SHARED_MEDIA:15,BLOCK_GROUP_MEMBER:16,FEEDBACK_AND_REPORT:17,REACTIONS:18,MUTE_THREAD:19,SEEN_HEADS:20,MESSAGE_REQUEST_COMPOSER_BANNER:21,IN_THREAD_PROFILE_BUTTON:22,THREAD_DETAILS:23,RTC_VIDEO_CALL:24,RTC_VOICE_CALL:25,MEMBER_LIST:26,ADD_MEMBER:27,LEAVE_THREAD:28,BLOCKED_USER_INTERSTITIAL:29,OPTIMISTIC_THREAD_FEEDBACK_AND_REPORT:30,LOCATION_SHARING:31,IGNORE_MESSAGES:32,FOCUS_MODE:33,SEARCH_IN_CONVERSATION:34,CREATE_GROUP:35,POLL_CREATION:36,DISPLAY_ACTOR_TYPE_IN_THREAD_VIEW_HEADER:37,DISAPPEARING_MODE:38,FORCE_ONE_PHASE_SEND:39,SPLIT_MULTI_SEND_PHOTO:40,THREAD_DETAILS_IG_PROFILE_BUTTON:41,MESSAGE_REPLY:42,MENTIONS:43,GAMES_BOT_THREAD:44,DISABLE_LINKS:45,BLUR_MEDIA:46,DISABLE_CONTEXT_BANNER:47,TOP_LEVEL_SELF_REMEDIATION:48,DISABLE_USER_CONTROL:49,THREAD_DETAILS_SHOW_USER_NAME:50,DISABLE_MESSAGE_BUBBLE_SWIPE:51,IGNORED_THREAD:52,PAGE_BAN:53,CUSTOM_THREAD_NOTIFICATION_SOUNDS:54,ROOM_CREATION:55,FILE_PICKER:56,JOIN_ROOM:57,SELFIE_STICKER:58,POWER_UP:59,THREAD_NAME_CUSTOMIZATION:60,THREAD_PHOTO_CUSTOMIZATION:61,STRUCTURED_INPUT:62,SUPPRESS_NULLSTATE_HEADER:63,ARCHIVE_THREAD:64,UNARCHIVE_THREAD:65,MEMBER_REQUEST:66,BUSINESS_INBOX_BAN:67,CTM_AD_THREAD_WITH_AD_WARNING:68,BUSINESS_INBOX_SAVED_REPLIES:69,GARDEN_THREAD_SETTINGS:70,MARKETPLACE_SAVED_REPLIES:71,CARRIER_MESSAGING_ADD_MEMBER:72,PHONE_CALL:73,THREAD_DETAILS_DELETE_THREAD:74,EPHEMERAL_MESSAGE_TIMER:75,MESSAGE_EXPIRATION:76,MESSAGE_SOUND_SETTINGS:77,RINGTONE_SOUND_SETTINGS:78,HIDE_FROM_ACTIVE_NOW:79,MAGIC_WORDS:80,THREAD_DESCRIPTION_CUSTOMIZATION:81,BUSINESS_INBOX_CATALOG:82,ADMIN_RECALL_MESSAGE:83,SHARE_CONTACT:84,RESTRICT_CONTACT:85,SOUND_BITE:86,MOST_LIKELY_TO_POLL_CREATION:87,REPORT_CHAT_TO_ADMIN:88,CAN_MARK_READ_OR_UNREAD:89,BUSINESS_TOOLS:90,REMOVE_MEMBER:91,GROUP_GO_TO_SECRET_CONVERSATION:92,REPORT_MESSAGE_TO_ADMIN:93,MANAGE_MEMBER:94,SHARED_LINKS:95,SHARED_CONTENT:96,ADD_XAC_USERS:97,BUSINESS_ORDER_MANAGEMENT:98,RTC_MARKETPLACE_COMPOSER_BANNER:99,IS_SELLER_RTC_ELIGIBLE:100,IS_BUYER_RTC_ELIGIBLE:101,MESSAGE_LOCAL_DELETE:102,MESSAGE_FORWARD:103,IS_NFB_ELIGIBLE:104,MESSAGE_REQUEST_GROUP_INVITE:105,VIEW_PINNED_MESSAGES_V2:106,BUSINESS_APPOINTMENT_BOOKING:107,THREAD_DETAILS_SHOW_CHAT_INVITE_LINK:108,HOTLIKE_STICKER:109,IS_LEARNING_SPACE_CHAT:110,AUDIO_CAPTIONS:111,COMMAND_SILENT:112,MARKETPLACE_THREAD_COMMERCE_PROFILE_BUTTON:113,EPHEMERAL_MEDIA:114,COMMAND_EVERYONE:115,COMMAND_GIF:116,MARKETPLACE_THREAD_COMMERCE_PRODUCT_BUTTON:117,CAMERA_BACKUP:118,BLOCK_MARKETPLACE_USER:119,COMMUNITY_MESSAGING_CHANNEL_INVITE:120,COMMAND_TEXT_REPLACEMENT:121,MESSAGE_UNSEND:122,IMMERSIVE_MODES_SPACES:123,COMMUNITY_MESSAGING_LINK_SHARING_V2:124,COMMUNITY_MESSAGING_AUDIO_ROOMS:125,BUMP_MESSAGE_ACTION:126,CUTOVER_BLOCK_COMPOSER:128,FAVORITE_THREAD:129,BUMP_THREAD:131,IS_BUSINESS_APPOINTMENT_THREAD_INTENT_ENABLED:132,COMMUNITY_MESSAGING_ICEBREAKERS:133,COMMUNITY_MESSAGING_CHANNEL_EMOJI_CUSTOMIZATION:134,COMMUNITY_MESSAGING_CHANNEL_DESCRIPTION_CUSTOMIZATION:135,IS_MESSENGER_CHAT_ENTITY_THREAD:136,RESHARE_HUB:138,REACTIONS_V2:139,SEEN_COUNTS_V2:140,IS_LARGE_THREAD:141,PUBLIC_CHAT_BAN_USER:143,CONTENT_EXPLORER:144,PRO_MODE:145,CUSTOMER_APPOINTMENT_REQUEST:146,IS_MESSENGER_GUIDE_CHAT_ENTITY_THREAD:147,COMMUNITY_MESSAGING_THREAD_LEAVE_UPSELL:148,GENERATED_STICKERS:149,ROLLCALL:152,BUSINESS_CHAT_PRIVACY_DISCLOSURE:153,PAUSE_CHAT:154,GAMES_DISCOVERY:155,MULTI_REACT:156,STICKER_TRAY_SEARCH:157,POLL_V1_UI:158,POLL_V2_UI:159,DEIDENTIFIED_STICKER_SEARCH:160,PIN_CHANNEL_ON_PROFILE:161,ARMADILLO_TLC_CONTROL_OPEN_THREAD:162,SUGGESTED_TAB:163,GROUP_CHAT_UPGRADE_ELIGIBILITY:164,HAS_GROUP_UPDATES_BOT_ATTACHED:165,HAS_GROUP_UPDATES_SETTING_ENABLED:166,SUB_THREAD_CREATION_ENABLED:167,COMMUNITY_MESSAGING_FIRST_MESSAGE_UPSELL_WITH_ICE_BREAKERS:168,REACTIONS_V2_WRITE:169,POLL_VOTING:170,AUTO_ENDED_CHANNEL_COMPOSER:171,MODIFY_PINNED_MESSAGES_V2:172,CUSTOM_GHOST_TEXT:173,AVATAR_DETAILS:174,COLLAPSIBLE_XMAT:175,ADD_YOURS:176,PAUSE_CHAT_ON_BLUE:177,UPGRADED_COMMUNITY_JOINED:178,IS_UPGRADED_COMMUNITY_OWNER:179,AI_BOT_DATA_USAGE_IN_THREAD_DETAILS:180,AI_BOT_FEEDBACK_IN_THREAD_DETAILS:181,AI_BOT_TIPS_IN_THREAD_DETAILS:182,AI_BOT_SUMMONING:183,VIEW_REACTION_DETAILS:184,BUSINESS_PROFILE_BADGE:185,HINT_CARD_IN_CHANNEL_UPGRADED_FROM_GROUP_CHAT:186,AI_BOT_EMBODIMENT:187,BMOP_IN_THREAD_CATALOG_ENTRY_POINT:188,OPTIMISTIC_THREAD_APPOINTMENT_REQUEST:189,IS_GAME_RECOMMENDATIONS_CHAT_ENTITY_THREAD:190,IS_XAC_READ_ONLY:192,WILL_XAC_BE_READ_ONLY:193,IS_EDIT_MESSAGE_ENABLED:194,SUB_THREAD_LIST:195,TRANSLATE_MESSAGE:196,MANAGE_CHAT_THREAD_DETAILS:197,CUSTOMER_LEAD_FORM_APPOINTMENT_REQUEST:198,ADMOD_ONBOARDING_ACTIONS_V2:199,RTC_OPTIN_REQUEST:200,CUSTOMER_LEAD_FORM_GET_QUOTE:201,PAUSED_BY_SOFT_ACTION_COMPOSER_BLOCK:202,DISABLE_MARKETPLACE_DMA_THREAD_COMPOSER:203,CUSTOMIZE_WELCOME_PROMPT_THREAD_DETAILS:204,IS_COMMUNITY_MESSAGING_FIRST_THREAD_JOIN_PER_COMMUNITY_FOR_MEMBER_ONBOARDING:205,SUB_THREAD_OPTIMISTIC_CREATE_ENABLED:206,ONE_CLICK_MUTE_ENABLED:207,GEOCHATS_CAN_SET_LOCATION:208,GEOCHATS_CAN_VIEW_LOCATION:209,WORK_CHAT_GOVERNANCE_BLOCK:210,INSTAMADILLO_TRANSPORT_ENABLED:211,INSTAMADILLO_DISAPPEARING_MESSAGES_TOGGLE_ENABLED:212,IS_BSG_THREAD:213,IS_INSTAMADILLO_CUTOVER:214,WRITE_WITH_AI_ENABLED:215,SHOW_FOLLOW_PAGE_CTA:216,CAN_VIEWING_PAGE_BE_LIKED:217,DELETE_FROM_THREAD_LIST_VIEW:218,INVITE_MODEL_TEXT_ONLY:219,COMMAND_SUMMARY:220,COMMUNITY_AI:221,BUSINESS_INBOX_FILE_SHARING:222,MESSAGE_AS_PAGE:223,COMPOSER_INLINE_MEDIA:224,INSTAMADILLO_TTLC_TEXT:225,INSTAMADILLO_TTLC_CLIP:226,INSTAMADILLO_TTLC_REEL_SHARE:227,INSTAMADILLO_TTLC_MEDIA_SHARE:228,INSTAMADILLO_TTLC_STORY_SHARE:229,INSTAMADILLO_TTLC_LINK:230,INSTAMADILLO_TTLC_GENERIC_XMA:231,INSTAMADILLO_TTLC_IMAGE:232,INSTAMADILLO_TTLC_VIDEO:233,INSTAMADILLO_TTLC_AUDIO:234,INSTAMADILLO_TTLC_CALLING:235,INSTAMADILLO_TTLC_PROFILE:236,AI_BOT_MEMU_ONBOARDING_IN_THREAD_DETAILS:237,CHANNELS_VOICE_SWITCHING_ENABLED:238,AI_BOT_CREATOR_INFO:239,AI_BOT_HALLUCINATION_DISCLAIMER_IN_THREAD_DETAILS:240,BUSINESS_FORM_MANAGEMENT:241,AI_STUDIO_IN_THREAD:242,AI_UGC_BOT:243,AI_BOT_FBGROUP_INFO:244,MAGIC_MESSENGER:245,AI_BOT_MANAGE_AI_MEMORY_IN_THREAD_DETAILS:246,GROUP_CHAT_AI_IMAGE_ENABLED:247,GROUP_UGC_EDIT_ENABLED:248,RESUME_GROUP_CHAT_UPGRADED_TO_COMMUNITY:249,FRIENDING_ACTION:250,ELIGIBLE_FOR_GROUP_CHAT_UPGRADE_TO_COMMUNITY:251,AI_STUDIO_CAN_EDIT_UGC:252,PIN_OR_UNPIN_THREAD_FOR_COMMUNITY_USER:253});f["default"]=a}),66);
__d("LS_Participant",["LSRelayLiveResolvers","ReQL"],(function(a,b,c,d,e,f,g){function a(a){return a.context}function b(a){return a.value}function c(a){return a.value.readWatermarkTimestampMs}function e(a){return a.value.deliveredWatermarkTimestampMs}function f(a){return a.value.nickname}function h(a){return a.value.authorityLevel}function i(a){return a.value.threadKey}function j(a){return a.value.contactId}function k(a){return a.value.readActionTimestampMs}function l(a){return a.value.isAdmin}function m(a){return a.value.subscribeSource}function n(a){return a.value.normalizedSearchTerms}function o(a){return a.value.participantCapabilities}function p(a){return a.value.groupParticipantJoinState}function q(a){return a.value.isModerator}function r(a){return a.value.isSuperAdmin}function s(a){return a.value.threadRoles}function t(a){return d("LSRelayLiveResolvers").iterableToFirstValueLiveResolver(a.context,function(b){return d("ReQL").fromTableAscending(b.tables.contacts).getKeyRange(a.value.contactId)})}g.__context=a;g.__lightspeed_table_row=b;g.read_watermark_timestamp_ms=c;g.delivered_watermark_timestamp_ms=e;g.nickname=f;g.authority_level=h;g.thread_key=i;g.contact_id=j;g.read_action_timestamp_ms=k;g.is_admin=l;g.subscribe_source=m;g.normalized_search_terms=n;g.participant_capabilities=o;g.group_participant_join_state=p;g.is_moderator=q;g.is_super_admin=r;g.thread_roles=s;g.contact=t}),98);
__d("LS_Participant_Connection",["LSRelayConnections"],(function(a,b,c,d,e,f,g){function a(a){return a.value.edges}function b(a){return a.value.page_info}function c(a){return d("LSRelayConnections").keyToCursor(a.value[0])}function e(a){return{context:a.context,value:a.value[1]}}g.edges=a;g.page_info=b;g.cursor=c;g.node=e}),98);
__d("LS_Thread",["LSRelayLiveResolvers","ReQL"],(function(a,b,c,d,e,f,g){function a(a){return a.context}function b(a){return a.value}function c(a){return a.value.lastActivityTimestampMs}function e(a){return a.value.lastReadWatermarkTimestampMs}function f(a){return a.value.snippet}function h(a){return a.value.threadName}function i(a){return a.value.threadPictureUrl}function j(a){return a.value.needsAdminApprovalForNewParticipant}function k(a){return a.value.authorityLevel}function l(a){return a.value.threadKey}function m(a){return a.value.mailboxType}function n(a){return a.value.threadType}function o(a){return a.value.folderName}function p(a){return a.value.threadPictureUrlFallback}function q(a){return a.value.threadPictureUrlExpirationTimestampMs}function r(a){return a.value.removeWatermarkTimestampMs}function s(a){return a.value.muteExpireTimeMs}function t(a){return a.value.muteMentionExpireTimeMs}function u(a){return a.value.muteCallsExpireTimeMs}function v(a){return a.value.groupNotificationSettings}function w(a){return a.value.isAdminSnippet}function x(a){return a.value.snippetSenderContactId}function y(a){return a.value.snippetText}function z(a){return a.value.snippetStringHash}function A(a){return a.value.snippetStringArgument1}function B(a){return a.value.snippetAttribution}function C(a){return a.value.snippetAttributionStringHash}function D(a){return a.value.disappearingSettingTtl}function E(a){return a.value.disappearingSettingUpdatedTs}function F(a){return a.value.disappearingSettingUpdatedBy}function G(a){return a.value.ongoingCallState}function H(a){return a.value.cannotReplyReason}function I(a){return a.value.customEmoji}function J(a){return a.value.customEmojiImageUrl}function K(a){return a.value.avatarStickerInstructionKeyId}function L(a){return a.value.avatarStickerId}function M(a){return a.value.avatarStickerThumbnailImageUrl}function N(a){return a.value.avatarStickerThumbnailImageMimeType}function O(a){return a.value.avatarStickerOriginalImageUrl}function P(a){return a.value.avatarStickerOriginalImageMimeType}function Q(a){return a.value.outgoingBubbleColor}function R(a){return a.value.themeFbid}function S(a){return a.value.parentThreadKey}function T(a){return a.value.nullstateDescriptionText1}function U(a){return a.value.nullstateDescriptionType1}function V(a){return a.value.nullstateDescriptionText2}function W(a){return a.value.nullstateDescriptionType2}function X(a){return a.value.nullstateDescriptionText3}function Y(a){return a.value.nullstateDescriptionType3}function Z(a){return a.value.snippetHasEmoji}function $(a){return a.value.hasPersistentMenu}function aa(a){return a.value.disableComposerInput}function ba(a){return a.value.cannotUnsendReason}function ca(a){return a.value.viewedPluginKey}function da(a){return a.value.viewedPluginContext}function ea(a){return a.value.clientThreadKey}function fa(a){return a.value.capabilities}function ga(a){return a.value.shouldRoundThreadPicture}function ha(a){return a.value.proactiveWarningDismissTime}function ia(a){return a.value.isCustomThreadPicture}function ja(a){return a.value.otidOfFirstMessage}function ka(a){return a.value.normalizedSearchTerms}function la(a){return a.value.additionalThreadContext}function ma(a){return a.value.disappearingThreadKey}function na(a){return a.value.isDisappearingMode}function oa(a){return a.value.disappearingModeInitiator}function pa(a){return a.value.unreadDisappearingMessageCount}function qa(a){return a.value.lastMessageCtaId}function ra(a){return a.value.lastMessageCtaType}function sa(a){return a.value.lastMessageCtaTimestampMs}function ta(a){return a.value.consistentThreadFbid}function ua(a){return a.value.threadDescription}function va(a){return a.value.unsendLimitMs}function wa(a){return a.value.capabilities2}function xa(a){return a.value.capabilities3}function ya(a){return a.value.syncGroup}function za(a){return a.value.threadInvitesEnabled}function Aa(a){return a.value.threadInviteLink}function Ba(a){return a.value.isAllUnreadMessageMissedCallXma}function Ca(a){return a.value.numUnreadSubthreads}function Da(a){return a.value.subthreadCount}function Ea(a){return a.value.lastNonMissedCallXmaMessageTimestampMs}function Fa(a){return a.value.isHidden}function Ga(a){return a.value.threadInvitesEnabledV2}function Ha(a){return a.value.joinRequestApprovalSetting}function Ia(a){return a.value.hasPendingJoinRequest}function Ja(a){return a.value.pendingJoinRequestsCount}function Ka(a){return a.value.hasPendingInvitation}function La(a){return a.value.eventStartTimestampMs}function Ma(a){return a.value.eventEndTimestampMs}function Na(a){return a.value.takedownState}function Oa(a){return a.value.memberCount}function Pa(a){return a.value.admodCount}function Qa(a){return a.value.secondaryParentThreadKey}function Ra(a){return a.value.igFolder}function Sa(a){return a.value.inviterId}function Ta(a){return a.value.threadTags}function Ua(a){return a.value.isReadReceiptsDisabled}function Va(a){return a.value.readReceiptsDisabledV2}function Wa(a){return a.value.threadStatus}function Xa(a){return a.value.ctmAdId}function Ya(a){return a.value.ctmAdgroupId}function Za(a){return a.value.ctmAdCampaignId}function $a(a){return a.value.ctmAdCampaignGroupId}function ab(a){return a.value.ctmAdAccountId}function bb(a){return a.value.threadSubtype}function cb(a){return a.value.pauseThreadTimestamp}function db(a){return a.value.metadata}function eb(a){return a.value.capabilities4}function fb(a){return a.value.syncSource}function gb(a,b){return d("LSRelayLiveResolvers").iterableToConnectionLiveResolver(a.context,function(b){return d("ReQL").fromTableAscending(b.tables.participants).getKeyRange(a.value.threadKey)},b)}function hb(a,b){return d("LSRelayLiveResolvers").iterableToConnectionLiveResolver(a.context,function(b){return d("ReQL").fromTableDescending(b.tables.messages.index("messageDisplayOrder")).getKeyRange(a.value.threadKey)},b)}function ib(a){return d("LSRelayLiveResolvers").iterableToFirstValueLiveResolver(a.context,function(b){return d("ReQL").fromTableAscending(b.tables.thread_nullstate).getKeyRange(a.value.threadKey)})}function jb(a){return d("LSRelayLiveResolvers").iterableToFirstValueLiveResolver(a.context,function(b){return d("ReQL").fromTableAscending(b.tables.community_folders).getKeyRange(a.value.parentThreadKey)})}function kb(a,b){return d("LSRelayLiveResolvers").iterableToConnectionLiveResolver(a.context,function(b){return d("ReQL").fromTableAscending(b.tables.mi_act_mapping_table).getKeyRange(a.value.threadKey)},b)}function lb(a){return d("LSRelayLiveResolvers").iterableToFirstValueLiveResolver(a.context,function(b){return d("ReQL").fromTableAscending(b.tables.rtc_ongoing_calls_on_threads_v2).getKeyRange(a.value.threadKey)})}function mb(a){return d("LSRelayLiveResolvers").iterableToFirstValueLiveResolver(a.context,function(b){return d("ReQL").fromTableAscending(b.tables.thread_proactive_warning_settings).getKeyRange(a.value.threadKey)})}function nb(a,b){return d("LSRelayLiveResolvers").iterableToConnectionLiveResolver(a.context,function(b){return d("ReQL").fromTableAscending(b.tables.in_thread_banner).getKeyRange(a.value.threadKey)},b)}function ob(a){return d("LSRelayLiveResolvers").iterableToFirstValueLiveResolver(a.context,function(b){return d("ReQL").fromTableAscending(b.tables.cutover_threads).getKeyRange(a.value.threadKey)})}function pb(a,b){return d("LSRelayLiveResolvers").iterableToConnectionLiveResolver(a.context,function(b){return d("ReQL").fromTableAscending(b.tables.custom_thread_commands).getKeyRange(a.value.threadKey)},b)}function qb(a,b){return d("LSRelayLiveResolvers").iterableToConnectionLiveResolver(a.context,function(b){return d("ReQL").fromTableAscending(b.tables.discoverable_chat_participants).getKeyRange(a.value.threadKey)},b)}function rb(a,b){return d("LSRelayLiveResolvers").iterableToConnectionLiveResolver(a.context,function(b){return d("ReQL").fromTableAscending(b.tables.persistent_menu_items).getKeyRange(a.value.threadKey)},b)}function sb(a){return d("LSRelayLiveResolvers").iterableToFirstValueLiveResolver(a.context,function(b){return d("ReQL").fromTableDescending(b.tables.thread_limits).getKeyRange(a.value.threadKey)})}g.__context=a;g.__lightspeed_table_row=b;g.last_activity_timestamp_ms=c;g.last_read_watermark_timestamp_ms=e;g.snippet=f;g.thread_name=h;g.thread_picture_url=i;g.needs_admin_approval_for_new_participant=j;g.authority_level=k;g.thread_key=l;g.mailbox_type=m;g.thread_type=n;g.folder_name=o;g.thread_picture_url_fallback=p;g.thread_picture_url_expiration_timestamp_ms=q;g.remove_watermark_timestamp_ms=r;g.mute_expire_time_ms=s;g.mute_mention_expire_time_ms=t;g.mute_calls_expire_time_ms=u;g.group_notification_settings=v;g.is_admin_snippet=w;g.snippet_sender_contact_id=x;g.snippet_text=y;g.snippet_string_hash=z;g.snippet_string_argument1=A;g.snippet_attribution=B;g.snippet_attribution_string_hash=C;g.disappearing_setting_ttl=D;g.disappearing_setting_updated_ts=E;g.disappearing_setting_updated_by=F;g.ongoing_call_state=G;g.cannot_reply_reason=H;g.custom_emoji=I;g.custom_emoji_image_url=J;g.avatar_sticker_instruction_key_id=K;g.avatar_sticker_id=L;g.avatar_sticker_thumbnail_image_url=M;g.avatar_sticker_thumbnail_image_mime_type=N;g.avatar_sticker_original_image_url=O;g.avatar_sticker_original_image_mime_type=P;g.outgoing_bubble_color=Q;g.theme_fbid=R;g.parent_thread_key=S;g.nullstate_description_text1=T;g.nullstate_description_type1=U;g.nullstate_description_text2=V;g.nullstate_description_type2=W;g.nullstate_description_text3=X;g.nullstate_description_type3=Y;g.snippet_has_emoji=Z;g.has_persistent_menu=$;g.disable_composer_input=aa;g.cannot_unsend_reason=ba;g.viewed_plugin_key=ca;g.viewed_plugin_context=da;g.client_thread_key=ea;g.capabilities=fa;g.should_round_thread_picture=ga;g.proactive_warning_dismiss_time=ha;g.is_custom_thread_picture=ia;g.otid_of_first_message=ja;g.normalized_search_terms=ka;g.additional_thread_context=la;g.disappearing_thread_key=ma;g.is_disappearing_mode=na;g.disappearing_mode_initiator=oa;g.unread_disappearing_message_count=pa;g.last_message_cta_id=qa;g.last_message_cta_type=ra;g.last_message_cta_timestamp_ms=sa;g.consistent_thread_fbid=ta;g.thread_description=ua;g.unsend_limit_ms=va;g.capabilities_2=wa;g.capabilities_3=xa;g.sync_group=ya;g.thread_invites_enabled=za;g.thread_invite_link=Aa;g.is_all_unread_message_missed_call_xma=Ba;g.num_unread_subthreads=Ca;g.subthread_count=Da;g.last_non_missed_call_xma_message_timestamp_ms=Ea;g.is_hidden=Fa;g.thread_invites_enabled_v2=Ga;g.join_request_approval_setting=Ha;g.has_pending_join_request=Ia;g.pending_join_requests_count=Ja;g.has_pending_invitation=Ka;g.event_start_timestamp_ms=La;g.event_end_timestamp_ms=Ma;g.takedown_state=Na;g.member_count=Oa;g.admod_count=Pa;g.secondary_parent_thread_key=Qa;g.ig_folder=Ra;g.inviter_id=Sa;g.thread_tags=Ta;g.is_read_receipts_disabled=Ua;g.read_receipts_disabled_v2=Va;g.thread_status=Wa;g.ctm_ad_id=Xa;g.ctm_adgroup_id=Ya;g.ctm_ad_campaign_id=Za;g.ctm_ad_campaign_group_id=$a;g.ctm_ad_account_id=ab;g.thread_subtype=bb;g.pause_thread_timestamp=cb;g.metadata=db;g.capabilities_4=eb;g.sync_source=fb;g.participants=gb;g.messages=hb;g.nullstate=ib;g.community_folder=jb;g.mi_act_mapping=kb;g.rtc_ongoing_calls=lb;g.thread_proactive_warning_settings=mb;g.in_thread_banner=nb;g.cutover_thread=ob;g.custom_thread_commands=pb;g.discoverable_chat_participants=qb;g.persistent_menu_items=rb;g.thread_limit=sb}),98);
__d("LSThreadComputedThreadTitle__computed_thread_title$normalization.graphql",["LS_Thread","LS_Participant_Connection","LS_Participant_Connection","LS_Participant","LS_Participant","LS_Participant","LS_Contact","LS_Contact","LS_Contact","LS_Thread","LS_Thread","LS_Thread"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{kind:"Literal",name:"first",value:8}];return{kind:"SplitOperation",metadata:{},name:"LSThreadComputedThreadTitle__computed_thread_title$normalization",selections:[{kind:"ClientEdgeToClientObject",backingField:{name:"participants",args:a,kind:"RelayLiveResolver",storageKey:"participants(first:8)",isOutputType:!0,resolverInfo:{resolverFunction:b("LS_Thread").participants,rootFragment:null}},linkedField:{alias:null,args:a,concreteType:"LS_Participant_Connection",kind:"LinkedField",name:"participants",plural:!1,selections:[{kind:"ClientEdgeToClientObject",backingField:{name:"edges",args:null,kind:"RelayResolver",storageKey:null,isOutputType:!0,resolverInfo:{resolverFunction:b("LS_Participant_Connection").edges,rootFragment:null}},linkedField:{alias:null,args:null,concreteType:"LS_Participant_Connection_Edge",kind:"LinkedField",name:"edges",plural:!0,selections:[{kind:"ClientEdgeToClientObject",backingField:{name:"node",args:null,kind:"RelayResolver",storageKey:null,isOutputType:!0,resolverInfo:{resolverFunction:b("LS_Participant_Connection").node,rootFragment:null}},linkedField:{alias:null,args:null,concreteType:"LS_Participant",kind:"LinkedField",name:"node",plural:!1,selections:[{name:"contact_id",args:null,kind:"RelayResolver",storageKey:null,isOutputType:!0,resolverInfo:{resolverFunction:b("LS_Participant").contact_id,rootFragment:null}},{name:"nickname",args:null,kind:"RelayResolver",storageKey:null,isOutputType:!0,resolverInfo:{resolverFunction:b("LS_Participant").nickname,rootFragment:null}},{kind:"ClientEdgeToClientObject",backingField:{name:"contact",args:null,kind:"RelayLiveResolver",storageKey:null,isOutputType:!0,resolverInfo:{resolverFunction:b("LS_Participant").contact,rootFragment:null}},linkedField:{alias:null,args:null,concreteType:"LS_Contact",kind:"LinkedField",name:"contact",plural:!1,selections:[{name:"first_name",args:null,kind:"RelayResolver",storageKey:null,isOutputType:!0,resolverInfo:{resolverFunction:b("LS_Contact").first_name,rootFragment:null}},{name:"name",args:null,kind:"RelayResolver",storageKey:null,isOutputType:!0,resolverInfo:{resolverFunction:b("LS_Contact").name,rootFragment:null}},{name:"rank",args:null,kind:"RelayResolver",storageKey:null,isOutputType:!0,resolverInfo:{resolverFunction:b("LS_Contact").rank,rootFragment:null}}],storageKey:null}}],storageKey:null}}],storageKey:null}}],storageKey:"participants(first:8)"}},{kind:"ClientExtension",selections:[{name:"__context",args:null,kind:"RelayResolver",storageKey:null,isOutputType:!0,resolverInfo:{resolverFunction:b("LS_Thread").__context,rootFragment:null}},{name:"thread_name",args:null,kind:"RelayResolver",storageKey:null,isOutputType:!0,resolverInfo:{resolverFunction:b("LS_Thread").thread_name,rootFragment:null}},{name:"thread_type",args:null,kind:"RelayResolver",storageKey:null,isOutputType:!0,resolverInfo:{resolverFunction:b("LS_Thread").thread_type,rootFragment:null}}]}]}}();e.exports=a}),null);
__d("LSThreadComputedThreadTitle__computed_thread_title.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:{hasClientEdges:!0},name:"LSThreadComputedThreadTitle__computed_thread_title",selections:[{kind:"RequiredField",field:{alias:null,args:null,kind:"ScalarField",name:"__context",storageKey:null},action:"THROW",path:"__context"},{alias:null,args:null,kind:"ScalarField",name:"thread_name",storageKey:null},{kind:"RequiredField",field:{alias:null,args:null,kind:"ScalarField",name:"thread_type",storageKey:null},action:"THROW",path:"thread_type"},{kind:"RequiredField",field:{alias:null,args:[{kind:"Literal",name:"first",value:8}],concreteType:"LS_Participant_Connection",kind:"LinkedField",name:"participants",plural:!1,selections:[{kind:"RequiredField",field:{alias:null,args:null,concreteType:"LS_Participant_Connection_Edge",kind:"LinkedField",name:"edges",plural:!0,selections:[{kind:"RequiredField",field:{alias:null,args:null,concreteType:"LS_Participant",kind:"LinkedField",name:"node",plural:!1,selections:[{kind:"RequiredField",field:{alias:null,args:null,kind:"ScalarField",name:"contact_id",storageKey:null},action:"THROW",path:"participants.edges.node.contact_id"},{alias:null,args:null,kind:"ScalarField",name:"nickname",storageKey:null},{alias:null,args:null,concreteType:"LS_Contact",kind:"LinkedField",name:"contact",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"first_name",storageKey:null},{kind:"RequiredField",field:{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},action:"THROW",path:"participants.edges.node.contact.name"},{kind:"RequiredField",field:{alias:null,args:null,kind:"ScalarField",name:"rank",storageKey:null},action:"THROW",path:"participants.edges.node.contact.rank"}],storageKey:null}],storageKey:null},action:"THROW",path:"participants.edges.node"}],storageKey:null},action:"THROW",path:"participants.edges"}],storageKey:"participants(first:8)"},action:"THROW",path:"participants"}],type:"LS_Thread",abstractKey:null};e.exports=a}),null);
__d("LSThreadHasCapability__has_capability$normalization.graphql",["LS_Thread","LS_Thread","LS_Thread","LS_Thread","LS_Thread"],(function(a,b,c,d,e,f){"use strict";a={kind:"SplitOperation",metadata:{},name:"LSThreadHasCapability__has_capability$normalization",selections:[{kind:"ClientExtension",selections:[{name:"capabilities",args:null,kind:"RelayResolver",storageKey:null,isOutputType:!0,resolverInfo:{resolverFunction:b("LS_Thread").capabilities,rootFragment:null}},{name:"capabilities_2",args:null,kind:"RelayResolver",storageKey:null,isOutputType:!0,resolverInfo:{resolverFunction:b("LS_Thread").capabilities_2,rootFragment:null}},{name:"capabilities_3",args:null,kind:"RelayResolver",storageKey:null,isOutputType:!0,resolverInfo:{resolverFunction:b("LS_Thread").capabilities_3,rootFragment:null}},{name:"capabilities_4",args:null,kind:"RelayResolver",storageKey:null,isOutputType:!0,resolverInfo:{resolverFunction:b("LS_Thread").capabilities_4,rootFragment:null}},{name:"thread_type",args:null,kind:"RelayResolver",storageKey:null,isOutputType:!0,resolverInfo:{resolverFunction:b("LS_Thread").thread_type,rootFragment:null}}]}]};e.exports=a}),null);
__d("LSThreadHasCapability__has_capability.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"LSThreadHasCapability__has_capability",selections:[{kind:"RequiredField",field:{alias:null,args:null,kind:"ScalarField",name:"capabilities",storageKey:null},action:"THROW",path:"capabilities"},{kind:"RequiredField",field:{alias:"capabilities2",args:null,kind:"ScalarField",name:"capabilities_2",storageKey:null},action:"THROW",path:"capabilities2"},{kind:"RequiredField",field:{alias:"capabilities3",args:null,kind:"ScalarField",name:"capabilities_3",storageKey:null},action:"THROW",path:"capabilities3"},{kind:"RequiredField",field:{alias:"capabilities4",args:null,kind:"ScalarField",name:"capabilities_4",storageKey:null},action:"THROW",path:"capabilities4"},{kind:"RequiredField",field:{alias:"threadType",args:null,kind:"ScalarField",name:"thread_type",storageKey:null},action:"THROW",path:"threadType"}],type:"LS_Thread",abstractKey:null};e.exports=a}),null);
__d("LS_Thread__other_participant",["I64","LSMessagingThreadTypeUtil","LSRelayLiveResolvers","ReQL"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){var b=a.context;a=a.value;var c=a.threadKey;a=a.threadType;return!d("LSMessagingThreadTypeUtil").isOneToOne(a)?d("LSRelayLiveResolvers").nullValueLiveState:d("LSRelayLiveResolvers").iterableToFirstValueLiveResolver(b,function(a){return d("ReQL").fromTableAscending(a.tables.participants).getKeyRange(c).take(2).filter(function(a){a=a.contactId;return(h||(h=d("I64"))).to_string(a)!==b.actorID})})}g.other_participant=a}),98);
__d("LSThreadIsPage__is_page$normalization.graphql",["LS_Thread__other_participant","LS_Participant","LS_Contact"],(function(a,b,c,d,e,f){"use strict";a={kind:"SplitOperation",metadata:{},name:"LSThreadIsPage__is_page$normalization",selections:[{kind:"ClientEdgeToClientObject",backingField:{name:"other_participant",args:null,kind:"RelayLiveResolver",storageKey:null,isOutputType:!0,resolverInfo:{resolverFunction:b("LS_Thread__other_participant").other_participant,rootFragment:null}},linkedField:{alias:"otherParticipant",args:null,concreteType:"LS_Participant",kind:"LinkedField",name:"other_participant",plural:!1,selections:[{kind:"ClientEdgeToClientObject",backingField:{name:"contact",args:null,kind:"RelayLiveResolver",storageKey:null,isOutputType:!0,resolverInfo:{resolverFunction:b("LS_Participant").contact,rootFragment:null}},linkedField:{alias:null,args:null,concreteType:"LS_Contact",kind:"LinkedField",name:"contact",plural:!1,selections:[{name:"contact_type",args:null,kind:"RelayResolver",storageKey:null,isOutputType:!0,resolverInfo:{resolverFunction:b("LS_Contact").contact_type,rootFragment:null}}],storageKey:null}}],storageKey:null}}]};e.exports=a}),null);
__d("LSThreadIsPage__is_page.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:{hasClientEdges:!0},name:"LSThreadIsPage__is_page",selections:[{alias:"otherParticipant",args:null,concreteType:"LS_Participant",kind:"LinkedField",name:"other_participant",plural:!1,selections:[{alias:null,args:null,concreteType:"LS_Contact",kind:"LinkedField",name:"contact",plural:!1,selections:[{alias:"contactType",args:null,kind:"ScalarField",name:"contact_type",storageKey:null}],storageKey:null}],storageKey:null}],type:"LS_Thread",abstractKey:null};e.exports=a}),null);
__d("LSThreadIsSecureThread__is_secure_thread$normalization.graphql",["LS_Thread"],(function(a,b,c,d,e,f){"use strict";a={kind:"SplitOperation",metadata:{},name:"LSThreadIsSecureThread__is_secure_thread$normalization",selections:[{kind:"ClientExtension",selections:[{name:"thread_type",args:null,kind:"RelayResolver",storageKey:null,isOutputType:!0,resolverInfo:{resolverFunction:b("LS_Thread").thread_type,rootFragment:null}}]}]};e.exports=a}),null);
__d("LSThreadIsSecureThread__is_secure_thread.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"LSThreadIsSecureThread__is_secure_thread",selections:[{kind:"RequiredField",field:{alias:null,args:null,kind:"ScalarField",name:"thread_type",storageKey:null},action:"THROW",path:"thread_type"}],type:"LS_Thread",abstractKey:null};e.exports=a}),null);
__d("LSThreadOtherParticipantOrSelf__other_participant_or_self$normalization.graphql",["LS_Thread","LS_Participant_Connection","LS_Thread","LS_Thread","LS_Thread"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{kind:"Literal",name:"first",value:2}];return{kind:"SplitOperation",metadata:{},name:"LSThreadOtherParticipantOrSelf__other_participant_or_self$normalization",selections:[{kind:"ClientEdgeToClientObject",backingField:{name:"participants",args:a,kind:"RelayLiveResolver",storageKey:"participants(first:2)",isOutputType:!0,resolverInfo:{resolverFunction:b("LS_Thread").participants,rootFragment:null}},linkedField:{alias:null,args:a,concreteType:"LS_Participant_Connection",kind:"LinkedField",name:"participants",plural:!1,selections:[{kind:"ClientEdgeToClientObject",backingField:{name:"edges",args:null,kind:"RelayResolver",storageKey:null,isOutputType:!0,resolverInfo:{resolverFunction:b("LS_Participant_Connection").edges,rootFragment:null}},linkedField:{alias:null,args:null,concreteType:"LS_Participant_Connection_Edge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}],storageKey:null}}],storageKey:"participants(first:2)"}},{kind:"ClientExtension",selections:[{name:"__context",args:null,kind:"RelayResolver",storageKey:null,isOutputType:!0,resolverInfo:{resolverFunction:b("LS_Thread").__context,rootFragment:null}},{name:"thread_key",args:null,kind:"RelayResolver",storageKey:null,isOutputType:!0,resolverInfo:{resolverFunction:b("LS_Thread").thread_key,rootFragment:null}},{name:"thread_type",args:null,kind:"RelayResolver",storageKey:null,isOutputType:!0,resolverInfo:{resolverFunction:b("LS_Thread").thread_type,rootFragment:null}}]}]}}();e.exports=a}),null);
__d("LSThreadOtherParticipantOrSelf__other_participant_or_self.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:{hasClientEdges:!0},name:"LSThreadOtherParticipantOrSelf__other_participant_or_self",selections:[{kind:"RequiredField",field:{alias:null,args:null,kind:"ScalarField",name:"__context",storageKey:null},action:"THROW",path:"__context"},{kind:"RequiredField",field:{alias:"threadKey",args:null,kind:"ScalarField",name:"thread_key",storageKey:null},action:"THROW",path:"threadKey"},{kind:"RequiredField",field:{alias:"threadType",args:null,kind:"ScalarField",name:"thread_type",storageKey:null},action:"THROW",path:"threadType"},{kind:"RequiredField",field:{alias:null,args:[{kind:"Literal",name:"first",value:2}],concreteType:"LS_Participant_Connection",kind:"LinkedField",name:"participants",plural:!1,selections:[{kind:"RequiredField",field:{alias:null,args:null,concreteType:"LS_Participant_Connection_Edge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}],storageKey:null},action:"THROW",path:"participants.edges"}],storageKey:"participants(first:2)"},action:"THROW",path:"participants"}],type:"LS_Thread",abstractKey:null};e.exports=a}),null);
__d("LS_CommunityFolder",[],(function(a,b,c,d,e,f){function a(a){return a.context}function b(a){return a.value}function c(a){return a.value.folderId}function d(a){return a.value.fbGroupId}function e(a){return a.value.name}function g(a){return a.value.description}function h(a){return a.value.memberCount}function i(a){return a.value.pictureUrl}function j(a){return a.value.pictureUrlFallback}function k(a){return a.value.pictureUrlExpirationTimestampMs}function l(a){return a.value.joiningChannelTaskId}function m(a){return a.value.afterJoiningOpenChannelId}function n(a){return a.value.capabilities}function o(a){return a.value.capabilities2}function p(a){return a.value.capabilities3}function q(a){return a.value.notificationSetting}function r(a){return a.value.notificationMutedUntil}function s(a){return a.value.sendsBlockedUntil}function t(a){return a.value.isHidden}function u(a){return a.value.hasSeenDisablingAlert}function v(a){return a.value.inviteLink}function w(a){return a.value.communityType}function x(a){return a.value.directInviteLink}function y(a){return a.value.enableState}function z(a){return a.value.takedownState}function A(a){return a.value.fbGroupType}function B(a){return a.value.threadCount}function C(a){return a.value.disableTimestamp}function D(a){return a.value.readTimestampMs}function E(a){return a.value.inviteStatus}function F(a){return a.value.blockedFromCommunityMemberCount}function G(a){return a.value.categoryCount}function H(a){return a.value.snippetText}function I(a){return a.value.coverPicUrl}function J(a){return a.value.coverPicUrlFallback}function K(a){return a.value.coverPicUrlExpirationTimestampMs}function L(a){return a.value.invitedThreadId}function M(a){return a.value.fbGroupUserParticipationApprovalStatus}function N(a){return a.value.ccAdminAssistRegistrationStatus}function O(a){return a.value.pauseStatus}function P(a){return a.value.isMember}f.__context=a;f.__lightspeed_table_row=b;f.folder_id=c;f.fb_group_id=d;f.name=e;f.description=g;f.member_count=h;f.picture_url=i;f.picture_url_fallback=j;f.picture_url_expiration_timestamp_ms=k;f.joining_channel_task_id=l;f.after_joining_open_channel_id=m;f.capabilities=n;f.capabilities_2=o;f.capabilities_3=p;f.notification_setting=q;f.notification_muted_until=r;f.sends_blocked_until=s;f.is_hidden=t;f.has_seen_disabling_alert=u;f.invite_link=v;f.community_type=w;f.direct_invite_link=x;f.enable_state=y;f.takedown_state=z;f.fb_group_type=A;f.thread_count=B;f.disable_timestamp=C;f.read_timestamp_ms=D;f.invite_status=E;f.blocked_from_community_member_count=F;f.category_count=G;f.snippet_text=H;f.cover_pic_url=I;f.cover_pic_url_fallback=J;f.cover_pic_url_expiration_timestamp_ms=K;f.invited_thread_id=L;f.fb_group_user_participation_approval_status=M;f.cc_admin_assist_registration_status=N;f.pause_status=O;f.is_member=P}),66);
__d("LS_Contact__has_capability",["LSContactBitOffset","LSContactCapabilityBitOffset","LSContactHasCapability__has_capability.graphql","ReactiveExecutorResolverFragments"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,e){e=e.capability;a=d("ReactiveExecutorResolverFragments").readFragment(h!==void 0?h:h=b("LSContactHasCapability__has_capability.graphql"),a);var f=a.capabilities;a=a.capabilities_2;return e!=="%future added value"&&d("LSContactBitOffset").has(c("LSContactCapabilityBitOffset")[e],{capabilities:(e=f)!=null?e:void 0,capabilities2:(f=a)!=null?f:void 0})}g.has_capability=a}),98);
__d("LS_MiActMappingTable",[],(function(a,b,c,d,e,f){function a(a){return a.context}function b(a){return a.value}function c(a){return a.value.serverThreadKey}function d(a){return a.value.clientThreadPk}function e(a){return a.value.jid}f.__context=a;f.__lightspeed_table_row=b;f.server_thread_key=c;f.client_thread_pk=d;f.jid=e}),66);
__d("LS_MiActMappingTable_Connection",["LSRelayConnections"],(function(a,b,c,d,e,f,g){function a(a){return a.value.edges}function b(a){return a.value.page_info}function c(a){return d("LSRelayConnections").keyToCursor(a.value[0])}function e(a){return{context:a.context,value:a.value[1]}}g.edges=a;g.page_info=b;g.cursor=c;g.node=e}),98);
__d("LS_Thread__computed_thread_title",["fbt","CurrentEnvironment","I64","LSMessagingThreadTypeUtil","LSThreadComputedThreadTitle__computed_thread_title.graphql","ReactiveExecutorResolverFragments","intlList","mwCMIsAnyCMThread","recoverableViolation"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j;function a(a){a=d("ReactiveExecutorResolverFragments").readFragment(i!==void 0?i:i=b("LSThreadComputedThreadTitle__computed_thread_title.graphql"),a);var c=a.__context,e=a.participants,f=a.thread_name;a=a.thread_type;return f!=null?f:l(a,e.edges.map(function(a){return a.node}),c.actorID)}function k(a,b){return a.filter(function(a){return(j||(j=d("I64"))).to_string(a.contact_id)!==b}).map(function(a){return a.contact==null?null:{first_name:a.contact.first_name,name:a.contact.name,nickname:a.nickname,rank:a.contact.rank}}).filter(Boolean).sort(function(a,b){return b.rank-a.rank})}function l(a,b,e){if(c("mwCMIsAnyCMThread")(a)){c("recoverableViolation")("community message should not use computed thread title","messenger_comet");return n}if(b.length===0){c("recoverableViolation")("No participants in thread","lightspeed_resolvers");return d("LSMessagingThreadTypeUtil").isGroup(a)?n:m}if(b.length===1){return(a=(a=b[0].contact)==null?void 0:a.name)!=null?a:m}a=k(b,e);var f=a.length>2;b=a.map(function(a){return o(a,f)});a.length>7&&b.push(String(h._("__JHASH__p-5gRHawKL0__JHASH__")));return c("intlList")(b,c("intlList").CONJUNCTIONS.AND,c("intlList").DELIMITERS.COMMA).toString()}var m=(c("CurrentEnvironment").workplacedotcom?h._("__JHASH__WW0S3bu0Fvp__JHASH__"):c("CurrentEnvironment").instagramdotcom?h._("__JHASH__PghB4SzSbNm__JHASH__"):c("CurrentEnvironment").messengerdotcom?h._("__JHASH__I44_DhMSYWP__JHASH__"):h._("__JHASH__AaE4hJExM0x__JHASH__")).toString(),n=(c("CurrentEnvironment").workplacedotcom?h._("__JHASH__2SG6KMU4AFK__JHASH__"):c("CurrentEnvironment").instagramdotcom?h._("__JHASH__wXDLgcJTU51__JHASH__"):c("CurrentEnvironment").messengerdotcom?h._("__JHASH__Kz0QpoJHutZ__JHASH__"):h._("__JHASH__CGopUYR1PJW__JHASH__")).toString();function o(a,b){var c=a.first_name,d=a.name;a=a.nickname;b===void 0&&(b=!1);if(a!=null)return a;if(c!=null&&b)return c;return d!=null?d:m}g.computed_thread_title=a}),226);
__d("LS_Thread__has_capability",["LSThreadBitOffset","LSThreadCapabilityBitOffset","LSThreadHasCapability__has_capability.graphql","ReactiveExecutorResolverFragments"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,e){e=e.capability;a=d("ReactiveExecutorResolverFragments").readFragment(h!==void 0?h:h=b("LSThreadHasCapability__has_capability.graphql"),a);var f=a.capabilities,g=a.capabilities2,i=a.capabilities3,j=a.capabilities4;a=a.threadType;return e!=="%future added value"&&d("LSThreadBitOffset").has(c("LSThreadCapabilityBitOffset")[e],{capabilities:f,capabilities2:g,capabilities3:i,capabilities4:j,threadType:a})}g.has_capability=a}),98);
__d("LS_Thread__has_messages_ranges_v2",["LSRelayLiveResolvers","ReQL"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=a.context;a=a.value;var c=a.threadKey;return d("LSRelayLiveResolvers").mapLiveState(d("LSRelayLiveResolvers").iterableToMappedValueLiveResolver(b,function(a){return d("ReQL").fromTableDescending(a.tables.messages_ranges_v2__generated).getKeyRange(c).take(1)},function(a){return a!=null}),function(a){return a==null?void 0:a.value})}g.computed_has_messages_ranges_v2=a}),98);
__d("LS_Thread__is_cutover_thread",["LSRelayLiveResolvers","ReQL"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=a.context;a=a.value;var c=a.threadKey;return d("LSRelayLiveResolvers").mapLiveState(d("LSRelayLiveResolvers").iterableToMappedValueLiveResolver(b,function(a){return d("ReQL").fromTableAscending(a.tables.cutover_threads).getKeyRange(c).take(1)},function(a){return a!=null}),function(a){return a==null?void 0:a.value})}g.is_cutover_thread=a}),98);
__d("LS_Thread__is_page",["I64","LSContactType","LSIntEnum","LSThreadIsPage__is_page.graphql","ReactiveExecutorResolverFragments"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;function a(a){a=d("ReactiveExecutorResolverFragments").readFragment(h!==void 0?h:h=b("LSThreadIsPage__is_page.graphql"),a);a=a.otherParticipant;a=a==null?void 0:(a=a.contact)==null?void 0:a.contactType;return a!=null&&(i||(i=d("I64"))).equal(a,(j||(j=d("LSIntEnum"))).ofNumber(c("LSContactType").PAGE))}g.computed_is_page=a}),98);
__d("LS_Thread__is_secure_thread",["LSMessagingThreadTypeUtil","LSThreadIsSecureThread__is_secure_thread.graphql","ReactiveExecutorResolverFragments"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){a=d("ReactiveExecutorResolverFragments").readFragment(h!==void 0?h:h=b("LSThreadIsSecureThread__is_secure_thread.graphql"),a);a=a.thread_type;return d("LSMessagingThreadTypeUtil").isArmadilloSecure(a)}g.is_secure_thread=a}),98);
__d("LS_Thread__other_participant_or_self",["I64","LSMessagingThreadTypeUtil","LSRelayLiveResolvers","LSThreadOtherParticipantOrSelf__other_participant_or_self.graphql","ReQL","ReactiveExecutorResolverFragments"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a){a=d("ReactiveExecutorResolverFragments").readFragment(h!==void 0?h:h=b("LSThreadOtherParticipantOrSelf__other_participant_or_self.graphql"),a);var c=a.__context,e=a.participants.edges,f=a.threadKey;a=a.threadType;if(!d("LSMessagingThreadTypeUtil").isOneToOne(a))return d("LSRelayLiveResolvers").nullValueLiveState;var g=c.actorID;return e.length===1?d("LSRelayLiveResolvers").iterableToFirstValueLiveResolver(c,function(a){return d("ReQL").fromTableAscending(a.tables.participants).getKeyRange(f)}):d("LSRelayLiveResolvers").iterableToFirstValueLiveResolver(c,function(a){return d("ReQL").fromTableAscending(a.tables.participants).getKeyRange(f).filter(function(a){a=a.contactId;return(i||(i=d("I64"))).to_string(a)!==g})})}g.other_participant_or_self=a}),98);
__d("LS_Thread__other_participants_MAY_CAUSE_OVERFETCHING",["I64","LSRelayLiveResolvers","ReQL"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){var b=a.context,c=a.value.threadKey;return d("LSRelayLiveResolvers").iterableToPluralFieldLiveResolver_MAY_CAUSE_OVERFETCHING(b,function(a){return d("ReQL").fromTableAscending(a.tables.participants).getKeyRange(c).filter(function(a){a=a.contactId;return(h||(h=d("I64"))).to_string(a)!==b.actorID})})}g.other_participants_MAY_CAUSE_OVERFETCHING=a}),98);
__d("LS_Viewer",["I64","LSFeatureLimitsType","LSIntEnum","LSRelayLiveResolvers","ReQL"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a){return a.context.actorID}function b(a){a=a.context;var b=(h||(h=d("I64"))).of_float(Date.now()/1e3);return d("LSRelayLiveResolvers").mapLiveState(d("LSRelayLiveResolvers").iterableToMappedValueLiveResolver(a,function(a){return d("ReQL").fromTableAscending(a.tables.feature_limits).filter(function(a){return k(a)&&(h||(h=d("I64"))).gt(a.expirationTimestampSeconds,b)}).take(1)},function(a){return a!=null}),function(a){return a==null?void 0:a.value})}var j=[(i||(i=d("LSIntEnum"))).ofNumber(c("LSFeatureLimitsType").READ_ONLY),i.ofNumber(c("LSFeatureLimitsType").GENERIC_READ_ONLY_BLOCK),i.ofNumber(c("LSFeatureLimitsType").MESSAGE_SEND)],k=function(a){return j.some(function(b){return(h||(h=d("I64"))).equal(b,a.type_)})};function e(a){a=a.context;return d("LSRelayLiveResolvers").iterableToFirstValueLiveResolver(a,function(a){return d("ReQL").fromTableAscending(a.tables.user_visible_errors).filter(function(a){return a.presentationStyle==="banner"})})}g.actor_id=a;g.is_read_only_feature_limited=b;g.user_visible_error_banner=e}),98);
__d("LsFrxMessengerFeedbackProactiveWarningBannerPrimaryActionTappedFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("2898");b=d("FalcoLoggerInternal").create("ls_frx_messenger_feedback_proactive_warning_banner_primary_action_tapped",a);e=b;g["default"]=e}),98);
__d("LsFrxMessengerFeedbackProactiveWarningBannerSecondaryActionTappedFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("2899");b=d("FalcoLoggerInternal").create("ls_frx_messenger_feedback_proactive_warning_banner_secondary_action_tapped",a);e=b;g["default"]=e}),98);
__d("LsFrxMessengerFeedbackProactiveWarningBannerShownFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("2900");b=d("FalcoLoggerInternal").create("ls_frx_messenger_feedback_proactive_warning_banner_shown",a);e=b;g["default"]=e}),98);
__d("LsReplyRenderedFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("1743878");b=d("FalcoLoggerInternal").create("ls_reply_rendered",a);e=b;g["default"]=e}),98);
__d("MAWCreateGroupThread",["fbt","I64","LSFactory","LSIssueNewErrorStoredProcedure","LSMessagingThreadAttributionType","MAWBridgeSendAndReceive","MAWJobDefinitions","MAWTimedJob","MWSharedMsgLogUtils","WAJobOrchestratorTypes","asyncToGeneratorRuntime","promiseDone","sendToSentQPLLogger","unrecoverableViolation"],(function(a,b,c,d,e,f,g,h){"use strict";var i;function j(a){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.db,e=a.deduplicationKey,g=a.isDualSend;g=g===void 0?!1:g;var j=a.offlineThreadingId,k=a.participantIds;a=a.threadName;j=j!=null?(i||(i=d("I64"))).to_string(j):void 0;var l="msgr",m=d("sendToSentQPLLogger").markSendToSentStart();d("sendToSentQPLLogger").addSendToSentAnnotations(m,yield d("MWSharedMsgLogUtils").getSendToSentBaseAnnotations(d("MWSharedMsgLogUtils").getMessageTypeParams({isGroupInvite:!0}),c("LSMessagingThreadAttributionType").UNKNOWN));e=(yield d("MAWTimedJob").TimedUIJobStarters.waitUntilCompleted(d("MAWJobDefinitions").createStartJobInfo("createGroup",{extras:{clientThreadKey:j,deduplicationKey:e,isDualSend:g,platform:l},key:j,s2sInstanceKey:m,scheduleConfig:{priority:d("WAJobOrchestratorTypes").JOB_PRIORITY.UI_ACTION},subject:a,uniqKey:j,users:k})));a=e.error;j=e.value;if(a==null&&j!=null&&j.type===l){d("sendToSentQPLLogger").markSendToSentSuccess(m);return{created:!0,jid:j.chatJid}}if(!g){var n=h._("__JHASH__Q8EKHlLB3en__JHASH__").toString();c("promiseDone")(b.runInTransaction(function(a){return c("LSIssueNewErrorStoredProcedure")(c("LSFactory")(a),{errorBodyText:n,errorTitleText:n})},"readwrite",void 0,void 0,f.id+":102"))}d("sendToSentQPLLogger").markSendToSentFail(m,"failed_to_send_group_invite");throw c("unrecoverableViolation")("Unable to create group","maw_threads")});return k.apply(this,arguments)}function a(a){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.deduplicationKey;if(b==null)return j(a);b=(yield d("MAWBridgeSendAndReceive").sendAndReceive("backend","getThreadIdByDeduplicationKey",{deduplicationKey:b}));return b!=null?{created:!1,jid:b.jid}:j(a)});return l.apply(this,arguments)}g["default"]=a}),226);
__d("MAWCreateOptimisticSecureMessage",["I64","LSAuthorityLevel","LSIntEnum","LSMessageReplySourceType","LSMessageReplySourceTypeV2","LSMessageSendStatus","LSQuickReplyType","LSReplyMessageAttachmentType","LSReplyMessageStatus","MAWBridgeBuildMsg","MAWMsgReplySnippet","MessagingAttachmentType","QPLUserFlow","ReQL","asyncToGeneratorRuntime","gkx","isMWBumpMessage","qpl","sendToSentQPLLogger"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function j(a,b,c,d){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e,f){if(e==null)return[void 0,void 0];var g=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.messages).getKeyRange(b,e.timestampMs,e.messageId)));c("QPLUserFlow").addPoint(c("qpl")._(25313175,"1551"),"get_reply_msg_end",{instanceKey:f});a=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.attachments).getKeyRange(b,e.messageId)));c("QPLUserFlow").addPoint(c("qpl")._(25313175,"1551"),"get_reply_attachment_end",{instanceKey:f});return[g,a]});return k.apply(this,arguments)}function l(a,b){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){a=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.tables.contacts).getKeyRange(b)));return a==null?void 0:a.firstName});return m.apply(this,arguments)}function n(a,b,c){return o.apply(this,arguments)}function o(){o=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e){if(b==null)return;var f=c("isMWBumpMessage")(b)&&b.replyToUserId!=null?b.replyToUserId:b.senderId;a=(yield l(a,f));return(b=d("MAWMsgReplySnippet").buildLocalizedReplySnippet({isAuthorMe:!0,isDeletedMsg:b.replyStatus===c("LSReplyMessageStatus").DELETED,recipientName:a,replySenderIsMe:(h||(h=d("I64"))).equal(f,e)}))==null?void 0:b.toString()});return o.apply(this,arguments)}function p(a){if(a==null)return;var b=a.attachmentType;return(h||(h=d("I64"))).equal(b,(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").IMAGE))||(h||(h=d("I64"))).equal(b,(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").STICKER))?a.previewUrl:void 0}function q(a){if(a!=null){if((h||(h=d("I64"))).equal(a==null?void 0:a.attachmentType,(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").IMAGE)))return(i||(i=d("LSIntEnum"))).ofNumber(c("LSReplyMessageAttachmentType").PHOTO);if((h||(h=d("I64"))).equal(a==null?void 0:a.attachmentType,(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").STICKER)))return(i||(i=d("LSIntEnum"))).ofNumber(c("LSReplyMessageAttachmentType").STICKER);if((h||(h=d("I64"))).equal(a==null?void 0:a.attachmentType,(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").VIDEO)))return(i||(i=d("LSIntEnum"))).ofNumber(c("LSReplyMessageAttachmentType").VIDEO);if((h||(h=d("I64"))).equal(a==null?void 0:a.attachmentType,(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").ANIMATED_IMAGE)))return(i||(i=d("LSIntEnum"))).ofNumber(c("LSReplyMessageAttachmentType").GIF);return(h||(h=d("I64"))).equal(a==null?void 0:a.attachmentType,(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").EPHEMERAL_IMAGE))||(h||(h=d("I64"))).equal(a==null?void 0:a.attachmentType,(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").EPHEMERAL_VIDEO))?(i||(i=d("LSIntEnum"))).ofNumber(c("LSReplyMessageAttachmentType").EPHEMERAL_RAVEN_MESSAGE):(i||(i=d("LSIntEnum"))).ofNumber(c("LSReplyMessageAttachmentType").OTHER)}}function a(a,b,c,d,e,f,g,h,i,j,k,l,m){return r.apply(this,arguments)}function r(){r=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e,f,g,h,k,l,m,o,r,s,t){var u=(yield d("sendToSentQPLLogger").measureSendToSentPerformance("optimistic_message_get_reply",l,function(){return j(b,h,f,l)})),v=u[0];u=u[1];g=d("MAWBridgeBuildMsg").buildOptimisticMessage(g,v,m);m=(yield d("sendToSentQPLLogger").measureSendToSentPerformance("optimistic_message_reply_snippet",l,function(){return n(a,v,e)}));g=babelHelpers["extends"]({},g,{authorityLevel:(i||(i=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").OPTIMISTIC),displayedContentTypes:i.ofNumber(s),hasQuickReplies:!1,hotEmojiSize:k,isAdminMessage:!1,isCollapsed:!1,isUnsent:!1,messageId:o,offlineThreadingId:c("gkx")("23990")&&t!=null?t:o,primarySortKey:r,quickReplyType:i.ofNumber(c("LSQuickReplyType").NONE),replyAttachmentType:q(u),replyMediaPreviewHeight:u==null?void 0:u.previewHeight,replyMediaPreviewWidth:u==null?void 0:u.previewWidth,replyMediaUrl:p(u),replyMediaUrlMimeType:u==null?void 0:u.playableUrlMimeType,replySnippet:m,replySourceId:f==null?void 0:f.messageId,replySourceType:f!=null?(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessageReplySourceType").MESSAGE):void 0,replySourceTypeV2:f!=null?(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessageReplySourceTypeV2").MESSAGE):void 0,senderId:e,sendStatus:i.ofNumber(c("LSMessageSendStatus").SENDING_TO_SERVER),sendStatusV2:i.ofNumber(1),textHasLinks:!1,threadKey:h,timestampMs:r,transportKey:"WhatsApp",viewFlags:i.ofNumber(0)});return g});return r.apply(this,arguments)}g.buildOptimisticLsMessage=a}),98);
__d("MAWOptimisticMessageUtils",["I64","LSAuthorityLevel","LSHotEmojiSize","LSIntEnum","MAWAckLevel","MAWAdminMsg","MAWBridgeBuildMsgMentions","MAWBumpThread","MAWLocalizationType","MAWMsgType","MessagingAttachmentType","ReQL","WAJids","WATimeUtils","asyncToGeneratorRuntime","cr:2472","gkx"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(){return d("WATimeUtils").millisTime()}function j(a,b){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){a=(yield d("ReQL").firstAsync(d("ReQL").fromTableDescending(a.threads.index("lastActivityTimestampMs"))));return a==null||(h||(h=d("I64"))).equal(a.threadKey,b)?null:(h||(h=d("I64"))).add(a.lastActivityTimestampMs,h.one)});return k.apply(this,arguments)}function e(a,b){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e){var f=e.hotEmojiSize,g=e.mentionedJids,k=e.messageText,l=e.senderId,n=e.threadKey;e=e.ts;k=b("cr:2472")==null?k:b("cr:2472").unvault(k);f=f!=null&&(h||(h=d("I64"))).equal(f,(i||(i=d("LSIntEnum"))).ofNumber(c("LSHotEmojiSize").SMALL))&&k==="\ud83d\udc4d";f=f?"(Y)":m(k,g);k=d("MAWAdminMsg").buildLocalizedString([f],[],d("MAWLocalizationType").CURRENT_USER_SEND_TEXT);g=null;c("gkx")("7698")?g=(yield j(a,n)):g=e;yield d("MAWBumpThread").threadMutation_DEPRECATED({description:"MAWOptimisticMessageUtils",lastActivityTs:g,lastReadTs:g,snippet:k,snippetSenderContactId:l,threadKey:n,txn:a})});return l.apply(this,arguments)}function m(a,b){b=d("MAWBridgeBuildMsgMentions").buildThreadSnippetWithMentions(a,b,[],d("MAWLocalizationType").CURRENT_USER_SEND_TEXT);var c=b[0];b[1];return(b=c)!=null?b:a}function f(a,b){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c=b.optimisticMediaAttachment,e=b.senderId,f=b.threadKey;b=b.timestampMsI64;c=r(c.type);c!=null&&(yield d("MAWBumpThread").threadMutation_DEPRECATED({description:"MAWCreateOptimisticSecureMessageWithAttachment",lastActivityTs:b,lastReadTs:b,snippet:c,snippetSenderContactId:e,threadKey:f,txn:a}))});return n.apply(this,arguments)}function o(a){var b=a.ephemeralSettings,c=a.externalId,e=a.threadJid;a=a.ts;return{ack:d("MAWAckLevel").ACK.partialOptimistic,altIndex:void 0,author:d("WAJids").AUTHOR_ME,ephemeralSetting:(b=b)!=null?b:void 0,externalId:c,isForwarded:!1,specialTextSize:void 0,threadJid:e,ts:d("WATimeUtils").castMilliSecondsToUnixTime(a)}}function p(a){var b=a.content,c=a.initiatingSource,d=a.isFirstMsg,e=a.mentionedJids,f=a.optimisticMsg,g=a.quote,h=a.specialTextSize;a=a.threadSource;return{content:b,initiatingSource:c,isFirstMsg:d,isForwarded:!1,mentionedJids:e==null?void 0:e.slice(),openMessageOtid:void 0,openMessageParticipantCount:void 0,optimisticMsg:f,participantCount:void 0,quote:g,source:a,specialTextSize:h}}function q(a){var b=a.optimisticMediaAttachment,e=a.threadKey,f=a.timestampMsI64;e={attachmentFbid:a.offlineAttachmentId,attachmentIndex:(h||(h=d("I64"))).zero,attachmentType:a.attachmentType,authorityLevel:(i||(i=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").OPTIMISTIC),filename:b==null?void 0:b.filename,hasMedia:!h.equal(a.attachmentType,i.ofNumber(c("MessagingAttachmentType").XMA)),hasXma:h.equal(a.attachmentType,i.ofNumber(c("MessagingAttachmentType").XMA)),isSharable:!1,messageId:a.messageExternalId,offlineAttachmentId:a.offlineAttachmentId,subtitleText:a.subtitleText,threadKey:e,timestampMs:f,titleText:a.titleText,transportKey:"WhatsApp"};if(b){e=babelHelpers["extends"]({},e,{filesize:c("gkx")("4798")?(h||(h=d("I64"))).of_float(b.file.size):void 0,previewUrl:b.url});if(b.type==="image"||b.type==="animated_image"||b.type==="video"||b.type==="sticker"){e=babelHelpers["extends"]({},e,{previewHeight:((f=b.thumbnailSpec)==null?void 0:f.height)?(h||(h=d("I64"))).of_float((a=b.thumbnailSpec)==null?void 0:a.height):void 0,previewWidth:((f=b.thumbnailSpec)==null?void 0:f.width)?(h||(h=d("I64"))).of_float((a=b.thumbnailSpec)==null?void 0:a.width):void 0})}}return e}function r(a){switch(a){case"animated_image":return d("MAWAdminMsg").buildLocalizedString([],[],d("MAWLocalizationType").CURRENT_USER_SEND_GIF);case"image":return d("MAWAdminMsg").buildLocalizedString([],[],d("MAWLocalizationType").CURRENT_USER_SEND_IMAGE);case"video":return d("MAWAdminMsg").buildLocalizedString([],[],d("MAWLocalizationType").CURRENT_USER_SEND_VIDEO);case"audio":return d("MAWAdminMsg").buildLocalizedString([],[],d("MAWLocalizationType").CURRENT_USER_SEND_AUDIO);case"document":return d("MAWAdminMsg").buildLocalizedString([],[],d("MAWLocalizationType").CURRENT_USER_SEND_ATTACHMENT);case"sticker":return d("MAWAdminMsg").buildLocalizedString([],[],d("MAWLocalizationType").CURRENT_USER_SEND_STICKER);default:return null}}function s(a){switch(a){case(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").STICKER):return d("MAWMsgType").MSG_TYPE.STICKER;case(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").IMAGE):return d("MAWMsgType").MSG_TYPE.IMAGE;case(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").ANIMATED_IMAGE):return d("MAWMsgType").MSG_TYPE.GIF;case(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").VIDEO):return d("MAWMsgType").MSG_TYPE.VIDEO;case(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").AUDIO):return d("MAWMsgType").MSG_TYPE.PTT;default:return d("MAWMsgType").MSG_TYPE.DOCUMENT_FILE}}function t(a){if(a==null)return;if((h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(c("LSHotEmojiSize").SMALL)))return 1;if((h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(c("LSHotEmojiSize").MEDIUM)))return 2;if((h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(c("LSHotEmojiSize").LARGE)))return 3}g.getOptimisticMessageTimestamp=a;g.getOptimisticThreadBumpTimestamp=j;g.optimisticBumpThread=e;g.optimisticBumpThreadMedia=f;g.buildMAWOptimisticBaseMsg=o;g.buildMAWBaseSendMsgArgs=p;g.buildOptimisticAttachment=q;g.lsAttachmentTypeToMsgType=s;g.getSpecialTextSize=t}),98);
__d("MAWCreateOptimisticSecureMessageWithAttachment",["I64","MAWCreateOptimisticSecureMessage","MAWOptimisticMessageUtils","MAWSendFileMsgTypes","QPLUserFlow","asyncToGeneratorRuntime","qpl"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b,c,d,e,f,g,h,j,k,l,m){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e,f,g,i,k,l,m,n,o,p){m(o);m=d("MAWOptimisticMessageUtils").getOptimisticMessageTimestamp();var q=(h||(h=d("I64"))).of_float(m);a=(yield d("MAWCreateOptimisticSecureMessage").buildOptimisticLsMessage(a,b,e,f,"",g,void 0,l,void 0,o,q,j(k.type)));f=p==null?void 0:p.get(d("MAWSendFileMsgTypes").toOfflineAttachmentIDFromString(i));f!=null&&(a=babelHelpers["extends"]({},a,{groupId:f.groupId,groupIndex:(h||(h=d("I64"))).of_float(f.groupIndex),groupSize:h.of_float(f.groupSize)}));yield b.messages.add(a);p=d("MAWOptimisticMessageUtils").buildOptimisticAttachment({attachmentType:n,messageExternalId:o,offlineAttachmentId:i,optimisticMediaAttachment:k,senderId:e,threadKey:g,timestampMsI64:q});yield b.attachments.add(p);c("QPLUserFlow").addPoint(c("qpl")._(25313175,"1551"),"after_create_optimistic_message",{instanceKey:l});yield d("MAWOptimisticMessageUtils").optimisticBumpThreadMedia(b,{optimisticMediaAttachment:k,senderId:e,threadKey:g,timestampMsI64:q});return{messageExternalId:o,offlineAttachmentId:d("MAWSendFileMsgTypes").toOfflineAttachmentIDFromString(i),offlineMsgTimestamp:m}});return i.apply(this,arguments)}function j(a){switch(a){case"animated_image":return 16384;case"image":return 2;case"video":return 2;case"audio":return 4;case"document":return 64;case"sticker":return 4096;default:return 1}}g.createOptimisticMessageWithAttachment=a}),98);
__d("MAWDumbRangeDataSource",["I64","ReplayLastSubject","asyncToGeneratorRuntime","relay-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=function(){this.getOrCreateMessageRangeCoveringCursor=function(a,b,c){return d("relay-runtime").Observable.from(new(d("ReplayLastSubject").ReplayLastSubject)({hasMoreAfter:!1,hasMoreBefore:!1,isLoadingAfter:!1,isLoadingBefore:!1,maxMessageId:"",maxTimestampMs:(h||(h=d("I64"))).max_int,minMessageId:(b=a.messageId)!=null?b:"",minTimestampMs:h.min_int,threadKey:a.threadKey}))},this.extendRange=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){});return function(b,c,d){return a.apply(this,arguments)}}()},j;function a(){j==null&&(j=new i());return j}g["default"]=a}),98);
__d("MAWMessageRangeDataSource",["I64","LSDatabaseSingleton","MAWMiActOnActThreadReady","MAWPutMessagesToDB","MAWSecureLocalDBFetch","MAWTimedBridge","MLV2DataSourceLogger","MessageRangeSet","Promise","WATagsLogger","asyncToGeneratorRuntime","err","findMsgsWithMinAndMaxTimestamp","gkx","nullthrows"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["MAWMessageRangeDataSource: Failed to fetch messages from worker due to ",". Error: ",""]);k=function(){return a};return a}var l=1e4,m=5,n=function(a){var e=this;this.$2=new(c("MessageRangeSet"))();this.$3=m;this.getOrCreateMessageRangeCoveringCursor=function(a,b,c){b==null?void 0:b.annotateMessageRangesDataSource("MAWMessageRangeDataSource");b==null?void 0:b.markQPLPoint("maw_get_or_create_range_start");c=e.$2.getRangeForTimestamp(a.timestampMs);if(c!=null){b==null?void 0:b.markQPLPoint("maw_preexisting_range");b==null?void 0:b.markQPLPoint("maw_get_or_create_range_end");return c}c=(j||(j=d("I64"))).equal(a.timestampMs,j.max_int);c={hasMoreAfter:!c,hasMoreBefore:!0,isLoadingAfter:!1,isLoadingBefore:!1,maxMessageId:(c=a.messageId)!=null?c:"",maxTimestampMs:a.timestampMs,minMessageId:(c=a.messageId)!=null?c:"",minTimestampMs:a.timestampMs,threadKey:e.$1};a=e.$2.upsertRange(c);b==null?void 0:b.markQPLPoint("maw_range_created");b==null?void 0:b.markQPLPoint("maw_get_or_create_range_end");return a};this.extendRange=function(a,c,f){var g=d("MLV2DataSourceLogger").getMLV2LoggerForThread(e.$1,c);a=e.$2.getRangeForTimestamp(a.minTimestampMs);if(a==null){g==null?void 0:g.markQPLPoint("extend_range_canceled");return(h||(h=b("Promise"))).resolve()}var i=a.value;if(c==="asc"&&(!i.hasMoreAfter||i.isLoadingAfter)){g==null?void 0:g.markQPLPoint("extend_range_canceled");return(h||(h=b("Promise"))).resolve()}if(c==="desc"&&(!i.hasMoreBefore||i.isLoadingBefore)){g==null?void 0:g.markQPLPoint("extend_range_canceled");return(h||(h=b("Promise"))).resolve()}a.next(babelHelpers["extends"]({},i,{isLoadingAfter:i.isLoadingAfter||c==="asc",isLoadingBefore:i.isLoadingBefore||c==="desc"}));return e.$4(a.value,c,f)};this.$4=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,f){var g=d("MLV2DataSourceLogger").getMLV2LoggerForThread(e.$1,b);g==null?void 0:g.markQPLPoint("maw_wait_act_thread_start");var h=(yield d("MAWMiActOnActThreadReady").waitForACTThreadReady((yield (i||(i=d("LSDatabaseSingleton"))).LSDatabaseSingleton).tables,e.$1,"MAWMessageRangeDataSourceForThread"));h=h.chatJid;g==null?void 0:g.markQPLPoint("maw_wait_act_thread_end");g==null?void 0:g.markQPLPoint("wait_secure_local_db_fetch_start");h=(yield c("MAWSecureLocalDBFetch")({actionType:"user",chatJid:h,config:{admin:!0,editMsgHistory:!0,media:!0,reactions:!0,receiverFetch:!0,xma:!0},count:20,direction:o(b),offsetMsg:{includeOriginalMsg:!0,messageId:b==="asc"?a.maxMessageId:a.minMessageId},timestampMs:b==="asc"?a.maxTimestampMs:a.minTimestampMs},{timeoutMs:l}));if(h.success===!1){var m=h.payload;m=m==null?"unknown":"["+m.name+"]: "+m.message;d("WATagsLogger").TAGS(["maw_message_core","MAWMessageRangeDataSource"]).ERROR(k(),h.error,m);if(c("gkx")("7409")&&h.payload instanceof d("MAWTimedBridge").MAWBridgeTimeoutError&&e.$3>0){g==null?void 0:g.markQPLPoint("local_fetch_response_timed_out");e.$3-=1;e.$2.upsertRange(babelHelpers["extends"]({},a,{isLoadingAfter:!1,isLoadingBefore:!1}));return}g==null?void 0:g.markQPLPoint("wait_secure_local_db_fetch_failed");throw(m=h.payload)!=null?m:c("err")("Failed to fetch messages from worker")}var n=h.value;g==null?void 0:g.markQPLPoint("insert_msgs_to_lsdb_start");yield d("MAWPutMessagesToDB").insertMessageResponseIntoDatabase(yield i.LSDatabaseSingleton,n,f,g==null?void 0:g.getInstanceKey());g==null?void 0:g.markQPLPoint("insert_msgs_to_lsdb_end");g==null?void 0:g.markQPLPoint("maw_upsert_range_start");m=c("findMsgsWithMinAndMaxTimestamp")(n.msgs);var p=m[0],q=m[1];h=babelHelpers["extends"]({},a,function(){var c;switch(b){case"asc":return{hasMoreAfter:n.hasMoreAfter,isLoadingAfter:!1,maxMessageId:(c=q==null?void 0:q.msgId)!=null?c:a.maxMessageId,maxTimestampMs:(j||(j=d("I64"))).max(a.maxTimestampMs,(q==null?void 0:q.sortOrderMs)!=null?(j||(j=d("I64"))).of_float(q==null?void 0:q.sortOrderMs):a.maxTimestampMs)};case"desc":return{hasMoreBefore:n.hasMoreBefore,isLoadingBefore:!1,minMessageId:(c=p==null?void 0:p.msgId)!=null?c:a.minMessageId,minTimestampMs:(j||(j=d("I64"))).min(a.minTimestampMs,(p==null?void 0:p.sortOrderMs)!=null?(j||(j=d("I64"))).of_float(p==null?void 0:p.sortOrderMs):a.minTimestampMs)}}}());e.$2.upsertRange(h);g==null?void 0:g.markQPLPoint("maw_upsert_range_end")});return function(b,c,d){return a.apply(this,arguments)}}();this.$1=a};a=function(){function a(){var a=this;this.$1=new Map();this.getOrCreateMessageRangeCoveringCursor=function(b,c,d){var e=b.threadKey;return a.$2(e).getOrCreateMessageRangeCoveringCursor(b,c,d)};this.extendRange=function(b,c,d){var e=b.threadKey;return a.$2(e).extendRange(b,c,d)}}var b=a.prototype;b.$2=function(a){var b=(j||(j=d("I64"))).to_string(a);if(!this.$1.has(b)){a=new n(a);this.$1.set(b,a)}return c("nullthrows")(this.$1.get(b))};return a}();function o(a){switch(a){case"asc":return"after";case"desc":return"before";case"point":return"point";default:return"point"}}e=new a();g["default"]=e}),98);
__d("combineLatestWith",["relay-runtime"],(function(a,b,c,d,e,f,g){"use strict";function a(){for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];return d("relay-runtime").Observable.create(function(a){var c=new Set(b),d=new Set(b),e=b.map(function(){return void 0}),f=b.map(function(b,f){return b.subscribe({complete:function(){d["delete"](b),d.size===0&&a.complete()},error:a.error,next:function(d){e[f]=d,c["delete"](b),c.size===0&&a.next(e)}})});return function(){f.forEach(function(a){return a.unsubscribe()})}})}g["default"]=a}),98);
__d("MAWEBCombinedRangeDataSource",["EBMessageRangeDataSource","I64","MAWMessageRangeDataSource","Promise","asyncToGeneratorRuntime","combineLatestWith","err","nullthrows"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function j(a,b){if(a==null&&b==null)throw c("err")("Expected non-null minrange.");if(a==null||b==null){var e;e=c("nullthrows")((e=a)!=null?e:b);return{minMessageId:e.minMessageId,minTimestampMs:e.minTimestampMs}}e=(i||(i=d("I64"))).ge((e=a==null?void 0:a.minTimestampMs)!=null?e:(i||(i=d("I64"))).min_int,(e=b==null?void 0:b.minTimestampMs)!=null?e:(i||(i=d("I64"))).min_int)?a:b;return e.hasMoreBefore===!1?{minMessageId:(i||(i=d("I64"))).le(a.minTimestampMs,b.minTimestampMs)?a.minMessageId:b.minMessageId,minTimestampMs:(i||(i=d("I64"))).min(a.minTimestampMs,b.minTimestampMs)}:{minMessageId:e.minMessageId,minTimestampMs:e.minTimestampMs}}function k(a,b){if(a==null&&b==null)throw c("err")("Expected non-null maxrange.");if(a==null||b==null){var e;e=c("nullthrows")((e=a)!=null?e:b);return{maxMessageId:e.maxMessageId,maxTimestampMs:e.maxTimestampMs}}e=(i||(i=d("I64"))).le(a.maxTimestampMs,b.maxTimestampMs)?a:b;return e.hasMoreAfter===!1?{maxMessageId:(i||(i=d("I64"))).ge(a.maxTimestampMs,b.maxTimestampMs)?a.maxMessageId:b.maxMessageId,maxTimestampMs:(i||(i=d("I64"))).max(a.maxTimestampMs,b.maxTimestampMs)}:{maxMessageId:e.maxMessageId,maxTimestampMs:e.maxTimestampMs}}var l=function(a){var d=this;this.getOrCreateMessageRangeCoveringCursor=function(a,b,e){b==null?void 0:b.annotateMessageRangesDataSource("MAWEBCombinedRangeDataSource");var f=c("MAWMessageRangeDataSource").getOrCreateMessageRangeCoveringCursor(a,b,e);b=c("EBMessageRangeDataSource")(d.$1).getOrCreateMessageRangeCoveringCursor(a,b,e);return c("combineLatestWith")(f,b).map(function(b){var c=b[0];b=b[1];var d=k(c,b),e=j(c,b);return{hasMoreAfter:Boolean((c==null?void 0:c.hasMoreAfter)||(b==null?void 0:b.hasMoreAfter)),hasMoreBefore:Boolean((c==null?void 0:c.hasMoreBefore)||(b==null?void 0:b.hasMoreBefore)),isLoadingAfter:Boolean((c==null?void 0:c.isLoadingAfter)||(b==null?void 0:b.isLoadingAfter)),isLoadingBefore:Boolean((c==null?void 0:c.isLoadingBefore)||(b==null?void 0:b.isLoadingBefore)),maxMessageId:d.maxMessageId,maxTimestampMs:d.maxTimestampMs,minMessageId:e.minMessageId,minTimestampMs:e.minTimestampMs,threadKey:a.threadKey}})};this.extendRange=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,f){yield (h||(h=b("Promise"))).all([c("EBMessageRangeDataSource")(d.$1).extendRange(a,e,f),c("MAWMessageRangeDataSource").extendRange(a,e,f)])});return function(b,c,d){return a.apply(this,arguments)}}();this.$1=a},m,n;function a(a){(m==null||n!==a)&&(n=a,m=new l(a));return m}g["default"]=a}),98);
__d("MAWFetchExternalAttachmentBlob",["asyncToGeneratorRuntime","sendToSentQPLLogger"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){a=(yield window.fetch(a,{}).then(function(a){return a.blob()})["catch"](function(a){d("sendToSentQPLLogger").markSendToSentPoint(b,"fetch_external_attachment_failed");throw a}));return a});return h.apply(this,arguments)}g.fetchExternalAttachmentBlob=a}),98);
__d("MAWIssueReceiverFetchTaskDeferred",["requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h=c("requireDeferred")("MAWIssueReceiverFetchTask").__setRef("MAWIssueReceiverFetchTaskDeferred");function a(a,b,c,d,e){return h.load().then(function(f){return f.issueReceiverFetchTask(a,b,c,d,e)})}g.issueReceiverFetchTask=a}),98);
__d("MAWLinkPreviewDataStatusUtils",["I64","LSIntEnum"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a,b){return a!=null&&(h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(b))}g.linkPreviewDataStatusIsOfType=a}),98);
__d("MAWLinkPreviewDataTypeUtils",["I64","LSIntEnum"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a,b){return a!=null&&(h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(b))}g.linkPreviewDataTypeIsOfType=a}),98);
__d("MWMediaComposerLinkPreviewXMARenderQpl",["I64","LSIntEnum","MAWLoggerUtils","MWMediaRenderQplUtils","MessagingAttachmentType","QPLUserFlow","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;b=h||d("react");var k=b.useEffect,l=b.useMemo,m=b.useRef;function a(a,b,e,f){a===void 0&&(a="");b===void 0&&(b="");var g=d("MAWLoggerUtils").getInstanceKeyFromId(a.concat(b)),h=m(!1),n=l(function(){if(a==null||b==null)return null;var k=(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").XMA);c("QPLUserFlow").start(d("MWMediaRenderQplUtils").event,{annotations:{string:{attachment_type:d("MWMediaRenderQplUtils").getAttachmentTypeStringFromEnum(k),content_type:d("MWMediaRenderQplUtils").deriveMessageContentTypeStringFromAttachmentTypeLessAccurate(k),entry_point:"composer_view",linkPreviewDataType:d("MWMediaRenderQplUtils").getE2EELinkPreviewXMADataTypeStringFromEnum((k=e)!=null?k:(j||(j=d("I64"))).zero),thread_type:d("MWMediaRenderQplUtils").getThreadTypeStringFromEnum((k=f)!=null?k:(j||(j=d("I64"))).zero)}},cancelOnUnload:!0,instanceKey:g,timeoutInMs:d("MWMediaRenderQplUtils").QPL_TIMEOUT});h.current=!1;return babelHelpers["extends"]({},d("MWMediaRenderQplUtils").createQplFlowCommon(d("MWMediaRenderQplUtils").event,g,h))},[g]);k(function(){return function(){h.current===!1&&(n==null?void 0:n.getInstanceKey())!=null&&(n==null?void 0:n.endCancel(706))}},[n]);return n}g.useMediaComposerLinkPreviewXMARenderQpl=a}),98);
__d("MWXIconLink",["MWXSvgIcon","SVGIcon","cr:12481","gkx"],(function(a,b,c,d,e,f,g){"use strict";a=d("MWXSvgIcon").mwxSvgIcon(d("SVGIcon").svgIcon(b("cr:12481")),c("gkx")("23219"));g["default"]=a}),98);
__d("MWXLinkPreviewLoadingIndicator.react",["MWXGlimmer.react","MWXIconLink","MWXIconStrict.react","MWXText.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||(h=d("react"))).c,j=h,k={glimmer:{borderTopStartRadius:"x1lq5wgf",borderTopEndRadius:"xgqcy7u",borderBottomEndRadius:"x30kzoy",borderBottomStartRadius:"x9jhf4c",height:"xng8ra",width:"xh8yej3",$$css:!0}};function a(a){var b=i(5);a=a.title;if(a==null)return null;var d,e,f;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(d="x6s0dn4 x1amjocr x78zum5 x1q0g3np x5yr21d xc73u3c x5ib6vp",e=j.jsx(c("MWXIconStrict.react"),{color:"secondary",icon:c("MWXIconLink"),size:16}),f="x1iyjqo2",b[0]=d,b[1]=e,b[2]=f):(d=b[0],e=b[1],f=b[2]);b[3]!==a?(d=j.jsx(c("MWXGlimmer.react"),{index:0,xstyle:k.glimmer,children:j.jsxs("div",{className:d,children:[e,j.jsx("div",{className:f,children:j.jsx(c("MWXText.react"),{type:"body4",children:a})})]})}),b[3]=a,b[4]=d):d=b[4];return d}g["default"]=a}),98);
__d("MWXLinkPreviewTruncateText",[],(function(a,b,c,d,e,f){"use strict";var g={body:100,headline:80,subtext:100},h={body:30,headline:20,subtext:30};function a(a){var b=a.isChatTab,c=a.position;a=a.text;b=b?h:g;b=b[c];if(a==null)return void 0;c=a.replace(/\r?\n|\r/g,"").trim();return c.length<=b?c:Array.from(c).slice(0,b).join("").trim()+"..."}f.truncateText=a}),66);
__d("MAWLinkPreviewCard.react",["fbt","ix","BaseView.react","ConstUriUtils","E2EELinkPreviewXMADataStatus","E2EELinkPreviewXMADataType","I64","MAWLinkPreviewDataStatusUtils","MAWLinkPreviewDataTypeUtils","MWLSThreadDisplayContext","MWMediaComposerLinkPreviewXMARenderQpl","MWXIcon.react","MWXImage.react","MWXLinkPreviewLoadingIndicator.react","MWXLinkPreviewTruncateText","MWXText.react","MWXTextPairing.react","asyncToGeneratorRuntime","fbicon","react","useReStore"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j,k,l,m=l||(l=d("react"));e=l;e.useCallback;var n=e.useEffect,o=e.c,p={container:{alignItems:"x6s0dn4",display:"x78zum5",justifyContent:"x1qughib",$$css:!0},content:{alignItems:"x6s0dn4",display:"x78zum5",justifyContent:"xlqzeqv",width:"xh8yej3",$$css:!0},image:{borderTopStartRadius:"x1lcm9me",borderTopEndRadius:"x1yr5g0i",borderBottomEndRadius:"xrt01vj",borderBottomStartRadius:"x10y3i5r",height:"xng8ra",marginEnd:"xmo9yow",objectFit:"xl1xv1r",width:"x1247r65",$$css:!0},isReplying:{borderTopWidth:"x972fbf",$$css:!0},outerContainer:{backgroundColor:"x57kliw",borderTopColor:"x8cjs6t",borderTopStyle:"x13fuv20",borderTopWidth:"x178xt8z",paddingStart:"xvpee5o",paddingEnd:"x14uny0o",paddingLeft:null,paddingRight:null,paddingTop:"x889kno",$$css:!0},textSection:{flexShrink:"xs83m0k",minWidth:"xeuugli",$$css:!0}};function a(a){var e=o(61),g=a.draftID,l=a.isReplying,q=a.linkPreview,r=a.threadType;a=a.xmaData;var s=d("MWMediaComposerLinkPreviewXMARenderQpl").useMediaComposerLinkPreviewXMARenderQpl(g,a.url,q.dataType,r),t=(j||(j=c("useReStore")))();g=d("MWLSThreadDisplayContext").useMWLSThreadDisplayContext()==="ChatTab";r=d("MAWLinkPreviewDataTypeUtils").linkPreviewDataTypeIsOfType(q.dataType,c("E2EELinkPreviewXMADataType").FALLBACK);var u=a.author_name,v=a.iframeMediaURL,w=a.title,x=a.url;if(e[0]!==x){var y;y=x!=null?(y=d("ConstUriUtils").getUri(x))==null?void 0:y.getDomain():"";e[0]=x;e[1]=y}else y=e[1];y=y;x=r?x:y;e[2]!==g||e[3]!==x?(y=d("MWXLinkPreviewTruncateText").truncateText({isChatTab:g,position:"subtext",text:x}),e[2]=g,e[3]=x,e[4]=y):y=e[4];x=y;y=r?void 0:w;var z;e[5]!==g||e[6]!==y?(z=d("MWXLinkPreviewTruncateText").truncateText({isChatTab:g,position:"headline",text:y}),e[5]=g,e[6]=y,e[7]=z):z=e[7];y=z;z=r?w:u;e[8]!==g||e[9]!==z?(r=d("MWXLinkPreviewTruncateText").truncateText({isChatTab:g,position:"body",text:z}),e[8]=g,e[9]=z,e[10]=r):r=e[10];w=r;u=q==null?void 0:q.status;e[11]!==u?(g=d("MAWLinkPreviewDataStatusUtils").linkPreviewDataStatusIsOfType(u,c("E2EELinkPreviewXMADataStatus").LOADING),e[11]=u,e[12]=g):g=e[12];var A=g;e[13]!==v||e[14]!==A||e[15]!==s?(z=function(){!Boolean(v)&&!A?s==null?void 0:s.endSuccess({bool:{has_media_preview_url:!1}}):s==null?void 0:s.addPoint("link-preview-card-render")},r=[v,A,s],e[13]=v,e[14]=A,e[15]=s,e[16]=z,e[17]=r):(z=e[16],r=e[17]);n(z,r);e[18]!==s?(u=function(){s==null?void 0:s.endFail("load-image-error")},e[18]=s,e[19]=u):u=e[19];g=u;e[20]!==s?(z=function(){s==null?void 0:s.endSuccess({bool:{has_media_preview_url:!0}})},e[20]=s,e[21]=z):z=e[21];r=z;if(A){s==null?void 0:s.addPoint("render_preview_loading_indicator");u=l&&p.isReplying;e[22]!==u?(z=[p.outerContainer,u],e[22]=u,e[23]=z):z=e[23];e[24]!==a.title?(u=m.jsx(c("BaseView.react"),{xstyle:p.container,children:m.jsx(c("MWXLinkPreviewLoadingIndicator.react"),{title:a.title})}),e[24]=a.title,e[25]=u):u=e[25];e[26]!==z||e[27]!==u?(a=m.jsx(c("BaseView.react"),{xstyle:z,children:u}),e[26]=z,e[27]=u,e[28]=a):a=e[28];return a}z=l&&p.isReplying;e[29]!==z?(u=[p.outerContainer,z],e[29]=z,e[30]=u):u=e[30];e[31]!==v||e[32]!==g||e[33]!==r?(a=v!=null&&m.jsx(c("MWXImage.react"),{onError:g,onLoad:r,src:v,xstyle:p.image}),e[31]=v,e[32]=g,e[33]=r,e[34]=a):a=e[34];e[35]!==y?(l=m.jsx(c("MWXText.react"),{type:"headline4",children:y}),e[35]=y,e[36]=l):l=e[36];e[37]!==w||e[38]!==l||e[39]!==x?(z=m.jsx(c("BaseView.react"),{xstyle:p.textSection,children:m.jsx(c("MWXTextPairing.react"),{body:w,bodyLineLimit:1,headline:l,level:4,meta:x})}),e[37]=w,e[38]=l,e[39]=x,e[40]=z):z=e[40];e[41]!==a||e[42]!==z?(g=m.jsxs(c("BaseView.react"),{xstyle:p.content,children:[a,z]}),e[41]=a,e[42]=z,e[43]=g):g=e[43];e[44]===Symbol["for"]("react.memo_cache_sentinel")?(r=h._("__JHASH__bIolCKyk1Ph__JHASH__"),e[44]=r):r=e[44];e[45]===Symbol["for"]("react.memo_cache_sentinel")?(y=d("fbicon")._(i("478231"),12),e[45]=y):y=e[45];e[46]!==t||e[47]!==q.data||e[48]!==q.dataType||e[49]!==q.draftId?(w=function(){t.runInTransaction(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){yield a.e2ee_composer_draft_link_preview.put({data:(a=q.data)!=null?a:void 0,dataType:(a=q.dataType)!=null?a:void 0,draftId:q.draftId,status:(k||(k=d("I64"))).of_int32(c("E2EELinkPreviewXMADataStatus").DISABLED)})});return function(b){return a.apply(this,arguments)}}(),"readwrite",void 0,void 0,f.id+":185")},e[46]=t,e[47]=q.data,e[48]=q.dataType,e[49]=q.draftId,e[50]=w):w=e[50];e[51]!==r||e[52]!==y||e[53]!==w?(l=m.jsx(c("MWXIcon.react"),{"aria-label":r,color:"primary",icon:y,onPress:w}),e[51]=r,e[52]=y,e[53]=w,e[54]=l):l=e[54];e[55]!==g||e[56]!==l?(x=m.jsxs(c("BaseView.react"),{xstyle:p.container,children:[g,l]}),e[55]=g,e[56]=l,e[57]=x):x=e[57];e[58]!==u||e[59]!==x?(a=m.jsx(c("BaseView.react"),{xstyle:u,children:x}),e[58]=u,e[59]=x,e[60]=a):a=e[60];return a}g["default"]=a}),226);
__d("MAWParseLinkPreviewXMAData",["E2EELinkPreviewXMADataStatus","I64","LSIntEnum"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a){var b=a==null?void 0:a.status,e=a==null?void 0:a.data;if(a==null||b==null||e==null)return null;a=(h||(h=d("I64"))).equal(b,(i||(i=d("LSIntEnum"))).ofNumber(c("E2EELinkPreviewXMADataStatus").DISABLED));b=JSON.parse(e);return Object.keys(b).length===0||b.url==null||a?null:b}g.parseLinkPreviewXMAData=a}),98);
__d("MAWLinkPreview.react",["MAWLinkPreviewCard.react","MAWParseLinkPreviewXMAData","MWPComposerDraftMessages","ReQL","ReQLSuspense","react","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=(i||(i=d("react"))).c,k=i;function a(a){var b=j(12),e=a.isReplying,g=a.threadKey;a=a.threadType;var i=(h||(h=c("useReStore")))(),l,m;b[0]!==i.tables.e2ee_composer_draft_link_preview||b[1]!==g?(l=function(){return d("ReQL").fromTableAscending(i.tables.e2ee_composer_draft_link_preview).filter(function(a){return a.draftId===((a=d("MWPComposerDraftMessages").getDraftMessage(g))==null?void 0:a.id)})},m=[i.tables.e2ee_composer_draft_link_preview,g],b[0]=i.tables.e2ee_composer_draft_link_preview,b[1]=g,b[2]=l,b[3]=m):(l=b[2],m=b[3]);l=d("ReQLSuspense").useArray(l,m,f.id+":33");m=l.length>0?l[0]:void 0;b[4]!==m?(l=d("MAWParseLinkPreviewXMAData").parseLinkPreviewXMAData(m),b[4]=m,b[5]=l):l=b[5];l=l;if((m==null?void 0:m.draftId)==null||l==null)return null;var n=m==null?void 0:m.draftId,o;b[6]!==n||b[7]!==e||b[8]!==m||b[9]!==a||b[10]!==l?(o=k.jsx(c("MAWLinkPreviewCard.react"),{draftID:n,isReplying:e,linkPreview:m,threadType:a,xmaData:l}),b[6]=n,b[7]=e,b[8]=m,b[9]=a,b[10]=l,b[11]=o):o=b[11];return o}g["default"]=a}),98);
__d("MAWLoadingStateOutstandingUIReadyOfflineQueueSelector",["MAWSharedProtocolQueueConst"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){return function(b){var c=b.offlineQueueCount,e=b.offlineQueueSyncState;b=b.offlineQueueThreadStatus;return a!=null&&Object.keys(b).length>0?b[a]!=null&&b[a].chatStatus!==d("MAWSharedProtocolQueueConst").OfflineConsumerStatus.Complete:c>0&&e!==d("MAWSharedProtocolQueueConst").OfflineConsumerStatus.Complete}};g.outstandingUIReadyOfflineQueueSelector=a}),98);
__d("MAWMiActMaybeCreateActThread",["FBLogger","I64","LSAuthorityLevel","LSFactory","LSIntEnum","LSMessagingThreadTypeUtil","LSVerifyE2EEMetadataThreadExistsV2StoredProcedure","MAWCreateGroupThread","MAWCreateOneToOneThread","MAWMiActCreateThreadInActWithMiData","MAWMiActGetThreadLifecycleState","MAWMiActThreadLifecycleState","WAJids","WATagsLogger","asyncToGeneratorRuntime","sendToSentQPLLogger"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["Duplicated thread creation for ",""]);j=function(){return a};return a}function k(a,b){return a.runInTransaction(function(a){return c("LSVerifyE2EEMetadataThreadExistsV2StoredProcedure")(c("LSFactory")(a),{authorityLevel:(h||(h=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").AUTHORITATIVE),threadKey:b,threadType:h.ofNumber(15)}).then(function(){})},"readwrite",void 0,void 0,f.id+":48")}function l(a,b,e,f,g){var j=e.actorId;e=e.participantIds;var k=e.filter(function(a){return a!==(i||(i=d("I64"))).to_string(j)});if(d("LSMessagingThreadTypeUtil").isOneToOne(b.threadType)){var l=k.length===1?k:e;return d("sendToSentQPLLogger").measureSendToSentPerformance("maybe-create-1-1-thread",g,function(){return d("MAWCreateOneToOneThread").call(a,(i||(i=d("I64"))).of_string(l[0]),i.to_string(b.threadKey),f,g)})}else if(d("LSMessagingThreadTypeUtil").isGroup(b.threadType)&&k.length>1)return c("MAWCreateGroupThread")({db:a,offlineThreadingId:b.threadKey,participantIds:e});throw c("FBLogger")("messenger_e2ee_web").mustfixThrow("[MiActMapping] Did not know which type of optimistic thread to create for\n    threadKey: %s, participantsCount: %s, threadType: %s",(i||(i=d("I64"))).to_string(b.threadKey),e.length,(h||(h=d("LSIntEnum"))).toNumber(b.threadType))}function m(a,b){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){b=(yield d("MAWMiActCreateThreadInActWithMiData").miActCreateThreadInActWithMiData({description:b,fbid:a.serverThreadKey,isGroupThread:d("LSMessagingThreadTypeUtil").isGroup(a.thread.threadType),jid:a.jidInt64,lastActivityTimestampMs:a.thread.lastActivityTimestampMs,lastReadWatermarkTimestampMs:a.thread.lastReadWatermarkTimestampMs}));return{created:b.isCreated,jid:b.chatJid}});return n.apply(this,arguments)}function o(a,b){if(!d("LSMessagingThreadTypeUtil").isOneToOne(a.thread.threadType))return null;var c=b.actorId;b=b.participantIds;b=b.filter(function(a){return a!==(i||(i=d("I64"))).to_string(c)});if(b.length!==1)return null;b=b[0];return{jid:d("WAJids").unsafeCoerceToChatJid(b+"@msgr"),jidInt64:(i||(i=d("I64"))).of_string(b),serverThreadKey:a.thread.threadKey,thread:a.thread,type:"AUTHORITATIVE_THREAD_ONLY"}}var p=new Map(),q=new Set();function a(a,b,c,d,e){return r.apply(this,arguments)}function r(){r=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e,f,g){var h=(yield d("MAWMiActGetThreadLifecycleState").getThreadLifecycleStateByThreadKey(a.tables,b,g));f!=null&&d("sendToSentQPLLogger").addSendToSentAnnotations(f,{string:{miActThreadState:h.type.toString()}});switch(h.type){case d("MAWMiActThreadLifecycleState").MiActThreadStatesEnum.THREAD_KEY_ONLY:yield k(a,b);throw c("FBLogger")("messenger_e2ee_web").mustfixThrow("[MiActMapping] We did not call MiActLoadExistingThread for threadKey: %s, threadState: %s",(i||(i=d("I64"))).to_string(b),h.type);case d("MAWMiActThreadLifecycleState").MiActThreadStatesEnum.AUTHORITATIVE_THREAD_MISSING_MAPPING_ROW:var n=o(h,e);if(n!=null){q.has(n.jid)&&d("WATagsLogger").TAGS(["occamadillo","retry_create_thread"]).LOG(j(),n.jid);q.add(n.jid);return m(n,g)}else throw c("FBLogger")("messenger_e2ee_web").mustfixThrow("[MiActMapping] MI inserted the thread but the mapping row was not\n        written or it was deleted for threadKey: %s",(i||(i=d("I64"))).to_string(b));case d("MAWMiActThreadLifecycleState").MiActThreadStatesEnum.OPTIMISTIC_THREAD_NO_ACT:n=(i||(i=d("I64"))).to_string(b);var r=p.get(n);if(r!=null)return r;r=l(a,h.thread,e,g,f);p.set(n,r);return r;case d("MAWMiActThreadLifecycleState").MiActThreadStatesEnum.CLIENT_PARTIAL_MI_THREAD_WITH_ACT:yield k(a,b);return{created:!1,jid:h.jid};case d("MAWMiActThreadLifecycleState").MiActThreadStatesEnum.OPTIMISTIC_THREAD_WITH_ACT:return{created:!1,jid:h.jid};case d("MAWMiActThreadLifecycleState").MiActThreadStatesEnum.AUTHORITATIVE_THREAD_ONLY:return m(h,g);case d("MAWMiActThreadLifecycleState").MiActThreadStatesEnum.MI_AND_ACT_THREAD_COMPLETE:return{created:!1,jid:h.jid};case d("MAWMiActThreadLifecycleState").MiActThreadStatesEnum.CLIENT_PARTIAL_MI_THREAD:case d("MAWMiActThreadLifecycleState").MiActThreadStatesEnum.SERVER_PARTIAL_MI_THREAD:case d("MAWMiActThreadLifecycleState").MiActThreadStatesEnum.JID_MISSING_MI_THREAD:case d("MAWMiActThreadLifecycleState").MiActThreadStatesEnum.JID_MISSING_MAPPING_ROW:throw c("FBLogger")("messenger_e2ee_web").mustfixThrow("[MiActMapping] Unhandled ACT thread creation state %s for threadKey:\n        %s",h.type,(i||(i=d("I64"))).to_string(b));default:h.type;throw c("FBLogger")("messenger_e2ee_web").mustfixThrow("[MiActMapping] Unreachable miActThreadState.type: %s",h.type)}});return r.apply(this,arguments)}g["default"]=a}),98);
__d("MAWObservableUtils",["Random","ReStoreKeyComparer","err"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(){return{id:c("Random").uint32()}}function b(a,b){if(!(Array.isArray(a)||Array.isArray(b)))return(h||(h=d("ReStoreKeyComparer"))).compareKey([a],[b]);else if(Array.isArray(a)&&Array.isArray(b))return(h||(h=d("ReStoreKeyComparer"))).compareKey(a,b);throw c("err")("[Separate Read Chunked Observable] Cannot compare array and non-array")}function e(a,b){var c=[];for(var d=0;d<a.length;d+=b)c.push(a.slice(d,d+b));return c}g.getUniqueRef=a;g.wrappedCompareKey=b;g.chunkArray=e}),98);
__d("MAWOptimisticUpdateContactRelationship",["I64","LSAddMessengerContactStoredProcedure","LSFactory","LSMessagingThreadTypeUtil","ReQL","asyncToGeneratorRuntime","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,e,g){if(!d("LSMessagingThreadTypeUtil").isOneToOne(a.threadType))return;c("promiseDone")(e.runInTransaction(function(){var f=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){var f;f=(f=(yield d("ReQL").firstAsync(d("ReQL").mergeJoin(d("ReQL").fromTableAscending(e.tables.participants).getKeyRange(a.threadKey),d("ReQL").fromTableAscending(e.tables.contacts)).filter(function(a){a[0];a=a[1];return!(h||(h=d("I64"))).equal(a.id,g)}))))!=null?f:[void 0,void 0];f[0];f=f[1];if(f==null)return;var i=babelHelpers["extends"]({},f,{contactViewerRelationship:(h||(h=d("I64"))).of_string("2")});yield b.contacts.upsert([f.id],i);d("LSMessagingThreadTypeUtil").isArmadilloSecure(a.threadType)&&(yield c("LSAddMessengerContactStoredProcedure")(c("LSFactory")(b),{contactId:f.id}))});return function(a){return f.apply(this,arguments)}}(),"readwrite",void 0,void 0,f.id+":39"))}g.call=a}),98);
__d("MAWPrepareAttachmentsFromMediaManager",["MAWExternalId","MAWSendFileMsgTypes"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,c,e){var f=b.hasFile,g=b.hasImage;b=b.hasVideo;var h=null;if(b||g||f){b=a[a.length-1];h=d("MAWSendFileMsgTypes").toOfflineAttachmentIDFromString(b.offlineAttachmentId)}else h=d("MAWSendFileMsgTypes").toOfflineAttachmentIDFromStanzaId(d("MAWExternalId").generateExternalId());c(h);g=a.reduce(function(a,b){var c=e.get(d("MAWSendFileMsgTypes").toOfflineAttachmentIDFromString(b.offlineAttachmentId));c!=null&&a.push([c,d("MAWSendFileMsgTypes").toOfflineAttachmentIDFromString(b.offlineAttachmentId)]);return a},[]);return{attachmentOfflineId:h,attachments:g}}g.prepareAttachmentsFromMediaManagerImpl=a}),98);
__d("MAWRetryReceiverFetchSticker",["FBLogger","MAWIssueReceiverFetchTaskDeferred","MAWMediaDownloadStatus","WAHashUtils","nullthrows","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,e,f){f==null?void 0:f.addPoint("receiver_fetch_retry_attempt");if(b==null){f==null?void 0:f.endFail("receiver_fetch_retry_no_attachment");return}var g=c("nullthrows")(b.receiverFetchId),h=b.messageId,i=b.threadKey,j=d("WAHashUtils").stringToPlaintextHash(h);e({tag:"IncreaseMediaDownloadRetryCount",value:{key:j}});c("promiseDone")(a,function(a){return d("MAWIssueReceiverFetchTaskDeferred").issueReceiverFetchTask(a,h,g,i,e)},function(a){f==null?void 0:f.endFail("receiver_fetch_task_fail"),e({tag:"UpdateMediaStatus",value:{details:"receiver_fetch_task_fail_"+a,key:j,status:c("MAWMediaDownloadStatus").MANUAL_RETRYABLE_FAILURE,type:"main"}}),c("FBLogger")("messenger_web_media").catching(a).warn("Failed to issue media receiver fetch task for manual retry")})}g.retryReceiverFetchSticker=a}),98);
__d("MAWSecureThreadNonAddressableContactBannerCloseButton.react",["MWXPressable.react","fbs","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||(h=d("react"))).c,j=h;function a(a){var b=i(5);a=a.onPress;var d;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(d="x1923su1 x10l6tqk xfr5jun x1vjfegm",b[0]=d):d=b[0];var e;b[1]===Symbol["for"]("react.memo_cache_sentinel")?(e=c("fbs")._("__JHASH__cwU_O5_fD5E__JHASH__"),b[1]=e):e=b[1];var f;b[2]===Symbol["for"]("react.memo_cache_sentinel")?(f=j.jsxs("svg",{height:"18px",viewBox:"0 0 24 24",width:"18px",children:[j.jsx("title",{children:c("fbs")._("__JHASH__lJTlDYURTnq__JHASH__")}),j.jsx("line",{stroke:"currentColor",strokeLinecap:"round",strokeWidth:"2",x1:"6",x2:"18",y1:"6",y2:"18"}),j.jsx("line",{stroke:"currentColor",strokeLinecap:"round",strokeWidth:"2",x1:"6",x2:"18",y1:"18",y2:"6"})]}),b[2]=f):f=b[2];b[3]!==a?(d=j.jsx("div",{className:d,children:j.jsx(c("MWXPressable.react"),{"aria-label":e,onPress:a,overlayRadius:"50%",children:f})}),b[3]=a,b[4]=d):d=b[4];return d}g["default"]=a}),226);
__d("getMAWNonAddressableContactBannerStrings",["fbt","IntlVariations"],(function(a,b,c,d,e,f,g,h){"use strict";function a(a,b){var d;if(a)return{details:h._("__JHASH__ixaC9ybh3Q8__JHASH__"),headline:h._("__JHASH___yUMmqEez-U__JHASH__")};a=((a=b.firstName)!=null?a:"")===""?null:b.firstName;d=((d=b.name)!=null?d:"")===""?null:b.name;b=(a=(b=a)!=null?b:d)!=null?a:"recipient";d=c("IntlVariations").GENDER_UNKNOWN;return{details:h._("__JHASH__J_HXGmiXLis__JHASH__",[h._name("message recipient name",b,d)]),headline:h._("__JHASH__9vfr7-Uns9r__JHASH__",[h._name("message recipient name",b,d)])}}g["default"]=a}),226);
__d("useMAWNonAddressableParticipant",["I64","LSAuthorityLevel","LSIntEnum","LSWhatsAppConnectStatus","MWPActor.react","ReQL","ReQLSuspense","react","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l=(k||d("react")).c;function a(a){var b=l(9),e=(h||(h=c("useReStore")))(),g=d("MWPActor.react").useActor(),k;b[0]!==e.tables.participants||b[1]!==e.tables.contacts||b[2]!==a||b[3]!==g?(k=function(){return d("ReQL").mergeJoin(d("ReQL").fromTableAscending(e.tables.participants,[]).getKeyRange(a),d("ReQL").fromTableAscending(e.tables.contacts,["waConnectStatus","authorityLevel","id","name","firstName"])).filter(function(a){a[0];a=a[1];if((i||(i=d("I64"))).equal(a.waConnectStatus,(j||(j=d("LSIntEnum"))).ofNumber(c("LSWhatsAppConnectStatus").WHATSAPP_NOT_ADDRESSABLE))&&(i||(i=d("I64"))).ge(a.authorityLevel,(j||(j=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").AUTHORITATIVE_PENDING_REPLACEMENT)))return!(i||(i=d("I64"))).equal(a.id,g);else return!1}).map(function(a){a[0];a=a[1];return a})},b[0]=e.tables.participants,b[1]=e.tables.contacts,b[2]=a,b[3]=g,b[4]=k):k=b[4];var m;b[5]!==e||b[6]!==a||b[7]!==g?(m=[e,a,g],b[5]=e,b[6]=a,b[7]=g,b[8]=m):m=b[8];b=d("ReQLSuspense").useFirst(k,m,f.id+":36");return b}g["default"]=a}),98);
__d("useHasNonAddressableParticipantWAI",["CurrentMessengerUser","FBLogger","I64","Int64Hooks","LSAuthorityLevel","LSIntEnum","MAWBridgeSendAndReceive","MWGetChatTabOpenQPLEventTrace","MWGetInboxNavigateQPLEventTrace","MWPActor.react","ODS","ReQL","ReQLSuspense","TemporaryLoggingUtilsForS406998Only","WAJids","WALogger","asyncToGeneratorRuntime","gkx","promiseDone","react","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l;function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["occam_reachable_with_no_wai_devices in "," (",")"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["occam_not_reachable_with_wai_devices in "," (",")"]);n=function(){return a};return a}e=l||d("react");var o=e.useState,p=e.c;function a(a){var e=p(17),g=a.isComposerBlocked,k=a.isGroup,l=a.isSecure,m=a.threadKey,n=(h||(h=c("useReStore")))(),r=d("MWPActor.react").useActor();a=o(null);var s=a[0],t=a[1],u;e[0]!==l||e[1]!==n.tables.participants||e[2]!==n.tables.contacts||e[3]!==m||e[4]!==r?(a=function(){return l?d("ReQL").mergeJoin(d("ReQL").fromTableAscending(n.tables.participants,["contactId"]).getKeyRange(m),d("ReQL").fromTableAscending(n.tables.contacts,["authorityLevel","firstName","name"])).map(function(a){var b=a[0];a=a[1];b=b.contactId;return(i||(i=d("I64"))).ge(a.authorityLevel,(j||(j=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").AUTHORITATIVE))&&!(i||(i=d("I64"))).equal(b,r)?[d("WAJids").toMsgrUserJid((i||(i=d("I64"))).to_string(b)),a]:null}).filter(Boolean):d("ReQL").empty()},u=[r,n.tables.contacts,n.tables.participants,l,m],e[0]=l,e[1]=n.tables.participants,e[2]=n.tables.contacts,e[3]=m,e[4]=r,e[5]=a,e[6]=u):(a=e[5],u=e[6]);var v=d("ReQLSuspense").useArray(a,u,f.id+":64");e[7]!==l||e[8]!==v||e[9]!==n.tables.threads||e[10]!==n.tables.contacts||e[11]!==n.tables.participants||e[12]!==m||e[13]!==k||e[14]!==g?(a=function(){if(c("gkx")("483")){if(!l){t(null);return}var a=v.map(function(a){a=a[0];return a});a.forEach(function(a){var e=a.split("@")[0];d("TemporaryLoggingUtilsForS406998Only").isStanzaIdForS406998Only(e)&&c("promiseDone")(b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var b=(i||(i=d("I64"))).of_string(e),f=(yield n.tables.threads.get(m)),g=(yield n.tables.contacts.get(b));b=(yield n.tables.participants.index("contactIdThreadKey").get(b,m));f=f==null?void 0:f.authorityLevel;g=g==null?void 0:g.authorityLevel;b=b==null?void 0:b.authorityLevel;c("FBLogger")("messenger_e2ee_web","invalid_participant_id").mustfix("[S406998] invalid participant %s. threadKey: %s. isGroup: %s. count: %s. threadAuthLevel: %s. contactAuthLevel: %s. participantAuthLevel: %s",a,i.to_string(m),k,v.length,f?(i||(i=d("I64"))).to_string(f):"",g?(i||(i=d("I64"))).to_string(g):"",b?(i||(i=d("I64"))).to_string(b):"")})())});c("promiseDone")(d("MAWBridgeSendAndReceive").sendAndReceive("backend","getWAIDevices",{users:a}).then(function(a){var b=v.find(function(b){b=b[0];return!a.has(b)||((b=a.get(b))==null?void 0:b.length)===0});q(m,k,g,b!=null);t(b!=null?{hasNonAddressableParticipant:!0,nonAddressableParticipantName:b[1]}:{hasNonAddressableParticipant:!1})}))}},u=[n.tables.contacts,n.tables.participants,n.tables.threads,g,k,l,m,v],e[7]=l,e[8]=v,e[9]=n.tables.threads,e[10]=n.tables.contacts,e[11]=n.tables.participants,e[12]=m,e[13]=k,e[14]=g,e[15]=a,e[16]=u):(a=e[15],u=e[16]);d("Int64Hooks").useEffectInt64(a,u);return s}function q(a,b,e,f){b=b?"group":"1:1";var g=d("CurrentMessengerUser").isTestUser()?"test user":"prod user",h=function(a){a.addAnnotationBoolean("hasNonAddressableParticipantOccam",e),a.addAnnotationBoolean("hasNonAddressableParticipantWAI",f)};c("MWGetChatTabOpenQPLEventTrace")(a,h);c("MWGetInboxNavigateQPLEventTrace")(a,h);e&&!f?((k||(k=d("ODS"))).bumpEntityKey(3185,"mwchat_composer","occam_not_reachable_with_wai_devices in "+b+" ("+g+")"),d("WALogger").DEV(n(),b,g),c("FBLogger")("messenger_e2ee_web","occam_not_reachable").mustfix("occam returned not reachable but WA devices available. Thread: %s, Thread Type: %s, User Type: %s",(i||(i=d("I64"))).to_string(a),b,g)):!e&&f&&((k||(k=d("ODS"))).bumpEntityKey(3185,"mwchat_composer","occam_reachable_with_no_wai_devices in "+b+" ("+g+")"),d("WALogger").DEV(m(),b,g))}g.useHasNonAddressableParticipantWAI=a}),98);
__d("useMAWOverrideNonAddressableParticipantWithWAI",["getMAWNonAddressableContactBannerStrings","qex","react","useHasNonAddressableParticipantWAI"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).c;function a(a){var b=i(8),e=a.bannerFromOccam,f=a.isGroup,g=a.isSecure;a=a.threadKey;var h=e!=null,j;b[0]!==h||b[1]!==f||b[2]!==g||b[3]!==a?(j={isComposerBlocked:h,isGroup:f,isSecure:g,threadKey:a},b[0]=h,b[1]=f,b[2]=g,b[3]=a,b[4]=j):j=b[4];a=d("useHasNonAddressableParticipantWAI").useHasNonAddressableParticipantWAI(j);if(!g||a==null)return e;if(!a.hasNonAddressableParticipant&&h&&c("qex")._("1406")===!0)return null;if(a.hasNonAddressableParticipant&&!h&&c("qex")._("1576")===!0){b[5]!==f||b[6]!==a.nonAddressableParticipantName?(j=c("getMAWNonAddressableContactBannerStrings")(f,a.nonAddressableParticipantName),b[5]=f,b[6]=a.nonAddressableParticipantName,b[7]=j):j=b[7];return j}return e}g["default"]=a}),98);
__d("MAWSecureThreadNonAddressableContactBanner.react",["LSMessagingThreadTypeUtil","MAWSecureThreadNonAddressableContactBannerCloseButton.react","MWXRow.react","MWXRowItem.react","MWXText.react","getMAWNonAddressableContactBannerStrings","react","useMAWNonAddressableParticipant","useMAWOverrideNonAddressableParticipantWithWAI"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;b.useCallback;var j=b.useState,k=b.c;function a(a){var b=k(20),e=a.setHideComposerEditor;a=a.thread;var f=c("useMAWNonAddressableParticipant")(a.threadKey),g,h;b[0]!==a.threadType||b[1]!==f?(h=d("LSMessagingThreadTypeUtil").isGroup(a.threadType),g=f!=null?c("getMAWNonAddressableContactBannerStrings")(h,f):null,b[0]=a.threadType,b[1]=f,b[2]=g,b[3]=h):(g=b[2],h=b[3]);f=g;b[4]!==f||b[5]!==h||b[6]!==a.threadKey?(g={bannerFromOccam:f,isGroup:h,isSecure:!0,threadKey:a.threadKey},b[4]=f,b[5]=h,b[6]=a.threadKey,b[7]=g):g=b[7];f=c("useMAWOverrideNonAddressableParticipantWithWAI")(g);a=j(!1);g=a[0];var l=a[1];b[8]===Symbol["for"]("react.memo_cache_sentinel")?(a=function(){return l(!0)},b[8]=a):a=b[8];a=a;var m=h;h=m?!g:!0;var n=f!=null&&h;e(function(){if(n)return!m;else return!1});if(n){b[9]===Symbol["for"]("react.memo_cache_sentinel")?(g="x1exxf4d x13fuv20 x178xt8z x1n2onr6 x1ja2u2z",b[9]=g):g=b[9];b[10]!==m?(h=m?i.jsx(c("MAWSecureThreadNonAddressableContactBannerCloseButton.react"),{onPress:a}):null,b[10]=m,b[11]=h):h=b[11];e=f==null?void 0:f.headline;b[12]!==e?(a=i.jsx(c("MWXRow.react"),{align:"center",expanding:!0,paddingVertical:12,spacingVertical:0,testid:void 0,children:i.jsx(c("MWXRowItem.react"),{children:i.jsx(c("MWXText.react"),{color:"primary",type:"headlineEmphasized4",children:e})})}),b[12]=e,b[13]=a):a=b[13];e=f==null?void 0:f.details;b[14]!==e?(f=i.jsx(c("MWXRow.react"),{align:"center",expanding:!0,paddingTop:4,paddingVertical:16,spacingVertical:4,testid:void 0,children:i.jsx(c("MWXRowItem.react"),{children:i.jsx(c("MWXText.react"),{align:"center",color:"secondary",type:"body4",children:e})})}),b[14]=e,b[15]=f):f=b[15];b[16]!==h||b[17]!==a||b[18]!==f?(e=i.jsxs("div",{className:g,children:[h,a,f]}),b[16]=h,b[17]=a,b[18]=f,b[19]=e):e=b[19];return e}else return null}g["default"]=a}),98);
__d("MAWSecureTypingState",["I64","Int64Hooks","LSAuthorityLevel","LSContactBlockedByViewerStatus","LSIntEnum","LSMessagingThreadTypeUtil","MAWBridgeFireAndForget","MAWMiActOnActThreadReady","MWPActor.react","MessengerWebUXLogger","Promise","ReQL","ReQLSuspense","WAChatState","WAJids","asyncToGeneratorRuntime","promiseDone","react","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l,m=(j||d("react")).c;function n(a,b,c,d){return o.apply(this,arguments)}function o(){o=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,f,g){if(!(k||(k=d("I64"))).equal(f,(l||(l=d("LSIntEnum"))).ofNumber(15)))return(i||(i=b("Promise"))).resolve(!0);f=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.tables.participants,["contactId"]).getKeyRange(e).filter(function(a){return!(k||(k=d("I64"))).equal(a.contactId,g)})));if(f==null)return!1;e=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.tables.contacts).getKeyRange(f.contactId)));return e==null?!1:(k||(k=d("I64"))).equal(e.blockedByViewerStatus,(l||(l=d("LSIntEnum"))).ofNumber(c("LSContactBlockedByViewerStatus").UNBLOCKED))});return o.apply(this,arguments)}function a(a,e,g){var j=m(24),o=(h||(h=c("useReStore")))(),p=d("MWPActor.react").useActor(),q;j[0]!==e?(q=(k||(k=d("I64"))).to_string(e),j[0]=e,j[1]=q):q=j[1];q=q;var r=c("MessengerWebUXLogger").useInteractionLogger(),s;j[2]!==o.tables.participants||j[3]!==e?(s=function(){return d("ReQL").fromTableAscending(o.tables.participants,["contactId"]).getKeyRange(e).map(function(a){return d("WAJids").toMsgrUserJid((k||(k=d("I64"))).to_string(a.contactId))})},j[2]=o.tables.participants,j[3]=e,j[4]=s):s=j[4];var t;j[5]!==o||j[6]!==e?(t=[o,e],j[5]=o,j[6]=e,j[7]=t):t=j[7];s=d("ReQLSuspense").useArray(s,t,f.id+":83");j[8]!==a||j[9]!==g||j[10]!==o||j[11]!==e||j[12]!==p||j[13]!==r?(t=function(f){(k||(k=d("I64"))).ge(a,(l||(l=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").AUTHORITATIVE))&&d("LSMessagingThreadTypeUtil").isArmadilloSecure(g)&&c("promiseDone")(n(o,e,g,p).then(function(a){return!a?(i||(i=b("Promise"))).resolve():d("MAWMiActOnActThreadReady").onActThreadReady(o.tables,e,"MAWSecureTypingState",function(a,c){r==null?void 0:r({eventName:"send_typing_indicators",threadKey:e,threadType:g});d("MAWBridgeFireAndForget").fireAndForget("backend","sendChatStateFromComposer",{chatJid:c,state:f?d("WAChatState").TYPING:d("WAChatState").IDLE});return(i||(i=b("Promise"))).resolve()})}))},j[8]=a,j[9]=g,j[10]=o,j[11]=e,j[12]=p,j[13]=r,j[14]=t):t=j[14];var u;j[15]!==o||j[16]!==s||j[17]!==a||j[18]!==e||j[19]!==g||j[20]!==p||j[21]!==q||j[22]!==r?(u=[o,s,a,e,g,p,q,r],j[15]=o,j[16]=s,j[17]=a,j[18]=e,j[19]=g,j[20]=p,j[21]=q,j[22]=r,j[23]=u):u=j[23];return d("Int64Hooks").useCallbackInt64(t,u)}g.useOnTypingStateChanged=a}),98);
__d("MAWSupportedFileTypes",[],(function(a,b,c,d,e,f){"use strict";a=["*/*"];f.supportedFileTypes=a}),66);
__d("MWXIconPhotoPlus",["MWXSvgIcon","SVGIcon","cr:12529","gkx"],(function(a,b,c,d,e,f,g){"use strict";a=d("MWXSvgIcon").mwxSvgIcon(d("SVGIcon").svgIcon(b("cr:12529")),c("gkx")("23219"));g["default"]=a}),98);
__d("MWXComposerAttachmentPreview.react",["fbt","MWXCircleButton.react","MWXIconCross","MWXIconDocument","MWXIconPhotoPlus","MWXIconStrict.react","MWXImage.react","MWXPressable.react","MWXText.react","MWXTooltip.react","MWXVideoStatusListener.react","react","react-strict-dom"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||(i=d("react")),k=i,l=k.useEffect,m=k.useRef,n=k.c,o={cancelButton:{end:"xoo4vsp",left:null,right:null,position:"x10l6tqk",top:"x1v4kod4",$$css:!0},card:{marginEnd:"xq8finb",position:"x1n2onr6",$$css:!0},contentWrapper:{backgroundColor:"x1qhmfi1",borderTopStartRadius:"x1lq5wgf",borderTopEndRadius:"xgqcy7u",borderBottomEndRadius:"x30kzoy",borderBottomStartRadius:"x9jhf4c",height:"xsdox4t",minWidth:"x900493",overflowX:"x6ikm8r",overflowY:"x10wlt62",$$css:!0},filePreview:{alignItems:"x6s0dn4",boxSizing:"x9f619",display:"x78zum5",rowGap:"xp1r0qw",columnGap:"xtqikln",height:"xsdox4t",maxWidth:"x1kbpmyu",paddingTop:"xz9dl7a",paddingEnd:"xn6708d",paddingBottom:"xsag5q8",paddingStart:"x1ye3gou",width:"xezivpi",$$css:!0},imagePreview:{alignItems:"x6s0dn4",display:"x78zum5",height:"xsdox4t",justifyContent:"xl56j7k",width:"x1useyqa",$$css:!0},playIcon:{start:"xtzzx4i",left:null,right:null,marginStart:"x16hk5td",marginTop:"x7wgvq7",position:"x10l6tqk",top:"xwa60dl",$$css:!0}};function p(a){var b=n(13),c=a.hasError;a=a.progress;c=c===void 0?!1:c;if(a===1||a==null)return null;c=c?"var(--negative)":"var(--chat-composer-button-color, var(--accent))";a=Math.ceil(a*100);var d=2..toString();d="M 0,"+d+" L 100,"+d;var e;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(e="x168nmei x13lgxp2 x30kzoy x9jhf4c x1ey2m1c x17qophe x10l6tqk xh8yej3",b[0]=e):e=b[0];var f;b[1]===Symbol["for"]("react.memo_cache_sentinel")?(f={height:4..toString()},b[1]=f):f=b[1];var g;b[2]===Symbol["for"]("react.memo_cache_sentinel")?(g=j.jsx("path",{d:d,stroke:"rgba(0,0,0,.5)",strokeLinecap:"round",strokeWidth:4..toString()}),b[2]=g):g=b[2];var h=a===0?0:4,i;b[3]!==h?(i=h.toString(),b[3]=h,b[4]=i):i=b[4];h=100-a;b[5]!==h?(a=h.toString(),b[5]=h,b[6]=a):a=b[6];b[7]!==a?(h={strokeDasharray:"100",strokeDashoffset:a,transition:"stroke-dashoffset .5s, stroke .5s"},b[7]=a,b[8]=h):h=b[8];b[9]!==c||b[10]!==i||b[11]!==h?(a=j.jsxs("svg",{"aria-hidden":!0,className:e,preserveAspectRatio:"none",style:f,viewBox:"0 0 100 "+4..toString(),children:[g,j.jsx("path",{d:d,stroke:c,strokeLinecap:"round",strokeWidth:i,style:h})]}),b[9]=c,b[10]=i,b[11]=h,b[12]=a):a=b[12];return a}function q(a){var b=n(12),e=a.children,f=a.hasError,g=a.onCancel,i=a.progress;a=a.testid;f=f===void 0?!1:f;var k;b[0]!==f||b[1]!==i?(k=j.jsx(p,{hasError:f,progress:i}),b[0]=f,b[1]=i,b[2]=k):k=b[2];b[3]!==e||b[4]!==k?(f=j.jsxs(d("react-strict-dom").html.div,{style:o.contentWrapper,children:[e,k]}),b[3]=e,b[4]=k,b[5]=f):f=b[5];b[6]!==g?(i=g!=null&&j.jsx(d("react-strict-dom").html.div,{style:o.cancelButton,children:j.jsx(c("MWXCircleButton.react"),{icon:c("MWXIconCross"),label:h._("__JHASH__a2BigkmhfXY__JHASH__"),onPress:g,size:24,type:"overlay"})}),b[6]=g,b[7]=i):i=b[7];b[8]!==a||b[9]!==f||b[10]!==i?(e=j.jsxs(d("react-strict-dom").html.div,{"data-testid":void 0,style:o.card,children:[f,i]}),b[8]=a,b[9]=f,b[10]=i,b[11]=e):e=b[11];return e}function a(a){var b=n(9),d=a.hasError,e=a.onCancel,f=a.onError,g=a.onLoad,h=a.progress;a=a.src;d=d===void 0?!1:d;var i;b[0]!==f||b[1]!==g||b[2]!==a?(i=j.jsx(c("MWXImage.react"),{objectFit:"contain",onError:f,onLoad:g,src:a,xstyle:o.imagePreview}),b[0]=f,b[1]=g,b[2]=a,b[3]=i):i=b[3];b[4]!==d||b[5]!==e||b[6]!==h||b[7]!==i?(f=j.jsx(q,{hasError:d,onCancel:e,progress:h,testid:void 0,children:i}),b[4]=d,b[5]=e,b[6]=h,b[7]=i,b[8]=f):f=b[8];return f}function b(a){var b=n(13),e=a.hasError,f=a.onCancel,g=a.onError,h=a.onLoad,i=a.progress;a=a.src;e=e===void 0?!1:e;var k=m(null),l;b[0]!==g||b[1]!==h?(l=j.jsx(c("MWXVideoStatusListener.react"),{onError:g,onLoad:h,videoRef:k}),b[0]=g,b[1]=h,b[2]=l):l=b[2];b[3]===Symbol["for"]("react.memo_cache_sentinel")?(g="xl1xv1r",b[3]=g):g=b[3];b[4]!==a?(h=j.jsx("video",{className:g,height:"48",ref:k,src:a,width:"48"}),b[4]=a,b[5]=h):h=b[5];b[6]===Symbol["for"]("react.memo_cache_sentinel")?(g=j.jsx(d("react-strict-dom").html.div,{style:o.playIcon,children:j.jsx(c("MWXImage.react"),{src:"/images/video/play_24dp.png"})}),b[6]=g):g=b[6];b[7]!==e||b[8]!==f||b[9]!==i||b[10]!==l||b[11]!==h?(k=j.jsxs(q,{hasError:e,onCancel:f,progress:i,testid:void 0,children:[l,h,g]}),b[7]=e,b[8]=f,b[9]=i,b[10]=l,b[11]=h,b[12]=k):k=b[12];return k}function e(a){var b=n(14),e=a.hasError,f=a.onCancel,g=a.onLoad,h=a.progress;a=a.title;e=e===void 0?!1:e;var i,k;b[0]!==g?(i=function(){g==null?void 0:g()},k=[g],b[0]=g,b[1]=i,b[2]=k):(i=b[1],k=b[2]);l(i,k);b[3]===Symbol["for"]("react.memo_cache_sentinel")?(i=j.jsx(c("MWXIconStrict.react"),{icon:c("MWXIconDocument"),size:20}),b[3]=i):i=b[3];b[4]!==a?(k=j.jsxs(d("react-strict-dom").html.div,{style:o.filePreview,children:[i,j.jsx(c("MWXText.react"),{numberOfLines:2,type:"bodyLink3",children:a})]}),b[4]=a,b[5]=k):k=b[5];b[6]!==a||b[7]!==k?(i=j.jsx(c("MWXTooltip.react"),{position:"above",tooltip:a,children:k}),b[6]=a,b[7]=k,b[8]=i):i=b[8];b[9]!==e||b[10]!==f||b[11]!==h||b[12]!==i?(a=j.jsx(q,{hasError:e,onCancel:f,progress:h,testid:void 0,children:i}),b[9]=e,b[10]=f,b[11]=h,b[12]=i,b[13]=a):a=b[13];return a}function f(a){var b=n(7),d=a.isDisabled;a=a.onPress;var e;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(e=h._("__JHASH__07aSX1Sv-Xl__JHASH__"),b[0]=e):e=b[0];e=e;var f=d?"disabled":"primary",g;b[1]!==f?(g=j.jsx(c("MWXIconStrict.react"),{color:f,icon:c("MWXIconPhotoPlus"),size:24}),b[1]=f,b[2]=g):g=b[2];b[3]!==d||b[4]!==a||b[5]!==g?(f=j.jsx(q,{children:j.jsx(c("MWXPressable.react"),{"aria-label":e,disabled:d,onPress:a,testid:void 0,xstyle:o.imagePreview,children:g})}),b[3]=d,b[4]=a,b[5]=g,b[6]=f):f=b[6];return f}g.MWXComposerImageAttachmentPreview=a;g.MWXComposerVideoAttachmentPreview=b;g.MWXComposerFileAttachmentPreview=e;g.MWXComposerAddAttachmentButton=f}),226);
__d("MWXComposerButtonContext.react",["react"],(function(a,b,c,d,e,f,g){"use strict";var h;a=h||d("react");b=a.createContext({});g["default"]=b}),98);
__d("MWXComposerRow.react",["react","react-strict-dom"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||(h=d("react"))).c,j=h,k={padding12:{paddingTop:"xz9dl7a",paddingEnd:"xn6708d",paddingBottom:"xsag5q8",paddingStart:"x1ye3gou",$$css:!0},padding4:{paddingTop:"x1iorvi4",paddingEnd:"x150jy0e",paddingBottom:"xjkvuk6",paddingStart:"x1e558r4",$$css:!0},padding6:{paddingTop:"x1yrsyyn",paddingEnd:"xsyo7zv",paddingBottom:"x10b6aqq",paddingStart:"x16hj40l",$$css:!0},row:{alignItems:"xpqajaz",boxSizing:"x9f619",display:"x78zum5",flexGrow:"x1iyjqo2",flexShrink:"xs83m0k",position:"x1n2onr6",width:"xh8yej3",$$css:!0},scrollable:{contain:"x41o525",overflowX:"xw2csxc",overflowY:"x1odjw0f",$$css:!0}};function a(a){var b=i(10),c=a.children,e=a["data-testid"],f=a.padding,g=a.scrollable;a=a.xStyle;f=f===void 0?0:f;var h=f===12&&k.padding12,l=f===4&&k.padding4;f=f===6&&k.padding6;g=g===!0&&k.scrollable;var m;b[0]!==h||b[1]!==l||b[2]!==f||b[3]!==g||b[4]!==a?(m=[k.row,h,l,f,g,a],b[0]=h,b[1]=l,b[2]=f,b[3]=g,b[4]=a,b[5]=m):m=b[5];b[6]!==e||b[7]!==m||b[8]!==c?(h=j.jsx(d("react-strict-dom").html.div,{"data-testid":void 0,style:m,children:c}),b[6]=e,b[7]=m,b[8]=c,b[9]=h):h=b[9];return h}g["default"]=a}),98);
__d("MWXComposerHeader.react",["MWXComposerButtonContext.react","MWXComposerRow.react","MWXText.react","MWXTextPairing.react","react","react-strict-dom"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||(h=d("react"))).c,j=h,k={body:{alignItems:"x6s0dn4",paddingBottom:"x1120s5i",paddingStart:"xpkgp8e",paddingEnd:"xmns6w2",paddingLeft:null,paddingRight:null,paddingTop:"xz9dl7a",$$css:!0},border:{borderTopColor:"x8cjs6t",borderTopStyle:"x13fuv20",borderTopWidth:"x178xt8z",$$css:!0},rightAddon:{marginStart:"x1gryazu",$$css:!0}},l={color:"secondary",size:24};function a(a){var b=i(21),e=a.bodyText,f=a.bodyTextType,g=a["data-testid"],h=a.hasTopBorder,m=a.headlineText,n=a.headlineTextType,o=a.leftAddon,p=a.level,q=a.loadingIndicator,r=a.rightAddon;a=a.subtext;h=h===void 0?!1:h;p=p===void 0?3:p;if(q!=null){var s;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(s=[k.body],b[0]=s):s=b[0];b[1]!==g||b[2]!==q?(s=j.jsx(c("MWXComposerRow.react"),{"data-testid":void 0,xStyle:s,children:q}),b[1]=g,b[2]=q,b[3]=s):s=b[3];return s}q=h&&k.border;b[4]!==q?(s=[k.body,q],b[4]=q,b[5]=s):s=b[5];h=o!=null&&o;b[6]!==e||b[7]!==a||b[8]!==m||b[9]!==f||b[10]!==n||b[11]!==p?(q=(e!=null||a!=null||m!=null)&&j.jsx(c("MWXTextPairing.react"),{body:e!=null&&f!=null?j.jsx(c("MWXText.react"),{type:f,children:e}):e!=null?j.jsx(c("MWXText.react"),{type:"body4",children:e}):void 0,headline:m!=null&&n!=null?j.jsx(c("MWXText.react"),{type:n,children:m}):m!=null?j.jsx(c("MWXText.react"),{type:"headline4",children:m}):void 0,level:p,meta:a}),b[6]=e,b[7]=a,b[8]=m,b[9]=f,b[10]=n,b[11]=p,b[12]=q):q=b[12];b[13]!==r?(o=r!=null&&j.jsx(c("MWXComposerButtonContext.react").Provider,{value:l,children:j.jsx(d("react-strict-dom").html.div,{style:k.rightAddon,children:r})}),b[13]=r,b[14]=o):o=b[14];b[15]!==g||b[16]!==s||b[17]!==h||b[18]!==q||b[19]!==o?(e=j.jsxs(c("MWXComposerRow.react"),{"data-testid":void 0,xStyle:s,children:[h,q,o]}),b[15]=g,b[16]=s,b[17]=h,b[18]=q,b[19]=o,b[20]=e):e=b[20];return e}g["default"]=a}),98);
__d("MWXComposerIconButton.react",["MWXCircleButton.react","MWXComposerButtonContext.react","MWXThreadThemeColor","MWXTooltip.react","react","react-strict-dom"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;var j=b.useContext,k=b.c,l={horizontalPaddingSmall:{paddingStart:"x1h0ha7o",paddingEnd:"xg83lxy",paddingLeft:null,paddingRight:null,$$css:!0},layoutWrapper:{flexGrow:"x1c4vz4f",flexShrink:"x2lah0s",$$css:!0}};e=i.forwardRef(a);function a(a,b){var e=k(31),f;e[0]!==a?(f=babelHelpers["extends"]({},a),e[0]=a,e[1]=f):f=e[1];var g,h,m,n,o;if(e[2]!==f){a=f;n=a.color;o=a.size;g=a.type;m=a.wrapperStyle;h=a.wrapperXStyle;a=babelHelpers.objectWithoutPropertiesLoose(a,["color","size","type","wrapperStyle","wrapperXStyle"]);e[2]=f;e[3]=g;e[4]=h;e[5]=m;e[6]=n;e[7]=o;e[8]=a}else g=e[3],h=e[4],m=e[5],n=e[6],o=e[7],a=e[8];g=g===void 0?"deemphasized":g;var p=j(c("MWXComposerButtonContext.react")),q=p.color,r=p.iconRatio,s=p.paddingHorizontal;p=p.size;r=r===void 0?"medium":r;s=s===void 0?"none":s;p=p===void 0?36:p;s=s==="small"&&l.horizontalPaddingSmall;var t;e[9]!==h||e[10]!==m?(t=[h,m],e[9]=h,e[10]=m,e[11]=t):t=e[11];e[12]!==s||e[13]!==t?(h=[s,l.layoutWrapper,t],e[12]=s,e[13]=t,e[14]=h):h=e[14];if(e[15]!==n||e[16]!==q){t=(s=(m=n)!=null?m:q)!=null?s:d("MWXThreadThemeColor").mwxThreadThemeColor("var(--chat-composer-button-color, var(--accent))");e[15]=n;e[16]=q;e[17]=t}else t=e[17];s=(m=o)!=null?m:p;e[18]!==a||e[19]!==t||e[20]!==r||e[21]!==b||e[22]!==s||e[23]!==g?(n=i.jsx(c("MWXCircleButton.react"),babelHelpers["extends"]({},a,{color:t,iconRatio:r,ref:b,size:s,type:g})),e[18]=a,e[19]=t,e[20]=r,e[21]=b,e[22]=s,e[23]=g,e[24]=n):n=e[24];e[25]!==f.label||e[26]!==n?(q=i.jsx(c("MWXTooltip.react"),{position:"above",tooltip:f.label,children:n}),e[25]=f.label,e[26]=n,e[27]=q):q=e[27];e[28]!==h||e[29]!==q?(o=i.jsx(d("react-strict-dom").html.div,{style:h,children:q}),e[28]=h,e[29]=q,e[30]=o):o=e[30];return o}f=e;g["default"]=f}),98);
__d("MWXComposerInputArea.react",["MWXComposerButtonContext.react","MWXComposerRow.react","react","react-strict-dom"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||(h=d("react"))).c,j=h,k={colors:{backgroundColor:"x16sw7j7",borderTopStartRadius:"x107yiy2",borderTopEndRadius:"xv8uw2v",borderBottomEndRadius:"x1tfwpuw",borderBottomStartRadius:"x2g32xy",borderTopWidth:"x178xt8z",borderEndWidth:"xm81vs4",borderBottomWidth:"xso031l",borderStartWidth:"xy80clv",marginEnd:"x1w0mnb",marginStart:"x1mnrxsn",$$css:!0},flexLayout:{display:"x78zum5",flexDirection:"xdt5ytf",flexGrow:"x1iyjqo2",flexShrink:"xs83m0k",minWidth:"x13qp9f6",overflowX:"x6ikm8r",overflowY:"x10wlt62",$$css:!0}},l={iconRatio:"large",paddingHorizontal:"none",size:28};function a(a){var b=i(6),e=a.children;a=a.header;var f;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(f=[k.colors,k.flexLayout],b[0]=f):f=b[0];var g;b[1]!==e?(g=j.jsx(c("MWXComposerRow.react"),{padding:4,children:e}),b[1]=e,b[2]=g):g=b[2];b[3]!==a||b[4]!==g?(e=j.jsx(c("MWXComposerButtonContext.react").Provider,{value:l,children:j.jsxs(d("react-strict-dom").html.div,{style:f,children:[a,g]})}),b[3]=a,b[4]=g,b[5]=e):e=b[5];return e}g["default"]=a}),98);
__d("MWXComposerSpinner.react",["MWXComposerButtonContext.react","MWXSpinner.react","MWXTooltip.react","react","react-strict-dom"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;var j=b.useContext,k=b.c,l={horizontalPaddingSmall:{paddingStart:"x1h0ha7o",paddingEnd:"xg83lxy",paddingLeft:null,paddingRight:null,$$css:!0},layoutWrapper:{alignItems:"x6s0dn4",display:"x78zum5",flexGrow:"x1c4vz4f",flexShrink:"x2lah0s",justifyContent:"xl56j7k",$$css:!0}};function a(a){var b=k(27),e,f,g,h,m,n,o;b[0]!==a?(e=a.color,o=a.label,g=a.size,f=a.spinnerSize,m=a.wrapperStyle,h=a.wrapperXStyle,n=babelHelpers.objectWithoutPropertiesLoose(a,["color","label","size","spinnerSize","wrapperStyle","wrapperXStyle"]),b[0]=a,b[1]=e,b[2]=f,b[3]=g,b[4]=h,b[5]=m,b[6]=n,b[7]=o):(e=b[1],f=b[2],g=b[3],h=b[4],m=b[5],n=b[6],o=b[7]);a=e===void 0?"blue":e;e=f===void 0?20:f;f=j(c("MWXComposerButtonContext.react"));var p=f.paddingHorizontal;f=f.size;p=p===void 0?"none":p;f=f===void 0?36:f;g=((g=g)!=null?g:f)+"px";f=p==="small"&&l.horizontalPaddingSmall;b[8]!==h||b[9]!==m?(p=[h,m],b[8]=h,b[9]=m,b[10]=p):p=b[10];b[11]!==g?(h=[{height:g,width:g}],b[11]=g,b[12]=h):h=b[12];b[13]!==f||b[14]!==p||b[15]!==h?(m=[f,l.layoutWrapper,p,h],b[13]=f,b[14]=p,b[15]=h,b[16]=m):m=b[16];b[17]!==a||b[18]!==e||b[19]!==n?(g=i.jsx(c("MWXSpinner.react"),babelHelpers["extends"]({color:a,size:e},n)),b[17]=a,b[18]=e,b[19]=n,b[20]=g):g=b[20];b[21]!==o||b[22]!==g?(f=i.jsx(c("MWXTooltip.react"),{position:"above",tooltip:o,children:g}),b[21]=o,b[22]=g,b[23]=f):f=b[23];b[24]!==m||b[25]!==f?(p=i.jsx(d("react-strict-dom").html.div,{style:m,children:f}),b[24]=m,b[25]=f,b[26]=p):p=b[26];return p}g["default"]=a}),98);
__d("MWXComposerTextEditor.react",["CometLexicalContentEditable.react","CometLexicalPlaceholder.react","LexicalErrorBoundary","LexicalPlainTextPlugin","MWXRowItem.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||(h=d("react"))).c,j=h,k={padding:{marginBottom:"x12nagc",marginEnd:"x1w0mnb",marginStart:"x1mnrxsn",marginTop:"x1gslohp",maxHeight:"xctk3hg",minWidth:"x900493",overflowY:"x1odjw0f",paddingTop:"xexx8yu",paddingEnd:"x4uap5",paddingBottom:"x18d9i69",paddingStart:"xkhd6sd",$$css:!0}};function a(a){var b=i(11),e=a.children,f=a.contentEditableProps,g=a.placeholderText;a=a.testid;var h;b[0]!==g?(h=g==null?{}:{"aria-placeholder":g,placeholder:j.jsx(c("CometLexicalPlaceholder.react"),{children:g})},b[0]=g,b[1]=h):h=b[1];g=h;b[2]!==a||b[3]!==g||b[4]!==f?(h=j.jsx(c("CometLexicalContentEditable.react"),babelHelpers["extends"]({tabIndex:0,webDriverTestID:a},g,f)),b[2]=a,b[3]=g,b[4]=f,b[5]=h):h=b[5];a=h;b[6]!==a?(g=j.jsx(d("LexicalPlainTextPlugin").PlainTextPlugin,{ErrorBoundary:d("LexicalErrorBoundary").LexicalErrorBoundary,contentEditable:a}),b[6]=a,b[7]=g):g=b[7];b[8]!==g||b[9]!==e?(f=j.jsxs(c("MWXRowItem.react"),{expanding:!0,verticalAlign:"center",xstyle:k.padding,children:[g,e]}),b[8]=g,b[9]=e,b[10]=f):f=b[10];return f}g["default"]=a}),98);
__d("MWXComposer.react",["LexicalComposerContext","LexicalHistoryPlugin","MWXComposerAttachmentPreview.react","MWXComposerHeader.react","MWXComposerIconButton.react","MWXComposerInputArea.react","MWXComposerRow.react","MWXComposerSpinner.react","MWXComposerTextEditor.react","react","react-strict-dom"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;b.useMemo;var j=b.c,k={composer:{backgroundColor:"xt5xv9l",contain:"x6wvzqs",$$css:!0},flexLayout:{alignItems:"xpqajaz",display:"x78zum5",flexDirection:"xdt5ytf",flexGrow:"x1c4vz4f",flexShrink:"xs83m0k",minWidth:"x13qp9f6",$$css:!0},padding:{paddingTop:"xz9dl7a",paddingBottom:"xsag5q8",paddingStart:"x1e558r4",paddingEnd:"x150jy0e",paddingLeft:null,paddingRight:null,$$css:!0}};function a(a){var b=j(14),e=a.children,f=a.editor,g=a.header;a=a.testid;var h;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(h=d("LexicalComposerContext").createLexicalComposerContext(),b[0]=h):h=b[0];h=h;b[1]!==f?(h=[f,h],b[1]=f,b[2]=h):h=b[2];f=h;h=f;b[3]===Symbol["for"]("react.memo_cache_sentinel")?(f=[k.composer,k.flexLayout],b[3]=f):f=b[3];var l;b[4]!==a||b[5]!==e?(l=i.jsx(c("MWXComposerRow.react"),{"data-testid":void 0,xStyle:k.padding,children:e}),b[4]=a,b[5]=e,b[6]=l):l=b[6];b[7]!==g||b[8]!==l?(a=i.jsxs(d("react-strict-dom").html.div,{style:f,children:[g,l]}),b[7]=g,b[8]=l,b[9]=a):a=b[9];b[10]===Symbol["for"]("react.memo_cache_sentinel")?(e=i.jsx(d("LexicalHistoryPlugin").HistoryPlugin,{}),b[10]=e):e=b[10];b[11]!==h||b[12]!==a?(f=i.jsxs(d("LexicalComposerContext").LexicalComposerContext.Provider,{value:h,children:[a,e]}),b[11]=h,b[12]=a,b[13]=f):f=b[13];return f}e={Add:d("MWXComposerAttachmentPreview.react").MWXComposerAddAttachmentButton,FilePreview:d("MWXComposerAttachmentPreview.react").MWXComposerFileAttachmentPreview,ImagePreview:d("MWXComposerAttachmentPreview.react").MWXComposerImageAttachmentPreview,VideoPreview:d("MWXComposerAttachmentPreview.react").MWXComposerVideoAttachmentPreview};g.Composer=a;g.Button=c("MWXComposerIconButton.react");g.TextEditor=c("MWXComposerTextEditor.react");g.InputArea=c("MWXComposerInputArea.react");g.Header=c("MWXComposerHeader.react");g.Row=c("MWXComposerRow.react");g.Spinner=c("MWXComposerSpinner.react");g.Attachments=e}),98);
__d("MWXComposerButtonGroupContext.react",["react"],(function(a,b,c,d,e,f,g){"use strict";var h;a=h||d("react");b=a.createContext({isMenu:!1});g["default"]=b}),98);
__d("MWXComposerButtonGroupButton.react",["MWXComposerButtonGroupContext.react","MWXComposerIconButton.react","MWXMenuItem.react","MWXThreadThemeColor","react","react-forget-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;b.useContext;var j=b.c;e=i.forwardRef(a);function a(a,b){var e=j(35),f;e[0]!==a?(f=babelHelpers["extends"]({},a),e[0]=a,e[1]=f):f=e[1];var g,h,l,m,n,o;if(e[2]!==f){a=f;h=a.color;g=a.icon;l=a.label;m=a.onPress;n=a.preventClosingMenuOnSelect;o=a.testid;a=babelHelpers.objectWithoutPropertiesLoose(a,["color","icon","label","onPress","preventClosingMenuOnSelect","testid"]);e[2]=f;e[3]=g;e[4]=h;e[5]=l;e[6]=m;e[7]=n;e[8]=o;e[9]=a}else g=e[3],h=e[4],l=e[5],m=e[6],n=e[7],o=e[8],a=e[9];f=d("react-forget-runtime").useContextWithBailoutExperiment__unstable(c("MWXComposerButtonGroupContext.react"),k);var p=f.isMenu,q=f.styleForButton;f=f.xstyleForButton;if(p){e[10]!==g?(p=g.asMenuItemIcon_ESCAPE_HATCH(),e[10]=g,e[11]=p):p=e[11];if(e[12]!==h){var r;r=(r=h)!=null?r:d("MWXThreadThemeColor").mwxThreadThemeColor("var(--chat-composer-button-color, var(--accent))");e[12]=h;e[13]=r}else r=e[13];var s;e[14]!==l||e[15]!==p||e[16]!==r||e[17]!==m||e[18]!==n||e[19]!==b||e[20]!==o||e[21]!==a?(s=i.jsx(c("MWXMenuItem.react"),babelHelpers["extends"]({"aria-label":l,icon:p,iconColor:r,onClick:m,preventClosingMenuOnSelect:n,primaryText:l,ref:b,testid:void 0},a)),e[14]=l,e[15]=p,e[16]=r,e[17]=m,e[18]=n,e[19]=b,e[20]=o,e[21]=a,e[22]=s):s=e[22];return s}e[23]!==h?(p=h!=null?{color:h}:{},e[23]=h,e[24]=p):p=e[24];e[25]!==g||e[26]!==l||e[27]!==m||e[28]!==b||e[29]!==o||e[30]!==q||e[31]!==f||e[32]!==p||e[33]!==a?(r=i.jsx(c("MWXComposerIconButton.react"),babelHelpers["extends"]({icon:g,label:l,onPress:m,ref:b,testid:void 0,wrapperStyle:q,wrapperXStyle:f},p,a)),e[25]=g,e[26]=l,e[27]=m,e[28]=b,e[29]=o,e[30]=q,e[31]=f,e[32]=p,e[33]=a,e[34]=r):r=e[34];return r}function k(a){return[a.isMenu,a.styleForButton,a.xstyleForButton]}f=e;g["default"]=f}),98);
__d("withMWXPopover",["BaseMenuContext","BaseMultiPageViewContext","BasePopoverTrigger.react","MWXPopover.react","MWXPopoverLoadingState.react","lazyLoadComponent","react","tracePolicyFromResource","useCometPopoverInteractionTracing","withCometPlaceholder"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;var j=b.useContext;b.useMemo;var k=b.c;function a(a,b){function e(e){var f=k(42),g,h,l,m,n,o,p;f[0]!==e?(l=e.onHoverIn,m=e.onHoverOut,g=e.popover,h=e.popoverPresentationProps,o=e.popoverProps,p=e.preloadTrigger,n=babelHelpers.objectWithoutPropertiesLoose(e,["onHoverIn","onHoverOut","popover","popoverPresentationProps","popoverProps","preloadTrigger"]),f[0]=e,f[1]=g,f[2]=h,f[3]=l,f[4]=m,f[5]=n,f[6]=o,f[7]=p):(g=f[1],h=f[2],l=f[3],m=f[4],n=f[5],o=f[6],p=f[7]);e=(e=j(c("BaseMenuContext")))!=null?e:{};var q=e.onClose;e=(e=j(c("BaseMultiPageViewContext")))!=null?e:{};var r=e.pushPage;if(f[8]!==g){f[10]===Symbol["for"]("react.memo_cache_sentinel")?(e=i.jsx(c("MWXPopoverLoadingState.react"),{withArrow:!1}),f[10]=e):e=f[10];e=d("withCometPlaceholder").withCometPlaceholder(c("lazyLoadComponent")(g),e,b);f[8]=g;f[9]=e}else e=f[9];e=e;var s=e;f[11]!==g?(e=c("tracePolicyFromResource")("comet.popover",g),f[11]=g,f[12]=e):e=f[12];e=c("useCometPopoverInteractionTracing")(e,"lazy");if(f[13]!==h){var t;t=(t=h)!=null?t:{};f[13]=h;f[14]=t}else t=f[14];var u,v;if(f[15]!==t){h=t;u=h.align;v=h.position;h=babelHelpers.objectWithoutPropertiesLoose(h,["align","position"]);f[15]=t;f[16]=u;f[17]=v;f[18]=h}else u=f[16],v=f[17],h=f[18];t=u===void 0?"middle":u;u=v===void 0?"above":v;f[19]!==s?(v=function(a){return i.jsx(c("MWXPopover.react"),{withArrow:!0,children:i.jsx(s,babelHelpers["extends"]({},a))})},f[19]=s,f[20]=v):v=f[20];v=v;v=v;var w;f[21]!==s||f[22]!==q?(w=function(a){return function(b){var c;b=b.onReturn;return i.jsx(s,babelHelpers["extends"]({},a,{onClose:(c=q)!=null?c:b}))}},f[21]=s,f[22]=q,f[23]=w):w=f[23];w=w;var x=w;f[24]!==l||f[25]!==m||f[26]!==n||f[27]!==r||f[28]!==q||f[29]!==x||f[30]!==o?(w=function(b,c,d,e,f){return i.jsx(a,babelHelpers["extends"]({onHoverIn:function(a){e(a),l==null?void 0:l(a)},onHoverOut:function(a){f(),m==null?void 0:m(a)}},n,{onPress:function(){var b;for(var d=arguments.length,a=new Array(d),e=0;e<d;e++)a[e]=arguments[e];var f=a;r!=null&&q!=null?r(x(o)):c();n.onPress==null?void 0:(b=n).onPress.apply(b,f)},preventClosingMenuOnSelect:!0,ref:b}))},f[24]=l,f[25]=m,f[26]=n,f[27]=r,f[28]=q,f[29]=x,f[30]=o,f[31]=w):w=f[31];var y;f[32]!==t||f[33]!==u||f[34]!==h||f[35]!==e||f[36]!==v||f[37]!==g||f[38]!==o||f[39]!==p||f[40]!==w?(y=i.jsx(c("BasePopoverTrigger.react"),babelHelpers["extends"]({align:t,position:u},h,{interactionTracker:e,popover:v,popoverPreloadResource:g,popoverProps:o,preloadTrigger:p,children:w})),f[32]=t,f[33]=u,f[34]=h,f[35]=e,f[36]=v,f[37]=g,f[38]=o,f[39]=p,f[40]=w,f[41]=y):y=f[41];return y}return e}g["default"]=a}),98);
__d("MWXComposerButtonGroupPopoverButton.react",["MWXComposerButtonGroupButton.react","react","withMWXPopover"],(function(a,b,c,d,e,f,g){"use strict";var h;h||d("react");a=c("withMWXPopover")(c("MWXComposerButtonGroupButton.react"));b=a;g["default"]=b}),98);
__d("MWXIconFaceHappy",["MWXSvgIcon","SVGIcon","cr:12413","gkx"],(function(a,b,c,d,e,f,g){"use strict";a=d("MWXSvgIcon").mwxSvgIcon(d("SVGIcon").svgIcon(b("cr:12413")),c("gkx")("23219"));g["default"]=a}),98);
__d("MWXComposerEmojiButton.react",["fbt","JSResourceForInteraction","LexicalComposerContext","MWXComposerButtonGroupPopoverButton.react","MWXIconFaceHappy","Promise","promiseDone","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=(j||(j=d("react"))).c,l=j,m=c("JSResourceForInteraction")("cometAddEmojiToComposerForLexical").__setRef("MWXComposerEmojiButton.react");function a(){var a=k(4),e=d("LexicalComposerContext").useLexicalComposerContext(),f=e[0];a[0]===Symbol["for"]("react.memo_cache_sentinel")?(e=h._("__JHASH__450DFbxuM_0__JHASH__"),a[0]=e):e=a[0];var g;a[1]===Symbol["for"]("react.memo_cache_sentinel")?(g=c("JSResourceForInteraction")("MWV2ComposerEmojiPickerForJSResource").__setRef("MWXComposerEmojiButton.react"),a[1]=g):g=a[1];a[2]!==f?(e=l.jsx(c("MWXComposerButtonGroupPopoverButton.react"),{icon:c("MWXIconFaceHappy"),label:e,onPress:n,popover:g,popoverProps:{onSelect:function(a){return c("promiseDone")(m.load(),function(c){c(a,f,16);return(i||(i=b("Promise"))).resolve()})},withArrow:!1},preloadTrigger:"button",testid:void 0}),a[2]=f,a[3]=e):e=a[3];return e}function n(){m.preload()}g["default"]=a}),226);
__d("useMAWGetSendEditActionForSecure",["FBLogger","LSMessagingThreadAttributionType","MAWBridgeSendAndReceive","MAWDbMsg","MAWExternalId","MAWJobDefinitions","MAWLoggerUtils","MAWMessageSendReporter","MAWMiActOnActThreadReady","MAWTimedJob","QPLUserFlow","ReQL","ReQLSuspense","WAJobOrchestratorTypes","gkx","promiseDone","qpl","react","sendToSentQPLLogger","sendToSentQPLUtils","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i;b=i||d("react");b.useCallback;var j=b.c;function a(a){var b=j(9),e;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(e=d("MAWLoggerUtils").getInstanceKey(),b[0]=e):e=b[0];var g=e,i=(h||(h=c("useReStore")))(),k;b[1]!==a||b[2]!==i?(e=function(){return a!=null?d("ReQL").fromTableAscending(i.tables.threads).getKeyRange(a):d("ReQL").empty()},k=[i,a],b[1]=a,b[2]=i,b[3]=e,b[4]=k):(e=b[3],k=b[4]);var l=d("ReQLSuspense").useFirst(e,k,f.id+":47");b[5]!==a||b[6]!==i||b[7]!==l?(e=function(b,e){if(a==null||b==null)return;var f=d("MAWDbMsg").toMsgId(b);if(f==null)return;c("QPLUserFlow").start(c("qpl")._(1056849558,"2236"),{instanceKey:g});c("promiseDone")(d("MAWMiActOnActThreadReady").onActThreadReady(i.tables,a,"MWV2ComposerEditContainer.react",function(a,b){return d("MAWBridgeSendAndReceive").sendAndReceive("backend","getProtocolMsgIdByMsgId",{msgId:f}).then(function(a){if(a!=null){var b=d("sendToSentQPLLogger").markSendToSentStartWithAnnotation(l,{},c("LSMessagingThreadAttributionType").UNKNOWN);d("sendToSentQPLUtils").setS2sKeyForOfflineMessageId(a.externalId,b);if(c("gkx")("7854")){var f=d("MAWExternalId").generateExternalId(),g=a.chat,h=d("MAWBridgeSendAndReceive").sendAndReceive("backend","sendEditMsg",{args:{editMsgContent:{content:e,mentionedJids:[]},originalProtocolMsgId:a},chatJid:g,externalId:f,qplEventType:c("qpl")._(25313175,"1551"),qplInstanceKey:b});return d("MAWMessageSendReporter").MAWMessageSendReporter({chatJid:g,externalId:f},h,{qplEventType:c("qpl")._(25313175,"1551"),qplInstanceKey:b},i)}else return d("MAWTimedJob").TimedUIJobStarters.waitUntilPersisted(d("MAWJobDefinitions").jobSerializers.sendEditMsg({editMsgContent:{content:e,mentionedJids:[]},originalProtocolMsgId:a,s2sInstanceKey:b},d("MAWExternalId").generateExternalId(),{priority:d("WAJobOrchestratorTypes").JOB_PRIORITY.UI_ACTION}))["catch"](function(a){d("sendToSentQPLLogger").markSendToSentFail(b,"edit_job_fail",a)})}}).then(function(a){c("QPLUserFlow").endSuccess(c("qpl")._(1056849558,"2236"),{instanceKey:g})})["catch"](function(a){c("FBLogger")("messenger_web_messaging").catching(a).mustfix("Failed to edit message: %s.",a),c("QPLUserFlow").endFailure(c("qpl")._(1056849558,"2236"),"failure",{instanceKey:g})})}))},b[5]=a,b[6]=i,b[7]=l,b[8]=e):e=b[8];return e}g["default"]=a}),98);
__d("useMAWGetSendEditActionforOpen",["LSFactory","LSOptimisticEditMessageStoredProcedure","promiseDone","react","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i;b=i||d("react");b.useCallback;var j=b.c;function a(){var a=j(2),b=(h||(h=c("useReStore")))(),d;a[0]!==b?(d=function(a,d){return c("promiseDone")(b.runInTransaction(function(b){return c("LSOptimisticEditMessageStoredProcedure")(c("LSFactory")(b),{messageId:a,text:d})},"readwrite",void 0,void 0,f.id+":27"))},a[0]=b,a[1]=d):d=a[1];return d}g["default"]=a}),98);
__d("useMWComposerEmojiTransform",["react","requireDeferred","useDeferredModuleOnReady"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");var i=b.useEffect,j=b.c,k=c("requireDeferred")("getUpgradedCometEmojiComposerHandler").__setRef("useMWComposerEmojiTransform");function a(a){var b=j(4),d=c("useDeferredModuleOnReady")(k),e,f;b[0]!==d||b[1]!==a?(e=function(){return d==null?void 0:d(a,16)},f=[a,d],b[0]=d,b[1]=a,b[2]=e,b[3]=f):(e=b[2],f=b[3]);i(e,f)}g["default"]=a}),98);
__d("useMWXComposerClearAndSendOnEnter",["Lexical","MLCKeyBindingUtil","gkx","justknobx","react"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");b.useCallback;var i=b.useInsertionEffect,j=b.useLayoutEffect,k=b.useRef,l=b.c;function a(a,b){var e=l(13),f=a.clearReplyState,g=a.editor,h=a.onSend,m=k(b),n;e[0]!==b?(a=function(){m.current=b},n=[b],e[0]=b,e[1]=a,e[2]=n):(a=e[1],n=e[2]);i(a,n);e[3]!==h||e[4]!==f||e[5]!==g?(a=function(){var a=h(m.current);f==null?void 0:f();(a||!c("justknobx")._("2597"))&&g.dispatchCommand(d("Lexical").CLEAR_EDITOR_COMMAND)},e[3]=h,e[4]=f,e[5]=g,e[6]=a):a=e[6];var o=a;e[7]!==g||e[8]!==o?(n=function(){return g.registerCommand(d("Lexical").KEY_ENTER_COMMAND,function(a){if(a!=null&&!a.shiftKey&&!a.altKey&&(!c("gkx")("23402")||d("MLCKeyBindingUtil").hasCommandModifier(a))){a.preventDefault();o();return!0}return!1},d("Lexical").COMMAND_PRIORITY_LOW)},a=[g,o],e[7]=g,e[8]=o,e[9]=n,e[10]=a):(n=e[9],a=e[10]);j(n,a);e[11]!==o?(n={onSend:o},e[11]=o,e[12]=n):n=e[12];return n}g["default"]=a}),98);
__d("useMWXLexicalEditor",["CometLexicalEmojiNode","Lexical","MessengerLexicalActorNode","cometLexicalBaseTheme","cr:3101","cr:6138","react","useLexicalInitializeEditor__DEPRECATED","useMWPLexicalClearEditor","useStable"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).c;e=b("cr:3101")||b("cr:6138");var j=[d("MessengerLexicalActorNode").MessengerLexicalActorNode,e==null?void 0:e.MessengerLexicalCommandNode,d("CometLexicalEmojiNode").EmojiNode];function a(){var a=i(2),b=c("useStable")(k);c("useMWPLexicalClearEditor")(b);c("useLexicalInitializeEditor__DEPRECATED")(b);var d;a[0]!==b?(d={editor:b},a[0]=b,a[1]=d):d=a[1];return d}function k(){return d("Lexical").createEditor({namespace:"MWPEditor",nodes:j.filter(Boolean),onError:l,theme:babelHelpers["extends"]({},c("cometLexicalBaseTheme"),{paragraph:"xat24cr xdj266r"})})}function l(){}g.useMWXLexicalEditor=a}),98);
__d("MWV2ComposerEditContainer.react",["fbt","LSMessagingThreadTypeUtil","Lexical","LexicalText","MAWEditMessageContext.react","MAWVault","MWLSThreadDisplayContext","MWPActor.react","MWXComposer.react","MWXComposerEmojiButton.react","MWXIconCheckmarkCircle","MWXIconCross","ReQL","ReQLSuspense","isStringNullOrEmpty","react","react-forget-runtime","useLogMAWEditMessage","useMAWGetSendEditActionForSecure","useMAWGetSendEditActionforOpen","useMWComposerEmojiTransform","useMWXComposerClearAndSendOnEnter","useMWXLexicalEditor","usePrepopulateLexicalEditor","useReStore"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=j||(j=d("react"));b=j;b.useContext;var l=b.useEffect;b.useMemo;var m=b.useState,n=b.c;function a(a){var b=n(60),e=a.confirmationText,g=a.contentEditableProps,j=a.editMessageData,q=a.headerText,r=a.onEditCancelCallback;a=a.onEditTriggerCallback;e=e===void 0?null:e;q=q===void 0?null:q;var s=r===void 0?null:r,t=a===void 0?null:a,u=(i||(i=c("useReStore")))();r=d("react-forget-runtime").useContextWithBailoutExperiment__unstable(d("MAWEditMessageContext.react").Context,o);var v=r.setEditMessageData,w=d("MWPActor.react").useActor();b[0]!==u.tables.messages||b[1]!==j?(a=function(){return d("ReQL").fromTableAscending(u.tables.messages).getKeyRange(j==null?void 0:j.threadKey,j==null?void 0:j.timestampMs,j==null?void 0:j.messageId)},b[0]=u.tables.messages,b[1]=j,b[2]=a):a=b[2];r=j==null?void 0:j.messageId;var x=j==null?void 0:j.threadKey,y=j==null?void 0:j.timestampMs,z;b[3]!==u||b[4]!==r||b[5]!==x||b[6]!==y?(z=[u,r,x,y],b[3]=u,b[4]=r,b[5]=x,b[6]=y,b[7]=z):z=b[7];var A=d("ReQLSuspense").useFirst(a,z,f.id+":55"),B=c("useMAWGetSendEditActionforOpen")(),C=c("useMAWGetSendEditActionForSecure")(A==null?void 0:A.threadKey);A==null?void 0:A.text;x=(r=A==null?void 0:A.text)!=null?r:"";b[8]!==x?(y=d("MAWVault").unvault(x).trim(),b[8]=x,b[9]=y):y=b[9];a=y;var D=a,E=c("useLogMAWEditMessage")();z=d("useMWXLexicalEditor").useMWXLexicalEditor();var F=z.editor;b[10]!==F||b[11]!==D||b[12]!==j||b[13]!==C||b[14]!==A||b[15]!==B||b[16]!==E||b[17]!==w||b[18]!==v||b[19]!==t?(r=function(){var a=F.getEditorState().read(d("LexicalText").$rootTextContent).trim();if(c("isStringNullOrEmpty")(a)||a===D)return!1;d("LSMessagingThreadTypeUtil").isArmadilloSecure(j.threadType)?C(A==null?void 0:A.messageId,a):B(j.messageId,a);E(j.threadType,j.threadKey,j.messageId,w,"EDIT_MESSAGE");v(null);t&&t();return!0},b[10]=F,b[11]=D,b[12]=j,b[13]=C,b[14]=A,b[15]=B,b[16]=E,b[17]=w,b[18]=v,b[19]=t,b[20]=r):r=b[20];var G=r;p(F,v,s);b[21]!==F||b[22]!==G?(x={clearReplyState:null,editor:F,onSend:G},b[21]=F,b[22]=G,b[23]=x):x=b[23];c("useMWXComposerClearAndSendOnEnter")(x);y=m(!1);a=y[0];var H=y[1];b[24]!==F||b[25]!==D?(z=function(){return F.registerTextContentListener(function(a){a=a.trim();H(!c("isStringNullOrEmpty")(a)&&a!==D)})},r=[F,D],b[24]=F,b[25]=D,b[26]=z,b[27]=r):(z=b[26],r=b[27]);l(z,r);c("usePrepopulateLexicalEditor")(F,D,!0);c("useMWComposerEmojiTransform")(F);x=d("MWLSThreadDisplayContext").useMWLSThreadDisplayContext();y=x==="Inbox"?32:24;if(b[28]!==q){r=(z=q)!=null?z:h._("__JHASH__36XeYdlCuO8__JHASH__");b[28]=q;b[29]=r}else r=b[29];b[30]===Symbol["for"]("react.memo_cache_sentinel")?(x=h._("__JHASH__NFQuJJERXoJ__JHASH__"),b[30]=x):x=b[30];b[31]!==v||b[32]!==s?(z=function(){v(null),s&&s()},b[31]=v,b[32]=s,b[33]=z):z=b[33];b[34]!==z||b[35]!==y?(q=k.jsx(d("MWXComposer.react").Button,{color:"primary",icon:c("MWXIconCross"),label:x,onPress:z,size:y}),b[34]=z,b[35]=y,b[36]=q):q=b[36];b[37]!==r||b[38]!==q?(x=k.jsx(d("MWXComposer.react").Header,{hasTopBorder:!0,headlineText:r,rightAddon:q},0),b[37]=r,b[38]=q,b[39]=x):x=b[39];b[40]!==g?(z=k.jsx(d("MWXComposer.react").TextEditor,{contentEditableProps:g,testid:void 0}),b[40]=g,b[41]=z):z=b[41];b[42]===Symbol["for"]("react.memo_cache_sentinel")?(y=k.jsx(c("MWXComposerEmojiButton.react"),{}),b[42]=y):y=b[42];b[43]!==z?(r=k.jsxs(d("MWXComposer.react").InputArea,{children:[z,y]}),b[43]=z,b[44]=r):r=b[44];q=!a;if(b[45]!==e){y=(g=e)!=null?g:h._("__JHASH__645ugDJYeSD__JHASH__");b[45]=e;b[46]=y}else y=b[46];b[47]!==G?(z=function(){G()},b[47]=G,b[48]=z):z=b[48];b[49]!==q||b[50]!==y||b[51]!==z?(a=k.jsx(d("MWXComposer.react").Button,{disabled:q,icon:c("MWXIconCheckmarkCircle"),label:y,onPress:z,testid:void 0}),b[49]=q,b[50]=y,b[51]=z,b[52]=a):a=b[52];b[53]!==r||b[54]!==a?(g=k.jsxs(d("MWXComposer.react").Row,{children:[r,a]}),b[53]=r,b[54]=a,b[55]=g):g=b[55];b[56]!==F||b[57]!==x||b[58]!==g?(e=k.jsx(d("MWXComposer.react").Composer,{editor:F,header:x,children:g}),b[56]=F,b[57]=x,b[58]=g,b[59]=e):e=b[59];return e}function o(a){return[a.setEditMessageData]}function p(a,b,c){var e=n(5),f=c===void 0?null:c,g;e[0]!==a||e[1]!==b||e[2]!==f?(c=function(){return a.registerCommand(d("Lexical").KEY_ESCAPE_COMMAND,function(a){a.preventDefault();a.stopImmediatePropagation();a.stopPropagation();b(null);f&&f();return!0},d("Lexical").COMMAND_PRIORITY_CRITICAL)},g=[a,b,f],e[0]=a,e[1]=b,e[2]=f,e[3]=c,e[4]=g):(c=e[3],g=e[4]);l(c,g)}g["default"]=a}),226);
__d("MWChatReplyText.react",["fbt","MWChatTextFormatting","MWChatTextTransform","MWXMessageTextWithEntities.react","cr:2472","react","useStringWithSubstitutions"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||(i=d("react"));e=i;e.useMemo;var k=e.c;function a(a){var e=k(13),f=a.isBumpMessage,g=a.isHotLike,i=a.mentionIds,l=a.ranges,m=a.text,n=a.threadKey;a=a.transformEmoticons;f=f===void 0?!1:f;g=g===void 0?!1:g;a=a===void 0?!0:a;if(e[0]!==i){var o;o=new Set((o=i==null?void 0:i.split==null?void 0:i.split(","))!=null?o:[]);e[0]=i;e[1]=o}else o=e[1];i=o;o=i;e[2]!==m?(i=b("cr:2472")==null?m:b("cr:2472").unvault(m),e[2]=m,e[3]=i):i=e[3];m=i;i=(o=(i=d("useStringWithSubstitutions").useStringWithMentionSubstitutionsAndUpdatedRanges(m,[],o))==null?void 0:i.textWithSubstitutions)!=null?o:m;n=(o=d("useStringWithSubstitutions").useStringWithSubstitutions(m,n))!=null?o:m;e[4]===Symbol["for"]("react.memo_cache_sentinel")?(o=h._("__JHASH__fJLp3hO2Ffq__JHASH__").toString(),e[4]=o):o=e[4];m=o;o=g?m:f?n:i;e[5]===Symbol["for"]("react.memo_cache_sentinel")?(g="xi81zsa",e[5]=g):g=e[5];e[6]===Symbol["for"]("react.memo_cache_sentinel")?(m={MessengerTextFormatting:[d("MWChatTextFormatting").messageRenderer]},e[6]=m):m=e[6];e[7]!==a?(f=a?d("MWChatTextTransform").textTransformsNoVault:[],e[7]=a,e[8]=f):f=e[8];e[9]!==l||e[10]!==o||e[11]!==f?(n=j.jsx("div",{className:g,dir:"auto",children:j.jsx(c("MWXMessageTextWithEntities.react"),{maxLength:120,maxLines:2,ranges:l,renderers:m,text:o,transforms:f,truncationStyle:"ellipsis-only",withParagraphs:!1})}),e[9]=l,e[10]=o,e[11]=f,e[12]=n):n=e[12];return n}g["default"]=a}),226);
__d("MWV2ComposerReplyView.react",["fbt","ix","CometErrorBoundary.react","CometTriggerAccessibilityAlertContext","I64","LSContactGenderToGenderConst","LSHotEmojiSize","LSIntEnum","LSMessagingThreadTypeUtil","LsFalcoEventEntryPoint","LsReplyRenderedFalcoEvent","MWChatReplyText.react","MWPActor.react","MWPReplyContext.react","MWXIcon.react","MWXText.react","MWXTextPairing.react","MessagingAttachmentType","ReQL","ReQLSuspense","cr:2472","cr:4471","fbicon","getFBTSafeGenderFromGenderConst","isMWBumpMessage","mwCMIsAnyCMThread","qex","react","react-forget-runtime","useIsSecureMessage","useMAWSeparateReadsSelector","useReStore"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j,k,l,m,n=k||(k=d("react"));e=k;var o=e.useContext,p=e.useEffect,q=e.c;function r(a,e,f,g){if(g===!0)return h._("__JHASH__t6anprzsvcb__JHASH__");g=a.text;g=g!=null?b("cr:2472")==null?g:b("cr:2472").unvault(g):"";g=g==="\ud83d\udc4d"&&((l||(l=d("I64"))).equal((g=a.hotEmojiSize)!=null?g:(l||(l=d("I64"))).neg_one,(m||(m=d("LSIntEnum"))).ofNumber(c("LSHotEmojiSize").SMALL))||(l||(l=d("I64"))).equal((g=a.hotEmojiSize)!=null?g:(l||(l=d("I64"))).neg_one,(m||(m=d("LSIntEnum"))).ofNumber(c("LSHotEmojiSize").MEDIUM))||(l||(l=d("I64"))).equal((g=a.hotEmojiSize)!=null?g:(l||(l=d("I64"))).neg_one,(m||(m=d("LSIntEnum"))).ofNumber(c("LSHotEmojiSize").LARGE)))&&e;if(a.isUnsent)return h._("__JHASH__OtyP2J0Nwkd__JHASH__");var i=c("isMWBumpMessage")(a);if(a.text!=null&&a.text!==""){return n.jsx(c("MWChatReplyText.react"),{isBumpMessage:i,isHotLike:g,mentionIds:e?a.mentionIds:null,text:(i=a.text)!=null?i:h._("__JHASH__C1Hm6KH3mNE__JHASH__"),threadKey:a.threadKey})}if(f!=null){if((l||(l=d("I64"))).equal(f==null?void 0:f.attachmentType,(m||(m=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").IMAGE)))return h._("__JHASH__vuq_ksOZBHO__JHASH__");if((l||(l=d("I64"))).equal(f==null?void 0:f.attachmentType,(m||(m=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").STICKER)))return h._("__JHASH__7zoxdliwH6N__JHASH__");if((l||(l=d("I64"))).equal(f==null?void 0:f.attachmentType,(m||(m=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").VIDEO)))return h._("__JHASH__d9ky9I-E6BP__JHASH__");if((l||(l=d("I64"))).equal(f==null?void 0:f.attachmentType,(m||(m=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").ANIMATED_IMAGE)))return h._("__JHASH__i96Qg8bFARm__JHASH__");return(l||(l=d("I64"))).equal(f==null?void 0:f.attachmentType,(m||(m=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").AUDIO))?h._("__JHASH__omHtTlKW02d__JHASH__"):h._("__JHASH__L554Fq7JwGo__JHASH__")}return h._("__JHASH__C1Hm6KH3mNE__JHASH__")}function s(a,b,d,e,f){if(f===!0)return h._("__JHASH__6IDa6GP9mPa__JHASH__");if(a)return h._("__JHASH__iW_IRrZDexS__JHASH__");if(b!=null){return h._("__JHASH__O5URXTVzEEM__JHASH__",[h._param("name",n.jsx(c("MWXText.react"),{type:"headlineEmphasized5",children:e?b.name:(a=(f=d)!=null?f:b.firstName)!=null?a:b.name}),[1,c("getFBTSafeGenderFromGenderConst")(c("LSContactGenderToGenderConst")(b.gender))])])}return h._("__JHASH__Tq-wGwf_lB-__JHASH__")}function t(a){var b=q(26),e=a.isSecureThread,g=a.message,h=a.threadType;a=a.useContactFullname;var i=(j||(j=c("useReStore")))(),k=d("MWPActor.react").useActor(),m=(l||(l=d("I64"))).equal(g.senderId,k);b[0]!==i.tables.contacts||b[1]!==g.senderId?(k=function(){return d("ReQL").fromTableAscending(i.tables.contacts).getKeyRange(g.senderId)},b[0]=i.tables.contacts,b[1]=g.senderId,b[2]=k):k=b[2];var o;b[3]!==i||b[4]!==g.senderId?(o=[i,g.senderId],b[3]=i,b[4]=g.senderId,b[5]=o):o=b[5];var t=d("ReQLSuspense").useFirst(k,o,f.id+":252");b[6]!==i.tables.attachments||b[7]!==g.threadKey||b[8]!==g.messageId?(k=function(){return d("ReQL").fromTableAscending(i.tables.attachments).getKeyRange(g.threadKey,g.messageId)},b[6]=i.tables.attachments,b[7]=g.threadKey,b[8]=g.messageId,b[9]=k):k=b[9];b[10]!==i||b[11]!==g.messageId||b[12]!==g.threadKey?(o=[i,g.messageId,g.threadKey],b[10]=i,b[11]=g.messageId,b[12]=g.threadKey,b[13]=o):o=b[13];k=d("ReQLSuspense").useFirst(k,o,f.id+":257");o=d("ReQLSuspense").useFirst(function(){return t!=null&&!m?d("ReQL").fromTableAscending(i.tables.threads).getKeyRange(g.threadKey).map(function(a){var b=a.parentThreadKey;a=a.threadType;if(c("mwCMIsAnyCMThread")(a))return d("ReQLSuspense").first(d("ReQL").fromTableAscending(i.tables.community_folders).getKeyRange(b).map(function(a){a=a.folderId;return d("ReQLSuspense").first(d("ReQL").fromTableAscending(i.tables.contextual_profile_v1.index("associatedEntityIdAndOwner")).getKeyRange(a,t.id).map(function(a){return a.profileName}),f.id+":276")}),f.id+":272");else{a=d("ReQLSuspense").first(d("ReQL").fromTableAscending(i.tables.participants).getKeyRange(g.threadKey,t.id),f.id+":290");return(b=a==null?void 0:a.nickname)!=null?b:null}}):d("ReQL").empty()},[i,g.threadKey,t,m],f.id+":266");var v;b[14]===Symbol["for"]("react.memo_cache_sentinel")?(v=[],b[14]=v):v=b[14];p(u,v);b[15]!==h?(v={fallbackThreadType:h},b[15]=h,b[16]=v):v=b[16];h=c("useIsSecureMessage")(i,g,v);v=e&&!h;b[17]!==g||b[18]!==e||b[19]!==k||b[20]!==v?(h=r(g,e,k,v),b[17]=g,b[18]=e,b[19]=k,b[20]=v,b[21]=h):h=b[21];e=h;k=s(m,t,o,a,v);b[22]===Symbol["for"]("react.memo_cache_sentinel")?(h="xmo9yow",b[22]=h):h=b[22];b[23]!==e||b[24]!==k?(o=n.jsx("div",{className:h,children:n.jsx(c("MWXTextPairing.react"),{body:e,headline:k,level:4})}),b[23]=e,b[24]=k,b[25]=o):o=b[25];return o}function u(){c("LsReplyRenderedFalcoEvent").log(v)}function v(){return{funnel:{entry_point:d("LsFalcoEventEntryPoint").messageActions}}}function w(a){var b=q(15),e=a.isSecureThread,f=a.message,g=a.threadType;a=a.useContactFullname;e=e===void 0?!1:e;var j=d("react-forget-runtime").useContextWithBailoutExperiment__unstable(d("MWPReplyContext.react").MWPReplyContext,y),k=j.clearReply,l=o(c("CometTriggerAccessibilityAlertContext"));b[0]===Symbol["for"]("react.memo_cache_sentinel")?(j="x6s0dn4 xrdv0aw x8cjs6t x13fuv20 x178xt8z x78zum5 x1qughib xg8j3zb x14uny0o xvpee5o x889kno",b[0]=j):j=b[0];var m;b[1]!==e||b[2]!==f||b[3]!==g||b[4]!==a?(m=n.jsx(c("CometErrorBoundary.react"),{fallback:x,children:n.jsx(t,{isSecureThread:e,message:f,threadType:g,useContactFullname:a})}),b[1]=e,b[2]=f,b[3]=g,b[4]=a,b[5]=m):m=b[5];b[6]===Symbol["for"]("react.memo_cache_sentinel")?(e=h._("__JHASH__jHl6Cj_8ioz__JHASH__"),b[6]=e):e=b[6];b[7]===Symbol["for"]("react.memo_cache_sentinel")?(g=d("fbicon")._(i("478231"),12),b[7]=g):g=b[7];b[8]!==k||b[9]!==f.threadKey||b[10]!==l?(a=n.jsx(c("MWXIcon.react"),{"aria-label":e,color:"primary",icon:g,onPress:function(){k(f.threadKey,!0),l(h._("__JHASH__I4cDESLQyuo__JHASH__").toString(),{assertive:!1})}}),b[8]=k,b[9]=f.threadKey,b[10]=l,b[11]=a):a=b[11];b[12]!==m||b[13]!==a?(e=n.jsxs("div",{className:j,"data-testid":void 0,children:[m,a]}),b[12]=m,b[13]=a,b[14]=e):e=b[14];return e}function x(){return n.jsx(c("MWXText.react"),{type:"headlineEmphasized4",children:h._("__JHASH__viMkwR52t0r__JHASH__")})}x.displayName=x.name+" [from "+f.id+"]";function y(a){return[a.clearReply]}function a(a){var e=q(21),g=a.messageId,h=a.messageThreadKey,i=a.messageTimestamp,k=a.thread;a=a.useContactFullname;a=a===void 0?!1:a;var l=(j||(j=c("useReStore")))(),m;e[0]!==k.threadType?(m=d("LSMessagingThreadTypeUtil").isArmadilloSecure(k.threadType),e[0]=k.threadType,e[1]=m):m=e[1];m=m;var o;e[2]!==l.tables.messages||e[3]!==h||e[4]!==i||e[5]!==g?(o=function(){return d("ReQL").fromTableAscending(l.tables.messages).getKeyRange(h,i,g)},e[2]=l.tables.messages,e[3]=h,e[4]=i,e[5]=g,e[6]=o):o=e[6];var p;e[7]!==l||e[8]!==h||e[9]!==i||e[10]!==g?(p=[l,h,i,g],e[7]=l,e[8]=h,e[9]=i,e[10]=g,e[11]=p):p=e[11];o=d("ReQLSuspense").useFirst(o,p,f.id+":405");e[12]!==k.threadType?(p={fallbackThreadType:k.threadType},e[12]=k.threadType,e[13]=p):p=e[13];p=c("useIsSecureMessage")(l,o,p);var r=b("cr:4471")(g,k.threadKey,p);if(e[14]!==p){var s;s=p&&((s=c("qex")._("124"))!=null?s:!1);e[14]=p;e[15]=s}else s=e[15];p=d("useMAWSeparateReadsSelector").useMAWSeparateReadsSelector("Message",r,o,s);if(p!=null){e[16]!==m||e[17]!==p||e[18]!==k.threadType||e[19]!==a?(r=n.jsx(w,{isSecureThread:m,message:p,threadType:k.threadType,useContactFullname:a}),e[16]=m,e[17]=p,e[18]=k.threadType,e[19]=a,e[20]=r):r=e[20];return r}else return null}g.MWV2ComposerReplyViewContainer=w;g.MWV2ComposerReplyView=a}),226);
__d("WAGetMediaDevicesSupportedConstraints",["WALogger"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["getSupportedConstraints is not supported in this browser. Error: ",""]);h=function(){return a};return a}function a(){try{var a;a=(a=navigator.mediaDevices)==null?void 0:a.getSupportedConstraints();return a}catch(a){d("WALogger").LOG(h(),a);return null}}g.getMediaDevicesSupportedConstraints=a}),98);
__d("MWPUseVoiceRecorder",["AudioContextSingleton","MWChatRecorderUtilsWorkerResource","MWPAudioPlayerIcons.react","MWPAudioPlayerLabels","Promise","WAGetMediaDevicesSupportedConstraints","WebWorker","clearTimeout","emptyFunction","react","setTimeout","useIsMountedRef","usePrevious"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||(i=d("react")),k=i,l=k.useCallback,m=k.useEffect,n=k.useReducer,o=k.useRef;function a(a){switch(a.stage){case"Unopen":case"Recording":return!1;case"Recorded":case"Playing":return!0}}function e(a){switch(a.stage){case"Unopen":case"Recording":return!1;case"Recorded":case"Playing":return!0}}function p(a){switch(a.stage){case"Unopen":return 0;case"Recording":return a.duration;case"Recorded":case"Playing":return Math.max(a.duration-a.currentTime,0)}}function q(a){switch(a.stage){case"Unopen":return 0;case"Recording":return a.recordingTimeout;case"Recorded":case"Playing":return a.duration}}function r(a){switch(a.stage){case"Unopen":case"Recording":return;case"Recorded":case"Playing":return a.currentTime}}function s(a){switch(a.stage){case"Unopen":case"Recorded":return!1;case"Recording":case"Playing":return!0}}function t(a){if(a.stage==="Recorded")return a.currentTime===0;else return!1}function u(a){switch(a.stage){case"Recording":return d("MWPAudioPlayerLabels").stopLabel;case"Unopen":case"Recorded":return d("MWPAudioPlayerLabels").playLabel;case"Playing":return d("MWPAudioPlayerLabels").pauseLabel}}function v(a,b){switch(a.stage){case"Recording":return j.jsx(d("MWPAudioPlayerIcons.react").StopIcon,{color:b});case"Unopen":case"Recorded":return j.jsx(d("MWPAudioPlayerIcons.react").PlayIcon,{color:b});case"Playing":return j.jsx(d("MWPAudioPlayerIcons.react").PauseIcon,{color:b})}}v.displayName=v.name+" [from "+f.id+"]";function w(a,b){switch(b.type){case"Start":return{duration:0,mediaStream:b.mediaStream,recordingTimeout:b.recordingTimeout,stage:"Recording"};case"Toggle":switch(a.stage){case"Unopen":return a;case"Recording":return{currentTime:0,duration:a.duration,stage:"Recorded"};case"Recorded":return{currentTime:a.currentTime,duration:a.duration,stage:"Playing"};case"Playing":return{currentTime:a.currentTime,duration:a.duration,stage:"Recorded"}}break;case"UpdateDuration":var c=b.duration;switch(a.stage){case"Unopen":return a;case"Recording":return{duration:c,mediaStream:a.mediaStream,recordingTimeout:a.recordingTimeout,stage:"Recording"};case"Recorded":return{currentTime:a.currentTime,duration:c,stage:"Recorded"};case"Playing":return{currentTime:a.currentTime,duration:c,stage:"Playing"}}break;case"UpdateTime":c=b.currentTime;switch(a.stage){case"Unopen":case"Recording":return a;case"Recorded":var d=a.duration;return c===d?{currentTime:0,duration:d,stage:"Recorded"}:{currentTime:c,duration:d,stage:"Recorded"};case"Playing":d=a.duration;return c===d?{currentTime:0,duration:d,stage:"Recorded"}:{currentTime:c,duration:d,stage:"Playing"}}break;case"RecordingTimeout":return{currentTime:0,duration:b.recordingTimeout,stage:"Recorded"};case"Reset":return{stage:"Unopen"}}}var x={stage:"Unopen"},y=1;function z(a,e,f){var g;a===void 0&&(a=60);e===void 0&&(e=c("emptyFunction"));f===void 0&&(f=c("emptyFunction"));var i=((g=d("WAGetMediaDevicesSupportedConstraints").getMediaDevicesSupportedConstraints())==null?void 0:g.sampleRate)===!0;g=n(w,x);var j=g[0],k=g[1],p=c("useIsMountedRef")(),q=o(),r=o([]),s=o([]),t=o(),u=o(),v=o(),z=o(),A=o(c("emptyFunction")),B=l(function(a){var b=a[0],c=a[1];if(!p.current)return;a=URL.createObjectURL(b);v.current=a;var d=new Audio(a);d.addEventListener("canplay",function(){u.current=d;var a=d.duration;k({duration:a,type:"UpdateDuration"});a={duration:a,file:b,waveformData:c};z.current=a;A.current(a)});d.addEventListener("timeupdate",function(){var a;a=(a=u.current)==null?void 0:a.currentTime;a!=null&&k({currentTime:a,type:"UpdateTime"})});d.addEventListener("durationchange",function(){var a;a=(a=u.current)==null?void 0:a.duration;a!=null&&!Number.isNaN(a)&&k({duration:a,type:"UpdateDuration"})})},[p]),C=l(function(){if(q.current==null||t.current==null)return;t.current.postMessage({buffersL:r.current,buffersR:y===2?s.current:null,sampleRate:q.current})},[]);m(function(){if(j.stage!=="Recording")return;r.current=[];s.current=[];var a=c("AudioContextSingleton").get({sampleRate:i?44100:void 0}),b=a.destination;q.current=a.sampleRate;var d=j.mediaStream,f=a.createScriptProcessor(4096,y,y);a=a.createMediaStreamSource(d);t.current=new(c("WebWorker"))(c("MWChatRecorderUtilsWorkerResource")).setMessageHandler(B).setAllowCrossPageTransition(!0).execute();var g=function(a){j.stage==="Recording"&&a instanceof AudioProcessingEvent&&(r.current.push(a.inputBuffer.getChannelData(0).slice()),y===2&&s.current.push(a.inputBuffer.getChannelData(1).slice()))};f.addEventListener("audioprocess",g);a.connect(f);f.connect(b);e();return function(){d.getAudioTracks().forEach(function(a){if(a.readyState!=="ended"){a.stop();return}}),f.removeEventListener("audioprocess",g)}},[B,e,j.stage,j.mediaStream,i]);var D=c("usePrevious")(j);m(function(){(D==null?void 0:D.stage)==="Recording"&&j.stage==="Recorded"&&C()},[D==null?void 0:D.stage,C,j.stage]);m(function(){if(j.stage!=="Recording")return;var b=Date.now(),d,e=function e(){var f=(Date.now()-b)/1e3;if(f>=a){k({recordingTimeout:a,type:"RecordingTimeout"});return}k({duration:f,type:"UpdateDuration"});d=c("setTimeout")(e,1e3)};d=c("setTimeout")(e,1e3);return function(){d!=null&&c("clearTimeout")(d)}},[a,j.stage]);g=l(function(b){k({mediaStream:b,recordingTimeout:a,type:"Start"})},[a]);var E=l(function(){var a;k({type:"Reset"});(a=u.current)==null?void 0:a.pause();u.current=void 0;z.current=void 0;q.current=void 0;a=v.current;a!=null&&(URL.revokeObjectURL(a),v.current=void 0)},[]),F=l(function(){var a=function(){k({type:"Toggle"})},b=u.current;if(b==null){a();return}switch(j.stage){case"Unopen":case"Recording":a();break;case"Recorded":b.play().then(a)["catch"](f);break;case"Playing":b.pause();a();break}},[f,j.stage]),G=l(function(){return new(h||(h=b("Promise")))(function(a){var b=z.current;if(b!=null)return a(b);A.current=a;if(j.stage==="Recording")return F()})},[j,F]);return{audioEl:u,getVoiceClip:G,reset:E,start:g,state:j,toggle:F}}g.showScreenReaderLabel=a;g.hasScrubber=e;g.getTimerTime=p;g.getDuration=q;g.getCurrentTime=r;g.isProgressing=s;g.isCompleted=t;g.getPlaybackLabel=u;g.getPlaybackIcon=v;g.useVoiceRecorder=z}),98);
__d("MWAudioRecorder.react",["MWPAudioHighlightStylesHooks","MWPAudioPlayerButtons.react","MWPAudioPlayerContainer.react","MWPAudioPlayerHighlight.react","MWPAudioPlayerKeyCommands.react","MWPAudioPlayerSharedStyles","MWPAudioPlayerTimer.react","MWPAudioPlayerUtils","MWPUseVoiceRecorder","MWXTooltip.react","react","requireDeferred","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||(i=d("react"));b=i;var k=b.useRef,l=b.c,m=c("requireDeferred")("MWChatAudioLog").__setRef("MWAudioRecorder.react");function a(a){var b=l(54);a=a.voiceRecorder;var e=a.audioEl,f=a.state,g=a.toggle;a=k();var i=d("MWPAudioPlayerUtils").useResetHighlightProgress(a),n;b[0]!==f?(n=d("MWPUseVoiceRecorder").hasScrubber(f),b[0]=f,b[1]=n):n=b[1];n=n;var o;b[2]!==g||b[3]!==f.stage||b[4]!==f.currentTime||b[5]!==f.duration?(o=function(){g();switch(f.stage){case"Unopen":return;case"Recording":m.onReady(function(a){return a.logClickStopRecording(0)});return;case"Recorded":var a=f.currentTime,b=f.duration;a===0?m.onReady(function(a){return a.logPlaybackStart(b)}):m.onReady(function(c){return c.logPlaybackResume(b,a)});return;case"Playing":var c=f.currentTime,d=f.duration;m.onReady(function(a){return a.logPlaybackPause(d,c)});return}},b[2]=g,b[3]=f.stage,b[4]=f.currentTime,b[5]=f.duration,b[6]=o):o=b[6];o=o;var p;b[7]!==f?(p=d("MWPUseVoiceRecorder").getDuration(f),b[7]=f,b[8]=p):p=b[8];var q;b[9]!==f?(q=d("MWPUseVoiceRecorder").getCurrentTime(f),b[9]=f,b[10]=q):q=b[10];var r;b[11]!==f?(r=d("MWPUseVoiceRecorder").isProgressing(f),b[11]=f,b[12]=r):r=b[12];var s;b[13]!==f?(s=d("MWPUseVoiceRecorder").isCompleted(f),b[13]=f,b[14]=s):s=b[14];p=d("MWPAudioPlayerUtils").useProgressLiveUpdate(p,e,q,r,!1,s);q=d("MWPAudioHighlightStylesHooks").useHighlightStyles(!0);b[15]!==f?(r=d("MWPUseVoiceRecorder").getPlaybackLabel(f),b[15]=f,b[16]=r):r=b[16];s=r;bb0:{switch(f.stage){case"Unopen":case"Recording":r=null;break bb0;case"Recorded":case"Playing":var t;b[17]!==f.currentTime||b[18]!==f.duration?(t=j.jsx(d("MWPAudioPlayerUtils").ScreenReaderLabel,{currentTime:f.currentTime,duration:f.duration}),b[17]=f.currentTime,b[18]=f.duration,b[19]=t):t=b[19];r=t;break bb0}r=void 0}t=r;b[20]===Symbol["for"]("react.memo_cache_sentinel")?(r={backgroundColor:"var(--chat-composer-button-color, var(--accent))",borderRadius:"18px"},b[20]=r):r=b[20];var u;b[21]!==p||b[22]!==q?(u=j.jsx(d("MWPAudioPlayerHighlight.react").MWPAudioPlayerHighlightV1,{ref:p,xstyle:q}),b[21]=p,b[22]=q,b[23]=u):u=b[23];b[24]!==q?(p=j.jsx(d("MWPAudioPlayerHighlight.react").MWPAudioPlayerHighlightV1,{ref:a,xstyle:q}),b[24]=q,b[25]=p):p=b[25];b[26]===Symbol["for"]("react.memo_cache_sentinel")?(q=(h||(h=c("stylex")))(d("MWPAudioPlayerSharedStyles").styles.playbackButtonContainer),b[26]=q):q=b[26];i=n?i:void 0;var v;b[27]!==f?(v=d("MWPUseVoiceRecorder").getPlaybackIcon(f,"var(--chat-composer-button-color, var(--accent))"),b[27]=f,b[28]=v):v=b[28];var w;b[29]!==v||b[30]!==s||b[31]!==o?(w=j.jsx(d("MWPAudioPlayerButtons.react").AudioPlayerPlaybackButton,{icon:v,label:s,onPress:o}),b[29]=v,b[30]=s,b[31]=o,b[32]=w):w=b[32];b[33]!==s||b[34]!==w?(v=j.jsx(c("MWXTooltip.react"),{align:"middle",position:"above",tooltip:s,children:w}),b[33]=s,b[34]=w,b[35]=v):v=b[35];b[36]!==i||b[37]!==v?(o=j.jsx("div",{className:q,onMouseMove:i,children:v}),b[36]=i,b[37]=v,b[38]=o):o=b[38];b[39]!==f?(s=d("MWPUseVoiceRecorder").getTimerTime(f),b[39]=f,b[40]=s):s=b[40];b[41]!==s?(w=j.jsx(c("MWPAudioPlayerTimer.react"),{time:s}),b[41]=s,b[42]=w):w=b[42];b[43]!==e||b[44]!==u||b[45]!==t||b[46]!==p||b[47]!==o||b[48]!==w?(q=j.jsxs(c("MWPAudioPlayerKeyCommands.react"),{audioEl:e,children:[u,t,p,o,w]}),b[43]=e,b[44]=u,b[45]=t,b[46]=p,b[47]=o,b[48]=w,b[49]=q):q=b[49];b[50]!==e||b[51]!==n||b[52]!==q?(i=j.jsx(c("MWPAudioPlayerContainer.react"),{audioEl:e,hasScrubber:n,mediaRenderQpl:null,scrubberRef:a,style:r,testid:void 0,useCase:d("MWPAudioPlayerUtils").UseCase.RECORDER,children:q}),b[50]=e,b[51]=n,b[52]=q,b[53]=i):i=b[53];return i}g["default"]=a}),98);
__d("MWV2ComposerMenuButtonTrigger.react",["fbt","MWChatChatButtonColorConstants","MWXPressable.react","MWXTooltip.react","gkx","react","stylex"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=(j||(j=d("react"))).c,l=j,m=h._("__JHASH__2kGg_y6m8FS__JHASH__"),n={buttonFDS:{flexShrink:"x2lah0s",marginStart:"xsgj6o6",marginEnd:"xw3qccf",marginLeft:null,marginRight:null,paddingTop:"x1y1aw1k",paddingEnd:"x1sxyh0",paddingBottom:"xwib8y2",paddingStart:"xurb0ha",$$css:!0},buttonMDS:{flexShrink:"x2lah0s",marginStart:"x1i64zmx",marginEnd:"x1emribx",marginLeft:null,marginRight:null,paddingTop:"x1y1aw1k",paddingEnd:"x1sxyh0",paddingBottom:"xwib8y2",paddingStart:"xurb0ha",$$css:!0}};function a(a){var b=k(11),e=a.color,f=a.contextRef,g=a.disabled;a=a.onShow;var h;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(h=(i||(i=c("stylex")))(d("MWChatChatButtonColorConstants").styles.strokeGrey),b[0]=h):h=b[0];var j,n,p;b[1]===Symbol["for"]("react.memo_cache_sentinel")?(j=l.jsx("path",{d:"M1.5,1.5 H22.5"}),n=l.jsx("path",{d:"M1.5,9 H22.5"}),p=l.jsx("path",{d:"M1.5,16.5 H22.5"}),b[1]=j,b[2]=n,b[3]=p):(j=b[1],n=b[2],p=b[3]);b[4]!==e?(h=l.jsx("svg",{"aria-hidden":"true",className:h,height:"20",viewBox:"0 0 24 18",width:"20",children:l.jsxs("g",{stroke:e,strokeLinecap:"round",strokeWidth:"2.5",children:[j,n,p]})}),b[4]=e,b[5]=h):h=b[5];b[6]!==g||b[7]!==a||b[8]!==f||b[9]!==h?(j=l.jsx(c("MWXTooltip.react"),{forceInlineDisplay:!0,position:"above",tooltip:m,children:l.jsx(c("MWXPressable.react"),{disabled:g,label:m,onPress:a,overlayDisabled:g,overlayRadius:"50%",ref:f,xstyle:o,children:h})}),b[6]=g,b[7]=a,b[8]=f,b[9]=h,b[10]=j):j=b[10];return j}function o(){return[c("gkx")("23219")?n.buttonMDS:n.buttonFDS]}g["default"]=a}),226);
__d("MWV2ComposerMenuButton.react",["JSResourceForInteraction","MWV2ComposerMenuButtonTrigger.react","MWXLazyPopoverTrigger.react","emptyFunction","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||(h=d("react"))).c,j=h;function a(a){var b=i(12),d=a.color,e=a.disabled,f=a.editor,g=a.hasPersistentMenu,h=a.onSendMessage;a=a.threadKey;var k=e===void 0?!1:e;b[0]!==f||b[1]!==g||b[2]!==h||b[3]!==a?(e={editor:f,hasPersistentMenu:g,onClose:c("emptyFunction"),onSendMessage:h,threadKey:a},b[0]=f,b[1]=g,b[2]=h,b[3]=a,b[4]=e):e=b[4];b[5]===Symbol["for"]("react.memo_cache_sentinel")?(f=c("JSResourceForInteraction")("MWComposerCommandsMenu.react").__setRef("MWV2ComposerMenuButton.react"),b[5]=f):f=b[5];b[6]!==d||b[7]!==k?(g=function(a,b){return j.jsx(c("MWV2ComposerMenuButtonTrigger.react"),{color:d,contextRef:a,disabled:k,onShow:b})},b[6]=d,b[7]=k,b[8]=g):g=b[8];b[9]!==e||b[10]!==g?(h=j.jsx(c("MWXLazyPopoverTrigger.react"),{align:"end",popoverProps:e,popoverResource:f,children:g}),b[9]=e,b[10]=g,b[11]=h):h=b[11];return h}g["default"]=a}),98);
__d("useMWComposerPersistentMenuItemSelect",["react"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");b.useCallback;var i=b.c;function a(a){var b=i(3),c=a.composerEntrypointForLogging,d=a.onSendMessage;b[0]!==d||b[1]!==c?(a=function(a){var b=a.id;a=a.title;return d(a,void 0,void 0,void 0,void 0,void 0,void 0,void 0,b,void 0,void 0,void 0,void 0,void 0,void 0,c)},b[0]=d,b[1]=c,b[2]=a):a=b[2];return a}g["default"]=a}),98);
__d("MWV2ComposerPersistentMenuButton.react",["JSResourceForInteraction","MWV2ComposerMenuButtonTrigger.react","MWXLazyPopoverTrigger.react","emptyFunction","react","useMWComposerPersistentMenuItemSelect"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||(h=d("react"))).c,j=h;function a(a){var b=i(11),d=a.color,e=a.disabled;a=a.onSendMessage;var f=e===void 0?!1:e;b[0]!==a?(e={composerEntrypointForLogging:"MWV2ComposerPersistentMenuButton",onSendMessage:a},b[0]=a,b[1]=e):e=b[1];a=c("useMWComposerPersistentMenuItemSelect")(e);b[2]!==a?(e={onClose:c("emptyFunction"),onSelect:a},b[2]=a,b[3]=e):e=b[3];b[4]===Symbol["for"]("react.memo_cache_sentinel")?(a=c("JSResourceForInteraction")("LSComposerPersistentMenu.react").__setRef("MWV2ComposerPersistentMenuButton.react"),b[4]=a):a=b[4];var g;b[5]!==d||b[6]!==f?(g=function(a,b){return j.jsx(c("MWV2ComposerMenuButtonTrigger.react"),{color:d,contextRef:a,disabled:f,onShow:b})},b[5]=d,b[6]=f,b[7]=g):g=b[7];b[8]!==e||b[9]!==g?(a=j.jsx(c("MWXLazyPopoverTrigger.react"),{align:"end",popoverProps:e,popoverResource:a,children:g}),b[8]=e,b[9]=g,b[10]=a):a=b[10];return a}g["default"]=a}),98);
__d("MWComposerEndButtonsGroup.react",["MWV2ComposerMenuButton.react","MWV2ComposerPersistentMenuButton.react","MWV2ComposerSendButton.react","cr:3208","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||(h=d("react"))).c,j=h,k="var(--chat-composer-button-color)";function a(a){var d=i(14),e=a.customEmoji,f=a.disabled,g=a.editor,h=a.hasPersistentMenu,l=a.hasStuffToSend,m=a.isVoiceRecorderOpen,n=a.onSendMessage,o=a.sendMessage,p=a.shouldHideHotLike,q=a.shouldHideTooltip,r=a.showCommands,s=a.threadKey;a=a.threadType;q=q===void 0?!1:q;var t;d[0]!==m||d[1]!==l||d[2]!==f||d[3]!==o||d[4]!==q||d[5]!==r||d[6]!==g||d[7]!==h||d[8]!==n||d[9]!==s||d[10]!==p||d[11]!==e||d[12]!==a?(t=m?null:l?j.jsx(c("MWV2ComposerSendButton.react"),{disabled:f,hasStuffToSend:l,onPress:o,shouldHideTooltip:q}):r?j.jsx(c("MWV2ComposerMenuButton.react"),{color:k,disabled:f,editor:g,hasPersistentMenu:h,onSendMessage:n,threadKey:s}):h?j.jsx(c("MWV2ComposerPersistentMenuButton.react"),{color:k,disabled:f,onSendMessage:n}):p?j.jsx("span",{className:"x1e558r4 x150jy0e"}):j.jsx(b("cr:3208"),{customEmoji:e,disabled:f,onSendMessage:n,shouldHideTooltip:q,threadType:a}),d[0]=m,d[1]=l,d[2]=f,d[3]=o,d[4]=q,d[5]=r,d[6]=g,d[7]=h,d[8]=n,d[9]=s,d[10]=p,d[11]=e,d[12]=a,d[13]=t):t=d[13];return t}g["default"]=a}),98);
__d("MWComposerInnerButtonsGroup.react",["MWV2ComposerEmojiButton.react","cr:793","react","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=(i||(i=d("react"))).c,k=i,l={fds:{marginStart:"x16hk5td",paddingBottom:"xjkvuk6",paddingEnd:"x150jy0e",$$css:!0},innerButtons:{alignItems:"x6s0dn4",alignSelf:"xpvyfi4",display:"x78zum5",justifyContent:"xl56j7k",$$css:!0},mds:{marginStart:"x169t7cy",$$css:!0}};function a(a){var d=j(15),e=a.editor,f=a.renderExtraButtons,g=a.shouldUseMDS;a=a.threadKey;f=f===void 0?null:f;g=g?l.mds:l.fds;var i;d[0]!==g?(i=(h||(h=c("stylex")))(l.innerButtons,g),d[0]=g,d[1]=i):i=d[1];d[2]!==f||d[3]!==e?(g=f!=null&&f(e),d[2]=f,d[3]=e,d[4]=g):g=d[4];d[5]!==e||d[6]!==a?(f=b("cr:793")!=null&&k.jsx(b("cr:793"),{editor:e,threadId:a}),d[5]=e,d[6]=a,d[7]=f):f=d[7];d[8]!==e?(a=k.jsx(c("MWV2ComposerEmojiButton.react"),{editor:e}),d[8]=e,d[9]=a):a=d[9];d[10]!==i||d[11]!==g||d[12]!==f||d[13]!==a?(e=k.jsxs("div",{className:i,children:[g,f,a]}),d[10]=i,d[11]=g,d[12]=f,d[13]=a,d[14]=e):e=d[14];return e}g["default"]=a}),98);
__d("useMWV2ComposerOnGifSelect",["FBLogger","I64","LSShape","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i;b=h||d("react");b.useCallback;var j=b.c;function k(a,b,c){return d("LSShape").ofRecord({preview_height:b,preview_url:a,preview_width:c})}function a(a,b){var e=j(3),f;e[0]!==b||e[1]!==a?(f=function(e){var f=e.platformFBID;e=e.source;var g=e.height,h=e.url;e=e.width;f=(i||(i=d("I64"))).of_string(f);h=h;if(!Boolean(h))throw c("FBLogger")("messenger_web_media").mustfixThrow("Sticker URI is null when trying to send sticker message. (composer entrypoint = %s)",b);return a(void 0,void 0,void 0,void 0,f,h,k(h,i.of_int32(g),i.of_int32(e)),void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,b)},e[0]=b,e[1]=a,e[2]=f):f=e[2];return f}g["default"]=a}),98);
__d("MWV2ComposerGifButton.react",["fbt","JSResourceForInteraction","MWChatComposerIcons","MWXLazyPopoverTrigger.react","MWXPressable.react","MWXTooltip.react","MessengerWebUXLogger","gkx","react","useMWV2ComposerOnGifSelect"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=(i||(i=d("react"))).c,k=i,l=c("JSResourceForInteraction")("MWChatAnimatedImageFlyoutWithPopover.react").__setRef("MWV2ComposerGifButton.react"),m={buttonFDS:{paddingTop:"x1iorvi4",paddingEnd:"x150jy0e",paddingBottom:"xjkvuk6",paddingStart:"x1e558r4",$$css:!0},buttonMDS:{paddingTop:"x1y1aw1k",paddingEnd:"x1sxyh0",paddingBottom:"xwib8y2",paddingStart:"xurb0ha",$$css:!0}},n=h._("__JHASH__J6q-Bfr0oTE__JHASH__");function a(a){var b=j(9),e=a.disabled,f=a.isSecureThread;a=a.onSendMessage;a=c("useMWV2ComposerOnGifSelect")(a,"MWV2ComposerGifButton");var g=c("MessengerWebUXLogger").useInteractionLogger(),h;b[0]!==f||b[1]!==a?(h={isSecureThread:f,onSelect:a,testid:"mw_gif_picker"},b[0]=f,b[1]=a,b[2]=h):h=b[2];b[3]!==e||b[4]!==g?(f=function(a,b,f,h,i,j,l){return k.jsx(c("MWXTooltip.react"),{align:"middle",forceInlineDisplay:!0,position:"above",tooltip:n,children:k.jsx(c("MWXPressable.react"),{"aria-label":n,disabled:e,onHoverIn:h,onHoverOut:i,onPress:function(){b(),g==null?void 0:g({eventName:"composer_open_gif_picker"})},onPressIn:j,overlayRadius:"50%",ref:a,xstyle:function(){return[c("gkx")("23219")?m.buttonMDS:m.buttonFDS]},children:k.jsx(d("MWChatComposerIcons").MWChatComposerIconsGif,{fill:e?void 0:"var(--chat-composer-button-color)",size:20})})})},b[3]=e,b[4]=g,b[5]=f):f=b[5];b[6]!==h||b[7]!==f?(a=k.jsx(c("MWXLazyPopoverTrigger.react"),{align:"middle",disableAutoFlip:!0,popoverProps:h,popoverResource:l,position:"above",children:f}),b[6]=h,b[7]=f,b[8]=a):a=b[8];return a}g["default"]=a}),226);
__d("MWChatComposerOverflowIcons",["cr:3237"],(function(a,b,c,d,e,f,g){"use strict";g.MWChatComposerOverflowIconsPollsSVG=b("cr:3237").PollsSVG,g.MWChatComposerOverflowIconsDollarSignSVG=b("cr:3237").DollarSignSVG,g.MWChatComposerOverflowIconsMicrophoneSVG=b("cr:3237").MicrophoneSVG}),98);
__d("MWChatPollStrings",["fbt"],(function(a,b,c,d,e,f,g,h){"use strict";a={addPollOptionLabel:h._("__JHASH__TTumxStOaLR__JHASH__"),createPollLabel:h._("__JHASH__Tf8o14f91uW__JHASH__"),pollTitleLabel:h._("__JHASH__CotUus5yWVx__JHASH__")};b=a;g["default"]=b}),226);
__d("MessengerWebPollConstants",[],(function(a,b,c,d,e,f){e.exports={POLL_COMPOSER_MAX_OPTIONS:10,POLL_MAX_OPTIONS:200,POLL_MIN_OPTIONS:2,POLL_MAX_OPTION_LENGTH:140,POLL_MAX_QUESTION_LENGTH:140}}),null);
__d("useMWGroupNewPollSubmitErrorLogger",["I64","Int64Hooks","MWGroupPollLoggerDeferred","asyncToGeneratorRuntime","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=(h||d("react")).c;function a(a){var c=j(3),e,f;c[0]!==a?(e=function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b,c){yield d("MWGroupPollLoggerDeferred").log("new_poll_submit_error",{poll:{entry_point:b,exception_message:c,poll_type:void 0,question_id:void 0,thread_id:(i||(i=d("I64"))).to_string(a)}})});return function(a,b){return c.apply(this,arguments)}}(),f=[a],c[0]=a,c[1]=e,c[2]=f):(e=c[1],f=c[2]);return d("Int64Hooks").useCallbackInt64(e,f)}g["default"]=a}),98);
__d("useMWGroupNewPollSubmitSuccessLogger",["I64","Int64Hooks","MWGroupPollLoggerDeferred","asyncToGeneratorRuntime","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=(h||d("react")).c;function a(a){var c=j(3),e,f;c[0]!==a?(e=function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){yield d("MWGroupPollLoggerDeferred").log("existing_poll_submit_success",{poll:{entry_point:b,poll_type:void 0,question_id:void 0,thread_id:(i||(i=d("I64"))).to_string(a)}})});return function(a){return c.apply(this,arguments)}}(),f=[a],c[0]=a,c[1]=e,c[2]=f):(e=c[1],f=c[2]);return d("Int64Hooks").useCallbackInt64(e,f)}g["default"]=a}),98);
__d("MWChatPollFlyout.react",["BaseTextInput.react","CometScrollableArea.react","I64","LSGroupPollEventType","MWChatPollStrings","MWGroupPollQPL","MWXButton.react","MWXPopover.react","MWXRow.react","MWXRowItem.react","MessengerWebPollConstants","ReQL","ReQLSuspense","clearTimeout","emptyFunction","justknobx","promiseDone","react","setTimeout","stylex","useLayoutEffect_SAFE_FOR_SSR","useMWGroupNewPollSubmitErrorLogger","useMWGroupNewPollSubmitSuccessLogger","useReStore","useSinglePartialViewImpression"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l=k||(k=d("react"));b=k;b.useCallback;var m=b.useEffect,n=b.useRef,o=b.useState,p=b.c,q={button:{paddingTop:"xyamay9",paddingEnd:"x1pi30zi",paddingBottom:"x1l90r2v",paddingStart:"x1swvt13",zIndex:"x1vjfegm",$$css:!0},buttonOverflow:{boxShadow:"x8t3t8w",$$css:!0},optionText:{backgroundColor:"x1jx94hy",borderTopStyle:"x1ejq31n",borderEndStyle:"xd10rxx",borderBottomStyle:"x1sy0etr",borderStartStyle:"x17r0tee",color:"xzsf02u",fontSize:"x6prxxf",fontWeight:"x1s688f",width:"xh8yej3",$$css:!0},pollOptions:{display:"x78zum5",flexDirection:"xdt5ytf",flexGrow:"x1iyjqo2",marginStart:"x1d52u69",marginEnd:"xktsk01",marginLeft:null,marginRight:null,$$css:!0},title:{backgroundColor:"x1jx94hy",borderTopStyle:"x1ejq31n",borderEndStyle:"xd10rxx",borderBottomStyle:"x1sy0etr",borderStartStyle:"x17r0tee",color:"xzsf02u",display:"x1lliihq",fontSize:"x6prxxf",fontWeight:"xk50ysn",marginBottom:"x1hq5gj4",marginStart:"x1d52u69",marginEnd:"xktsk01",marginLeft:null,marginRight:null,marginTop:"xjv05ge",textAlign:"x2b8uid",$$css:!0}};function a(a){var b=p(57),e=a.onClose,g=a.onPollCreate,k=a.threadKey,u=a.withArrow;a=a.withPopover;u=u===void 0?!0:u;a=a===void 0?!0:a;var v=o(""),w=v[0],x=v[1];v=o(t);var y=v[0],z=v[1];v=o(!1);var A=v[0],B=v[1];v=o(!1);var C=v[0],D=v[1];v=o(!1);var E=v[0],F=v[1];v=E?c("emptyFunction"):d("MWGroupPollQPL").logCreatePollCancel;var G;b[0]!==v?(G={onImpressionEnd:v},b[0]=v,b[1]=G):G=b[1];v=c("useSinglePartialViewImpression")(G);var H=c("useMWGroupNewPollSubmitSuccessLogger")(k),I=c("useMWGroupNewPollSubmitErrorLogger")(k),J=n(null),K=n(c("emptyFunction")),L=(h||(h=c("useReStore")))(),M;b[2]===Symbol["for"]("react.memo_cache_sentinel")?(G=function(){return function(){K.current(),J.current!==null&&c("clearTimeout")(J.current)}},M=[],b[2]=G,b[3]=M):(G=b[2],M=b[3]);m(G,M);b[4]!==I||b[5]!==L.tables.polls||b[6]!==k||b[7]!==H||b[8]!==e?(G=function(){J.current=c("setTimeout")(function(){d("MWGroupPollQPL").logCreatePollFail(),c("promiseDone")(I(4)),K.current(),K.current=c("emptyFunction"),J.current=null,F(!1)},c("justknobx")._("1647")),K.current=L.tables.polls.subscribe(function(a){a=a[0];a=d("ReQLSuspense").first(d("ReQL").fromTableAscending(L.tables.polls).getKeyRange(a),f.id+":169");a=a!=null&&(j||(j=d("I64"))).equal(a.threadKey,k)&&(j||(j=d("I64"))).to_int32(a.lastUpdateMessageEventType)===c("LSGroupPollEventType").QUESTION_CREATION;a&&(d("MWGroupPollQPL").logCreatePollSuccess(),c("promiseDone")(H(4)),K.current(),J.current!==null&&c("clearTimeout")(J.current),e())})},b[4]=I,b[5]=L.tables.polls,b[6]=k,b[7]=H,b[8]=e,b[9]=G):G=b[9];var N=G,O=n(null);b[10]===Symbol["for"]("react.memo_cache_sentinel")?(M=function(){if(O.current!=null){var a=O.current.getDOMNode();a!=null&&(a.scrollTop=a.scrollHeight)}B(!1)},b[10]=M):M=b[10];var P=M;b[11]!==A?(G=function(){A&&P()},b[11]=A,b[12]=G):G=b[12];b[13]!==A||b[14]!==y?(M=[A,y,P],b[13]=A,b[14]=y,b[15]=M):M=b[15];m(G,M);b[16]!==y?(G=new Set(y.map(s).filter(r)),b[16]=y,b[17]=G):G=b[17];var Q=G;b[18]===Symbol["for"]("react.memo_cache_sentinel")?(M=function(){if(O.current!=null){var a=O.current.getDOMNode();D(function(){return a!=null&&a.scrollHeight>a.clientHeight})}},G=[O],b[18]=M,b[19]=G):(M=b[18],G=b[19]);c("useLayoutEffect_SAFE_FOR_SSR")(M,G);b[20]===Symbol["for"]("react.memo_cache_sentinel")?(M="x78zum5 xdt5ytf x1phlbz0 x168biu4",b[20]=M):M=b[20];b[21]===Symbol["for"]("react.memo_cache_sentinel")?(G=function(a){var b=a.target.value;return x(function(){return b})},b[21]=G):G=b[21];b[22]!==w?(G=l.jsx(c("BaseTextInput.react"),{"aria-label":c("MWChatPollStrings").pollTitleLabel,maxLength:c("MessengerWebPollConstants").POLL_MAX_QUESTION_LENGTH,onChange:G,placeholder:c("MWChatPollStrings").pollTitleLabel,value:w,xstyle:q.title}),b[22]=w,b[23]=G):G=b[23];if(b[24]!==Q.size||b[25]!==y){var R;b[27]!==Q.size?(R=function(a,b){return l.jsx("div",{className:"x1nb4dca x1q0q8m5 xso031l xod5an3 x1i2zvha",children:l.jsx(c("BaseTextInput.react"),{"aria-label":c("MWChatPollStrings").addPollOptionLabel,maxLength:c("MessengerWebPollConstants").POLL_MAX_OPTION_LENGTH,onBlur:function(){Q.size<c("MessengerWebPollConstants").POLL_COMPOSER_MAX_OPTIONS&&z(function(a){return a.map(function(a){return a.trim()}).filter(function(a){return a!==""}).concat([""])})},onChange:function(a){var d=a.target.value;z(function(a){return a.map(function(e,f){var g=b===a.length-1&&d!==""&&a.length<c("MessengerWebPollConstants").POLL_COMPOSER_MAX_OPTIONS;g&&B(!0);if(b===f)return d;else return e}).concat(b===a.length-1&&d!==""&&a.length<c("MessengerWebPollConstants").POLL_COMPOSER_MAX_OPTIONS?[""]:[])})},placeholder:c("MWChatPollStrings").addPollOptionLabel,value:a,xstyle:q.optionText})},String(b))},b[27]=Q.size,b[28]=R):R=b[28];R=y.map(R);b[24]=Q.size;b[25]=y;b[26]=R}else R=b[26];var S;b[29]!==R?(S=l.jsx(c("CometScrollableArea.react"),{ref:O,vertical:!0,xstyle:q.pollOptions,children:R}),b[29]=R,b[30]=S):S=b[30];R=C?q.buttonOverflow:!1;b[31]!==R?(C=(i||(i=c("stylex")))(q.button,R),b[31]=R,b[32]=C):C=b[32];b[33]!==Q.size||b[34]!==w||b[35]!==E?(R=Q.size<c("MessengerWebPollConstants").POLL_MIN_OPTIONS||w.trim()===""||E,b[33]=Q.size,b[34]=w,b[35]=E,b[36]=R):R=b[36];var T;b[37]!==N||b[38]!==g||b[39]!==w||b[40]!==y?(T=function(){d("MWGroupPollQPL").logCreatePollConfirmClick(),F(!0),N(),g(w,y.map(function(a){return a.trim()}).filter(function(a){return a!==""}),function(){return F(!1)})},b[37]=N,b[38]=g,b[39]=w,b[40]=y,b[41]=T):T=b[41];var U;b[42]!==R||b[43]!==E||b[44]!==T?(U=l.jsx(c("MWXRow.react"),{paddingHorizontal:0,paddingTop:0,spacing:12,children:l.jsx(c("MWXRowItem.react"),{expanding:!0,children:l.jsx(c("MWXButton.react"),{disabled:R,label:c("MWChatPollStrings").createPollLabel,loading:E,onPress:T,reduceEmphasis:!0,type:"primary"})})}),b[42]=R,b[43]=E,b[44]=T,b[45]=U):U=b[45];b[46]!==C||b[47]!==U?(R=l.jsx("div",{className:C,children:U}),b[46]=C,b[47]=U,b[48]=R):R=b[48];b[49]!==v||b[50]!==G||b[51]!==S||b[52]!==R?(E=l.jsxs("div",{className:M,ref:v,children:[G,S,R]}),b[49]=v,b[50]=G,b[51]=S,b[52]=R,b[53]=E):E=b[53];T=E;if(a){b[54]!==u||b[55]!==T?(C=l.jsx(c("MWXPopover.react"),{withArrow:u,children:T}),b[54]=u,b[55]=T,b[56]=C):C=b[56];return C}else return T}function r(a){return a!==""}function s(a){return a.toUpperCase()}function t(){return[""]}g["default"]=a}),98);
__d("MessageSendClickFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("1891340");b=d("FalcoLoggerInternal").create("message_send_click",a);e=b;g["default"]=e}),98);
__d("useMWCreatePoll",["I64","LSFactory","LSIssuePollCreationForThreadTaskStoredProcedure","LSPlatformWaitForTaskCompletion","LSVec","emptyFunction","promiseDone","react","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;b=j||d("react");b.useCallback;var k=b.c;function a(){var a=k(2),b=(h||(h=c("useReStore")))(),e;a[0]!==b?(e=function(a,e,f,g,h){c("promiseDone")(c("LSPlatformWaitForTaskCompletion")(b,function(b){return c("LSIssuePollCreationForThreadTaskStoredProcedure")(c("LSFactory")(b),{options:c("LSVec").ofArray(f),questionText:e,threadKey:a})},"addPollToThread-"+(i||(i=d("I64"))).to_string(a)),(g=g)!=null?g:c("emptyFunction"),(g=h)!=null?g:c("emptyFunction"))},a[0]=b,a[1]=e):e=a[1];return e}g["default"]=a}),98);
__d("useMWGroupStartNewPollLogger",["I64","Int64Hooks","MWGroupPollLoggerDeferred","asyncToGeneratorRuntime","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=(h||d("react")).c;function a(a){var c=j(3),e,f;c[0]!==a?(e=function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){yield d("MWGroupPollLoggerDeferred").log("start_new_poll",{poll:{entry_point:b,poll_type:void 0,question_id:void 0,thread_id:(i||(i=d("I64"))).to_string(a)}})});return function(a){return c.apply(this,arguments)}}(),f=[a],c[0]=a,c[1]=e,c[2]=f):(e=c[1],f=c[2]);return d("Int64Hooks").useCallbackInt64(e,f)}g["default"]=a}),98);
__d("useMWGroupSubmitNewPollLogger",["I64","Int64Hooks","MWGroupPollLoggerDeferred","asyncToGeneratorRuntime","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=(h||d("react")).c;function a(a){var c=j(3),e,f;c[0]!==a?(e=function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b,c){yield d("MWGroupPollLoggerDeferred").log("submit_new_poll",{poll:{entry_point:b,options_added:c.toString(),poll_type:void 0,question_id:void 0,thread_id:(i||(i=d("I64"))).to_string(a)}})});return function(a,b){return c.apply(this,arguments)}}(),f=[a],c[0]=a,c[1]=e,c[2]=f):(e=c[1],f=c[2]);return d("Int64Hooks").useCallbackInt64(e,f)}g["default"]=a}),98);
__d("MWV2ComposerPollButton.react",["fbt","JSResourceForInteraction","LsFalcoEventEntryPoint","MWChatComposerOverflowIcons","MWChatPollFlyout.react","MWGroupPollQPL","MWXIcon.react","MWXLazyPopoverTrigger.react","MWXListCellPressable.react","MWXPressable.react","MWXTextPairing.react","MWXTooltip.react","MessageSendClickFalcoEvent","MessengerWebUXLoggerImpl","SVGIcon","emptyFunction","gkx","promiseDone","react","useMWCreatePoll","useMWGroupNewPollSubmitErrorLogger","useMWGroupStartNewPollLogger","useMWGroupSubmitNewPollLogger"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=(i||(i=d("react"))).c,k=i,l=c("JSResourceForInteraction")("MWChatPollFlyoutForPopover.react").__setRef("MWV2ComposerPollButton.react"),m={buttonFDS:{paddingTop:"x1iorvi4",paddingEnd:"x150jy0e",paddingBottom:"xjkvuk6",paddingStart:"x1e558r4",$$css:!0},buttonMDS:{paddingTop:"x1y1aw1k",paddingEnd:"x1sxyh0",paddingBottom:"xwib8y2",paddingStart:"xurb0ha",$$css:!0}},n=h._("__JHASH__YANDQDfyQrm__JHASH__");function a(a){var b=j(29),e=a.color,f=a.entryPoint,g=a.onClose,h=a.pushPage,i=a.threadKey,o=a.threadType,p=d("MessengerWebUXLoggerImpl").useInteractionLogger(),q=c("useMWGroupStartNewPollLogger")(i),r=c("useMWGroupSubmitNewPollLogger")(i),s=c("useMWGroupNewPollSubmitErrorLogger")(i),t=c("useMWCreatePoll")();b[0]!==t||b[1]!==i||b[2]!==s||b[3]!==r?(a=function(a,b,e){t(i,a,b,c("emptyFunction"),function(a){e&&e(),d("MWGroupPollQPL").logCreatePollFail(),c("promiseDone")(s(4,a))}),c("promiseDone")(r(4,b.length)),c("MessageSendClickFalcoEvent").log(function(){return{message_send_source:{entry_point:d("LsFalcoEventEntryPoint").composer}}})},b[0]=t,b[1]=i,b[2]=s,b[3]=r,b[4]=a):a=b[4];var u=a;b[5]!==o||b[6]!==q||b[7]!==h||b[8]!==g||b[9]!==u||b[10]!==i?(a=function(){d("MWGroupPollQPL").logCreatePollStart(o),c("promiseDone")(q(4)),h==null?void 0:h(function(){return k.jsx(c("MWChatPollFlyout.react"),{onClose:g,onPollCreate:u,threadKey:i,withPopover:!1})})},b[5]=o,b[6]=q,b[7]=h,b[8]=g,b[9]=u,b[10]=i,b[11]=a):a=b[11];a=a;if(f==="composer"){b[12]!==u||b[13]!==i?(f={onPollCreate:u,threadKey:i},b[12]=u,b[13]=i,b[14]=f):f=b[14];var v;b[15]!==p||b[16]!==e?(v=function(a,b,f,g,h,i,j){return k.jsx(c("MWXTooltip.react"),{align:"middle",forceInlineDisplay:!0,position:"above",tooltip:n,children:k.jsx(c("MWXPressable.react"),{"aria-label":n,onHoverIn:g,onHoverOut:h,onPress:function(){b(),p==null?void 0:p({eventName:"composer_open_gif_picker"})},onPressIn:i,overlayRadius:"50%",ref:a,xstyle:function(){return[c("gkx")("23219")?m.buttonMDS:m.buttonFDS]},children:k.jsx(d("MWChatComposerOverflowIcons").MWChatComposerOverflowIconsPollsSVG,{fill:e,size:20})})})},b[15]=p,b[16]=e,b[17]=v):v=b[17];var w;b[18]!==f||b[19]!==v?(w=k.jsx(c("MWXLazyPopoverTrigger.react"),{align:"middle",disableAutoFlip:!0,popoverProps:f,popoverResource:l,position:"above",children:v}),b[18]=f,b[19]=v,b[20]=w):w=b[20];return w}b[21]!==e?(f=d("SVGIcon").legacySVGIcon(function(){return k.jsx(d("MWChatComposerOverflowIcons").MWChatComposerOverflowIconsPollsSVG,{fill:e,size:20})}),b[21]=e,b[22]=f):f=b[22];b[23]!==f?(v=k.jsx(c("MWXIcon.react"),{icon:f}),b[23]=f,b[24]=v):v=b[24];b[25]===Symbol["for"]("react.memo_cache_sentinel")?(w=k.jsx(c("MWXTextPairing.react"),{headline:n,level:4}),b[25]=w):w=b[25];b[26]!==v||b[27]!==a?(f=k.jsx(c("MWXListCellPressable.react"),{addOnStart:v,addOnStartVerticalAlign:"center",content:w,loggingEvent:"composer_open_create_poll_flyout",onPress:a,role:"menuitem"}),b[26]=v,b[27]=a,b[28]=f):f=b[28];return f}g["default"]=a}),226);
__d("MWChatPromptFlyoutBackCard.react",["BaseImage.react","react","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=(i||(i=d("react"))).c,k=i,l=135,m=180,n={backCard:{borderTopStartRadius:"xfh8nwu",borderTopEndRadius:"xoqspk4",borderBottomEndRadius:"x12v9rci",borderBottomStartRadius:"x138vmkv",bottom:"x1ey2m1c",boxShadow:"xumrakr",height:"x1b51vyi",start:"x17qophe",opacity:"xg01cxk",position:"x10l6tqk",transform:"xv8dq09",transitionDuration:"xcuylb0",transitionProperty:"x6o7n8i",transitionTimingFunction:"x1bckuxf",width:"x6vytul",zIndex:"x1ja2u2z",$$css:!0},backCardVisible:{opacity:"x1hc1fzr",transform:"xwot3bk",$$css:!0},media:{backgroundColor:"xwcfey6",backgroundPosition:"x1xsqp64",backgroundSize:"x18d0r48",borderTopStartRadius:"xfh8nwu",borderTopEndRadius:"xoqspk4",borderBottomEndRadius:"x12v9rci",borderBottomStartRadius:"x138vmkv",objectFit:"xl1xv1r",$$css:!0}};function a(a){var b=j(8),d=a.isVideo;a=a.previewUrl;var e=a!==null?n.backCardVisible:null,f;b[0]!==e?(f=(h||(h=c("stylex")))(n.backCard,e),b[0]=e,b[1]=f):f=b[1];b[2]!==a||b[3]!==d?(e=a!==null?d?k.jsx("video",{className:"xwcfey6 x1xsqp64 x18d0r48 xfh8nwu xoqspk4 x12v9rci x138vmkv xl1xv1r",height:m,muted:!0,src:a,width:l}):k.jsx(c("BaseImage.react"),{height:m,src:a,width:l,xstyle:n.media}):null,b[2]=a,b[3]=d,b[4]=e):e=b[4];b[5]!==f||b[6]!==e?(a=k.jsx("div",{className:f,children:e}),b[5]=f,b[6]=e,b[7]=a):a=b[7];return a}g["default"]=a}),98);
__d("MWChatPromptFlyoutCTAButton.react",["fbt","BaseFileSelector.react","MWXButton.react","fileInputAcceptValues","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=(i||(i=d("react"))).c,k=i;function a(a){var b=j(5),e=a.isSendDisabled,f=a.onFilesSelected,g=a.onPressSend;a=a.showFileSelector;var i;b[0]!==a||b[1]!==f||b[2]!==e||b[3]!==g?(i=a?k.jsx(c("BaseFileSelector.react"),{accept:d("fileInputAcceptValues").PHOTO_AND_VIDEO,onFilesSelected:f,children:l}):k.jsx(c("MWXButton.react"),{disabled:e,label:h._("__JHASH__racSmevYoYZ__JHASH__"),onPress:g}),b[0]=a,b[1]=f,b[2]=e,b[3]=g,b[4]=i):i=b[4];return i}function l(a){return k.jsx(c("MWXButton.react"),{label:h._("__JHASH__YLEewsPX1Ff__JHASH__"),onPress:a})}l.displayName=l.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("MWChatPromptFlyoutDisclaimer.react",["fbt","MWXText.react","RollCallPromptType","gkx","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=(i||(i=d("react"))).c,k=i;function a(a){var b=j(5);a=a.promptType;var d=c("gkx")("7782"),e;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(e="xyamay9 x1l90r2v x2b8uid",b[0]=e):e=b[0];b[1]!==a?(d=d?a===c("RollCallPromptType").TEXT?h._("__JHASH__1b6dQcj_nOc__JHASH__"):h._("__JHASH__TBziAJEAe-m__JHASH__"):h._("__JHASH__oEdtqK8h88D__JHASH__"),b[1]=a,b[2]=d):d=b[2];b[3]!==d?(a=k.jsx("div",{className:e,children:k.jsx(c("MWXText.react"),{type:"meta4",children:d})}),b[3]=d,b[4]=a):a=b[4];return a}g["default"]=a}),226);
__d("MWChatPromptFlyoutErrorMessage.react",["fbt","MWXText.react","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=(i||(i=d("react"))).c,k=i;function a(){var a=j(2),b;a[0]===Symbol["for"]("react.memo_cache_sentinel")?(b="x1l90r2v x2b8uid",a[0]=b):b=a[0];a[1]===Symbol["for"]("react.memo_cache_sentinel")?(b=k.jsx("div",{className:b,children:k.jsx(c("MWXText.react"),{color:"negative",type:"meta4",children:h._("__JHASH__BNDx1mX2nlz__JHASH__")})}),a[1]=b):b=a[1];return b}g["default"]=a}),226);
__d("MWXIconMessage",["MWXSvgIcon","SVGIcon","cr:12494","gkx"],(function(a,b,c,d,e,f,g){"use strict";a=d("MWXSvgIcon").mwxSvgIcon(d("SVGIcon").svgIcon(b("cr:12494")),c("gkx")("23219"));g["default"]=a}),98);
__d("MWXIconPhoto",["MWXSvgIcon","SVGIcon","cr:12530","gkx"],(function(a,b,c,d,e,f,g){"use strict";a=d("MWXSvgIcon").mwxSvgIcon(d("SVGIcon").svgIcon(b("cr:12530")),c("gkx")("23219"));g["default"]=a}),98);
__d("MWChatPromptFlyoutPromptTypeSelector.react",["fbt","MWXCircleButton.react","MWXIconMessage","MWXIconPhoto","RollCallPromptType","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=(i||(i=d("react"))).c,k=i;function l(a){var b=j(6),d=a.icon,e=a.isSelected,f=a.label;a=a.onPress;var g=e?"primary":"disabled";e=e?"overlay-floating":"deemphasized";var h;b[0]!==g||b[1]!==d||b[2]!==f||b[3]!==a||b[4]!==e?(h=k.jsx(c("MWXCircleButton.react"),{color:g,icon:d,label:f,onPress:a,size:36,type:e}),b[0]=g,b[1]=d,b[2]=f,b[3]=a,b[4]=e,b[5]=h):h=b[5];return h}function a(a){var b=j(16),d=a.promptType,e=a.setPromptType;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(a={className:"x6s0dn4 x78zum5 x1qughib x1l90r2v x29ncy0"},b[0]=a):a=b[0];var f=d===c("RollCallPromptType").TEXT,g;b[1]===Symbol["for"]("react.memo_cache_sentinel")?(g=h._("__JHASH__pixrfe3xOeN__JHASH__"),b[1]=g):g=b[1];var i;b[2]!==e?(i=function(){return e(c("RollCallPromptType").TEXT)},b[2]=e,b[3]=i):i=b[3];b[4]!==f||b[5]!==i?(g=k.jsx(l,{icon:c("MWXIconMessage"),isSelected:f,label:g,onPress:i}),b[4]=f,b[5]=i,b[6]=g):g=b[6];f=d===c("RollCallPromptType").MEDIA;b[7]===Symbol["for"]("react.memo_cache_sentinel")?(i=h._("__JHASH__YL2kX1525pI__JHASH__"),b[7]=i):i=b[7];b[8]!==e?(d=function(){return e(c("RollCallPromptType").MEDIA)},b[8]=e,b[9]=d):d=b[9];b[10]!==f||b[11]!==d?(i=k.jsx(l,{icon:c("MWXIconPhoto"),isSelected:f,label:i,onPress:d}),b[10]=f,b[11]=d,b[12]=i):i=b[12];b[13]!==g||b[14]!==i?(f=k.jsxs("div",babelHelpers["extends"]({},a,{children:[g,i]})),b[13]=g,b[14]=i,b[15]=f):f=b[15];return f}g["default"]=a}),226);
__d("MWChatPromptFlyout.react",["fbt","FBLogger","FocusRegion.react","I64","LsFalcoEventEntryPoint","MWChatPromptFlyoutBackCard.react","MWChatPromptFlyoutCTAButton.react","MWChatPromptFlyoutDisclaimer.react","MWChatPromptFlyoutErrorMessage.react","MWChatPromptFlyoutFrontCard.react","MWChatPromptFlyoutPromptTypeSelector.react","MWPActor.react","MWPromptCreationUtils","MWXText.react","MessageSendClickFalcoEvent","MessengerWebUXLogger","RollCallPromptType","asyncToGeneratorRuntime","cometPushToast","gkx","react","recoverableViolation","useReStore"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l=k||(k=d("react"));e=k;e.useCallback;var m=e.useState,n=e.c,o=26214400;function p(){var a=n(2),b=c("MessengerWebUXLogger").useInteractionLogger(),e;a[0]!==b?(e=function(){b==null?void 0:b("composer_send_prompt"),c("MessageSendClickFalcoEvent").log(function(){return{message_send_source:{entry_point:d("LsFalcoEventEntryPoint").composer}}})},a[0]=b,a[1]=e):e=a[1];return e}function a(a){var e,f=n(55),g=a.initialFile,k=a.initialText,r=a.onClose,s=a.threadKey,t=a.threadType,u=(i||(i=c("useReStore")))(),v=d("MWPActor.react").useActor();f[0]!==u||f[1]!==s||f[2]!==v||f[3]!==t?(a=function(a,e,f){b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var b=f?URL.createObjectURL(f):void 0,c=(yield d("MWPromptCreationUtils").createAuthoritiativeRollCall(u,s,a,e));b=(yield d("MWPromptCreationUtils").createOptimisticRollCallMessage(u,v,s,t,c,a,e,b,f==null?void 0:f.type));f&&b!=null&&d("MWPromptCreationUtils").startRollCallMediaUpload(f,c,b,(j||(j=d("I64"))).to_string(s))})()["catch"](function(a){c("FBLogger")("messenger_web_messaging").catching(a).mustfix("Creating prompt"),d("cometPushToast").cometPushErrorToast({message:h._("__JHASH___58Ig9CWslh__JHASH__")})})},f[0]=u,f[1]=s,f[2]=v,f[3]=t,f[4]=a):a=f[4];var w=a;f[5]!==w||f[6]!==r?(a=function(a,b,c){w(a,b,c),r==null?void 0:r()},f[5]=w,f[6]=r,f[7]=a):a=f[7];var x=a;a=c("gkx")("7782");e=m((e=k)!=null?e:"");var y=e[0],z=e[1];e=m(k!=null?c("RollCallPromptType").TEXT:c("RollCallPromptType").MEDIA);var A=e[0];e=e[1];var B;f[8]!==g?(B=g!=null?URL.createObjectURL(g):null,f[8]=g,f[9]=B):B=f[9];B=m(B);var C=B[0],D=B[1];B=m((B=g)!=null?B:void 0);var E=B[0],F=B[1];B=m(!1);var G=B[0],H=B[1];f[10]===Symbol["for"]("react.memo_cache_sentinel")?(B=function(a){a=a[0];if(!a)return;a.size>=o?H(!0):(D(URL.createObjectURL(a)),H(!1),F(a))},f[10]=B):B=f[10];B=B;var I=p(),J;f[11]!==I||f[12]!==E||f[13]!==C||f[14]!==x||f[15]!==y?(J=function(){I(),E&&C!==null?x(y,c("RollCallPromptType").MEDIA,E):c("recoverableViolation")("Missing File","messenger_web_messaging")},f[11]=I,f[12]=E,f[13]=C,f[14]=x,f[15]=y,f[16]=J):J=f[16];J=J;var K;f[17]!==I||f[18]!==x||f[19]!==y||f[20]!==A||f[21]!==E?(K=function(){I(),x(y,A,A===c("RollCallPromptType").MEDIA?E:void 0)},f[17]=I,f[18]=x,f[19]=y,f[20]=A,f[21]=E,f[22]=K):K=f[22];K=K;var L=q,M,N;f[23]===Symbol["for"]("react.memo_cache_sentinel")?(M="x6s0dn4 x9f619 x78zum5 xdt5ytf x13hwc6b xyamay9 x1pi30zi x1l90r2v x1swvt13 x1m258z3",N="xbaz6xv",f[23]=M,f[24]=N):(M=f[23],N=f[24]);var O;f[25]===Symbol["for"]("react.memo_cache_sentinel")?(N=l.jsx("div",{className:N,children:l.jsx(c("MWXText.react"),{type:"headlineEmphasized4",children:h._("__JHASH__ALK-qDDamkT__JHASH__")})}),O="x1n2onr6",f[25]=N,f[26]=O):(N=f[25],O=f[26]);if(f[27]!==A||f[28]!==(E==null?void 0:E.type)||f[29]!==C){var P;P=A===c("RollCallPromptType").MEDIA?l.jsx(c("MWChatPromptFlyoutBackCard.react"),{isVideo:(P=E==null?void 0:(P=E.type)==null?void 0:P.startsWith("video/"))!=null?P:!1,previewUrl:C}):null;f[27]=A;f[28]=E==null?void 0:E.type;f[29]=C;f[30]=P}else P=f[30];var Q;f[31]===Symbol["for"]("react.memo_cache_sentinel")?(Q=function(a){z(a.target.value)},f[31]=Q):Q=f[31];f[32]!==y?(Q=l.jsx(c("MWChatPromptFlyoutFrontCard.react"),{maxLength:50,onChange:Q,value:y}),f[32]=y,f[33]=Q):Q=f[33];f[34]!==P||f[35]!==Q?(O=l.jsxs("div",{className:O,children:[P,Q]}),f[34]=P,f[35]=Q,f[36]=O):O=f[36];f[37]!==A?(P=l.jsx(c("MWChatPromptFlyoutDisclaimer.react"),{promptType:A}),f[37]=A,f[38]=P):P=f[38];f[39]!==G?(Q=G?l.jsx(c("MWChatPromptFlyoutErrorMessage.react"),{}):null,f[39]=G,f[40]=Q):Q=f[40];f[41]!==g||f[42]!==k||f[43]!==A?(G=a&&g===void 0&&k===void 0?l.jsx(c("MWChatPromptFlyoutPromptTypeSelector.react"),{promptType:A,setPromptType:e}):null,f[41]=g,f[42]=k,f[43]=A,f[44]=G):G=f[44];e=y.trim()==="";g=a?K:J;k=A===c("RollCallPromptType").MEDIA&&C===null;f[45]!==e||f[46]!==g||f[47]!==k?(a=l.jsx(c("MWChatPromptFlyoutCTAButton.react"),{isSendDisabled:e,onFilesSelected:B,onPressSend:g,showFileSelector:k}),f[45]=e,f[46]=g,f[47]=k,f[48]=a):a=f[48];f[49]!==O||f[50]!==P||f[51]!==Q||f[52]!==G||f[53]!==a?(K=l.jsx(d("FocusRegion.react").FocusRegion,{autoFocusQuery:L,children:l.jsxs("div",{className:M,children:[N,O,P,Q,G,a]})}),f[49]=O,f[50]=P,f[51]=Q,f[52]=G,f[53]=a,f[54]=K):K=f[54];return K}function q(a){return a==="textarea"}g["default"]=a}),226);
__d("MWV2ComposerPromptButtonQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="6768559856594435"}),null);
__d("MWV2ComposerPromptButtonQuery.graphql",["MWV2ComposerPromptButtonQuery_facebookRelayOperation","relay-runtime"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{kind:"Literal",name:"surface_nux_id",value:10706},{kind:"Literal",name:"trigger",value:"COMMUNITY_MESSAGING_PROMPT"}],c=[{kind:"Literal",name:"supported",value:"TDHjT"}],d={kind:"InlineFragment",selections:[{args:null,documentName:"MWV2ComposerPromptButtonQuery",fragmentName:"CometQuickPromotionMessengerWebPromptsNuxDialogRendererStrategy_quickPromotionRef",fragmentPropName:"quickPromotionRef",kind:"ModuleImport"}],type:"CometQuickPromotionMessengerWebPromptsRendererStrategy",abstractKey:null};return{fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"MWV2ComposerPromptButtonQuery",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:a,concreteType:"ViewerEligibleQuickPromotionsConnection",kind:"LinkedField",name:"eligible_promotions",plural:!1,selections:[{alias:null,args:null,concreteType:"QuickPromotion",kind:"LinkedField",name:"nodes",plural:!0,selections:[{alias:null,args:null,concreteType:"CometQuickPromotionSections",kind:"LinkedField",name:"comet_qp_sections",plural:!1,selections:[{alias:null,args:c,concreteType:null,kind:"LinkedField",name:"renderer_strategy",plural:!1,selections:[d],storageKey:'renderer_strategy(supported:"TDHjT")'}],storageKey:null}],storageKey:null}],storageKey:'eligible_promotions(surface_nux_id:10706,trigger:"COMMUNITY_MESSAGING_PROMPT")'}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[],kind:"Operation",name:"MWV2ComposerPromptButtonQuery",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:a,concreteType:"ViewerEligibleQuickPromotionsConnection",kind:"LinkedField",name:"eligible_promotions",plural:!1,selections:[{alias:null,args:null,concreteType:"QuickPromotion",kind:"LinkedField",name:"nodes",plural:!0,selections:[{alias:null,args:null,concreteType:"CometQuickPromotionSections",kind:"LinkedField",name:"comet_qp_sections",plural:!1,selections:[{alias:null,args:c,concreteType:null,kind:"LinkedField",name:"renderer_strategy",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},d],storageKey:'renderer_strategy(supported:"TDHjT")'}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}],storageKey:'eligible_promotions(surface_nux_id:10706,trigger:"COMMUNITY_MESSAGING_PROMPT")'}],storageKey:null}]},params:{id:b("MWV2ComposerPromptButtonQuery_facebookRelayOperation"),metadata:{},name:"MWV2ComposerPromptButtonQuery",operationKind:"query",text:null}}}();b("relay-runtime").PreloadableQueryRegistry.set(a.params.id,a);e.exports=a}),null);
__d("MWXIconRollCall",["MWXSvgIcon","SVGIcon","cr:12563","gkx"],(function(a,b,c,d,e,f,g){"use strict";a=d("MWXSvgIcon").mwxSvgIcon(d("SVGIcon").svgIcon(b("cr:12563")),c("gkx")("23219"));g["default"]=a}),98);
__d("MWV2ComposerPromptButton.react",["fbt","CometRelay","I64","JSResourceForInteraction","LSMessagingThreadTypeUtil","MWChatPromptFlyout.react","MWDidQueryPromptsNux","MWV2ComposerPromptButtonQuery.graphql","MWXIconRollCall","MWXIconStrict.react","MWXListCellPressable.react","MWXPressable.react","MWXTextPairing.react","MWXThreadThemeColor","MWXTooltip.react","MessengerDiscoverableBroadcastChatsClientEventsFalcoEvent","gkx","promiseDone","react","requireDeferred","useMWXLazyDialog"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l=(j||(j=d("react"))).c,m=j,n=c("requireDeferred")("MWChatPromptDialog.react").__setRef("MWV2ComposerPromptButton.react"),o=c("JSResourceForInteraction")("MWCommunityMessagingPromptsNUXQuickPromotion.react").__setRef("MWV2ComposerPromptButton.react"),p={buttonFDS:{paddingTop:"x1iorvi4",paddingEnd:"x150jy0e",paddingBottom:"xjkvuk6",paddingStart:"x1e558r4",$$css:!0},buttonMDS:{paddingTop:"x1y1aw1k",paddingEnd:"x1sxyh0",paddingBottom:"xwib8y2",paddingStart:"xurb0ha",$$css:!0}};function q(){var a=l(2),c=d("CometRelay").useRelayEnvironment(),e;a[0]!==c?(e=function(){return d("CometRelay").fetchQuery(c,i!==void 0?i:i=b("MWV2ComposerPromptButtonQuery.graphql"),{}).toPromise()},a[0]=c,a[1]=e):e=a[1];return e}var r=h._("__JHASH__HlC08Cr4XB6__JHASH__");function a(a){var b=l(23),e=a.color,f=a.entryPoint,g=a.onClose,h=a.pushPage,i=a.threadKey,j=a.threadType,p=q();a=c("useMWXLazyDialog")(o);var t=a[0];a=c("useMWXLazyDialog")(n);var u=a[0];b[0]!==j||b[1]!==i||b[2]!==g||b[3]!==u||b[4]!==h||b[5]!==p||b[6]!==t?(a=function(){var a=d("LSMessagingThreadTypeUtil").isDiscoverablePublicBroadcastChannel(j);a&&c("gkx")("2571")?(c("MessengerDiscoverableBroadcastChatsClientEventsFalcoEvent").log(function(){return{action_name:1,event_name:302,source:156,surface:7,thread_id:(k||(k=d("I64"))).to_string(i)}}),g(),u({threadKey:i})):(h(function(){return m.jsx(c("MWChatPromptFlyout.react"),{onClose:g,threadKey:i,threadType:j})}),d("MWDidQueryPromptsNux").getDidQueryPromptsNux()||(d("MWDidQueryPromptsNux").markDidQueryPromptsNux(),c("promiseDone")(p(),function(a){a=a==null?void 0:(a=a.viewer)==null?void 0:(a=a.eligible_promotions)==null?void 0:(a=a.nodes)==null?void 0:(a=a.find(function(a){return((a=a.comet_qp_sections)==null?void 0:a.renderer_strategy)!=null}))==null?void 0:(a=a.comet_qp_sections)==null?void 0:a.renderer_strategy;a&&t({asCreator:!0,rendererStrategy:a})})))},b[0]=j,b[1]=i,b[2]=g,b[3]=u,b[4]=h,b[5]=p,b[6]=t,b[7]=a):a=b[7];a=a;if(f==="composer"){b[8]!==e?(f=e!==void 0?d("MWXThreadThemeColor").mwxThreadThemeColor(e):void 0,b[8]=e,b[9]=f):f=b[9];var v;b[10]!==f?(v=m.jsx(c("MWXIconStrict.react"),{color:f,icon:c("MWXIconRollCall"),size:20}),b[10]=f,b[11]=v):v=b[11];b[12]!==a||b[13]!==v?(f=m.jsx(c("MWXTooltip.react"),{align:"middle",forceInlineDisplay:!0,position:"above",tooltip:r,children:m.jsx(c("MWXPressable.react"),{"aria-label":r,onPress:a,overlayRadius:"50%",xstyle:s,children:v})}),b[12]=a,b[13]=v,b[14]=f):f=b[14];return f}b[15]!==e?(v=e!==void 0?d("MWXThreadThemeColor").mwxThreadThemeColor(e):void 0,b[15]=e,b[16]=v):v=b[16];b[17]!==v?(f=m.jsx(c("MWXIconStrict.react"),{color:v,icon:c("MWXIconRollCall"),size:20}),b[17]=v,b[18]=f):f=b[18];b[19]===Symbol["for"]("react.memo_cache_sentinel")?(e=m.jsx(c("MWXTextPairing.react"),{headline:r,level:4}),b[19]=e):e=b[19];b[20]!==f||b[21]!==a?(v=m.jsx(c("MWXListCellPressable.react"),{addOnStart:f,addOnStartVerticalAlign:"center",content:e,loggingEvent:"composer_open_create_prompt_flyout",onPress:a,role:"menuitem"}),b[20]=f,b[21]=a,b[22]=v):v=b[22];return v}function s(){return[c("gkx")("23219")?p.buttonMDS:p.buttonFDS]}g["default"]=a}),226);
__d("MWV2ComposerStickerButton.react",["cr:12006","react"],(function(a,b,c,d,e,f,g){"use strict";var h;h||d("react");g["default"]=b("cr:12006")}),98);
__d("MWV2ComposerVoiceClipButton.react",["fbt","MWChatComposerOverflowIcons","MWXIcon.react","MWXListCellPressable.react","MWXPressable.react","MWXTextPairing.react","MWXTooltip.react","SVGIcon","gkx","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=(i||(i=d("react"))).c,k=i,l={buttonFDS:{paddingTop:"x1iorvi4",paddingEnd:"x150jy0e",paddingBottom:"xjkvuk6",paddingStart:"x1e558r4",$$css:!0},buttonMDS:{paddingTop:"x1y1aw1k",paddingEnd:"x1sxyh0",paddingBottom:"xwib8y2",paddingStart:"xurb0ha",$$css:!0}},m=h._("__JHASH__Cn3aSQ9nsyA__JHASH__");function a(a){var b=j(16),e=a.color,f=a.disabled,g=a.entryPoint,h=a.onPress;a=f===void 0?!1:f;if(g==="composer"){b[0]!==e?(f=k.jsx(d("MWChatComposerOverflowIcons").MWChatComposerOverflowIconsMicrophoneSVG,{fill:e,size:20}),b[0]=e,b[1]=f):f=b[1];b[2]!==a||b[3]!==h||b[4]!==f?(g=k.jsx(c("MWXTooltip.react"),{align:"middle",forceInlineDisplay:!0,position:"above",tooltip:m,children:k.jsx(c("MWXPressable.react"),{"aria-label":m,disabled:a,onPress:h,overlayRadius:"50%",xstyle:n,children:f})}),b[2]=a,b[3]=h,b[4]=f,b[5]=g):g=b[5];return g}b[6]!==e?(a=d("SVGIcon").legacySVGIcon(function(){return k.jsx(d("MWChatComposerOverflowIcons").MWChatComposerOverflowIconsMicrophoneSVG,{fill:e,size:20})}),b[6]=e,b[7]=a):a=b[7];b[8]!==a?(f=k.jsx(c("MWXIcon.react"),{icon:a}),b[8]=a,b[9]=f):f=b[9];b[10]===Symbol["for"]("react.memo_cache_sentinel")?(g=k.jsx(c("MWXTextPairing.react"),{headline:m,level:4}),b[10]=g):g=b[10];b[11]!==h?(a=function(){h()},b[11]=h,b[12]=a):a=b[12];b[13]!==f||b[14]!==a?(g=k.jsx(c("MWXListCellPressable.react"),{addOnStart:f,addOnStartVerticalAlign:"center",content:g,loggingEvent:"composer_record_voice_clip",onPress:a,role:"menuitem"}),b[13]=f,b[14]=a,b[15]=g):g=b[15];return g}function n(){return[c("gkx")("23219")?l.buttonMDS:l.buttonFDS]}g["default"]=a}),226);
__d("useMWV2ComposerOnPressVoiceClip",["$InternalEnum","JSResourceForInteraction","WAGetMediaDevicesSupportedConstraints","emptyFunction","react","requireDeferred","useMWXLazyDialog"],(function(a,b,c,d,e,f,g){"use strict";var h;e=h||d("react");var i=e.useState,j=e.c,k=c("requireDeferred")("MWChatAudioLog").__setRef("useMWV2ComposerOnPressVoiceClip"),l=b("$InternalEnum").Mirrored(["AWAITING","GRANTED","DENIED","FAILED"]);function a(a){var b=j(15),e=i(l.AWAITING),f=e[0],g=e[1];b[0]===Symbol["for"]("react.memo_cache_sentinel")?(e=c("JSResourceForInteraction")("MWChatAudioRecorderPermissionsDialog.react").__setRef("useMWV2ComposerOnPressVoiceClip"),b[0]=e):e=b[0];e=c("useMWXLazyDialog")(e);var h=e[0],m;if(b[1]===Symbol["for"]("react.memo_cache_sentinel")){m={channelCount:1};e=((e=d("WAGetMediaDevicesSupportedConstraints").getMediaDevicesSupportedConstraints())==null?void 0:e.sampleRate)===!0;e&&(m.sampleRate=44100);b[1]=m}else m=b[1];b[2]!==h?(e=function(){return h({contentType:"accessDenied",onAllow:c("emptyFunction")},c("emptyFunction"))},b[2]=h,b[3]=e):e=b[3];var n=e;b[4]!==a||b[5]!==n?(e=function(){var b;(b=navigator)==null?void 0:(b=b.mediaDevices)==null?void 0:b.getUserMedia({audio:m,video:!1}).then(function(b){g(l.GRANTED),a.start(b)})["catch"](function(a){a.name==="NotAllowedError"?(g(l.DENIED),n()):g(l.FAILED),k.onReady(function(a){return a.logBrowserDenyAccess()})})},b[4]=a,b[5]=n,b[6]=e):e=b[6];var o=e;b[7]!==h||b[8]!==o?(e=function(){return h({contentType:"askForAccess",onAllow:function(){return o()}},c("emptyFunction"))},b[7]=h,b[8]=o,b[9]=e):e=b[9];var p=e;b[10]!==f||b[11]!==n||b[12]!==o||b[13]!==p?(e=function(){switch(f){case l.AWAITING:var a;a=(a=navigator.permissions)==null?void 0:a.query({name:"microphone"});a!=null?a.then(function(a){a=a.state;bb61:switch(a){case"denied":g(l.DENIED);n();break bb61;case"granted":o();break bb61;case"prompt":p();break bb61;default:p()}})["catch"](function(){p()}):(o(),k.onReady(function(a){return a.logMicAccessCheckFailed()}));return;case l.DENIED:return n();case l.GRANTED:case l.FAILED:return o()}},b[10]=f,b[11]=n,b[12]=o,b[13]=p,b[14]=e):e=b[14];return e}g["default"]=a}),98);
__d("MWComposerStartButtonsGroup.react",["CometPlaceholder.react","LSMessagingThreadTypeUtil","MWV2ComposerFileButton.react","MWV2ComposerGifButton.react","MWV2ComposerPollButton.react","MWV2ComposerPromptButton.react","MWV2ComposerStickerButton.react","MWV2ComposerVoiceClipButton.react","MWXTooltipGroup.react","emptyFunction","gkx","react","stylex","useMWEntrypoint","useMWFalcoFeatureEventLogger","useMWV2ComposerOnPressVoiceClip"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=(i||(i=d("react"))).c,k=i,l={button:{alignItems:"x6s0dn4",bottom:"x1ey2m1c",display:"x78zum5",justifyContent:"xl56j7k",position:"x10l6tqk",zIndex:"x1vjfegm",$$css:!0},buttonFDS:{marginBottom:"x12nagc",marginEnd:"xw3qccf",$$css:!0},buttonHidden:{transform:"x1f85oc2",transitionDuration:"x1g2r6go",transitionProperty:"x11xpdln",$$css:!0},buttonMDS:{marginBottom:"xat24cr",$$css:!0},buttonShown:{transform:"x3oybdh",transitionDuration:"x1g2r6go",transitionProperty:"x11xpdln",$$css:!0},firstButtonHidden:{transitionDelay:"x1th4bbo",$$css:!0},firstButtonShown:{transitionDelay:"x1th4bbo",$$css:!0},secondButtonHidden:{transitionDelay:"x5zdck6",$$css:!0},secondButtonShown:{transitionDelay:"x5h36tt",$$css:!0},thirdButtonHidden:{transitionDelay:"x1ahifba",$$css:!0},thirdButtonShown:{transitionDelay:"x5w5eug",$$css:!0}},m="var(--chat-composer-button-color)";function a(a){var b=j(70),e=a.canSendAudioClipFinal,f=a.canSendFileFinal,g=a.canSendGifFinal,i=a.canSendSticker,n=a.composerLinkPreview,o=a.gifButtonPosition,p=a.isInputExpanded,q=a.isRTL,r=a.isSecureThread,s=a.localTimezoneInformation,t=a.onAttachmentsAdded,u=a.onSendMessage,v=a.shouldUseMDS,w=a.stickerButtonPosition,x=a.supportedFileTypes,y=a.threadKey,z=a.threadType;a=a.voiceRecorder;var A=c("useMWEntrypoint")(),B=c("useMWFalcoFeatureEventLogger")(y,z),C;b[0]!==B||b[1]!==A?(C=function(a,b){var c="select_sticker_book";a?c="sticker_search":b&&(c="recent_stickers");B(A,c)},b[0]=B,b[1]=A,b[2]=C):C=b[2];C=C;a=c("useMWV2ComposerOnPressVoiceClip")(a);var D;b[3]!==z?(D=d("LSMessagingThreadTypeUtil").isJoinedDiscoverablePublicBroadcastChannel(z),b[3]=z,b[4]=D):D=b[4];D=D;var E;b[5]!==q?(E=q?{right:"0px"}:{left:"0px"},b[5]=q,b[6]=E):E=b[6];E=E;var F;b[7]!==q||b[8]!==w?(F=q?{right:w.toString()+"px"}:{left:w.toString()+"px"},b[7]=q,b[8]=w,b[9]=F):F=b[9];w=F;b[10]!==q||b[11]!==o?(F=q?{right:o.toString()+"px"}:{left:o.toString()+"px"},b[10]=q,b[11]=o,b[12]=F):F=b[12];q=F;o=v?l.buttonMDS:l.buttonFDS;F=p?l.buttonHidden:l.buttonShown;var G=p?l.firstButtonHidden:l.firstButtonShown,H;b[13]!==o||b[14]!==F||b[15]!==G?(H=(h||(h=c("stylex")))(l.button,o,F,G),b[13]=o,b[14]=F,b[15]=G,b[16]=H):H=b[16];o=!f;b[17]!==o||b[18]!==t||b[19]!==x?(F=k.jsx(c("MWV2ComposerFileButton.react"),{disabled:o,onAttachmentsAdded:t,supportedFileTypes:x}),b[17]=o,b[18]=t,b[19]=x,b[20]=F):F=b[20];b[21]!==H||b[22]!==E||b[23]!==F?(G=k.jsx("div",{className:H,style:E,children:F}),b[21]=H,b[22]=E,b[23]=F,b[24]=G):G=b[24];f=v?l.buttonMDS:l.buttonFDS;o=p?l.buttonHidden:l.buttonShown;t=p?l.secondButtonHidden:l.secondButtonShown;b[25]!==f||b[26]!==o||b[27]!==t?(x=(h||(h=c("stylex")))(l.button,f,o,t),b[25]=f,b[26]=o,b[27]=t,b[28]=x):x=b[28];b[29]!==D||b[30]!==y||b[31]!==z||b[32]!==i||b[33]!==r||b[34]!==C||b[35]!==u?(H=D?k.jsx(c("MWV2ComposerPollButton.react"),{color:m,entryPoint:"composer",onClose:c("emptyFunction"),threadKey:y,threadType:z}):k.jsx(c("MWV2ComposerStickerButton.react"),{color:m,disabled:!i,isSecureThread:r,onSelectStickerPack:C,onSendMessage:u}),b[29]=D,b[30]=y,b[31]=z,b[32]=i,b[33]=r,b[34]=C,b[35]=u,b[36]=H):H=b[36];b[37]!==x||b[38]!==w||b[39]!==H?(E=k.jsx("div",{className:x,style:w,children:H}),b[37]=x,b[38]=w,b[39]=H,b[40]=E):E=b[40];F=v?l.buttonMDS:l.buttonFDS;f=p?l.buttonHidden:l.buttonShown;o=p?l.thirdButtonHidden:l.thirdButtonShown;b[41]!==F||b[42]!==f||b[43]!==o?(t=(h||(h=c("stylex")))(l.button,F,f,o),b[41]=F,b[42]=f,b[43]=o,b[44]=t):t=b[44];b[45]!==D||b[46]!==y||b[47]!==z||b[48]!==e||b[49]!==a||b[50]!==g||b[51]!==r||b[52]!==u?(i=D?c("gkx")("2571")?k.jsx(c("MWV2ComposerPromptButton.react"),{color:m,entryPoint:"composer",onClose:c("emptyFunction"),pushPage:c("emptyFunction"),threadKey:y,threadType:z}):k.jsx(c("MWV2ComposerVoiceClipButton.react"),{color:m,disabled:!e,entryPoint:"composer",onPress:a}):k.jsx(c("MWV2ComposerGifButton.react"),{disabled:!g,isSecureThread:r,onSendMessage:u}),b[45]=D,b[46]=y,b[47]=z,b[48]=e,b[49]=a,b[50]=g,b[51]=r,b[52]=u,b[53]=i):i=b[53];b[54]!==t||b[55]!==q||b[56]!==i?(C=k.jsx("div",{className:t,style:q,children:i}),b[54]=t,b[55]=q,b[56]=i,b[57]=C):C=b[57];b[58]!==G||b[59]!==E||b[60]!==C?(x=k.jsxs(c("MWXTooltipGroup.react"),{children:[G,E,C]}),b[58]=G,b[59]=E,b[60]=C,b[61]=x):x=b[61];b[62]!==s?(w=s!=null?k.jsx(c("CometPlaceholder.react"),{fallback:null,name:"MWComposerStartButtonsGroup.LocalTimezoneInformation",children:s}):null,b[62]=s,b[63]=w):w=b[63];b[64]!==n?(H=n!=null?k.jsx(c("CometPlaceholder.react"),{fallback:null,name:"MWComposerStartButtonsGroup.ComposerLinkPreview",children:n}):null,b[64]=n,b[65]=H):H=b[65];b[66]!==x||b[67]!==w||b[68]!==H?(v=k.jsxs(k.Fragment,{children:[x,w,H]}),b[66]=x,b[67]=w,b[68]=H,b[69]=v):v=b[69];return v}g["default"]=a}),98);
__d("MWV2ComposerPlusButton.react",["fbt","JSResourceForInteraction","LSMessagingThreadTypeUtil","MWChatComposerIcons","MWXLazyPopoverTrigger.react","MWXPressable.react","MWXTooltip.react","MessengerWebUXLogger","emptyFunction","gkx","react","requireDeferred","useMWV2ComposerOnPressVoiceClip"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||(i=d("react"));b=i;b.useMemo;var k=b.useState,l=b.c,m=c("requireDeferred")("MWChatAudioLog").__setRef("MWV2ComposerPlusButton.react"),n={plusButtonFDS:{marginTop:"x1gslohp",marginBottom:"x12nagc",marginStart:"xsgj6o6",marginEnd:"xw3qccf",marginLeft:null,marginRight:null,paddingTop:"x1iorvi4",paddingEnd:"x150jy0e",paddingBottom:"xjkvuk6",paddingStart:"x1e558r4",$$css:!0},plusButtonMDS:{marginStart:"x1i64zmx",paddingTop:"x1y1aw1k",paddingEnd:"x1sxyh0",paddingBottom:"xwib8y2",paddingStart:"xurb0ha",$$css:!0}};function a(a){var b=l(35),e=a.canSendAudioClip,f=a.canSendFile,g=a.canSendPayment,i=a.editor,o=a.hasAudioClipsCapability,p=a.hasGIFCapability,q=a.hasPaymentCapability,r=a.hasPollCreationCapability,s=a.hasRollcallCapability,t=a.hasStickerCapability,u=a.isInputExpanded,v=a.onAttachmentsAdded,w=a.onSendMessage,x=a.renderExtraOverflowMenuItems,y=a.supportedFileTypes,z=a.threadKey,A=a.threadType,B=a.voiceRecorder;c("emptyFunction");a=k(!1);var C=a[0],D=a[1];b[0]===Symbol["for"]("react.memo_cache_sentinel")?(a=function(a){return D(a)},b[0]=a):a=b[0];a=a;var E;b[1]!==A?(E=d("LSMessagingThreadTypeUtil").isJoinedDiscoverablePublicBroadcastChannel(A),b[1]=A,b[2]=E):E=b[2];A=E;E=q&&!c("gkx")("24133")&&g;q=r&&(!A||c("gkx")("23422")||c("gkx")("3378"))&&(!A||u);g=s&&(!A||u);r=o&&!c("gkx")("24134")&&e&&(!A||u);s=p&&!c("gkx")("23427")&&(u||A);o=f&&u;e=A||!c("gkx")("23421")&&t&&u;p=c("gkx")("23423");f=c("gkx")("23159");if(x!=null){b[3]!==x||b[4]!==v?(A=x("var(--chat-composer-button-color)",c("emptyFunction"),v),b[3]=x,b[4]=v,b[5]=A):A=b[5];t=A}else{b[6]===Symbol["for"]("react.memo_cache_sentinel")?(u=[],b[6]=u):u=b[6];t=u}x=t;A=c("useMWV2ComposerOnPressVoiceClip")(B);var F=B.state.stage!=="Unopen";b[7]!==F||b[8]!==C?(u=F?h._("__JHASH__gaxHiFwvIGk__JHASH__"):C?h._("__JHASH__SFruYEeI3S-__JHASH__"):h._("__JHASH__PUPO-44z1pF__JHASH__"),b[7]=F,b[8]=C,b[9]=u):u=b[9];var G=u,H=c("MessengerWebUXLogger").useInteractionLogger();t=E||q||r||s||o||e||p||f||g||x.length>0;var I=!t;b[10]!==i||b[11]!==x||b[12]!==v||b[13]!==A||b[14]!==w||b[15]!==q||b[16]!==g||b[17]!==o||b[18]!==s||b[19]!==E||b[20]!==r||b[21]!==e||b[22]!==y||b[23]!==z?(C={color:"var(--chat-composer-button-color)",editor:i,extraItems:x,onAttachmentsAdded:v,onClose:c("emptyFunction"),onPressVoiceClip:A,onSendMessage:w,showCreatePoll:q,showCreatePrompt:g,showFile:o,showGenAICreate:p,showGenAICreateVideo:f,showGif:s,showPayment:E,showSendVoiceClip:r,showSticker:e,supportedFileTypes:y,threadKey:z},b[10]=i,b[11]=x,b[12]=v,b[13]=A,b[14]=w,b[15]=q,b[16]=g,b[17]=o,b[18]=s,b[19]=E,b[20]=r,b[21]=e,b[22]=y,b[23]=z,b[24]=C):C=b[24];b[25]===Symbol["for"]("react.memo_cache_sentinel")?(u=c("JSResourceForInteraction")("MWV2ComposerOverflowMenu.react").__setRef("MWV2ComposerPlusButton.react"),b[25]=u):u=b[25];b[26]!==G||b[27]!==I||b[28]!==F||b[29]!==B||b[30]!==H?(t=function(a,b,e,f,g,h){return j.jsx(c("MWXTooltip.react"),{align:"middle",position:"above",tooltip:G,children:j.jsx(c("MWXPressable.react"),{"aria-label":G,disabled:I,onHoverIn:f,onHoverOut:g,onPress:function(){if(F){B.reset();m.onReady(function(a){return a.logDeleteRecording()});H==null?void 0:H({eventName:"composer_close_audio_recorder"});return}else H==null?void 0:H({eventName:"composer_open_overflow_menu"}),b()},onPressIn:h,overlayDisabled:I,overlayRadius:"50%",ref:a,testid:void 0,xstyle:function(){return[c("gkx")("23219")?n.plusButtonMDS:n.plusButtonFDS]},children:j.jsx(d("MWChatComposerIcons").MWChatComposerIconsMoreActions,{fill:I?void 0:"var(--chat-composer-button-color)",isRotated:F,size:20})})})},b[26]=G,b[27]=I,b[28]=F,b[29]=B,b[30]=H,b[31]=t):t=b[31];b[32]!==C||b[33]!==t?(p=j.jsx(c("MWXLazyPopoverTrigger.react"),{align:"start",onVisibilityChange:a,popoverProps:C,popoverResource:u,position:"above",preloadTrigger:"button",children:t}),b[32]=C,b[33]=t,b[34]=p):p=b[34];return p}g["default"]=a}),226);
__d("useMWHasPollsCreationEnabled",["LSThreadBitOffset","MWLSThread"],(function(a,b,c,d,e,f,g){"use strict";function a(a){a=(a=d("MWLSThread").useThread(a,h))!=null?a:!1;return a}function h(a){return d("LSThreadBitOffset").has(36,a)}g["default"]=a}),98);
__d("MWReQLComposerPlusButton.react",["LSThreadBitOffset","MWV2ComposerPlusButton.react","react","useMWHasPollsCreationEnabled"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||(h=d("react"))).c,j=h;function a(a){var b=i(32),e=a.canSendAudioClip,f=a.canSendFile,g=a.canSendPayment,h=a.editor,k=a.isInputExpanded,l=a.onAttachmentsAdded,m=a.onSendMessage,n=a.renderExtraOverflowMenuItems,o=a.supportedFileTypes,p=a.thread;a=a.voiceRecorder;var q=c("useMWHasPollsCreationEnabled")(p.threadKey),r;b[0]!==p?(r=d("LSThreadBitOffset").has(14,p),b[0]=p,b[1]=r):r=b[1];var s;b[2]!==p?(s=d("LSThreadBitOffset").has(4,p),b[2]=p,b[3]=s):s=b[3];var t;b[4]!==p?(t=d("LSThreadBitOffset").has(0,p),b[4]=p,b[5]=t):t=b[5];var u;b[6]!==p?(u=d("LSThreadBitOffset").has(152,p),b[6]=p,b[7]=u):u=b[7];var v;b[8]!==p?(v=d("LSThreadBitOffset").has(3,p),b[8]=p,b[9]=v):v=b[9];var w;b[10]!==r||b[11]!==s||b[12]!==t||b[13]!==q||b[14]!==u||b[15]!==v?(w={hasAudioClipsCapability:r,hasGIFCapability:s,hasPaymentCapability:t,hasPollCreationCapability:q,hasRollcallCapability:u,hasStickerCapability:v},b[10]=r,b[11]=s,b[12]=t,b[13]=q,b[14]=u,b[15]=v,b[16]=w):w=b[16];r=w;b[17]!==e||b[18]!==f||b[19]!==g||b[20]!==h||b[21]!==q||b[22]!==k||b[23]!==l||b[24]!==m||b[25]!==n||b[26]!==o||b[27]!==p.threadKey||b[28]!==p.threadType||b[29]!==a||b[30]!==r?(s=j.jsx(c("MWV2ComposerPlusButton.react"),babelHelpers["extends"]({canSendAudioClip:e,canSendFile:f,canSendPayment:g,editor:h,hasPollCreationCapability:q,isInputExpanded:k,onAttachmentsAdded:l,onSendMessage:m,renderExtraOverflowMenuItems:n,supportedFileTypes:o,threadKey:p.threadKey,threadType:p.threadType,voiceRecorder:a},r)),b[17]=e,b[18]=f,b[19]=g,b[20]=h,b[21]=q,b[22]=k,b[23]=l,b[24]=m,b[25]=n,b[26]=o,b[27]=p.threadKey,b[28]=p.threadType,b[29]=a,b[30]=r,b[31]=s):s=b[31];return s}g["default"]=a}),98);
__d("useParticipantsExcludingViewer",["I64","MAWSubscribeToContactNames","MWPActor.react","MWWorkForeignEntityTypeUtils","ReQL","ReQLSuspense","getLSMediaContactProfilePictureUrl","react","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=(j||d("react")).useMemo;function a(a){var b=a.threadKey,e=d("MWPActor.react").useActor(),g=(h||(h=c("useReStore")))(),j=d("ReQLSuspense").useArray(function(){return d("ReQL").fromTableAscending(g.tables.participants).getKeyRange(b).map(function(a){return[d("ReQLSuspense").first(d("ReQL").fromTableAscending(g.tables.contacts).getKeyRange(a.contactId),f.id+":42"),a]})},[g,b],f.id+":36"),l=k(function(){return j.reduce(function(a,b){var c=b[0];b=b[1];if(c!=null&&!(i||(i=d("I64"))).equal(c.id,e)){return a.concat([[babelHelpers["extends"]({},c,{name:(c=c.name)!=null?c:d("MAWSubscribeToContactNames").getUnknownUser()}),b]])}return a},[])},[j,e]);return k(function(){return new Map(l.map(function(a){var b,e=a[1];a=a[0];return[(i||(i=d("I64"))).to_string(a.id),{actualName:a.name,contactId:i.to_string(a.id),isAdmin:(b=e.isAdmin)!=null?b:!1,isContact:!0,jobTitle:a.workJobTitle,name:a.name,nickname:e.nickname,profilePictureUrl:c("getLSMediaContactProfilePictureUrl")(a),secondaryName:a.secondaryName,workForeignEntityInfo:d("MWWorkForeignEntityTypeUtils").getWorkForeignEntityType(a.workForeignEntityType)}]}))},[l])}g["default"]=a}),98);
__d("MWV2ComposerView.react",["fbt","FBLogger","I64","LSMessagingThreadTypeUtil","LSThreadBitOffset","Locale","MWAudioRecorder.react","MWCMThreadTypes.react","MWComposerEndButtonsGroup.react","MWComposerInnerButtonsGroup.react","MWComposerStartButtonsGroup.react","MWReQLComposerInner.react","MWReQLComposerPlusButton.react","MWV2ComposerMediaStaging.react","MWV2ComposerSendButton.react","Promise","ReQL","ReQLSuspense","emptyFunction","gkx","react","requireDeferred","stylex","useDeferredModuleOnReady","useIsAdsAIChat","useMWComposerAriaDescribedBy","useMWEntrypoint","useMWIsOffline","useParticipantsExcludingViewer","usePrevious","useReStore"],(function(a,b,c,d,e,f,g,aa){"use strict";var ba,ca,da,h,i,j=i||(i=d("react"));e=i;var ea=e.useEffect,fa=e.useId,ga=e.useRef,ha=e.c,k=c("requireDeferred")("getUpgradedCometEmojiComposerHandler").__setRef("MWV2ComposerView.react"),ia={container:{flexGrow:"x1iyjqo2",overflowX:"xw2csxc",position:"x1n2onr6",$$css:!0},hidden:{display:"x1s85apg",$$css:!0}};function ja(a){var b=ha(4),d=c("useDeferredModuleOnReady")(k),e,f;b[0]!==d||b[1]!==a?(e=function(){if(d!=null)return d(a,16)},f=[a,d],b[0]=d,b[1]=a,b[2]=e,b[3]=f):(e=b[2],f=b[3]);ea(e,f)}function a(a){var e=ha(145),g=a.ariaLabel,i=a.canSendAudioClip,k=a.canSendFile,l=a.canSendGif,m=a.canSendPayment,n=a.canSendSticker,o=a.composerLinkPreview,p=a.editor,q=a.editorElementRef,r=a.hasStuffToSend,s=a.hideAriaDescribedBy,t=a.isAiBotMentionsEnabled,u=a.isMentionsPluginEnabled,v=a.keepInputExpanded,w=a.localTimezoneInformation,x=a.mediaStaging,y=a.onAttachmentRemoved,z=a.onAttachmentsAdded,A=a.onSendMessage,B=a.placeholderText,ka=a.policyProduct,C=a.renderExtraButtons,D=a.renderExtraOverflowMenuItems,la=a.sendMessage,E=a.supportedFileTypes,ma=a.surface,F=a.thread,G=a.voiceRecorder;a=i===void 0?!0:i;i=k===void 0?!0:k;k=l===void 0?!0:l;l=m===void 0?!1:m;m=n===void 0?!0:n;n=s===void 0?!1:s;s=u===void 0?!0:u;u=v===void 0?!1:v;v=C===void 0?null:C;C=c("useMWIsOffline")();var H;e[0]!==k||e[1]!==F?(H=k&&d("LSThreadBitOffset").has(4,F)&&!c("gkx")("23427"),e[0]=k,e[1]=F,e[2]=H):H=e[2];k=H;e[3]!==F.threadType?(H=d("MWCMThreadTypes.react").isBroadcastThread(F.threadType),e[3]=F.threadType,e[4]=H):H=e[4];H=H;var I;e[5]!==F.threadType?(I=d("LSMessagingThreadTypeUtil").isAiBot(F.threadType),e[5]=F.threadType,e[6]=I):I=e[6];I=I;var J=c("useIsAdsAIChat")(F.threadKey),K;e[7]!==i||e[8]!==H||e[9]!==I||e[10]!==J||e[11]!==F?(K=i&&!c("gkx")("23428")&&(H||I||J?d("LSThreadBitOffset").has(56,F):!0),e[7]=i,e[8]=H,e[9]=I,e[10]=J,e[11]=F,e[12]=K):K=e[12];i=K;e[13]!==F.threadType?(H=d("LSMessagingThreadTypeUtil").isArmadilloSecure(F.threadType),e[13]=F.threadType,e[14]=H):H=e[14];I=H;e[15]!==m||e[16]!==F?(K=m&&!c("gkx")("23421")&&d("LSThreadBitOffset").has(3,F),e[15]=m,e[16]=F,e[17]=K):K=e[17];H=K;m=c("useMWEntrypoint")();var L=G.state.stage!=="Unopen";e[18]!==G||e[19]!==A?(K=function(){G.getVoiceClip().then(function(a){G.reset();A(void 0,void 0,void 0,void 0,void 0,void 0,void 0,a,void 0,void 0,void 0,void 0,void 0,void 0,void 0,"MWV2ComposerView.onSendVoiceClip");return(h||(h=b("Promise"))).resolve()})["catch"](function(a){c("FBLogger")("messenger_web_media").catching(a).warn("Failed to send voice clip in messenger composer ");return(h||(h=b("Promise"))).reject(a)})},e[18]=G,e[19]=A,e[20]=K):K=e[20];K=K;var na=ga(null),M=c("usePrevious")(L),N,O;e[21]!==L||e[22]!==M?(N=function(){if(L===!0&&M===!1){var a;(a=na.current)==null?void 0:a.focus()}},O=[L,na,M],e[21]=L,e[22]=M,e[23]=N,e[24]=O):(N=e[23],O=e[24]);ea(N,O);e[25]!==F.threadKey?(N={threadKey:F.threadKey},e[25]=F.threadKey,e[26]=N):N=e[26];O=c("useParticipantsExcludingViewer")(N);e[27]!==F?(N=d("LSThreadBitOffset").has(43,F),e[27]=F,e[28]=N):N=e[28];N=N;var P;e[29]===Symbol["for"]("react.memo_cache_sentinel")?(P=d("Locale").isRTL(),e[29]=P):P=e[29];P=P;var Q=c("gkx")("23219"),R;e[30]===Symbol["for"]("react.memo_cache_sentinel")?(R=Q?[36,8]:[32,4],e[30]=R):R=e[30];R=R;var S=R[0];R=R[1];var T=0+S|0,U;e[31]!==F.threadType?(U=d("LSMessagingThreadTypeUtil").isCMSubthread(F.threadType),e[31]=F.threadType,e[32]=U):U=e[32];U=U;u=r||u||U&&m==="inbox";m=T+S|0;e[33]!==u?(S=P?{marginRight:u?Q?8..toString()+"px":"0":((m+S|0)+R|0).toString()+"px"}:{marginLeft:u?Q?8..toString()+"px":"0":((m+S|0)+R|0).toString()+"px"},e[33]=u,e[34]=S):S=e[34];R=S;S=c("useMWComposerAriaDescribedBy")(F);var V=fa();ja(p);var W;e[35]!==F||e[36]!==J?(W=d("LSMessagingThreadTypeUtil").isDiscoverablePublicBroadcastChannel(F.threadType)||J&&!d("LSThreadBitOffset").has(109,F),e[35]=F,e[36]=J,e[37]=W):W=e[37];J=W;var X=(ba||(ba=c("useReStore")))();e[38]!==X.tables.custom_thread_commands||e[39]!==F.threadKey?(W=function(){return d("ReQL").fromTableAscending(X.tables.custom_thread_commands).getKeyRange(F.threadKey).filter(function(a){return!a.isOpenPersistentMenu})},e[38]=X.tables.custom_thread_commands,e[39]=F.threadKey,e[40]=W):W=e[40];var Y;e[41]!==X||e[42]!==F.threadKey?(Y=[X,F.threadKey],e[41]=X,e[42]=F.threadKey,e[43]=Y):Y=e[43];W=d("ReQLSuspense").useFirst(W,Y,f.id+":266")!=null;Y=c("gkx")("23425")&&W;var Z;e[44]===Symbol["for"]("react.memo_cache_sentinel")?(W=aa._("__JHASH__J510aPC_joc__JHASH__"),Z="xuk3077 x57kliw x78zum5 x6prxxf xz9dl7a xsag5q8",e[44]=W,e[45]=Z):(W=e[44],Z=e[45]);var $;e[46]!==a||e[47]!==i||e[48]!==l||e[49]!==p||e[50]!==u||e[51]!==z||e[52]!==A||e[53]!==D||e[54]!==E||e[55]!==F||e[56]!==G?($=j.jsx(c("MWReQLComposerPlusButton.react"),{canSendAudioClip:a,canSendFile:i,canSendPayment:l,editor:p,isInputExpanded:u,onAttachmentsAdded:z,onSendMessage:A,renderExtraOverflowMenuItems:D,supportedFileTypes:E,thread:F,voiceRecorder:G}),e[46]=a,e[47]=i,e[48]=l,e[49]=p,e[50]=u,e[51]=z,e[52]=A,e[53]=D,e[54]=E,e[55]=F,e[56]=G,e[57]=$):$=e[57];e[58]!==L||e[59]!==G||e[60]!==r||e[61]!==K?(l=L?j.jsxs(j.Fragment,{children:[j.jsx(c("MWAudioRecorder.react"),{voiceRecorder:G}),j.jsx(c("MWV2ComposerSendButton.react"),{hasStuffToSend:r,onPress:K,ref:na})]}):null,e[58]=L,e[59]=G,e[60]=r,e[61]=K,e[62]=l):l=e[62];D=L?ia.hidden:!1;e[63]!==D?(K=(da||(da=c("stylex")))(D,ia.container),e[63]=D,e[64]=K):K=e[64];e[65]!==a||e[66]!==i||e[67]!==k||e[68]!==H||e[69]!==o||e[70]!==u||e[71]!==I||e[72]!==w||e[73]!==z||e[74]!==A||e[75]!==E||e[76]!==F.threadKey||e[77]!==F.threadType||e[78]!==G?(D=j.jsx(c("MWComposerStartButtonsGroup.react"),{canSendAudioClipFinal:a,canSendFileFinal:i,canSendGifFinal:k,canSendSticker:H,composerLinkPreview:o,gifButtonPosition:m,isInputExpanded:u,isRTL:P,isSecureThread:I,localTimezoneInformation:w,onAttachmentsAdded:z,onSendMessage:A,shouldUseMDS:Q,stickerButtonPosition:T,supportedFileTypes:E,threadKey:F.threadKey,threadType:F.threadType,voiceRecorder:G}),e[65]=a,e[66]=i,e[67]=k,e[68]=H,e[69]=o,e[70]=u,e[71]=I,e[72]=w,e[73]=z,e[74]=A,e[75]=E,e[76]=F.threadKey,e[77]=F.threadType,e[78]=G,e[79]=D):D=e[79];e[80]===Symbol["for"]("react.memo_cache_sentinel")?(m="x78zum5 x1iyjqo2 x6q2ic0",e[80]=m):m=e[80];e[81]!==n||e[82]!==V||e[83]!==S?(P=!n&&j.jsx("div",{className:"xzpqnlu x1hyvwdk xjm9jq1 x6ikm8r x10wlt62 x10l6tqk x1i1rx1s",id:V,children:S}),e[81]=n,e[82]=V,e[83]=S,e[84]=P):P=e[84];T=n?void 0:V;e[85]!==p||e[86]!==v||e[87]!==F.threadKey?(a=j.jsx(c("MWComposerInnerButtonsGroup.react"),{editor:p,renderExtraButtons:v,shouldUseMDS:Q,threadKey:F.threadKey}),e[85]=p,e[86]=v,e[87]=F.threadKey,e[88]=a):a=e[88];k=i?z:c("emptyFunction");e[89]!==U||e[90]!==F.parentThreadKey||e[91]!==F.threadKey?(H=(ca||(ca=d("I64"))).to_string(U?F.parentThreadKey:F.threadKey),e[89]=U,e[90]=F.parentThreadKey,e[91]=F.threadKey,e[92]=H):H=e[92];e[93]!==x||e[94]!==y||e[95]!==z||e[96]!==E?(o=j.jsx(c("MWV2ComposerMediaStaging.react"),{mediaStaging:x,onAttachmentRemoved:y,onAttachmentsAdded:z,supportedFileTypes:E}),e[93]=x,e[94]=y,e[95]=z,e[96]=E,e[97]=o):o=e[97];e[98]!==s||e[99]!==t||e[100]!==N||e[101]!==F.threadType?(u=s&&(t===!0?!0:N&&d("LSMessagingThreadTypeUtil").isGroup(F.threadType)),e[98]=s,e[99]=t,e[100]=N,e[101]=F.threadType,e[102]=u):u=e[102];e[103]!==T||e[104]!==g||e[105]!==q||e[106]!==p||e[107]!==a||e[108]!==k||e[109]!==t||e[110]!==I||e[111]!==O||e[112]!==B||e[113]!==ka||e[114]!==H||e[115]!==o||e[116]!==u||e[117]!==ma?(w=j.jsx(c("MWReQLComposerInner.react"),{ariaDescribedBy:T,ariaLabel:g,contentEditableRef:q,editor:p,endContent:a,handlePastedFiles:k,isAiBotMentionsEnabled:t,isSecureThread:I,participants:O,placeholderText:B,policyProduct:ka,threadID:H,topContent:o,useMentionsPlugin:u,surface:ma,testId:"chat_input:rich-input"}),e[103]=T,e[104]=g,e[105]=q,e[106]=p,e[107]=a,e[108]=k,e[109]=t,e[110]=I,e[111]=O,e[112]=B,e[113]=ka,e[114]=H,e[115]=o,e[116]=u,e[117]=ma,e[118]=w):w=e[118];e[119]!==R||e[120]!==P||e[121]!==w?(S=j.jsxs("div",{className:m,style:R,children:[P,w]}),e[119]=R,e[120]=P,e[121]=w,e[122]=S):S=e[122];e[123]!==K||e[124]!==D||e[125]!==S?(n=j.jsxs("div",{className:K,children:[D,S]}),e[123]=K,e[124]=D,e[125]=S,e[126]=n):n=e[126];e[127]!==F.customEmoji||e[128]!==F.hasPersistentMenu||e[129]!==F.threadKey||e[130]!==F.threadType||e[131]!==C||e[132]!==p||e[133]!==r||e[134]!==L||e[135]!==A||e[136]!==la||e[137]!==J||e[138]!==Y?(V=j.jsx(c("MWComposerEndButtonsGroup.react"),{customEmoji:F.customEmoji,disabled:C,editor:p,hasPersistentMenu:F.hasPersistentMenu,hasStuffToSend:r,isVoiceRecorderOpen:L,onSendMessage:A,sendMessage:la,shouldHideHotLike:J,shouldHideTooltip:C,showCommands:Y,threadKey:F.threadKey,threadType:F.threadType}),e[127]=F.customEmoji,e[128]=F.hasPersistentMenu,e[129]=F.threadKey,e[130]=F.threadType,e[131]=C,e[132]=p,e[133]=r,e[134]=L,e[135]=A,e[136]=la,e[137]=J,e[138]=Y,e[139]=V):V=e[139];e[140]!==$||e[141]!==l||e[142]!==n||e[143]!==V?(Q=j.jsxs("div",{"aria-label":W,className:Z,"data-testid":void 0,role:"group",children:[$,l,n,V]}),e[140]=$,e[141]=l,e[142]=n,e[143]=V,e[144]=Q):Q=e[144];return Q}g.MWV2ComposerView=a}),226);
__d("MAWSendSecureAttachment",["FBLogger","I64","MAWBridgeSendAndReceive","MAWDbMsg","MAWJobDefinitions","MAWMessageSendReporter","MAWUIJob","QPLUserFlow","WAJobOrchestratorTypes","WALoggerDeferred","asyncToGeneratorRuntime","gkx","promiseDone","qpl","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h,i=c("requireDeferred")("MWLogSend").__setRef("MAWSendSecureAttachment");function a(a,b,c,d,e,f,g,h,i,k,l,m,n,o,p,q){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e,f,g,j,k,l,m,n,o,p,q,r,s,t){yield d("WALoggerDeferred").logWithTags(["MAWSendSecureMessageV2","Composer","MAWSendSecureAttachment"],["Starting attachment message send"],"LOG");if(b==null){c("QPLUserFlow").endFailure(c("qpl")._(25313175,"1551"),"no_chat_jid",{instanceKey:o});return}var u=null;if(m!=null){m=d("MAWDbMsg").toMsgId(m.messageId);m!=null&&(u=(yield d("MAWBridgeSendAndReceive").sendAndReceive("backend","getProtocolMsgIdByMsgId",{msgId:m})))}c("QPLUserFlow").addPoint(c("qpl")._(25313175,"1551"),"sending_media_to_wajob",{instanceKey:o});var v;switch(j.type){case"image":case"animated_image":case"sticker":var w;m=j.imageSpec;var x=j.thumbnailUrlAndSpec;v={args:{ephemeralSetting:(w=p)!=null?w:void 0,height:m.height,initiatingSource:q,isFirstMsg:n,isForwarded:!1,jpegThumbnail:x.jpegThumbnail,jpegThumbnailHeight:x.height,jpegThumbnailWidth:x.width,mediaGroupMetadata:t,offlineAttachmentId:k,optimisticMsg:r,quote:(w=u)!=null?w:void 0,source:l,width:m.width},attachmentType:"image",chatJid:b,externalId:s};break;case"video":x=j.thumbnailUrlAndSpec;v={args:{duration:x.duration,ephemeralSetting:(t=p)!=null?t:void 0,height:x.height,initiatingSource:q,isFirstMsg:n,isForwarded:!1,jpegThumbnail:x.jpegThumbnail,jpegThumbnailHeight:x.height,jpegThumbnailWidth:x.width,offlineAttachmentId:k,optimisticMsg:r,quote:(w=u)!=null?w:void 0,source:l,width:x.width},attachmentType:"video",chatJid:b,externalId:s};break;case"audio":m=j.durations;t=j.isPtt;v={args:{duration:Math.round(m),ephemeralSetting:(w=p)!=null?w:void 0,initiatingSource:q,isFirstMsg:n,isForwarded:!1,isPtt:t,offlineAttachmentId:k,optimisticMsg:r,quote:(x=u)!=null?x:void 0,source:l},attachmentType:"audio",chatJid:b,externalId:s};break;case"document":m=j.filename;v={args:{ephemeralSetting:(w=p)!=null?w:void 0,filename:m,initiatingSource:q,isFirstMsg:n,isForwarded:!1,offlineAttachmentId:k,optimisticMsg:r,quote:(t=u)!=null?t:void 0,source:l},attachmentType:"application",chatJid:b,externalId:s};break;default:c("QPLUserFlow").addPoint(c("qpl")._(25313175,"1551"),"uknown_file_type_sendMediaMsg_not_fired",{instanceKey:o}),c("FBLogger")("messenger_web_media").addMetadata("MESSENGER_E2EE_WEB","ERROR_MESSAGE","failed while sending attachment").mustfix("sendSecureAttachment: Failed while sending attachment, unknown attachment type %s",j.type)}var y;v!=null&&(c("gkx")("7854")?c("gkx")("7859")?(y=d("MAWBridgeSendAndReceive").sendAndReceive("backend","sendMediaMsgV2",babelHelpers["extends"]({},v,{mimeType:j.file.type,plaintext:yield j.file.arrayBuffer(),qplEventType:c("qpl")._(25313175,"1551"),qplInstanceKey:o})),c("promiseDone")(d("MAWMessageSendReporter").MAWMessageSendReporter({chatJid:b,externalId:s},y,{qplEventType:c("qpl")._(25313175,"1551"),qplInstanceKey:o},a))):(y=d("MAWBridgeSendAndReceive").sendAndReceive("backend","sendMediaMsg",babelHelpers["extends"]({},v,{file:j.file,qplEventType:c("qpl")._(25313175,"1551"),qplInstanceKey:o})),c("promiseDone")(d("MAWMessageSendReporter").MAWMessageSendReporter({chatJid:b,externalId:s},y,{qplEventType:c("qpl")._(25313175,"1551"),qplInstanceKey:o},a))):c("gkx")("7859")?y=d("MAWUIJob").UIJobStarters.waitUntilCompleted(d("MAWJobDefinitions").createStartJobInfo("sendMediaMsgV2",babelHelpers["extends"]({},v,{args:babelHelpers["extends"]({},v.args,{s2sInstanceKey:o}),mimeType:j.file.type,plaintext:yield j.file.arrayBuffer(),scheduleConfig:{priority:d("WAJobOrchestratorTypes").JOB_PRIORITY.UI_ACTION}}))):y=d("MAWUIJob").UIJobStarters.waitUntilCompleted(d("MAWJobDefinitions").createStartJobInfo("sendMediaMsg",babelHelpers["extends"]({},v,{args:babelHelpers["extends"]({},v.args,{s2sInstanceKey:o}),file:j.file,scheduleConfig:{priority:d("WAJobOrchestratorTypes").JOB_PRIORITY.UI_ACTION}}))));var z;switch(j.type){case"image":z=8;break;case"video":z=10;break;case"audio":z=11;break;case"document":z=34;break}yield d("WALoggerDeferred").logWithTags(["MAWSendSecureMessageV2","Composer","MAWSendSecureAttachment"],["Send attachment message is done"],"LOG");i.onReady(function(b){var c=(h||(h=d("I64"))).to_string(e);return b.log(a,{actor:g,attachmentFbids:[],attachmentType:z,backend:1,hasReply:!1,messagingThreadId:c,offlineThreadingId:k,sendType:0,source:l,threadKey:e,threadType:f})});yield y;return b});return j.apply(this,arguments)}g.sendSecureAttachment=a}),98);
__d("MAWSendFileMsgIfNecessaryV2",["FBLogger","MAWExternalId","MAWSendSecureAttachment","Promise","asyncToGeneratorRuntime","sendToSentQPLLogger"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e){var f=e.actorId,g=e.attachments,i=e.chatJid,j=e.ephemeralSetting,k=e.initiatingSource,l=e.isFirstMsg,m=e.mediaGroupMetadataMap,n=e.offlineAttachmentIdToMessageData,o=e.reply,p=e.s2sInstanceKey,q=e.source,r=e.thread;d("sendToSentQPLLogger").markSendToSentPoint(p,"send_attachment_start");e=g.map(function(b){var c=b[0];b=b[1];var e=n==null?void 0:n.get(b);return d("MAWSendSecureAttachment").sendSecureAttachment(a,i,r.threadKey,r.threadType,f,c,b,q,o,l,p,j,k,e==null?void 0:{msgId:e==null?void 0:e.messageExternalId,ts:e==null?void 0:e.offlineMsgTimestamp},(c=e==null?void 0:e.messageExternalId)!=null?c:d("MAWExternalId").generateExternalId(),m==null?void 0:m.get(b))});yield (h||(h=b("Promise"))).all(e)["catch"](function(a){d("sendToSentQPLLogger").markSendToSentFail(p,"send_attachment_failed",a),a instanceof Error?c("FBLogger")("messenger_web_media").catching(a).addMetadata("MESSENGER_E2EE_WEB","ERROR_MESSAGE","failed while sending attachment promise").mustfix("Failed while sending message"):c("FBLogger")("messenger_web_media").addMetadata("MESSENGER_E2EE_WEB","ERROR_MESSAGE","failed while sending attachment promise").mustfix("Failed while sending attachment, %s",a.message)})});return i.apply(this,arguments)}g.sendFileMsgIfNecessaryV2=a}),98);
__d("useLSMessagingInitiatingSourceNumber",["LSMessagingInitiatingSource","MWLSThreadDisplayContext"],(function(a,b,c,d,e,f,g){"use strict";function a(){var a=d("MWLSThreadDisplayContext").useMWLSThreadDisplayContext();if(a==null)return;else if(a==="Inbox")return c("LSMessagingInitiatingSource").FACEBOOK_INBOX;else if(a==="FullscreenChat")return c("LSMessagingInitiatingSource").FACEBOOK_FULLSCREEN;else if(a==="ChatTab")return c("LSMessagingInitiatingSource").FACEBOOK_CHAT;else return c("LSMessagingInitiatingSource").ROOMS_SIDE_CHAT}g["default"]=a}),98);
__d("useMAWCreateOptimisticSecureMessageWithAttachments",["MAWCreateOptimisticSecureMessageWithAttachment","MAWGetEphemeralSettings","MWPActor.react","Promise","asyncToGeneratorRuntime","cr:2300","nullthrows","qex","react","useLSMessagingInitiatingSourceNumber","useMWLSDefaultThreadSource","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=(j||d("react")).c;e=b("cr:2300")||{createIdbOptimisticMessageWithAttachment:void 0};var l=e.createIdbOptimisticMessageWithAttachment;function a(){var a=k(6),e=(i||(i=c("useReStore")))(),g=d("MWPActor.react").useActor(),j=c("useLSMessagingInitiatingSourceNumber")(),m=c("useMWLSDefaultThreadSource")();if(a[0]===Symbol["for"]("react.memo_cache_sentinel")){var n;n=(n=c("qex")._("60"))!=null?n:!1;a[0]=n}else n=a[0];var o=n;a[1]!==e||a[2]!==j||a[3]!==g||a[4]!==m?(n=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,i,k,n,p,q,r,s,t,u){if(s==null)return(h||(h=b("Promise"))).resolve();var v=o?yield d("MAWGetEphemeralSettings").getEphemeralSetting(k.jid,i):void 0;return e.runInTransaction(function(b){return o?c("nullthrows")(l)(b,{attachmentType:s,ephemeralSettings:v,initiatingSource:j,instanceKey:q,mawThreadResult:k,mediaGroupMetadataMap:u,messageExternalId:t,offlineAttachmentId:n,onOfflineMsgId:r,optimisticMediaAttachment:p,reply:a,senderId:g,threadKey:i,threadSource:m(i)}):d("MAWCreateOptimisticSecureMessageWithAttachment").createOptimisticMessageWithAttachment(e,b,g,a,i,n,p,q,r,s,t,u)},"readwrite","ui",void 0,f.id+":78")});return function(b,c,d,e,f,g,h,i,j,k){return a.apply(this,arguments)}}(),a[1]=e,a[2]=j,a[3]=g,a[4]=m,a[5]=n):n=a[5];return n}g["default"]=a}),98);
__d("useMaybeCreateThreadForMAWSendSecurMessageV2",["I64","LSDatabaseSingleton","MAWMiActMaybeCreateActThread","MAWWaitForBackendSetup","MWPActor.react","QPLUserFlow","ReQL","asyncToGeneratorRuntime","qpl","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=(h||d("react")).c;function a(){var a=k(2),e=d("MWPActor.react").useActor(),f;a[0]!==e?(f=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){c("QPLUserFlow").addPoint(c("qpl")._(25313175,"1551"),"db_resolved_in_maybe_create_thread_start",{instanceKey:b});var f=(yield (i||(i=d("LSDatabaseSingleton"))).LSDatabaseSingleton);c("QPLUserFlow").addPoint(c("qpl")._(25313175,"1551"),"db_resolved_in_maybe_create_thread_success",{instanceKey:b});var g=(yield d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(f.tables.participants,["contactId"]).getKeyRange(a).map(function(a){return(j||(j=d("I64"))).to_string(a.contactId)})));c("QPLUserFlow").addPoint(c("qpl")._(25313175,"1551"),"participant_ids_fetched",{instanceKey:b});return d("MAWWaitForBackendSetup").waitForBackendSetup("maybe-create-thread-for-send").then(function(){return c("MAWMiActMaybeCreateActThread")(f,a,{actorId:e,participantIds:g},b,"maybe-create-thread-for-send")})});return function(b,c){return a.apply(this,arguments)}}(),a[0]=e,a[1]=f):f=a[1];return f}g["default"]=a}),98);
__d("useMAWSendSecureGifAttachmentMessage",["FBLogger","Int64Hooks","LSDatabaseSingleton","LSIntEnum","MAWExternalId","MAWFetchExternalAttachmentBlob","MAWGetEphemeralSettings","MAWImagePreProcess","MAWSendFileMsgIfNecessaryV2","MAWSendFileMsgTypes","MAWStateContext.react","MWPActor.react","MessagingAttachmentType","Promise","QPLUserFlow","WALoggerDeferred","asyncToGeneratorRuntime","cr:7799","qpl","useLSMessagingInitiatingSourceNumber","useMAWCreateOptimisticSecureMessageWithAttachments","useMWLSDefaultThreadSource","useMaybeCreateThreadForMAWSendSecurMessageV2"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;function a(){var a=d("MWPActor.react").useActor(),e=c("useMWLSDefaultThreadSource")(),f=c("useMaybeCreateThreadForMAWSendSecurMessageV2")(),g=c("useLSMessagingInitiatingSourceNumber")(),k=c("useMAWCreateOptimisticSecureMessageWithAttachments")(),l=d("MAWStateContext.react").useDispatchOptimisticSendMessage(),m=b("cr:7799")();return d("Int64Hooks").useCallbackInt64(function(){var n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(n){var o=n.externalAttachmentUrl,p=n.lssTraceApi,q=n.onGenerateOfflineMsgId,r=n.reply,s=n.s2sInstanceKey;n=n.thread;yield d("WALoggerDeferred").logWithTags(["MAWSendSecureMessageV2","Composer","useMAWSendSecureGifAttachmentMessage"],["Starting GIF attachment message send"],"LOG");var t=new Map(),u;try{var v=d("MAWSendFileMsgTypes").toOfflineAttachmentIDFromStanzaId(d("MAWExternalId").generateExternalId()),w=d("MAWExternalId").generateExternalId(),x=e(n.threadKey),y=(yield (j||(j=b("Promise"))).all([(h||(h=d("LSDatabaseSingleton"))).LSDatabaseSingleton,f(n.threadKey,s)])),z=y[0];y=y[1];u=y;y=(yield d("MAWGetEphemeralSettings").getEphemeralSetting(u.jid,n.threadKey));c("QPLUserFlow").addPoint(c("qpl")._(25313175,"1551"),"fetch_ephemeral_settings",{instanceKey:s});p==null?void 0:p.addMarkerPoint("fetch_external_attachment_blob_start","AppTiming");o=(yield d("MAWFetchExternalAttachmentBlob").fetchExternalAttachmentBlob(o,s));o=new File([o],"gifFromPicker",{type:o.type});p==null?void 0:p.addMarkerPoint("fetch_external_attachment_blob_end","AppTiming");p==null?void 0:p.addMarkerPoint("create_optimistic_message_start","AppTiming");var A=(yield d("MAWImagePreProcess").optimisticImagePreprocess(o,!1));A=(yield k(r,n.threadKey,u,v,A,s,q,(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").ANIMATED_IMAGE),w));A!=null?(t.set(v,{messageExternalId:w,offlineMsgTimestamp:A.offlineMsgTimestamp}),l(A.messageExternalId,A.offlineMsgTimestamp),p==null?void 0:p.addMarkerPoint("create_optimistic_message_success","AppTiming")):(c("FBLogger")("messenger_web_media").mustfix("Failed while sending secure optimistic media message: unable to create optimistic message for GIF"),p==null?void 0:p.addMarkerPoint("create_optimistic_message_fail","AppTiming"));p==null?void 0:p.addMarkerPoint("preprocess_start","AppTiming");q=(yield d("MAWImagePreProcess").imagePreprocess(o,!1));p==null?void 0:p.addMarkerPoint("preprocess_end","AppTiming");w=[[q,v]];A={actorId:a,attachments:w,chatJid:u.jid,db:z,ephemeralSetting:y,initiatingSource:g,isFirstMsg:u.created,offlineAttachmentIdToMessageData:t,reply:r,s2sInstanceKey:s,source:x,thread:n};return yield d("MAWSendFileMsgIfNecessaryV2").sendFileMsgIfNecessaryV2(z,A)}catch(a){o=a instanceof Error?a.message:"Fail to send secure attachment message";p=Array.from(t.values()).map(function(a){a=a.messageExternalId;return a});u&&(yield m(p,o,u.jid));yield d("WALoggerDeferred").logWithTags(["MAWSendSecureMessageV2","Composer","useMAWSendSecureGifAttachmentMessage"],["Send GIF attachment message failed:"+JSON.stringify(a)],"ERROR");throw a}});return function(a){return n.apply(this,arguments)}}(),[a,k,l,e,g,m,f])}g["default"]=a}),98);
__d("MAWSendExternalLinkXMAV2",["ConstUriUtils","MAWBridgeSendAndReceive","MAWExternalId","MAWExternalLinkUtil","MAWGetEphemeralSettings","MAWGetImageSpec","MAWImagePreProcess","MAWJobDefinitions","MAWMessageSendReporter","MAWParseXMAProtocol","MAWTimedJob","MAWXMALoggingUtils","MWPBumpEntityKey","QPLUserFlow","WAArmadilloXMA.pb","WAJobOrchestratorTypes","WALogger","WAMediaQplHelper","asyncToGeneratorRuntime","gkx","justknobx","qpl","sendToSentQPLLogger"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(['S410301 The externalLinkUrl set as native and action URL in XMA is not a valid URI"']);h=function(){return a};return a}function a(a,b){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var e=a.chatJid,f=a.mentionedJids,g=a.message,i=a.offlineAttachmentId,j=a.optimisticMessageData,k=a.previewBlob,l=a.quote,m=a.s2sInstanceKey,n=a.source,o=a.threadKey;a=a.xmaData;d("sendToSentQPLLogger").markSendToSentPoint(m,"send_secure_link_preview_xma_message_start");o=(yield d("MAWGetEphemeralSettings").getEphemeralSetting(e,o));var p=void 0;if(k!=null&&d("MAWExternalLinkUtil").allowedPreviewTypes.includes(k.type)){k=new File([k],"preview",{type:k.type});if(c("gkx")("4423")){var q=(yield d("MAWImagePreProcess").generateImageThumbnailInWorkerWithFallback(k,c("justknobx")._("2033"))),r=new File([q.jpegThumbnail],"preview",{type:"image/jpeg"});p={file:r,height:q.height,width:q.width}}else{r=(yield d("MAWGetImageSpec").getImageSpec(k));p={file:k,height:r.height,width:r.width}}d("sendToSentQPLLogger").addSendToSentAnnotations(m,{string:{sent_xma_preview_file_size_bucket:d("WAMediaQplHelper").convertIntegerSizeToStringBucket(p.file.size)}})}d("sendToSentQPLLogger").addSendToSentAnnotations(m,{bool:{has_xma_preview:p!=null}});q={content:g,ephemeralSetting:o==null?void 0:o,mentionedJids:f?Array.from(f):void 0,offlineAttachmentId:i==null?void 0:i,optimisticMsg:j==null?void 0:{msgId:j==null?void 0:j.messageExternalId,ts:j==null?void 0:j.offlineMsgTimestamp},quote:l,source:n,xmaMessageType:d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_EXTERNAL_LINK_SHARE};r=(k=d("ConstUriUtils").getUri(a.url))==null?void 0:k.getDomain();g=d("MAWXMALoggingUtils").getXmaTargetTypeStringFromEnum(q.xmaMessageType);d("sendToSentQPLLogger").addSendToSentAnnotations(m,{string:{xmaTargetType:g}});d("ConstUriUtils").isValidUri(a.url)||d("WALogger").ERROR(h());d("MAWParseXMAProtocol").isURLValid(a.url,d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_EXTERNAL_LINK_SHARE,!1,!0)?d("MWPBumpEntityKey").bumpEntityKey("maw.xma_invalid_url","web_link_preview_url_valid"):d("MWPBumpEntityKey").bumpEntityKey("maw.xma_invalid_url","web_link_preview_url_invalid");f={defaultCTA:{actionUrl:a.url,buttonType:d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_CTA_BUTTON_TYPE.OPEN_NATIVE,nativeUrl:a.url},overlayIconGlyph:void 0,subtitleText:a.author_name,titleText:(o=a.title)!=null?o:r};c("QPLUserFlow").addPoint(c("qpl")._(25313175,"1551"),"sending_message_to_wajob",{instanceKey:m});if(c("gkx")("7854")){l=(i=j==null?void 0:j.messageExternalId)!=null?i:d("MAWExternalId").generateExternalId();return d("MAWMessageSendReporter").MAWMessageSendReporter({chatJid:e,externalId:l},d("MAWBridgeSendAndReceive").sendAndReceive("backend","sendXMAShareMsg",{args:q,chatJid:e,qplEventType:c("qpl")._(25313175,"1551"),qplInstanceKey:m,xmaArgs:f,xmaMsgExternalId:l}),{qplEventType:c("qpl")._(25313175,"1551"),qplInstanceKey:m},b)}else{return d("MAWTimedJob").TimedUIJobStarters.waitUntilCompleted(d("MAWJobDefinitions").createStartJobInfo("sendXMAShareMsg",{args:babelHelpers["extends"]({},q,{s2sInstanceKey:m,s2sUserFlowQPLEvent:c("qpl")._(25313175,"1551")}),chatJid:e,previewFile:(n=p)!=null?n:void 0,s2sInstanceKey:m,scheduleConfig:{priority:d("WAJobOrchestratorTypes").JOB_PRIORITY.UI_ACTION},xmaArgs:f,xmaMsgExternalId:(k=j==null?void 0:j.messageExternalId)!=null?k:d("MAWExternalId").generateExternalId()}))}});return i.apply(this,arguments)}g.sendExternalLinkXMAV2=a}),98);
__d("useMAWCreateOptimisticSecureMessageWithXMAAttachment",["I64","LSIntEnum","MAWAdminMsg","MAWBumpThread","MAWCreateOptimisticSecureMessage","MAWLocalizationType","MAWOptimisticMessageUtils","MAWSendFileMsgTypes","MAWVault","MWPActor.react","MessagingAttachmentType","Promise","QPLUserFlow","asyncToGeneratorRuntime","cr:12008","nullthrows","qex","qpl","react","useAsyncReStore","useLSMessagingInitiatingSourceNumber","useMWLSDefaultThreadSource"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l=(k||d("react")).c,m=b("cr:12008")||void 0;function a(){var a=l(6),e=c("useAsyncReStore")(),g=d("MWPActor.react").useActor(),i=c("useMWLSDefaultThreadSource")(),j=c("useLSMessagingInitiatingSourceNumber")();if(a[0]===Symbol["for"]("react.memo_cache_sentinel")){var k;k=(k=c("qex")._("60"))!=null?k:!1;a[0]=k}else k=a[0];var o=k;a[1]!==e||a[2]!==g||a[3]!==j||a[4]!==i?(k=function(a,d,k,l,p,q,r,s,t,u,v,w,x){return(h||(h=b("Promise"))).resolve(e).then(function(b){return b.runInTransaction(function(e){return o?c("nullthrows")(m)(e,g,a,d,l,p,q,k,r,s,t,u,v,j,i(d),w,x):n(b,e,g,a,d,l,p,q,r,s,t,u,v,w)},"readwrite","ui",void 0,f.id+":89")})},a[1]=e,a[2]=g,a[3]=j,a[4]=i,a[5]=k):k=a[5];return k}function n(a,b,c,d,e,f,g,h,i,j,k,l,m,n){return o.apply(this,arguments)}function o(){o=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e,f,g,h,k,l,m,n,o,p,q,r){m(n);m=d("MAWOptimisticMessageUtils").getOptimisticMessageTimestamp();var s=(i||(i=d("I64"))).of_float(m);f=(yield d("MAWCreateOptimisticSecureMessage").buildOptimisticLsMessage(a,b,e,f,(a=d("MAWVault").unvault(q))!=null?a:"",g,void 0,l,r,n,s,1024));yield b.messages.add(f);a=d("MAWOptimisticMessageUtils").buildOptimisticAttachment({attachmentType:(j||(j=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").XMA),messageExternalId:n,offlineAttachmentId:h,optimisticMediaAttachment:k,senderId:e,subtitleText:p,threadKey:g,timestampMsI64:s,titleText:o});yield b.attachments.add(a);c("QPLUserFlow").addPoint(c("qpl")._(25313175,"1551"),"after_create_optimistic_message",{instanceKey:l});yield d("MAWBumpThread").threadMutation_DEPRECATED({description:"useMAWCreateOptimisticSecureMessageWithXMAAttachment",lastActivityTs:s,lastReadTs:s,snippet:d("MAWAdminMsg").buildLocalizedString([d("MAWVault").unvault(q)],[],d("MAWLocalizationType").CURRENT_USER_SEND_TEXT),snippetSenderContactId:e,threadKey:g,txn:b});return{messageExternalId:n,offlineAttachmentId:d("MAWSendFileMsgTypes").toOfflineAttachmentIDFromString(h),offlineMsgTimestamp:m}});return o.apply(this,arguments)}g["default"]=a}),98);
__d("useMAWCreateOptimisticSecureMessageV2",["I64","MAWCreateOptimisticSecureMessage","MAWOptimisticMessageUtils","MWPActor.react","Promise","QPLUserFlow","asyncToGeneratorRuntime","qpl","react","useAsyncReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;e=j||d("react");e.useCallback;var k=e.c;function a(){var a=k(3),e=c("useAsyncReStore")(),g=d("MWPActor.react").useActor(),j;a[0]!==e||a[1]!==g?(j=function(a,j,k,l,m,n,o,p){return(h||(h=b("Promise"))).resolve(e).then(function(e){return e.runInTransaction(function(){var f=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){c("QPLUserFlow").addPoint(c("qpl")._(25313175,"1551"),"before_create_optimistic_message",{instanceKey:m});var f=d("MAWOptimisticMessageUtils").getOptimisticMessageTimestamp(),h=(i||(i=d("I64"))).of_float(f);o(p);var q=(yield d("MAWCreateOptimisticSecureMessage").buildOptimisticLsMessage(e,b,g,a,j,k,l,m,n,p,h,1,p));yield b.messages.add(q);c("QPLUserFlow").addPoint(c("qpl")._(25313175,"1551"),"after_create_optimistic_message",{instanceKey:m});yield d("MAWOptimisticMessageUtils").optimisticBumpThread(b,{hotEmojiSize:l,mentionedJids:n,messageText:j,senderId:g,threadKey:k,ts:h});return{messageExternalId:p,offlineMsgTimestamp:f}});return function(a){return f.apply(this,arguments)}}(),"readwrite","ui",void 0,f.id+":58")})},a[0]=e,a[1]=g,a[2]=j):j=a[2];return j}g["default"]=a}),98);
__d("useMAWSendMessageV2",["I64","LSHotEmojiSize","LSIntEnum","MAWBridgeSendAndReceive","MAWJobDefinitions","MAWMessageSendReporter","MAWTimedJob","MWPActor.react","MWPReplyContext.react","QPLUserFlow","WAJobOrchestratorTypes","asyncToGeneratorRuntime","gkx","qpl","react","react-forget-runtime","requireDeferred","useLSMessagingInitiatingSourceNumber"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;e=h||d("react");e.useContext;var k=e.c,l=c("requireDeferred")("MWLogSend").__setRef("useMAWSendMessageV2");function m(a){if(a==null)return;if((i||(i=d("I64"))).equal(a,(j||(j=d("LSIntEnum"))).ofNumber(c("LSHotEmojiSize").SMALL)))return 1;if((i||(i=d("I64"))).equal(a,(j||(j=d("LSIntEnum"))).ofNumber(c("LSHotEmojiSize").MEDIUM)))return 2;if((i||(i=d("I64"))).equal(a,(j||(j=d("LSIntEnum"))).ofNumber(c("LSHotEmojiSize").LARGE)))return 3}function a(){var a=k(4),e=d("MWPActor.react").useActor(),f=d("react-forget-runtime").useContextWithBailoutExperiment__unstable(d("MWPReplyContext.react").MWPReplyContext,n),g=f.reply,h=c("useLSMessagingInitiatingSourceNumber")();a[0]!==h||a[1]!==e||a[2]!==g?(f=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,f,j,k,n,o,p,q,r,s,t,u,v,w,x,y,z){k=babelHelpers["extends"]({content:k,initiatingSource:h,isFirstMsg:s,isForwarded:!1,openMessageOtid:o,openMessageParticipantCount:t,optimisticMsg:{msgId:p,ts:q},participantCount:u,source:n,specialTextSize:m(r)},v!=null&&{quote:v});w!=null&&(k.ephemeralSetting=w);x!=null&&(k.mentionedJids=[].concat(x));c("QPLUserFlow").addPoint(c("qpl")._(25313175,"1551"),"sending_message_to_wajob_start",{instanceKey:y});if(c("gkx")("7854")){s=d("MAWBridgeSendAndReceive").sendAndReceive("backend","sendMsg",{args:k,chatJid:j,externalId:z,qplEventType:c("qpl")._(25313175,"1551"),qplInstanceKey:y});l.onReady(function(c){var h=(i||(i=d("I64"))).to_string(b),j=r!=null?3:0;return c.log(a,{_mentionedJids:x,actor:e,attachmentFbids:[],attachmentType:j,backend:1,hasReply:g!=null,messagingThreadId:h,msgTtl:w==null?void 0:w.ephemeralExpirationInSec,offlineThreadingId:z,sendType:0,source:n,threadKey:b,threadType:f})});c("QPLUserFlow").addPoint(c("qpl")._(25313175,"1551"),"sending_message_to_wajob_end",{instanceKey:y});yield d("MAWMessageSendReporter").MAWMessageSendReporter({chatJid:j,externalId:z},s,{qplEventType:c("qpl")._(25313175,"1551"),qplInstanceKey:y},a)}else{o=d("MAWTimedJob").TimedUIJobStarters.waitUntilCompleted(d("MAWJobDefinitions").createStartJobInfo("sendMsg",{args:babelHelpers["extends"]({},k,{s2sInstanceKey:y,s2sUserFlowQPLEvent:c("qpl")._(25313175,"1551")}),chatJid:j,externalId:z,scheduleConfig:{priority:d("WAJobOrchestratorTypes").JOB_PRIORITY.UI_ACTION}}));l.onReady(function(c){var h=(i||(i=d("I64"))).to_string(b),j=r!=null?3:0;return c.log(a,{_mentionedJids:x,actor:e,attachmentFbids:[],attachmentType:j,backend:1,hasReply:g!=null,messagingThreadId:h,msgTtl:w==null?void 0:w.ephemeralExpirationInSec,offlineThreadingId:z,sendType:0,source:n,threadKey:b,threadType:f})});c("QPLUserFlow").addPoint(c("qpl")._(25313175,"1551"),"sending_message_to_wajob_end",{instanceKey:y});yield o}});return function(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){return a.apply(this,arguments)}}(),a[0]=h,a[1]=e,a[2]=g,a[3]=f):f=a[3];return f}function n(a){return[a.reply]}g["default"]=a}),98);
__d("useMAWSendSecureTextMessage",["MAWBridgeSendAndReceive","MAWDbMsg","MAWExternalId","MAWGetEphemeralSettings","MAWStateContext.react","MAWVault","Promise","WALoggerDeferred","asyncToGeneratorRuntime","cr:4535","cr:7799","emptyFunction","promiseDone","qex","react","sendToSentQPLLogger","useMAWCreateOptimisticSecureMessageV2","useMAWSendMessageV2","useMWLSDefaultThreadSource","useMaybeCreateThreadForMAWSendSecurMessageV2"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=(i||d("react")).useCallback;function a(){var a=c("useMWLSDefaultThreadSource")(),e=c("useMaybeCreateThreadForMAWSendSecurMessageV2")(),f=c("useMAWSendMessageV2")(),g=c("useMAWCreateOptimisticSecureMessageV2")(),i=b("cr:7799")(),k=d("MAWStateContext.react").useDispatchOptimisticSendMessage(),l=b("cr:4535")();return j(function(){var j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(j,m){var n=m.hotEmojiSize,o=m.lssTraceApi,p=m.mentionedJids,q=m.messageText,r=m.onGenerateOfflineMsgId,s=m.reply,t=m.s2sInstanceKey,u=m.thread;d("sendToSentQPLLogger").markSendToSentPoint(t,"send_secure_message_start");var v=d("MAWExternalId").generateExternalId(),w=null,x;try{o==null?void 0:o.addMarkerPoint("create_optimistic_message_start","AppTiming");m=c("qex")._("189")?yield b("asyncToGeneratorRuntime").asyncToGenerator(function*(){x=(yield d("sendToSentQPLLogger").measureSendToSentPerformance("maybe_create_thread",t,function(){return e(u.threadKey,t)}));w=(yield d("MAWGetEphemeralSettings").getEphemeralSetting(x.jid,u.threadKey));var a=(yield d("sendToSentQPLLogger").measureSendToSentPerformance("create_optimistic_message_v2",t,function(){var a;return l(s,d("MAWVault").vault(q),u.threadKey,x,n,t,p,(a=r)!=null?a:c("emptyFunction"),v,w)}));return[x,a]})():yield (h||(h=b("Promise"))).all([d("sendToSentQPLLogger").measureSendToSentPerformance("maybe_create_thread",t,function(){return e(u.threadKey,t)}),d("sendToSentQPLLogger").measureSendToSentPerformance("create_optimistic_message_v2",t,function(){var a;return g(s,d("MAWVault").vault(q),u.threadKey,n,t,p,(a=r)!=null?a:c("emptyFunction"),v)})]);var y=m[0];m=m[1];o==null?void 0:o.addMarkerPoint("create_optimistic_message_end","AppTiming");o=m.offlineMsgTimestamp;k(m.messageExternalId,Date.now());d("sendToSentQPLLogger").markSendToSentPoint(t,"fetch_ephemeral_settings_start");w=w===null?yield d("MAWGetEphemeralSettings").getEphemeralSetting(y.jid,u.threadKey):w;d("sendToSentQPLLogger").markSendToSentPoint(t,"fetch_ephemeral_settings_end");m=a(u.threadKey);var z=null;if(s!=null){d("sendToSentQPLLogger").markSendToSentPoint(t,"fetch_reply_message_start");var A=d("MAWDbMsg").toMsgId(s.messageId);A!=null&&(z=(yield d("MAWBridgeSendAndReceive").sendAndReceive("backend","getProtocolMsgIdByMsgId",{msgId:A})));d("sendToSentQPLLogger").markSendToSentPoint(t,"fetch_reply_message_end")}return yield f(j,u.threadKey,u.threadType,y.jid,q,m,void 0,v,o,n,y.created,void 0,void 0,z,w,p,t,v)}catch(a){A=a instanceof Error?a.message:"Fail to send secure text message";v!=null&&x!=null&&c("promiseDone")(i([v],A,x.jid));yield d("WALoggerDeferred").logWithTags(["MAWSendSecureMessageV2","Composer","useMAWSendSecureTextMessage"],["Send text message failed:"+JSON.stringify(a)],"ERROR");throw a}});return function(a,b){return j.apply(this,arguments)}}(),[g,l,k,a,i,e,f])}g["default"]=a}),98);
__d("useMAWSendSecureLinkXMAMessage",["ConstUriUtils","E2EELinkPreviewXMADataStatus","E2EELinkPreviewXMADataType","E2EELinkPreviewXMASendStatus","FBLogger","I64","MAWBridgeSendAndReceive","MAWDbMsg","MAWExternalId","MAWExternalLinkUtil","MAWFetchXMABlob","MAWFindFirstUrl","MAWImagePreProcess","MAWIsLinkPreviewWaitForXmaEnabled","MAWIsLinkPreviewXMAEnabled","MAWLinkPreviewDataStatusUtils","MAWLinkPreviewDataTypeUtils","MAWParseLinkPreviewXMAData","MAWSendExternalLinkXMAV2","MAWStateContext.react","MAWVault","MWPBumpEntityKey","Promise","ReQL","WAArmadilloXMA.pb","WALoggerDeferred","WAMediaQplHelper","asyncToGeneratorRuntime","clearTimeout","cr:7799","emptyFunction","justknobx","promiseDone","react","sendToSentQPLLogger","setTimeout","useMAWCreateOptimisticSecureMessageWithXMAAttachment","useMAWSendSecureTextMessage","useMWLSDefaultThreadSource","useMaybeCreateThreadForMAWSendSecurMessageV2"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;e=j||d("react");var k=e.useCallback,l=e.useEffect,m=e.useRef;function a(){var a=c("useMWLSDefaultThreadSource")(),e=c("useMaybeCreateThreadForMAWSendSecurMessageV2")(),f=c("useMAWSendSecureTextMessage")(),g=d("MAWIsLinkPreviewXMAEnabled").isLinkPreviewXMAEnabled(),i=c("useMAWCreateOptimisticSecureMessageWithXMAAttachment")(),j=d("MAWStateContext.react").useDispatchOptimisticSendMessage(),o=b("cr:7799")(),q=m(c("emptyFunction")),s=m(null),w=m(null);l(function(){return function(){if(!d("MAWIsLinkPreviewWaitForXmaEnabled").isLinkPreviewWaitForXmaEnabled())return;q.current();w.current=null;s.current!=null&&(c("clearTimeout")(s.current),s.current=null)}},[]);var x=function(a,b){d("sendToSentQPLLogger").markSendToSentPoint(a.s2sInstanceKey,"wait_for_link_preview_xma_data_timeout");s.current=null;w.current=d("MAWSendExternalLinkXMAV2").sendExternalLinkXMAV2(a,b);return w.current},y=k(function(a,e,f,g){return new(h||(h=b("Promise")))(function(b){q.current=a.subscribe(function(a,h){if(h.operation==="delete")return;a=w.current;if(a!=null){q.current();w.current=null;return a.then(function(){return b()})}a=h.value;var i=d("MAWParseLinkPreviewXMAData").parseLinkPreviewXMAData(a);h=d("MAWLinkPreviewDataStatusUtils").linkPreviewDataStatusIsOfType(a==null?void 0:a.status,c("E2EELinkPreviewXMADataStatus").LOADED);if(!h||i==null)return;c("clearTimeout")(s.current);var j=d("MAWLinkPreviewDataTypeUtils").linkPreviewDataTypeIsOfType(a==null?void 0:a.dataType,c("E2EELinkPreviewXMADataType").OEMBED);d("sendToSentQPLLogger").markSendToSentPoint(e,"wait_for_link_preview_xma_data_completed");c("promiseDone")(d("sendToSentQPLLogger").measureSendToSentPerformance("fetch_link_preview_blob",e,function(){return t(j,i)}),function(a){u(e,a);return d("MAWSendExternalLinkXMAV2").sendExternalLinkXMAV2(babelHelpers["extends"]({},f,{previewBlob:a,xmaData:i}),g).then(function(){return b()})});q.current()})})},[]);return k(function(){var h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b,h){var k=h.currentDraftId,l=h.lssTraceApi,m=h.mentionedJids,q=h.messageText,w=h.onGenerateOfflineMsgId,z=h.reply,A=h.s2sInstanceKey,B=h.thread,C=h.threadKey;yield d("WALoggerDeferred").logWithTags(["MAWSendSecureMessageV2","Composer","useMAWSendSecureLinkXMAMessage"],["Starting Link Preview XMA attachment message send"],"LOG");h=d("MAWFindFirstUrl").findFirstUrl(q);h=h.length>0?h[0]:null;void n(b,k);var D=d("MAWExternalId").generateExternalId(),E;try{var F=g?yield p(b,k,A,l):yield r(q,A,l),G=F==null?void 0:F.xmaData,H=d("MAWLinkPreviewDataTypeUtils").linkPreviewDataTypeIsOfType(F==null?void 0:F.dataType,c("E2EELinkPreviewXMADataType").OEMBED),I=d("MAWLinkPreviewDataStatusUtils").linkPreviewDataStatusIsOfType(F==null?void 0:F.dataStatus,c("E2EELinkPreviewXMADataStatus").DISABLED);d("sendToSentQPLLogger").addSendToSentAnnotations(A,{bool:{has_xma_data:G!=null,is_link_preview_enabled:g,is_link_preview_oembed_data:H,is_wait_for_xma_data_enabled:d("MAWIsLinkPreviewWaitForXmaEnabled").isLinkPreviewWaitForXmaEnabled()}});l==null?void 0:l.addAnnotationBoolean("has_xma_data",G!=null);l==null?void 0:l.addAnnotationBoolean("is_link_preview_enabled",g);l==null?void 0:l.addAnnotationBoolean("is_link_preview_oembed_data",H);if(k==null||h==null||I&&d("MAWIsLinkPreviewWaitForXmaEnabled").isLinkPreviewWaitForXmaEnabled()||G==null&&!d("MAWIsLinkPreviewWaitForXmaEnabled").isLinkPreviewWaitForXmaEnabled())return f(b,{mentionedJids:m,messageText:q,onGenerateOfflineMsgId:w,reply:z,s2sInstanceKey:A,thread:B});I={title:(I=d("ConstUriUtils").getUri(h.entity.url))==null?void 0:I.getDomain(),url:h.entity.url};h=(h=G)!=null?h:I;I=(yield v(z));var J=d("MAWExternalId").generateExternalId();w==null?void 0:w(J);var K=a(C);E=(yield d("sendToSentQPLLogger").measureSendToSentPerformance("maybe_create_thread",A,function(){return e(C,A)}));l==null?void 0:l.addMarkerPoint("fetch_link_preview_blob_start","AppTiming");var L=(yield d("sendToSentQPLLogger").measureSendToSentPerformance("fetch_link_preview_blob",A,function(){return t(H,G)}));u(A,L);l==null?void 0:l.addMarkerPoint("fetch_link_preview_blob_end","AppTiming");l==null?void 0:l.addMarkerPoint("create_optimistic_message_start","AppTiming");var M=null;if(L!=null&&d("MAWExternalLinkUtil").allowedPreviewTypes.includes(L.type)){var N=new File([L],"preview",{type:L.type});M=(yield d("MAWImagePreProcess").optimisticImagePreprocess(N))}z=(yield i(z,B.threadKey,E,J,M,A,(N=w)!=null?N:c("emptyFunction"),D,h==null?void 0:h.title,h==null?void 0:h.author_name,d("MAWVault").vault(q),m,d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_EXTERNAL_LINK_SHARE));B=z!=null?{messageExternalId:D,offlineMsgTimestamp:z.offlineMsgTimestamp}:void 0;B!=null?(j(B.messageExternalId,B.offlineMsgTimestamp),l==null?void 0:l.addMarkerPoint("create_optimistic_message_success","AppTiming")):(c("FBLogger")("messenger_web_media").mustfix("Failed while sending secure optimistic media message: unable to create optimistic message for GIF"),l==null?void 0:l.addMarkerPoint("create_optimistic_message_fail","AppTiming"));M=d("MAWLinkPreviewDataStatusUtils").linkPreviewDataStatusIsOfType(F==null?void 0:F.dataStatus,c("E2EELinkPreviewXMADataStatus").LOADED);var O={chatJid:E.jid,mentionedJids:m,message:q,offlineAttachmentId:J,optimisticMessageData:B,quote:(w=I)!=null?w:void 0,s2sInstanceKey:A,source:K,threadKey:C};d("MWPBumpEntityKey").bumpEntityKey("maw.send_secure_link_xma",G==null?"xma_data_is_null":"xma_data_is_not_null");if(G!=null&&!M&&g&&d("MAWIsLinkPreviewWaitForXmaEnabled").isLinkPreviewWaitForXmaEnabled()){N=d("MAWIsLinkPreviewWaitForXmaEnabled").isLinkPreviewWaitForXmaEnabledShortTimeout()?c("justknobx")._("3137"):c("justknobx")._("3138");s.current=c("setTimeout")(function(){return x(babelHelpers["extends"]({},O,{previewBlob:L,xmaData:G}),b)},N);z=d("ReQL").fromTableAscending(b.tables.e2ee_composer_draft_link_preview).getKeyRange(k);return y(z,A,O,b)}return d("MAWSendExternalLinkXMAV2").sendExternalLinkXMAV2(babelHelpers["extends"]({},O,{previewBlob:L,xmaData:h}),b)}catch(a){l=a instanceof Error?a.message:"Fail to send secure attachment message";E!=null&&(yield o([D],l,E.jid));c("FBLogger")("messenger_web_sharing").catching(a).mustfix("[External link] Failed to send external link XMA ");yield d("WALoggerDeferred").logWithTags(["MAWSendSecureMessageV2","Composer","useMAWSendSecureLinkXMAMessage"],["Send Link Preview XMA attachment message failed:"+JSON.stringify(a)],"ERROR");throw a}});return function(a,b){return h.apply(this,arguments)}}(),[i,j,a,g,o,e,f,y])}function n(a,b){return o.apply(this,arguments)}function o(){o=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e){if(e==null)return;yield a.runInTransaction(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=(yield a.e2ee_composer_draft_link_preview.get(e));yield a.e2ee_composer_draft_link_preview.upsert([e],babelHelpers["extends"]({},b,{draftId:e,sendStatus:(i||(i=d("I64"))).of_int32(c("E2EELinkPreviewXMASendStatus").SENDING)}))});return function(b){return a.apply(this,arguments)}}(),"readwrite",void 0,void 0,f.id+":501")});return o.apply(this,arguments)}function p(a,b,c,d){return q.apply(this,arguments)}function q(){q=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e,g){if(b==null){d("sendToSentQPLLogger").markSendToSentPoint(e,"get_link_preview_xma_data_from_table_no_draft_id");g==null?void 0:g.addMarkerPoint("get_link_preview_xma_data_from_table_no_draft_id","AppTiming");return null}d("sendToSentQPLLogger").markSendToSentPoint(e,"get_link_preview_xma_data_from_table");g==null?void 0:g.addMarkerPoint("get_link_preview_xma_data_from_table","AppTiming");a=(yield a.runInTransaction(function(a){return a.e2ee_composer_draft_link_preview.get(b)},"readonly",void 0,void 0,f.id+":540"));if(d("MAWLinkPreviewDataStatusUtils").linkPreviewDataStatusIsOfType(a==null?void 0:a.status,c("E2EELinkPreviewXMADataStatus").LOADING)){d("sendToSentQPLLogger").markSendToSentPoint(e,"get_link_preview_xma_data_from_table_still_loading");g==null?void 0:g.addMarkerPoint("get_link_preview_xma_data_from_table_still_loading","AppTiming");if(!d("MAWIsLinkPreviewWaitForXmaEnabled").isLinkPreviewWaitForXmaEnabled())return null}return{dataStatus:a==null?void 0:a.status,dataType:a==null?void 0:a.dataType,xmaData:d("MAWParseLinkPreviewXMAData").parseLinkPreviewXMAData(a)}});return q.apply(this,arguments)}function r(a,b,c){return s.apply(this,arguments)}function s(){s=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e){a=d("MAWFindFirstUrl").findFirstUrl(a);if(a.length===0)return null;var f=a[0];a=d("MAWExternalLinkUtil").findFirstAvailableOembedUrlAndRequestPair(a);f=f.entity.url;var g=null;if(a!=null){f=a.oEmbedUrl;try{d("sendToSentQPLLogger").markSendToSentPoint(b,"fetch_link_preview_xma_start"),e==null?void 0:e.addMarkerPoint("fetch_link_preview_xma_data_start","AppTiming"),g=(yield d("MAWExternalLinkUtil").getOembedResponse({fallbackUrl:f,request:a.oEmbedRequest})),d("sendToSentQPLLogger").markSendToSentPoint(b,"fetch_link_preview_xma_success"),e==null?void 0:e.addMarkerPoint("fetch_link_preview_xma_data_success","AppTiming")}catch(a){d("sendToSentQPLLogger").markSendToSentPoint(b,"fetch_link_preview_xma_fail"),d("sendToSentQPLLogger").addSendToSentAnnotations(b,{string:{fetch_link_preview_xma_data_error:a.message}}),e==null?void 0:e.addMarkerPoint("fetch_link_preview_xma_data_fail","AppTiming"),e==null?void 0:e.addAnnotation("fetch_link_preview_xma_data_error",a.message),c("FBLogger")("messenger_web_sharing").catching(a).mustfix("[External link] Failed to send External Link XMA.")}}return{dataStatus:(i||(i=d("I64"))).of_int32(c("E2EELinkPreviewXMADataStatus").LOADED),dataType:i.of_int32(g!=null?c("E2EELinkPreviewXMADataType").OEMBED:c("E2EELinkPreviewXMADataType").FALLBACK),xmaData:babelHelpers["extends"]({},g,{url:(b=(a=g)==null?void 0:a.url)!=null?b:f})}});return s.apply(this,arguments)}var t=function(a,b){return a?d("MAWExternalLinkUtil").getImageBlobResponse({url:b==null?void 0:b.thumbnail_url}):d("MAWFetchXMABlob").fetchBlob({descriptionForLogging:"useMAWSendSecureLinkXMAMessage",url:b==null?void 0:b.thumbnail_url,xmaContentType:void 0})},u=function(a,b){d("sendToSentQPLLogger").addSendToSentAnnotations(a,{bool:{has_fetched_xma_preview:b!=null},string:{fetched_xma_preview_file_size_bucket:b!=null?d("WAMediaQplHelper").convertIntegerSizeToStringBucket(b.size):void 0}})},v=function(a){if(a!=null){a=d("MAWDbMsg").toMsgId(a.messageId);if(a!=null)return d("MAWBridgeSendAndReceive").sendAndReceive("backend","getProtocolMsgIdByMsgId",{msgId:a})}return null};g["default"]=a}),98);
__d("useMAWCreateOptimisticSecureMessagesWithAttachments",["MAWCreateOptimisticSecureMessageWithAttachment","MAWGetEphemeralSettings","MWPActor.react","Promise","asyncToGeneratorRuntime","cr:2300","qex","react","useLSMessagingInitiatingSourceNumber","useMWLSDefaultThreadSource","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=(j||d("react")).c;e=b("cr:2300")||{createIdbOptimisticMessageWithAttachment:void 0};var l=e.createIdbOptimisticMessageWithAttachment;function a(){var a=k(6),e=(i||(i=c("useReStore")))(),g=d("MWPActor.react").useActor(),j=c("useLSMessagingInitiatingSourceNumber")(),m=c("useMWLSDefaultThreadSource")();if(a[0]===Symbol["for"]("react.memo_cache_sentinel")){var n;n=(n=c("qex")._("60"))!=null?n:!1;a[0]=n}else n=a[0];var o=n;a[1]!==e||a[2]!==j||a[3]!==g||a[4]!==m?(n=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c,i,k,n,p,q){var r=o?yield d("MAWGetEphemeralSettings").getEphemeralSetting(i.jid,c):void 0;return e.runInTransaction(function(f){return(h||(h=b("Promise"))).all(q.map(function(q){var s=q.attachmentType,t=q.messageExternalId,u=q.offlineAttachmentId;q=q.optimisticMediaAttachment;if(s==null)return(h||(h=b("Promise"))).resolve();return o?l==null?void 0:l(f,{attachmentType:s,ephemeralSettings:r,initiatingSource:j,instanceKey:k,mawThreadResult:i,mediaGroupMetadataMap:p,messageExternalId:t,offlineAttachmentId:u,onOfflineMsgId:n,optimisticMediaAttachment:q,reply:a,senderId:g,threadKey:c,threadSource:m(c)}):d("MAWCreateOptimisticSecureMessageWithAttachment").createOptimisticMessageWithAttachment(e,f,g,a,c,u,q,k,n,s,t,p)}))},"readwrite","ui",void 0,f.id+":73")});return function(b,c,d,e,f,g,h){return a.apply(this,arguments)}}(),a[1]=e,a[2]=j,a[3]=g,a[4]=m,a[5]=n):n=a[5];return n}g["default"]=a}),98);
__d("useMAWSendSecureStagedMediaAttachmentMessage",["FBLogger","Int64Hooks","LSDatabaseSingleton","MAWExternalId","MAWGetEphemeralSettings","MAWMediaManagerUtils","MAWPrepareAttachmentsFromMediaManager","MAWSecureAttachmentGroupingUtils","MAWSendFileMsgIfNecessaryV2","MAWSendFileMsgTypes","MAWStateContext.react","MWPActor.react","Promise","QPLUserFlow","WALoggerDeferred","WAMediaQplHelper","asyncToGeneratorRuntime","cr:7799","err","gkx","qpl","useLSMessagingInitiatingSourceNumber","useMAWCreateOptimisticSecureMessageWithAttachments","useMAWCreateOptimisticSecureMessagesWithAttachments","useMWLSDefaultThreadSource","useMaybeCreateThreadForMAWSendSecurMessageV2"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(){var a=d("MWPActor.react").useActor(),e=c("useMWLSDefaultThreadSource")(),f=c("useMaybeCreateThreadForMAWSendSecurMessageV2")(),g=c("useLSMessagingInitiatingSourceNumber")(),j=c("useMAWCreateOptimisticSecureMessageWithAttachments")(),k=d("MAWStateContext.react").useDispatchOptimisticSendMessage(),l=b("cr:7799")(),m=c("useMAWCreateOptimisticSecureMessagesWithAttachments")();return d("Int64Hooks").useCallbackInt64(function(){var n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(n){var o=n.lssTraceApi,p=n.mediaStagings,q=n.messageTypeParams,r=n.onGenerateOfflineMsgId,s=n.reply,t=n.s2sInstanceKey,u=n.thread;yield d("WALoggerDeferred").logWithTags(["MAWSendSecureMessageV2","Composer","useMAWSendSecureStagedMediaAttachmentMessage"],["Starting staged media attachment message send"],"LOG");var v=new Map(),w;try{var x=null;c("gkx")("5318")===!0?(n=d("MAWSecureAttachmentGroupingUtils").orderMediaStagingsForGrouping(p),x=d("MAWSecureAttachmentGroupingUtils").generateMediaGroupMetadataForMediaStagings(n)):n=p;var y=new Map();o==null?void 0:o.addMarkerPoint("create_optimistic_message_start","AppTiming");w=(yield f(u.threadKey,t));if(c("gkx")("5318")===!0){var z=n.map(function(a){var b=d("MAWMediaManagerUtils").MAWMediaManagerAttachmentsV2.get(a.offlineAttachmentId);b=b==null?void 0:b.optimisticMedia;if(b==null){c("FBLogger")("messenger_web_media").mustfix("Failed while sending secure optimistic media message: unable to find optimistic media attachment in useMAWSendSecureAttachmentMessage");return null}var e=d("MAWExternalId").generateExternalId();e={attachmentType:a.attachmentType,messageExternalId:e,offlineAttachmentId:a.offlineAttachmentId,optimisticMediaAttachment:b};return e}).filter(Boolean);z=(yield m(s,u.threadKey,w,t,r,x,z));z.forEach(function(a){if(a==null||a.offlineAttachmentId==null){c("FBLogger")("messenger_web_media").mustfix("Failed while sending secure optimistic media message: unable to create optimistic message");return null}v.set(d("MAWSendFileMsgTypes").toOfflineAttachmentIDFromString(a.offlineAttachmentId),{messageExternalId:a.messageExternalId,offlineMsgTimestamp:a.offlineMsgTimestamp});k(a.messageExternalId,a.offlineMsgTimestamp)})}else yield (i||(i=b("Promise"))).all(n.map(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=d("MAWMediaManagerUtils").MAWMediaManagerAttachmentsV2.get(a.offlineAttachmentId);b=b==null?void 0:b.optimisticMedia;if(b==null){c("FBLogger")("messenger_web_media").mustfix("Failed while sending secure optimistic media message: unable to find optimistic media attachment in useMAWSendSecureAttachmentMessage");return null}var e=d("MAWExternalId").generateExternalId();b=(yield j(s,u.threadKey,w,a.offlineAttachmentId,b,t,r,a.attachmentType,e,x));if(b==null){c("FBLogger")("messenger_web_media").mustfix("Failed while sending secure optimistic media message: unable to create optimistic message");return null}v.set(d("MAWSendFileMsgTypes").toOfflineAttachmentIDFromString(a.offlineAttachmentId),{messageExternalId:e,offlineMsgTimestamp:b.offlineMsgTimestamp});k(b.messageExternalId,b.offlineMsgTimestamp)});return function(b){return a.apply(this,arguments)}}()));o==null?void 0:o.addMarkerPoint("create_optimistic_message_end","AppTiming");yield (i||(i=b("Promise"))).all(n.map(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=d("MAWMediaManagerUtils").MAWMediaManagerAttachmentsV2.get(a.offlineAttachmentId);if(b==null){c("FBLogger")("messenger_web_media").mustfix("Failed while sending secure media message: unable to find media attachment in useMAWSendSecureAttachmentMessage");return}yield b.processedMediaPromise.then(function(b){y.set(d("MAWSendFileMsgTypes").toOfflineAttachmentIDFromString(a.offlineAttachmentId),b)})["catch"](function(a){throw a})["finally"](function(){var a=b.optimisticMedia;a!=null&&c("QPLUserFlow").addAnnotations(c("qpl")._(25313175,"1551"),{string:{optimistic_media_file_size:d("WAMediaQplHelper").convertIntegerSizeToStringBucket(a.file.size),optimistic_media_file_type:a.file.type,optimistic_media_type:a.type}},{instanceKey:t})})});return function(b){return a.apply(this,arguments)}}()));z=d("MAWPrepareAttachmentsFromMediaManager").prepareAttachmentsFromMediaManagerImpl(n,q,r,y);o=z.attachments;n=e(u.threadKey);c("QPLUserFlow").addPoint(c("qpl")._(25313175,"1551"),"fetch_ls_singleton_db",{instanceKey:t});q=(yield (h||(h=d("LSDatabaseSingleton"))).LSDatabaseSingleton);c("QPLUserFlow").addPoint(c("qpl")._(25313175,"1551"),"ls_singleton_db_resolved",{instanceKey:t});c("QPLUserFlow").addPoint(c("qpl")._(25313175,"1551"),"thread_result_fetched",{instanceKey:t});z=(yield d("MAWGetEphemeralSettings").getEphemeralSetting(w.jid,u.threadKey));c("QPLUserFlow").addPoint(c("qpl")._(25313175,"1551"),"fetch_ephemeral_settings",{instanceKey:t});o={actorId:a,attachments:o,chatJid:w.jid,db:q,ephemeralSetting:z,initiatingSource:g,isFirstMsg:w.created,mediaGroupMetadataMap:x,offlineAttachmentIdToMessageData:v,reply:s,s2sInstanceKey:t,source:n,thread:u};return yield d("MAWSendFileMsgIfNecessaryV2").sendFileMsgIfNecessaryV2(q,o)}catch(a){z=a instanceof Error?a:c("err")(typeof a==="string"?a:"Fail to send secure attachment message: "+JSON.stringify(a));n=Array.from(v.values()).map(function(a){a=a.messageExternalId;return a});w&&(yield l(n,z.message,w.jid));yield d("WALoggerDeferred").logWithTags(["MAWSendSecureMessageV2","Composer","useMAWSendSecureStagedMediaAttachmentMessage"],["Send staged media attachment message failed:"+JSON.stringify(z)],"ERROR");throw z}finally{p.map(function(a){return d("MAWMediaManagerUtils").MAWMediaManagerAttachmentsV2["delete"](a.offlineAttachmentId)})}});return function(a){return n.apply(this,arguments)}}(),[a,j,m,k,e,g,l,f])}g["default"]=a}),98);
__d("useMarkOptimisticMessagesAsFailed",["LSFactory","LSMarkOptimisticMessageFailedStoredProcedure","asyncToGeneratorRuntime","react","useAsyncReStore"],(function(a,b,c,d,e,f,g){"use strict";var h;e=h||d("react");e.useCallback;var i=e.c;function a(){var a=i(2),d=c("useAsyncReStore")(),e;a[0]!==d?(e=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e){var g=(yield d);return g.runInTransaction(function(){var d=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){for(var d of a)yield c("LSMarkOptimisticMessageFailedStoredProcedure")(c("LSFactory")(b),{errorMessage:e,optimisticMid:d})});return function(a){return d.apply(this,arguments)}}(),"readwrite",void 0,void 0,f.id+":30")});return function(b,c){return a.apply(this,arguments)}}(),a[0]=d,a[1]=e):e=a[1];return e}g["default"]=a}),98);
__d("useMAWSendSecureStickerAttachmentMessage",["FBLogger","Int64Hooks","LSDatabaseSingleton","LSIntEnum","MAWExternalId","MAWFetchExternalAttachmentBlob","MAWGetEphemeralSettings","MAWImagePreProcess","MAWSendFileMsgIfNecessaryV2","MAWSendFileMsgTypes","MAWStateContext.react","MWPActor.react","MessagingAttachmentType","Promise","WALoggerDeferred","asyncToGeneratorRuntime","sendToSentQPLLogger","useLSMessagingInitiatingSourceNumber","useMAWCreateOptimisticSecureMessageWithAttachments","useMWLSDefaultThreadSource","useMarkOptimisticMessagesAsFailed","useMaybeCreateThreadForMAWSendSecurMessageV2"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;function a(){var a=d("MWPActor.react").useActor(),e=c("useMWLSDefaultThreadSource")(),f=c("useMaybeCreateThreadForMAWSendSecurMessageV2")(),g=c("useLSMessagingInitiatingSourceNumber")(),k=c("useMAWCreateOptimisticSecureMessageWithAttachments")(),l=d("MAWStateContext.react").useDispatchOptimisticSendMessage(),m=c("useMarkOptimisticMessagesAsFailed")();return d("Int64Hooks").useCallbackInt64(function(){var n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(n){var o=n.externalAttachmentUrl,p=n.lssTraceApi,q=n.onGenerateOfflineMsgId,r=n.reply,s=n.s2sInstanceKey;n=n.thread;d("sendToSentQPLLogger").markSendToSentPoint(s,"send_secure_message_start");yield d("WALoggerDeferred").logWithTags(["MAWSendSecureMessageV2","Composer","useMAWSendSecureStickerAttachmentMessage"],["Starting sticker attachment message send"],"LOG");var t=new Map(),u;try{var v=d("MAWSendFileMsgTypes").toOfflineAttachmentIDFromStanzaId(d("MAWExternalId").generateExternalId()),w=d("MAWExternalId").generateExternalId(),x=e(n.threadKey),y=(yield (j||(j=b("Promise"))).all([(h||(h=d("LSDatabaseSingleton"))).LSDatabaseSingleton,f(n.threadKey,s)])),z=y[0];y=y[1];u=y;d("sendToSentQPLLogger").markSendToSentPoint(s,"fetch_ephemeral_settings_start");y=(yield d("MAWGetEphemeralSettings").getEphemeralSetting(u.jid,n.threadKey));d("sendToSentQPLLogger").markSendToSentPoint(s,"fetch_ephemeral_settings_end");d("sendToSentQPLLogger").markSendToSentPoint(s,"fetch_external_attachment_blob_start");p==null?void 0:p.addMarkerPoint("fetch_external_attachment_blob_start","AppTiming");o=(yield d("MAWFetchExternalAttachmentBlob").fetchExternalAttachmentBlob(o,s));var A=new File([o],"stickerFromPicker",{type:o.type});d("sendToSentQPLLogger").markSendToSentPoint(s,"fetch_external_attachment_blob_end");p==null?void 0:p.addMarkerPoint("fetch_external_attachment_blob_end","AppTiming");p==null?void 0:p.addMarkerPoint("create_optimistic_message_start","AppTiming");d("sendToSentQPLLogger").markSendToSentPoint(s,"optimist_image_preprocess_start");A=(yield d("MAWImagePreProcess").optimisticImagePreprocess(A,!0));d("sendToSentQPLLogger").markSendToSentPoint(s,"optimist_image_preprocess_end");d("sendToSentQPLLogger").markSendToSentPoint(s,"create_optimistic_message_start");A=(yield k(r,n.threadKey,u,v,A,s,q,(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").STICKER),w));A!=null?(t.set(v,{messageExternalId:w,offlineMsgTimestamp:A.offlineMsgTimestamp}),l(A.messageExternalId,A.offlineMsgTimestamp),d("sendToSentQPLLogger").markSendToSentPoint(s,"create_optimistic_message_end"),p==null?void 0:p.addMarkerPoint("create_optimistic_message_end","AppTiming")):(c("FBLogger")("messenger_web_media").mustfix("Failed while sending secure optimistic media message: unable to create optimistic message for sticker"),d("sendToSentQPLLogger").markSendToSentPoint(s,"create_optimistic_message_fail"),p==null?void 0:p.addMarkerPoint("create_optimistic_message_fail","AppTiming"));d("sendToSentQPLLogger").markSendToSentPoint(s,"image_preprocess_start");p==null?void 0:p.addMarkerPoint("image_preprocess_start","AppTiming");q=(yield d("MAWImagePreProcess").imagePreprocess(new File([o],"stickerFromPicker",{type:o.type}),!0));d("sendToSentQPLLogger").markSendToSentPoint(s,"image_preprocess_end");p==null?void 0:p.addMarkerPoint("image_preprocess_end","AppTiming");w=[[q,v]];A={actorId:a,attachments:w,chatJid:u.jid,db:z,ephemeralSetting:y,initiatingSource:g,isFirstMsg:u.created,offlineAttachmentIdToMessageData:t,reply:r,s2sInstanceKey:s,source:x,thread:n};return yield d("MAWSendFileMsgIfNecessaryV2").sendFileMsgIfNecessaryV2(z,A)}catch(a){o=a instanceof Error?a.message:"Fail to send secure attachment message";p=Array.from(t.values()).map(function(a){a=a.messageExternalId;return a});u&&(yield m(p,o,u.jid));yield d("WALoggerDeferred").logWithTags(["MAWSendSecureMessageV2","Composer","useMAWSendSecureStickerAttachmentMessage"],["Send sticker attachment message failed:"+JSON.stringify(a)],"ERROR");throw a}});return function(a){return n.apply(this,arguments)}}(),[a,k,l,e,g,m,f])}g["default"]=a}),98);
__d("useMAWSendSecureVoiceClipAttachmentMessage",["FBLogger","Int64Hooks","LSDatabaseSingleton","LSIntEnum","MAWAudioPreProcess","MAWExternalId","MAWGetEphemeralSettings","MAWSendFileMsgIfNecessaryV2","MAWSendFileMsgTypes","MAWStateContext.react","MWPActor.react","MessagingAttachmentType","Promise","QPLUserFlow","WALoggerDeferred","asyncToGeneratorRuntime","qpl","useLSMessagingInitiatingSourceNumber","useMAWCreateOptimisticSecureMessageWithAttachments","useMWLSDefaultThreadSource","useMarkOptimisticMessagesAsFailed","useMaybeCreateThreadForMAWSendSecurMessageV2"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;function a(){var a=d("MWPActor.react").useActor(),e=c("useMWLSDefaultThreadSource")(),f=c("useMaybeCreateThreadForMAWSendSecurMessageV2")(),g=c("useLSMessagingInitiatingSourceNumber")(),k=c("useMAWCreateOptimisticSecureMessageWithAttachments")(),l=d("MAWStateContext.react").useDispatchOptimisticSendMessage(),m=c("useMarkOptimisticMessagesAsFailed")();return d("Int64Hooks").useCallbackInt64(function(){var n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(n){var o=n.lssTraceApi,p=n.onGenerateOfflineMsgId,q=n.reply,r=n.s2sInstanceKey,s=n.thread;n=n.voiceClip;yield d("WALoggerDeferred").logWithTags(["MAWSendSecureMessageV2","Composer","useMAWSendSecureVoiceClipAttachmentMessage"],["Starting voice clip attachment message send"],"LOG");var t=new Map(),u;try{var v=d("MAWSendFileMsgTypes").toOfflineAttachmentIDFromStanzaId(d("MAWExternalId").generateExternalId()),w=d("MAWExternalId").generateExternalId(),x=e(s.threadKey),y=(yield (j||(j=b("Promise"))).all([(h||(h=d("LSDatabaseSingleton"))).LSDatabaseSingleton,f(s.threadKey,r)])),z=y[0];y=y[1];u=y;y=(yield d("MAWGetEphemeralSettings").getEphemeralSetting(u.jid,s.threadKey));c("QPLUserFlow").addPoint(c("qpl")._(25313175,"1551"),"fetch_ephemeral_settings",{instanceKey:r});var A=(yield d("MAWAudioPreProcess").optimisticAudioPreprocess(n.file));o==null?void 0:o.addMarkerPoint("create_optimistic_message_start","AppTiming");A=(yield k(q,s.threadKey,u,v,A,r,p,(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").AUDIO),w));A!=null?(t.set(v,{messageExternalId:w,offlineMsgTimestamp:A.offlineMsgTimestamp}),l(A.messageExternalId,A.offlineMsgTimestamp),o==null?void 0:o.addMarkerPoint("create_optimistic_message_success","AppTiming")):(c("FBLogger")("messenger_web_media").mustfix("Failed while sending secure optimistic media message: unable to create optimistic message for GIF"),o==null?void 0:o.addMarkerPoint("create_optimistic_message_fail","AppTiming"));p={durations:n.duration||0,file:n.file,isPtt:!0,type:"audio"};w=[[p,v]];A={actorId:a,attachments:w,chatJid:u.jid,db:z,ephemeralSetting:y,initiatingSource:g,isFirstMsg:u.created,offlineAttachmentIdToMessageData:t,reply:q,s2sInstanceKey:r,source:x,thread:s};return yield d("MAWSendFileMsgIfNecessaryV2").sendFileMsgIfNecessaryV2(z,A)}catch(a){o=a instanceof Error?a.message:"Fail to send secure attachment message";n=Array.from(t.values()).map(function(a){a=a.messageExternalId;return a});u&&(yield m(n,o,u.jid));yield d("WALoggerDeferred").logWithTags(["MAWSendSecureMessageV2","Composer","useMAWSendSecureVoiceClipAttachmentMessage"],["Send voice clip attachment message failed:"+JSON.stringify(a)],"ERROR");throw a}});return function(a){return n.apply(this,arguments)}}(),[a,k,l,e,g,m,f])}g["default"]=a}),98);
__d("useMAWUpdateThreadCapabilities",["LSMessagingThreadTypeUtil","MAWUpdateLSThreadCapabilities","Promise","react","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;e=j||d("react");e.useCallback;var k=e.c;function a(){var a=k(2),e=(i||(i=c("useReStore")))(),g;a[0]!==e?(g=function(a){return!d("LSMessagingThreadTypeUtil").isOneToOne(a.threadType)?(h||(h=b("Promise"))).resolve():e.runInTransaction(function(b){return d("MAWUpdateLSThreadCapabilities").updateNonMessageRequestThreadTxn(b,a.threadKey)},"readwrite",void 0,void 0,f.id+":37")},a[0]=e,a[1]=g):g=a[1];return g}g["default"]=a}),98);
__d("useMAWSendSecureMessageV2Impl",["FBLogger","I64","Int64Hooks","LSIntEnum","LSMessagingThreadTypeUtil","LSThreadAttributionTypeUtil","MAWOptimisticUpdateContactRelationship","MWLSLogSend","MWPActor.react","MWPBumpEntityKey","MWPReplyContext.react","MWPreloadableQueries","MWSharedMsgLogUtils","MWVersion","MessageRequestsLog","Promise","ReQL","WALoggerDeferred","asyncToGeneratorRuntime","err","react","react-forget-runtime","sendToSentQPLLogger","sendToSentQPLUtils","useAsyncReStore","useLSMessagingSource","useMAWDeleteLinkPreviewXMATableData","useMAWSendSecureGifAttachmentMessage","useMAWSendSecureLinkXMAMessage","useMAWSendSecureStagedMediaAttachmentMessage","useMAWSendSecureStickerAttachmentMessage","useMAWSendSecureTextMessage","useMAWSendSecureVoiceClipAttachmentMessage","useMAWUpdateThreadCapabilities","useMWLSUnarchiveThread"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k;e=i||d("react");e.useContext;var l=e.c;function a(a,e){var f=l(16),g=d("MWPActor.react").useActor(),i=d("react-forget-runtime").useContextWithBailoutExperiment__unstable(d("MWPReplyContext.react").MWPReplyContext,m),n=i.clearReply,o=c("useAsyncReStore")(),p=c("useLSMessagingSource")(),q=c("useMAWSendSecureTextMessage")(),r=c("useMAWSendSecureLinkXMAMessage")(),s=c("useMAWDeleteLinkPreviewXMATableData")(e),t=c("useMAWSendSecureGifAttachmentMessage")(),u=c("useMAWSendSecureStagedMediaAttachmentMessage")(),v=c("useMAWSendSecureStickerAttachmentMessage")(),w=c("useMAWSendSecureVoiceClipAttachmentMessage")(),x=c("useMWLSUnarchiveThread")(),y=c("useMAWUpdateThreadCapabilities")();f[0]!==o||f[1]!==p||f[2]!==r||f[3]!==s||f[4]!==q||f[5]!==v||f[6]!==t||f[7]!==w||f[8]!==u||f[9]!==a||f[10]!==n||f[11]!==g||f[12]!==y||f[13]!==x?(i=function(){var e=b("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var f,i=e.composerEntrypointForLogging,l=e.currentDraftId,m=e.externalAttachmentUrl,z=e.hotEmojiSize,A=e.lssTraceApi,B=e.mentionedJids,C=e.messageText,D=e.reply,E=e.s2sInstanceKey,F=e.stickerId,G=e.thread;e=e.voiceClip;yield d("WALoggerDeferred").logWithTags(["MAWSendSecureMessageV2","Composer"],["Starting message send"],"LOG");(f=d("sendToSentQPLLogger")).markSendToSentPoint(E,"send_secure_message_start");A.addMarkerPoint("send_secure_message_started","AppTiming");var H=(yield o);f.markSendToSentPoint(E,"db_ready");var I=d("LSMessagingThreadTypeUtil").isMessageRequest(G);f=(j||(j=d("I64"))).equal(G.parentThreadKey,(k||(k=d("LSIntEnum"))).ofNumber(-10));var J=(yield d("sendToSentQPLLogger").measureSendToSentPerformance("get_media_staging_query",E,function(){return d("ReQL").toArrayAsync(d("MWPreloadableQueries").getMediaStagingQuery(H,G.threadKey))})),K=d("MWSharedMsgLogUtils").getMessageTypeParams({externalAttachmentUrl:m,hotEmojiSize:z,mediaStagings:J,messageText:C,reply:D,stickerId:F,threadType:G.threadType,voiceClip:e}),L=d("LSThreadAttributionTypeUtil").getSource(G.threadKey,p);d("sendToSentQPLLogger").addSendToSentAnnotations(E,yield d("MWSharedMsgLogUtils").getSendToSentAnnotations(G,K,k.unwrapIntEnum(L),i));d("MWSharedMsgLogUtils").addSendMessageMetadataForInteractionTrace(A,K,G,i);i=function(a){d("MWLSLogSend").logSentHeroInteraction(A,a,{isMessageRequest:I,mwVersion:d("MWVersion").v2,source:(k||(k=d("LSIntEnum"))).unwrapIntEnum(L),threadType:G.threadType}),d("sendToSentQPLLogger").markSendToSentPoint(E,"offline_msg_id_generated"),d("sendToSentQPLUtils").setS2sKeyForOfflineMessageId(a,E)};var M=[],N=K.hasAttachment,O=K.hasLinks;C!=null&&C!==""&&(O?(M.push(r(H,{currentDraftId:l,lssTraceApi:A,mentionedJids:B,messageText:C,onGenerateOfflineMsgId:N?void 0:i,reply:D,s2sInstanceKey:E,thread:G,threadKey:G.threadKey}).then(function(){l!=null&&s({draftId:l})})),d("sendToSentQPLLogger").markSendToSentPoint(E,"link_xma_message_promise_pushed_to_send_promises")):(M.push(q(H,{hotEmojiSize:z,lssTraceApi:A,mentionedJids:B,messageText:C,onGenerateOfflineMsgId:N?void 0:i,reply:D,s2sInstanceKey:E,thread:G})),d("sendToSentQPLLogger").markSendToSentPoint(E,"text_message_promise_pushed_to_send_promises")));z=!0;N&&(F!=null&&m!=null?(M.push(v({externalAttachmentUrl:m,lssTraceApi:A,onGenerateOfflineMsgId:i,reply:D,s2sInstanceKey:E,thread:G})),d("sendToSentQPLLogger").markSendToSentPoint(E,"sticker_message_promise_pushed_to_send_promises"),z=!1):m!=null?(M.push(t({externalAttachmentUrl:m,lssTraceApi:A,onGenerateOfflineMsgId:i,reply:D,s2sInstanceKey:E,thread:G})),z=!1):e!=null?(M.push(w({lssTraceApi:A,onGenerateOfflineMsgId:i,reply:D,s2sInstanceKey:E,thread:G,voiceClip:e})),d("sendToSentQPLLogger").markSendToSentPoint(E,"voice_clip_message_promise_pushed_to_send_promises"),z=!1):J.length>0?(M.push(u({lssTraceApi:A,mediaStagings:J,messageTypeParams:K,onGenerateOfflineMsgId:i,reply:D,s2sInstanceKey:E,thread:G})),d("sendToSentQPLLogger").markSendToSentPoint(E,"staged_media_message_promise_pushed_to_send_promises")):(d("sendToSentQPLLogger").markSendToSentPoint(E,"no_send_promises_pushed_to_send_promises"),c("FBLogger")("messenger_web_media").mustfix("Unable to send attachment in useMAWSendSecureMessageV2Impl: incorrect params")));z&&a();n(G.threadKey,!1);d("sendToSentQPLLogger").markSendToSentPoint(E,"attachment_and_reply_data_cleared");M.length===0?(d("sendToSentQPLLogger").markSendToSentPoint(E,"create_send_promises_fail"),M.push(new(h||(h=b("Promise")))(function(a,b){b(c("err")("No send actions taken because hasAttachment="+N.toString()))}))):d("sendToSentQPLLogger").markSendToSentPoint(E,"create_send_promises_end",void 0,{"int":{send_promise_count:M.length}});d("sendToSentQPLLogger").markSendToSentPoint(E,"resolve_send_promises_start");(M.length>1||J.length>1)&&d("MWPBumpEntityKey").bumpEntityKeyWithAppId("mw_message_send","send:"+M.length+".media:"+J.length);yield (h||(h=b("Promise"))).all(M)["catch"](function(a){d("sendToSentQPLLogger").markSendToSentFail(E,"message_send_fail",a);a instanceof Error?c("FBLogger")("messenger_web_messaging").catching(a).addMetadata("MESSENGER_E2EE_WEB","ERROR_MESSAGE","hasAttachment: "+N.toString()).mustfix("Failed while sending secure message in useMAWSendSecureMessageV2Impl"):c("FBLogger")("messenger_web_messaging").addMetadata("MESSENGER_E2EE_WEB","ERROR_MESSAGE","hasAttachment: "+N.toString()).mustfix("Failed while sending secure message in useMAWSendSecureMessageV2Impl, %s",a.message);throw a});d("sendToSentQPLLogger").markSendToSentPoint(E,"resolve_send_promises_end");C!=null&&C!==""&&O&&d("sendToSentQPLLogger").markSendToSentSuccess(E);yield d("WALoggerDeferred").logWithTags(["MAWSendSecureMessageV2","Composer"],["Send message is done"],"LOG");d("MAWOptimisticUpdateContactRelationship").call(G,H,g);yield y(G);I&&d("MessageRequestsLog").logActionConfirmed(G,1);f&&x(G.threadKey)});return function(a){return e.apply(this,arguments)}}(),e=[o,p,n,g,y,r,s,q,v,t,w,u,a,x],f[0]=o,f[1]=p,f[2]=r,f[3]=s,f[4]=q,f[5]=v,f[6]=t,f[7]=w,f[8]=u,f[9]=a,f[10]=n,f[11]=g,f[12]=y,f[13]=x,f[14]=i,f[15]=e):(i=f[14],e=f[15]);return d("Int64Hooks").useCallbackInt64(i,e)}function m(a){return[a.clearReply]}g["default"]=a}),98);
__d("useMAWSendSecureMessageV2",["I64","MAWJids","MAWMediaGalleryM2Utils","MWPReplyContext.react","MWV2ComposerActionsContext.react","WALoggerDeferred","getMWIsDefaultHotlikeStickerId","justknobx","promiseDone","qpl","react","react-forget-runtime","sendToSentQPLLogger","unrecoverableViolation","useCometInteractionTracing","useIsSecureMessageData","useMAWSendSecureMessageV2Impl"],(function(a,b,c,d,e,f,g){"use strict";var h,i;b=h||d("react");b.useContext;var j=b.c;function a(a,b,e){var f=j(15),g=d("react-forget-runtime").useContextWithBailoutExperiment__unstable(d("MWPReplyContext.react").MWPReplyContext,l),h=g.reply;g=h==null?void 0:h.messageId;var m=h==null?void 0:h.threadKey,n=h==null?void 0:h.timestampMs,o;f[0]!==g||f[1]!==m||f[2]!==n?(o={messageId:g,messageThreadKey:m,messageTimestamp:n},f[0]=g,f[1]=m,f[2]=n,f[3]=o):o=f[3];f[4]!==a.threadType?(g={fallbackThreadType:a.threadType},f[4]=a.threadType,f[5]=g):g=f[5];var p=c("useIsSecureMessageData")(o,g);m=d("react-forget-runtime").useContextWithBailoutExperiment__unstable(d("MWV2ComposerActionsContext.react").MWV2ComposerActionsContext,k);var q=m.onMessageSendAttempt,r=c("useMAWSendSecureMessageV2Impl")(e,a.threadType);f[6]===Symbol["for"]("react.memo_cache_sentinel")?(n=c("qpl")._(30605384,"573"),f[6]=n):n=f[6];var s=c("useCometInteractionTracing")(n,"fast","INTERACTION",void 0);f[7]!==q||f[8]!==s||f[9]!==r||f[10]!==p||f[11]!==h||f[12]!==a||f[13]!==b?(o=function(e,f,g,j,k,l,m,n,o,t,u,v,w,x,y,z){c("promiseDone")(d("WALoggerDeferred").logWithTags(["Composer"],["Calling useMAWSendSecureMessageV2"],"LOG"));var A=f==null?void 0:f.map(function(a){return d("MAWJids").toUserJid(a.id)}),B;B=e;g!=null&&c("getMWIsDefaultHotlikeStickerId")((i||(i=d("I64"))).to_string(g))&&(B="\ud83d\udc4d");var C=d("sendToSentQPLLogger").markSendToSentStart();q==null?void 0:q(!0);d("sendToSentQPLLogger").addSendToSentAnnotations(C,{bool:{is_media_gallery_restore_enabled:d("MAWMediaGalleryM2Utils").isMediaGalleryM2Enabled({isSilent:!0})}});s(function(e){c("promiseDone")(r({composerEntrypointForLogging:z,currentDraftId:y,externalAttachmentUrl:l,hotEmojiSize:j,lssTraceApi:e,mentionedJids:A,messageText:B,reply:p?h:void 0,s2sInstanceKey:C,stickerId:g,thread:a,voiceClip:n}),function(){b(),c("justknobx")._("2486")&&(t&&t())},function(a){d("sendToSentQPLLogger").markSendToSentFail(C,"message_send_fail",a);e.failTrace(a,!0);throw c("unrecoverableViolation")("Encountered failure during Armadillo Message Send (UI)","messenger_web_messaging",{error:a})})})},f[7]=q,f[8]=s,f[9]=r,f[10]=p,f[11]=h,f[12]=a,f[13]=b,f[14]=o):o=f[14];return o}function k(a){return[a.onMessageSendAttempt]}function l(a){return[a.reply]}g["default"]=a}),98);
__d("useMWMediaManagerUploadFailedToast",["mwPushToast","react"],(function(a,b,c,d,e,f,g){"use strict";var h;(h||d("react")).useCallback;function a(){return i}function i(a,b){d("mwPushToast").mwPushErrorToast({body:b,title:a})}g["default"]=a}),98);
__d("useMWMediaManager",["LSGetAttachmentType","LSIntEnum","MWMediaManager","MessagingAttachmentType","gkx","justknobx","qex","react","useMWMediaManagerUploadFailedToast"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=(h||d("react")).c,k=25;function a(a){var b=j(5),e=a.onUploadFailure;a=a.thread;var f=c("useMWMediaManagerUploadFailedToast")(),g;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(g=c("gkx")("5318")===!0?c("justknobx")._("2538"):void 0,b[0]=g):g=b[0];g=g;b[1]!==e||b[2]!==f||b[3]!==a?(g={getMaxAttachmentSizeInMB:l,maxNumberOfAttachments:g,onUploadFailure:e,showUploadFailureToast:f,thread:a},b[1]=e,b[2]=f,b[3]=a,b[4]=g):g=b[4];return d("MWMediaManager").useMediaManager(g)}function l(a,b){a=d("LSGetAttachmentType").LSGetAttachmentTypeSyncButLessAccurate(a);if((i||(i=d("LSIntEnum"))).toNumber(a)===c("MessagingAttachmentType").FILE){return(a=m(b))!=null?a:k}return k}function m(a){if(a)return c("qex")._("245");else return c("qex")._("413")}g["default"]=a}),98);
__d("MAWSecureComposer.react",["fbt","MAWSecureComposerText","MAWSecureThreadNonAddressableContactBanner.react","MAWSecureTypingState","MAWSupportedFileTypes","MWBlockedComposerLogging","MWPReplyContext.react","MWV2ComposerEditContainer.react","MWV2ComposerReplyView.react","MWV2ComposerView.react","WebUXLoggingSurfaceContextProvider","cr:10444","cr:563","emptyFunction","gkx","react","react-forget-runtime","requireDeferred","useCometAlertDialog","useMAWEditMessageData","useMAWSendSecureMessageV2","useMWMediaManager","useMWPComposerEditor","useMWV2FileDropzoneRegisterHandler"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||(i=d("react"));e=i;e.useCallback;e.useContext;var k=e.useState,l=e.c,m=c("requireDeferred")("MWChatAudioLog").__setRef("MAWSecureComposer.react"),n=c("gkx")("23429");function o(){m.onReady(function(a){return a.logClickStartRecording()})}function p(){m.onReady(function(a){return a.logBrowserDenyAccess()})}function a(a){var e=l(42),f=a.afterSendMessage,g=a.isPreviewThread;a=a.thread;f=f===void 0?c("emptyFunction"):f;var i=d("react-forget-runtime").useContextWithBailoutExperiment__unstable(d("MWPReplyContext.react").MWPReplyContext,q);i=i.reply;var m=c("useMAWEditMessageData")(),r=c("useCometAlertDialog")(),s;e[0]!==r?(s=function(){return r({body:h._("__JHASH__cHTRYg3bfeC__JHASH__"),title:h._("__JHASH__shIDOoHHO5L__JHASH__")})},e[0]=r,e[1]=s):s=e[1];s=s;var t;e[2]!==s||e[3]!==a?(t={onUploadFailure:s,thread:a},e[2]=s,e[3]=a,e[4]=t):t=e[4];s=c("useMWMediaManager")(t);t=s.handleFileRemove;var u=s.handleFileSelect,v=s.mediaStaging;s=s.resetAttachments;f=c("useMAWSendSecureMessageV2")(a,f,s);s=d("MAWSecureTypingState").useOnTypingStateChanged(a.authorityLevel,a.threadKey,a.threadType);c("useMWV2FileDropzoneRegisterHandler")(u);var w=k(!1),x=w[0];w=w[1];d("MWBlockedComposerLogging").useLogMWBlockedComposerReason(a.threadKey,x?d("MWBlockedComposerLogging").ComposerBlockingReason.ARMADILLO_RECEIVER_NON_ADDRESSABLE_ON_WA:d("MWBlockedComposerLogging").ComposerBlockingReason.NOT_BLOCKED);var y;e[5]!==g||e[6]!==v||e[7]!==f||e[8]!==s||e[9]!==a.threadKey||e[10]!==a.threadType?(y={composerEntrypointForLogging:"MAWSecureComposer.lexical",getTextFromEditorState:d("MAWSecureComposerText").getTextFromEditorState,isPreviewThread:g,mediaStaging:v,onSendMessage:f,onTypingStateChanged:s,threadKey:a.threadKey,threadType:a.threadType},e[5]=g,e[6]=v,e[7]=f,e[8]=s,e[9]=a.threadKey,e[10]=a.threadType,e[11]=y):y=e[11];g=c("useMWPComposerEditor")(y);s=g.editor;y=g.editorElementRef;var z=g.hasStuffToSend;g=g.sendMessage;var A=b("cr:563").useVoiceRecorder(void 0,o,p),B;e[12]!==i||e[13]!==a?(B=i!=null?j.jsx(d("MWV2ComposerReplyView.react").MWV2ComposerReplyView,{messageId:i.messageId,messageThreadKey:i.threadKey,messageTimestamp:i.timestampMs,thread:a}):null,e[12]=i,e[13]=a,e[14]=B):B=e[14];var C;e[15]!==i||e[16]!==a.threadKey||e[17]!==a.threadType?(C=b("cr:10444")&&j.jsx(b("cr:10444"),{isReplying:i!=null,threadKey:a.threadKey,threadType:a.threadType}),e[15]=i,e[16]=a.threadKey,e[17]=a.threadType,e[18]=C):C=e[18];e[19]!==a?(i=j.jsx(c("MAWSecureThreadNonAddressableContactBanner.react"),{setHideComposerEditor:w,thread:a}),e[19]=a,e[20]=i):i=e[20];e[21]!==m?(w=m!=null&&j.jsx(c("MWV2ComposerEditContainer.react"),{editMessageData:m}),e[21]=m,e[22]=w):w=e[22];var D;e[23]!==x||e[24]!==m||e[25]!==s||e[26]!==y||e[27]!==z||e[28]!==v||e[29]!==t||e[30]!==u||e[31]!==f||e[32]!==g||e[33]!==a||e[34]!==A?(D=x||m!=null?null:j.jsx(d("MWV2ComposerView.react").MWV2ComposerView,{editor:s,editorElementRef:y,hasStuffToSend:z,isMentionsPluginEnabled:n,mediaStaging:v,onAttachmentRemoved:t,onAttachmentsAdded:u,onSendMessage:f,policyProduct:"messaging_lightswitch",sendMessage:g,supportedFileTypes:d("MAWSupportedFileTypes").supportedFileTypes,surface:"mwp_maw_secure_composer",thread:a,voiceRecorder:A}),e[23]=x,e[24]=m,e[25]=s,e[26]=y,e[27]=z,e[28]=v,e[29]=t,e[30]=u,e[31]=f,e[32]=g,e[33]=a,e[34]=A,e[35]=D):D=e[35];e[36]!==B||e[37]!==C||e[38]!==i||e[39]!==w||e[40]!==D?(x=j.jsx(d("WebUXLoggingSurfaceContextProvider").WebUXLoggingSurfaceContextProvider,{value:"secure_composer",children:j.jsxs("div",{"data-testid":void 0,children:[B,C,i,w,D]})}),e[36]=B,e[37]=C,e[38]=i,e[39]=w,e[40]=D,e[41]=x):x=e[41];return x}function q(a){return[a.reply]}g["default"]=a}),226);
__d("MAWSecureComposerUtils",["I64","LSMessagingThreadTypeUtil","MAWJobDefinitions","MAWMiActOnActThreadReady","MAWUIJob","MessageRequestsLog","Promise","WAJobOrchestratorTypes","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a,e,f,g){if(d("LSMessagingThreadTypeUtil").isArmadilloSecure(e.threadType)){f!=null&&d("MessageRequestsLog").logActionConfirmed(e,8,(i||(i=d("I64"))).to_string(f));c("promiseDone")(d("MAWMiActOnActThreadReady").onActThreadReady(a.tables,e.threadKey,"MAWSecureComposerUtils",function(a,c){d("MAWUIJob").UIJobStarters.fireAndForget(d("MAWJobDefinitions").createStartJobInfo("deleteThread",{chatJid:c,scheduleConfig:{priority:d("WAJobOrchestratorTypes").JOB_PRIORITY.UI_ACTION}}));return(h||(h=b("Promise"))).resolve()}));return}}g.onDeleteThread=a}),98);
__d("MDSForwardStackSvgIcon.react",["MDSSvgIcon.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||(h=d("react"))).c,j=h;function a(a){var b=i(4),d,e;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(d=j.jsx("path",{d:"M10.5 14a.5.5 0 0 0 .5-.5v-2.536c0-1.608 1.769-2.532 3.02-1.578l9.21 7.026c1.026.783 1.027 2.37.002 3.154l-9.21 7.046c-1.25.957-3.022.034-3.022-1.576V22.5a.5.5 0 0 0-.5-.5H5a2 2 0 0 1-2-2v-4a2 2 0 0 1 2-2h5.5Z"}),e=j.jsx("path",{d:"M20.38 24.265a.97.97 0 0 0-.38.771c0 1.61 1.771 2.533 3.022 1.576l9.21-7.046c1.025-.784 1.024-2.37-.002-3.154l-9.21-7.026c-1.251-.954-3.02-.03-3.02 1.578 0 .295.138.574.373.753l4.07 3.105c2.074 1.583 2.076 4.747.004 6.332l-4.066 3.111Z"}),b[0]=d,b[1]=e):(d=b[0],e=b[1]);b[2]!==a?(d=j.jsxs(c("MDSSvgIcon.react"),babelHelpers["extends"]({},a,{children:[d,e]})),b[2]=a,b[3]=d):d=b[3];return d}g["default"]=a}),98);
__d("MSGDataclassTypes.flow",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";c=(a=b("$InternalEnum"))({HistoryRestore:"HISTORY_RESTORE",Reporting:"REPORTING",Fts:"FTS"});d=a({Before:"BEFORE",After:"AFTER"});e=a({UpsertBackupItem:"UPSERT_BACKUP_ITEM",RemoveBackupItem:"REMOVE_BACKUP_ITEM"});b=a({Message:"MESSAGE",Thread:"THREAD"});var g=a({Photo:"PHOTO",Permanent:"PERMANENT",Ephemeral:"EPHEMERAL",Video:"VIDEO",Gif:"GIF",Audio:"AUDIO",File:"FILE",Raven:"RAVEN",UnreadRaven:"UNREAD_RAVEN",ShareIgMedia:"SHARE_IG_MEDIA",ShareLink:"SHARE_LINK",ShareIgClips:"SHARE_IG_CLIPS",Shh:"SHH",StoryReply:"STORY_REPLY",DisappearingMessage:"DISAPPEARING_MESSAGE",RavenSeen:"RAVEN_SEEN",RavenReplayed:"RAVEN_REPLAYED",RavenReadOnce:"RAVEN_READ_ONCE",RavenReplayable:"RAVEN_REPLAYABLE",RavenPermanent:"RAVEN_PERMANENT"}),h=a({Fbn:"FBN",Instamadillo:"INSTAMADILLO",Unknown:"UNKNOWN"}),i=a({Retroactive:"RETROACTIVE",Realtime:"REALTIME"}),j=a({Success:"SUCCESS",RetryableException:"RETRYABLE_EXCEPTION",PermanentFailure:"PERMANENT_FAILURE"}),k=a({LlmOutput:"llm_output",SendQuery:"send_query",StartTyping:"start_typing",StopTyping:"stop_typing",VideoAboutToFinish:"video_about_to_finish"}),l=a({RequestStart:"REQUEST_START",Searching:"SEARCHING",Imagining:"IMAGINING",UnderstandingImage:"UNDERSTANDING_IMAGE",Generating:"GENERATING"}),m=a({Love:"LOVE",Giftwrap:"GIFTWRAP",Celebration:"CELEBRATION",Fire:"FIRE",AvatarLove:"AVATAR_LOVE",AvatarAngry:"AVATAR_ANGRY",AvatarCry:"AVATAR_CRY",AvatarLaugh:"AVATAR_LAUGH",Halloween:"HALLOWEEN"}),n=a({Reminder:"REMINDER",Subscription:"SUBSCRIPTION"}),o=a({Memu:"MEMU",Imagine:"IMAGINE"}),p=a({Simple:"SIMPLE",Retro:"RETRO",Messages:"MESSAGES"}),q=a({MagicModBackdrop:"MAGIC_MOD_BACKDROP",MagicModRestyle:"MAGIC_MOD_RESTYLE",Imagine:"IMAGINE",Memu:"MEMU"}),r=a({BanUser:"BAN_USER",RemoveUser:"REMOVE_USER",SuspendUser:"SUSPEND_USER",RemoveMessage:"REMOVE_MESSAGE",ReportMessage:"REPORT_MESSAGE",HideMessage:"HIDE_MESSAGE"}),s=a({MothersDay:"MOTHERS_DAY",FathersDay:"FATHERS_DAY",Graduation:"GRADUATION",NationalSelfie:"NATIONAL_SELFIE",PhIndependenceDay:"PH_INDEPENDENCE_DAY",JulyFourth:"JULY_FOURTH",FriendshipDay:"FRIENDSHIP_DAY"}),t=a({Birthday:"BIRTHDAY"}),u=a({XmaWebUrl:"XMA_WEB_URL"}),v=a({GenAiGetInfo:"GEN_AI_GET_INFO",GenAiReminder:"GEN_AI_REMINDER"}),w=a({Mention:"MENTION",Reply:"REPLY"}),x=a({FbmInbox:"FBM_INBOX",Profile:"PROFILE",Feed:"FEED",FbSearch:"FB_SEARCH",Watch:"WATCH",Shorts:"SHORTS",Ufi:"UFI",Ctm:"CTM",Cts:"CTS",Psrib:"PSRIB",Srib:"SRIB",Rta:"RTA",Mp:"MP",CommentMentions:"COMMENT_MENTIONS",ZorroMessage:"ZORRO_MESSAGE",IgReels:"IG_REELS",IgStory:"IG_STORY",IgFeed:"IG_FEED",IgProfile:"IG_PROFILE",IgNotes:"IG_NOTES",IgLive:"IG_LIVE",IgExternalLink:"IG_EXTERNAL_LINK",IgComment:"IG_COMMENT",FbNotes:"FB_NOTES",FbGroups:"FB_GROUPS",GenAiSuggestedPrompts:"GEN_AI_SUGGESTED_PROMPTS",GenAiMultiModal:"GEN_AI_MULTI_MODAL",GenAiFlAshImagine:"GEN_AI_FlASH_IMAGINE",GenAiAssistant:"GEN_AI_ASSISTANT",GenAiLocation:"GEN_AI_LOCATION",Sharesheet:"SHARESHEET",ProductHighlights:"PRODUCT_HIGHLIGHTS",MagicMessenger:"MAGIC_MESSENGER"}),y=a({Unspecified:"UNSPECIFIED",QuickEmoji:"QUICK_EMOJI",Avatar:"AVATAR",SuggestedReply:"SUGGESTED_REPLY"}),z=a({Default:"DEFAULT",CriticalUserMessage:"CRITICAL_USER_MESSAGE",NonCriticalAdminXma:"NON_CRITICAL_ADMIN_XMA"}),A=a({ThreadviewSuggestedPrompt:"THREADVIEW_SUGGESTED_PROMPT",TypeaheadSuggestedPrompt:"TYPEAHEAD_SUGGESTED_PROMPT",SuggestedPrompt:"SUGGESTED_PROMPT",NullStatePrompt:"NULL_STATE_PROMPT",UserInputPrompt:"USER_INPUT_PROMPT",GenericPrompt:"GENERIC_PROMPT",ThreadviewUserInputPrompt:"THREADVIEW_USER_INPUT_PROMPT"}),B=a({Mention:"MENTION",SuperReact:"SUPER_REACT",StoryReply:"STORY_REPLY",MessageReply:"MESSAGE_REPLY",ContentReply:"CONTENT_REPLY",ContentMention:"CONTENT_MENTION",ContentShare:"CONTENT_SHARE",OnPlatform:"ON_PLATFORM",OffPlatform:"OFF_PLATFORM",MessageForward:"MESSAGE_FORWARD",Avatar:"AVATAR",SocialSticker:"SOCIAL_STICKER",NoteReply:"NOTE_REPLY",InvokesGenAiResponse:"INVOKES_GEN_AI_RESPONSE",SentFromGenAiBot:"SENT_FROM_GEN_AI_BOT",DisappearingMessage:"DISAPPEARING_MESSAGE",IncludesOnPlatformContent:"INCLUDES_ON_PLATFORM_CONTENT",IncludesOffPlatformContent:"INCLUDES_OFF_PLATFORM_CONTENT",IncludesLink:"INCLUDES_LINK",MultitabEnv:"MULTITAB_ENV",PowerUp:"POWER_UP",MsysSend:"MSYS_SEND",EditMessage:"EDIT_MESSAGE",VanishMode:"VANISH_MODE",Superlative:"SUPERLATIVE",Raven:"RAVEN",Hotlike:"HOTLIKE",IsDialtone:"IS_DIALTONE",MessageReshare:"MESSAGE_RESHARE",PostReply:"POST_REPLY",IsNotDialtone:"IS_NOT_DIALTONE",ThirdPartyReshare:"THIRD_PARTY_RESHARE",ZeroBalanceDetected:"ZERO_BALANCE_DETECTED",ConversationStarter:"CONVERSATION_STARTER",AnimatedAiSticker:"ANIMATED_AI_STICKER",AiGeneratedSticker:"AI_GENERATED_STICKER",MagicModImage:"MAGIC_MOD_IMAGE",ShareOfOriginalUserContent:"SHARE_OF_ORIGINAL_USER_CONTENT",LightweightInteractionAsStoryReply:"LIGHTWEIGHT_INTERACTION_AS_STORY_REPLY",WriteWithMetaAi:"WRITE_WITH_META_AI"}),C=a({MsgrE2EeGenai:"MSGR_E2EE_GENAI"}),D=a({Imagine:"IMAGINE",Imaginev2:"IMAGINEV2",Imagineme:"IMAGINEME"}),E=a({Animate:"ANIMATE",AnimateImagineme:"ANIMATE_IMAGINEME"}),F=a({Share:"SHARE",Reply:"REPLY",Mention:"MENTION",Bump:"BUMP"}),G=a({Statusupdate:"STATUSUPDATE",Grouppost:"GROUPPOST",Shareurl:"SHAREURL"}),H=a({Single:"SINGLE",Hscroll:"HSCROLL",Xcenter:"XCENTER",Portrait:"PORTRAIT",Layered:"LAYERED",Placeholder:"PLACEHOLDER",ExpiredPlaceholder:"EXPIRED_PLACEHOLDER",PilePrompt:"PILE_PROMPT",Stack:"STACK",SharedStack:"SHARED_STACK",StackCard:"STACK_CARD",StandardDxma:"STANDARD_DXMA",DxmaPlaceholder:"DXMA_PLACEHOLDER",Grid:"GRID"}),I=a({Text:"TEXT",Media:"MEDIA"}),J=a({Unknown:"UNKNOWN",TwoOptionCombined:"TWO_OPTION_COMBINED",IgTwoOptionCombined:"IG_TWO_OPTION_COMBINED",FiveOptionStarRating:"FIVE_OPTION_STAR_RATING"}),K=a({Unknown:"UNKNOWN",Location:"LOCATION",People:"PEOPLE",Event:"EVENT",ResharedPost:"RESHARED_POST",ResharedContent:"RESHARED_CONTENT",Page:"PAGE",Fundraiser:"FUNDRAISER",Product:"PRODUCT",AntiBully:"ANTI_BULLY",Instagram:"INSTAGRAM"}),L=a({Grid:"GRID",Hscroll:"HSCROLL",Portrait:"PORTRAIT",Single:"SINGLE",Vstack:"VSTACK",SharedStack:"SHARED_STACK"}),M=a({Left:"LEFT",Center:"CENTER"}),N=a({Test:"TEST",None:"NONE",IgMediaShare:"IG_MEDIA_SHARE",IgMultipostShare:"IG_MULTIPOST_SHARE",IgStoryReply:"IG_STORY_REPLY",IgStoryPhotoShare:"IG_STORY_PHOTO_SHARE",IgStoryPhotoMention:"IG_STORY_PHOTO_MENTION",IgClipsShare:"IG_CLIPS_SHARE",IgSingleVideoPostShare:"IG_SINGLE_VIDEO_POST_SHARE",IgStoryVideoShare:"IG_STORY_VIDEO_SHARE",IgStoryReaction:"IG_STORY_REACTION",IgIgtvShare:"IG_IGTV_SHARE",IgShopShare:"IG_SHOP_SHARE",IgProfileShare:"IG_PROFILE_SHARE",IgStoryPhotoHighlightShare:"IG_STORY_PHOTO_HIGHLIGHT_SHARE",IgStoryVideoHighlightShare:"IG_STORY_VIDEO_HIGHLIGHT_SHARE",IgStoryVideoMention:"IG_STORY_VIDEO_MENTION",IgStoryHighlightReply:"IG_STORY_HIGHLIGHT_REPLY",IgStoryHighlightReaction:"IG_STORY_HIGHLIGHT_REACTION",IgExternalLink:"IG_EXTERNAL_LINK",IgReceiverFetch:"IG_RECEIVER_FETCH",IgTextPostAppShare:"IG_TEXT_POST_APP_SHARE",FbFeedShare:"FB_FEED_SHARE",FbStoryReply:"FB_STORY_REPLY",FbStoryShare:"FB_STORY_SHARE",FbStoryMention:"FB_STORY_MENTION",FbFeedVideoShare:"FB_FEED_VIDEO_SHARE",FbGamingCustomUpdate:"FB_GAMING_CUSTOM_UPDATE",FbProducerStoryReply:"FB_PRODUCER_STORY_REPLY",FbEvent:"FB_EVENT",FbFeedPostPrivateReply:"FB_FEED_POST_PRIVATE_REPLY",FbShort:"FB_SHORT",FbCommentMentionShare:"FB_COMMENT_MENTION_SHARE",FbPostMention:"FB_POST_MENTION",MsgExternalLinkShare:"MSG_EXTERNAL_LINK_SHARE",MsgP2PPayment:"MSG_P2P_PAYMENT",MsgLocationSharingDeprecated:"MSG_LOCATION_SHARING_DEPRECATED",MsgLocationSharingV2:"MSG_LOCATION_SHARING_V2",MsgReceiverFetch:"MSG_RECEIVER_FETCH",MsgIgMediaShare:"MSG_IG_MEDIA_SHARE",MsgGenAiSearchPluginResponse:"MSG_GEN_AI_SEARCH_PLUGIN_RESPONSE",MsgReelsList:"MSG_REELS_LIST",MsgContact:"MSG_CONTACT",MsgFile:"MSG_FILE",MsgAiContact:"MSG_AI_CONTACT",MsgMemoriesShare:"MSG_MEMORIES_SHARE",MsgEarlyAccessFbShare:"MSG_EARLY_ACCESS_FB_SHARE",MsgSharedAlbum:"MSG_SHARED_ALBUM",MsgReceiverFetchFallback:"MSG_RECEIVER_FETCH_FALLBACK",MsgAiBotSearchResult:"MSG_AI_BOT_SEARCH_RESULT",MsgGenAiSubscription:"MSG_GEN_AI_SUBSCRIPTION",MsgGenAiReminder:"MSG_GEN_AI_REMINDER",MsgGenAi_1PSearchResult:"MSG_GEN_AI_1P_SEARCH_RESULT",MsgGenAiMemuOnboardingResponse:"MSG_GEN_AI_MEMU_ONBOARDING_RESPONSE",RtcAudioCall:"RTC_AUDIO_CALL",RtcVideoCall:"RTC_VIDEO_CALL",RtcMissedAudioCall:"RTC_MISSED_AUDIO_CALL",RtcMissedVideoCall:"RTC_MISSED_VIDEO_CALL",RtcGroupAudioCall:"RTC_GROUP_AUDIO_CALL",RtcGroupVideoCall:"RTC_GROUP_VIDEO_CALL",RtcMissedGroupAudioCall:"RTC_MISSED_GROUP_AUDIO_CALL",RtcMissedGroupVideoCall:"RTC_MISSED_GROUP_VIDEO_CALL",LiveLocation:"LIVE_LOCATION",OcAvatarStaticSticker:"OC_AVATAR_STATIC_STICKER"}),O=a({XmaWebUrl:"XMA_WEB_URL",XmaOpenNative:"XMA_OPEN_NATIVE",XmaMsgExternalLinkShare:"XMA_MSG_EXTERNAL_LINK_SHARE",XmaGenAiSearchPluginResponseSources:"XMA_GEN_AI_SEARCH_PLUGIN_RESPONSE_SOURCES",XmaSharedAlbumViewer:"XMA_SHARED_ALBUM_VIEWER",XmaMetaAiSingleSubscription:"XMA_META_AI_SINGLE_SUBSCRIPTION",XmaMetaAiSubscriptions:"XMA_META_AI_SUBSCRIPTIONS",XmaMetaAiReminders:"XMA_META_AI_REMINDERS",XmaGamePlay:"XMA_GAME_PLAY"}),P=a({Album:"ALBUM",Clips:"CLIPS",Video:"VIDEO"}),Q=a({None:"NONE",VodVideo:"VOD_VIDEO",LiveVideo:"LIVE_VIDEO",ShortsVideo:"SHORTS_VIDEO"}),R=a({Default:"DEFAULT",ThreadsIcon:"THREADS_ICON",FacebookIcon:"FACEBOOK_ICON",ExternalLinkIcon:"EXTERNAL_LINK_ICON",MessengerIcon:"MESSENGER_ICON",InstagramIcon:"INSTAGRAM_ICON",OculusIcon:"OCULUS_ICON"}),S=a({Default:"DEFAULT"}),T=a({None:"NONE",Collage:"COLLAGE",Photo:"PHOTO",Video:"VIDEO",MultiPhoto:"MULTI_PHOTO",MessengerIcon:"MESSENGER_ICON",InstagramIcon:"INSTAGRAM_ICON",ReelsIcon:"REELS_ICON",Live:"LIVE",YoutubeVideo:"YOUTUBE_VIDEO",YoutubeShorts:"YOUTUBE_SHORTS",Blur:"BLUR",Pill:"PILL"}),U=a({Default:"DEFAULT",P2PPreviewImageWithTextOverlay:"P2P_PREVIEW_IMAGE_WITH_TEXT_OVERLAY",Playable:"PLAYABLE",AutoPlayable:"AUTO_PLAYABLE",BlurredImage:"BLURRED_IMAGE",BlurredPlayable:"BLURRED_PLAYABLE",InformTreatmentWithLabel:"INFORM_TREATMENT_WITH_LABEL",InformTreatmentWithWarningScreen:"INFORM_TREATMENT_WITH_WARNING_SCREEN",YoutubePlayer:"YOUTUBE_PLAYER",ImageWithPlayButton:"IMAGE_WITH_PLAY_BUTTON",Placeholder:"PLACEHOLDER",AutoPlayableWithAspectRatio:"AUTO_PLAYABLE_WITH_ASPECT_RATIO"}),V=a({Default:"DEFAULT",Rounded:"ROUNDED",BlurredCircle:"BLURRED_CIRCLE",TemplateAsset:"TEMPLATE_ASSET"}),W=a({MediaLabel:"MEDIA_LABEL",Misinformation:"MISINFORMATION",PostCover:"POST_COVER",PostLabel:"POST_LABEL",Private:"PRIVATE",Sensitive:"SENSITIVE",WarningScreens:"WARNING_SCREENS"}),X=a({None:"NONE",YoutubeVideo:"YOUTUBE_VIDEO",YoutubeShorts:"YOUTUBE_SHORTS"}),Y=a({None:"NONE",Fb:"FB",FbAlwaysWhite:"FB_ALWAYS_WHITE",DotsThreeHorizontal:"DOTS_THREE_HORIZONTAL",ChevronDown:"CHEVRON_DOWN",FbInfoSmall:"FB_INFO_SMALL"}),Z=a({Simple:"SIMPLE",Retro:"RETRO",Messages:"MESSAGES"}),$=a({Weekly:"WEEKLY",Daily:"DAILY"}),aa=a({Default:"DEFAULT",Overlay:"OVERLAY"}),ba=a({Active:"ACTIVE",Ended:"ENDED",Expired:"EXPIRED"}),ca=a({Square:"SQUARE",Circle:"CIRCLE"});a=a({Chevron:"CHEVRON"});f.MpsQueryCaller=c;f.MpsMessageRangeQueryDirection=d;f.MpsBackupOperation=e;f.MpsBackupContentType=b;f.MpsMessageTag=g;f.MpsUploadType=h;f.MpsMessageBackupSource=i;f.MpsServerMessageUploadStatus=j;f.AiBotEmbodimentTrigger=k;f.XmsgStreamStatusType=l;f.XmsgPowerUpStyle=m;f.XmsgGenAiBotSubscriptionProductType=n;f.XmsgGenAiBotResponseProductType=o;f.XmsgMemoriesTemplateType=p;f.XmsgaiProduct=q;f.XmsgSuggestedModerationActionType=r;f.XmsgHighlightsTabMoment=s;f.XmsgHighlightsTabReplySourceType=t;f.XmsgMustacheCtaType=u;f.XmsgInlineEntityType=v;f.XmsgNoteMessageType=w;f.XmsgMessageSendProductType=x;f.XmsgStoryReplyType=y;f.GenAiContextInjectionType=z;f.GenAiPromptType=A;f.XmsgFeatureTags=B;f.XmsgMessageStreamingProductType=C;f.Xmsge2EeGenAiEncryptedImageProductType=D;f.Xmsge2EeGenAiEncryptedVideoProductType=E;f.XmsgMsgrXmaActionType=F;f.XmsgMsgrReceiverFetchContentType=G;f.XmsgMsgrReceiverFetchXmaLayoutType=H;f.XmsgReportedMessageType=I;f.XmsgStoryOverlayPollStyle=J;f.XmsgStoryOverlayTagType=K;f.XmsgXmaLayoutType=L;f.XmsgXmaVStackLayoutHeaderAlignmentType=M;f.XmsgXmaContentType=N;f.XmsgctaType=O;f.XmsgXmaContentAttributionIcon=P;f.XmsgXmaOverlayContentType=Q;f.XmsgXmaSubtitleDecorationType=R;f.XmsgXmaVerifiedType=S;f.XmsgXmaImageDecorationType=T;f.XmsgXmaCustomPreviewType=U;f.XmsgXmaMessagingAttachmentFaviconStyle=V;f.XmsgXmaGatingType=W;f.XmsgXmaYoutubePreviewMediaType=X;f.XmsgXmaCtaIconType=Y;f.XmsgMemoriesE2EeSendTemplateType=Z;f.XmsgXmaSubscriptionRecurrenceType=$;f.XmsgXmaStandardGenericBodyLayoutType=aa;f.XmsgXmaLiveLocationSessionState=ba;f.XmsgXmaCompactGenericTemplatePreviewStyle=ca;f.XmsgXmaCompactGenericTemplateAccessoryType=a}),66);
__d("MWChatColors",[],(function(a,b,c,d,e,f,g){"use strict";a={action:{alignContent:"xc26acl",alignItems:"x6s0dn4",borderTopStartRadius:"x14yjl9h",borderTopEndRadius:"xudhj91",borderBottomEndRadius:"x18nykt9",borderBottomStartRadius:"xww2gxu",cursor:"x1ypdohk",display:"x78zum5",flexShrink:"x2lah0s",height:"xxk0z11",justifyContent:"xl56j7k",marginEnd:"x11i5rnm",marginStart:"x1mh8g0r",position:"x1n2onr6",textAlign:"x2b8uid",width:"xvy4d1p",":hover_backgroundColor":"x15vn3sj",$$css:!0},icon:{height:"x17rw0jw",opacity:"x197sbye",width:"x17z2i9w",":active_opacity":"x4gyw5p",":hover_opacity":"x1o7uuvo",$$css:!0},svgFill:{fill:"x148u3ch",$$css:!0},svgStroke:{fill:"xbh8q5q",stroke:"xmb71p3",$$css:!0}};b={styles:a};g.MessageActions=b}),98);
__d("MWMessageReactionIcon.react",["fbt","MWChatColors","react","stylex"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=(j||(j=d("react"))).c,l=j;function a(a){var b=k(6),e=a.size;a=a.viewBox;e=e===void 0?16:e;a=a===void 0?"0 0 16 16":a;var f,g,j;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(f=l.jsx("title",{children:h._("__JHASH__Wo2O5nlXhKT__JHASH__")}),g=l.jsx("path",{className:(i||(i=c("stylex")))(d("MWChatColors").MessageActions.styles.svgFill),d:"M12.48 0.64C12.48 0.286538 12.7665 0 13.12 0C13.4735 0 13.76 0.286538 13.76 0.64V2.08C13.76 2.16837 13.8316 2.24 13.92 2.24H15.36C15.7135 2.24 16 2.52654 16 2.88C16 3.23346 15.7135 3.52 15.36 3.52H13.92C13.8316 3.52 13.76 3.59163 13.76 3.68V5.12C13.76 5.47346 13.4735 5.76 13.12 5.76C12.7665 5.76 12.48 5.47346 12.48 5.12V3.68C12.48 3.59163 12.4084 3.52 12.32 3.52H10.88C10.5265 3.52 10.24 3.23346 10.24 2.88C10.24 2.52654 10.5265 2.24 10.88 2.24H12.32C12.4084 2.24 12.48 2.16837 12.48 2.08V0.64Z"}),j=l.jsx("path",{className:i(d("MWChatColors").MessageActions.styles.svgFill),clipRule:"evenodd",d:"M8.96 2.42705C8.96 2.28386 8.86505 2.15735 8.726 2.12317C8.18582 1.99041 7.62113 1.92 7.04 1.92C3.15192 1.92 0 5.07192 0 8.96C0 12.8481 3.15192 16 7.04 16C10.9281 16 14.08 12.8481 14.08 8.96C14.08 8.37887 14.0096 7.81418 13.8768 7.274C13.8427 7.13495 13.7161 7.04 13.573 7.04H13.12C12.0596 7.04 11.2 6.18039 11.2 5.12C11.2 4.94327 11.0567 4.8 10.88 4.8C9.81961 4.8 8.96 3.94039 8.96 2.88V2.42705ZM4.63999 6.4C4.03999 6.4 3.67999 6.88 3.67999 7.68C3.67999 8.48 4.03999 8.96 4.63999 8.96C5.23999 8.96 5.59999 8.48 5.59999 7.68C5.59999 6.88 5.23999 6.4 4.63999 6.4ZM9.43999 6.4C8.83999 6.4 8.47999 6.88 8.47999 7.68C8.47999 8.48 8.83999 8.96 9.43999 8.96C10.04 8.96 10.4 8.48 10.4 7.68C10.4 6.88 10.04 6.4 9.43999 6.4ZM10.56 11.2C10.56 12.48 8.96 13.76 7.04 13.76C5.12 13.76 3.52 12.48 3.52 11.2C3.52 11.0233 3.66327 10.88 3.84 10.88H10.24C10.4167 10.88 10.56 11.0233 10.56 11.2Z",fillRule:"evenodd"}),b[0]=f,b[1]=g,b[2]=j):(f=b[0],g=b[1],j=b[2]);b[3]!==e||b[4]!==a?(f=l.jsxs("svg",{fill:"none",height:e,viewBox:a,width:e,xmlns:"http://www.w3.org/2000/svg",children:[f,g,j]}),b[3]=e,b[4]=a,b[5]=f):f=b[5];return f}g["default"]=a}),226);
__d("MWAddReactionButton.react",["fbt","I64","LSMessagingThreadTypeUtil","MWCMThreadTypes.react","MWChatMessageId","MWChatReactionsActionContainer.react","MWMessageReactionIcon.react","MWXPressable.react","MWXTooltip.react","ODS","emptyFunction","react","useIsReactionsV2Enabled"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l=i||(i=d("react"));e=i;e.useCallback;var m=e.useMemo,n=e.c,o={emojiRowContainer:{borderTopStartRadius:"xdxvlk3",borderTopEndRadius:"x1fglp",borderBottomEndRadius:"x1rp6h8o",borderBottomStartRadius:"xg6i1s1",marginBottom:"x12nagc",marginEnd:"xw3qccf",$$css:!0}},p=l.forwardRef(a);function a(a,b){var e=n(11),f=a.onHoverInPrerenderer,g=a.onHoverOutPrerenderer,i=a.onPressInPrerenderer,k=a.showPopover;e[0]===Symbol["for"]("react.memo_cache_sentinel")?(a=h._("__JHASH__czR8vxcW0mN__JHASH__"),e[0]=a):a=e[0];a=a;var m;e[1]!==k?(m=function(){k(),(j||(j=d("ODS"))).bumpEntityKey(3185,"mwchat_actions","reaction")},e[1]=k,e[2]=m):m=e[2];m=m;var p;e[3]===Symbol["for"]("react.memo_cache_sentinel")?(p="x6s0dn4 xnmxlks xdxvlk3 x1fglp x1rp6h8o xg6i1s1 x78zum5 xl56j7k x10b6aqq xsyo7zv xurb0ha x1yrsyyn x1n2onr6 xp4054r",e[3]=p):p=e[3];e[4]===Symbol["for"]("react.memo_cache_sentinel")?(p=l.jsx("div",{className:p,role:"none",children:l.jsx("div",{className:"x6s0dn4 x14yjl9h xudhj91 x18nykt9 xww2gxu x1ypdohk x14ju556 x11i5rnm x78zum5 xdt5ytf xl56j7k x1npj6m0",children:l.jsx(c("MWMessageReactionIcon.react"),{size:"1.125rem"})})}),e[4]=p):p=e[4];e[5]!==f||e[6]!==g||e[7]!==m||e[8]!==i||e[9]!==b?(a=l.jsx(c("MWXTooltip.react"),{align:"middle",position:"above",tooltip:a,children:l.jsx(c("MWXPressable.react"),{"aria-label":a,expanding:!0,loggingEvent:"click_react_to_message",onHoverIn:f,onHoverOut:g,onPress:m,onPressIn:i,overlayRadius:"inherit",ref:b,role:"button",testid:void 0,xstyle:o.emojiRowContainer,children:p})}),e[5]=f,e[6]=g,e[7]=m,e[8]=i,e[9]=b,e[10]=a):a=e[10];return a}function b(a){var b=a.isSecure,e=a.message,f=a.sendReaction,g=a.setShouldRowStayExpanded,h=a.threadKey;a=a.threadType;var i=(k||(k=d("I64"))).to_string(h),j=k.to_string(e.timestampMs),n=m(function(){return d("MWChatMessageId").makeSent(i,e.messageId,j)},[i,e.messageId,j]),o=d("MWCMThreadTypes.react").isBroadcastThread(a);a=d("LSMessagingThreadTypeUtil").isDiscoverablePublicBroadcastChannel(a);h=d("useIsReactionsV2Enabled").useIsReactionsV2Enabled(h);return l.jsx(c("MWChatReactionsActionContainer.react"),{alwaysShowEmojiPicker:!0,closeActionsMenu:c("emptyFunction"),disableCustomReactions:h&&o,hasReactionsV2:h,isBroadcastChannel:a,isBroadcastThread:o,isSecure:b,messageID:n,onVisibilityChange:g,sendReaction:f,children:function(a,b,c,d,e,f){return l.jsx(p,{messageID:n,onHoverInPrerenderer:d,onHoverOutPrerenderer:e,onPressInPrerenderer:f,ref:a,showPopover:b})}})}b.displayName=b.name+" [from "+f.id+"]";g["default"]=b}),226);
__d("MWBlockedTombstoneMessage.react",["fbt","MWChatBubbleEmphasisRing.react","MWPVisibleMessageContext.react","MWV2TombstonedMessage.react","MWXPressable.react","react","stylex"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=(j||(j=d("react"))).c,l=j,m={bubble:{paddingBottom:"x1120s5i",$$css:!0},bubbleReply:{paddingBottom:"xwib8y2",$$css:!0}};b={ORIGINAL_MESSAGE:"original-message",REPLIED_TO:"replied-to"};function a(a){var b=k(13),e=a.isLastMessageInGroup,f=a.messageId,g=a.onClick;a=a.source;var j;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(j=h._("__JHASH__IgHPZSLlYoi__JHASH__"),b[0]=j):j=b[0];j=j;var n=d("MWPVisibleMessageContext.react").useMWPVisibleMessageContext();n=n.visibleMessage;n=(n==null?void 0:n.source)==="Pinned"&&(n==null?void 0:n.messageId)===f;b[1]!==n||b[2]!==a?(f=n?l.jsx(c("MWChatBubbleEmphasisRing.react"),{connectBottom:!1,connectTop:!1,hasXMA:!1,outgoing:!1,precedesXMA:!1,children:l.jsx(c("MWV2TombstonedMessage.react"),{connectBottom:!1,connectTop:!1,isOutgoing:!1,isReply:a==="replied-to",children:j})}):l.jsx(c("MWV2TombstonedMessage.react"),{connectBottom:!1,connectTop:!1,isOutgoing:!1,isReply:a==="replied-to",children:j}),b[1]=n,b[2]=a,b[3]=f):f=b[3];j=f;n=e===!1&&m.bubble;f=a==="replied-to"&&m.bubbleReply;b[4]!==n||b[5]!==f?(e=(i||(i=c("stylex")))(n,f),b[4]=n,b[5]=f,b[6]=e):e=b[6];b[7]!==g||b[8]!==j?(a=l.jsx(c("MWXPressable.react"),{onPress:g,overlayDisabled:!0,children:j}),b[7]=g,b[8]=j,b[9]=a):a=b[9];b[10]!==e||b[11]!==a?(n=l.jsx("div",{className:e,"data-testid":void 0,children:a}),b[10]=e,b[11]=a,b[12]=n):n=b[12];return n}g.MWBlockedTombstoneMessageSource=b;g.MWBlockedTombstoneMessage=a}),226);
__d("MWBlockingProtectionLogging",["I64","react","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=(h||d("react")).c,k=c("requireDeferred")("MwbGroupBlockeeMessagesTapToRevealActionFalcoEvent").__setRef("MWBlockingProtectionLogging");function a(a){var b=j(2),c;b[0]!==a.threadKey?(c=function(){k.onReady(function(b){return b.log(function(){return{entry_point:22,source:3,source_type:0,thread_id:(i||(i=d("I64"))).to_string(a.threadKey)}})})},b[0]=a.threadKey,b[1]=c):c=b[1];return c}g.useLogTapToReviewAction=a}),98);
__d("MWCMBulkInviteDialog.entrypoint",["JSResourceForInteraction"],(function(a,b,c,d,e,f,g){"use strict";a={getPreloadProps:function(){return{}},root:c("JSResourceForInteraction")("MWCMBulkInviteDialog.react").__setRef("MWCMBulkInviteDialog.entrypoint")};g["default"]=a}),98);
__d("MWCMContentTakedownEnforcementNoticeDialogQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="25476419472006466"}),null);
__d("MWCMContentTakedownEnforcementNoticeDialogQuery$Parameters",["MWCMContentTakedownEnforcementNoticeDialogQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a={kind:"PreloadableConcreteRequest",params:{id:b("MWCMContentTakedownEnforcementNoticeDialogQuery_facebookRelayOperation"),metadata:{},name:"MWCMContentTakedownEnforcementNoticeDialogQuery",operationKind:"query",text:null}};e.exports=a}),null);
__d("MWCMContentTakedownEnforcementNoticeDialog.entrypoint",["JSResourceForInteraction","MWCMContentTakedownEnforcementNoticeDialogQuery$Parameters"],(function(a,b,c,d,e,f,g){"use strict";a={getPreloadProps:function(a){a=a.interventions_ids;return{queries:{queryReference:{parameters:c("MWCMContentTakedownEnforcementNoticeDialogQuery$Parameters"),variables:{interventions_ids:a}}}}},root:c("JSResourceForInteraction")("MWCMContentTakedownEnforcementNoticeDialog.react").__setRef("MWCMContentTakedownEnforcementNoticeDialog.entrypoint")};g["default"]=a}),98);
__d("MWCMElectionFactLabelDialogQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="8111791688896993"}),null);
__d("MWCMElectionInformTreatmentDialogQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="8150321178322855"}),null);
__d("MWCMInformTreatmentGenAITransparencyDialogQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="7797384147050491"}),null);
__d("MWCMMemberRequestsDialog.entrypoint",["JSResourceForInteraction"],(function(a,b,c,d,e,f,g){"use strict";a={getPreloadProps:function(){return{}},root:c("JSResourceForInteraction")("MWCMMemberRequestsDialog.react").__setRef("MWCMMemberRequestsDialog.entrypoint")};g["default"]=a}),98);
__d("MWChatComposerVoiceIndicator.react",["fbt","CurrentUser","MWXText.react","MWXTextPairing.react","getTopMostRoute","react","useCometRouterState"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=(i||(i=d("react"))).c,k=i;function a(a){var b=j(6);a=a.forceShown_TEST_ONLY;a=a===void 0?!1:a;var d=c("useCometRouterState")();if(b[0]!==d){var e=d!=null?c("getTopMostRoute")(d):null;e=(e=e==null?void 0:e.tracePolicy)!=null?e:null;e=e!==null?e.startsWith("comet.page.admin")||e.startsWith("comet.group.admin"):!1;b[0]=d;b[1]=e}else e=b[1];d=e;if(b[2]===Symbol["for"]("react.memo_cache_sentinel")){e=c("CurrentUser").getName();e=h._("__JHASH__moy48BoqFvP__JHASH__",[h._param("full name",k.jsx(c("MWXText.react"),{type:"meta2",children:e}))]);b[2]=e}else e=b[2];e=e;b[3]!==d||b[4]!==a?(e=d||a?k.jsx("div",{className:"x57kliw x1exxf4d x13fuv20 x178xt8z xi81zsa xyinxu5 xho0xa1 xs9asl8 x1vobaek",children:k.jsx(c("MWXTextPairing.react"),{body:k.jsx(c("MWXText.react"),{align:"center",color:"secondary",type:"body4",children:e}),level:4,textAlign:"center"})}):null,b[3]=d,b[4]=a,b[5]=e):e=b[5];return e}g["default"]=a}),226);
__d("MWChatHeaderDetailsSubtitleMutedIcon.react",["fbt","MWXTooltip.react","cr:4426","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=(i||(i=d("react"))).c,k=i;function a(a){a=j(1);var d;a[0]===Symbol["for"]("react.memo_cache_sentinel")?(d=k.jsx(c("MWXTooltip.react"),{align:"start",position:"above",tooltip:h._("__JHASH__XpvJmcPfz_-__JHASH__"),children:k.jsx(b("cr:4426"),{})}),a[0]=d):d=a[0];return d}g["default"]=a}),226);
__d("MWChatMultiReactionsTooltip.react",["fbt","I64","Int64Hooks","LSClearReactionsV2DetailsAndRangeStoredProcedure","LSFactory","LSIssueReactionsV2DetailsUsersListFetchStoredProcedure","LSPlatformWaitForTaskCompletion","MWPActor.react","MWXPressable.react","MWXText.react","ReQL","ReQLSuspense","intlSummarizeNumber","promiseDone","react","usePrevious","useReStore"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l=k||(k=d("react"));b=k;var m=b.useEffect,n=b.useRef,o=b.useState,p=b.c,q=9;function a(a){var b=p(65),e=a.isProcessingReactions,g=a.messageId,k=a.onTooltipCTAPress,r=a.reactionFbid,s=a.threadKey,t=(i||(i=c("useReStore")))();a=o(!0);var u=a[0],v=a[1],w;b[0]!==e||b[1]!==t||b[2]!==g||b[3]!==r||b[4]!==s?(a=function(){e||(v(!0),c("promiseDone")(c("LSPlatformWaitForTaskCompletion")(t,function(a){return c("LSIssueReactionsV2DetailsUsersListFetchStoredProcedure")(c("LSFactory")(a),{messageId:g,reactionFbid:r,threadId:s})},"issueReactionsV2DetailsUsersListFetch").then(function(){v(!1)})))},w=[t,s,g,r,v,e],b[0]=e,b[1]=t,b[2]=g,b[3]=r,b[4]=s,b[5]=a,b[6]=w):(a=b[5],w=b[6]);d("Int64Hooks").useEffectInt64(a,w);var x=d("MWPActor.react").useActor();b[7]!==t.tables.reactions_v2_details||b[8]!==s||b[9]!==g||b[10]!==r?(a=function(){return d("ReQL").fromTableAscending(t.tables.reactions_v2_details).getKeyRange(s,g).filter(function(a){return(j||(j=d("I64"))).equal(a.reactionFbid,r)})},b[7]=t.tables.reactions_v2_details,b[8]=s,b[9]=g,b[10]=r,b[11]=a):a=b[11];b[12]!==t||b[13]!==s||b[14]!==g||b[15]!==r?(w=[t,s,g,r],b[12]=t,b[13]=s,b[14]=g,b[15]=r,b[16]=w):w=b[16];a=d("ReQLSuspense").useArray(a,w,f.id+":84");var y=new Map();a.forEach(function(a){return y.set((j||(j=d("I64"))).to_string(a.reactorId),a.fullName)});b[17]!==t.tables.threads||b[18]!==t.tables.contextual_profile_v1||b[19]!==s?(w=function(){return d("ReQL").fromTableAscending(t.tables.threads).getKeyRange(s).map(function(a){var b=a.parentThreadKey;return d("ReQLSuspense").toArray(d("ReQL").fromTableAscending(t.tables.contextual_profile_v1).filter(function(a){return(j||(j=d("I64"))).equal(a.associatedEntityId,b)}),f.id+":102")})},b[17]=t.tables.threads,b[18]=t.tables.contextual_profile_v1,b[19]=s,b[20]=w):w=b[20];var z;b[21]!==t||b[22]!==s?(z=[t,s],b[21]=t,b[22]=s,b[23]=z):z=b[23];w=d("ReQLSuspense").useFirst(w,z,f.id+":97");z=null;w!=null&&w.forEach(function(a){var b=(j||(j=d("I64"))).to_string(a.ownerId),c=a.profileName;if(c==null)return;y.has(b)&&y.set(b,c);(j||(j=d("I64"))).equal(a.ownerId,x)&&(z=c)});w=a.map(function(a){return y.get((j||(j=d("I64"))).to_string(a.reactorId))}).filter(Boolean);b[24]!==t.tables.reactions_v2||b[25]!==s||b[26]!==g||b[27]!==r?(a=function(){return d("ReQL").fromTableAscending(t.tables.reactions_v2).getKeyRange(s,g,r)},b[24]=t.tables.reactions_v2,b[25]=s,b[26]=g,b[27]=r,b[28]=a):a=b[28];var A;b[29]!==t||b[30]!==s||b[31]!==g||b[32]!==r?(A=[t,s,g,r],b[29]=t,b[30]=s,b[31]=g,b[32]=r,b[33]=A):A=b[33];a=d("ReQLSuspense").useFirst(a,A,f.id+":131");A=(A=a==null?void 0:a.viewerIsReactor)!=null?A:!1;var B;b[34]!==t.tables.contacts||b[35]!==x?(B=function(){return d("ReQL").fromTableAscending(t.tables.contacts).getKeyRange(x).map(function(a){return a.name})},b[34]=t.tables.contacts,b[35]=x,b[36]=B):B=b[36];var C;b[37]!==t||b[38]!==x?(C=[t,x],b[37]=t,b[38]=x,b[39]=C):C=b[39];B=d("ReQLSuspense").useFirst(B,C,f.id+":143");C=z!=null?z:B;B=a!=null?(j||(j=d("I64"))).to_int32(a.count):0;if(B===1&&A&&w.length===0&&C!=null)w.push(C);else{A&&w[0]!=null&&C!=null&&((a=w[0])==null?void 0:a.toString())!==C&&w.unshift(C)}b[40]===Symbol["for"]("react.memo_cache_sentinel")?(A=h._("__JHASH__GTBXwO8BaZr__JHASH__"),b[40]=A):A=b[40];a=A;bb0:{C=[].concat(w.slice(0,q));A=!1;if(w.length>q){var D=B-q;if(D<0){var E;b[41]===Symbol["for"]("react.memo_cache_sentinel")?(E=[a,!0],b[41]=E):E=b[41];E=E;break bb0}var F;b[42]!==D?(F=h._("__JHASH__KVtJcih6CQz__JHASH__",[h._plural(D),h._param("count",String(c("intlSummarizeNumber")(D)))]).toString(),b[42]=D,b[43]=F):F=b[43];C.push(F)}else A=(!u||!e)&&w.length!==B;E=C.length===0?[a,A]:[C.map(function(a,b){return l.jsx("div",{children:a},String(b))}),A]}D=E;F=D[0];var G=D[1],H=c("usePrevious")(G),I=n(null);b[44]===Symbol["for"]("react.memo_cache_sentinel")?(u=function(){return function(){I.current!=null&&window.clearTimeout(I.current)}},w=[],b[44]=u,b[45]=w):(u=b[44],w=b[45]);m(u,w);b[46]!==H||b[47]!==G||b[48]!==t||b[49]!==g||b[50]!==s?(B=function(){if(H===G)return;if(!G)I.current!=null&&(window.clearTimeout(I.current),I.current=null);else{if(I.current!=null)return;I.current=window.setTimeout(function(){I.current=null,c("promiseDone")(t.runInTransaction(function(a){return c("LSClearReactionsV2DetailsAndRangeStoredProcedure")(c("LSFactory")(a))},"readwrite",void 0,void 0,f.id+":241")),c("promiseDone")(t.runInTransaction(function(a){return c("LSIssueReactionsV2DetailsUsersListFetchStoredProcedure")(c("LSFactory")(a),{messageId:g,threadId:s})},"readwrite",void 0,void 0,f.id+":249"))},700)}},b[46]=H,b[47]=G,b[48]=t,b[49]=g,b[50]=s,b[51]=B):B=b[51];b[52]!==t||b[53]!==G||b[54]!==H||b[55]!==g||b[56]!==r||b[57]!==s?(a=[t,G,H,g,r,s],b[52]=t,b[53]=G,b[54]=H,b[55]=g,b[56]=r,b[57]=s,b[58]=a):a=b[58];m(B,a);b[59]===Symbol["for"]("react.memo_cache_sentinel")?(C=h._("__JHASH__g_e4jdcSB-i__JHASH__"),b[59]=C):C=b[59];b[60]!==F?(A=l.jsx(c("MWXText.react"),{color:"tooltip",type:"body4",children:F}),b[60]=F,b[61]=A):A=b[61];b[62]!==k||b[63]!==A?(E=l.jsx(c("MWXPressable.react"),{"aria-label":C,onPress:k,overlayDisabled:!0,children:A}),b[62]=k,b[63]=A,b[64]=E):E=b[64];return E}g["default"]=a}),226);
__d("MWChatUnavailableComposer.react",["fbt","ComponentMountUnmountSubspanLogger.react","MWBlockedComposerLogging","MWXComposerBanner.react","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=(i||(i=d("react"))).c,k=i;function a(a){var b=j(2),e=a.reason;a=a.thread;d("MWBlockedComposerLogging").useLogMWBlockedComposerReason(a.threadKey,e);b[0]===Symbol["for"]("react.memo_cache_sentinel")?(a=h._("__JHASH__FoZB3MxTOU9__JHASH__"),b[0]=a):a=b[0];e=a;b[1]===Symbol["for"]("react.memo_cache_sentinel")?(a=k.jsxs("div",{children:[k.jsx(c("ComponentMountUnmountSubspanLogger.react"),{description:"MWChatUnavailableComposer"}),k.jsx(c("MWXComposerBanner.react"),{bodyText:e})]}),b[1]=a):a=b[1];return a}g["default"]=a}),226);
__d("MWChatViewerChatVisibilityHookQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="6404754876239370"}),null);
__d("MWChatViewerChatVisibilityHookQuery.graphql",["MWChatViewerChatVisibilityHookQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"chat_visibility",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"MWChatViewerChatVisibilityHookQuery",selections:a,type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[],kind:"Operation",name:"MWChatViewerChatVisibilityHookQuery",selections:a},params:{id:b("MWChatViewerChatVisibilityHookQuery_facebookRelayOperation"),metadata:{},name:"MWChatViewerChatVisibilityHookQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("MWChatViewerChatVisibilityHook",["CometRelay","MWChatViewerChatVisibilityHookQuery.graphql","promiseDone","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i;e=i||d("react");var j=e.useEffect,k=e.c,l=h!==void 0?h:h=b("MWChatViewerChatVisibilityHookQuery.graphql");function a(){var a,b=k(6),e=d("CometRelay").useRelayEnvironment(),f=d("CometRelay").useLazyLoadQuery(l,{},{fetchPolicy:"store-only"}),g;b[0]!==f||b[1]!==e?(g=function(){var a;(f==null?void 0:(a=f.viewer)==null?void 0:a.chat_visibility)==null&&c("promiseDone")(d("CometRelay").fetchQuery(e,l,{}).toPromise())},b[0]=f,b[1]=e,b[2]=g):g=b[2];a=f==null?void 0:(a=f.viewer)==null?void 0:a.chat_visibility;var h;b[3]!==a||b[4]!==e?(h=[a,e],b[3]=a,b[4]=e,b[5]=h):h=b[5];j(g,h);return(f==null?void 0:(a=f.viewer)==null?void 0:a.chat_visibility)===!0}g.useViewerChatVisibility=a}),98);
__d("useMWMessageRowTheme",["MWLSThreadDisplayContext","gkx","react"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");b.useMemo;var i=b.c;function a(){var a=i(2),b=d("MWLSThreadDisplayContext").useMWLSThreadDisplayContext();b=c("gkx")("23219")?"12px":b==="Inbox"?"16px":"8px";var e;a[0]!==b?(e={dark:{"mwp-message-list-profile-start-padding":b},light:{"mwp-message-list-profile-start-padding":b},type:"VARIABLES"},a[0]=b,a[1]=e):e=a[1];b=e;return b}g["default"]=a}),98);
__d("MWJumpToMessageLogger",["CometHeroLogging","I64","LSIntEnum","LSMessagingInitiatingSource","MWChatInteraction"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a,b,e,f){var g=c("CometHeroLogging").genHeroInteractionUUIDAndMarkStart(a.getTraceId(),null);d("MWChatInteraction").set(b,g);e!=null&&((h||(h=d("I64"))).equal(e,(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingInitiatingSource").FACEBOOK_CHAT))?a.addMetadata("entrypoint","chat"):(h||(h=d("I64"))).equal(e,(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingInitiatingSource").FACEBOOK_INBOX))&&a.addMetadata("entrypoint","inbox"));a.addMetadata("mw_version",(h||(h=d("I64"))).to_string(f));return a.onComplete(function(){delete d("MWChatInteraction").interactions[b]})}g.startHeroInteractionTrace=a}),98);
__d("useMWJumpToMessage",["MWJumpToMessageLogger","MWPVisibleMessageContext.react","MWVersion","qpl","react","useCometInteractionTracing","useLSMessagingInitiatingSource"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");b.useCallback;var i=b.c;function a(a){var b=i(6),e=d("MWPVisibleMessageContext.react").useMWPVisibleMessageContext(),f=e.setVisibleMessage,g=c("useLSMessagingInitiatingSource")();b[0]===Symbol["for"]("react.memo_cache_sentinel")?(e=c("qpl")._(25301087,"7779"),b[0]=e):e=b[0];var h=c("useCometInteractionTracing")(e,"fast","INTERACTION");b[1]!==h||b[2]!==f||b[3]!==a||b[4]!==g?(e=function(b,c,e,i){var j=e!=null?e:"",k=i!=null?i:[];return h(function(e){f({contextLine:j,highlights:k,messageId:b,source:a,timestamp:c});return d("MWJumpToMessageLogger").startHeroInteractionTrace(e,b,g,d("MWVersion").v2)})},b[1]=h,b[2]=f,b[3]=a,b[4]=g,b[5]=e):e=b[5];return e}g["default"]=a}),98);
__d("MWPBaseRepliedMessage.react",["I64","LSIntEnum","LSMessageReplySourceTypeV2","LSReplyMessageAttachmentType","LSReplyMessageStatus","MWXPressable.react","justknobx","qex","react","recoverableViolation","useIsRollcallEnabled","useMWJumpToMessage","useRollcallContributionsXMAActionHandler"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=(h||(h=d("react"))).c,l=h,m={pressable:{display:"x1lliihq",$$css:!0}};function a(a){var b=k(198),e=a.clickToNavigateToReply,f=a.earlyCheckForReplyStatus,g=a.isSecureMessage,h=a.mediaRenderQpl,m=a.message,o=a.outgoing,p=a.renderAttachment,q=a.renderCollection,r=a.renderExpiredMessage,s=a.renderGIF,t=a.renderMedia,u=a.renderPost,v=a.renderRaven,w=a.renderRemovedMessage,x=a.renderRollcallContribution,y=a.renderSticker,z=a.renderStory,A=a.renderTextMessage,B=a.renderUnavailableMessage;a=a.renderVideo;e=e===void 0?!0:e;f=f===void 0?!1:f;var C=c("justknobx")._("2738"),D=m.replyAttachmentId,E=m.replyAttachmentType,F=m.replyMessageText,G=D!=null||m.replySourceTypeV2!=null&&(i||(i=d("I64"))).equal(m.replySourceTypeV2,(j||(j=d("LSIntEnum"))).ofNumber(c("LSMessageReplySourceTypeV2").STORY));if(E!=null&&G&&(!f||m.replyStatus!=null&&!(i||(i=d("I64"))).equal(m.replyStatus,(j||(j=d("LSIntEnum"))).ofNumber(c("LSReplyMessageStatus").DELETED))))if(((i||(i=d("I64"))).equal(E,(j||(j=d("LSIntEnum"))).ofNumber(c("LSReplyMessageAttachmentType").PHOTO))||(i||(i=d("I64"))).equal(E,(j||(j=d("LSIntEnum"))).ofNumber(c("LSReplyMessageAttachmentType").VIDEO)))&&m.replySourceTypeV2!=null&&(i||(i=d("I64"))).equal(m.replySourceTypeV2,(j||(j=d("LSIntEnum"))).ofNumber(c("LSMessageReplySourceTypeV2").STORY))){b[0]!==z||b[1]!==g||b[2]!==h||b[3]!==m||b[4]!==o?(G=l.jsx(z,{isSecureMessage:g,mediaRenderQpl:h,message:m,outgoing:o}),b[0]=z,b[1]=g,b[2]=h,b[3]=m,b[4]=o,b[5]=G):G=b[5];f=G}else if(D!=null)if(C&&(i||(i=d("I64"))).equal(E,(j||(j=d("LSIntEnum"))).ofNumber(c("LSReplyMessageAttachmentType").XMA))&&p!=null)if(F!=null&&F!==""){b[6]!==A||b[7]!==g||b[8]!==m||b[9]!==o||b[10]!==F?(z=l.jsx(A,{isSecureMessage:g,message:m,outgoing:o,text:F}),b[6]=A,b[7]=g,b[8]=m,b[9]=o,b[10]=F,b[11]=z):z=b[11];f=z}else{b[12]!==p||b[13]!==g||b[14]!==h||b[15]!==m||b[16]!==o?(G=l.jsx(p,{isSecureMessage:g,mediaRenderQpl:h,message:m,outgoing:o}),b[12]=p,b[13]=g,b[14]=h,b[15]=m,b[16]=o,b[17]=G):G=b[17];f=G}else if((i||(i=d("I64"))).equal(E,(j||(j=d("LSIntEnum"))).ofNumber(c("LSReplyMessageAttachmentType").OTHER))){b[18]!==p||b[19]!==g||b[20]!==h||b[21]!==m||b[22]!==o?(z=l.jsx(p,{isSecureMessage:g,mediaRenderQpl:h,message:m,outgoing:o}),b[18]=p,b[19]=g,b[20]=h,b[21]=m,b[22]=o,b[23]=z):z=b[23];f=z}else if((i||(i=d("I64"))).equal(E,(j||(j=d("LSIntEnum"))).ofNumber(c("LSReplyMessageAttachmentType").PHOTO)))if(t!=null){b[24]!==t||b[25]!==g||b[26]!==h||b[27]!==m||b[28]!==o?(G=l.jsx(t,{isSecureMessage:g,mediaRenderQpl:h,message:m,outgoing:o}),b[24]=t,b[25]=g,b[26]=h,b[27]=m,b[28]=o,b[29]=G):G=b[29];f=G}else{b[30]!==p||b[31]!==g||b[32]!==h||b[33]!==m||b[34]!==o?(z=l.jsx(p,{isSecureMessage:g,mediaRenderQpl:h,message:m,outgoing:o}),b[30]=p,b[31]=g,b[32]=h,b[33]=m,b[34]=o,b[35]=z):z=b[35];f=z}else if((i||(i=d("I64"))).equal(E,(j||(j=d("LSIntEnum"))).ofNumber(c("LSReplyMessageAttachmentType").ROLL_CALL_PHOTO_CONTRIBUTION))||(i||(i=d("I64"))).equal(E,(j||(j=d("LSIntEnum"))).ofNumber(c("LSReplyMessageAttachmentType").ROLL_CALL_VIDEO_CONTRIBUTION))||(i||(i=d("I64"))).equal(E,(j||(j=d("LSIntEnum"))).ofNumber(c("LSReplyMessageAttachmentType").ROLL_CALL_TEXT_CONTRIBUTION)))if(x!=null){b[36]!==x||b[37]!==g||b[38]!==h||b[39]!==m||b[40]!==o?(G=l.jsx(x,{isSecureMessage:g,mediaRenderQpl:h,message:m,outgoing:o}),b[36]=x,b[37]=g,b[38]=h,b[39]=m,b[40]=o,b[41]=G):G=b[41];f=G}else{b[42]!==p||b[43]!==g||b[44]!==h||b[45]!==m||b[46]!==o?(z=l.jsx(p,{isSecureMessage:g,mediaRenderQpl:h,message:m,outgoing:o}),b[42]=p,b[43]=g,b[44]=h,b[45]=m,b[46]=o,b[47]=z):z=b[47];f=z}else if((i||(i=d("I64"))).equal(E,(j||(j=d("LSIntEnum"))).ofNumber(c("LSReplyMessageAttachmentType").MULTIPHOTO)))if(c("qex")._("1679")&&q!=null){b[48]!==q||b[49]!==m||b[50]!==o?(x=l.jsx(q,{message:m,outgoing:o}),b[48]=q,b[49]=m,b[50]=o,b[51]=x):x=b[51];f=x}else if(t!=null){b[52]!==t||b[53]!==g||b[54]!==h||b[55]!==m||b[56]!==o?(G=l.jsx(t,{isSecureMessage:g,mediaRenderQpl:h,message:m,outgoing:o}),b[52]=t,b[53]=g,b[54]=h,b[55]=m,b[56]=o,b[57]=G):G=b[57];f=G}else{b[58]!==p||b[59]!==g||b[60]!==h||b[61]!==m||b[62]!==o?(z=l.jsx(p,{isSecureMessage:g,mediaRenderQpl:h,message:m,outgoing:o}),b[58]=p,b[59]=g,b[60]=h,b[61]=m,b[62]=o,b[63]=z):z=b[63];f=z}else if((i||(i=d("I64"))).equal(E,(j||(j=d("LSIntEnum"))).ofNumber(c("LSReplyMessageAttachmentType").VIDEO)))if(a!=null){b[64]!==a||b[65]!==g||b[66]!==h||b[67]!==m||b[68]!==o?(q=l.jsx(a,{isSecureMessage:g,mediaRenderQpl:h,message:m,outgoing:o}),b[64]=a,b[65]=g,b[66]=h,b[67]=m,b[68]=o,b[69]=q):q=b[69];f=q}else{b[70]!==p||b[71]!==g||b[72]!==h||b[73]!==m||b[74]!==o?(x=l.jsx(p,{isSecureMessage:g,mediaRenderQpl:h,message:m,outgoing:o}),b[70]=p,b[71]=g,b[72]=h,b[73]=m,b[74]=o,b[75]=x):x=b[75];f=x}else if((i||(i=d("I64"))).equal(E,(j||(j=d("LSIntEnum"))).ofNumber(c("LSReplyMessageAttachmentType").GIF)))if(s!=null){b[76]!==s||b[77]!==g||b[78]!==h||b[79]!==m||b[80]!==o?(G=l.jsx(s,{isSecureMessage:g,mediaRenderQpl:h,message:m,outgoing:o}),b[76]=s,b[77]=g,b[78]=h,b[79]=m,b[80]=o,b[81]=G):G=b[81];f=G}else{b[82]!==p||b[83]!==g||b[84]!==h||b[85]!==m||b[86]!==o?(z=l.jsx(p,{isSecureMessage:g,mediaRenderQpl:h,message:m,outgoing:o}),b[82]=p,b[83]=g,b[84]=h,b[85]=m,b[86]=o,b[87]=z):z=b[87];f=z}else if((i||(i=d("I64"))).equal(E,(j||(j=d("LSIntEnum"))).ofNumber(c("LSReplyMessageAttachmentType").STICKER)))if(y!=null){b[88]!==y||b[89]!==g||b[90]!==h||b[91]!==m||b[92]!==o?(a=l.jsx(y,{isSecureMessage:g,mediaRenderQpl:h,message:m,outgoing:o}),b[88]=y,b[89]=g,b[90]=h,b[91]=m,b[92]=o,b[93]=a):a=b[93];f=a}else{b[94]!==p||b[95]!==g||b[96]!==h||b[97]!==m||b[98]!==o?(q=l.jsx(p,{isSecureMessage:g,mediaRenderQpl:h,message:m,outgoing:o}),b[94]=p,b[95]=g,b[96]=h,b[97]=m,b[98]=o,b[99]=q):q=b[99];f=q}else if((i||(i=d("I64"))).equal(E,(j||(j=d("LSIntEnum"))).ofNumber(c("LSReplyMessageAttachmentType").LINK))||(i||(i=d("I64"))).equal(E,(j||(j=d("LSIntEnum"))).ofNumber(c("LSReplyMessageAttachmentType").PERMANENT_RAVEN_PHOTO))||(i||(i=d("I64"))).equal(E,(j||(j=d("LSIntEnum"))).ofNumber(c("LSReplyMessageAttachmentType").PERMANENT_RAVEN_VIDEO))||(i||(i=d("I64"))).equal(E,(j||(j=d("LSIntEnum"))).ofNumber(c("LSReplyMessageAttachmentType").AUDIO))){b[100]!==p||b[101]!==g||b[102]!==h||b[103]!==m||b[104]!==o?(x=l.jsx(p,{isSecureMessage:g,mediaRenderQpl:h,message:m,outgoing:o}),b[100]=p,b[101]=g,b[102]=h,b[103]=m,b[104]=o,b[105]=x):x=b[105];f=x}else if(u!=null){b[106]!==u||b[107]!==g||b[108]!==h||b[109]!==m||b[110]!==o?(s=l.jsx(u,{isSecureMessage:g,mediaRenderQpl:h,message:m,outgoing:o}),b[106]=u,b[107]=g,b[108]=h,b[109]=m,b[110]=o,b[111]=s):s=b[111];f=s}else{G="Unknown attachment type: "+(i||(i=d("I64"))).to_string(E);b[112]!==G?(z=c("recoverableViolation")(G,"messenger_comet"),b[112]=G,b[113]=z):z=b[113];f=z}else if((i||(i=d("I64"))).equal(E,(j||(j=d("LSIntEnum"))).ofNumber(c("LSReplyMessageAttachmentType").STICKER))&&y!=null){b[114]!==y||b[115]!==g||b[116]!==h||b[117]!==m||b[118]!==o?(a=l.jsx(y,{isSecureMessage:g,mediaRenderQpl:h,message:m,outgoing:o}),b[114]=y,b[115]=g,b[116]=h,b[117]=m,b[118]=o,b[119]=a):a=b[119];f=a}else if(!C&&(i||(i=d("I64"))).equal(E,(j||(j=d("LSIntEnum"))).ofNumber(c("LSReplyMessageAttachmentType").XMA))&&p!=null)if(F!=null&&F!==""){b[120]!==A||b[121]!==g||b[122]!==m||b[123]!==o||b[124]!==F?(q=l.jsx(A,{isSecureMessage:g,message:m,outgoing:o,text:F}),b[120]=A,b[121]=g,b[122]=m,b[123]=o,b[124]=F,b[125]=q):q=b[125];f=q}else{b[126]!==p||b[127]!==g||b[128]!==h||b[129]!==m||b[130]!==o?(x=l.jsx(p,{isSecureMessage:g,mediaRenderQpl:h,message:m,outgoing:o}),b[126]=p,b[127]=g,b[128]=h,b[129]=m,b[130]=o,b[131]=x):x=b[131];f=x}else f=null;else if(m.replySourceTypeV2!=null&&(i||(i=d("I64"))).equal(m.replySourceTypeV2,(j||(j=d("LSIntEnum"))).ofNumber(c("LSMessageReplySourceTypeV2").LIGHTWEIGHT_STATUS))&&F!=null&&F!==""){u=(i||(i=d("I64"))).of_float(Date.now());s=m.replyMediaExpirationTimestampMs;G=s!=null&&(i||(i=d("I64"))).gt(u,s)&&!(i||(i=d("I64"))).equal(s,(i||(i=d("I64"))).zero);if(c("justknobx")._("3188")&&G)f=null;else{b[132]!==A||b[133]!==g||b[134]!==m||b[135]!==o||b[136]!==F?(z=l.jsx(A,{isSecureMessage:g,message:m,outgoing:o,text:F}),b[132]=A,b[133]=g,b[134]=m,b[135]=o,b[136]=F,b[137]=z):z=b[137];f=z}}else if(D!=null)if(t!=null){b[138]!==t||b[139]!==g||b[140]!==h||b[141]!==m||b[142]!==o?(y=l.jsx(t,{isSecureMessage:g,mediaRenderQpl:h,message:m,outgoing:o}),b[138]=t,b[139]=g,b[140]=h,b[141]=m,b[142]=o,b[143]=y):y=b[143];f=y}else{b[144]!==p||b[145]!==g||b[146]!==h||b[147]!==m||b[148]!==o?(a=l.jsx(p,{isSecureMessage:g,mediaRenderQpl:h,message:m,outgoing:o}),b[144]=p,b[145]=g,b[146]=h,b[147]=m,b[148]=o,b[149]=a):a=b[149];f=a}else if(E!=null&&(i||(i=d("I64"))).equal(E,(j||(j=d("LSIntEnum"))).ofNumber(c("LSReplyMessageAttachmentType").EPHEMERAL_RAVEN_MESSAGE))&&v!=null){b[150]!==v||b[151]!==g||b[152]!==h||b[153]!==m||b[154]!==o?(C=l.jsx(v,{isSecureMessage:g,mediaRenderQpl:h,message:m,outgoing:o}),b[150]=v,b[151]=g,b[152]=h,b[153]=m,b[154]=o,b[155]=C):C=b[155];f=C}else if(m.replyStatus!=null&&(i||(i=d("I64"))).equal(m.replyStatus,(j||(j=d("LSIntEnum"))).ofNumber(c("LSReplyMessageStatus").DELETED)))if(w!=null){b[156]!==w||b[157]!==o?(q=l.jsx(w,{outgoing:o}),b[156]=w,b[157]=o,b[158]=q):q=b[158];f=q}else f=null;else if(m.replyStatus!=null&&(i||(i=d("I64"))).equal(m.replyStatus,(j||(j=d("LSIntEnum"))).ofNumber(c("LSReplyMessageStatus").EXPIRED)))if(r!=null){b[159]!==r||b[160]!==g||b[161]!==h||b[162]!==m||b[163]!==o?(x=l.jsx(r,{isSecureMessage:g,mediaRenderQpl:h,message:m,outgoing:o}),b[159]=r,b[160]=g,b[161]=h,b[162]=m,b[163]=o,b[164]=x):x=b[164];f=x}else f=null;else if(m.replyStatus!=null&&(i||(i=d("I64"))).equal(m.replyStatus,(j||(j=d("LSIntEnum"))).ofNumber(c("LSReplyMessageStatus").TEMPORARY_UNAVAILABLE)))if(B!=null){b[165]!==B||b[166]!==o?(u=l.jsx(B,{outgoing:o}),b[165]=B,b[166]=o,b[167]=u):u=b[167];f=u}else f=null;else if(F!=null&&m.replySourceTypeV2!=null&&(i||(i=d("I64"))).equal(m.replySourceTypeV2,(j||(j=d("LSIntEnum"))).ofNumber(c("LSMessageReplySourceTypeV2").MESSAGE)))if(F!==""){b[168]!==A||b[169]!==g||b[170]!==m||b[171]!==o||b[172]!==F?(s=l.jsx(A,{isSecureMessage:g,message:m,outgoing:o,text:F}),b[168]=A,b[169]=g,b[170]=m,b[171]=o,b[172]=F,b[173]=s):s=b[173];f=s}else{b[174]!==p||b[175]!==g||b[176]!==h||b[177]!==m||b[178]!==o?(G=l.jsx(p,{isSecureMessage:g,mediaRenderQpl:h,message:m,outgoing:o}),b[174]=p,b[175]=g,b[176]=h,b[177]=m,b[178]=o,b[179]=G):G=b[179];f=G}else f=null;b[180]===Symbol["for"]("react.memo_cache_sentinel")?(z="x193iq5w x1n2onr6 x1vjfegm",b[180]=z):z=b[180];b[181]!==f?(D=l.jsx("div",{className:z,children:f}),b[181]=f,b[182]=D):D=b[182];t=D;var H=m.replySourceTimestampMs,I=m.replySourceId,J=c("useMWJumpToMessage")("Pinned");y=E!=null&&((i||(i=d("I64"))).equal(E,(j||(j=d("LSIntEnum"))).ofNumber(c("LSReplyMessageAttachmentType").ROLL_CALL_PHOTO_CONTRIBUTION))||(i||(i=d("I64"))).equal(E,(j||(j=d("LSIntEnum"))).ofNumber(c("LSReplyMessageAttachmentType").ROLL_CALL_VIDEO_CONTRIBUTION))||(i||(i=d("I64"))).equal(E,(j||(j=d("LSIntEnum"))).ofNumber(c("LSReplyMessageAttachmentType").ROLL_CALL_TEXT_CONTRIBUTION)));var K=d("useRollcallContributionsXMAActionHandler").useRollcallContributionsXMAActionHandler();a=c("useIsRollcallEnabled")(m.threadKey);v=(j||(j=d("LSIntEnum"))).equal(m.replyAttachmentType,c("LSReplyMessageAttachmentType").ROLL_CALL_TEXT_CONTRIBUTION)&&!(j||(j=d("LSIntEnum"))).equal(m.replyAttachmentId,0);if(I!=null&&H!=null&&e&&!v){b[183]!==J||b[184]!==I||b[185]!==H?(C=function(){J(I,H)},b[183]=J,b[184]=I,b[185]=H,b[186]=C):C=b[186];w=C;if(y&&a){if(b[187]!==m.replyAttachmentExtra){r=(i||(i=d("I64"))).of_string((q=m.replyAttachmentExtra)!=null?q:"0");b[187]=m.replyAttachmentExtra;b[188]=r}else r=b[188];var L=r,M=m.threadKey,N=(x=m.replySourceId)!=null?x:null;b[189]!==K||b[190]!==L||b[191]!==M||b[192]!==N||b[193]!==m.messageId?(B=function(){K(L,M,N,null,m.messageId)},b[189]=K,b[190]=L,b[191]=M,b[192]=N,b[193]=m.messageId,b[194]=B):B=b[194];w=B}b[195]!==w||b[196]!==t?(u=l.jsx(c("MWXPressable.react"),{onPress:w,overlayDisabled:!0,xstyle:n,children:t}),b[195]=w,b[196]=t,b[197]=u):u=b[197];return u}else return t}function n(){return[m.pressable]}g["default"]=a}),98);
__d("MWXMessageReplyBubble.react",["fbt","CometScreenReaderText.react","MWXMessageBubble.react","MWXText.react","react","stylex"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=(j||(j=d("react"))).c,l=j,m={content:{overflowWrap:"x1mzt3pk",paddingBottom:"x1l90r2v",paddingTop:"x1iorvi4",$$css:!0},italic:{fontStyle:"x1k4tb9n",$$css:!0}};function a(a){var b=k(9),d=a.children,e=a.fontStyle;a=a.outgoing;e=e===void 0?"normal":e;a=a?"right":"left";var f;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(f=l.jsx(c("CometScreenReaderText.react"),{text:h._("__JHASH__pLiiclD1jc1__JHASH__")}),b[0]=f):f=b[0];e=e==="italic"&&m.italic;var g;b[1]!==e?(g=(i||(i=c("stylex")))(m.content,e),b[1]=e,b[2]=g):g=b[2];b[3]!==g||b[4]!==d?(e=l.jsx(c("MWXText.react"),{color:"secondary",type:"body4",children:l.jsx("div",{className:g,"data-testid":void 0,children:d})}),b[3]=g,b[4]=d,b[5]=e):e=b[5];b[6]!==a||b[7]!==e?(g=l.jsxs(c("MWXMessageBubble.react"),{align:a,color:"quoted",connectBottom:!0,connectTop:!1,precedesXMA:!1,children:[f,e]}),b[6]=a,b[7]=e,b[8]=g):g=b[8];return g}g["default"]=a}),226);
__d("MWRepliesAttachment.react",["fbt","ix","MWXIcon.react","MWXMessageReplyBubble.react","fbicon","react"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j,k=j||(j=d("react"));b=j;var l=b.useEffect,m=b.c;function a(a){var b=m(9),e=a.mediaRenderQpl;a=a.outgoing;var f,g;b[0]!==e?(f=function(){e==null?void 0:e.addPoint("render-replies-attachment")},g=[e],b[0]=e,b[1]=f,b[2]=g):(f=b[1],g=b[2]);l(f,g);b[3]===Symbol["for"]("react.memo_cache_sentinel")?(f=h._("__JHASH__ExfgVu3ZeIV__JHASH__"),b[3]=f):f=b[3];g=f;b[4]===Symbol["for"]("react.memo_cache_sentinel")?(f="x6s0dn4 x78zum5",b[4]=f):f=b[4];var j;b[5]===Symbol["for"]("react.memo_cache_sentinel")?(j="x1lliihq x1i64zmx",b[5]=j):j=b[5];b[6]===Symbol["for"]("react.memo_cache_sentinel")?(f=k.jsxs("div",{className:f,children:[g,k.jsx("span",{className:j,children:k.jsx(c("MWXIcon.react"),{color:"secondary",icon:d("fbicon")._(i("537728"),12)})})]}),b[6]=f):f=b[6];b[7]!==a?(g=k.jsx(c("MWXMessageReplyBubble.react"),{fontStyle:"italic",outgoing:a,children:f}),b[7]=a,b[8]=g):g=b[8];return g}g["default"]=a}),226);
__d("MWRepliesExpired.react",["fbt","MWXMessageReplyBubble.react","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||(i=d("react"));b=i;var k=b.useEffect,l=b.c;function a(a){var b=l(6),d=a.mediaRenderQpl;a=a.outgoing;var e,f;b[0]!==d?(e=function(){d==null?void 0:d.addPoint("render-replies-expired"),d==null?void 0:d.endSuccess()},f=[d],b[0]=d,b[1]=e,b[2]=f):(e=b[1],f=b[2]);k(e,f);b[3]===Symbol["for"]("react.memo_cache_sentinel")?(e=h._("__JHASH__LRWYiWT4b63__JHASH__"),b[3]=e):e=b[3];f=e;b[4]!==a?(e=j.jsx(c("MWXMessageReplyBubble.react"),{fontStyle:"italic",outgoing:a,children:f}),b[4]=a,b[5]=e):e=b[5];return e}g["default"]=a}),226);
__d("useMWRepliesImageGetMaxDimensions",["MWLSThreadDisplayContext","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).c;function a(){var a=i(2),b=d("MWLSThreadDisplayContext").useMWLSThreadDisplayContext();b=b==="ChatTab";b=b?180:300;var c;a[0]!==b?(c={maxHeight:100,maxWidth:b},a[0]=b,a[1]=c):c=a[1];return c}g["default"]=a}),98);
__d("MWRepliesImage.react",["I64","MWPThreadCapabilitiesContext","MWXMessageImage.react","cr:4509","gkx","react","useMWRepliesImageGetMaxDimensions"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=h||(h=d("react"));e=h;e.useCallback;var k=e.c,l={incoming:{borderBottomStartRadius:"x10y3i5r",$$css:!0},outgoing:{borderBottomEndRadius:"xrt01vj",$$css:!0},root:{borderTopStartRadius:"x1tlxs6b",borderTopEndRadius:"x1g8br2z",borderBottomEndRadius:"x1gn5b1j",borderBottomStartRadius:"x230xth",display:"x1lliihq",filter:"xin470k",overflowX:"x6ikm8r",overflowY:"x10wlt62",position:"x1n2onr6",width:"x14atkfc",$$css:!0},rootHasSticker:{borderTopStartRadius:"x168nmei",borderTopEndRadius:"x13lgxp2",borderBottomEndRadius:"x5pf9jr",borderBottomStartRadius:"xo71vjh",$$css:!0}};function a(a){var e=k(27),f=a.height,g=a.imageAlt,h=a.isSticker,m=a.mediaRenderQpl,n=a.outgoing,o=a.src;a=a.width;g=g===void 0?"":g;h=h===void 0?!1:h;var p=c("useMWRepliesImageGetMaxDimensions")(),q=d("MWPThreadCapabilitiesContext").useMWPThreadCapabilitiesContext();q=q.blurMediaEnabled;q=c("gkx")("24098")&&q;n=h?!1:n?l.outgoing:l.incoming;var r;e[0]!==m?(r=function(){m==null?void 0:m.endFail("load-image-error")},e[0]=m,e[1]=r):r=e[1];r=r;var s;e[2]!==m?(s=function(){m==null?void 0:m.endSuccess()},e[2]=m,e[3]=s):s=e[3];s=s;var t;e[4]!==f?(t=f!=null?(i||(i=d("I64"))).to_float(f):void 0,e[4]=f,e[5]=t):t=e[5];e[6]!==a?(f=a!=null?(i||(i=d("I64"))).to_float(a):void 0,e[6]=a,e[7]=f):f=e[7];a=h&&l.rootHasSticker;var u;e[8]!==a||e[9]!==n?(u=[l.root,a,n],e[8]=a,e[9]=n,e[10]=u):u=e[10];e[11]!==g||e[12]!==t||e[13]!==p.maxHeight||e[14]!==p.maxWidth||e[15]!==r||e[16]!==s||e[17]!==o||e[18]!==f||e[19]!==u?(a=j.jsx(c("MWXMessageImage.react"),{alt:g,height:t,maxHeight:p.maxHeight,maxWidth:p.maxWidth,onError:r,onLoad:s,src:o,width:f,xstyle:u}),e[11]=g,e[12]=t,e[13]=p.maxHeight,e[14]=p.maxWidth,e[15]=r,e[16]=s,e[17]=o,e[18]=f,e[19]=u,e[20]=a):a=e[20];g=a;if(b("cr:4509")!=null&&q&&!h){e[21]!==n?(t=[l.root,n],e[21]=n,e[22]=t):t=e[22];e[23]!==o||e[24]!==t||e[25]!==g?(p=j.jsx(b("cr:4509"),{mediaType:"Image",overlayDisabled:!0,type:"image",uncoverable:!1,url:o,xstyle:t,children:g}),e[23]=o,e[24]=t,e[25]=g,e[26]=p):p=e[26];return p}return g}g["default"]=a}),98);
__d("MWRepliesGIF.react",["fbt","CometPlaceholder.react","I64","LSMediaUrlAttachment","MAWGetIsMediaDownloadStatusEnabled","MWRepliesImage.react","MWXMessageReplyBubble.react","ReQL","ReQLSuspense","cr:9765","react","useMAWMediaStatusUIState","useReStore"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l=k||(k=d("react"));e=k;var m=e.useEffect,n=e.c;function o(a){var e=n(29),g=a.isSecureMessage,k=a.mediaRenderQpl,o=a.message;a=a.outgoing;g=g===void 0?!1:g;var p,q;e[0]!==k?(p=function(){k==null?void 0:k.addPoint("render-replies-gif-impl")},q=[k],e[0]=k,e[1]=p,e[2]=q):(p=e[1],q=e[2]);m(p,q);var r=(i||(i=c("useReStore")))();e[3]!==o.replyAttachmentPlaintextHash||e[4]!==o.replySourceId||e[5]!==o.replyAttachmentId||e[6]!==o.threadKey||e[7]!==r.tables.attachments?(p=function(){var a,b=(a=o.replyAttachmentPlaintextHash)!=null?a:null,c=(a=o.replySourceId)!=null?a:"";if(b!=null)return d("ReQL").fromTableAscending(r.tables.attachments).filter(function(a){return a.attachmentFbid===b&&a.messageId===c});else{a=(a=o.replyAttachmentId)!=null?a:(j||(j=d("I64"))).zero;return d("ReQL").fromTableAscending(r.tables.attachments).getKeyRange(o.threadKey,c,(j||(j=d("I64"))).to_string(a))}},e[3]=o.replyAttachmentPlaintextHash,e[4]=o.replySourceId,e[5]=o.replyAttachmentId,e[6]=o.threadKey,e[7]=r.tables.attachments,e[8]=p):p=e[8];e[9]!==r||e[10]!==o?(q=[r,o],e[9]=r,e[10]=o,e[11]=q):q=e[11];p=d("ReQLSuspense").useFirst(p,q,f.id+":48");e[12]!==g||e[13]!==p?(q=g&&d("MAWGetIsMediaDownloadStatusEnabled").getIsMediaDownloadStatusEnabled()?p:null,e[12]=g,e[13]=p,e[14]=q):q=e[14];q=q;q=c("useMAWMediaStatusUIState")(q,k);q=q.downloadStatus;var s;if(p!=null)if(q!=="downloaded"&&g&&d("MAWGetIsMediaDownloadStatusEnabled").getIsMediaDownloadStatusEnabled())s=null;else if(b("cr:9765")==null||!g){e[15]!==p?(q=d("LSMediaUrlAttachment").previewUrl(p),e[15]=p,e[16]=q):q=e[16];s=q}else{e[17]!==p.attachmentFbid||e[18]!==k?(g=b("cr:9765").getAttachmentBlobNonOptional(p.attachmentFbid,"MWRepliesGIF",k),e[17]=p.attachmentFbid,e[18]=k,e[19]=g):g=e[19];s=g}if(s!=null&&s!==""){e[20]!==o.replyMediaPreviewHeight||e[21]!==o.replyMediaPreviewWidth||e[22]!==k||e[23]!==a||e[24]!==s?(q=l.jsx(c("MWRepliesImage.react"),{height:o.replyMediaPreviewHeight,mediaRenderQpl:k,outgoing:a,src:s,width:o.replyMediaPreviewWidth}),e[20]=o.replyMediaPreviewHeight,e[21]=o.replyMediaPreviewWidth,e[22]=k,e[23]=a,e[24]=s,e[25]=q):q=e[25];return q}else{e[26]===Symbol["for"]("react.memo_cache_sentinel")?(p=h._("__JHASH__kPmtZiB6viN__JHASH__"),e[26]=p):p=e[26];e[27]!==a?(g=l.jsx(c("MWXMessageReplyBubble.react"),{fontStyle:"italic",outgoing:a,children:p}),e[27]=a,e[28]=g):g=e[28];return g}}function a(a){var b=n(7),d;b[0]!==a?(d=babelHelpers["extends"]({},a),b[0]=a,b[1]=d):d=b[1];var e;b[2]!==d.mediaRenderQpl?(a=function(){var a;(a=d.mediaRenderQpl)==null?void 0:a.addPoint("render-replies-gif")},e=[d.mediaRenderQpl],b[2]=d.mediaRenderQpl,b[3]=a,b[4]=e):(a=b[3],e=b[4]);m(a,e);b[5]!==d?(a=l.jsx(c("CometPlaceholder.react"),{fallback:null,name:"MWRepliesGIF",children:l.jsx(o,babelHelpers["extends"]({},d))}),b[5]=d,b[6]=a):a=b[6];return a}g["default"]=a}),226);
__d("getLSMediaMessageReplyMediaUrl",["LSMediaUrlUtils"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=a.replyMediaExpirationTimestampMs;if(b!=null&&d("LSMediaUrlUtils").isTimestampExpired(b))return a.replyMediaUrlFallback;else return a.replyMediaUrl}g["default"]=a}),98);
__d("MWRepliesMedia.react",["fbt","ix","CometHeroHoldTrigger.react","CometPlaceholder.react","FDSIcon.react","I64","IconSource","MAWGetIsMediaDownloadStatusEnabled","MWRepliesImage.react","MWV2AttachmentLoadingPlaceholder.react","MWXMessageReplyBubble.react","ReQL","ReQLSuspense","WAArmadilloXMA.pb","cr:9765","getLSMediaMessageReplyMediaUrl","react","useMAWMediaStatusUIState","useMWRepliesImageGetMaxDimensions","useReStore"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j,k,l,m=l||(l=d("react"));e=l;var n=e.useEffect,o=e.c;function p(a){var e=o(56),g=a.isSecureMessage,l=a.mediaRenderQpl,p=a.message;a=a.outgoing;g=g===void 0?!1:g;var q;e[0]===Symbol["for"]("react.memo_cache_sentinel")?(q=h._("__JHASH__bznTdd53oJN__JHASH__"),e[0]=q):q=e[0];q=q;e[1]!==a?(q=m.jsx(c("MWXMessageReplyBubble.react"),{fontStyle:"italic",outgoing:a,children:q}),e[1]=a,e[2]=q):q=e[2];q=q;var r=(j||(j=c("useReStore")))(),s;e[3]!==p.replySourceId||e[4]!==p.replyAttachmentPlaintextHash||e[5]!==p.replyAttachmentId||e[6]!==p.threadKey||e[7]!==r?(s=function(){var a=p.replySourceId;if(a!=null)if(p.replyAttachmentPlaintextHash!=null){var b=p.replyAttachmentPlaintextHash;return d("ReQL").fromTableAscending(r.tables.attachments).filter(function(c){return c.attachmentFbid===b&&c.messageId===a})}else if(p.replyAttachmentId!=null){var c=p.replyAttachmentId;return d("ReQL").fromTableAscending(r.tables.attachments).getKeyRange(p.threadKey,a,(k||(k=d("I64"))).to_string(c))}return d("ReQL").empty()},e[3]=p.replySourceId,e[4]=p.replyAttachmentPlaintextHash,e[5]=p.replyAttachmentId,e[6]=p.threadKey,e[7]=r,e[8]=s):s=e[8];var t;e[9]!==r||e[10]!==p?(t=[r,p],e[9]=r,e[10]=p,e[11]=t):t=e[11];var u=d("ReQLSuspense").useFirst(s,t,f.id+":95");e[12]!==u||e[13]!==l?(s=function(){u!=null&&(l==null?void 0:l.addAttachmentAnnotations==null?void 0:l.addAttachmentAnnotations(u)),l==null?void 0:l.addPoint("render-reply-media-impl",{bool:{has_db_attachment:u!=null}})},t=[u,l],e[12]=u,e[13]=l,e[14]=s,e[15]=t):(s=e[14],t=e[15]);n(s,t);s=c("useMWRepliesImageGetMaxDimensions")();e[16]!==g||e[17]!==u?(t=g&&d("MAWGetIsMediaDownloadStatusEnabled").getIsMediaDownloadStatusEnabled()?u:null,e[16]=g,e[17]=u,e[18]=t):t=e[18];t=t;var v=c("useMAWMediaStatusUIState")(t,l);v=v.downloadStatus;if(t!=null&&v!=="downloaded")return q;t=u!=null&&u.hasXma&&g&&u.gatingType===String(d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_OVERLAY_ICON_GLYPH.PRIVATE);if(u!=null&&u.hasXma&&g){v=(v=u.defaultCtaType)!=null?v:""}else v="";var w;e[19]===Symbol["for"]("react.memo_cache_sentinel")?(w=new(c("IconSource"))("FB",i("1423124"),28),e[19]=w):w=e[19];w=w;if(t)if(v==="xma_montage_share"){e[20]===Symbol["for"]("react.memo_cache_sentinel")?(t="x6s0dn4 x1qb2erx xjw5052 xyi19xy x1ccrb07 xtf3nb5 x1pc53ja x78zum5 xdt5ytf x1wkxgih xl56j7k x197sbye x2b8uid xni59qk",v="x14vqqas xq8finb xod5an3 x16n37ib",e[20]=t,e[21]=v):(t=e[20],v=e[21]);e[22]!==w?(t=m.jsx("div",{className:t,children:m.jsx("div",{className:v,children:m.jsx(c("FDSIcon.react"),{icon:w})})}),e[22]=w,e[23]=t):t=e[23];return t}else{e[24]===Symbol["for"]("react.memo_cache_sentinel")?(v="x6s0dn4 x99fzhk x18aeczl x1tlxs6b x1g8br2z x1gn5b1j x230xth x78zum5 xdt5ytf xpyat2d xl56j7k x2b8uid x1exxlbk",t="x14vqqas xq8finb xod5an3 x16n37ib",e[24]=v,e[25]=t):(v=e[24],t=e[25]);e[26]!==w?(v=m.jsx("div",{className:v,children:m.jsx("div",{className:t,children:m.jsx(c("FDSIcon.react"),{icon:w})})}),e[26]=w,e[27]=v):v=e[27];return v}if(g&&(u==null?void 0:u.hasMedia)===!1){if(e[28]!==p.replyMediaPreviewHeight){w=(k||(k=d("I64"))).to_float((t=p.replyMediaPreviewHeight)!=null?t:(k||(k=d("I64"))).of_float(100));e[28]=p.replyMediaPreviewHeight;e[29]=w}else w=e[29];v=s.maxHeight;t=s.maxWidth;if(e[30]!==p.replyMediaPreviewWidth){var x;x=(k||(k=d("I64"))).to_float((x=p.replyMediaPreviewWidth)!=null?x:(k||(k=d("I64"))).of_float(100));e[30]=p.replyMediaPreviewWidth;e[31]=x}else x=e[31];e[32]!==w||e[33]!==s.maxHeight||e[34]!==s.maxWidth||e[35]!==l||e[36]!==a||e[37]!==x?(v=m.jsx(c("MWV2AttachmentLoadingPlaceholder.react"),{descriptionForLogging:"MWRepliesMedia.NoMedia",height:w,maxHeight:v,maxWidth:t,mediaRenderQpl:l,outgoing:a,width:x}),e[32]=w,e[33]=s.maxHeight,e[34]=s.maxWidth,e[35]=l,e[36]=a,e[37]=x,e[38]=v):v=e[38];e[39]===Symbol["for"]("react.memo_cache_sentinel")?(t=m.jsx(c("CometHeroHoldTrigger.react"),{description:"MWRepliesMedia.NoMedia",hold:!0}),e[39]=t):t=e[39];e[40]!==v?(w=m.jsxs(m.Fragment,{children:[v,t]}),e[40]=v,e[41]=w):w=e[41];return w}e[42]!==g||e[43]!==u||e[44]!==l?(s=b("cr:9765")!=null&&g?function(a){if(u!=null&&u.hasXma){l==null?void 0:l.addPoint("fetch_reply_preview_url_xma_start");var c=a.replyAttachmentId!=null?b("cr:9765").getInfoUrlXMA(u,"preview","MWRepliesMedia",l):void 0;l==null?void 0:l.addPoint("fetch_reply_preview_url_xma_end",{bool:{has_url:Boolean(c)},string:{fetch_by:"maw_backend"}});return c}if(a.replyAttachmentPlaintextHash!=null){l==null?void 0:l.addPoint("fetch_reply_preview_url_media_start",{string:{fetch_by:"plaintextHash"}});c=a.replyAttachmentPlaintextHash!=null?b("cr:9765").getAttachmentBlobNonOptional(a.replyAttachmentPlaintextHash,"MWRepliesMedia",l):void 0;l==null?void 0:l.addPoint("fetch_reply_preview_url_media_end",{bool:{has_url:Boolean(c)},string:{fetch_by:"plaintextHash"}});return c}else{l==null?void 0:l.addPoint("fetch_reply_preview_url_media_start",{string:{fetch_by:"mediaId"}});c=a.replyAttachmentId!=null?b("cr:9765").getAttachmentBlobNonOptional((k||(k=d("I64"))).to_string(a.replyAttachmentId),"MWRepliesMedia",l):void 0;l==null?void 0:l.addPoint("fetch_reply_preview_url_media_end",{bool:{has_url:Boolean(c)},string:{fetch_by:"mediaId"}});return c}}:c("getLSMediaMessageReplyMediaUrl"),e[42]=g,e[43]=u,e[44]=l,e[45]=s):s=e[45];x=s;e[46]!==x||e[47]!==p?(t=x(p),e[46]=x,e[47]=p,e[48]=t):t=e[48];v=t;if(v!=null&&v!==""){w=p.replyMediaPreviewHeight;e[49]===Symbol["for"]("react.memo_cache_sentinel")?(g=h._("__JHASH__eNDXc9eUfIy__JHASH__"),e[49]=g):g=e[49];e[50]!==p.replyMediaPreviewHeight||e[51]!==p.replyMediaPreviewWidth||e[52]!==l||e[53]!==a||e[54]!==v?(s=m.jsx(c("MWRepliesImage.react"),{height:w,imageAlt:g,mediaRenderQpl:l,outgoing:a,src:v,width:p.replyMediaPreviewWidth}),e[50]=p.replyMediaPreviewHeight,e[51]=p.replyMediaPreviewWidth,e[52]=l,e[53]=a,e[54]=v,e[55]=s):s=e[55];return s}return q}function a(a){var b=o(21),e=a.isSecureMessage,f=a.mediaRenderQpl,g=a.message;a=a.outgoing;e=e===void 0?!1:e;var h,i;b[0]!==f?(h=function(){f==null?void 0:f.addPoint("render-replies-media")},i=[f],b[0]=f,b[1]=h,b[2]=i):(h=b[1],i=b[2]);n(h,i);h=c("useMWRepliesImageGetMaxDimensions")();if(b[3]!==g.replyMediaPreviewHeight){i=(k||(k=d("I64"))).to_float((i=g.replyMediaPreviewHeight)!=null?i:(k||(k=d("I64"))).of_float(100));b[3]=g.replyMediaPreviewHeight;b[4]=i}else i=b[4];var j=h.maxHeight,l=h.maxWidth;if(b[5]!==g.replyMediaPreviewWidth){var q;q=(k||(k=d("I64"))).to_float((q=g.replyMediaPreviewWidth)!=null?q:(k||(k=d("I64"))).of_float(100));b[5]=g.replyMediaPreviewWidth;b[6]=q}else q=b[6];b[7]!==i||b[8]!==h.maxHeight||b[9]!==h.maxWidth||b[10]!==a||b[11]!==q?(j=m.jsx(c("MWV2AttachmentLoadingPlaceholder.react"),{descriptionForLogging:"MWRepliesMedia.Suspense",height:i,maxHeight:j,maxWidth:l,outgoing:a,width:q}),b[7]=i,b[8]=h.maxHeight,b[9]=h.maxWidth,b[10]=a,b[11]=q,b[12]=j):j=b[12];b[13]!==e||b[14]!==f||b[15]!==g||b[16]!==a?(l=m.jsx(p,{isSecureMessage:e,mediaRenderQpl:f,message:g,outgoing:a}),b[13]=e,b[14]=f,b[15]=g,b[16]=a,b[17]=l):l=b[17];b[18]!==j||b[19]!==l?(i=m.jsx(c("CometPlaceholder.react"),{fallback:j,name:"MWRepliesMedia.Suspense",children:l}),b[18]=j,b[19]=l,b[20]=i):i=b[20];return i}g["default"]=a}),226);
__d("MWRepliesRemoved.react",["fbt","MWXMessageReplyBubble.react","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=(i||(i=d("react"))).c,k=i;function a(a){var b=j(3);a=a.outgoing;var d;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(d=h._("__JHASH__uG4wbYWD9QU__JHASH__"),b[0]=d):d=b[0];d=d;b[1]!==a?(d=k.jsx(c("MWXMessageReplyBubble.react"),{fontStyle:"italic",outgoing:a,children:d}),b[1]=a,b[2]=d):d=b[2];return d}g["default"]=a}),226);
__d("MWRepliesRollcallContribution.react",["fbt","CometBlurredBackgroundImage.react","CometPlaceholder.react","FDSImageCover.react","I64","Int64Hooks","LSFactory","LSIntEnum","LSIssuePointQueryForRollCallConversionStoredProcedure","LSReplyMessageAttachmentType","MWXMessageReplyBubble.react","MWXProfilePhoto.react","MWXText.react","ReQL","ReQLSuspense","cr:2472","getLSMediaMessageReplyMediaUrl","isStringNullOrEmpty","promiseDone","react","stylex","useJSON","useReStore"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l,m,n=k||(k=d("react"));e=k;var o=e.useEffect,p=e.c,q=213,r=213,s={blurredImage:{borderTopStartRadius:"x1tlxs6b",borderTopEndRadius:"x1g8br2z",borderBottomEndRadius:"x1gn5b1j",borderBottomStartRadius:"x230xth",$$css:!0},outgoing:{borderBottomEndRadius:"xrt01vj",borderBottomStartRadius:"x230xth",$$css:!0},unblurredImageContainer:{borderTopStartRadius:"x1tlxs6b",borderTopEndRadius:"x1g8br2z",borderBottomEndRadius:"x1gn5b1j",borderBottomStartRadius:"x230xth",opacity:"x197sbye",overflowX:"x6ikm8r",overflowY:"x10wlt62",$$css:!0}},t=function(a){a=c("isStringNullOrEmpty")(a.replyMessageText)?h._("__JHASH__YG4J77RBBDH__JHASH__"):b("cr:2472")==null?a.replyMessageText:b("cr:2472").unvault(a.replyMessageText);return a};function a(a){var b=p(11),e;b[0]!==a?(e=babelHelpers["extends"]({},a),b[0]=a,b[1]=e):e=b[1];var f;b[2]!==e.mediaRenderQpl?(a=function(){var a;(a=e.mediaRenderQpl)==null?void 0:a.addPoint("render-replies-rollcall-contribution")},f=[e.mediaRenderQpl],b[2]=e.mediaRenderQpl,b[3]=a,b[4]=f):(a=b[3],f=b[4]);o(a,f);a=e;f=a.message;b[5]!==f.replyAttachmentType||b[6]!==f.replyAttachmentId?(a=(m||(m=d("LSIntEnum"))).equal(f.replyAttachmentType,c("LSReplyMessageAttachmentType").ROLL_CALL_TEXT_CONTRIBUTION)&&!(m||(m=d("LSIntEnum"))).equal(f.replyAttachmentId,0),b[5]=f.replyAttachmentType,b[6]=f.replyAttachmentId,b[7]=a):a=b[7];f=a;b[8]!==f||b[9]!==e?(a=n.jsx(c("CometPlaceholder.react"),{fallback:null,name:"MWRepliesRollcallContribution",children:f?n.jsx(u,babelHelpers["extends"]({},e)):n.jsx(v,babelHelpers["extends"]({},e))}),b[8]=f,b[9]=e,b[10]=a):a=b[10];return a}function u(a){var b=p(16),d=a.message;a=a.outgoing;var e;b[0]!==d?(e=t(d),b[0]=d,b[1]=e):e=b[1];e=e;d=c("useJSON")((d=d.replyAttachmentExtra)!=null?d:"{}");var f=d.avatar_height,g=d.avatar_url,h=d.avatar_width;d=d.owner_name;var i;b[2]===Symbol["for"]("react.memo_cache_sentinel")?(i="x6s0dn4 x78zum5 x1nhvcw1 x1gslohp x12nagc",b[2]=i):i=b[2];var j;b[3]!==g||b[4]!==f||b[5]!==h?(j=g!=null&&n.jsx("div",{className:"x1emribx",children:n.jsx(c("MWXProfilePhoto.react"),{"aria-label":"",size:24,source:{height:f,uri:g,width:h}})}),b[3]=g,b[4]=f,b[5]=h,b[6]=j):j=b[6];b[7]!==d?(g=d!=null&&n.jsx(c("MWXText.react"),{type:"meta2",children:d}),b[7]=d,b[8]=g):g=b[8];b[9]!==j||b[10]!==g?(f=n.jsxs("div",{className:i,children:[j,g]}),b[9]=j,b[10]=g,b[11]=f):f=b[11];b[12]!==a||b[13]!==f||b[14]!==e?(h=n.jsxs(c("MWXMessageReplyBubble.react"),{outgoing:a,children:[f,e]}),b[12]=a,b[13]=f,b[14]=e,b[15]=h):h=b[15];return h}function v(a){var b=p(45),e=a.mediaRenderQpl,g=a.message;a=a.outgoing;var h,k;b[0]!==e?(h=function(){e==null?void 0:e.addPoint("render-replies-rollcall-contribution-impl")},k=[e],b[0]=e,b[1]=h,b[2]=k):(h=b[1],k=b[2]);o(h,k);b[3]!==g?(h=t(g),b[3]=g,b[4]=h):h=b[4];k=h;var m=(i||(i=c("useReStore")))();if(b[5]!==g.replyAttachmentExtra){h=(l||(l=d("I64"))).of_string((h=g.replyAttachmentExtra)!=null?h:"0");b[5]=g.replyAttachmentExtra;b[6]=h}else h=b[6];var u=h;b[7]!==m.tables.roll_calls||b[8]!==u?(h=function(){return d("ReQL").fromTableAscending(m.tables.roll_calls).getKeyRange(u)},b[7]=m.tables.roll_calls,b[8]=u,b[9]=h):h=b[9];var v;b[10]!==m||b[11]!==u?(v=[m,u],b[10]=m,b[11]=u,b[12]=v):v=b[12];var w=d("ReQLSuspense").useFirst(h,v,f.id+":158"),x=g.threadKey;b[13]!==w||b[14]!==m||b[15]!==u||b[16]!==x?(h=function(){w||c("promiseDone")(m.runInTransaction(function(a){return c("LSIssuePointQueryForRollCallConversionStoredProcedure")(c("LSFactory")(a),{rollCallId:u,threadKey:x})},"readwrite",void 0,void 0,f.id+":167"))},v=[w,u,x,m],b[13]=w,b[14]=m,b[15]=u,b[16]=x,b[17]=h,b[18]=v):(h=b[17],v=b[18]);d("Int64Hooks").useEffectInt64(h,v);v=(h=w==null?void 0:w.isBlurred)!=null?h:!1;if(b[19]!==g){h=c("getLSMediaMessageReplyMediaUrl")(g);var y;b[24]!==g.replyMediaPreviewHeight?(y=g.replyMediaPreviewHeight!=null?(l||(l=d("I64"))).to_float(g.replyMediaPreviewHeight):0,b[24]=g.replyMediaPreviewHeight,b[25]=y):y=b[25];y=y;var z;b[26]!==g.replyMediaPreviewWidth?(z=g.replyMediaPreviewWidth!=null?(l||(l=d("I64"))).to_float(g.replyMediaPreviewWidth):0,b[26]=g.replyMediaPreviewWidth,b[27]=z):z=b[27];z=z;var A=Math.min(1,q/y),B=Math.min(1,r/z),C;b[28]!==A||b[29]!==B||b[30]!==y?(C=Math.round(y*Math.min(A,B)),b[28]=A,b[29]=B,b[30]=y,b[31]=C):C=b[31];y=C;b[32]!==A||b[33]!==B||b[34]!==z?(C=Math.round(z*Math.min(A,B)),b[32]=A,b[33]=B,b[34]=z,b[35]=C):C=b[35];A=C;B=c("isStringNullOrEmpty")(h);b[19]=g;b[20]=B;b[21]=y;b[22]=A;b[23]=h}else B=b[20],y=b[21],A=b[22],h=b[23];if(!B){b[36]!==v||b[37]!==y||b[38]!==A||b[39]!==a||b[40]!==h?(z=v?n.jsx("div",{style:{height:y,width:A},children:n.jsx(c("CometBlurredBackgroundImage.react"),{src:h,xstyle:[s.blurredImage,a&&s.outgoing]})}):n.jsx("div",{className:(j||(j=c("stylex")))([s.unblurredImageContainer,a&&s.outgoing]),style:{height:y,width:A},children:n.jsx(c("FDSImageCover.react"),{alt:"",src:h})}),b[36]=v,b[37]=y,b[38]=A,b[39]=a,b[40]=h,b[41]=z):z=b[41];return z}b[42]!==a||b[43]!==k?(C=n.jsx(c("MWXMessageReplyBubble.react"),{outgoing:a,children:k}),b[42]=a,b[43]=k,b[44]=C):C=b[44];return C}g["default"]=a}),226);
__d("useIssueMediaReceiverFetchTask",["FBLogger","Int64Hooks","LSMediaUrlUtils","MAWGetIsMediaDownloadStatusEnabled","MAWIssueReceiverFetchTask","MAWMediaDownloadStatus","MAWStateContext.react","WAHashUtils","clearTimeout","gkx","justknobx","promiseDone","react","react-forget-runtime","setTimeout","useAsyncReStore"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");b.useContext;var i=b.useEffect,j=b.useRef,k=b.c,l=c("justknobx")._("3314");function a(a,b,e,f,g,h,n,o,p){var q=k(27),r=d("react-forget-runtime").useContextWithBailoutExperiment__unstable(d("MAWStateContext.react").MAWStateContext,m),s=r.dispatch,t=c("useAsyncReStore")(),u=j(!1);q[0]!==n||q[1]!==o?(r=d("LSMediaUrlUtils").hasValidReceiverFetchPreviewUrl(n,o),q[0]=n,q[1]=o,q[2]=r):r=q[2];var v=r,w=j(null);q[3]!==v?(n=function(){var a=w.current;v&&c("clearTimeout")(a);return function(){c("clearTimeout")(a)}},o=[v],q[3]=v,q[4]=n,q[5]=o):(n=q[4],o=q[5]);i(n,o);q[6]!==g||q[7]!==a||q[8]!==f||q[9]!==b||q[10]!==v||q[11]!==h||q[12]!==s||q[13]!==t||q[14]!==e?(r=function(){if(!g||!a||f==null||b==null||u.current||v||!c("gkx")("5624"))return;u.current=!0;h==null?void 0:h.addPoint("media_receiver_fetch_task_start");var i=function(a){s({tag:"UpdateMediaStatus",value:{details:a,key:d("WAHashUtils").stringToPlaintextHash(b),status:c("MAWMediaDownloadStatus").MANUAL_RETRYABLE_FAILURE,type:"main"}})};c("promiseDone")(t,function(a){d("MAWIssueReceiverFetchTask").issueReceiverFetchTask(a,b,f,e,s),c("justknobx")._("3315")&&(w.current=c("setTimeout")(function(){d("MAWGetIsMediaDownloadStatusEnabled").getIsMediaDownloadStatusEnabled()&&(h==null?void 0:h.addPoint("media_receiver_fetch_task_timeout"),i("media_receiver_fetch_task_timeout"))},l))},function(a){c("clearTimeout")(w.current),d("MAWGetIsMediaDownloadStatusEnabled").getIsMediaDownloadStatusEnabled()?(h==null?void 0:h.addPoint("media_receiver_fetch_task_fail"),i("media_receiver_fetch_task_fail")):h==null?void 0:h.endFail("media_receiver_fetch_task_fail"),c("FBLogger")("messenger_web_media").catching(a).warn("Failed to issue media receiver fetch task on mount")})},q[6]=g,q[7]=a,q[8]=f,q[9]=b,q[10]=v,q[11]=h,q[12]=s,q[13]=t,q[14]=e,q[15]=r):r=q[15];q[16]!==t||q[17]!==v||q[18]!==s||q[19]!==g||q[20]!==h||q[21]!==b||q[22]!==f||q[23]!==e||q[24]!==a||q[25]!==p?(n=[t,v,s,g,h,b,f,e,a,p],q[16]=t,q[17]=v,q[18]=s,q[19]=g,q[20]=h,q[21]=b,q[22]=f,q[23]=e,q[24]=a,q[25]=p,q[26]=n):n=q[26];d("Int64Hooks").useEffectInt64(r,n)}function m(a){return[a.dispatch]}g["default"]=a}),98);
__d("MWRepliesSticker.react",["fbt","CometPlaceholder.react","I64","LSHotEmojiSize","LSMediaUrlAttachment","MAWGetIsMediaDownloadStatusEnabled","MWRepliesImage.react","MWV2ChatEmojiHotLike.react","MWV2Sticker.react","MWXMessageReplyBubble.react","ReQL","ReQLSuspense","cr:2472","cr:9765","getLSMediaMessageReplyMediaUrl","gkx","isReceiverFetchSticker","qex","react","useIssueMediaReceiverFetchTask","useMAWMediaStatusUIState","useReStore"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l=k||(k=d("react"));e=k;var m=e.useEffect,n=e.c,o={replyHotLikeSticker:{filter:"xin470k",transform:"xst6bnn",$$css:!0},replyHotLikeStickerV2:{filter:"xin470k",height:"x10w6t97",marginBottom:"x12nagc",width:"x1td3qas",$$css:!0},replySticker:{filter:"xin470k",$$css:!0}};function a(a){var e=n(36),g=a.isSecureMessage,k=a.mediaRenderQpl,q=a.message;a=a.outgoing;g=g===void 0?!1:g;var r;e[0]===Symbol["for"]("react.memo_cache_sentinel")?(r=h._("__JHASH__13yhS1gywbZ__JHASH__"),e[0]=r):r=e[0];r=r;e[1]!==a?(r=l.jsx(c("MWXMessageReplyBubble.react"),{fontStyle:"italic",outgoing:a,children:r}),e[1]=a,e[2]=r):r=e[2];r=r;var s=(i||(i=c("useReStore")))(),t;e[3]!==q.replyAttachmentPlaintextHash||e[4]!==q.replySourceId||e[5]!==q.replyAttachmentId||e[6]!==q.threadKey||e[7]!==s?(t=function(){var a=q.replyAttachmentPlaintextHash,b=q.replySourceId;if(a!=null&&b!=null)return d("ReQL").fromTableAscending(s.tables.attachments).filter(function(c){return c.attachmentFbid===a&&c.messageId===b});else{var c=q.replyAttachmentId;if(c!=null&&b!=null)return d("ReQL").fromTableAscending(s.tables.attachments).getKeyRange(q.threadKey,b,(j||(j=d("I64"))).to_string(c))}return d("ReQL").empty()},e[3]=q.replyAttachmentPlaintextHash,e[4]=q.replySourceId,e[5]=q.replyAttachmentId,e[6]=q.threadKey,e[7]=s,e[8]=t):t=e[8];var u;e[9]!==s||e[10]!==q?(u=[s,q],e[9]=s,e[10]=q,e[11]=u):u=e[11];var v=d("ReQLSuspense").useFirst(t,u,f.id+":81");e[12]!==v?(t=v?c("isReceiverFetchSticker")(v):!1,e[12]=v,e[13]=t):t=e[13];c("useIssueMediaReceiverFetchTask")(t,q.replySourceId,q.threadKey,v==null?void 0:v.receiverFetchId,g,k,v==null?void 0:v.previewUrl,v==null?void 0:v.previewUrlExpirationTimestampMs,v==null?void 0:v.attachmentType);e[14]!==v||e[15]!==k?(u=function(){v!=null&&(k==null?void 0:k.addAttachmentAnnotations==null?void 0:k.addAttachmentAnnotations(v)),k==null?void 0:k.addPoint("render-replies-sticker",{bool:{has_db_attachment:v!=null}})},t=[v,k],e[14]=v,e[15]=k,e[16]=u,e[17]=t):(u=e[16],t=e[17]);m(u,t);e[18]!==g||e[19]!==v?(u=g&&d("MAWGetIsMediaDownloadStatusEnabled").getIsMediaDownloadStatusEnabled()?v:null,e[18]=g,e[19]=v,e[20]=u):u=e[20];t=u;u=c("useMAWMediaStatusUIState")(t,k);u=u.downloadStatus;if(t!=null&&u!=="downloaded")return r;u=(t=q.replyMessageText)!=null?t:"";t=(b("cr:2472")!=null?b("cr:2472").unvault(u):u)==="\ud83d\udc4d";if(t){e[21]===Symbol["for"]("react.memo_cache_sentinel")?(u=l.jsx(c("MWV2ChatEmojiHotLike.react"),{hotEmojiSize:c("LSHotEmojiSize").NONE,xstyle:!c("gkx")("23249")&&c("qex")._("131")===!0?o.replyHotLikeStickerV2:o.replyHotLikeSticker}),e[21]=u):u=e[21];return u}e[22]!==q?(t=c("getLSMediaMessageReplyMediaUrl")(q),e[22]=q,e[23]=t):t=e[23];u=t;if(u!=null&&v==null){e[24]!==q.replyMediaPreviewHeight||e[25]!==q.replyMediaPreviewWidth||e[26]!==k||e[27]!==a||e[28]!==u?(t=l.jsx(c("MWRepliesImage.react"),{height:q.replyMediaPreviewHeight,isSticker:!0,mediaRenderQpl:k,outgoing:a,src:u,width:q.replyMediaPreviewWidth}),e[24]=q.replyMediaPreviewHeight,e[25]=q.replyMediaPreviewWidth,e[26]=k,e[27]=a,e[28]=u,e[29]=t):t=e[29];return t}if(v==null)return r;if(b("cr:9765")==null||!g||v.receiverFetchId!=null)a=p;else{e[30]!==k?(u=function(a){return b("cr:9765").getAttachmentBlobNonOptional(a.attachmentFbid,"MWRepliesSticker",k)},e[30]=k,e[31]=u):u=e[31];a=u}e[32]!==v||e[33]!==a||e[34]!==k?(t=l.jsx(c("CometPlaceholder.react"),{fallback:null,name:"MWRepliesSticker",children:l.jsx(c("MWV2Sticker.react"),{attachment:v,getPreviewUrl:a,mediaRenderQpl:k,scale:.6,xstyle:o.replySticker})}),e[32]=v,e[33]=a,e[34]=k,e[35]=t):t=e[35];return t}function p(a){return d("LSMediaUrlAttachment").previewUrl(a)}g["default"]=a}),226);
__d("MWRepliesStory.react",["fbt","CometPlaceholder.react","FBLogger","I64","Int64Hooks","LSIntEnum","LSXmaContentType","MWMediaRenderQplUtils","MWRepliesImage.react","MWXPressable.react","XCometStoriesControllerRouteBuilder","cr:9765","getLSMediaMessageReplyMediaUrl","gkx","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l=i||(i=d("react"));e=i;var m=e.useEffect,n=e.c;function a(a){var b=n(7),d;b[0]!==a?(d=babelHelpers["extends"]({},a),b[0]=a,b[1]=d):d=b[1];var e;b[2]!==d.mediaRenderQpl?(a=function(){var a;(a=d.mediaRenderQpl)==null?void 0:a.addPoint("render-replies-story")},e=[d.mediaRenderQpl],b[2]=d.mediaRenderQpl,b[3]=a,b[4]=e):(a=b[3],e=b[4]);m(a,e);b[5]!==d?(a=l.jsx(c("CometPlaceholder.react"),{fallback:null,name:"MWRepliesStory",children:l.jsx(o,babelHelpers["extends"]({},d))}),b[5]=d,b[6]=a):a=b[6];return a}function o(a){var e=n(31),f=a.isSecureMessage,g=a.mediaRenderQpl,i=a.message;a=a.outgoing;f=f===void 0?!1:f;var o=i.replySourceId;if(e[0]!==o||e[1]!==f){var p;p=o!=null?f?o:(p=c("XCometStoriesControllerRouteBuilder").buildUri({card_id:window.btoa("S:_ISC:"+o),view_single:!0}).setDomain("www.facebook.com"))==null?void 0:(p=p.setProtocol("https"))==null?void 0:p.toString():void 0;e[0]=o;e[1]=f;e[2]=p}else p=e[2];o=p;var q;e[3]!==g||e[4]!==i.replyAttachmentId||e[5]!==i.replyAttachmentPlaintextHash||e[6]!==i.replyMediaUrlMimeType||e[7]!==i.replySourceId?(p=function(){g==null?void 0:g.addPoint("render-reply-story-impl",{bool:{has_reply_attachment_id:i.replyAttachmentId!=null,has_reply_attachment_plaintext_hash:i.replyAttachmentPlaintextHash!=null,has_reply_mime_type:i.replyMediaUrlMimeType!=null,has_reply_source_id:i.replySourceId!=null}}),g==null?void 0:g.addAnnotations({string:{xma_content_type:d("MWMediaRenderQplUtils").getXmaContentTypeStringFromEnum((j||(j=d("LSIntEnum"))).ofNumber(c("LSXmaContentType").FB_STORY_REPLY))}})},q=[g,i.replyAttachmentId,i.replyAttachmentPlaintextHash,i.replyMediaUrlMimeType,i.replySourceId],e[3]=g,e[4]=i.replyAttachmentId,e[5]=i.replyAttachmentPlaintextHash,e[6]=i.replyMediaUrlMimeType,e[7]=i.replySourceId,e[8]=p,e[9]=q):(p=e[8],q=e[9]);d("Int64Hooks").useEffectInt64(p,q);e[10]!==f||e[11]!==g?(p=b("cr:9765")!=null&&f?function(a){if(c("gkx")("6417")){a.replyAttachmentId!=null&&a.replyAttachmentPlaintextHash==null&&c("FBLogger")("messenger_web_media").mustfix("Failed to get story preview url. Reply attachment id is set but Reply plaintextHash is missing");return a.replyAttachmentPlaintextHash!=null?b("cr:9765").getAttachmentBlobNonOptional(a.replyAttachmentPlaintextHash,"MWRepliesStory",g):null}else return a.replyAttachmentId!=null?b("cr:9765").getAttachmentBlobNonOptional((k||(k=d("I64"))).to_string(a.replyAttachmentId),"MWRepliesStory",g):null}:c("getLSMediaMessageReplyMediaUrl"),e[10]=f,e[11]=g,e[12]=p):p=e[12];q=p;e[13]!==q||e[14]!==i?(f=q(i),e[13]=q,e[14]=i,e[15]=f):f=e[15];var r=f;e[16]!==r||e[17]!==g||e[18]!==i.replyAttachmentPlaintextHash?(p=function(){r==null&&(g==null?void 0:g.endFail("missing-reply-media",{bool:{has_plaintexthash:i.replyAttachmentPlaintextHash!=null}}))},q=[g,i.replyAttachmentPlaintextHash,r],e[16]=r,e[17]=g,e[18]=i.replyAttachmentPlaintextHash,e[19]=p,e[20]=q):(p=e[19],q=e[20]);m(p,q);if(r==null)return null;e[21]===Symbol["for"]("react.memo_cache_sentinel")?(f=h._("__JHASH__thxINaLEtLl__JHASH__"),e[21]=f):f=e[21];e[22]!==o?(p=o!=null?{url:o}:void 0,e[22]=o,e[23]=p):p=e[23];e[24]!==g||e[25]!==a||e[26]!==r?(q=l.jsx(c("MWRepliesImage.react"),{mediaRenderQpl:g,outgoing:a,src:r}),e[24]=g,e[25]=a,e[26]=r,e[27]=q):q=e[27];e[28]!==p||e[29]!==q?(o=l.jsx(c("MWXPressable.react"),{"aria-label":f,linkProps:p,overlayDisabled:!0,children:q}),e[28]=p,e[29]=q,e[30]=o):o=e[30];return o}g["default"]=a}),226);
__d("MWRepliesText.react",["MWChatTextFormatting","MWChatTextTransform","MWXMessageReplyBubble.react","MWXMessageTextWithEntities.react","cr:2472","react","useStringWithSubstitutions"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react")),j=h.useMemo;function a(a){var e=a.isSecureMessage,f=a.message,g=a.outgoing,h=a.text;a=j(function(){return{MessengerTextFormatting:[d("MWChatTextFormatting").messageRenderer]}},[]);var k=j(function(){return d("MWChatTextFormatting").getFormattingRanges(h)},[h]),l=j(function(){var a;return new Set(e?(a=(a=f.mentionIds)==null?void 0:a.split==null?void 0:a.split(","))!=null?a:[]:[])},[e,f.mentionIds]),m=b("cr:2472")==null?h:b("cr:2472").unvault(h);l=(l=(l=d("useStringWithSubstitutions").useStringWithMentionSubstitutionsAndUpdatedRanges(m,[],l))==null?void 0:l.textWithSubstitutions)!=null?l:m;return i.jsx(c("MWXMessageReplyBubble.react"),{outgoing:g,children:i.jsx("div",{className:"xi81zsa x126k92a",children:i.jsx(c("MWXMessageTextWithEntities.react"),{maxLength:120,maxLines:3,ranges:k,renderers:a,text:l,transforms:d("MWChatTextTransform").textTransformsNoVault,truncationStyle:"ellipsis-only",withParagraphs:!1})})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWRepliesUnavailable.react",["fbt","MWXMessageReplyBubble.react","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=(i||(i=d("react"))).c,k=i;function a(a){var b=j(3);a=a.outgoing;var d;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(d=h._("__JHASH__3TzRhHHRgwV__JHASH__"),b[0]=d):d=b[0];d=d;b[1]!==a?(d=k.jsx(c("MWXMessageReplyBubble.react"),{fontStyle:"italic",outgoing:a,children:d}),b[1]=a,b[2]=d):d=b[2];return d}g["default"]=a}),226);
__d("MWRepliesVideo.react",["fbt","ix","CometPlaceholder.react","I64","LSMediaUrlAttachment","MAWGetIsMediaDownloadStatusEnabled","MWXImage.react","MWXMessageImage.react","MWXMessageReplyBubble.react","MWXVideoStatusListener.react","ReQL","ReQLSuspense","cr:9765","react","useMAWMediaStatusUIState","useMWRepliesImageGetMaxDimensions","useReStore"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j,k,l,m=l||(l=d("react"));e=l;e.useCallback;var n=e.useEffect,o=e.useRef,p=e.c,q={thumbnail:{borderTopStartRadius:"x1tlxs6b",borderTopEndRadius:"x1g8br2z",borderBottomEndRadius:"x1gn5b1j",borderBottomStartRadius:"x230xth",filter:"xin470k",overflowX:"x6ikm8r",overflowY:"x10wlt62",$$css:!0}};function r(a){var e=p(68),g=a.isSecureMessage,l=a.mediaRenderQpl,r=a.message;a=a.outgoing;g=g===void 0?!1:g;var s=c("useMWRepliesImageGetMaxDimensions")(),t=s.maxHeight;s=s.maxWidth;var u=(j||(j=c("useReStore")))(),v;e[0]!==r.replyAttachmentPlaintextHash||e[1]!==r.replySourceId||e[2]!==r.replyAttachmentId||e[3]!==r.threadKey||e[4]!==u.tables.attachments?(v=function(){var a,b=r.replyAttachmentPlaintextHash,c=(a=r.replySourceId)!=null?a:"";if(b!=null&&c!=null)return d("ReQL").fromTableAscending(u.tables.attachments).filter(function(a){return a.attachmentFbid===b&&a.messageId===c});else{a=(a=r.replyAttachmentId)!=null?a:(k||(k=d("I64"))).zero;return d("ReQL").fromTableAscending(u.tables.attachments).getKeyRange(r.threadKey,c,(k||(k=d("I64"))).to_string(a))}},e[0]=r.replyAttachmentPlaintextHash,e[1]=r.replySourceId,e[2]=r.replyAttachmentId,e[3]=r.threadKey,e[4]=u.tables.attachments,e[5]=v):v=e[5];var w;e[6]!==u||e[7]!==r?(w=[u,r],e[6]=u,e[7]=r,e[8]=w):w=e[8];var x=d("ReQLSuspense").useFirst(v,w,f.id+":73");e[9]!==x||e[10]!==l?(v=function(){x!=null&&(l==null?void 0:l.addAttachmentAnnotations==null?void 0:l.addAttachmentAnnotations(x)),l==null?void 0:l.addPoint("render-reply-video-impl",{bool:{has_db_attachment:x!=null}})},w=[x,l],e[9]=x,e[10]=l,e[11]=v,e[12]=w):(v=e[11],w=e[12]);n(v,w);e[13]!==g||e[14]!==x?(v=g&&d("MAWGetIsMediaDownloadStatusEnabled").getIsMediaDownloadStatusEnabled()?x:null,e[13]=g,e[14]=x,e[15]=v):v=e[15];w=v;v=c("useMAWMediaStatusUIState")(w,l);v=v.downloadStatus;var y;if(x!=null)if(w!=null&&v!=="downloaded")y=null;else if(b("cr:9765")==null||!g){e[16]!==x?(w=d("LSMediaUrlAttachment").previewUrl(x),e[16]=x,e[17]=w):w=e[17];y=w}else{e[18]!==x.attachmentFbid||e[19]!==l?(v=b("cr:9765").getAttachmentBlobNonOptional(x.attachmentFbid,"MWRepliesVideo",l),e[18]=x.attachmentFbid,e[19]=l,e[20]=v):v=e[20];y=v}w=o(null);e[21]!==l?(v=function(a){l==null?void 0:l.endFail("load-video-error",{string:{video_error_name:a}})},e[21]=l,e[22]=v):v=e[22];var z=v;e[23]!==l?(v=function(){l==null?void 0:l.endSuccess()},e[23]=l,e[24]=v):v=e[24];v=v;if(y==null){l==null?void 0:l.endSuccess();var A;e[25]===Symbol["for"]("react.memo_cache_sentinel")?(A=h._("__JHASH__7WGJ1daCkBD__JHASH__"),e[25]=A):A=e[25];e[26]!==a?(A=m.jsx(c("MWXMessageReplyBubble.react"),{fontStyle:"italic",outgoing:a,children:A}),e[26]=a,e[27]=A):A=e[27];return A}e[28]!==r.replyMediaPreviewHeight?(a=r.replyMediaPreviewHeight!=null?(k||(k=d("I64"))).to_float(r.replyMediaPreviewHeight):void 0,e[28]=r.replyMediaPreviewHeight,e[29]=a):a=e[29];A=a;e[30]!==r.replyMediaPreviewWidth?(a=r.replyMediaPreviewWidth!=null?(k||(k=d("I64"))).to_float(r.replyMediaPreviewWidth):void 0,e[30]=r.replyMediaPreviewWidth,e[31]=a):a=e[31];a=a;if((x==null?void 0:x.previewUrlMimeType)!=null&&!g){e[32]!==z?(g=function(){return z()},e[32]=z,e[33]=g):g=e[33];var B;e[34]!==A||e[35]!==t||e[36]!==s||e[37]!==g||e[38]!==v||e[39]!==y||e[40]!==a?(B=m.jsx(c("MWXMessageImage.react"),{alt:"",height:A,maxHeight:t,maxWidth:s,onError:g,onLoad:v,src:y,width:a,xstyle:q.thumbnail}),e[34]=A,e[35]=t,e[36]=s,e[37]=g,e[38]=v,e[39]=y,e[40]=a,e[41]=B):B=e[41];g=B}else{e[42]!==z||e[43]!==v?(B=m.jsx(c("MWXVideoStatusListener.react"),{onError:z,onLoad:v,videoRef:w}),e[42]=z,e[43]=v,e[44]=B):B=e[44];var C;e[45]===Symbol["for"]("react.memo_cache_sentinel")?(C="x1tlxs6b x1g8br2z x1gn5b1j x230xth xin470k x6ikm8r x10wlt62",e[45]=C):C=e[45];A=A!=null&&A>t?"100%":A;var D;e[46]!==t||e[47]!==s?(D={maxHeight:t,maxWidth:s},e[46]=t,e[47]=s,e[48]=D):D=e[48];t=a!=null&&a>s?"100%":a;e[49]!==A||e[50]!==y||e[51]!==D||e[52]!==t?(s=m.jsx("video",{alt:"",className:C,height:A,ref:w,src:y,style:D,width:t}),e[49]=A,e[50]=y,e[51]=D,e[52]=t,e[53]=s):s=e[53];e[54]!==B||e[55]!==s?(a=m.jsxs(m.Fragment,{children:[B,s]}),e[54]=B,e[55]=s,e[56]=a):a=e[56];g=a}e[57]===Symbol["for"]("react.memo_cache_sentinel")?(C="x1n2onr6",e[57]=C):C=e[57];w=g;e[58]===Symbol["for"]("react.memo_cache_sentinel")?(A="x6s0dn4 x78zum5 xdt5ytf x5yr21d x17qophe xl56j7k x10l6tqk x13vifvy xh8yej3",e[58]=A):A=e[58];e[59]!==z?(D=function(){return z()},e[59]=z,e[60]=D):D=e[60];e[61]===Symbol["for"]("react.memo_cache_sentinel")?(t=i("354763"),e[61]=t):t=e[61];e[62]!==D||e[63]!==v?(B=m.jsx("div",{className:A,children:m.jsx(c("MWXImage.react"),{onError:D,onLoad:v,src:t})}),e[62]=D,e[63]=v,e[64]=B):B=e[64];e[65]!==g||e[66]!==B?(s=m.jsxs("div",{className:C,children:[w,B]}),e[65]=g,e[66]=B,e[67]=s):s=e[67];return s}function a(a){var b=p(7),d;b[0]!==a?(d=babelHelpers["extends"]({},a),b[0]=a,b[1]=d):d=b[1];var e;b[2]!==d.mediaRenderQpl?(a=function(){var a;(a=d.mediaRenderQpl)==null?void 0:a.addPoint("render-replies-video")},e=[d.mediaRenderQpl],b[2]=d.mediaRenderQpl,b[3]=a,b[4]=e):(a=b[3],e=b[4]);n(a,e);b[5]!==d?(a=m.jsx(c("CometPlaceholder.react"),{fallback:null,name:"MWRepliesVideo",children:m.jsx(r,babelHelpers["extends"]({},d))}),b[5]=d,b[6]=a):a=b[6];return a}g["default"]=a}),226);
__d("MWRepliedMessage.react",["MWBlockedTombstoneMessage.react","MWBlockingProtectionContext.react","MWGroupBlockingProtectionUtils","MWPBaseRepliedMessage.react","MWRepliesAttachment.react","MWRepliesExpired.react","MWRepliesGIF.react","MWRepliesMedia.react","MWRepliesRemoved.react","MWRepliesRollcallContribution.react","MWRepliesSticker.react","MWRepliesStory.react","MWRepliesText.react","MWRepliesUnavailable.react","MWRepliesVideo.react","cr:6968","react","useMWJumpToMessage"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));e=h;var j=e.useEffect,k=e.c;function a(a){var e=k(20),f=a.isSecureMessage,g=a.mediaRenderQpl,h=a.message;a=a.outgoing;f=f===void 0?!1:f;var l=c("MWBlockingProtectionContext.react").useHook();l=l.findMessageId;var m=d("MWGroupBlockingProtectionUtils").useMWIsMessageSentByBlockedContact(h.replyToUserId,h.threadKey);if(e[0]!==m||e[1]!==h.replySourceId||e[2]!==l){var n;n=m&&!l((n=h.replySourceId)!=null?n:"");e[0]=m;e[1]=h.replySourceId;e[2]=l;e[3]=n}else n=e[3];var o=n,p=c("useMWJumpToMessage")("Pinned");e[4]!==g||e[5]!==o?(m=function(){g==null?void 0:g.addPoint("render-replied-message",{bool:{show_blocking_tombstone:o}})},l=[g,o],e[4]=g,e[5]=o,e[6]=m,e[7]=l):(m=e[6],l=e[7]);j(m,l);if(o){var q=h.replySourceTimestampMs,r=h.replySourceId;e[8]!==r||e[9]!==q||e[10]!==p?(n=function(){r!=null&&q&&p(r,q)},e[8]=r,e[9]=q,e[10]=p,e[11]=n):n=e[11];e[12]!==h.messageId||e[13]!==n?(m=i.jsx(d("MWBlockedTombstoneMessage.react").MWBlockedTombstoneMessage,{messageId:h.messageId,onClick:n,source:d("MWBlockedTombstoneMessage.react").MWBlockedTombstoneMessageSource.REPLIED_TO}),e[12]=h.messageId,e[13]=n,e[14]=m):m=e[14];return m}if(e[15]!==f||e[16]!==g||e[17]!==h||e[18]!==a){n=i.jsx(c("MWPBaseRepliedMessage.react"),{isSecureMessage:f,mediaRenderQpl:g,message:h,outgoing:a,renderAttachment:c("MWRepliesAttachment.react"),renderExpiredMessage:c("MWRepliesExpired.react"),renderGIF:c("MWRepliesGIF.react"),renderMedia:c("MWRepliesMedia.react"),renderRaven:(l=b("cr:6968"))!=null?l:void 0,renderRemovedMessage:c("MWRepliesRemoved.react"),renderRollcallContribution:c("MWRepliesRollcallContribution.react"),renderSticker:c("MWRepliesSticker.react"),renderStory:c("MWRepliesStory.react"),renderTextMessage:c("MWRepliesText.react"),renderUnavailableMessage:c("MWRepliesUnavailable.react"),renderVideo:c("MWRepliesVideo.react")});e[15]=f;e[16]=g;e[17]=h;e[18]=a;e[19]=n}else n=e[19];return n}g["default"]=a}),98);
__d("MWV2ReplyError.react",["fbt","MWXMessageReplyBubble.react","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=(i||(i=d("react"))).c,k=i;function a(a){var b=j(3);a=a.outgoing;var d;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(d=h._("__JHASH__962PS6SI-P2__JHASH__"),b[0]=d):d=b[0];b[1]!==a?(d=k.jsx(c("MWXMessageReplyBubble.react"),{fontStyle:"italic",outgoing:a,children:d}),b[1]=a,b[2]=d):d=b[2];return d}g["default"]=a}),226);
__d("useMWIsReplyToAuthor",["I64","LSIntEnum","LSMessageReplySourceTypeV2","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=(h||d("react")).c;function a(a){var b=k(2),e;b[0]!==a.replySourceTypeV2?(e=a.replySourceTypeV2!=null&&(i||(i=d("I64"))).equal(a.replySourceTypeV2,(j||(j=d("LSIntEnum"))).ofNumber(c("LSMessageReplySourceTypeV2").XMA)),b[0]=a.replySourceTypeV2,b[1]=e):e=b[1];return e}g["default"]=a}),98);
__d("MWV2ChatReactionsTooltip.react",["fbt","FBLogger","I64","LSAuthorityLevel","LSClearReactionsV2DetailsAndRangeStoredProcedure","LSContactBlockedByViewerStatus","LSContactGender","LSContactIdType","LSContactType","LSContactViewerRelationship","LSContactWorkForeignEntityType","LSFactory","LSIntEnum","LSIssueReactionsV2DetailsUsersListFetchStoredProcedure","LSVerifyContactRowExistsStoredProcedure","MWLSThread","MWPActor.react","Promise","ReQL","ReQLSuspense","intlSummarizeNumber","promiseDone","react","react-strict-dom","useIsReactionsV2Enabled","useReStore"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l,m,n=m||(m=d("react"));e=m;var o=e.useEffect,p=e.useMemo,q=e.c,r=9;function s(a){var b=q(6),e=(j||(j=c("useReStore")))(),g,h;b[0]!==a||b[1]!==e?(g=function(){return a==null?d("ReQL").empty():d("ReQL").fromTableAscending(e.tables.contextual_profile_v1.index("associatedEntityIdAndOwner")).getKeyRange(a)},h=[e,a],b[0]=a,b[1]=e,b[2]=g,b[3]=h):(g=b[2],h=b[3]);g=d("ReQLSuspense").useArray(g,h,f.id+":47");if(b[4]!==g){h=new Map();for(var i=g,k=Array.isArray(i),m=0,i=k?i:i[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var n;if(k){if(m>=i.length)break;n=i[m++]}else{m=i.next();if(m.done)break;n=m.value}n=n;var o=n==null?void 0:n.profileName;o!=null&&h.set((l||(l=d("I64"))).to_string(n.ownerId),o)}b[4]=g;b[5]=h}else h=b[5];n=h;o=n;return o}function a(a){var b=q(6),c=a.messageId,e=a.reactions;a=a.threadKey;var f=d("MWLSThread").useThread(a,t),g=d("useIsReactionsV2Enabled").useIsReactionsV2Enabled(a),h;b[0]!==g||b[1]!==c||b[2]!==f||b[3]!==e||b[4]!==a?(h=g?n.jsx(v,{messageId:c,parentThreadKey:f,reactions:e,threadKey:a}):n.jsx(u,{messageId:c,parentThreadKey:f,reactions:e,threadKey:a}),b[0]=g,b[1]=c,b[2]=f,b[3]=e,b[4]=a,b[5]=h):h=b[5];return h}function t(a){return a.parentThreadKey}function u(a){var e=a.messageId,g=a.parentThreadKey,m=a.reactions,q=a.threadKey,t=(j||(j=c("useReStore")))(),u=d("ReQLSuspense").useArray(function(){return d("ReQL").leftJoin(d("ReQL").fromTableAscending(t.tables.reactions).getKeyRange(q,e),d("ReQL").fromTableAscending(t.tables.contacts))},[t,q,e],f.id+":108"),v=s(g);o(function(){c("promiseDone")(t.runInTransaction(function(a){return(i||(i=b("Promise"))).all(u.map(function(e){e=e[1];if(e!=null)return c("LSVerifyContactRowExistsStoredProcedure")(c("LSFactory")(a),{authorityLevel:(k||(k=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").CLIENT_PARTIAL),blockedByViewerStatus:k.ofNumber(c("LSContactBlockedByViewerStatus").UNBLOCKED),contactIdType:k.ofNumber(c("LSContactIdType").FBID),contactType:k.ofNumber(c("LSContactType").USER),contactViewerRelationship:k.ofNumber(c("LSContactViewerRelationship").UNKNOWN),gender:k.ofNumber(c("LSContactGender").UNKNOWN),id:e.id,isBlocked:!1,isMemorialized:!1,isSelf:!1,workForeignEntityType:k.ofNumber(c("LSContactWorkForeignEntityType").UNKNOWN)});else return(i||(i=b("Promise"))).resolve()}))},"readwrite",void 0,void 0,f.id+":124"))},[t,u]);a=p(function(){var a=new Map(u.map(function(a){var b=a[1];b==null&&c("FBLogger")("messenger_web_product").debug("missing contact for reaction tooltip");return[(l||(l=d("I64"))).to_string(a[0].actorId),b!=null?b.name:h._("__JHASH__AaE4hJExM0x__JHASH__")]})),b=m.map(function(b){b=(l||(l=d("I64"))).to_string(b.actorId);if(v.has(b))return v.get(b);b=a.get(b);if(b==null)return"";else return b}).filter(function(a){return a!==""}),e=b.length;b=b.slice(0,r);if(e>r){e=e-r;b.push(h._("__JHASH__KVtJcih6CQz__JHASH__",[h._plural(e),h._param("count",String(e))]))}return b},[v,m,u]);g=a.map(function(a,b){return n.jsx(d("react-strict-dom").html.div,{children:a},String(b))});return n.jsx(d("react-strict-dom").html.div,{children:g})}u.displayName=u.name+" [from "+f.id+"]";function v(a){var b,e=a.messageId,g=a.parentThreadKey;a.reactions;var i=a.threadKey,k=(j||(j=c("useReStore")))();o(function(){c("promiseDone")(k.runInTransaction(function(a){return c("LSClearReactionsV2DetailsAndRangeStoredProcedure")(c("LSFactory")(a))},"readwrite",void 0,void 0,f.id+":226")),c("promiseDone")(k.runInTransaction(function(a){return c("LSIssueReactionsV2DetailsUsersListFetchStoredProcedure")(c("LSFactory")(a),{messageId:e,threadId:i})},"readwrite",void 0,void 0,f.id+":231"))},[k,i,e]);var m=s(g);a=d("ReQLSuspense").useArray(function(){return d("ReQL").fromTableAscending(k.tables.reactions_v2_details).getKeyRange(i,e).map(function(a){var b;return(b=m.get((l||(l=d("I64"))).to_string(a.reactorId)))!=null?b:a.fullName})},[k,m,i,e],f.id+":242");g=d("ReQLSuspense").useArray(function(){return d("ReQL").fromTableAscending(k.tables.reactions_v2).getKeyRange(i,e)},[k,i,e],f.id+":255");var p=g?g.map(function(a){return a.viewerIsReactor}):[];p=p.length>0?p.reduce(function(a,b){return a||b}):!1;var q=d("MWPActor.react").useActor(),t=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableAscending(k.tables.contacts).getKeyRange(q)},[k,q],f.id+":274");g=g?g.map(function(a){return(l||(l=d("I64"))).to_int32(a.count)}).filter(function(a){return a>0}):[];b=(b=(t==null?void 0:t.id)!=null?m.get((l||(l=d("I64"))).to_string(t.id)):null)!=null?b:t==null?void 0:t.name;JSON.stringify(g)===JSON.stringify([1])&&p&&b!=null&&a.length===0?a.push(b):p&&a[0]!=null&&t&&b!=null&&((g=a[0])==null?void 0:g.toString())!==b&&a.unshift(b);p=h._("__JHASH__GTBXwO8BaZr__JHASH__");t=a.slice(0,r);if(a.length>r){g=a.length-r;t.push(h._("__JHASH__KVtJcih6CQz__JHASH__",[h._plural(g),h._param("count",String(c("intlSummarizeNumber")(g)))]).toString())}b=t.length===0?p:t.map(function(a,b){return n.jsx(d("react-strict-dom").html.div,{children:a},String(b))});return n.jsx(d("react-strict-dom").html.div,{children:b})}v.displayName=v.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("MWMessageReactionsContainer.react",["fbt","I64","MWChatReactionEmoji","MWChatReactionsUtils","MWV2ChatReactionsTooltip.react","MWXTooltip.react","intlSummarizeNumber","react","stylex","useIsReactionDialogEnabled"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l=(k||(k=d("react"))).c,m=k,n={emoji:{alignItems:"x6s0dn4",backgroundColor:"xsrzb8j",borderTopStartRadius:"x14yjl9h",borderTopEndRadius:"xudhj91",borderBottomEndRadius:"x18nykt9",borderBottomStartRadius:"xww2gxu",lineHeight:"x14ju556",$$css:!0},emojiMargin:{marginEnd:"xcwd3tp",$$css:!0},emojiNum:{color:"xi81zsa",fontSize:"x1ncwhqj",lineHeight:"x14ju556",minWidth:"xdhweic",paddingEnd:"x150jy0e",paddingStart:"x1e558r4",textAlign:"x2b8uid",$$css:!0},emojiRow:{alignItems:"x6s0dn4",backgroundColor:"x2bj2ny",borderTopStartRadius:"x1a2cdl4",borderTopEndRadius:"xnhgr82",borderBottomEndRadius:"x1qt0ttw",borderBottomStartRadius:"xgk8upj",boxShadow:"x10vwrwz",display:"x78zum5",justifyContent:"xl56j7k",paddingTop:"x4p5aij",paddingEnd:"x19um543",paddingBottom:"x1j85h84",paddingStart:"x1m6msm",textAlign:"xp4054r",$$css:!0},emojiWithCursor:{cursor:"x1ypdohk",$$css:!0},scaleHeartEmoji:{transform:"xhqu4j4",$$css:!0}};function a(a){var b=l(28),e=a.count,f=a.countXstyle,g=a.disableReactionDialog,j=a.emojis,k=a.message,r=a.reactions,s=a.reactionsV2,t=a.renderEmojis,u=a.threadKey;a=a.xstyle;g=g===void 0?!1:g;k=k.messageId;var v;b[0]!==s?(v=s!=null?s.map(p).reduce(o,0):0,b[0]=s,b[1]=v):v=b[1];s=v;var w=c("useIsReactionDialogEnabled")(u)&&!g;v=s>1?s:e;var x=v>1;if(b[2]!==x||b[3]!==j||b[4]!==w||b[5]!==t){b[7]!==x||b[8]!==j.length||b[9]!==w||b[10]!==t?(g=function(a,b){var e=x||b!==j.length-1,f=d("MWChatReactionsUtils").isHeart(a[0]);return m.jsx("div",{className:(i||(i=c("stylex")))(n.emoji,w?n.emojiWithCursor:!1,e?n.emojiMargin:!1),children:m.jsx("div",{className:i(f?n.scaleHeartEmoji:!1),children:t?t(a,16,"messenger_reaction_emoji_"+a[0]):m.jsx(c("MWChatReactionEmoji"),{emoji:a,size:16,testid:void 0})})},String(b))},b[7]=x,b[8]=j.length,b[9]=w,b[10]=t,b[11]=g):g=b[11];s=j.map(g);b[2]=x;b[3]=j;b[4]=w;b[5]=t;b[6]=s}else s=b[6];e=s;b[12]!==a?(g=(i||(i=c("stylex")))(n.emojiRow,a),b[12]=a,b[13]=g):g=b[13];b[14]!==x||b[15]!==f||b[16]!==v?(s=x?m.jsx(q,{countXstyle:f,reactionCount:v}):null,b[14]=x,b[15]=f,b[16]=v,b[17]=s):s=b[17];b[18]!==g||b[19]!==e||b[20]!==s?(a=m.jsxs("div",{className:g,role:"none",children:[e,s]}),b[18]=g,b[19]=e,b[20]=s,b[21]=a):a=b[21];f=a;b[22]!==w||b[23]!==k||b[24]!==r||b[25]!==u||b[26]!==f?(v=w?m.jsx(c("MWXTooltip.react"),{align:"middle",label:h._("__JHASH__pugXv5G1XoG__JHASH__"),position:"above",tooltip:m.jsx(c("MWV2ChatReactionsTooltip.react"),{messageId:k,reactions:r,threadKey:u}),children:f}):f,b[22]=w,b[23]=k,b[24]=r,b[25]=u,b[26]=f,b[27]=v):v=b[27];return v}function o(a,b){return a+b}function p(a){return(j||(j=d("I64"))).to_int32(a.count)}function q(a){var b=l(10),d=a.countXstyle;a=a.reactionCount;var e;b[0]!==a?(e=c("intlSummarizeNumber")(a),b[0]=a,b[1]=e):e=b[1];a=e;e=a.length;var f;b[2]!==d?(f=(i||(i=c("stylex")))(n.emojiNum,d),b[2]=d,b[3]=f):f=b[3];d=e+"ch";b[4]!==d?(e={width:d},b[4]=d,b[5]=e):e=b[5];b[6]!==f||b[7]!==e||b[8]!==a?(d=m.jsx("div",{className:f,role:"none",style:e,children:a}),b[6]=f,b[7]=e,b[8]=a,b[9]=d):d=b[9];return d}g["default"]=a}),226);
__d("MWUnsupportedXMA.react",["fbt","MWV2TombstonedMessage.react","react","react-strict-dom"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||(i=d("react"));b=i;var k=b.useEffect,l=b.c,m={extraPaddingBottom:{paddingTop:"x1iorvi4",$$css:!0},extraPaddingTop:{paddingTop:"x1iorvi4",$$css:!0}};function a(a){var b=l(9),e=a.mediaRenderQpl,f=a.nextMessage;a=a.prevMessage;var g,i;b[0]!==e?(g=function(){e==null?void 0:e.endSuccess()},i=[e],b[0]=e,b[1]=g,b[2]=i):(g=b[1],i=b[2]);k(g,i);g=a&&m.extraPaddingTop;i=f&&m.extraPaddingBottom;b[3]!==g||b[4]!==i?(a=[g,i],b[3]=g,b[4]=i,b[5]=a):a=b[5];b[6]===Symbol["for"]("react.memo_cache_sentinel")?(f=j.jsx(c("MWV2TombstonedMessage.react"),{isOutgoing:!1,children:h._("__JHASH__-GvVFaMikWU__JHASH__")}),b[6]=f):f=b[6];b[7]!==a?(g=j.jsx(d("react-strict-dom").html.div,{style:a,children:f}),b[7]=a,b[8]=g):g=b[8];return g}g["default"]=a}),226);
__d("MWXMAV2AttachmentHscrollLayout.react",["FDSHScroll.react","MWXMessageBubbleCornerStyles.react","react","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=(j||d("react")).c,l=h||(h=c("react")),m=284,n={centerElement:{borderTopStartRadius:"x1lcm9me",borderTopEndRadius:"x1yr5g0i",borderBottomEndRadius:"xrt01vj",borderBottomStartRadius:"x10y3i5r",$$css:!0},firstElement:{borderBottomEndRadius:"xrt01vj",borderTopEndRadius:"x1yr5g0i",$$css:!0},lastElement:{borderBottomStartRadius:"x10y3i5r",borderTopStartRadius:"x1lcm9me",$$css:!0},root:{overflowX:"x6ikm8r",overflowY:"x10wlt62",$$css:!0}};function a(a){var b=k(21),e=a.children,f=a.connectBottom,g=a.connectTop;a=a.outgoing;a=a?"right":"left";var h,j,o,p,q,r;if(b[0]!==a||b[1]!==f||b[2]!==g||b[3]!==e){var s=d("MWXMessageBubbleCornerStyles.react").getMWXBubbleCornerStyles({align:a,connectBottom:f,connectTop:g}),t=e.length;b[10]===Symbol["for"]("react.memo_cache_sentinel")?(r="x1xgufrq xh8yej3 x1bu0bv6",b[10]=r):r=b[10];h=d("FDSHScroll.react").Container;b[11]===Symbol["for"]("react.memo_cache_sentinel")?(j={minWidth:m,type:"responsive"},b[11]=j):j=b[11];o=4;p=!0;q=e.map(function(a,b){var e=b===0,f=b===t-1,g=!e&&!f;return l.jsx(d("FDSHScroll.react").Child,{children:l.jsx("div",{className:(i||(i=c("stylex")))(n.root,s,e&&n.firstElement,g&&n.centerElement,f&&n.lastElement),children:a},b)},b)});b[0]=a;b[1]=f;b[2]=g;b[3]=e;b[4]=h;b[5]=j;b[6]=o;b[7]=p;b[8]=q;b[9]=r}else h=b[4],j=b[5],o=b[6],p=b[7],q=b[8],r=b[9];b[12]!==h||b[13]!==j||b[14]!==o||b[15]!==p||b[16]!==q?(a=l.jsx(h,{cardWidth:j,gap:o,reduceArrowSize:p,children:q}),b[12]=h,b[13]=j,b[14]=o,b[15]=p,b[16]=q,b[17]=a):a=b[17];b[18]!==r||b[19]!==a?(f=l.jsx("div",{className:r,children:a}),b[18]=r,b[19]=a,b[20]=f):f=b[20];return f}g["default"]=a}),98);
__d("MWXMAV2AttachmentSingleLayout.react",["MWLSThreadDisplayContext","MWXMessageBubbleCornerStyles.react","react","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=(j||d("react")).c,l=h||(h=c("react")),m={cardWidth:{maxWidth:"xw5ewwj",width:"xh8yej3",$$css:!0},cardWidthChatTab:{maxWidth:"x1i5r0r9",width:"xh8yej3",$$css:!0},root:{overflowX:"x6ikm8r",overflowY:"x10wlt62",$$css:!0}};function a(a){var b=k(8),e=a.children,f=a.connectBottom,g=a.connectTop;a=a.outgoing;var h=d("MWLSThreadDisplayContext").useMWLSThreadDisplayContext();h=h==="ChatTab";a=a?"right":"left";if(b[0]!==a||b[1]!==f||b[2]!==g||b[3]!==h){var j=d("MWXMessageBubbleCornerStyles.react").getMWXBubbleCornerStyles({align:a,connectBottom:f,connectTop:g});j=(i||(i=c("stylex")))(m.root,!h&&m.cardWidth,h&&m.cardWidthChatTab,j);b[0]=a;b[1]=f;b[2]=g;b[3]=h;b[4]=j}else j=b[4];b[5]!==j||b[6]!==e?(a=l.jsx("div",{className:j,children:e}),b[5]=j,b[6]=e,b[7]=a):a=b[7];return a}g["default"]=a}),98);
__d("MWXMAV2AttachmentLayoutWrapper.react",["FBLogger","MSGDataclassTypes.flow","MWXMAV2AttachmentHscrollLayout.react","MWXMAV2AttachmentSingleLayout.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=(i||(i=d("react"))).c,k=h||(h=c("react")),l=i.useEffect;function a(a){var b=j(13),e=a.children,f=a.connectBottom,g=a.connectTop,h=a.layoutType,i=a.mediaRenderQpl;a=a.outgoing;var m,n;b[0]!==i?(m=function(){i==null?void 0:i.addPoint("render-xma-v2-layout")},n=[i],b[0]=i,b[1]=m,b[2]=n):(m=b[1],n=b[2]);l(m,n);switch(h){case d("MSGDataclassTypes.flow").XmsgXmaLayoutType.Single:m=e[0];b[3]!==f||b[4]!==g||b[5]!==a||b[6]!==m?(n=k.jsx(c("MWXMAV2AttachmentSingleLayout.react"),{connectBottom:f,connectTop:g,outgoing:a,children:m}),b[3]=f,b[4]=g,b[5]=a,b[6]=m,b[7]=n):n=b[7];return n;case d("MSGDataclassTypes.flow").XmsgXmaLayoutType.Hscroll:b[8]!==f||b[9]!==g||b[10]!==a||b[11]!==e?(m=k.jsx(c("MWXMAV2AttachmentHscrollLayout.react"),{connectBottom:f,connectTop:g,outgoing:a,children:e}),b[8]=f,b[9]=g,b[10]=a,b[11]=e,b[12]=m):m=b[12];return m;default:throw c("FBLogger")("messenger_web_sharing").mustfixThrow("Unsupported XMA 2.0 layout type %s",d("MSGDataclassTypes.flow").XmsgXmaLayoutType.getName(h))}}g["default"]=a}),98);
__d("MWXMAV2AttachmentTemplateWrapper.react",["FBLogger","cr:12018","cr:9921","qex","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));e=h;var j=e.useEffect,k=e.c;function a(a){var d=k(10),e=a.content,f=a.mediaRenderQpl,g;d[0]!==f?(a=function(){f==null?void 0:f.addPoint("render-xma-v2-template")},g=[f],d[0]=f,d[1]=a,d[2]=g):(a=d[1],g=d[2]);j(a,g);a=e.custom_template_data;if(a==null)throw c("FBLogger")("messenger_web_sharing").mustfixThrow("Unexpected null custom_template_data for XMA 2.0");var h;bb0:switch(a.__typename){case"XMSGXmaCompactGenericTemplateData":if(b("cr:9921")!=null){d[3]!==e||d[4]!==f||d[5]!==a?(g=i.jsx(b("cr:9921"),{content:e,mediaRenderQpl:f,template:a}),d[3]=e,d[4]=f,d[5]=a,d[6]=g):g=d[6];h=g}break bb0;case"XMSGXmaBloksTemplateData":if(b("cr:12018")!=null&&c("qex")._("2958")===!0){d[7]!==f||d[8]!==a?(e=i.jsx(b("cr:12018"),{mediaRenderQpl:f,template:a}),d[7]=f,d[8]=a,d[9]=e):e=d[9];h=e}else throw c("FBLogger")("messenger_web_sharing").mustfixThrow("Unsupported XMA 2.0 template type %s",a.__typename);break bb0;default:throw c("FBLogger")("messenger_web_sharing").mustfixThrow("Unsupported XMA 2.0 template type %s",a.__typename)}return h}g["default"]=a}),98);
__d("MWXMAV2AttachmentContainer.react",["FBLogger","MWXMAV2AttachmentLayoutWrapper.react","MWXMAV2AttachmentTemplateWrapper.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=(i||d("react")).c,k=h||(h=c("react"));function a(a){var b=j(19),d=a.connectBottom,e=a.connectTop,f=a.mediaRenderQpl,g=a.outgoing;a=a.xmaDataclass;var h=a.layout_type;if(h==null)throw c("FBLogger")("messenger_web_sharing").mustfixThrow("Unexpected null layout_type for XMA 2.0");a=a.content;if(a==null)throw c("FBLogger")("messenger_web_product").mustfixThrow("Unexpected null content for XMA 2.0");if((a==null?void 0:a.__typename)==="XMSGXmaBloksContent")throw c("FBLogger")("messenger_web_product").mustfixThrow("XMSGXmaBloksContent is unsupported, Bloks XMAs should be using XMA 2.0");var i;b[0]!==a?(i=(a==null?void 0:a.__typename)==="XMSGXmaSingleContent"?[a]:a.list,b[0]=a,b[1]=i):i=b[1];a=i;b[2]!==e?(i=e?k.jsx("div",{className:"x1eb86dx x36qwtl xh8yej3"}):null,b[2]=e,b[3]=i):i=b[3];if(b[4]!==f||b[5]!==a){var l;b[7]!==f?(l=function(a,b){return k.jsx(c("MWXMAV2AttachmentTemplateWrapper.react"),{content:a,mediaRenderQpl:f},b)},b[7]=f,b[8]=l):l=b[8];l=a.map(l);b[4]=f;b[5]=a;b[6]=l}else l=b[6];b[9]!==d||b[10]!==e||b[11]!==h||b[12]!==f||b[13]!==g||b[14]!==l?(a=k.jsx(c("MWXMAV2AttachmentLayoutWrapper.react"),{connectBottom:d,connectTop:e,layoutType:h,mediaRenderQpl:f,outgoing:g,children:l}),b[9]=d,b[10]=e,b[11]=h,b[12]=f,b[13]=g,b[14]=l,b[15]=a):a=b[15];b[16]!==i||b[17]!==a?(d=k.jsxs(k.Fragment,{children:[i,a]}),b[16]=i,b[17]=a,b[18]=d):d=b[18];return d}g["default"]=a}),98);
__d("useXMAV2Provider",["qex","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).c;function a(a){var b=i(4);if(a.length===0)return null;a=a[0].xmaDataclass;if(a==null)return null;var c,d,e;if(b[0]!==a){e=Symbol["for"]("react.early_return_sentinel");bb0:{d=JSON.parse(a);if(d==null){e=null;break bb0}var f=d.content;if(f==null){e=null;break bb0}c=!0;f=(f==null?void 0:f.__typename)==="XMSGXmaSingleContent"?[f]:f.list;f==null?void 0:f.forEach(function(a){a=a.custom_template_data;if(a==null){c=!1;return}if(!j(a.__typename)){c=!1;return}})}b[0]=a;b[1]=c;b[2]=d;b[3]=e}else c=b[1],d=b[2],e=b[3];return e!==Symbol["for"]("react.early_return_sentinel")?e:c?d:null}function j(a){switch(a){case"XMSGXmaCompactGenericTemplateData":return(a=c("qex")._("1590"))!=null?a:!1;case"XMSGXmaBloksTemplateData":return!0;default:return!1}}g["default"]=a}),98);
__d("MWMessageRowAttachment.react",["CometErrorBoundary.react","I64","MWMessageListAttachmentContainer.react","MWUnsupportedXMA.react","MWXMAV2AttachmentContainer.react","MetaConfig","gkx","react","useXMAV2Provider"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=(h||(h=d("react"))).c,k=h;function a(a){var b=j(32),e=a.attachments,f=a.connectBottom,g=a.connectTop,h=a.hasMessageEmphasisRing,l=a.hasText,m=a.isSearchPluginAttachment,n=a.isSecureMessage,o=a.mediaRenderQpl,p=a.message,q=a.navigateToRouteForMediaViewer,r=a.nextMessage,s=a.outgoing,t=a.prevMessage;a=a.renderAttachment;e=c("useXMAV2Provider")(e);if(m){o==null?void 0:o.endSuccess();return null}if(a!=null&&n){b[0]!==a||b[1]!==p||b[2]!==t||b[3]!==r||b[4]!==s||b[5]!==l||b[6]!==o?(m=a(p,t,r,s,l,o),b[0]=a,b[1]=p,b[2]=t,b[3]=r,b[4]=s,b[5]=l,b[6]=o,b[7]=m):m=b[7];return m}if(e!=null&&!n){b[8]!==o||b[9]!==r||b[10]!==t?(a=function(){return k.jsx(c("MWUnsupportedXMA.react"),{mediaRenderQpl:o,nextMessage:r,prevMessage:t})},b[8]=o,b[9]=r,b[10]=t,b[11]=a):a=b[11];b[12]!==f||b[13]!==g||b[14]!==o||b[15]!==s||b[16]!==e?(m=k.jsx(c("MWXMAV2AttachmentContainer.react"),{connectBottom:f,connectTop:g,mediaRenderQpl:o,outgoing:s,xmaDataclass:e}),b[12]=f,b[13]=g,b[14]=o,b[15]=s,b[16]=e,b[17]=m):m=b[17];b[18]!==a||b[19]!==m?(n=k.jsx(c("CometErrorBoundary.react"),{fallback:a,children:m}),b[18]=a,b[19]=m,b[20]=n):n=b[20];return n}b[21]!==p||b[22]!==s||b[23]!==o||b[24]!==r||b[25]!==t||b[26]!==f||b[27]!==g||b[28]!==h||b[29]!==l||b[30]!==q?(e=(i||(i=d("I64"))).to_string(p.threadKey)===c("MetaConfig")._("83")&&!s&&c("gkx")("5131")?k.jsx(c("MWUnsupportedXMA.react"),{mediaRenderQpl:o,nextMessage:r,prevMessage:t}):k.jsx(c("MWMessageListAttachmentContainer.react"),{connectBottom:f,connectTop:g,hasEmphasisRing:h,hasText:l,mediaRenderQpl:o,message:p,navigateToRouteForMediaViewer:q,outgoing:s}),b[21]=p,b[22]=s,b[23]=o,b[24]=r,b[25]=t,b[26]=f,b[27]=g,b[28]=h,b[29]=l,b[30]=q,b[31]=e):e=b[31];return e}g["default"]=a}),98);
__d("MWPMessageFooter.react",["react","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||(i=d("react"));b=i;var k=b.Children,l=b.c,m={container:{backgroundColor:"x1eb86dx",display:"x78zum5",height:"xmix8c7",justifyContent:"x13a6bvl",position:"x1n2onr6",width:"xh8yej3",zIndex:"x1vjfegm",$$css:!0},items:{display:"x78zum5",transform:"x11z5cog",$$css:!0}};function a(a){var b=l(18),d=a.children,e=a.itemsXstyle,f=a.outgoing;a=a.xstyle;var g,i,n,o;if(b[0]!==d||b[1]!==a||b[2]!==e){o=Symbol["for"]("react.early_return_sentinel");bb0:{var p=k.toArray(d).filter(Boolean);if(p.length===0){o=null;break bb0}b[7]!==a?(g=(h||(h=c("stylex")))(m.container,a),b[7]=a,b[8]=g):g=b[8];i="none";var q;b[9]!==e?(q=function(a,b){return j.jsx("div",{className:(h||(h=c("stylex")))(m.items,e),role:"none",children:a},""+b)},b[9]=e,b[10]=q):q=b[10];n=p.map(q)}b[0]=d;b[1]=a;b[2]=e;b[3]=g;b[4]=i;b[5]=n;b[6]=o}else g=b[3],i=b[4],n=b[5],o=b[6];if(o!==Symbol["for"]("react.early_return_sentinel"))return o;b[11]!==f?(p=f?null:j.jsx("div",{className:"x1ohifd9 x1c4vz4f xs83m0k",role:"none"}),b[11]=f,b[12]=p):p=b[12];b[13]!==g||b[14]!==i||b[15]!==n||b[16]!==p?(q=j.jsxs("div",{className:g,role:i,children:[n,p]}),b[13]=g,b[14]=i,b[15]=n,b[16]=p,b[17]=q):q=b[17];return q}g.MWPMessageFooter=a}),98);
__d("MWPMessageLoggingWrapper.react",["CometHeroInteractionWithDiv.react","MWChatInteraction","react","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=(i||(i=d("react"))).c,k=i;function a(a){var b=j(15),e=a.children,f=a.messageId,g=a.optimisticAttachmentId,i=a.optimisticMessageId;a=a.xstyle;var l;b[0]!==f?(l=d("MWChatInteraction").get(f),b[0]=f,b[1]=l):l=b[1];f=l;b[2]!==i?(l=d("MWChatInteraction").get(i),b[2]=i,b[3]=l):l=b[3];i=l;b[4]!==g?(l=g!=null?d("MWChatInteraction").get(g):null,b[4]=g,b[5]=l):l=b[5];g=l;l=(f=(l=f)!=null?l:i)!=null?f:g;if(l==null){b[6]!==a?(i=(h||(h=c("stylex")))(a),b[6]=a,b[7]=i):i=b[7];b[8]!==i||b[9]!==e?(f=k.jsx("div",{className:i,children:e}),b[8]=i,b[9]=e,b[10]=f):f=b[10];return f}else{b[11]!==l||b[12]!==a||b[13]!==e?(g=k.jsx(c("CometHeroInteractionWithDiv.react"),{interactionDesc:"MESSAGE_RENDER",interactionUUID:l,pageletName:"Message",xstyle:a,children:e}),b[11]=l,b[12]=a,b[13]=e,b[14]=g):g=b[14];return g}}g["default"]=a}),98);
__d("MWV2ChatUnsupportedMessage.react",["fbt","FBLogger","MWV2TombstonedMessage.react","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=(i||(i=d("react"))).c,k=i;function a(a){var b=j(3);a=a.isOutgoing;c("FBLogger")("messenger_browser_clients").warn("Unsupported message type");var d;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(d=h._("__JHASH__pL9gn5HLY3n__JHASH__"),b[0]=d):d=b[0];d=d;b[1]!==a?(d=k.jsx(c("MWV2TombstonedMessage.react"),{isOutgoing:a,children:d}),b[1]=a,b[2]=d):d=b[2];return d}g.MWV2ChatUnsupportedMessage=a}),226);
__d("MWMessageRowMessageComponent.react",["CometErrorBoundary.react","GroupsCometChatsEngagementLogger","I64","Int64Hooks","LSMessagingThreadTypeUtil","MWBlockedTombstoneMessage.react","MWBlockingProtectionLogging","MWClickedMessageContext.react","MWGroupBlockingProtectionUtils","MWMessageReactionsContainer.react","MWMessageRowAttachment.react","MWPBaseMessage.react","MWPMessageFooter.react","MWPMessageLoggingWrapper.react","MWPMessageReactions.react","MWV2ChatBubbleContainer.react","MWV2ChatEmoji.react","MWV2ChatErrorBubble.react","MWV2ChatText.react","MWV2ChatUnsentMessage.react","MWV2ChatUnsupportedMessage.react","MWV2MessageTimestampTooltip.react","MWXPressable.react","MetaConfig","ReQL","asyncToGeneratorRuntime","cr:120","justknobx","mwpMessageIsReply","promiseDone","react","useIsMultiReactionEnabled","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=j||(j=d("react"));e=j;f=e.memo;var l=e.useEffect,m=e.c;function a(a){var e=m(86),f=a.attachments,g=a.hasClickState,j=a.hasMessageEmphasisRing,n=a.isFirstMessageInGroup,o=a.isLastMessageInGroup,p=a.isSearchPluginAttachment,q=a.isSecureMessage,r=a.mediaRenderQpl,s=a.message,t=a.navigateToRouteForMediaViewer,u=a.nextMessage,v=a.offlineAttachmentId,w=a.outgoing,x=a.prevMessage,y=a.reactions,z=a.reactionsV2,A=a.renderAttachment;a=a.threadType;var B=g===void 0?!1:g;g=c("MWClickedMessageContext.react").useHook();var C=g.clickedMessageId,D=g.fetchMessageSeenCount,E=g.hasError,F=g.setClickedMessageId,G=(h||(h=c("useReStore")))();e[0]!==a?(g=d("LSMessagingThreadTypeUtil").isDiscoverablePublicBroadcastChannel(a),e[0]=a,e[1]=g):g=e[1];var H=g,I=d("useIsMultiReactionEnabled").useIsMultiReactEnabled(s.threadKey);e[2]!==s?(a=c("mwpMessageIsReply")(s),e[2]=s,e[3]=a):a=e[3];var J=a;e[4]!==G||e[5]!==s.threadKey||e[6]!==s.messageId||e[7]!==C||e[8]!==E||e[9]!==F||e[10]!==D?(g=function(){if(window.getSelection().toString()!=="")return;c("promiseDone")(b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(G.tables.threads).getKeyRange(s.threadKey))),b=a==null?null:yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(G.tables.community_folders).getKeyRange(a.parentThreadKey));a!=null&&b!=null&&d("GroupsCometChatsEngagementLogger").log({action:"tap",client_extras:{mid:s.messageId},community_id:(i||(i=d("I64"))).to_string(b.folderId),event:"render_seen_count",group_id:i.to_string(b.fbGroupId),source:"message_bubble",surface:"thread_view",thread_id:i.to_string(a.threadKey)});if(C===s.messageId&&!E)return F(null);else return D(s.threadKey,s.messageId,b)})())},a=[G,C,s.messageId,s.threadKey,E,F,D],e[4]=G,e[5]=s.threadKey,e[6]=s.messageId,e[7]=C,e[8]=E,e[9]=F,e[10]=D,e[11]=g,e[12]=a):(g=e[11],a=e[12]);var K=d("Int64Hooks").useCallbackInt64(g,a),L=d("MWBlockingProtectionLogging").useLogTapToReviewAction(s);e[13]!==r||e[14]!==s.threadKey||e[15]!==A||e[16]!==p||e[17]!==q?(g=function(){r==null?void 0:r.addPoint("render-message-row-message-component",{bool:{is_chat_entity_thread:(i||(i=d("I64"))).to_string(s.threadKey)===c("MetaConfig")._("83"),is_message_row_message_componentrender_attachment_prop_set:A!=null,is_search_plugin:p,is_secure_message:q}})},a=[p,q,r,s.threadKey,A],e[13]=r,e[14]=s.threadKey,e[15]=A,e[16]=p,e[17]=q,e[18]=g,e[19]=a):(g=e[18],a=e[19]);l(g,a);e[20]!==w||e[21]!==J?(g=function(){return k.jsx(c("MWV2ChatErrorBubble.react"),{isOutgoing:w,isReply:J})},e[20]=w,e[21]=J,e[22]=g):g=e[22];e[23]!==f||e[24]!==j||e[25]!==p||e[26]!==q||e[27]!==r||e[28]!==s||e[29]!==t||e[30]!==u||e[31]!==w||e[32]!==x||e[33]!==A?(a=function(a,b,d){return k.jsx(c("MWMessageRowAttachment.react"),{attachments:f,connectBottom:b,connectTop:a,hasMessageEmphasisRing:j,hasText:d,isSearchPluginAttachment:p,isSecureMessage:q,mediaRenderQpl:r,message:s,navigateToRouteForMediaViewer:t,nextMessage:u,outgoing:w,prevMessage:x,renderAttachment:A})},e[23]=f,e[24]=j,e[25]=p,e[26]=q,e[27]=r,e[28]=s,e[29]=t,e[30]=u,e[31]=w,e[32]=x,e[33]=A,e[34]=a):a=e[34];var M;e[35]!==j||e[36]!==q||e[37]!==s?(M=function(){return k.jsx(c("MWV2ChatEmoji.react"),{hasEmphasisRing:j,isSecureMessage:q,message:s})},e[35]=j,e[36]=q,e[37]=s,e[38]=M):M=e[38];var N;e[39]!==j||e[40]!==s||e[41]!==w||e[42]!==q?(N=function(a,b,d,e){return k.jsx(c("MWV2ChatBubbleContainer.react"),{connectBottom:d,connectTop:b,hasEmphasisRing:j,message:s,outgoing:w,precedesXMA:e,children:k.jsx(c("MWV2ChatText.react"),{isSecureMessage:q,message:s,outgoing:w})})},e[39]=j,e[40]=s,e[41]=w,e[42]=q,e[43]=N):N=e[43];var O;e[44]!==s||e[45]!==v||e[46]!==H||e[47]!==B||e[48]!==K?(O=function(a,d){a=k.jsx(c("MWPMessageLoggingWrapper.react"),{messageId:s.messageId,optimisticAttachmentId:v,optimisticMessageId:s.offlineThreadingId,xstyle:d,children:H&&!c("justknobx")._("641")&&b("cr:120")?k.jsx(b("cr:120"),{message:s,children:a}):k.jsx(c("MWV2MessageTimestampTooltip.react"),{message:s,children:a})});return B?k.jsx(c("MWXPressable.react"),{onPress:K,overlayDisabled:!0,xstyle:d,children:a}):a},e[44]=s,e[45]=v,e[46]=H,e[47]=B,e[48]=K,e[49]=O):O=e[49];var P;e[50]!==I||e[51]!==z||e[52]!==w||e[53]!==y||e[54]!==s?(P=function(){if(I)return null;var a=z!=null&&z.length>0;return k.jsx(d("MWPMessageFooter.react").MWPMessageFooter,{outgoing:w,children:!a&&y.length<1?null:k.jsx(d("MWPMessageReactions.react").MWPMessageReactions,{message:s,outgoing:w,reactions:y,reactionsV2:a?z:void 0,children:function(b,d,e,f,g){return k.jsx(c("MWMessageReactionsContainer.react"),{count:d,emojis:b,message:f,reactions:e,reactionsV2:a?z:void 0,threadKey:g})}})})},e[50]=I,e[51]=z,e[52]=w,e[53]=y,e[54]=s,e[55]=P):P=e[55];var Q=d("MWGroupBlockingProtectionUtils").useShouldEnableBlockingProtection(s.threadKey)?function(a){var b=function(){a(),L()};return k.jsx(d("MWBlockedTombstoneMessage.react").MWBlockedTombstoneMessage,{isLastMessageInGroup:o,messageId:s.messageId,onClick:b,source:d("MWBlockedTombstoneMessage.react").MWBlockedTombstoneMessageSource.ORIGINAL_MESSAGE})}:void 0,R;e[56]!==s||e[57]!==q||e[58]!==w?(R=function(){return k.jsx(c("MWV2MessageTimestampTooltip.react"),{message:s,children:k.jsx(d("MWV2ChatUnsentMessage.react").MWV2ChatUnsentMessage,{isSecureMessage:q,message:s,outgoing:w})})},e[56]=s,e[57]=q,e[58]=w,e[59]=R):R=e[59];var S;e[60]!==s||e[61]!==w?(S=function(){return k.jsx(c("MWV2MessageTimestampTooltip.react"),{message:s,children:k.jsx(d("MWV2ChatUnsupportedMessage.react").MWV2ChatUnsupportedMessage,{isOutgoing:w})})},e[60]=s,e[61]=w,e[62]=S):S=e[62];var T;e[63]!==n||e[64]!==o||e[65]!==p||e[66]!==q||e[67]!==r||e[68]!==s||e[69]!==u||e[70]!==w||e[71]!==x||e[72]!==y||e[73]!==z||e[74]!==a||e[75]!==M||e[76]!==N||e[77]!==O||e[78]!==P||e[79]!==Q||e[80]!==R||e[81]!==S?(T=k.jsx(c("MWPBaseMessage.react"),{checkEmoticon:!0,isFirstMessageInGroup:n,isLastMessageInGroup:o,isSearchPluginAttachment:p,isSecureMessage:q,mediaRenderQpl:r,message:s,nextMessage:u,outgoing:w,prevMessage:x,reactions:y,reactionsV2:z,renderAttachment:a,renderEmoji:M,renderMessageBubble:N,renderMessageContainer:O,renderMessageFooter:P,renderMessageFromBlockee:Q,renderUnsentMessage:R,renderUnsupportedMessage:S}),e[63]=n,e[64]=o,e[65]=p,e[66]=q,e[67]=r,e[68]=s,e[69]=u,e[70]=w,e[71]=x,e[72]=y,e[73]=z,e[74]=a,e[75]=M,e[76]=N,e[77]=O,e[78]=P,e[79]=Q,e[80]=R,e[81]=S,e[82]=T):T=e[82];e[83]!==g||e[84]!==T?(n=k.jsx(c("CometErrorBoundary.react"),{fallback:g,children:T}),e[83]=g,e[84]=T,e[85]=n):n=e[85];return n}e=f(a);g.MWMessageRowMessageComponent=e}),98);
__d("MWSupportTranslationsContext.react",["react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));c=h;var j=c.useContext;c.useMemo;var k=c.useState,l=c.c,m={setShowToggleMustache:function(){},setShowUntranslatedText:function(){},showToggleMustache:!1,showUntranslatedText:!1},n=i.createContext(m);function a(a){var b,c=l(6),d=a.children;a=a.value;a=a===void 0?m:a;b=k((b=a==null?void 0:a.showUntranslatedText)!=null?b:!1);var e=b[0];b=b[1];a=k((a=a==null?void 0:a.showToggleMustache)!=null?a:!1);var f=a[0];a=a[1];c[0]!==f||c[1]!==e?(a={setShowToggleMustache:a,setShowUntranslatedText:b,showToggleMustache:f,showUntranslatedText:e},c[0]=f,c[1]=e,c[2]=a):a=c[2];b=a;f=b;c[3]!==f||c[4]!==d?(e=i.jsx(n.Provider,{value:f,children:d}),c[3]=f,c[4]=d,c[5]=e):e=c[5];return e}function b(){return j(n)}g.MWSupportTranslationsContextProvider=a;g.useMWSupportTranslationsContext=b}),98);
__d("MWHighlyForwardedIndicator.react",["fbt","LSMessagingThreadTypeUtil","MDSForwardStackSvgIcon.react","MWXText.react","coerceMessagingThreadTypeToLSThreadType","react","requireDeferred","useSinglePartialViewImpression"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=(i||(i=d("react"))).c,k=i,l=c("requireDeferred")("MwbHighlyForwardedIndicatorImpressionFalcoEvent").__setRef("MWHighlyForwardedIndicator.react");function a(a){var b=j(11),e=a.forwardScore,f=a.mid,g=a.threadType;b[0]!==e||b[1]!==g||b[2]!==f?(a=function(){l.onReady(function(a){a.log(function(){return{limit:e,mid:g!=null&&d("LSMessagingThreadTypeUtil").isArmadilloSecure(g)?void 0:f,thread_type:g!=null?c("coerceMessagingThreadTypeToLSThreadType")(g):void 0}})})},b[0]=e,b[1]=g,b[2]=f,b[3]=a):a=b[3];a=a;var i;b[4]!==a?(i={onImpressionStart:a},b[4]=a,b[5]=i):i=b[5];a=c("useSinglePartialViewImpression")(i);var m;b[6]===Symbol["for"]("react.memo_cache_sentinel")?(i=k.jsx(c("MDSForwardStackSvgIcon.react"),{color:"tertiary",size:16}),m="x1h0ha7o",b[6]=i,b[7]=m):(i=b[6],m=b[7]);var n;b[8]===Symbol["for"]("react.memo_cache_sentinel")?(n=h._("__JHASH__hxhFsSrRndH__JHASH__"),b[8]=n):n=b[8];b[9]!==a?(i=k.jsxs(k.Fragment,{children:[i,k.jsx("span",{className:m,children:k.jsx(c("MWXText.react"),{color:"tertiary",ref:a,type:"meta4",children:n})})]}),b[9]=a,b[10]=i):i=b[10];return i}g["default"]=a}),226);
__d("MWPForwardedContent",["fbt","I64","LSIntEnum","MWPMessageAuthor.react","MessagingAttachmentType","ReQL","ReQLSuspense","mwpMessageHasAttachment","react","useReStore"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l;b=j||d("react");b.useMemo;var m=b.c;function n(a){if((k||(k=d("I64"))).equal(a.attachmentType,(l||(l=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").XMA)))return a.defaultCtaType==="xma_web_url";else return!1}function o(a){if((k||(k=d("I64"))).equal(a.attachmentType,(l||(l=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").ANIMATED_IMAGE)))return!0;else return(k||(k=d("I64"))).equal(a.attachmentType,(l||(l=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").IMAGE))}function p(a,b,e){var g=m(28),j=(i||(i=c("useReStore")))(),p=a.messageId,q=a.threadKey,r;g[0]!==a?(r=c("mwpMessageHasAttachment")(a),g[0]=a,g[1]=r):r=g[1];var s=r;g[2]!==s||g[3]!==j||g[4]!==q||g[5]!==p?(a=function(){if(s)return d("ReQL").fromTableAscending(j.tables.attachments).getKeyRange(q,p);else return d("ReQL").empty()},r=[j,p,q,s],g[2]=s,g[3]=j,g[4]=q,g[5]=p,g[6]=a,g[7]=r):(a=g[6],r=g[7]);a=d("ReQLSuspense").useFirst(a,r,f.id+":63");if(b)if(a!=null)if(n(a)){g[8]===Symbol["for"]("react.memo_cache_sentinel")?(r=h._("__JHASH___8ZpqsY3Jrg__JHASH__"),g[8]=r):r=g[8];b=r}else if(o(a)){g[9]===Symbol["for"]("react.memo_cache_sentinel")?(r=h._("__JHASH__INRUrq18hhv__JHASH__"),g[9]=r):r=g[9];b=r}else if((k||(k=d("I64"))).equal(a.attachmentType,(l||(l=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").VIDEO))){g[10]===Symbol["for"]("react.memo_cache_sentinel")?(r=h._("__JHASH__Z71bv2q5yoA__JHASH__"),g[10]=r):r=g[10];b=r}else{g[11]===Symbol["for"]("react.memo_cache_sentinel")?(r=h._("__JHASH__8h2fNslikTS__JHASH__"),g[11]=r):r=g[11];b=r}else{g[12]===Symbol["for"]("react.memo_cache_sentinel")?(r=h._("__JHASH__8h2fNslikTS__JHASH__"),g[12]=r):r=g[12];b=r}else if(a!=null)if(e!=null)if(n(a)){g[13]!==e?(r=h._("__JHASH__5GN3g82hBzH__JHASH__",[h._param("name",e)]),g[13]=e,g[14]=r):r=g[14];b=r}else if(o(a)){g[15]!==e?(r=h._("__JHASH__NQwzfDxVOf0__JHASH__",[h._param("name",e)]),g[15]=e,g[16]=r):r=g[16];b=r}else if((k||(k=d("I64"))).equal(a.attachmentType,(l||(l=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").VIDEO))){g[17]!==e?(r=h._("__JHASH__QvgCMGMfMHB__JHASH__",[h._param("name",e)]),g[17]=e,g[18]=r):r=g[18];b=r}else{g[19]!==e?(r=h._("__JHASH__1jGDZrisR_E__JHASH__",[h._param("name",e)]),g[19]=e,g[20]=r):r=g[20];b=r}else if(n(a)){g[21]===Symbol["for"]("react.memo_cache_sentinel")?(r=h._("__JHASH__QhCmPJ-QbeG__JHASH__"),g[21]=r):r=g[21];b=r}else if(o(a)){g[22]===Symbol["for"]("react.memo_cache_sentinel")?(r=h._("__JHASH__vFSMWshNg-J__JHASH__"),g[22]=r):r=g[22];b=r}else if((k||(k=d("I64"))).equal(a.attachmentType,(l||(l=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").VIDEO))){g[23]===Symbol["for"]("react.memo_cache_sentinel")?(r=h._("__JHASH__U5_TMTE9DWx__JHASH__"),g[23]=r):r=g[23];b=r}else{g[24]===Symbol["for"]("react.memo_cache_sentinel")?(a=h._("__JHASH__CmZMizVeMX7__JHASH__"),g[24]=a):a=g[24];b=a}else if(e!=null){g[25]!==e?(r=h._("__JHASH__1jGDZrisR_E__JHASH__",[h._param("name",e)]),g[25]=e,g[26]=r):r=g[26];b=r}else{g[27]===Symbol["for"]("react.memo_cache_sentinel")?(a=h._("__JHASH__CmZMizVeMX7__JHASH__"),g[27]=a):a=g[27];b=a}return b}function a(a,b){var c=d("MWPMessageAuthor.react").useAuthorName();c=c[0];return p(a,b,c)}g.useTitle=a}),226);
__d("MWXIconForwardAction",["MWXSvgIcon","SVGIcon","cr:12435","gkx"],(function(a,b,c,d,e,f,g){"use strict";a=d("MWXSvgIcon").mwxSvgIcon(d("SVGIcon").svgIcon(b("cr:12435")),c("gkx")("23219"));g["default"]=a}),98);
__d("MWForwardedContent.react",["BaseIsDecorativeContext","I64","MWHighlyForwardedIndicator.react","MWPForwardedContent","MWXIconForwardAction","MWXIconStrict.react","MWXRow.react","MWXRowItem.react","MWXText.react","MWXThreadThemeColor","gkx","justknobx","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=(h||(h=d("react"))).c,k=h,l=c("justknobx")._("1649"),m=d("MWXThreadThemeColor").mwxThreadThemeColor("var(--chat-admin-text-color, var(--placeholder-text))");function a(a){var b=j(9),e=a.message,f=a.outgoing;a=a.threadType;f=d("MWPForwardedContent").useTitle(e,f);var g=e.forwardScore!=null?(i||(i=d("I64"))).to_int32(e.forwardScore):0;g=c("gkx")("24141")&&l!==0&&g>=l;if(b[0]!==g||b[1]!==e.forwardScore||b[2]!==e.messageId||b[3]!==a||b[4]!==f){var h;h=g?k.jsx(c("MWHighlyForwardedIndicator.react"),{forwardScore:(i||(i=d("I64"))).to_string((h=e.forwardScore)!=null?h:(i||(i=d("I64"))).zero),mid:e.messageId,threadType:a}):k.jsxs(c("MWXRow.react"),{paddingHorizontal:0,paddingVertical:0,spacing:4,verticalAlign:"center",children:[k.jsx(c("MWXRowItem.react"),{children:k.jsx(c("BaseIsDecorativeContext").Provider,{value:!0,children:k.jsx(c("MWXIconStrict.react"),{color:m,icon:c("MWXIconForwardAction"),size:12})})}),k.jsx(c("MWXRowItem.react"),{children:k.jsx(c("MWXText.react"),{color:"tertiary",type:"meta4",children:k.jsx("span",{className:"x1aimgj9",children:f})})})]});b[0]=g;b[1]=e.forwardScore;b[2]=e.messageId;b[3]=a;b[4]=f;b[5]=h}else h=b[5];g=h;b[6]===Symbol["for"]("react.memo_cache_sentinel")?(e="x6s0dn4 x78zum5 xg8j3zb x1nn3v0j",b[6]=e):e=b[6];b[7]!==g?(a=k.jsx("div",{className:e,children:g}),b[7]=g,b[8]=a):a=b[8];return a}g["default"]=a}),98);
__d("MWXIconForward",["MWXSvgIcon","SVGIcon","cr:12436","gkx"],(function(a,b,c,d,e,f,g){"use strict";a=d("MWXSvgIcon").mwxSvgIcon(d("SVGIcon").svgIcon(b("cr:12436")),c("gkx")("23219"));g["default"]=a}),98);
__d("useMWReplySnippetContent",["fbt","Actor","I64","MWPMessageAuthor.react","react","useMWIsReplyToAuthor","useMWPIsMessagePinned"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=(i||d("react")).c;function a(a,b){var e=k(3),f=c("useMWPIsMessagePinned")(a),g=d("MWPMessageAuthor.react").useAuthorName();g=g[0];var i=d("Actor").useActor();i=i[0];i=i===(j||(j=d("I64"))).to_string(a.senderId);var l=c("useMWIsReplyToAuthor")(a);if(!f||i||l)return a.replySnippet;e[0]!==b||e[1]!==g?(f=b?h._("__JHASH__lpeJtmI6peT__JHASH__").toString():h._("__JHASH__bGQxu-uwmpe__JHASH__",[h._param("name",g)]).toString(),e[0]=b,e[1]=g,e[2]=f):f=e[2];return f}g["default"]=a}),226);
__d("MWReplySnippet.react",["I64","LSIntEnum","LSMessageReplySourceTypeV2","LSMessagingThreadTypeUtil","MWEditedEyebrow.react","MWXIconForward","MWXIconForwardAction","MWXIconReply","MWXIconStrict.react","MWXRow.react","MWXRowItem.react","MWXText.react","MWXThreadThemeColor","ReQL","ReQLSuspense","isMWEditedMessage","react","useMWReplySnippetContent","useReStore","useStringWithSubstitutions"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l=(i||(i=d("react"))).c,m=i,n={separator:{paddingEnd:"x150jy0e",paddingStart:"x1e558r4",$$css:!0}},o=d("MWXThreadThemeColor").mwxThreadThemeColor("var(--chat-admin-text-color, var(--placeholder-text))");function p(a){var b=l(3);a=a.replySourceType;if(a==null)return null;if((j||(j=d("I64"))).equal(a,(k||(k=d("LSIntEnum"))).ofNumber(c("LSMessageReplySourceTypeV2").MESSAGE))||(j||(j=d("I64"))).equal(a,(k||(k=d("LSIntEnum"))).ofNumber(c("LSMessageReplySourceTypeV2").STORY))||(j||(j=d("I64"))).equal(a,(k||(k=d("LSIntEnum"))).ofNumber(c("LSMessageReplySourceTypeV2").HIGHLIGHTS_TAB_POST_REPLY))){var e;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(e=m.jsx(c("MWXIconStrict.react"),{color:o,icon:c("MWXIconReply"),size:12}),b[0]=e):e=b[0];return e}else if((j||(j=d("I64"))).equal(a,(k||(k=d("LSIntEnum"))).ofNumber(c("LSMessageReplySourceTypeV2").FORWARD))||(j||(j=d("I64"))).equal(a,(k||(k=d("LSIntEnum"))).ofNumber(c("LSMessageReplySourceTypeV2").IG_STORY_SHARE))||(j||(j=d("I64"))).equal(a,(k||(k=d("LSIntEnum"))).ofNumber(c("LSMessageReplySourceTypeV2").FB_STORY_SHARE))){b[1]===Symbol["for"]("react.memo_cache_sentinel")?(e=m.jsx(c("MWXIconStrict.react"),{color:o,icon:c("MWXIconForwardAction"),size:12}),b[1]=e):e=b[1];return e}else if((j||(j=d("I64"))).equal(a,(k||(k=d("LSIntEnum"))).ofNumber(c("LSMessageReplySourceTypeV2").FB_STORY_MENTION))){b[2]===Symbol["for"]("react.memo_cache_sentinel")?(e=m.jsx(c("MWXIconStrict.react"),{color:o,icon:c("MWXIconForward"),size:12}),b[2]=e):e=b[2];return e}return null}function a(a){var b=l(20),e=a.enableEditHistory,g=a.message;a=a.outgoing;e=e===void 0?!0:e;var i=(h||(h=c("useReStore")))();a=c("useMWReplySnippetContent")(g,a);var j;b[0]!==i.tables.threads||b[1]!==g.threadKey?(j=function(){return d("ReQL").fromTableAscending(i.tables.threads,["threadType"]).getKeyRange(g.threadKey).map(function(a){return a.threadType})},b[0]=i.tables.threads,b[1]=g.threadKey,b[2]=j):j=b[2];var k;b[3]!==i||b[4]!==g.threadKey?(k=[i,g.threadKey],b[3]=i,b[4]=g.threadKey,b[5]=k):k=b[5];j=d("ReQLSuspense").useFirst(j,k,f.id+":101");k=j==null?!1:d("LSMessagingThreadTypeUtil").isArmadilloSecure(j);k=(j=d("useStringWithSubstitutions").useStringWithSubstitutions(k?a:null,g.threadKey))!=null?j:a;if(a==null||a.trim().length===0)return null;b[6]!==g?(j=c("isMWEditedMessage")(g),b[6]=g,b[7]=j):j=b[7];a=j;j=g==null?void 0:g.replySourceTypeV2;var o;b[8]!==j?(o=m.jsx(c("MWXRowItem.react"),{children:m.jsx(p,{replySourceType:j})}),b[8]=j,b[9]=o):o=b[9];b[10]===Symbol["for"]("react.memo_cache_sentinel")?(j="x1aimgj9",b[10]=j):j=b[10];var q;b[11]!==a||b[12]!==e?(q=a&&m.jsx(d("MWEditedEyebrow.react").MWEditedEyebrow,{enableEditHistory:e,separatorStyle:n.separator}),b[11]=a,b[12]=e,b[13]=q):q=b[13];b[14]!==k||b[15]!==q?(a=m.jsx(c("MWXRowItem.react"),{children:m.jsx(c("MWXText.react"),{color:"tertiary",type:"meta4",children:m.jsxs("span",{className:j,children:[k,q]})})}),b[14]=k,b[15]=q,b[16]=a):a=b[16];b[17]!==o||b[18]!==a?(e=m.jsxs(c("MWXRow.react"),{paddingHorizontal:0,paddingTop:10,paddingVertical:4,spacing:4,testid:void 0,verticalAlign:"center",children:[o,a]}),b[17]=o,b[18]=a,b[19]=e):e=b[19];return e}g["default"]=a}),98);
__d("MWCollapsibleAdminMessages.react",["fbt","BaseView.react","MWMessageRow.react","MWPMessageListColumn.react","MWV2ChatAdminMessage.react","MWV2MessageActionsVisibility.react","MWXLink.react","MWXText.react","ODS","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=i||(i=d("react"));b=i;var l=b.useState,m=b.c,n={collapsed:{paddingTop:"xz9dl7a",paddingBottom:"xsag5q8",$$css:!0},expanded:{paddingBottom:"x1120s5i",paddingTop:"xz9dl7a",position:"x1n2onr6",zIndex:"x1vjfegm",$$css:!0}};function a(a){var b=m(22),e=d("MWV2MessageActionsVisibility.react").useStopHoveringRef(),f,g;b[0]!==a?(f=a.messages,g=babelHelpers.objectWithoutPropertiesLoose(a,["messages"]),b[0]=a,b[1]=f,b[2]=g):(f=b[1],g=b[2]);a=l(!1);var i=a[0],o=a[1];b[3]!==i?(a=function(){(j||(j=d("ODS"))).bumpEntityKey(3303,"collapsible_admin_messages",i?"hide_messages":"show_messages"),o(function(a){return!a})},b[3]=i,b[4]=a):a=b[4];var p=i?n.expanded:n.collapsed,q;b[5]!==i||b[6]!==f?(q=i?h._("__JHASH__k2cKnwAsyRP__JHASH__"):h._("__JHASH__ZpmrUMcuTWA__JHASH__",[h._param("number of admin udpates",f.length)]),b[5]=i,b[6]=f,b[7]=q):q=b[7];var r;b[8]!==p||b[9]!==q?(r=k.jsx(c("BaseView.react"),{xstyle:p,children:q}),b[8]=p,b[9]=q,b[10]=r):r=b[10];b[11]!==a||b[12]!==r?(p=k.jsx(c("MWXText.react"),{type:"bodyLink4",children:k.jsx(c("MWXLink.react"),{color_DEPRECATED:"highlight",onClick:a,role:"button",children:r})}),b[11]=a,b[12]=r,b[13]=p):p=b[13];b[14]!==i||b[15]!==g||b[16]!==f||b[17]!==e?(q=i?f.map(function(a,b){return k.createElement(d("MWMessageRow.react").MWMessageRow,babelHelpers["extends"]({},g,{key:a.messageId,message:a,nextMessage:f[b+1],prevMessage:f[b-1],stopHoveringRef:e}))}):null,b[14]=i,b[15]=g,b[16]=f,b[17]=e,b[18]=q):q=b[18];b[19]!==p||b[20]!==q?(a=k.jsx(d("MWPMessageListColumn.react").MWPMessageListColumnShrinkwrap,{centered:!0,children:k.jsxs(d("MWV2ChatAdminMessage.react").MWV2ChatAdminMessageContainer,{children:[p,q]})}),b[19]=p,b[20]=q,b[21]=a):a=b[21];return a}g["default"]=a}),226);
__d("MWComposerPlaceholder.react",["react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||(h=d("react"))).c,j=h;function a(a){var b=i(3);a=a.height;var c;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(c="x1exxf4d x13fuv20 x178xt8z",b[0]=c):c=b[0];a=a.toString()+"px";b[1]!==a?(c=j.jsx("div",{className:c,style:{height:a}}),b[1]=a,b[2]=c):c=b[2];return c}g["default"]=a}),98);
__d("MWPArmadilloLoadingStateMessage.react",["fbt","MWXColumn.react","MWXColumnItem.react","MWXSpinner.react","MWXText.react","cr:6285","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=(i||(i=d("react"))).c,k=i;function a(a){var d=j(2);a=a.threadKey;a=b("cr:6285")(a);var e;d[0]!==a?(e=a?null:k.jsxs(c("MWXColumn.react"),{align:"center",id:"armadillo-loading-indicator-banner",paddingVertical:12,spacing:8,children:[k.jsx(c("MWXColumnItem.react"),{children:k.jsx(c("MWXSpinner.react"),{color:"disabled",size:20})}),k.jsx(c("MWXColumnItem.react"),{children:k.jsx(c("MWXText.react"),{type:"entityHeaderMeta1",children:h._("__JHASH__7VvIEysTDk2__JHASH__")})})]}),d[0]=a,d[1]=e):e=d[1];return e}g["default"]=a}),226);
__d("useMWLSProactiveWarningTables",["MWPreloadableQueries","MWThreadKey.react","ReQLSuspense","react","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=(i||d("react")).c;function a(){var a=j(11),b=d("MWThreadKey.react").useMWThreadKeyMemoizedExn(),e=(h||(h=c("useReStore")))(),g,i;a[0]!==e||a[1]!==b?(g=function(){return d("MWPreloadableQueries").getThreadBannerQuery(e,b)},i=[e,b],a[0]=e,a[1]=b,a[2]=g,a[3]=i):(g=a[2],i=a[3]);g=d("ReQLSuspense").useFirst(g,i,f.id+":31");var k;a[4]!==e||a[5]!==b?(i=function(){return d("MWPreloadableQueries").getProactiveWarningsForThreadQuery(e,b)},k=[e,b],a[4]=e,a[5]=b,a[6]=i,a[7]=k):(i=a[6],k=a[7]);i=d("ReQLSuspense").useFirst(i,k,f.id+":36");a[8]!==g||a[9]!==i?(k={banner:g,pwSettings:i},a[8]=g,a[9]=i,a[10]=k):k=a[10];return k}g["default"]=a}),98);
__d("useMWProactiveWarningPayloadMemo",["I64","Int64Hooks","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=(h||d("react")).c;function a(a){var b=j(7),c=a.banner,e=a.ignoreDismissTime,f=a.isPWDismissTimeSet,g=a.pwSettings,h=a.threadKey,k;b[0]!==g||b[1]!==c||b[2]!==e||b[3]!==f||b[4]!==h?(a=function(){if(g==null||c==null)return;var a=g.context,b=g.entryPoint,j=g.storyLocation,k=g.suspectId,l=g.tag,m=c.bannerId,n=c.cta1Title,o=c.cta2Title,p=c.heading,q=c.titleSectionOne;if(!((Boolean(e)||f)&&(i||(i=d("I64"))).equal(m,(i||(i=d("I64"))).of_string("7"))))return;if(k!=null&&a!=null&&j!=null&&b!=null&&l!=null&&p!=null&&o!=null&&n!=null&&q!=null)return{context:a,cta1Title:n,cta2Title:o,description:q,falco_event_data:{data:{entry_point:(i||(i=d("I64"))).to_int32(b),feedback_tags:[l],surface:i.to_int32(j)},impersonatedUser:{id:"0"},otherUser:{id:i.to_string(k)},reportedUser:{id:"0"},thread:{id:i.to_string(h),type:1}},header:p,threadKey:h}},k=[h,c,g,f,e],b[0]=g,b[1]=c,b[2]=e,b[3]=f,b[4]=h,b[5]=a,b[6]=k):(a=b[5],k=b[6]);return d("Int64Hooks").useMemoInt64(a,k)}g["default"]=a}),98);
__d("useMWProactiveWarningPayload",["I64","MWThreadKey.react","react","useMWLSProactiveWarningTables","useMWProactiveWarningPayloadMemo"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=(h||d("react")).c;function a(a,b){var e=j(8),f=d("MWThreadKey.react").useMWThreadKeyMemoizedExn(),g=c("useMWLSProactiveWarningTables")(),h=g.banner;g=g.pwSettings;if(e[0]!==b){var k;k=b!=null&&(i||(i=d("I64"))).equal((k=b.proactiveWarningDismissTime)!=null?k:(i||(i=d("I64"))).zero,(i||(i=d("I64"))).zero);e[0]=b;e[1]=k}else k=e[1];b=k;e[2]!==h||e[3]!==a||e[4]!==b||e[5]!==g||e[6]!==f?(k={banner:h,ignoreDismissTime:a,isPWDismissTimeSet:b,pwSettings:g,threadKey:f},e[2]=h,e[3]=a,e[4]=b,e[5]=g,e[6]=f,e[7]=k):k=e[7];return c("useMWProactiveWarningPayloadMemo")(k)}g["default"]=a}),98);
__d("MWPSafetyNoticesChatBlockedComposerDetails.react",["fbt","FDSButton.react","IXTProactiveWarningFollowUpActionsCell.react","LSFactory","LSSetProactiveWarningDismissTimeStoredProcedure","LsFrxMessengerFeedbackProactiveWarningBannerPrimaryActionTappedFalcoEvent","LsFrxMessengerFeedbackProactiveWarningBannerSecondaryActionTappedFalcoEvent","LsFrxMessengerFeedbackProactiveWarningBannerShownFalcoEvent","MDSTextPairing.react","MWThreadKey.react","MWXText.react","promiseDone","react","stylex","useMWProactiveWarningPayload","useReStore"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l=k||(k=d("react"));b=k;var m=b.useEffect,n=b.c,o={button:{width:"x5sxuk9",$$css:!0}};function a(a){var b=n(56),e=a.fallback,g=a.onClose;a=a.thread;var k=c("useMWProactiveWarningPayload")(void 0,a),p=(i||(i=c("useReStore")))(),q=d("MWThreadKey.react").useMWThreadKeyMemoizedExn(),r;b[0]!==k?(a=function(){k!=null&&c("LsFrxMessengerFeedbackProactiveWarningBannerShownFalcoEvent").log(function(){var a;return{data:babelHelpers["extends"]({},k.falco_event_data.data,{mute_duration:(a=k.falco_event_data.data.mute_duration)==null?void 0:a.toString(),selected_messages_count:(a=k.falco_event_data.data.selected_messages_count)==null?void 0:a.toString()}),impersonated_user:k.falco_event_data.impersonatedUser,other_user:k.falco_event_data.otherUser,reported_user:k.falco_event_data.reportedUser,thread:k.falco_event_data.thread}})},r=[k],b[0]=k,b[1]=a,b[2]=r):(a=b[1],r=b[2]);m(a,r);if(k==null)return e;b[3]!==k.header?(a=h._("__JHASH__I2SwG7QkbS2__JHASH__",[h._param("header value",k.header)]),b[3]=k.header,b[4]=a):a=b[4];r=a;b[5]!==k.description?(e=h._("__JHASH__kg4ss1ruH19__JHASH__",[h._param("message value",k.description)]),b[5]=k.description,b[6]=e):e=b[6];a=e;b[7]===Symbol["for"]("react.memo_cache_sentinel")?(e=(j||(j=c("stylex")))(o.button,!1),b[7]=e):e=b[7];var s;b[8]!==k.falco_event_data.data||b[9]!==k.falco_event_data.impersonatedUser||b[10]!==k.falco_event_data.otherUser||b[11]!==k.falco_event_data.reportedUser||b[12]!==k.falco_event_data.thread?(s=function(){c("LsFrxMessengerFeedbackProactiveWarningBannerSecondaryActionTappedFalcoEvent").log(function(){var a;return{data:babelHelpers["extends"]({},k.falco_event_data.data,{mute_duration:(a=k.falco_event_data.data.mute_duration)==null?void 0:a.toString(),selected_messages_count:(a=k.falco_event_data.data.selected_messages_count)==null?void 0:a.toString()}),impersonated_user:k.falco_event_data.impersonatedUser,other_user:k.falco_event_data.otherUser,reported_user:k.falco_event_data.reportedUser,thread:k.falco_event_data.thread}})},b[8]=k.falco_event_data.data,b[9]=k.falco_event_data.impersonatedUser,b[10]=k.falco_event_data.otherUser,b[11]=k.falco_event_data.reportedUser,b[12]=k.falco_event_data.thread,b[13]=s):s=b[13];var t;b[14]!==p||b[15]!==q||b[16]!==g?(t=function(){c("promiseDone")(p.runInTransaction(function(a){return c("LSSetProactiveWarningDismissTimeStoredProcedure")(c("LSFactory")(a),{threadKey:q})},"readwrite",void 0,void 0,f.id+":117"),g,g)},b[14]=p,b[15]=q,b[16]=g,b[17]=t):t=b[17];b[18]!==k.context||b[19]!==k.cta1Title||b[20]!==g||b[21]!==s||b[22]!==t?(e=l.jsx("div",{className:e,children:l.jsx(c("IXTProactiveWarningFollowUpActionsCell.react"),{context:k.context,label:k.cta1Title,onClose:g,onPress:s,setPWDismissTime:t})}),b[18]=k.context,b[19]=k.cta1Title,b[20]=g,b[21]=s,b[22]=t,b[23]=e):e=b[23];s=e;b[24]===Symbol["for"]("react.memo_cache_sentinel")?(t=(j||(j=c("stylex")))(o.button,!1),b[24]=t):t=b[24];b[25]!==k.cta2Title?(e=h._("__JHASH__lh-XuPg59Gs__JHASH__",[h._param("CTA text value",k.cta2Title)]),b[25]=k.cta2Title,b[26]=e):e=b[26];var u;b[27]!==k.falco_event_data.data||b[28]!==k.falco_event_data.impersonatedUser||b[29]!==k.falco_event_data.otherUser||b[30]!==k.falco_event_data.reportedUser||b[31]!==k.falco_event_data.thread||b[32]!==k.threadKey||b[33]!==p||b[34]!==g?(u=function(){c("LsFrxMessengerFeedbackProactiveWarningBannerPrimaryActionTappedFalcoEvent").log(function(){var a;return{data:babelHelpers["extends"]({},k.falco_event_data.data,{mute_duration:(a=k.falco_event_data.data.mute_duration)==null?void 0:a.toString(),selected_messages_count:(a=k.falco_event_data.data.selected_messages_count)==null?void 0:a.toString()}),impersonated_user:k.falco_event_data.impersonatedUser,other_user:k.falco_event_data.otherUser,reported_user:k.falco_event_data.reportedUser,thread:k.falco_event_data.thread}}),c("promiseDone")(p.runInTransaction(function(a){return c("LSSetProactiveWarningDismissTimeStoredProcedure")(c("LSFactory")(a),{threadKey:k.threadKey})},"readwrite",void 0,void 0,f.id+":156"),g,g)},b[27]=k.falco_event_data.data,b[28]=k.falco_event_data.impersonatedUser,b[29]=k.falco_event_data.otherUser,b[30]=k.falco_event_data.reportedUser,b[31]=k.falco_event_data.thread,b[32]=k.threadKey,b[33]=p,b[34]=g,b[35]=u):u=b[35];b[36]!==e||b[37]!==u?(t=l.jsx("div",{className:t,children:l.jsx(c("FDSButton.react"),{label:e,onPress:u,reduceEmphasis:!1,size:"medium",type:"secondary"})}),b[36]=e,b[37]=u,b[38]=t):t=b[38];e=t;b[39]!==a?(u=l.jsx(c("MWXText.react"),{align:"center",color:"secondary",type:"body4",children:a}),b[39]=a,b[40]=u):u=b[40];b[41]!==r?(t=l.jsx(c("MWXText.react"),{color:"primary",type:"bodyLink4",children:r}),b[41]=r,b[42]=t):t=b[42];b[43]!==u||b[44]!==t?(a=l.jsx(c("MDSTextPairing.react"),{body:u,headline:t,level:4,textAlign:"center"}),b[43]=u,b[44]=t,b[45]=a):a=b[45];b[46]===Symbol["for"]("react.memo_cache_sentinel")?(r="x78zum5 x1q0g3np x1qughib x14vqqas xh8yej3",b[46]=r):r=b[46];b[47]!==s||b[48]!==e?(u=l.jsxs("div",{className:r,children:[s,e]}),b[47]=s,b[48]=e,b[49]=u):u=b[49];b[50]!==a||b[51]!==u?(t=l.jsxs(l.Fragment,{children:[a,u]}),b[50]=a,b[51]=u,b[52]=t):t=b[52];r=t;b[53]===Symbol["for"]("react.memo_cache_sentinel")?(s="xzg4506 xi81zsa x14vqqas xyinxu5 xho0xa1 xxbrewl x1vobaek",b[53]=s):s=b[53];b[54]!==r?(e=l.jsx("div",{className:s,children:r}),b[54]=r,b[55]=e):e=b[55];return e}g["default"]=a}),226);
__d("MWPSafetyNoticesChatBlockedComposer.react",["MWPSafetyNoticesChatBlockedComposerDetails.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||(h=d("react"))).c,j=h;function a(a){var b=i(4),d=a.fallback,e=a.onClose;a=a.thread;var f;b[0]!==d||b[1]!==e||b[2]!==a?(f=j.jsx(c("MWPSafetyNoticesChatBlockedComposerDetails.react"),{fallback:d,onClose:e,thread:a}),b[0]=d,b[1]=e,b[2]=a,b[3]=f):f=b[3];return f}g["default"]=a}),98);
__d("MWComposerXacDisclosureRelayQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="5305811016137974"}),null);
__d("MWComposerXacDisclosureRelayQuery.graphql",["MWComposerXacDisclosureRelayQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"nux_id"}],c=[{kind:"Variable",name:"nux_id",variableName:"nux_id"}],d={kind:"InlineFragment",selections:[{args:null,documentName:"MWComposerXacDisclosureRelayQuery",fragmentName:"MWComposerXacDisclosureView_nux",fragmentPropName:"nux",kind:"ModuleImport"}],type:"DefaultNUX",abstractKey:null};return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"MWComposerXacDisclosureRelayQuery",selections:[{alias:"xacThreadDisclosureNux",args:c,concreteType:null,kind:"LinkedField",name:"nux",plural:!1,selections:[d],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"MWComposerXacDisclosureRelayQuery",selections:[{alias:"xacThreadDisclosureNux",args:c,concreteType:null,kind:"LinkedField",name:"nux",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},d,{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}]},params:{id:b("MWComposerXacDisclosureRelayQuery_facebookRelayOperation"),metadata:{},name:"MWComposerXacDisclosureRelayQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("MWComposerXacDisclosureRelay.react",["CometPlaceholder.react","CometRelay","MWComposerXacDisclosureRelayQuery.graphql","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=(i||(i=d("react"))).c,k=i,l=8659;function a(a){var e=j(7),f=a.isThreadInNullState;a=a.size;var g=d("CometRelay").useLazyLoadQuery(h!==void 0?h:h=b("MWComposerXacDisclosureRelayQuery.graphql"),{nux_id:l}),i=g.xacThreadDisclosureNux,m;e[0]!==i||e[1]!==f||e[2]!==g.xacThreadDisclosureNux||e[3]!==a?(m=i!=null?k.jsx(d("CometRelay").MatchContainer,{match:i,props:{isThreadInNullState:f,nuxKey:g.xacThreadDisclosureNux,size:a}}):null,e[0]=i,e[1]=f,e[2]=g.xacThreadDisclosureNux,e[3]=a,e[4]=m):m=e[4];e[5]!==m?(i=k.jsx(c("CometPlaceholder.react"),{fallback:null,name:"MWComposerXacDisclosureRelay",children:m}),e[5]=m,e[6]=i):i=e[6];return i}g["default"]=a}),98);
__d("MWContactDetails",[],(function(a,b,c,d,e,f){"use strict";function a(a){if(a!=null)return a.name}function b(a){if(a==null)return;var b=a.firstName;if(b!=null)return b;else return a.name}function c(a){if(a!=null)return a.secondaryName}f.getName=a;f.getShortName=b;f.getSecondaryName=c}),66);
__d("MWMessageRequestComposerBanner.react",["fbt","I64","JSResourceForInteraction","LSIntEnum","LSMessageThreadUnsendabilityStatus","MWMessageRequestSharedTexts.react","MWXComposerBanner.react","MessageRequestsLog","MessengerMSplitFlag","MessengerWebUXLogger","react","useMWXConfirmationDialog","useMWXLazyDialog"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l=i||(i=d("react"));b=i;b.useCallback;b.useMemo;var m=b.c;function a(a){var b=m(59),e=a.isGroup,f=a.isGXAC,g=a.isIgContact,i=a.isMSplitContact,n=a.name,o=a.onDeleteConversation,p=a.onLeaveGroup,q=a.otherUserContact,r=a.secondaryName,s=a.thread,t=c("useMWXConfirmationDialog")();b[0]===Symbol["for"]("react.memo_cache_sentinel")?(a=c("JSResourceForInteraction")("MWChatBlockActionDialog.react").__setRef("MWMessageRequestComposerBanner.react"),b[0]=a):a=b[0];a=c("useMWXLazyDialog")(a);var u=a[0];b[1]!==s.threadType||b[2]!==s.cannotUnsendReason?(a=(j||(j=d("I64"))).equal(s.threadType,(k||(k=d("LSIntEnum"))).ofNumber(1))&&s.cannotUnsendReason!=null&&(j||(j=d("I64"))).equal(s.cannotUnsendReason,(k||(k=d("LSIntEnum"))).ofNumber(c("LSMessageThreadUnsendabilityStatus").DENY_IF_PAGE_THREAD)),b[1]=s.threadType,b[2]=s.cannotUnsendReason,b[3]=a):a=b[3];var v=a;b[4]!==q?(a=q!=null?(j||(j=d("I64"))).to_string(q.id):void 0,b[4]=q,b[5]=a):a=b[5];var w=a;b[6]!==o||b[7]!==s?(q={onConfirm:o,thread:s},b[6]=o,b[7]=s,b[8]=q):q=b[8];a=q;var x=a;b[9]!==u||b[10]!==v||b[11]!==w||b[12]!==s?(o=function(){var a;u({loggingData:{entryPoint:4,requestId:void 0,source:v?5:1,sourceOwner:0},targetFBID:(a=w)!=null?a:(j||(j=d("I64"))).to_string(s.threadKey),thread:s})},b[9]=u,b[10]=v,b[11]=w,b[12]=s,b[13]=o):o=b[13];var y=o;b[14]!==t||b[15]!==p?(q=function(){t({body:h._("__JHASH__RPa59uyqDnD__JHASH__"),title:h._("__JHASH__QD3NL6bztov__JHASH__")},p)},b[14]=t,b[15]=p,b[16]=q):q=b[16];var z=q;b[17]===Symbol["for"]("react.memo_cache_sentinel")?(a=c("JSResourceForInteraction")("MWChatDeleteConversationDialog.react").__setRef("MWMessageRequestComposerBanner.react"),b[17]=a):a=b[17];o=c("useMWXLazyDialog")(a);var A=o[0],B=c("MessengerWebUXLogger").useInteractionLogger();b[18]===Symbol["for"]("react.memo_cache_sentinel")?(q=h._("__JHASH__-p5reen4SU3__JHASH__"),b[18]=q):q=b[18];b[19]!==s||b[20]!==w||b[21]!==y?(a={label:q,onPress:function(){d("MessageRequestsLog").logActionTapped(s,2,w),y()}},b[19]=s,b[20]=w,b[21]=y,b[22]=a):a=b[22];o=a;q=o;b[23]===Symbol["for"]("react.memo_cache_sentinel")?(a=h._("__JHASH__9sXJViR2MXn__JHASH__"),b[23]=a):a=b[23];b[24]!==s||b[25]!==B||b[26]!==z?(o={label:a,onPress:function(){d("MessageRequestsLog").logActionTapped(s,10),B==null?void 0:B({eventName:"leave_group",threadKey:s.threadKey,threadType:s.threadType}),z()}},b[24]=s,b[25]=B,b[26]=z,b[27]=o):o=b[27];a=o;o=a;a=e?o:q;if(e){b[28]!==f?(o=f?h._("__JHASH__Zo8nGcr-Wbu__JHASH__"):void 0,b[28]=f,b[29]=o):o=b[29];q=o;b[30]!==f?(e=f?h._("__JHASH__dGW95F1FSGX__JHASH__"):c("MessengerMSplitFlag").is_msplit_account?h._("__JHASH__MWNB1ho8ez7__JHASH__"):h._("__JHASH__8Xn13sU52xi__JHASH__"),b[30]=f,b[31]=e):e=b[31];o=e}else{b[32]!==g?(f=g?h._("__JHASH__CEpoRXODTMn__JHASH__"):void 0,b[32]=g,b[33]=f):f=b[33];q=f;if(g)if(n!=null&&r!=null){b[34]!==n||b[35]!==r?(e=h._("__JHASH__WhaEH6LWAgw__JHASH__",[h._param("XACDisplayName",n),h._param("XACSecondaryName",r)]),b[34]=n,b[35]=r,b[36]=e):e=b[36];o=e}else if(n==null&&r!=null){b[37]!==r?(f=h._("__JHASH__qZp511P-lrQ__JHASH__",[h._param("XACDisplayName",r)]),b[37]=r,b[38]=f):f=b[38];o=f}else{b[39]===Symbol["for"]("react.memo_cache_sentinel")?(g=h._("__JHASH__UMff0aQK9RN__JHASH__"),b[39]=g):g=b[39];o=g}else{b[40]!==n||b[41]!==i?(e=n!=null?h._("__JHASH__PiWKQUwgi8l__JHASH__",[h._param("Composer info message",c("MessengerMSplitFlag").is_msplit_account||i?d("MWMessageRequestSharedTexts.react").getFBUserInfoTextMessageForMSplit(n):d("MWMessageRequestSharedTexts.react").getFBUserInfoTextMessage(n))]):h._("__JHASH__5qC4Qq1WTkB__JHASH__"),b[40]=n,b[41]=i,b[42]=e):e=b[42];o=e}}b[43]!==a.label||b[44]!==a.onPress?(r={label:a.label,onPress:a.onPress,size:32,type:"secondary"},b[43]=a.label,b[44]=a.onPress,b[45]=r):r=b[45];f=r;g=f;b[46]===Symbol["for"]("react.memo_cache_sentinel")?(n=h._("__JHASH__OllJcbQyTkT__JHASH__"),b[46]=n):n=b[46];b[47]!==s||b[48]!==w||b[49]!==A||b[50]!==x?(i={label:n,onPress:function(){d("MessageRequestsLog").logActionTapped(s,8,w),A(x)},size:32,type:"secondary"},b[47]=s,b[48]=w,b[49]=A,b[50]=x,b[51]=i):i=b[51];e=i;a=e;b[52]!==g||b[53]!==a?(r=[g,a],b[52]=g,b[53]=a,b[54]=r):r=b[54];b[55]!==o||b[56]!==r||b[57]!==q?(f=l.jsx(c("MWXComposerBanner.react"),{bodyText:o,buttons:r,headerText:q,testid:void 0}),b[55]=o,b[56]=r,b[57]=q,b[58]=f):f=b[58];return f}g["default"]=a}),226);
__d("MWReQLMessageRequestComposerBanner.react",["fbt","I64","LSContactTypeExact","LSIntEnum","MWContactDetails","MWLSContactTypeExactUtils","MWMessageRequestComposerBanner.react","MessageRequestsLog","isMWXacGroupThread","isStringNullOrEmpty","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l=i||(i=d("react"));b=i;var m=b.useEffect,n=b.useRef,o=b.c;function a(a){var b=o(26),e=a.isGroup,f=a.onDeleteConversation,g=a.onLeaveGroup,i=a.otherUserContact,p=a.thread,q=n(!1);b[0]!==p?(a=c("isMWXacGroupThread")(p),b[0]=p,b[1]=a):a=b[1];a=a;if(b[2]!==i){var r;r=(r=d("MWContactDetails").getName(i))!=null?r:h._("__JHASH__AaE4hJExM0x__JHASH__");b[2]=i;b[3]=r}else r=b[3];r=r;var s,t;b[4]!==i?(t=d("MWContactDetails").getSecondaryName(i),s=c("isStringNullOrEmpty")(t)?void 0:t,b[4]=i,b[5]=s,b[6]=t):(s=b[5],t=b[6]);t=s;b[7]!==i?(s=i!=null?d("MWLSContactTypeExactUtils").isIgContact(i.contactTypeExact):!1,b[7]=i,b[8]=s):s=b[8];s=s;var u;b[9]!==i?(u=(i==null?void 0:i.contactTypeExact)!=null&&(j||(j=d("I64"))).equal(i.contactTypeExact,(k||(k=d("LSIntEnum"))).ofNumber(c("LSContactTypeExact").MESSENGER_ONLY_NOT_ALLOWED_ON_FB)),b[9]=i,b[10]=u):u=b[10];u=u;var v,w;b[11]!==i||b[12]!==p?(v=function(){if(q.current===!0)return;q.current=!0;i==null?d("MessageRequestsLog").logMessageRequestInfoShown(p):d("MessageRequestsLog").logMessageRequestInfoShown(p,(j||(j=d("I64"))).to_string(i.id))},w=[p,i],b[11]=i,b[12]=p,b[13]=v,b[14]=w):(v=b[13],w=b[14]);m(v,w);b[15]!==a||b[16]!==e||b[17]!==s||b[18]!==u||b[19]!==r||b[20]!==f||b[21]!==g||b[22]!==i||b[23]!==t||b[24]!==p?(v=l.jsx(c("MWMessageRequestComposerBanner.react"),{isGXAC:a,isGroup:e,isIgContact:s,isMSplitContact:u,name:r,onDeleteConversation:f,onLeaveGroup:g,otherUserContact:i,secondaryName:t,thread:p}),b[15]=a,b[16]=e,b[17]=s,b[18]=u,b[19]=r,b[20]=f,b[21]=g,b[22]=i,b[23]=t,b[24]=p,b[25]=v):v=b[25];return v}g["default"]=a}),226);
__d("useMessageRequestDeleteConversation",["Int64Hooks","LSFactory","LSIntEnum","LSOptimisticRemoveThreadStoredProcedure","LSThreadRemoveType","MWChatStateActions","MWChatStateV2.react","MessageRequestsLog","promiseDone","react","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=(j||d("react")).c;function a(a){var b=k(5),e=(h||(h=c("useReStore")))(),g=d("MWChatStateV2.react").useDispatch(),j,l;b[0]!==a||b[1]!==e||b[2]!==g?(j=function(){d("MessageRequestsLog").logActionConfirmed(a,8),c("promiseDone")(e.runInTransaction(function(b){return c("LSOptimisticRemoveThreadStoredProcedure")(c("LSFactory")(b),{removeType:(i||(i=d("LSIntEnum"))).ofNumber(c("LSThreadRemoveType").DELETE_THREAD),threadKey:a.threadKey})},"readwrite",void 0,void 0,f.id+":42"),function(){return g(d("MWChatStateActions").closeTabByThreadKey(Date.now(),a.threadKey))})},l=[e,a,g],b[0]=a,b[1]=e,b[2]=g,b[3]=j,b[4]=l):(j=b[3],l=b[4]);return d("Int64Hooks").useCallbackInt64(j,l)}g["default"]=a}),98);
__d("useMessageRequestLeaveGroup",["Int64Hooks","LSFactory","LSOptimisticRemoveParticipantsFromGroupThreadStoredProcedure","LSVec","MWPActor.react","promiseDone","react","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=(i||d("react")).c;function a(a){var b=j(5),e=(h||(h=c("useReStore")))(),g=d("MWPActor.react").useActor(),i,k;b[0]!==e||b[1]!==g||b[2]!==a?(i=function(){c("promiseDone")(e.runInTransaction(function(b){return c("LSOptimisticRemoveParticipantsFromGroupThreadStoredProcedure")(c("LSFactory")(b),{contactIds:c("LSVec").ofArray([g]),threadKey:a})},"readwrite",void 0,void 0,f.id+":28"))},k=[g,e,a],b[0]=e,b[1]=g,b[2]=a,b[3]=i,b[4]=k):(i=b[3],k=b[4]);return d("Int64Hooks").useCallbackInt64(i,k)}g["default"]=a}),98);
__d("MWV2ComposerDisclosure.react",["CometErrorBoundary.react","CometPlaceholder.react","I64","LSAuthorityLevel","LSIntEnum","LSMessagingThreadTypeUtil","LSThreadBitOffset","MAWSecureComposerUtils","MWChatComposerVoiceIndicator.react","MWComposerXacDisclosureRelay.react","MWLSContactTypeExactUtils","MWLSThreadDisplayContext","MWPActor.react","MWReQLMessageRequestComposerBanner.react","MessageRequestsLog","MessengerWebUXLogger","ReQL","ReQLSuspense","cr:3912","gkx","react","useMessageRequestDeleteConversation","useMessageRequestLeaveGroup","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l=k||(k=d("react"));e=k;e.useMemo;var m=e.c,n=b("cr:3912")==null?function(a,b){return!1}:b("cr:3912").isOneOnOneMessageRequestV2;function o(a){var b=m(40),e=a.forceVoiceIndicatorShown_TEST_ONLY,g=a.thread,k=(h||(h=c("useReStore")))();a=d("MWLSThreadDisplayContext").useMWLSThreadDisplayContext();a=a==="Inbox"?"large":"small";var o=c("useMessageRequestLeaveGroup")(g.threadKey),p=g.threadType,q=c("useMessageRequestDeleteConversation")(g),r;b[0]!==p?(r=d("LSMessagingThreadTypeUtil").isArmadilloSecure(p),b[0]=p,b[1]=r):r=b[1];var s=r;b[2]!==s||b[3]!==g?(r=!s&&d("LSThreadBitOffset").has(21,g),b[2]=s,b[3]=g,b[4]=r):r=b[4];r=r;var t=d("MWPActor.react").useActor(),u,v;b[5]!==g.threadType||b[6]!==g.threadKey||b[7]!==k||b[8]!==t?(u=function(){return d("LSMessagingThreadTypeUtil").isOneToOne(g.threadType)?d("ReQL").mergeJoin(d("ReQL").fromTableAscending(k.tables.participants).getKeyRange(g.threadKey),d("ReQL").fromTableAscending(k.tables.contacts)).filter(function(a){a[0];a=a[1];return!(i||(i=d("I64"))).equal(a.id,t)}):d("ReQL").empty()},v=[k,g.threadKey,g.threadType,t],b[5]=g.threadType,b[6]=g.threadKey,b[7]=k,b[8]=t,b[9]=u,b[10]=v):(u=b[9],v=b[10]);var w=d("ReQLSuspense").useFirst(u,v,f.id+":69");bb0:{if(s){b[11]!==g||b[12]!==w?(u=n(g,w),b[11]=g,b[12]=w,b[13]=u):u=b[13];v=u;break bb0}v=!1}u=v;b[14]!==p?(v=d("LSMessagingThreadTypeUtil").isGroup(p),b[14]=p,b[15]=v):v=b[15];var x=v;b[16]!==w?(p=w!=null?d("MWLSContactTypeExactUtils").isIgContact(w[1].contactTypeExact):!1,b[16]=w,b[17]=p):p=b[17];v=p;b[18]!==w||b[19]!==k||b[20]!==g?(p=function(){w!=null&&d("MAWSecureComposerUtils").onDeleteThread(k,g,w[1].id)},b[18]=w,b[19]=k,b[20]=g,b[21]=p):p=b[21];p=p;var y=c("MessengerWebUXLogger").useInteractionLogger(),z;b[22]!==e?(z=l.jsx(c("MWChatComposerVoiceIndicator.react"),{forceShown_TEST_ONLY:e}),b[22]=e,b[23]=z):z=b[23];b[24]!==u||b[25]!==r||b[26]!==s||b[27]!==p||b[28]!==q||b[29]!==x||b[30]!==g||b[31]!==y||b[32]!==o||b[33]!==w||b[34]!==v||b[35]!==a?(e=u||r?l.jsx(c("MWReQLMessageRequestComposerBanner.react"),{isGroup:x,onDeleteConversation:s?p:q,onLeaveGroup:function(){if(!s&&x){d("MessageRequestsLog").logActionConfirmed(g,10);y==null?void 0:y({eventName:"leave_group",threadKey:g.threadKey,threadType:g.threadType});return o()}},otherUserContact:w==null?void 0:w[1],thread:g}):!s&&v&&c("gkx")("23418")?l.jsx(c("MWComposerXacDisclosureRelay.react"),{isThreadInNullState:(i||(i=d("I64"))).lt(g.authorityLevel,(j||(j=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").AUTHORITATIVE)),size:a}):null,b[24]=u,b[25]=r,b[26]=s,b[27]=p,b[28]=q,b[29]=x,b[30]=g,b[31]=y,b[32]=o,b[33]=w,b[34]=v,b[35]=a,b[36]=e):e=b[36];b[37]!==z||b[38]!==e?(u=l.jsxs(l.Fragment,{children:[z,e]}),b[37]=z,b[38]=e,b[39]=u):u=b[39];return u}function a(a){var b=m(3),d=a.forceVoiceIndicatorShown_TEST_ONLY;a=a.thread;d=(d=d)!=null?d:!1;var e;b[0]!==d||b[1]!==a?(e=l.jsx(c("CometErrorBoundary.react"),{fallback:p,children:l.jsx(c("CometPlaceholder.react"),{fallback:null,name:"MWV2ComposerDisclosure",children:l.jsx(o,{forceVoiceIndicatorShown_TEST_ONLY:d,thread:a})})}),b[0]=d,b[1]=a,b[2]=e):e=b[2];return e}function p(){return null}g["default"]=a}),98);
__d("MWV2ErrorComposer.react",["fbt","MDSTextPairing.react","MWXText.react","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=(i||(i=d("react"))).c,k=i;function a(){var a=j(3),b;a[0]===Symbol["for"]("react.memo_cache_sentinel")?(b="xcrg951 x8cjs6t x13fuv20 x178xt8z x1a8lsjc xl521sm x9mfa4r x889kno",a[0]=b):b=a[0];var d;a[1]===Symbol["for"]("react.memo_cache_sentinel")?(d=h._("__JHASH__viCgEPmOyD5__JHASH__"),a[1]=d):d=a[1];a[2]===Symbol["for"]("react.memo_cache_sentinel")?(b=k.jsx("div",{className:b,children:k.jsx(c("MDSTextPairing.react"),{headline:d,headlineColor:"secondary",level:4,meta:k.jsx(c("MWXText.react"),{numberOfLines:2,type:"meta3",children:h._("__JHASH__FrvKCKsD46D__JHASH__")}),reduceEmphasis:!0,textAlign:"center"})}),a[2]=b):b=a[2];return b}g["default"]=a}),226);
__d("MWXACSunsettedComposer.react",["fbt","BaseTheme.react","MWXLink.react","MWXText.react","MWXTextPairing.react","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=(i||(i=d("react"))).c,k=i,l={dark:{"primary-text":"#e4e6eb","secondary-text":"#b0b3b8"},light:{"primary-text":"rgba(0, 0, 0, 0.7)","secondary-text":"rgba(0, 0, 0, 0.5)"},type:"VARIABLES"};function a(){var a=j(3),b;a[0]===Symbol["for"]("react.memo_cache_sentinel")?(b=h._("__JHASH__E5yAiYeCVHB__JHASH__",[h._param("=Learn more",k.jsx(c("MWXLink.react"),{href:"https://www.facebook.com/help/messenger-app/619453488713104?ref=learn_more",children:k.jsx(c("MWXText.react"),{color:"blueLink",type:"bodyLink4",children:h._("__JHASH__W_KwwnBzw9K__JHASH__")})}))]),a[0]=b):b=a[0];b=b;var d;a[1]===Symbol["for"]("react.memo_cache_sentinel")?(d="x1exxf4d x13fuv20 x178xt8z xqy66fx xc73u3c xx6bls6 x5ib6vp",a[1]=d):d=a[1];a[2]===Symbol["for"]("react.memo_cache_sentinel")?(d=k.jsx("div",{className:d,children:k.jsx(c("BaseTheme.react"),{config:l,children:k.jsx(c("MWXTextPairing.react"),{body:k.jsx(c("MWXText.react"),{align:"center",color:"secondary",type:"body4",children:b}),level:4,textAlign:"center"})})}),a[2]=d):d=a[2];return d}g["default"]=a}),226);
__d("useMWLSSprocFetchProactiveWarningIfNeeded",["I64","Int64Hooks","LSFactory","LSFetchProactiveWarningsIfNeededStoredProcedure","MWThreadKey.react","promiseDone","react","useMWLSProactiveWarningTables","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=(j||d("react")).c;function a(a,b,e){var g=k(17),j=(h||(h=c("useReStore")))(),l=d("MWThreadKey.react").useMWThreadKeyMemoizedExn(),m=c("useMWLSProactiveWarningTables")(),n=m.banner;m=m.pwSettings;var o;g[0]!==n||g[1]!==m?(o=n!=null&&m!=null?(i||(i=d("I64"))).equal(n.bannerId,(i||(i=d("I64"))).of_string("7")):!1,g[0]=n,g[1]=m,g[2]=o):o=g[2];n=o;if(g[3]!==a||g[4]!==n||g[5]!==e||g[6]!==b){o=a&&!n?e?!0:b!=null?(i||(i=d("I64"))).equal((m=b.proactiveWarningDismissTime)!=null?m:(i||(i=d("I64"))).zero,(i||(i=d("I64"))).zero):!1:!1;g[3]=a;g[4]=n;g[5]=e;g[6]=b;g[7]=o}else o=g[7];m=o;var p=b!=null&&m;g[8]!==p||g[9]!==j||g[10]!==l?(a=function(){p&&c("promiseDone")(j.runInTransaction(function(a){return c("LSFetchProactiveWarningsIfNeededStoredProcedure")(c("LSFactory")(a),{threadKey:l})},"readwrite",void 0,void 0,f.id+":57"))},g[8]=p,g[9]=j,g[10]=l,g[11]=a):a=g[11];g[12]!==l||g[13]!==m||g[14]!==p||g[15]!==j?(n=[l,m,p,j],g[12]=l,g[13]=m,g[14]=p,g[15]=j,g[16]=n):n=g[16];d("Int64Hooks").useEffectInt64(a,n)}g["default"]=a}),98);
__d("useMWMarketplaceThreadOtherUser",["I64","LSIntEnum","MWPActor.react","MessagingThreadSubtype","ReQL","ReQLSuspense","react","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l=(k||d("react")).c;function a(a){var b=l(6),e=a.thread,g=(h||(h=c("useReStore")))(),k=d("MWPActor.react").useActor(),m;b[0]!==e.threadSubtype||b[1]!==e.threadKey||b[2]!==g||b[3]!==k?(a=function(){return e.threadSubtype!=null&&(i||(i=d("I64"))).equal(e.threadSubtype,(j||(j=d("LSIntEnum"))).ofNumber(c("MessagingThreadSubtype").MARKETPLACE_THREAD))?d("ReQL").mergeJoin(d("ReQL").fromTableAscending(g.tables.participants).getKeyRange(e.threadKey),d("ReQL").fromTableAscending(g.tables.contacts)).filter(function(a){a[0];a=a[1];return!(i||(i=d("I64"))).equal(a.id,k)}).map(function(a){a[0];a=a[1];return a}):d("ReQL").empty()},m=[e.threadKey,g,k,e.threadSubtype],b[0]=e.threadSubtype,b[1]=e.threadKey,b[2]=g,b[3]=k,b[4]=a,b[5]=m):(a=b[4],m=b[5]);return d("ReQLSuspense").useFirst(a,m,f.id+":31")}g["default"]=a}),98);
__d("useMWPComposerFileDropzoneRegisterHandler",["MWV2FileDropzone.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");var i=b.useContext,j=b.useEffect;function a(a){var b=i(d("MWV2FileDropzone.react").mWV2FileDropzoneContext);j(function(){if(a){b.current.enabled=!1;b.current.handler=null;return function(){b.current.enabled=!0,b.current.handler=null}}},[b,a])}g["default"]=a}),98);
__d("MWPComposerGating.react",["CometErrorBoundary.react","CometPlaceholder.react","I64","JSResourceForInteraction","LSAuthorityLevel","LSCommunityPublicGroupParticipationApprovalStatus","LSContactBitOffset","LSIntEnum","LSMessagingThreadTypeUtil","LSThreadBitOffset","MAWLoadingStateOutstandingUIReadyOfflineQueueSelector","MWCMThreadTypes.react","MWComposerPlaceholder.react","MWJoinChannelComposerPlaceholder.react","MWPActor.react","MWPArmadilloLoadingStateMessage.react","MWPSafetyNoticesChatBlockedComposer.react","MWPThreadIsPage.react","MWV2ComposerDisclosure.react","MWV2ErrorComposer.react","MWXACSunsettedComposer.react","MessagingCommunityChatsPauseStatus","MessagingCommunityType","ReQL","ReQLSuspense","RecoverableViolation.react","ServerTime","ThreadStatus","gkx","justknobx","lazyLoadComponent","mwCMIsAnyCMThread","mwCMisStandAloneCommunity","mwIsThreadDisabled","nullthrows","react","useCommunityFolder","useIsChatPreviewsEnabled","useMAWOfflineQueueLoadingIndicator","useMWLSSprocFetchProactiveWarningIfNeeded","useMWMarketplaceThreadOtherUser","useMWPComposerFileDropzoneRegisterHandler","useMWProactiveWarningPayload","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l=i||(i=d("react")),m=i,n=m.memo,o=m.useMemo,p=m.c,q=c("lazyLoadComponent")(c("JSResourceForInteraction")("MWPLeftGroupComposer.react").__setRef("MWPComposerGating.react")),r=c("lazyLoadComponent")(c("JSResourceForInteraction")("MWPCMGroupMutedComposer.react").__setRef("MWPComposerGating.react")),s=c("lazyLoadComponent")(c("JSResourceForInteraction")("MWPCMGroupBroadcastComposer.react").__setRef("MWPComposerGating.react")),t=c("lazyLoadComponent")(c("JSResourceForInteraction")("MWJoinChannelComposer.react").__setRef("MWPComposerGating.react")),u=c("lazyLoadComponent")(c("JSResourceForInteraction")("MWBroadcastChannelMemberComposer.react").__setRef("MWPComposerGating.react")),v=c("lazyLoadComponent")(c("JSResourceForInteraction")("MWCMPausedCommunityComposer.react").__setRef("MWPComposerGating.react")),w=c("lazyLoadComponent")(c("JSResourceForInteraction")("MWCMPausedChatComposer.react").__setRef("MWPComposerGating.react")),x=c("lazyLoadComponent")(c("JSResourceForInteraction")("MWCMChatPreviewComposer.react").__setRef("MWPComposerGating.react")),y=c("lazyLoadComponent")(c("JSResourceForInteraction")("MWCMChatLoadingComposer.react").__setRef("MWPComposerGating.react")),z=c("lazyLoadComponent")(c("JSResourceForInteraction")("MWPCMGroupRequestToParticipateComposer.react").__setRef("MWPComposerGating.react")),A=c("lazyLoadComponent")(c("JSResourceForInteraction")("MWPCMGroupPendingRequestToParticipateComposer.react").__setRef("MWPComposerGating.react")),B=c("lazyLoadComponent")(c("JSResourceForInteraction")("MWPTakenDownThreadComposer.react").__setRef("MWPComposerGating.react")),C=c("lazyLoadComponent")(c("JSResourceForInteraction")("MWPCannotReplyFallbackComposer.react").__setRef("MWPComposerGating.react")),D=c("lazyLoadComponent")(c("JSResourceForInteraction")("MWCMComposerNudgeText.react").__setRef("MWPComposerGating.react")),E=c("lazyLoadComponent")(c("JSResourceForInteraction")("MWDisableMarketplaceDMAThreadComposer.react").__setRef("MWPComposerGating.react"));function a(a){var b,e=p(87),f=a.renderComposer;a=a.thread;var g=(j||(j=d("I64"))).ge(a.authorityLevel,j.of_int32(c("LSAuthorityLevel").AUTHORITATIVE)),h=a.cannotReplyReason==="viewer_not_subscribed",i=a.cannotReplyReason==="broadcast_chat_read_only",m=a.threadStatus!=null&&((j||(j=d("I64"))).equal(a.threadStatus,(j||(j=d("I64"))).of_int32(c("ThreadStatus").PAUSED))||(j||(j=d("I64"))).equal(a.threadStatus,(j||(j=d("I64"))).of_int32(c("ThreadStatus").UPGRADED_TO_COMMUNITY_AND_TO_BE_PAUSED))),n=c("mwCMIsAnyCMThread")(a.threadType);a.threadStatus!=null&&(j||(j=d("I64"))).equal(a.threadStatus,(j||(j=d("I64"))).of_int32(c("ThreadStatus").PAUSED));var o=d("LSThreadBitOffset").has(192,a),F;e[0]!==a?(F={thread:a},e[0]=a,e[1]=F):F=e[1];F=c("useMWMarketplaceThreadOtherUser")(F);var G=a.memberCount!=null?(j||(j=d("I64"))).to_int32(a.memberCount):0;G=d("MWCMThreadTypes.react").isMarketplaceThread(a.threadSubtype)&&!d("LSThreadBitOffset").has(213,a)&&G===2&&(F==null||d("LSContactBitOffset").has(88,F));F=c("useCommunityFolder")(a);var H=c("mwCMisStandAloneCommunity")(F==null?void 0:F.communityType),I=d("useIsChatPreviewsEnabled").isChatPreviewsEnabled(a,F==null?void 0:F.communityType);b=j.to_int32((b=F==null?void 0:F.sendsBlockedUntil)!=null?b:(j||(j=d("I64"))).zero)*1e3;b=b<0||b>d("ServerTime").getMillis();var J=c("mwIsThreadDisabled")(a.takedownState,F==null?void 0:F.takedownState),K=(F==null?void 0:F.fbGroupUserParticipationApprovalStatus)!=null&&(j||(j=d("I64"))).equal(F.fbGroupUserParticipationApprovalStatus,(k||(k=d("LSIntEnum"))).ofNumber(c("LSCommunityPublicGroupParticipationApprovalStatus").PARTICIPATION_REQUEST_REQUIRED)),L=(F==null?void 0:F.fbGroupUserParticipationApprovalStatus)!=null&&(j||(j=d("I64"))).equal(F.fbGroupUserParticipationApprovalStatus,(k||(k=d("LSIntEnum"))).ofNumber(c("LSCommunityPublicGroupParticipationApprovalStatus").PARTICIPATION_REQUEST_PENDING)),M=(F==null?void 0:F.pauseStatus)!=null&&(j||(j=d("I64"))).equal(F.pauseStatus,(k||(k=d("LSIntEnum"))).ofNumber(c("MessagingCommunityChatsPauseStatus").PAUSED_BY_SOFT_ACTION))&&c("gkx")("4216");if(!g&&n){e[2]===Symbol["for"]("react.memo_cache_sentinel")?(g=l.jsx(c("MWComposerPlaceholder.react"),{height:35}),e[2]=g):g=e[2];e[3]===Symbol["for"]("react.memo_cache_sentinel")?(n=l.jsx(c("CometPlaceholder.react"),{fallback:g,name:"MWPComposerGating.LoadingComposer",children:l.jsx(y,{})}),e[3]=n):n=e[3];return n}if(J){e[4]===Symbol["for"]("react.memo_cache_sentinel")?(g=l.jsx(c("MWComposerPlaceholder.react"),{height:35}),e[4]=g):g=e[4];e[5]!==a.threadType?(n=l.jsx(c("CometPlaceholder.react"),{fallback:g,name:"MWPComposerGating.TakenDownThread",children:l.jsx(B,{threadType:a.threadType})}),e[5]=a.threadType,e[6]=n):n=e[6];return n}else if(M&&!H){e[7]===Symbol["for"]("react.memo_cache_sentinel")?(J=l.jsx(c("MWComposerPlaceholder.react"),{height:35}),e[7]=J):J=e[7];g=F==null?void 0:F.folderId;n=F==null?void 0:F.name;M=F==null?void 0:F.fbGroupId;e[8]!==g||e[9]!==n||e[10]!==M||e[11]!==a.threadKey?(H=l.jsx(c("CometPlaceholder.react"),{fallback:J,name:"MWPComposerGating.CMPausedCommunity",children:l.jsx(v,{communityId:g,communityName:n,groupId:M,threadKey:a.threadKey})}),e[8]=g,e[9]=n,e[10]=M,e[11]=a.threadKey,e[12]=H):H=e[12];return H}else if(m){e[13]===Symbol["for"]("react.memo_cache_sentinel")?(J=l.jsx(c("MWComposerPlaceholder.react"),{height:35}),e[13]=J):J=e[13];e[14]!==a?(g=d("LSThreadBitOffset").has(154,a),e[14]=a,e[15]=g):g=e[15];e[16]!==a.threadType?(n=d("LSMessagingThreadTypeUtil").isSocialChannel(a.threadType),e[16]=a.threadType,e[17]=n):n=e[17];e[18]!==g||e[19]!==n||e[20]!==a.threadKey?(M=l.jsx(c("CometPlaceholder.react"),{fallback:J,name:"MWPComposerGating.PausedChat",children:l.jsx(w,{canPauseChat:g,shouldUseChannelTerminology:n,threadKey:a.threadKey})}),e[18]=g,e[19]=n,e[20]=a.threadKey,e[21]=M):M=e[21];return M}else if(I){e[22]===Symbol["for"]("react.memo_cache_sentinel")?(H=l.jsx(c("MWComposerPlaceholder.react"),{height:64}),e[22]=H):H=e[22];if(e[23]!==(F==null?void 0:F.communityType)){J=(m=F==null?void 0:F.communityType)!=null?m:(k||(k=d("LSIntEnum"))).ofNumber(c("MessagingCommunityType").FB_COMMUNITY);e[23]=F==null?void 0:F.communityType;e[24]=J}else J=e[24];n=(g=F==null?void 0:F.isMember)!=null?g:!1;e[25]!==J||e[26]!==n||e[27]!==a?(M=l.jsx(c("CometPlaceholder.react"),{fallback:H,name:"MWPComposerGating.CMChatPreview",children:l.jsx(x,{communityType:J,isCommunityMember:n,thread:a})}),e[25]=J,e[26]=n,e[27]=a,e[28]=M):M=e[28];return M}else if(d("LSMessagingThreadTypeUtil").isUnjoinedDiscoverablePublicBroadcastChannel(a.threadType)){e[29]!==a.threadKey?(I=l.jsx(d("MWJoinChannelComposerPlaceholder.react").MWJoinChannelComposerPlaceholder,{channelType:d("MWJoinChannelComposerPlaceholder.react").ChannelType.Broadcast,threadKey:a.threadKey}),e[29]=a.threadKey,e[30]=I):I=e[30];e[31]!==a?(m=l.jsx(t,{channelType:d("MWJoinChannelComposerPlaceholder.react").ChannelType.Broadcast,thread:a}),e[31]=a,e[32]=m):m=e[32];e[33]!==I||e[34]!==m?(g=l.jsx(c("CometPlaceholder.react"),{fallback:I,name:"MWPComposerGating.UnjoinedDiscoverablePublicBroadcastChannel",children:m}),e[33]=I,e[34]=m,e[35]=g):g=e[35];return g}else if(d("LSMessagingThreadTypeUtil").isSocialChannelUnjoined(a.threadType)){e[36]!==a.threadKey?(H=l.jsx(d("MWJoinChannelComposerPlaceholder.react").MWJoinChannelComposerPlaceholder,{channelType:d("MWJoinChannelComposerPlaceholder.react").ChannelType.Social,threadKey:a.threadKey}),e[36]=a.threadKey,e[37]=H):H=e[37];e[38]!==a?(J=l.jsx(t,{channelType:d("MWJoinChannelComposerPlaceholder.react").ChannelType.Social,thread:a}),e[38]=a,e[39]=J):J=e[39];e[40]!==H||e[41]!==J?(n=l.jsx(c("CometPlaceholder.react"),{fallback:H,name:"MWPComposerGating.SocialChannelUnjoined",children:J}),e[40]=H,e[41]=J,e[42]=n):n=e[42];return n}else if(o){e[43]===Symbol["for"]("react.memo_cache_sentinel")?(M=l.jsx(c("MWComposerPlaceholder.react"),{height:99}),e[43]=M):M=e[43];e[44]===Symbol["for"]("react.memo_cache_sentinel")?(I=l.jsx(c("CometPlaceholder.react"),{fallback:M,name:"MWPComposerGating.XACSunset",children:l.jsx(c("MWXACSunsettedComposer.react"),{})}),e[44]=I):I=e[44];return I}else if(h){e[45]===Symbol["for"]("react.memo_cache_sentinel")?(m=l.jsx(c("MWComposerPlaceholder.react"),{height:99}),e[45]=m):m=e[45];g=F==null?void 0:F.fbGroupId;e[46]!==g||e[47]!==a?(H=l.jsx(c("CometPlaceholder.react"),{fallback:m,name:"MWPComposerGating.LeftGroup",children:l.jsx(q,{groupId:g,thread:a})}),e[46]=g,e[47]=a,e[48]=H):H=e[48];return H}else if(d("MWCMThreadTypes.react").isBroadcastThread(a.threadType)&&i){e[49]===Symbol["for"]("react.memo_cache_sentinel")?(J=l.jsx(c("MWComposerPlaceholder.react"),{height:55}),e[49]=J):J=e[49];e[50]!==a?(n=d("LSThreadBitOffset").has(139,a),e[50]=a,e[51]=n):n=e[51];e[52]!==n?(o=l.jsx(c("CometPlaceholder.react"),{fallback:J,name:"MWPComposerGating.CMGroupBroadcastReadOnly",children:l.jsx(s,{isBroadcastChatsReactionsEnabled:n})}),e[52]=n,e[53]=o):o=e[53];return o}else if(d("LSMessagingThreadTypeUtil").isDiscoverablePublicBroadcastChannel(a.threadType)&&i){e[54]===Symbol["for"]("react.memo_cache_sentinel")?(M=l.jsx(c("MWComposerPlaceholder.react"),{height:48}),e[54]=M):M=e[54];e[55]!==a.threadKey?(I=l.jsx(c("CometPlaceholder.react"),{fallback:M,name:"MWPComposerGating.BroadcastChannelMemberComposer",children:l.jsx(u,{isJoined:!0,threadKey:a.threadKey})}),e[55]=a.threadKey,e[56]=I):I=e[56];return I}else if(b){e[57]===Symbol["for"]("react.memo_cache_sentinel")?(h=l.jsx(c("MWComposerPlaceholder.react"),{height:141}),e[57]=h):h=e[57];e[58]!==F?(m=l.jsx(c("CometPlaceholder.react"),{fallback:h,name:"MWPComposerGating.CMGroupMuted",children:l.jsx(r,{communityFolder:F})}),e[58]=F,e[59]=m):m=e[59];return m}else if(K){e[60]===Symbol["for"]("react.memo_cache_sentinel")?(g=l.jsx(c("MWComposerPlaceholder.react"),{height:104}),e[60]=g):g=e[60];e[61]!==F?(H=c("nullthrows")(F),e[61]=F,e[62]=H):H=e[62];e[63]!==H||e[64]!==a?(J=l.jsx(c("CometPlaceholder.react"),{fallback:g,name:"MWPComposerGating.CMGroupRequestToParticipate",children:l.jsx(z,{communityFolder:H,thread:a})}),e[63]=H,e[64]=a,e[65]=J):J=e[65];return J}else if(L){e[66]===Symbol["for"]("react.memo_cache_sentinel")?(n=l.jsx(c("MWComposerPlaceholder.react"),{height:100}),e[66]=n):n=e[66];e[67]!==(F==null?void 0:F.fbGroupId)?(o=(j||(j=d("I64"))).to_string(c("nullthrows")(F==null?void 0:F.fbGroupId)),e[67]=F==null?void 0:F.fbGroupId,e[68]=o):o=e[68];e[69]!==o||e[70]!==a?(M=l.jsx(c("CometPlaceholder.react"),{fallback:n,name:"MWPComposerGating.CMGroupPendingRequestToParticipate",children:l.jsx(A,{groupID:o,thread:a})}),e[69]=o,e[70]=a,e[71]=M):M=e[71];return M}else if(a.cannotReplyReason!=null){e[72]===Symbol["for"]("react.memo_cache_sentinel")?(I=l.jsx(c("MWComposerPlaceholder.react"),{height:35}),e[72]=I):I=e[72];e[73]===Symbol["for"]("react.memo_cache_sentinel")?(b=l.jsx(c("CometPlaceholder.react"),{fallback:I,name:"MWPComposerGating.CannotReply",children:l.jsx(C,{})}),e[73]=b):b=e[73];return b}else if(c("justknobx")._("1978")&&G){e[74]===Symbol["for"]("react.memo_cache_sentinel")?(h=l.jsx(c("MWComposerPlaceholder.react"),{height:35}),e[74]=h):h=e[74];e[75]===Symbol["for"]("react.memo_cache_sentinel")?(m=l.jsx(c("CometPlaceholder.react"),{fallback:h,name:"MWPComposerGating.DisableMarketplaceDMA",children:l.jsx(E,{})}),e[75]=m):m=e[75];return m}else{e[76]!==a||e[77]!==i?(K=d("MWCMThreadTypes.react").isBroadcastThread(a.threadType)&&!i?l.jsx(c("CometPlaceholder.react"),{fallback:null,name:"MWPComposerGating.ComposerNudge",children:l.jsx(D,{thread:a})}):null,e[76]=a,e[77]=i,e[78]=K):K=e[78];e[79]!==a?(g=l.jsx(c("MWV2ComposerDisclosure.react"),{thread:a}),e[79]=a,e[80]=g):g=e[80];e[81]!==f?(H=f(),e[81]=f,e[82]=H):H=e[82];e[83]!==K||e[84]!==g||e[85]!==H?(J=l.jsxs(l.Fragment,{children:[K,g,H]}),e[83]=K,e[84]=g,e[85]=H,e[86]=J):J=e[86];return J}}var F=n(a);function b(a){var b=p(20),e=a.isMessengerInbox,f=a.renderComposer;a=a.thread;var g;b[0]!==a?(g=l.jsx(c("MWV2ComposerDisclosure.react"),{thread:a}),b[0]=a,b[1]=g):g=b[1];var h;b[2]!==f?(h=f(),b[2]=f,b[3]=h):h=b[3];b[4]!==g||b[5]!==h?(f=l.jsxs(l.Fragment,{children:[g,h]}),b[4]=g,b[5]=h,b[6]=f):f=b[6];g=f;b[7]!==a.proactiveWarningDismissTime?(h=a.proactiveWarningDismissTime==null||(j||(j=d("I64"))).is_zero(a.proactiveWarningDismissTime),b[7]=a.proactiveWarningDismissTime,b[8]=h):h=b[8];f=h;b[9]!==a.threadType?(h=d("LSMessagingThreadTypeUtil").isArmadilloSecure(a.threadType),b[9]=a.threadType,b[10]=h):h=b[10];h=h;var i;b[11]!==e||b[12]!==f||b[13]!==h||b[14]!==g||b[15]!==a?(i=e?null:f&&!h?l.jsx(c("MWPSafetyNoticesChatBlockedComposer.react"),{fallback:g,onClose:G,thread:a}):null,b[11]=e,b[12]=f,b[13]=h,b[14]=g,b[15]=a,b[16]=i):i=b[16];e=i;c("useMWLSSprocFetchProactiveWarningIfNeeded")(e!=null,a,!1);f=c("useMWProactiveWarningPayload")(void 0,a);if(e!=null&&f!=null){b[17]===Symbol["for"]("react.memo_cache_sentinel")?(h=l.jsx(c("MWComposerPlaceholder.react"),{height:35}),b[17]=h):h=b[17];b[18]!==e?(i=l.jsx(c("CometPlaceholder.react"),{fallback:h,name:"MWPComposerGating.ProactiveWarning",children:e}),b[18]=e,b[19]=i):i=b[19];return i}return g}function G(){}var H=n(b);function I(a){var b=a.configurations,e=a.isMessengerInbox,g=a.renderComposer,i=a.thread,m=(h||(h=c("useReStore")))(),n=d("MWPActor.react").useActor(),p=(j||(j=d("I64"))).equal(n,i.threadKey),q=d("ReQLSuspense").useArray(function(){return d("LSMessagingThreadTypeUtil").isOneToOne(i.threadType)?d("ReQL").mergeJoin(d("ReQL").fromTableAscending(m.tables.participants).getKeyRange(i.threadKey),d("ReQL").fromTableAscending(m.tables.contacts)).map(function(a){a[0];a=a[1];return a}):d("ReQL").empty()},[m,i.threadKey,i.threadType],f.id+":541");a=o(function(){return q.find(function(a){return p||q.length===1&&(j||(j=d("I64"))).equal(a.id,n)||!(j||(j=d("I64"))).equal(a.id,n)})},[n,p,q]);var r=d("LSMessagingThreadTypeUtil").isArmadilloSecure(i.threadType),s=c("useMAWOfflineQueueLoadingIndicator")(!1,i,d("MAWLoadingStateOutstandingUIReadyOfflineQueueSelector").outstandingUIReadyOfflineQueueSelector);r=r&&s;s=b.find(function(a){return a!=null});b=s!=null;c("useMWPComposerFileDropzoneRegisterHandler")(b);return l.jsxs(l.Fragment,{children:[r?l.jsx(c("MWPArmadilloLoadingStateMessage.react"),{threadKey:i.threadKey}):null,b?s:d("LSMessagingThreadTypeUtil").isOneToOne(i.threadType)?a!=null?l.jsx(H,{isMessengerInbox:e,otherUser:a,renderComposer:g,thread:i}):(j||(j=d("I64"))).lt(i.authorityLevel,(k||(k=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").AUTHORITATIVE))?null:l.jsx(c("RecoverableViolation.react"),{errorMessage:"Missing contact row",projectName:"messenger_comet"}):l.jsx(F,{renderComposer:g,thread:i})]})}I.displayName=I.name+" [from "+f.id+"]";function e(a){var b=p(8),e=a.configurations,f=a.isMessengerInbox,g=a.renderComposer;a=a.thread;f=(f=f)!=null?f:!1;var h;b[0]!==e||b[1]!==f||b[2]!==g||b[3]!==a?(h=l.jsx(I,{configurations:e,isMessengerInbox:f,renderComposer:g,thread:a}),b[0]=e,b[1]=f,b[2]=g,b[3]=a,b[4]=h):h=b[4];b[5]!==a.threadKey||b[6]!==h?(e=l.jsx(c("CometErrorBoundary.react"),{fallback:J,children:l.jsx(d("MWPThreadIsPage.react").Provider,{threadKey:a.threadKey,children:h})}),b[5]=a.threadKey,b[6]=h,b[7]=e):e=b[7];return e}function J(a){return l.jsx(c("MWV2ErrorComposer.react"),{})}J.displayName=J.name+" [from "+f.id+"]";g["default"]=e}),98);
__d("useOnTypingStateChanged",["I64","Int64Hooks","LSAuthorityLevel","LSContactBlockedByViewerStatus","LSFactory","LSIntEnum","LSMessagingThreadTypeUtil","LSSendTypingIndicatorStoredProcedure","MWPActor.react","MessengerWebUXLogger","ReQL","asyncToGeneratorRuntime","mwCMIsAnyCMThread","promiseDone","react","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l=(i||d("react")).c;function m(a,b,c,d){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e,f){if((j||(j=d("I64"))).equal(e,(k||(k=d("LSIntEnum"))).ofNumber(1))&&!(j||(j=d("I64"))).equal(b,f)){var g;b=(yield (g=d("ReQL")).firstAsync(g.mergeJoin(g.fromTableAscending(a.tables.participants).getKeyRange(b),g.fromTableAscending(a.tables.contacts.index("blockedByViewerStatusId")).getKeyRange((k||(k=d("LSIntEnum"))).ofNumber(c("LSContactBlockedByViewerStatus").UNBLOCKED))).filter(function(a){var b=a[0];a[1];return!(j||(j=d("I64"))).equal(b.contactId,f)})));return b!=null}else return!c("mwCMIsAnyCMThread")(e)});return n.apply(this,arguments)}function a(a){var b=l(8),e=(h||(h=c("useReStore")))(),g=d("MWPActor.react").useActor(),i=c("MessengerWebUXLogger").useInteractionLogger(),n,o;b[0]!==a.authorityLevel||b[1]!==a.threadKey||b[2]!==a.threadType||b[3]!==e||b[4]!==g||b[5]!==i?(n=function(b){if(!(j||(j=d("I64"))).ge(a.authorityLevel,(k||(k=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").AUTHORITATIVE)))return;c("promiseDone")(m(e,a.threadKey,a.threadType,g).then(function(g){if(g){i==null?void 0:i({eventName:"send_typing_indicators",threadKey:a.threadKey,threadType:a.threadType});return e.runInTransaction(function(e){return c("LSSendTypingIndicatorStoredProcedure")(c("LSFactory")(e),{isGroupThread:d("LSMessagingThreadTypeUtil").isGroup(a.threadType),isTyping:b,threadKey:a.threadKey})},"readwrite",void 0,void 0,f.id+":116")}}))},o=[a.authorityLevel,a.threadKey,a.threadType,e,g,i],b[0]=a.authorityLevel,b[1]=a.threadKey,b[2]=a.threadType,b[3]=e,b[4]=g,b[5]=i,b[6]=n,b[7]=o):(n=b[6],o=b[7]);return d("Int64Hooks").useCallbackInt64(n,o)}g["default"]=a}),98);
__d("useMWOnTypingStateChanged",["MWChatViewerChatVisibilityHook","react","useOnTypingStateChanged"],(function(a,b,c,d,e,f,g){"use strict";var h;(h||d("react")).useMemo;var i=function(a){return void 0};function a(a){a=c("useOnTypingStateChanged")(a);var b=d("MWChatViewerChatVisibilityHook").useViewerChatVisibility();b=b?a:i;return b}g["default"]=a}),98);
__d("MWV2OpenComposer.react",["LSMessagingThreadTypeUtil","MWPReplyContext.react","MWPUseVoiceRecorder","MWV2ComposerEditContainer.react","MWV2ComposerReplyView.react","MWV2ComposerView.react","MessengerMSplitFlag","WebUXLoggingSurfaceContextProvider","emptyFunction","gkx","react","react-forget-runtime","requireDeferred","useMAWEditMessageData","useMWMediaManager","useMWOnTypingStateChanged","useMWPComposerEditor","useMWV2FileDropzoneRegisterHandler","useMWV2OnSendOpenMessage"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;b.useContext;var j=b.c,k=c("requireDeferred")("MWChatAudioLog").__setRef("MWV2OpenComposer.react"),l=c("gkx")("23426");function m(){k.onReady(function(a){return a.logClickStartRecording()})}function n(){k.onReady(function(a){return a.logBrowserDenyAccess()})}function a(a){var b=j(35),e=a.afterSendMessage,f=a.isPreviewThread;a=a.thread;e=e===void 0?c("emptyFunction"):e;var g=d("react-forget-runtime").useContextWithBailoutExperiment__unstable(d("MWPReplyContext.react").MWPReplyContext,o);g=g.reply;var h=c("useMAWEditMessageData")(),k;b[0]!==a?(k={thread:a},b[0]=a,b[1]=k):k=b[1];k=c("useMWMediaManager")(k);var p=k.handleFileRemove,q=k.handleFileSelect;k=k.mediaStaging;var r;b[2]!==e||b[3]!==a?(r={afterSendMessage:e,skipUrlPreviewGen:!1,thread:a},b[2]=e,b[3]=a,b[4]=r):r=b[4];e=c("useMWV2OnSendOpenMessage")(r);r=d("MWPUseVoiceRecorder").useVoiceRecorder(void 0,m,n);var s=c("useMWOnTypingStateChanged")(a);c("useMWV2FileDropzoneRegisterHandler")(q);var t;b[5]!==a?(t=d("LSMessagingThreadTypeUtil").isAiBotSummoning(a),b[5]=a,b[6]=t):t=b[6];t=t;var u;b[7]!==f||b[8]!==k||b[9]!==e||b[10]!==s||b[11]!==a.threadKey?(u={composerEntrypointForLogging:"MWV2OpenComposer",isPreviewThread:f,mediaStaging:k,onSendMessage:e,onTypingStateChanged:s,threadKey:a.threadKey},b[7]=f,b[8]=k,b[9]=e,b[10]=s,b[11]=a.threadKey,b[12]=u):u=b[12];f=c("useMWPComposerEditor")(u);s=f.editor;u=f.editorElementRef;var v=f.hasStuffToSend;f=f.sendMessage;var w;b[13]!==g||b[14]!==a?(w=g!=null?i.jsx(d("MWV2ComposerReplyView.react").MWV2ComposerReplyView,{messageId:g.messageId,messageThreadKey:g.threadKey,messageTimestamp:g.timestampMs,thread:a}):null,b[13]=g,b[14]=a,b[15]=w):w=b[15];b[16]!==h?(g=h!=null&&i.jsx(c("MWV2ComposerEditContainer.react"),{editMessageData:h}),b[16]=h,b[17]=g):g=b[17];var x;b[18]!==h||b[19]!==t||b[20]!==s||b[21]!==u||b[22]!==v||b[23]!==k||b[24]!==p||b[25]!==q||b[26]!==e||b[27]!==f||b[28]!==a||b[29]!==r?(x=h!=null?null:i.jsx(d("MWV2ComposerView.react").MWV2ComposerView,{editor:s,editorElementRef:u,hasStuffToSend:v,isAiBotMentionsEnabled:t&&l&&!c("MessengerMSplitFlag").is_msplit_account,mediaStaging:k,onAttachmentRemoved:p,onAttachmentsAdded:q,onSendMessage:e,policyProduct:"messaging_lightswitch",sendMessage:f,supportedFileTypes:void 0,surface:"mwp_mwv2_composer",thread:a,voiceRecorder:r}),b[18]=h,b[19]=t,b[20]=s,b[21]=u,b[22]=v,b[23]=k,b[24]=p,b[25]=q,b[26]=e,b[27]=f,b[28]=a,b[29]=r,b[30]=x):x=b[30];b[31]!==w||b[32]!==g||b[33]!==x?(h=i.jsx(d("WebUXLoggingSurfaceContextProvider").WebUXLoggingSurfaceContextProvider,{value:"open_composer",children:i.jsxs("div",{children:[w,g,x]})}),b[31]=w,b[32]=g,b[33]=x,b[34]=h):h=b[34];return h}function o(a){return[a.reply]}g["default"]=a}),98);
__d("useIsDefaultE2eeOpenThread",["LSMessagingThreadTypeUtil","cr:8061","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).c;function a(a,b){a=i(1);a[0]===Symbol["for"]("react.memo_cache_sentinel")?(b=[!1,!0,null],a[0]=b):b=a[0];return b}var j=(e=b("cr:8061"))!=null?e:a;function c(a){var b=i(3),c=j(a.threadKey,a.threadType);c=c[0];var e;b[0]!==a.threadType||b[1]!==c?(e=d("LSMessagingThreadTypeUtil").isOpenOneToOne(a.threadType)&&c,b[0]=a.threadType,b[1]=c,b[2]=e):e=b[2];return e}g["default"]=c}),98);
__d("useMWDefaultE2eeComposerConfiguration",["JSResourceForInteraction","lazyLoadComponent","react","useIsDefaultE2eeOpenThread"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||(h=d("react"))).c,j=h,k=c("lazyLoadComponent")(c("JSResourceForInteraction")("MWDefaultE2eeThreadBlockedComposer.react").__setRef("useMWDefaultE2eeComposerConfiguration"));function a(a){var b=i(2),d=c("useIsDefaultE2eeOpenThread")(a);if(d){b[0]!==a?(d=j.jsx(k,{thread:a}),b[0]=a,b[1]=d):d=b[1];return d}}g["default"]=a}),98);
__d("MWPComposerPlaceholder.react",["CometPlaceholder.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||(h=d("react"))).c,j=h;function k(a){var b=i(3);a=a.height;var c;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(c="x1exxf4d x13fuv20 x178xt8z",b[0]=c):c=b[0];a=a.toString()+"px";b[1]!==a?(c=j.jsx("div",{className:c,style:{height:a}}),b[1]=a,b[2]=c):c=b[2];return c}function a(a){var b=i(5),d=a.children;a=a.height;var e;b[0]!==a?(e=j.jsx(k,{height:a}),b[0]=a,b[1]=e):e=b[1];b[2]!==e||b[3]!==d?(a=j.jsx(c("CometPlaceholder.react"),{fallback:e,name:"MWPComposerPlaceholder",children:d}),b[2]=e,b[3]=d,b[4]=a):a=b[4];return a}g["default"]=a}),98);
__d("useMWPAdultMinorRestrictionLogging",["I64","LSContactReachabilityStatusType","LSIntEnum","LSMessagingThreadTypeUtil","MwbActorExperienceEventFalcoEvent","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;b=h||d("react");var k=b.useEffect,l=b.c;function m(a){var b=d("LSMessagingThreadTypeUtil").isArmadilloSecure(a),c=d("LSMessagingThreadTypeUtil").isOneToOne(a);a=d("LSMessagingThreadTypeUtil").isGroup(a);if(c)return b?"messenger_encrypted_direct_thread":"messenger_direct_thread_details";return a?b?"messenger_encrypted_group_thread":"messenger_group_thread_details":"unknown"}function n(a){switch(a){case c("LSContactReachabilityStatusType").UNREACHABLE_USER_TYPE:return 12;case c("LSContactReachabilityStatusType").UNREACHABLE_ADULT_TYPE:return 21;default:return 0}}var o=function(a){return a?(i||(i=d("LSIntEnum"))).toNumber(a):c("LSContactReachabilityStatusType").REACHABLE};function a(a,b){var e=l(11),f;e[0]!==b?(f=o(b),e[0]=b,e[1]=f):f=e[1];var g=f;e[2]!==a?(b=m(a),e[2]=a,e[3]=b):b=e[3];var h=b;e[4]!==a?(f=(j||(j=d("I64"))).to_string(a),e[4]=a,e[5]=f):f=e[5];var i=f;e[6]!==g||e[7]!==h||e[8]!==i?(b=function(){g!==c("LSContactReachabilityStatusType").REACHABLE&&g!==c("LSContactReachabilityStatusType").REACHABLE_INVITE_BANNER&&g!==c("LSContactReachabilityStatusType").REACHABLE_INVITE_MODEL_TEXT_ONLY&&c("MwbActorExperienceEventFalcoEvent").log(function(){return{action:1,restriction_type:n(g),surface:h,thread_id:i}})},a=[i,g,h],e[6]=g,e[7]=h,e[8]=i,e[9]=b,e[10]=a):(b=e[9],a=e[10]);k(b,a)}g["default"]=a}),98);
__d("useMWPBlockedComposerConfiguration",["fbt","I64","JSResourceForInteraction","LSContactBlockedByViewerStatus","LSContactReachabilityStatusType","LSIntEnum","LSMessagingThreadTypeUtil","MWBlockedComposerLogging","MWGetLSThreadReportingTokenFromThread","MWPActor.react","MWPComposerPlaceholder.react","MWXLink.react","ReQL","ReQLSuspense","lazyLoadComponent","react","useMWPAdultMinorRestrictionLogging","useReStore"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l,m=j||d("react"),n="https://www.facebook.com/help/messenger-app/2258699540867663/?helpref=uf_share",o=c("lazyLoadComponent")(c("JSResourceForInteraction")("MWPReQLBlockedComposer.react").__setRef("useMWPBlockedComposerConfiguration"));function p(a){if(a==null)return c("LSContactReachabilityStatusType").REACHABLE;a=a.contactReachabilityStatusType;return a==null?c("LSContactReachabilityStatusType").REACHABLE:(l||(l=d("LSIntEnum"))).toNumber(a)}function a(a,b){var e=(i||(i=c("useReStore")))(),g=d("MWPActor.react").useActor(),j=(k||(k=d("I64"))).equal(g,a.threadKey),q=d("ReQLSuspense").useFirst(function(){return d("LSMessagingThreadTypeUtil").isOneToOne(a.threadType)?d("ReQL").mergeJoin(d("ReQL").fromTableAscending(e.tables.participants).getKeyRange(a.threadKey),d("ReQL").fromTableAscending(e.tables.contacts)).filter(function(a){a[0];a=a[1];return j||!(k||(k=d("I64"))).equal(a.id,g)}).map(function(a){a[0];a=a[1];return a}):d("ReQL").empty()},[e,a.threadKey,a.threadType,g,j],f.id+":62"),r=p(q);c("useMWPAdultMinorRestrictionLogging")(a.threadKey,q==null?void 0:q.contactReachabilityStatusType);if(d("LSMessagingThreadTypeUtil").isOneToOne(a.threadType)&&q!=null){var s=c("MWGetLSThreadReportingTokenFromThread")(a),t=!(k||(k=d("I64"))).equal(q.blockedByViewerStatus,(l||(l=d("LSIntEnum"))).ofNumber(c("LSContactBlockedByViewerStatus").UNBLOCKED));if(r!==c("LSContactReachabilityStatusType").REACHABLE&&r!==c("LSContactReachabilityStatusType").REACHABLE_INVITE_BANNER&&r!==c("LSContactReachabilityStatusType").REACHABLE_INVITE_MODEL_TEXT_ONLY){var u,v=h._("__JHASH__6xAG31n9hza__JHASH__");r===c("LSContactReachabilityStatusType").UNREACHABLE_INVITE_BLOCK?(u=h._("__JHASH__JkBfzTduzvJ__JHASH__"),v=h._("__JHASH__uoHFfFcMxzY__JHASH__",[h._param("learn_more_link",m.jsx(c("MWXLink.react"),{href:n,target:"_blank",children:"Learn more"}))])):r===c("LSContactReachabilityStatusType").UNREACHABLE_MR_LIMIT_BLOCK&&(u=h._("__JHASH__rXNZmFzbPda__JHASH__"),v=h._("__JHASH__P-AUqVlI57w__JHASH__"));return m.jsx(c("MWPComposerPlaceholder.react"),{height:35,children:m.jsx(o,{fbid:(k||(k=d("I64"))).to_string(q.id),isReachable:!1,reason:d("MWBlockedComposerLogging").ComposerBlockingReason.USER_UNREACHABLE,reportingToken:void 0,thread:a,unreachableHeader:u,unreachableTitle:v})})}if(t)return m.jsx(c("MWPComposerPlaceholder.react"),{height:189,children:m.jsx(o,{buttonsOverride:b,fbid:(k||(k=d("I64"))).to_string(q.id),reason:d("MWBlockedComposerLogging").ComposerBlockingReason.USER_BLOCKED,reportingToken:s,thread:a})})}}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("MWXIconDragHandle",["MWXSvgIcon","SVGIcon","cr:12401","gkx"],(function(a,b,c,d,e,f,g){"use strict";a=d("MWXSvgIcon").mwxSvgIcon(d("SVGIcon").svgIcon(b("cr:12401")),c("gkx")("23219"));g["default"]=a}),98);
__d("useMWV2DisabledPageComposerSendMenuItem",["LSFactory","LSIntEnum","LSMailboxType","LSMessageReplySourceType","LSMessageReplySourceTypeV2","LSOptimisticSendMessageV2StoredProcedure","LSShape","LSThreadAttributionTypeUtil","MWPActor.react","MessagePowerUp","promiseDone","react","useLSMessagingSource","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;b=j||d("react");b.useCallback;var k=b.c;function a(){var a=k(4),b=(h||(h=c("useReStore")))(),e=d("MWPActor.react").useActor(),g=c("useLSMessagingSource")(),j;a[0]!==b||a[1]!==g||a[2]!==e?(j=function(a,h,j){c("promiseDone")(b.runInTransaction(function(b){var f=d("LSThreadAttributionTypeUtil").getSource(a,g);return c("LSOptimisticSendMessageV2StoredProcedure")(c("LSFactory")(b),{extraSendMessageParams:d("LSShape").ofRecord({calculate_denormalizations:!0,mark_read:!0,platform_token:j,power_up_style:(i||(i=d("LSIntEnum"))).ofNumber(c("MessagePowerUp").NONE),reply_source_type:i.ofNumber(c("LSMessageReplySourceType").MESSAGE),reply_source_type_v2:i.ofNumber(c("LSMessageReplySourceTypeV2").MESSAGE),snippet_has_emoji:!1,source:f}),mailboxType:i.ofNumber(c("LSMailboxType").MESSENGER),senderId:e,snippet:h,text:h,threadKey:a,threadType:i.ofNumber(1)})},"readwrite",void 0,void 0,f.id+":41"))},a[0]=b,a[1]=g,a[2]=e,a[3]=j):j=a[3];return j}g["default"]=a}),98);
__d("MWV2DisabledPageComposer.react",["fbt","JSResourceForInteraction","MWBlockedComposerLogging","MWXButton.react","MWXIconDragHandle","MWXLazyPopoverTrigger.react","react","useMWV2DisabledPageComposerSendMenuItem"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=(i||(i=d("react"))).c,k=i,l=c("JSResourceForInteraction")("LSComposerPersistentMenu.react").__setRef("MWV2DisabledPageComposer.react");function a(a){var b=j(5),e=a.threadKey;d("MWBlockedComposerLogging").useLogMWBlockedComposerReason(e,d("MWBlockedComposerLogging").ComposerBlockingReason.PAGE_THREAD_DISABLED);var f=c("useMWV2DisabledPageComposerSendMenuItem")();b[0]!==f||b[1]!==e?(a=function(a){var b=a.title;a=a.id;if(a!=null)return f(e,b,a)},b[0]=f,b[1]=e,b[2]=a):a=b[2];a=a;var g;b[3]!==a?(g=k.jsx(c("MWXLazyPopoverTrigger.react"),{align:"middle",popoverProps:{onClose:n,onSelect:a},popoverResource:l,children:m}),b[3]=a,b[4]=g):g=b[4];return g}function m(a,b){return k.jsx("div",{className:"x78zum5 xu06os2 xvijh9v xz9dl7a xn6708d xsag5q8 x1ye3gou",ref:a,children:k.jsx(c("MWXButton.react"),{icon:c("MWXIconDragHandle"),label:h._("__JHASH__pzPWkkyVYqg__JHASH__"),onPress:b,reduceEmphasis:!0})})}m.displayName=m.name+" [from "+f.id+"]";function n(){}g["default"]=a}),226);
__d("useMWPDisablePageComposerConfiguration",["MWV2DisabledPageComposer.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||(h=d("react"))).c,j=h;function a(a){var b=i(2);if(a.disableComposerInput&&a.hasPersistentMenu){var d;b[0]!==a.threadKey?(d=j.jsx(c("MWV2DisabledPageComposer.react"),{threadKey:a.threadKey}),b[0]=a.threadKey,b[1]=d):d=b[1];return d}}g["default"]=a}),98);
__d("MWPFeatureLimitLoggingUtils",["I64","Int64Hooks","LSFeatureLimitsType","LSIntEnum","LSMessagingThreadTypeUtil","react","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=(h||d("react")).c,l=c("requireDeferred")("MwbActorExperienceEventFalcoEvent").__setRef("MWPFeatureLimitLoggingUtils");function a(a,b,c){var e=k(7),f;e[0]!==c?(f=m(c),e[0]=c,e[1]=f):f=e[1];var g=f;e[2]!==a||e[3]!==g||e[4]!==b?(c=function(){var c;n({action:1,restriction_type:a,surface:g,thread_id:(i||(i=d("I64"))).to_string((c=b)!=null?c:(i||(i=d("I64"))).zero)})},f=[b,a,g],e[2]=a,e[3]=g,e[4]=b,e[5]=c,e[6]=f):(c=e[5],f=e[6]);return d("Int64Hooks").useCallbackInt64(c,f)}function b(a,b,c){var e=k(7),f;e[0]!==c?(f=m(c),e[0]=c,e[1]=f):f=e[1];var g=f;e[2]!==a||e[3]!==g||e[4]!==b?(c=function(){var c;n({action:2,restriction_type:a,surface:g,thread_id:(i||(i=d("I64"))).to_string((c=b)!=null?c:(i||(i=d("I64"))).zero)})},f=[b,a,g],e[2]=a,e[3]=g,e[4]=b,e[5]=c,e[6]=f):(c=e[5],f=e[6]);return d("Int64Hooks").useCallbackInt64(c,f)}function e(a){if(a)if((i||(i=d("I64"))).equal(a.type_,(j||(j=d("LSIntEnum"))).ofNumber(c("LSFeatureLimitsType").MESSAGE_SEND_PRIVATE)))return 40;else if((i||(i=d("I64"))).equal(a.type_,(j||(j=d("LSIntEnum"))).ofNumber(c("LSFeatureLimitsType").MESSAGE_SEND_PUBLIC)))return 39;else return 6;return 0}function m(a){if(a){var b=d("LSMessagingThreadTypeUtil").isArmadilloSecure(a),c=d("LSMessagingThreadTypeUtil").isOneToOne(a);if(c)return b?"messenger_encrypted_direct_thread":"messenger_direct_thread_details";c=d("LSMessagingThreadTypeUtil").isGroup(a);a=d("LSMessagingThreadTypeUtil").isPublicCMThread(a);if(c)return b?"messenger_encrypted_group_thread":a?"messenger_public_cm_chat":"messenger_group_thread_details"}return"unknown"}function n(a){var b=a.action,c=a.restriction_type,d=a.surface,e=a.thread_id;l.onReady(function(a){return a.log(function(){return{action:b,restriction_type:c,surface:d,thread_id:e}})})}g.useLogFeatureLimitComposerImpression=a;g.useLogViewCommunityStandards=b;g.getRestrictionTypeFromFeatureLimit=e}),98);
__d("useMWCMFetchSafetyInterventions",["I64","MWPActor.react","ReQL","ReQLSuspense","gkx","react","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=(j||d("react")).c;function a(a){var b=k(6),e=a===void 0?"prompt":a,g=(h||(h=c("useReStore")))(),j=d("MWPActor.react").useActor(),l=e==="composer_block",m=c("gkx")("5985"),n;b[0]!==g.tables.mwb_safety_interventions||b[1]!==e||b[2]!==j||b[3]!==l?(a=function(){return m?d("ReQL").fromTableAscending(g.tables.mwb_safety_interventions).filter(function(a){var b=a.logOnlySafetyInterventionType,c=a.mutImpressionsCount,f=a.userId;return a.uiType===e&&b==="education_notice_cm"&&f===(i||(i=d("I64"))).to_string(j)&&(l||(i||(i=d("I64"))).equal(c,(i||(i=d("I64"))).zero))}).map(function(a){return(i||(i=d("I64"))).to_string(a.interventionId)}):d("ReQL").empty()},n=[m,g.tables.mwb_safety_interventions,e,j,l],b[0]=g.tables.mwb_safety_interventions,b[1]=e,b[2]=j,b[3]=l,b[4]=a,b[5]=n):(a=b[4],n=b[5]);b=d("ReQLSuspense").useArray(a,n,f.id+":31");return b}g["default"]=a}),98);
__d("useMWPFeatureLimitComposerBlockHeaderText",["fbt","I64","react","useServerTime"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=(i||d("react")).c,l=60*60*1e3,m=24*l,n=23*l,o=1e3;function a(a,b){var e=k(7),f=c("useServerTime")().valueOf();a=a!=null?(j||(j=d("I64"))).to_float(a.expirationTimestampSeconds)*1e3:f;a=a-f;if(a<=n){f=Math.ceil(Math.max(a,l)/l);var g;e[0]!==b||e[1]!==f?(g=b?h._("__JHASH__MtDrzd4mllU__JHASH__",[h._plural(f,"number")]):h._("__JHASH__Oh7AJclyvOB__JHASH__",[h._plural(f,"number")]),e[0]=b,e[1]=f,e[2]=g):g=e[2];return g}else{f=Math.ceil(Math.max(a,m)/m);if(f>=o){e[3]===Symbol["for"]("react.memo_cache_sentinel")?(g=h._("__JHASH__XJkVHKZY5be__JHASH__"),e[3]=g):g=e[3];return g}e[4]!==b||e[5]!==f?(a=b?h._("__JHASH__DoFdcIuVM_E__JHASH__",[h._plural(f,"number")]):h._("__JHASH__RWH0KbM4haJ__JHASH__",[h._plural(f,"number")]),e[4]=b,e[5]=f,e[6]=a):a=e[6];return a}}g["default"]=a}),226);
__d("MWPFeatureLimitsBlockedComposer.react",["fbt","I64","LSFeatureLimitsType","LSIntEnum","MWBlockedComposerLogging","MWCMContentTakedownEnforcementNoticeDialog.entrypoint","MWCMThreadTypes.react","MWPActor.react","MWPFeatureLimitLoggingUtils","MWPFeatureLimitedData","MWXComposerBanner.react","react","useMWCMFetchSafetyInterventions","useMWPFeatureLimitComposerBlockHeaderText","useMWXEntryPointDialog","useSinglePartialViewImpression"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l=(i||(i=d("react"))).c,m=i;function a(a){var b=l(33);a=a.thread;var e=c("useMWCMFetchSafetyInterventions")("composer_block"),f;b[0]!==a?(f=(a==null?void 0:a.threadType)!=null?d("MWCMThreadTypes.react").isJoinedCMThread(a.threadType):!1,b[0]=a,b[1]=f):f=b[1];f=f;f=f&&e.length>0;var g;b[2]!==e?(g={interventions_ids:e},b[2]=e,b[3]=g):g=b[3];g=c("useMWXEntryPointDialog")(c("MWCMContentTakedownEnforcementNoticeDialog.entrypoint"),g);var i=g[0];d("MWBlockedComposerLogging").useLogMWBlockedComposerReason(a==null?void 0:a.threadKey,d("MWBlockedComposerLogging").ComposerBlockingReason.FEATURE_LIMITED_TO_READONLY);g=d("MWPFeatureLimitedData").useReadOnlyFeatureLimitDataWithThreadType(a==null?void 0:a.threadType);var n;b[4]===Symbol["for"]("react.memo_cache_sentinel")?(n=d("MWPActor.react").isAPPlus(),b[4]=n):n=b[4];n=n;b[5]!==g?(n=g!=null&&(j||(j=d("I64"))).equal(g.type_,(k||(k=d("LSIntEnum"))).ofNumber(c("LSFeatureLimitsType").MESSAGE_SEND_PUBLIC))&&n,b[5]=g,b[6]=n):n=b[6];n=n;var o=c("useMWPFeatureLimitComposerBlockHeaderText")(g,n),p;b[7]!==g?(p=d("MWPFeatureLimitLoggingUtils").getRestrictionTypeFromFeatureLimit(g),b[7]=g,b[8]=p):p=b[8];g=p;p=d("MWPFeatureLimitLoggingUtils").useLogFeatureLimitComposerImpression(g,a==null?void 0:a.threadKey,a==null?void 0:a.threadType);g=d("MWPFeatureLimitLoggingUtils").useLogViewCommunityStandards(g,a==null?void 0:a.threadKey,a==null?void 0:a.threadType);b[9]!==p?(a={onImpressionStart:p},b[9]=p,b[10]=a):a=b[10];p=c("useSinglePartialViewImpression")(a);b[11]===Symbol["for"]("react.memo_cache_sentinel")?(a=h._("__JHASH__7_EenTF_FJG__JHASH__"),b[11]=a):a=b[11];a=a;var q;b[12]===Symbol["for"]("react.memo_cache_sentinel")?(q=h._("__JHASH__phCVAIUGUlz__JHASH__"),b[12]=q):q=b[12];q=q;var r;b[13]===Symbol["for"]("react.memo_cache_sentinel")?(r={target:"_blank",url:"https://www.facebook.com/communitystandards/"},b[13]=r):r=b[13];r=r;var s;b[14]!==n||b[15]!==f?(s=n||f?h._("__JHASH__9oilSt_qVYo__JHASH__"):h._("__JHASH___Q1doHhXtgm__JHASH__"),b[14]=n,b[15]=f,b[16]=s):s=b[16];s=s;n=n?q:a;q=f?void 0:r;b[17]!==f||b[18]!==i||b[19]!==e||b[20]!==g?(a=f?function(){i({interventionsIds:e},function(){})}:g,b[17]=f,b[18]=i,b[19]=e,b[20]=g,b[21]=a):a=b[21];b[22]!==s||b[23]!==q||b[24]!==a?(r=[{label:s,linkProps:q,onPress:a}],b[22]=s,b[23]=q,b[24]=a,b[25]=r):r=b[25];b[26]!==n||b[27]!==r||b[28]!==o?(f=m.jsx(c("MWXComposerBanner.react"),{bodyText:n,buttons:r,headerText:o}),b[26]=n,b[27]=r,b[28]=o,b[29]=f):f=b[29];b[30]!==p||b[31]!==f?(g=m.jsx("div",{ref:p,children:f}),b[30]=p,b[31]=f,b[32]=g):g=b[32];return g}g["default"]=a}),226);
__d("useMWPFeatureLimitsBlockedComposerConfiguration",["MWPFeatureLimitsBlockedComposer.react","isFeatureLimitEnabled","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||(h=d("react"))).c,j=h;function a(a,b,d){var e=i(2);b=b&&(!a||c("isFeatureLimitEnabled")());if(b){e[0]!==d?(a=j.jsx(c("MWPFeatureLimitsBlockedComposer.react"),{thread:d}),e[0]=d,e[1]=a):a=e[1];return a}}g["default"]=a}),98);
__d("useMWPReQLFeatureLimitsBlockedComposerConfiguration",["LSMessagingThreadTypeUtil","react","useIsReadOnlyFeatureLimitedWithThreadType","useMWPFeatureLimitsBlockedComposerConfiguration"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||(h=d("react"))).c;h;function a(a){var b=i(2),e;b[0]!==a.threadType?(e=d("LSMessagingThreadTypeUtil").isArmadilloSecure(a.threadType),b[0]=a.threadType,b[1]=e):e=b[1];b=e;e=c("useIsReadOnlyFeatureLimitedWithThreadType")(a.threadType);return c("useMWPFeatureLimitsBlockedComposerConfiguration")(b,e,a)}g["default"]=a}),98);
__d("useMWPNullComposerConfiguration",["I64","LSNullstateCTAType","MWBlockedComposerLogging","MWPreloadedText","justknobx","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=h||(h=d("react"));b=h;var k=b.useContext,l=b.c;function m(a){var b=a.reason;a=a.threadKey;d("MWBlockedComposerLogging").useLogMWBlockedComposerReason(a,b);return null}function a(a,b,e,f){var g=l(3),h=k(c("MWPreloadedText"));f=f!=null&&(i||(i=d("I64"))).equal(f,(i||(i=d("I64"))).of_float(c("LSNullstateCTAType").GET_STARTED))&&!h.text;h=!(i||(i=d("I64"))).equal(b,i.zero);b=c("justknobx")._("926");if(f&&!h||!b&&e){f=e?d("MWBlockedComposerLogging").ComposerBlockingReason.GAMING_GAME_BOT:d("MWBlockedComposerLogging").ComposerBlockingReason.GAMING_GET_STARTED_CTA;g[0]!==f||g[1]!==a?(h=j.jsx(m,{reason:f,threadKey:a}),g[0]=f,g[1]=a,g[2]=h):h=g[2];return h}}g["default"]=a}),98);
__d("useMWPReQLNullComposerConfiguration",["LSThreadBitOffset","ReQL","ReQLSuspense","react","useMWPNullComposerConfiguration","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=(i||(i=d("react"))).c;i;function a(a){var b=j(8),e=(h||(h=c("useReStore")))(),g;b[0]!==e.tables.thread_nullstate||b[1]!==a.threadKey?(g=function(){return d("ReQL").fromTableAscending(e.tables.thread_nullstate).getKeyRange(a.threadKey)},b[0]=e.tables.thread_nullstate,b[1]=a.threadKey,b[2]=g):g=b[2];var i;b[3]!==e||b[4]!==a.threadKey?(i=[e,a.threadKey],b[3]=e,b[4]=a.threadKey,b[5]=i):i=b[5];g=d("ReQLSuspense").useFirst(g,i,f.id+":27");b[6]!==a?(i=d("LSThreadBitOffset").has(44,a),b[6]=a,b[7]=i):i=b[7];b=i;return c("useMWPNullComposerConfiguration")(a.threadKey,a.lastActivityTimestampMs,b,g==null?void 0:g.ctaType)}g["default"]=a}),98);
__d("MWXComposerGlimmer.react",["MWXColumn.react","MWXColumnItem.react","MWXGlimmer.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||(h=d("react"))).c,j=h,k={block:{paddingBottom:"x1l90r2v",$$css:!0},container:{alignSelf:"xkh2ocl",backgroundColor:"x57kliw",borderTopColor:"x1epquy7",borderTopStyle:"x13fuv20",borderTopWidth:"x178xt8z",$$css:!0},glimmer:{borderTopStartRadius:"x1lq5wgf",borderTopEndRadius:"xgqcy7u",borderBottomEndRadius:"x30kzoy",borderBottomStartRadius:"x9jhf4c",height:"xlup9mm",width:"xh8yej3",$$css:!0}};b=j.forwardRef(a);function a(a,b){a=i(4);var d;a[0]===Symbol["for"]("react.memo_cache_sentinel")?(d=[k.container,k.block],a[0]=d):d=a[0];var e;a[1]===Symbol["for"]("react.memo_cache_sentinel")?(e=j.jsx(c("MWXColumnItem.react"),{children:j.jsx(c("MWXGlimmer.react"),{index:0,xstyle:k.glimmer})}),a[1]=e):e=a[1];a[2]!==b?(d=j.jsx(c("MWXColumn.react"),{paddingHorizontal:16,paddingVertical:16,ref:b,spacing:20,xstyle:d,children:e}),a[2]=b,a[3]=d):d=a[3];return d}e=b;g["default"]=e}),98);
__d("getMWPUnavailableComposerConfiguration",["I64","LSAuthorityLevel","LSMessagingThreadTypeUtil","MWBlockedComposerLogging","MWChatUnavailableComposer.react","MWXComposerGlimmer.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=h||d("react");function a(a,b,e){if(d("LSMessagingThreadTypeUtil").isOneToOne(b)&&e!=null){b=!e.isPage&&(!e.hasMessageCapability||!e.hasReplyMessageCapability);if(e.blockedSinceTimestampMs==null&&b)return(i||(i=d("I64"))).lt(e.authorityLevel,(i||(i=d("I64"))).of_int32(c("LSAuthorityLevel").AUTHORITATIVE))?j.jsx(c("MWXComposerGlimmer.react"),{}):j.jsx(c("MWChatUnavailableComposer.react"),{reason:e.hasMessageCapability?d("MWBlockedComposerLogging").ComposerBlockingReason.USER_BLOCKED_CANNOT_REPLY:d("MWBlockedComposerLogging").ComposerBlockingReason.USER_BLOCKED_CANNOT_MESSAGE,thread:{threadKey:a}})}}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("useMWPReQLUnavailableComposerConfiguration",["I64","LSContactBitOffset","LSContactType","LSIntEnum","LSMessagingThreadTypeUtil","MWPActor.react","ReQL","ReQLSuspense","getMWPUnavailableComposerConfiguration","react","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l=(k||(k=d("react"))).c;k;function a(a){var b=l(16),e=(h||(h=c("useReStore")))(),g=d("MWPActor.react").useActor(),k;b[0]!==g||b[1]!==a.threadKey?(k=(i||(i=d("I64"))).equal(g,a.threadKey),b[0]=g,b[1]=a.threadKey,b[2]=k):k=b[2];var m=k,n;b[3]!==a.threadType||b[4]!==a.threadKey||b[5]!==e||b[6]!==m||b[7]!==g?(k=function(){return d("LSMessagingThreadTypeUtil").isOneToOne(a.threadType)?d("ReQL").mergeJoin(d("ReQL").fromTableAscending(e.tables.participants).getKeyRange(a.threadKey),d("ReQL").fromTableAscending(e.tables.contacts)).filter(function(a){a[0];a=a[1];return m||!(i||(i=d("I64"))).equal(a.id,g)}).map(function(a){a[0];a=a[1];return a}):d("ReQL").empty()},n=[e,a.threadKey,a.threadType,g,m],b[3]=a.threadType,b[4]=a.threadKey,b[5]=e,b[6]=m,b[7]=g,b[8]=k,b[9]=n):(k=b[8],n=b[9]);k=d("ReQLSuspense").useFirst(k,n,f.id+":33");if(k==null)return;n=k==null?void 0:k.authorityLevel;var o=k==null?void 0:k.blockedSinceTimestampMs,p;b[10]!==k||b[11]!==n||b[12]!==o||b[13]!==a.threadKey||b[14]!==a.threadType?(p=c("getMWPUnavailableComposerConfiguration")(a.threadKey,a.threadType,{authorityLevel:n,blockedSinceTimestampMs:o,hasMessageCapability:d("LSContactBitOffset").has(0,k),hasReplyMessageCapability:d("LSContactBitOffset").has(1,k),isPage:(i||(i=d("I64"))).equal(k.contactType,(j||(j=d("LSIntEnum"))).ofNumber(c("LSContactType").PAGE))}),b[10]=k,b[11]=n,b[12]=o,b[13]=a.threadKey,b[14]=a.threadType,b[15]=p):p=b[15];return p}g["default"]=a}),98);
__d("useMWPShouldShowRestrictedComposer",["LSMessagingThreadTypeUtil","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).c;function a(a,b){var c=i(3),e;c[0]!==a||c[1]!==b?(e=d("LSMessagingThreadTypeUtil").isOneToOne(a)&&b,c[0]=a,c[1]=b,c[2]=e):e=c[2];return e}g["default"]=a}),98);
__d("useMWPRestrictedComposerConfiguration",["I64","JSResourceForInteraction","LSContactBitOffset","MWPComposerPlaceholder.react","lazyLoadComponent","react","useMWGetOtherUserContact","useMWIsContactRestricted","useMWPShouldShowRestrictedComposer"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=(h||(h=d("react"))).c,k=h,l=c("lazyLoadComponent")(c("JSResourceForInteraction")("MWPReQLRestrictedComposer.react").__setRef("useMWPRestrictedComposerConfiguration"));function a(a){var b=j(7),e;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(e=["id"].concat(d("LSContactBitOffset").contactCapabilityFields),b[0]=e):e=b[0];e=c("useMWGetOtherUserContact")(a.threadKey,a.threadType,e);var f=c("useMWIsContactRestricted")(e);f=c("useMWPShouldShowRestrictedComposer")(a.threadType,f);if(f&&e!=null){b[1]!==e.id?(f=(i||(i=d("I64"))).to_string(e.id),b[1]=e.id,b[2]=f):f=b[2];b[3]!==f||b[4]!==a.threadKey||b[5]!==a.threadType?(e=k.jsx(c("MWPComposerPlaceholder.react"),{height:128,children:k.jsx(l,{fbid:f,threadKey:a.threadKey,threadType:a.threadType})}),b[3]=f,b[4]=a.threadKey,b[5]=a.threadType,b[6]=e):e=b[6];return e}}g["default"]=a}),98);
__d("useMWCutoverComposerConfiguration",["JSResourceForInteraction","LSMessagingThreadTypeUtil","MWBlockedComposerLogging","gkx","lazyLoadComponent","react","useMAWCanThreadBeCutoverOnDemand"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;var j=b.useState,k=b.c,l=c("lazyLoadComponent")(c("JSResourceForInteraction")("MWCutoverComposer.react").__setRef("useMWCutoverComposerConfiguration")),m=c("lazyLoadComponent")(c("JSResourceForInteraction")("MWOnDemandCutoverComposer.react").__setRef("useMWCutoverComposerConfiguration")),n=c("lazyLoadComponent")(c("JSResourceForInteraction")("MWDualThreadCutoverComposer.react").__setRef("useMWCutoverComposerConfiguration"));function a(a,b,e,f,g,h){var o=k(15),p=j(!1),q=p[0];p=p[1];var r=c("useMAWCanThreadBeCutoverOnDemand")(a);r=r&&c("gkx")("7946");if((h||g||r||q)&&(!d("LSMessagingThreadTypeUtil").isOneToOne(b)||e!=null))if(f){o[0]!==a?(h={threadKey:a},o[0]=a,o[1]=h):h=o[1];o[2]!==e||o[3]!==h?(g=i.jsx(n,{otherUser:e,thread:h}),o[2]=e,o[3]=h,o[4]=g):g=o[4];return g}else if(r||q){o[5]!==a?(b={threadKey:a},o[5]=a,o[6]=b):b=o[6];o[7]!==q||o[8]!==b?(f=i.jsx(m,{isODCutoverNavigationInProgress:q,reason:d("MWBlockedComposerLogging").ComposerBlockingReason.ON_DEMAND_CUTOVER,setIsODCutoverNavigationInProgress:p,thread:b}),o[7]=q,o[8]=b,o[9]=f):f=o[9];return f}else{h=e!=null?d("MWBlockedComposerLogging").ComposerBlockingReason.ARMADILLO_THREAD_ALREADY_CUTOVER:d("MWBlockedComposerLogging").ComposerBlockingReason.ARMADILLO_GROUP_THREAD_CUTOVER;o[10]!==a?(g={threadKey:a},o[10]=a,o[11]=g):g=o[11];o[12]!==h||o[13]!==g?(r=i.jsx(l,{reason:h,thread:g}),o[12]=h,o[13]=g,o[14]=r):r=o[14];return r}}g["default"]=a}),98);
__d("useMWReQLCutoverComposerConfiguration",["LSContactBitOffset","LSMessagingThreadTypeUtil","LSThreadBitOffset","MAWThreadCutover","ReQL","ReQLSuspense","react","useMWCutoverComposerConfiguration","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=(i||(i=d("react"))).c;i;function a(a){var b=j(9),e=(h||(h=c("useReStore")))(),g;b[0]!==a.threadType||b[1]!==a.threadKey||b[2]!==e.tables.contacts?(g=function(){return d("LSMessagingThreadTypeUtil").isOneToOne(a.threadType)?d("ReQL").fromTableAscending(e.tables.contacts).getKeyRange(a.threadKey):d("ReQL").empty()},b[0]=a.threadType,b[1]=a.threadKey,b[2]=e.tables.contacts,b[3]=g):g=b[3];var i;b[4]!==e||b[5]!==a?(i=[e,a],b[4]=e,b[5]=a,b[6]=i):i=b[6];g=d("ReQLSuspense").useFirst(g,i,f.id+":33");i=((i=(i=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableAscending(e.tables.messages_ranges_v2__generated).getKeyRange(a.threadKey)},[e,a.threadKey],f.id+":44"))==null?void 0:i.minMessageId)!=null?i:"")==="";var k;b[7]!==g?(k=g!=null&&d("LSContactBitOffset").has(76,g),b[7]=g,b[8]=k):k=b[8];b=k;k=b&&i;b=d("MAWThreadCutover").useIsCutoverOpenThread(a.threadKey)||d("LSThreadBitOffset").has(128,a);i=d("MAWThreadCutover").useIsDualThreadCutoverOpenThread(a.threadKey);return c("useMWCutoverComposerConfiguration")(a.threadKey,a.threadType,g,i,b,k)}g["default"]=a}),98);
__d("MWComposerGating.react",["LSMessagingThreadTypeUtil","MWPComposerGating.react","MWV2OpenComposer.react","cr:9773","emptyFunction","react","useMAWEditMessageData","useMWDefaultE2eeComposerConfiguration","useMWPBlockedComposerConfiguration","useMWPDisablePageComposerConfiguration","useMWPReQLFeatureLimitsBlockedComposerConfiguration","useMWPReQLNullComposerConfiguration","useMWPReQLUnavailableComposerConfiguration","useMWPRestrictedComposerConfiguration","useMWReQLCutoverComposerConfiguration"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react")),j=h,k=j.memo,l=j.c;function m(a){var b=l(9),d=c("useMWPReQLNullComposerConfiguration")(a),e=c("useMWPDisablePageComposerConfiguration")(a),f=c("useMWPReQLFeatureLimitsBlockedComposerConfiguration")(a),g=c("useMWReQLCutoverComposerConfiguration")(a),h=c("useMWPBlockedComposerConfiguration")(a),i=c("useMWPRestrictedComposerConfiguration")(a),j=c("useMWPReQLUnavailableComposerConfiguration")(a);a=c("useMWDefaultE2eeComposerConfiguration")(a);var k;b[0]!==d||b[1]!==e||b[2]!==f||b[3]!==g||b[4]!==h||b[5]!==i||b[6]!==j||b[7]!==a?(k=[d,e,f,g,h,i,j,a],b[0]=d,b[1]=e,b[2]=f,b[3]=g,b[4]=h,b[5]=i,b[6]=j,b[7]=a,b[8]=k):k=b[8];return k}function a(a){var e=l(8),f=a.afterSendMessage,g=a.isPreviewThread;a=a.thread;var h=c("useMAWEditMessageData")();h=d("LSMessagingThreadTypeUtil").isArmadilloSecure(h!=null?h.threadType:a.threadType);if(b("cr:9773")!=null&&h){e[0]!==f||e[1]!==g||e[2]!==a?(h=i.jsx(b("cr:9773"),{afterSendMessage:f,isPreviewThread:g,thread:a}),e[0]=f,e[1]=g,e[2]=a,e[3]=h):h=e[3];return h}else{e[4]!==f||e[5]!==g||e[6]!==a?(h=i.jsx(c("MWV2OpenComposer.react"),{afterSendMessage:f,isPreviewThread:g,thread:a}),e[4]=f,e[5]=g,e[6]=a,e[7]=h):h=e[7];return h}}var n=k(a);function e(a){var b=l(8),d=a.afterSendMessage,e=a.isPreviewThread,f=a.thread,g=d===void 0?c("emptyFunction"):d;a=m(f);b[0]!==g||b[1]!==e||b[2]!==f?(d=function(){return i.jsx(n,{afterSendMessage:g,isPreviewThread:e,thread:f})},b[0]=g,b[1]=e,b[2]=f,b[3]=d):d=b[3];var h;b[4]!==a||b[5]!==d||b[6]!==f?(h=i.jsx(c("MWPComposerGating.react"),{configurations:a,isMessengerInbox:!1,renderComposer:d,thread:f}),b[4]=a,b[5]=d,b[6]=f,b[7]=h):h=b[7];return h}function f(a){var b=l(8),d=a.afterSendMessage,e=a.isPreviewThread,f=a.thread;a=m(f);var g;b[0]!==d||b[1]!==e||b[2]!==f?(g=function(){return i.jsx(n,{afterSendMessage:d,isPreviewThread:e,thread:f})},b[0]=d,b[1]=e,b[2]=f,b[3]=g):g=b[3];var h;b[4]!==a||b[5]!==g||b[6]!==f?(h=i.jsx(c("MWPComposerGating.react"),{configurations:a,isMessengerInbox:!0,renderComposer:g,thread:f}),b[4]=a,b[5]=g,b[6]=f,b[7]=h):h=b[7];return h}g.MWChatComposerGating=e;g.MWInboxComposerGating=f}),98);
__d("MWEBRestoreGapUI.react",["fbt","MAWEncryptedBackupsRestoreDialog.entrypoint","MWChatEncryptedBackupsQPLEvents","MWChatEncryptedBackupsQPLSource.enum","MWEBEntrypointsKillswitch.enum","MWEncryptedBackupsRetrieveQplLoggingAnnotations","MWXLink.react","MWXRow.react","MWXRowItem.react","MWXText.react","QPLUserFlow","promiseDone","react","requireDeferred","useLabyrinthLogging","useMWEBBackupState","useMWEBGetUpsellState","useMWXEntryPointDialog","useReStore","useVisibilityObserver"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=j||(j=d("react"));b=j;b.useCallback;var l=b.useEffect,m=b.useRef,n=b.c,o=c("requireDeferred")("mwEBCheckIfEBKeysExistInDisk").__setRef("MWEBRestoreGapUI.react"),p={banner:{backgroundColor:"xlhe6ec",borderTopStartRadius:"x1lq5wgf",borderTopEndRadius:"xgqcy7u",borderBottomEndRadius:"x30kzoy",borderBottomStartRadius:"x9jhf4c",overflowX:"x6ikm8r",overflowY:"x10wlt62",paddingTop:"xyamay9",paddingBottom:"x1l90r2v",paddingStart:"x1xfsgkm",paddingEnd:"xqmdsaz",paddingLeft:null,paddingRight:null,$$css:!0}};function a(){var a=n(21),b=(i||(i=c("useReStore")))(),e;a[0]===Symbol["for"]("react.memo_cache_sentinel")?(e={entrypoint:c("MWEBEntrypointsKillswitch.enum").IN_THREAD_GAP_UI},a[0]=e):e=a[0];e=c("useMWEBBackupState")(e);var f;a[1]===Symbol["for"]("react.memo_cache_sentinel")?(f={},a[1]=f):f=a[1];f=c("useMWXEntryPointDialog")(c("MAWEncryptedBackupsRestoreDialog.entrypoint"),f);var g=f[0];f=d("useLabyrinthLogging").useLabyrinthLoggingFlow();var j=f.startFlow;f=c("useMWEBGetUpsellState")();f=f.isRestoreUpsellsDismissed;var q=c("MWChatEncryptedBackupsQPLSource.enum").IN_THREAD_GAP_UI,r=m(!1),s=m(!1),t;a[2]!==b||a[3]!==j?(t=function(a){d("MWEncryptedBackupsRetrieveQplLoggingAnnotations").encryptedBackupsRetrieveQplLoggingAnnotations({db:b,onFetch:function(b){var e=b.ebsmWiped,f=b.firstUpsellTime,g=b.hasEbKeysLocally,h=b.hasEBSM,i=b.hasPDB,k=b.hasUserRestoredBefore;b=b.hasUserRestoredBeforeTemp;j({additionalAnnotations:{eb_session_identifier:f,ebsm_wiped:e,has_eb_keys_locally:g,has_ebsm:h,has_pdb:i,has_user_restored_before:k,has_user_restored_before_temp:b,restore_upsell_first_impression_time:f},event:d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,source:q});c("QPLUserFlow").addPoint(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,a);s.current===!1&&(s.current=!0,c("promiseDone")(o.load(),function(a){return a(g)}))}})},a[2]=b,a[3]=j,a[4]=t):t=a[4];var u=t;a[5]!==u?(t={onVisible:function(){u("RESTORE_IN_THREAD_MISSING_MESSAGE_GAP_UI_IMPRESSION")}},a[5]=u,a[6]=t):t=a[6];t=c("useVisibilityObserver")(t);var v=e===4&&!f;a[7]!==v||a[8]!==u?(e=function(){r.current===!1&&v&&(r.current=!0,u("RESTORE_IN_THREAD_MISSING_MESSAGE_GAP_UI_MOUNT"))},f=[v,u],a[7]=v,a[8]=u,a[9]=e,a[10]=f):(e=a[9],f=a[10]);l(e,f);if(!v)return null;a[11]===Symbol["for"]("react.memo_cache_sentinel")?(e=h._("__JHASH__4WMqcKoHbeS__JHASH__"),a[11]=e):e=a[11];a[12]!==u||a[13]!==g?(f=function(){u("RESTORE_IN_THREAD_GAP_UI_CTA_CLICK"),g({source:q})},a[12]=u,a[13]=g,a[14]=f):f=a[14];var w;a[15]===Symbol["for"]("react.memo_cache_sentinel")?(w=h._("__JHASH__KfRv84gajDv__JHASH__"),a[15]=w):w=a[15];a[16]!==f?(e=k.jsx(c("MWXRowItem.react"),{xstyle:p.banner,children:k.jsx(c("MWXText.react"),{align:"center",color:"secondary",type:"body4",children:k.jsxs(k.Fragment,{children:[e," ",k.jsx(c("MWXText.react"),{color:"blueLink",type:"bodyLink4",children:k.jsx(c("MWXLink.react"),{onClick:f,target:"_blank",testid:void 0,children:w})})]})})}),a[16]=f,a[17]=e):e=a[17];a[18]!==t||a[19]!==e?(w=k.jsx(c("MWXRow.react"),{align:"center",paddingHorizontal:16,paddingVertical:4,ref:t,spacing:0,children:e}),a[18]=t,a[19]=e,a[20]=w):w=a[20];return w}g["default"]=a}),226);
__d("MWEditChannelDialogQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="6185531621550317"}),null);
__d("MWEditChannelDialogQuery$Parameters",["MWEditChannelDialogQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a={kind:"PreloadableConcreteRequest",params:{id:b("MWEditChannelDialogQuery_facebookRelayOperation"),metadata:{},name:"MWEditChannelDialogQuery",operationKind:"query",text:null}};e.exports=a}),null);
__d("MWEditChannelDialog.entrypoint",["JSResourceForInteraction","MWEditChannelDialogQuery$Parameters"],(function(a,b,c,d,e,f,g){"use strict";a={getPreloadProps:function(a){a=a.threadID;return{queries:{queryReference:{options:{fetchPolicy:"network-only"},parameters:c("MWEditChannelDialogQuery$Parameters"),variables:{threadID:a}}}}},root:c("JSResourceForInteraction")("MWEditChannelDialog.react").__setRef("MWEditChannelDialog.entrypoint")};g["default"]=a}),98);
__d("MWEditChannelDialogTrigger.react",["I64","MWEditChannelDialog.entrypoint","promiseDone","react","useMWXEntryPointDialog","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=(j||(j=d("react"))).c;j;function a(a){var b=k(11),e=a.children,f=a.threadKey,g=(h||(h=c("useReStore")))();b[0]!==f?(a=(i||(i=d("I64"))).to_string(f),b[0]=f,b[1]=a):a=b[1];var j;b[2]!==a?(j={threadID:a},b[2]=a,b[3]=j):j=b[3];a=j;j=c("useMWXEntryPointDialog")(c("MWEditChannelDialog.entrypoint"),a);var l=j[0];b[4]!==g.tables.threads||b[5]!==f||b[6]!==l?(a=function(){c("promiseDone")(g.tables.threads.get(f),function(a){if(a==null)return;l({thread:a})})},b[4]=g.tables.threads,b[5]=f,b[6]=l,b[7]=a):a=b[7];j=a;b[8]!==e||b[9]!==j?(a=e(j),b[8]=e,b[9]=j,b[10]=a):a=b[10];return a}g["default"]=a}),98);
__d("MWExpandReactionsButton.react",["fbt","I64","MWCMThreadTypes.react","MWChatMessageId","MWChatReactionsActionContainer.react","MWMultiReactConstants","MWXPressable.react","MWXTooltip.react","emptyFunction","intlSummarizeNumber","react","stylex","useIsReactionsV2Enabled"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l=j||(j=d("react"));b=j;var m=b.useCallback,n=b.useMemo,o={additionalInlineButton:{display:"x78zum5",flexDirection:"xdt5ytf",height:"xlup9mm",justifyContent:"xl56j7k",width:"x1npj6m0",$$css:!0},emoji:{alignItems:"x6s0dn4",borderTopStartRadius:"x14yjl9h",borderTopEndRadius:"xudhj91",borderBottomEndRadius:"x18nykt9",borderBottomStartRadius:"xww2gxu",cursor:"x1ypdohk",lineHeight:"x14ju556",marginEnd:"x11i5rnm",$$css:!0},emojiNum:{paddingStart:"x1k2j06m",paddingEnd:"x10ogl3i",textAlign:"x2b8uid",$$css:!0},emojiRowContainer:{borderTopStartRadius:"xdxvlk3",borderTopEndRadius:"x1fglp",borderBottomEndRadius:"x1rp6h8o",borderBottomStartRadius:"xg6i1s1",marginBottom:"x12nagc",marginEnd:"xw3qccf",$$css:!0},fontStyles:{color:"xi81zsa",fontSize:"x1nxh6w3",fontWeight:"x1s688f",$$css:!0}};function a(a){var b=a.isMultiReactExpanded,e=a.isReactionReadOnly,f=a.isSecure,g=a.message,j=a.numOverflowEmojis,p=a.sendReaction,q=a.setIsReactionsRowAnimationInProgress,r=a.threadKey,s=a.threadType,t=a.toggleMultiReactExpanded,u=(k||(k=d("I64"))).to_string(r),v=k.to_string(g.timestampMs);a=n(function(){return d("MWChatMessageId").makeSent(u,g.messageId,v)},[u,g.messageId,v]);s=d("MWCMThreadTypes.react").isBroadcastThread(s);r=d("useIsReactionsV2Enabled").useIsReactionsV2Enabled(r);var w=m(function(){t(),q(!0)},[q,t]);return l.jsx(c("MWChatReactionsActionContainer.react"),{alwaysShowEmojiPicker:!0,closeActionsMenu:c("emptyFunction"),disableCustomReactions:r&&s,hasReactionsV2:r,isBroadcastThread:s,isSecure:f,messageID:a,onVisibilityChange:c("emptyFunction"),sendReaction:p,children:function(a,f,g,k,m){f=h._("__JHASH__S6Ab1Epvc_N__JHASH__");var n=c("intlSummarizeNumber")(j),p="+"+n;n=n.length;g=l.jsx(c("MWXPressable.react"),{"aria-label":f,disabled:e,expanding:!0,onHoverIn:g,onHoverOut:k,onPress:w,onPressIn:m,overlayRadius:"inherit",ref:a,role:"button",testid:void 0,xstyle:o.emojiRowContainer,children:l.jsx("div",{className:"x6s0dn4 x7daf1o xdxvlk3 x1fglp x1rp6h8o xg6i1s1 x78zum5 xl56j7k x10b6aqq xsyo7zv xurb0ha x1yrsyyn x1n2onr6 xp4054r",role:"none",children:l.jsx("div",{className:(i||(i=c("stylex")))([].concat(b?[o.fontStyles,o.emoji,o.additionalInlineButton]:[o.fontStyles,o.emojiNum])),role:"none",style:{minWidth:n*d("MWMultiReactConstants").SPACING_PER_COUNT_CHARACTER},children:p})})});return e?g:l.jsx(c("MWXTooltip.react"),{align:"middle",position:"above",tooltip:f,children:g})}})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("MWFDSChatHeaderDetailsSubtitleMutedIcon.react",["ix","FDSTintedIcon_DEPRECATED.react","fbicon","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=(i||(i=d("react"))).c,k=i;function a(){var a=j(1),b;a[0]===Symbol["for"]("react.memo_cache_sentinel")?(b=k.jsx(c("FDSTintedIcon_DEPRECATED.react"),{color:"secondary",icon:d("fbicon")._(h("636130"),12),testid:void 0}),a[0]=b):b=a[0];return b}g["default"]=a}),98);
__d("MWGroupLimitConfig",["cr:410"],(function(a,b,c,d,e,f,g){"use strict";g.armadillo=b("cr:410").armadillo,g.gxac=b("cr:410").gxac,g.nonGxac=b("cr:410").nonGxac}),98);
__d("MWGroupLimitConfigForProd",["MAWAbPropsClient"],(function(a,b,c,d,e,f,g){"use strict";function a(){return d("MAWAbPropsClient").getAbProps().client_group_participants_limit}b=32;c=256;g.armadillo=a;g.gxac=b;g.nonGxac=c}),98);
__d("MWGroupLimitContainer.react",["cr:3409","react"],(function(a,b,c,d,e,f,g){"use strict";var h;h||d("react");function a(a){var c=a.children,d=a.groupLimitReachedContent;a=a.thread;a=(a=b("cr:3409")==null?void 0:b("cr:3409")(a.threadKey))!=null?a:[!1,!1];a=a[0];return a?d:c}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWInboxHeaderBroadcastChannelSubText.react",["fbt","BaseMiddot.react","CometTextWithEntities.react","intlSummarizeNumber","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=(i||(i=d("react"))).c,k=i;function a(a){var b=j(3);a=a.memberCount;var d;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(d=k.jsx(c("CometTextWithEntities.react"),{text:h._("__JHASH__SvUIYrDirw-__JHASH__").toString()}),b[0]=d):d=b[0];b[1]!==a?(d=k.jsxs(k.Fragment,{children:[d,a>0?k.jsxs(k.Fragment,{children:[k.jsx(c("BaseMiddot.react"),{}),c("intlSummarizeNumber")(a),k.jsx(k.Fragment,{children:" "}),h._("__JHASH__YqlBHec3EKS__JHASH__",[h._plural(a)])]}):k.jsx(k.Fragment,{})]}),b[1]=a,b[2]=d):d=b[2];return d}g["default"]=a}),226);
__d("MWInboxInfoMembersSectionStorageKey",[],(function(a,b,c,d,e,f){"use strict";a="__MWInboxInfoMembersSection.isOpen__";f.storageKey=a}),66);
__d("MWXIconMenuItemArrowDown",["MWXSvgIcon","SVGIcon","cr:9362","gkx"],(function(a,b,c,d,e,f,g){"use strict";a=d("MWXSvgIcon").mwxSvgMenuItemIcon(d("SVGIcon").svgIcon(b("cr:9362")),c("gkx")("23219"));g["default"]=a}),98);
__d("MWJumpToMostRecentMessageButton.react",["fbt","MWPBumpEntityKey","MWXIconMenuItemArrowDown","MWXIconStrict.react","MWXPressable.react","MWXThreadThemeColor","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=(i||(i=d("react"))).c,k=i,l={circleButton:{alignItems:"x6s0dn4",backgroundColor:"x1l31dnx",borderTopStartRadius:"x14yjl9h",borderTopEndRadius:"xudhj91",borderBottomEndRadius:"x18nykt9",borderBottomStartRadius:"xww2gxu",boxShadow:"xurzqwv",display:"x78zum5",height:"x1vqgdyp",justifyContent:"xl56j7k",width:"x100vrsf",$$css:!0}};function a(a){var b=j(6),e=a.onPress;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(a=h._("__JHASH__mZcaI1xn9AA__JHASH__"),b[0]=a):a=b[0];var f;b[1]!==e?(f=function(){e(),d("MWPBumpEntityKey").bumpEntityKeyWithAppId("mw_jump_to_bottom","app_id")},b[1]=e,b[2]=f):f=b[2];var g;b[3]===Symbol["for"]("react.memo_cache_sentinel")?(g=k.jsx(c("MWXIconStrict.react"),{color:d("MWXThreadThemeColor").mwxThreadThemeColor("var(--mwp-primary-theme-color)"),icon:c("MWXIconMenuItemArrowDown"),size:20}),b[3]=g):g=b[3];b[4]!==f?(a=k.jsx(c("MWXPressable.react"),{"aria-label":a,onPress:f,xstyle:l.circleButton,children:g}),b[4]=f,b[5]=a):a=b[5];return a}g["default"]=a}),226);
__d("MWMessageList",["CometPageletWithDiv.react","I64","Int64Hooks","InteractionTracingMetrics","LSCommunityBitOffset","LSMessageRenderingType","LSMessagingThreadTypeUtil","MWBlockingProtectionContext.react","MWClickedMessageContext.react","MWCollapsibleAdminMessages.react","MWInboxThreadMessagesSpinner.react","MWJumpToMostRecentMessageButton.react","MWMessageListLoggingContext","MWMessageRow.react","MWMessageSendingContext.react","MWPMessageListFocusTable.react","MWPThreadCapabilitiesContext","MWPTypingIndicators.react","MWPVisibleMessageContext.react","MWV2ChatAdminMessage.react","MWV2MessageActionsVisibility.react","WebUXLoggingSurfaceContextProvider","cr:3907","cr:6714","cr:7486","gkx","isMWNewSearchUXEnabled","mwCMIsAnyCMThread","react","useCommunityFolder","useIsReactionsV2Enabled","useMWPAriaLabelForMessageListGrid","uuidv4"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=h||(h=d("react"));e=h;var k=e.useEffect,l=e.useId,m=e.useState,n=e.c;function o(a){return d("MWV2ChatAdminMessage.react").isAdminMessage(a)&&a!=null&&(a.messageRenderingType==null||!(i||(i=d("I64"))).equal(a.messageRenderingType,(i||(i=d("I64"))).of_int32(c("LSMessageRenderingType").NON_COLLAPSIBLE_ADMIN_MESSAGE)))}function p(a){return j.jsx(c("MWInboxThreadMessagesSpinner.react"),{vcIgnore:a})}p.displayName=p.name+" [from "+f.id+"]";function q(a){return j.jsx(c("MWJumpToMostRecentMessageButton.react"),{onPress:a})}q.displayName=q.name+" [from "+f.id+"]";e=j.forwardRef(a);function a(a,e){var f=n(51),g=a.entryPoint,h=a.renderFooter,s=a.renderHeader,t=a.thread,u=d("MWV2MessageActionsVisibility.react").useStopHoveringRef();a=m("");var v=a[0];a=a[1];var w=l(),x;f[0]!==t.threadType?(x=d("LSMessagingThreadTypeUtil").isArmadilloSecure(t.threadType),f[0]=t.threadType,f[1]=x):x=f[1];var y=x;x=c("useMWPAriaLabelForMessageListGrid")(t);var z=d("MWPVisibleMessageContext.react").useMWPVisibleMessageContext(),A=z.setVisibleMessage,B=z.visibleMessage,C;f[2]!==t.threadType?(z=function(){return t.threadType},C=[t.threadType],f[2]=t.threadType,f[3]=z,f[4]=C):(z=f[3],C=f[4]);var D=d("Int64Hooks").useMemoInt64(z,C),E=c("useCommunityFolder")(t);f[5]!==E?(z=E!=null?d("LSCommunityBitOffset").has(9,E):!1,f[5]=E,f[6]=z):z=f[6];var F=z,G=d("useIsReactionsV2Enabled").useIsReactionsV2Enabled(t.threadKey),H=b("cr:6714")(t.threadKey);C=m(!1);var I=C[0],J=C[1];f[7]!==H||f[8]!==I||f[9]!==A?(z=function(){H&&!I&&A(function(a){return(a=a)!=null?a:{contextLine:"",highlights:[],messageId:H.messageId,source:"LastReadWatermark",timestamp:H.timestampMs}})},C=[H,A,I],f[7]=H,f[8]=I,f[9]=A,f[10]=z,f[11]=C):(z=f[10],C=f[11]);k(z,C);f[12]!==t.threadKey||f[13]!==D||f[14]!==h?(z=function(){return j.jsxs(j.Fragment,{children:[j.jsx(d("MWPTypingIndicators.react").MWPTypingIndicators,{threadKey:t.threadKey,threadType:D}),h&&h()]})},C=[h,t.threadKey,D],f[12]=t.threadKey,f[13]=D,f[14]=h,f[15]=z,f[16]=C):(z=f[15],C=f[16]);z=d("Int64Hooks").useCallbackInt64(z,C);f[17]===Symbol["for"]("react.memo_cache_sentinel")?(C=new Map(),f[17]=C):C=f[17];var K=C;f[18]===Symbol["for"]("react.memo_cache_sentinel")?(C=function(){return J(!0)},f[18]=C):C=f[18];var L;f[19]!==y||f[20]!==t.threadKey||f[21]!==t.threadType||f[22]!==H||f[23]!==B||f[24]!==E||f[25]!==F||f[26]!==v||f[27]!==D||f[28]!==G||f[29]!==u?(L=function(a){var b=a.domElementRef,e=a.message,f=a.nextMessage,g=a.prevMessage;a=a.rowIndexFromBottom;var h=y?(i||(i=d("I64"))).equal(t.threadKey,e.threadKey):!1,k=(H==null?void 0:H.messageId)===e.messageId,l=!o(g)&&!o(f),m=B==null?!1:B.messageId===e.messageId&&(B.source==="Reply"||B.source==="Pinned"||B.source==="Search"&&c("isMWNewSearchUXEnabled")());if((c("mwCMIsAnyCMThread")(t.threadType)||d("LSMessagingThreadTypeUtil").isDiscoverableChannel(t.threadType))&&o(e)&&!l){K.set(e.messageId,e);l=o(g)&&!o(f);if(l){l=Array.from(K.values());K.clear();return j.jsx(c("MWCollapsibleAdminMessages.react"),{domElementRef:b,fbGroupId:E==null?void 0:E.fbGroupId,hasMessageEmphasisRing:m,isCMAdmin:F,isModal:v===e.messageId,isSecureMessage:h,messages:l,rowIndexFromBottom:a,shouldRenderUnreadIndicator:k,threadType:D,useReactionsV2:G})}else return null}return j.jsx(d("MWMessageRow.react").MWMessageRow,{containerThreadKey:t.threadKey,domElementRef:b,fbGroupId:E==null?void 0:E.fbGroupId,hasMessageEmphasisRing:m,isCMAdmin:F,isModal:v===e.messageId,isSecureMessage:h,message:e,nextMessage:f,prevMessage:g,rowIndexFromBottom:a,shouldRenderUnreadIndicator:k,stopHoveringRef:u,threadType:D,useReactionsV2:G})},f[19]=y,f[20]=t.threadKey,f[21]=t.threadType,f[22]=H,f[23]=B,f[24]=E,f[25]=F,f[26]=v,f[27]=D,f[28]=G,f[29]=u,f[30]=L):L=f[30];f[31]!==g||f[32]!==e||f[33]!==z||f[34]!==s||f[35]!==L||f[36]!==t?(C=j.jsx(b("cr:7486"),{entryPoint:g,onPageLoaded:r,onUserScroll:C,pageSize:c("gkx")("23432")?3:15,ref:e,renderFooter:z,renderHeader:s,renderJumpToMostRecentMessageButton:q,renderLoadingAnimation:p,renderRow:L,thread:t}),f[31]=g,f[32]=e,f[33]=z,f[34]=s,f[35]=L,f[36]=t,f[37]=C):C=f[37];g=C;f[38]===Symbol["for"]("react.memo_cache_sentinel")?(e="x78zum5 xdt5ytf x1iyjqo2 x5yr21d",z=j.jsx(c("MWInboxThreadMessagesSpinner.react"),{}),f[38]=e,f[39]=z):(e=f[38],z=f[39]);f[40]===Symbol["for"]("react.memo_cache_sentinel")?(s=c("uuidv4")(),f[40]=s):s=f[40];f[41]!==g||f[42]!==w?(L=j.jsx(d("WebUXLoggingSurfaceContextProvider").WebUXSurfaceLoggingContext.Provider,{value:"message_list",children:j.jsx(d("MWMessageListLoggingContext").MWMessageListLoggingContext,{flowInstanceId:s,children:b("cr:3907")==null?g:j.jsx(b("cr:3907"),{id:w,children:g})})}),f[41]=g,f[42]=w,f[43]=L):L=f[43];f[44]!==x||f[45]!==v||f[46]!==L?(C=j.jsx(c("MWPMessageListFocusTable.react"),{ariaLabel:x,modal:v,setModal:a,children:L}),f[44]=x,f[45]=v,f[46]=L,f[47]=C):C=f[47];f[48]!==t||f[49]!==C?(s=j.jsx(c("MWMessageSendingContext.react").Provider,{children:j.jsx(c("MWClickedMessageContext.react").Provider,{children:j.jsx(c("MWBlockingProtectionContext.react").Provider,{children:j.jsx(d("CometPageletWithDiv.react").Placeholder,{className:e,fallback:z,name:"MWMessageList",children:j.jsx(d("MWPThreadCapabilitiesContext").Provider,{thread:t,children:C})})})})}),f[48]=t,f[49]=C,f[50]=s):s=f[50];return s}function r(a,b,d,e){c("InteractionTracingMetrics").currentInteractionLogger().forEach(function(a){c("InteractionTracingMetrics").addMarkerPoint(a.traceId,"page_loaded","AppTiming",void 0,{page_index:e,page_size:d,total_number_of_messages:b.length})})}f=e;g["default"]=f}),98);
__d("MWMessageReaction.react",["BaseContextualLayer.react","I64","MWChatMultiReactionsTooltip.react","MWChatReactionEmoji","MWChatReactionsUtils","MWMultiReactConstants","MWXPopover.react","MWXPressable.react","MWXText.react","gkx","intlSummarizeNumber","react","stylex","useCometTheme","useFadeEffect"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=i||(i=d("react"));b=i;var l=b.useEffect,m=b.useRef,n=b.useState,o=b.c,p={"--card-background":"rgba(0,0,0,0)"},q={animatedEmoji:{animationDuration:"xdz8niu",animationIterationCount:"x1v7wizp",animationName:"x4uz0a7",animationTimingFunction:"xjmqbfh",opacity:"x1hc1fzr",transform:"xds7yc5",transformOrigin:"x1jpgh95",$$css:!0},emoji:{alignItems:"x6s0dn4",borderTopStartRadius:"x14yjl9h",borderTopEndRadius:"xudhj91",borderBottomEndRadius:"x18nykt9",borderBottomStartRadius:"xww2gxu",lineHeight:"x14ju556",marginEnd:"x11i5rnm",$$css:!0},emojiEnabled:{cursor:"x1ypdohk",$$css:!0},emojiNum:{color:"xi81zsa",fontSize:"x1nxh6w3",fontWeight:"x1s688f",paddingStart:"x1k2j06m",paddingEnd:"x10ogl3i",textAlign:"x2b8uid",$$css:!0},emojiRow:{alignItems:"x6s0dn4",backgroundColor:"xnmxlks",borderTopStartRadius:"xdxvlk3",borderTopEndRadius:"x1fglp",borderBottomEndRadius:"x1rp6h8o",borderBottomStartRadius:"xg6i1s1",display:"x78zum5",justifyContent:"xl56j7k",paddingBottom:"x10b6aqq",paddingEnd:"xsyo7zv",paddingStart:"xurb0ha",paddingTop:"x1yrsyyn",position:"x1n2onr6",textAlign:"xp4054r",$$css:!0},emojiRowContainer:{borderTopStartRadius:"xdxvlk3",borderTopEndRadius:"x1fglp",borderBottomEndRadius:"x1rp6h8o",borderBottomStartRadius:"xg6i1s1",marginBottom:"x12nagc",marginEnd:"xw3qccf",$$css:!0},scaleHeartEmoji:{transform:"xhqu4j4",$$css:!0},selectedColor:{backgroundColor:"x1y4ma1z",$$css:!0},selectedTextColor:{color:"x1f0x4kx",$$css:!0},tooltipContainer:{borderTopStartRadius:"x1r9drvm",borderTopEndRadius:"x16aqbuh",borderBottomEndRadius:"x9rzwcf",borderBottomStartRadius:"xjkqk3g",display:"x1lliihq",marginBottom:"xjpr12u",marginTop:"xr9ek0c",maxWidth:"x86nfjv",opacity:"xg01cxk",paddingTop:"xz9dl7a",paddingEnd:"xn6708d",paddingBottom:"xsag5q8",paddingStart:"x1ye3gou",position:"x1n2onr6",transitionDuration:"x1ebt8du",transitionProperty:"x19991ni",transitionTimingFunction:"x1dhq9h",$$css:!0},tooltipContainerVisible:{opacity:"x1hc1fzr",transitionDuration:"xhb22t3",transitionTimingFunction:"xls3em1",$$css:!0},tootltipBackgroundComet:{backgroundColor:"xj5tmjb",boxShadow:"xms15q0",$$css:!0}};function a(a){var b=o(77),e=a.emoji,f=a.isProcessingReactions,g=a.isReadOnly,i=a.isTooltipShown,r=a.message,s=a.onFocus,t=a.onMouseEnter,u=a.onMouseLeave,v=a.onTooltipCTAPress,w=a.queueSendReactionCallback,x=a.reaction,y=a.sendReaction,z=a.shouldAnimate;a=a.threadKey;var A=c("useCometTheme")("invert"),B=A[0];A=A[1];var C=c("useCometTheme")("light");C[0];C=C[1];var D=d("MWChatReactionsUtils").isHeart(e[0]),E=m(null);i=c("useFadeEffect")(i);var F=i[0],G=i[1];i=i[2];var H=n(x.viewerIsReactor),I=H[0],J=H[1];b[0]!==x.count?(H=(j||(j=d("I64"))).to_int32(x.count),b[0]=x.count,b[1]=H):H=b[1];H=n(H);var K=H[0],L=H[1];H=n(!1);var M=H[0],N=H[1],O=m(null),P;b[2]===Symbol["for"]("react.memo_cache_sentinel")?(H=function(){O.current!=null&&window.clearTimeout(O.current)},P=[],b[2]=H,b[3]=P):(H=b[2],P=b[3]);l(H,P);b[4]!==z?(H=function(){z&&(N(!0),O.current!=null&&window.clearTimeout(O.current),O.current=window.setTimeout(function(){O.current=null,N(!1)},600))},P=[z],b[4]=z,b[5]=H,b[6]=P):(H=b[5],P=b[6]);l(H,P);b[7]!==f||b[8]!==x.count||b[9]!==x.viewerIsReactor?(H=function(){f||(L((j||(j=d("I64"))).to_int32(x.count)),J(x.viewerIsReactor))},P=[f,x.count,x.viewerIsReactor],b[7]=f,b[8]=x.count,b[9]=x.viewerIsReactor,b[10]=H,b[11]=P):(H=b[10],P=b[11]);l(H,P);b[12]===Symbol["for"]("react.memo_cache_sentinel")?(H=function(){J(!0),L(function(a){return a+1})},b[12]=H):H=b[12];var Q=H;b[13]===Symbol["for"]("react.memo_cache_sentinel")?(P=function(){J(!1),L(function(a){return a>1?a-1:a})},b[13]=P):P=b[13];var R=P;H=c("intlSummarizeNumber")(K).length;P=I?C:null;b[14]!==P?(C=(h||(h=c("stylex")))(P),b[14]=P,b[15]=C):C=b[15];b[16]!==I||b[17]!==e||b[18]!==K||b[19]!==y||b[20]!==w?(P=function(){I?R():Q();var a=e.join("");K===1&&I?y(a,I):w(a,function(){y(a,I)})},b[16]=I,b[17]=e,b[18]=K,b[19]=y,b[20]=w,b[21]=P):P=b[21];var S=I&&q.selectedColor,T;b[22]!==S?(T=(h||(h=c("stylex")))([q.emojiRow,S]),b[22]=S,b[23]=T):T=b[23];S=g?null:q.emojiEnabled;var U;b[24]!==S?(U=(h||(h=c("stylex")))([q.emoji,S]),b[24]=S,b[25]=U):U=b[25];S=z||M?q.animatedEmoji:!1;M=D?q.scaleHeartEmoji:!1;b[26]!==S||b[27]!==M?(D=(h||(h=c("stylex")))(S,M),b[26]=S,b[27]=M,b[28]=D):D=b[28];S="multi-react-emoji-"+e[0];b[29]!==e||b[30]!==S?(M=k.jsx(c("MWChatReactionEmoji"),{emoji:e,size:16,testid:void 0}),b[29]=e,b[30]=S,b[31]=M):M=b[31];b[32]!==D||b[33]!==M?(S=k.jsx("div",{className:D,children:M}),b[32]=D,b[33]=M,b[34]=S):S=b[34];b[35]!==U||b[36]!==S?(D=k.jsx("div",{className:U,children:S}),b[35]=U,b[36]=S,b[37]=D):D=b[37];M=I&&q.selectedTextColor;b[38]!==M?(U=(h||(h=c("stylex")))([q.emojiNum,M]),b[38]=M,b[39]=U):U=b[39];S="multi-react-emoji-num-"+e[0];M=H*d("MWMultiReactConstants").SPACING_PER_COUNT_CHARACTER;b[40]!==M?(H={minWidth:M},b[40]=M,b[41]=H):H=b[41];b[42]!==K?(M=c("intlSummarizeNumber")(K),b[42]=K,b[43]=M):M=b[43];var V;b[44]!==U||b[45]!==S||b[46]!==H||b[47]!==M?(V=k.jsx("div",{className:U,"data-testid":void 0,role:"none",style:H,children:M}),b[44]=U,b[45]=S,b[46]=H,b[47]=M,b[48]=V):V=b[48];b[49]!==T||b[50]!==D||b[51]!==V?(U=k.jsxs("div",{className:T,children:[D,V]}),b[49]=T,b[50]=D,b[51]=V,b[52]=U):U=b[52];b[53]!==g||b[54]!==P||b[55]!==U?(S=k.jsx(c("MWXPressable.react"),{disabled:g,onPress:P,overlayRadius:"inherit",ref:E,xstyle:q.emojiRowContainer,children:U}),b[53]=g,b[54]=P,b[55]=U,b[56]=S):S=b[56];b[57]!==g||b[58]!==F||b[59]!==G||b[60]!==A||b[61]!==v||b[62]!==x.reactionFbid||b[63]!==e||b[64]!==f||b[65]!==r||b[66]!==a||b[67]!==i||b[68]!==B?(H=!g&&F&&k.jsx(B,{children:k.jsx(c("BaseContextualLayer.react"),{align:"middle",contextRef:E,position:"above",ref:i,children:k.jsx("div",{style:c("gkx")("23219")?null:p,children:k.jsx(c("MWXPopover.react"),{withArrow:c("gkx")("23219"),children:k.jsx("div",{className:(h||(h=c("stylex")))(A,q.tooltipContainer,c("gkx")("23219")?null:q.tootltipBackgroundComet,G&&q.tooltipContainerVisible),role:"tooltip",children:k.jsx(c("MWXText.react"),{color:"primary",type:"body4",children:k.jsx(c("MWChatMultiReactionsTooltip.react"),{isProcessingReactions:f,messageId:r.messageId,onTooltipCTAPress:function(){return v(x.reactionFbid,e.join(""))},reactionFbid:x.reactionFbid,threadKey:a})})})})})})}),b[57]=g,b[58]=F,b[59]=G,b[60]=A,b[61]=v,b[62]=x.reactionFbid,b[63]=e,b[64]=f,b[65]=r,b[66]=a,b[67]=i,b[68]=B,b[69]=H):H=b[69];b[70]!==C||b[71]!==s||b[72]!==t||b[73]!==u||b[74]!==S||b[75]!==H?(M=k.jsxs("div",{className:C,onFocus:s,onMouseEnter:t,onMouseLeave:u,children:[S,H]}),b[70]=C,b[71]=s,b[72]=t,b[73]=u,b[74]=S,b[75]=H,b[76]=M):M=b[76];return M}g["default"]=a}),98);
__d("useEmojiReactionDynamicStyleXTransition",["differenceSets","mapMapToArray","mapSet","nullthrows","react","setImmediate","sortBy","useForceUpdate","useIsMountedRef","useStable"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");var i=b.useCallback,j=b.useEffect,k=b.useLayoutEffect,l=b.useRef,m=b.c,n={animationBase:{opacity:"xg01cxk",transitionDuration:"xbb3pvg",transitionProperty:"xeq7tfg",width:"xnalus7",$$css:!0},animationEnter:{animationDuration:"xllfotl",animationName:"x127lhb5",opacity:"x1hc1fzr",$$css:!0},animationEnterWidth1:{width:"x1ygkb0v",$$css:!0},animationEnterWidth2:{width:"x1247r65",$$css:!0},animationEnterWidth3:{width:"xdc2ju1",$$css:!0},animationEnterWidth4:{width:"xgbm1jk",$$css:!0},animationEnterWidth5:{width:"x1rdo73f",$$css:!0},animationEnterWidth6:{width:"x13oubkp",$$css:!0},animationLeave:{animationDuration:"x773k2o",animationName:"xvma63k",opacity:"xg01cxk",width:"xnalus7",$$css:!0}};function o(a){switch(a){case 1:return n.animationEnterWidth1;case 2:return n.animationEnterWidth2;case 3:return n.animationEnterWidth3;case 4:return n.animationEnterWidth4;case 5:return n.animationEnterWidth5;case 6:return n.animationEnterWidth6;default:return null}}function p(){var a=l(new Map());function b(){return a.current}j(function(){return function(){return Array.from(b().values()).forEach(window.clearTimeout)}},[]);return b()}function q(){var a=m(3),b=c("useForceUpdate")(),d=c("useIsMountedRef")(),e;a[0]!==d.current||a[1]!==b?(e=function(){return function(){d.current&&b()}},a[0]=d.current,a[1]=b,a[2]=e):e=a[2];return c("useStable")(e)}function a(a,b,d,e){var f=q(),g=p(),h=c("useStable")(function(){return new Map()}),j=l(!0),m=d.duration,r=m===void 0?100:m,s=d.durationIn,t=d.durationOut,u=d.onEnter,v=d.onEnterComplete,w=d.onLeave,x=d.onLeaveComplete,y=i(function(a,b,c){return{item:b,key:a,order:c,style:{transitionDuration:((a=s)!=null?a:r)+"ms"},xstyle:[n.animationBase,j.current&&n.animationEnter,j.current&&o((c=b==null?void 0:b.reactionCountCharactersNum)!=null?c:0)]}},[s,r]),z=new Map(a.map(function(a,c){return[b(a),{item:a,order:c}]})),A=c("differenceSets")(new Set(z.keys()),new Set(h.keys())),B=c("differenceSets")(new Set(h.keys()),new Set(z.keys())),C=new Map();m=Array.from(c("mapSet")(B,function(a){a=c("nullthrows")(h.get(a));a=a.order;return a})).sort(function(a,b){return a-b});m.forEach(function(b,c){b=b-c;while(b<a.length){c=(c=C.get(b))!=null?c:0;C.set(b,c+1);b+=1}});d=c("sortBy")([].concat(c("mapMapToArray")(h,function(a){var b=a.key;b=z.get(b);if(b){return babelHelpers["extends"]({},a,{item:b.item,order:b.order+((b=C.get(b.order))!=null?b:0)})}return a}),Array.from(c("mapSet")(A,function(a){var b=c("nullthrows")(z.get(a)),d=b.item;b=b.order;return y(a,d,b)}))),function(a){return a.order});k(function(){if(e===!0)return;a.forEach(function(a,d){var e,i=b(a),j=(e=h.get(i))!=null?e:y(i,a,d);A.has(i)&&window.requestAnimationFrame(function(){var b;j.xstyle=[n.animationBase,n.animationEnter,o((b=a==null?void 0:a.reactionCountCharactersNum)!=null?b:0)];window.clearTimeout(g.get(i));g.set(i,window.setTimeout(function(){v&&v(a)},(b=s)!=null?b:r));c("setImmediate")(function(){var b;j.xstyle=[n.animationBase,n.animationEnter,o((b=a==null?void 0:a.reactionCountCharactersNum)!=null?b:0)];u&&u(a);f()})});j.item=a;j.order=d+((e=C.get(d))!=null?e:0);h.set(i,j)});Array.from(B.values()).forEach(function(a){var b=h.get(a);if(b==null)return;var d=b.item;if(b.status!=="leaving"){var e;b.status="leaving";b.style={transitionDuration:((e=t)!=null?e:r)+"ms"};window.requestAnimationFrame(function(){var e;b.xstyle=[n.animationBase,n.animationLeave];window.clearTimeout(g.get(a));g.set(a,window.setTimeout(function(){h["delete"](a),x&&x(d),f()},(e=t)!=null?e:r));c("setImmediate")(function(){w&&w(d),f()})})}});j.current=!1});return d}g["default"]=a}),98);
__d("useSendReactionCallbackQueue",["react"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");var i=b.useRef,j=b.useState,k=b.c,l=1e3,m=1500;function a(){var a=k(4),b;a[0]===Symbol["for"]("react.memo_cache_sentinel")?(b=new Map(),a[0]=b):b=a[0];var c=i(b),d=i(null);b=j(!1);var e=b[0],f=b[1];if(a[1]===Symbol["for"]("react.memo_cache_sentinel")){b=function(a,b){f(!0),window.clearTimeout(d.current),c.current.set(a,b),d.current=window.setTimeout(function(){g()},m)};var g=function a(){if(c.current.size>0){f(!0);var b=Array.from(c.current.entries())[0],e=b[0];b=b[1];b();c.current["delete"](e);d.current=window.setTimeout(function(){a()},m)}else h()},h=function(){window.setTimeout(function(){d.current=null,f(!1)},l)};a[1]=b}else b=a[1];a[2]!==e?(b=[b,e],a[2]=e,a[3]=b):b=a[3];return b}g["default"]=a}),98);
__d("MWMessageReactionsList.react",["I64","LSAuthorityLevel","LSIntEnum","MWMessageReaction.react","MWMultiReactConstants","intlSummarizeNumber","react","stylex","useEmojiReactionDynamicStyleXTransition","useSendReactionCallbackQueue"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l=i||(i=d("react"));b=i;var m=b.useRef,n=b.c;function a(a){var b=n(43),e=a.emojis,f=a.hideTooltip,g=a.isMultiReactExpanded,h=a.isReactionReadOnly,i=a.message,r=a.onTooltipCTAPress,s=a.previousReactionItems,t=a.reactionItemsShown,u=a.reactionsV2,v=a.sendReactionThrottled,w=a.setIsReactionsRowAnimationInProgress,x=a.setShouldAnimate,y=a.shouldAnimate,z=a.showTooltip,A=a.threadKey,B=a.tooltipIndex,C=t.length,D=m(C);a=c("useSendReactionCallbackQueue")();var E=a[0],F=a[1];b[0]!==C||b[1]!==w||b[2]!==g||b[3]!==x?(a=function(){D.current=C,w(!1),g&&x(!1)},b[0]=C,b[1]=w,b[2]=g,b[3]=x,b[4]=a):a=b[4];a=a;var G;b[5]!==C||b[6]!==w?(G=function(){D.current=C,w(!1)},b[5]=C,b[6]=w,b[7]=G):G=b[7];G=G;var H;b[8]===Symbol["for"]("react.memo_cache_sentinel")?(H=[],b[8]=H):H=b[8];H=H;if(u!=null){if(b[9]!==e||b[10]!==F||b[11]!==h||b[12]!==B||b[13]!==i||b[14]!==z||b[15]!==f||b[16]!==r||b[17]!==E||b[18]!==v||b[19]!==s||b[20]!==A||b[21]!==t){b[23]!==e||b[24]!==F||b[25]!==h||b[26]!==B||b[27]!==i||b[28]!==z||b[29]!==f||b[30]!==r||b[31]!==E||b[32]!==v||b[33]!==s||b[34]!==A?(u=function(a,b){var g=a.emoji;a=a.reaction;return e[b]==null?null:{element:l.jsx(c("MWMessageReaction.react"),{emoji:g,isProcessingReactions:F,isReadOnly:h,isTooltipShown:B===b,message:i,onFocus:function(){return z(b)},onMouseEnter:function(){return z(b)},onMouseLeave:f,onTooltipCTAPress:r,queueSendReactionCallback:E,reaction:a,sendReaction:v,shouldAnimate:(s==null?void 0:s.find(function(a){return a.emoji.join("")===g.join("")}))==null&&(j||(j=d("I64"))).equal(a.authorityLevel,(k||(k=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").OPTIMISTIC)),threadKey:A},g),key:e.toString()+b,reactionCountCharactersNum:c("intlSummarizeNumber")((j||(j=d("I64"))).to_int32(a.count)).length}},b[23]=e,b[24]=F,b[25]=h,b[26]=B,b[27]=i,b[28]=z,b[29]=f,b[30]=r,b[31]=E,b[32]=v,b[33]=s,b[34]=A,b[35]=u):u=b[35];u=t.map(u);b[9]=e;b[10]=F;b[11]=h;b[12]=B;b[13]=i;b[14]=z;b[15]=f;b[16]=r;b[17]=E;b[18]=v;b[19]=s;b[20]=A;b[21]=t;b[22]=u}else u=b[22];H=u}b[36]!==a||b[37]!==G?(t={duration:d("MWMultiReactConstants").REACTIONS_ROW_EXPAND_COLLAPSE_ANIMATION_TOTAL_DURATION,onEnterComplete:a,onLeaveComplete:G},b[36]=a,b[37]=G,b[38]=t):t=b[38];u=c("useEmojiReactionDynamicStyleXTransition")(H,q,t);b[39]!==y||b[40]!==u||b[41]!==H?(a=y?u.map(p):H.map(o),b[39]=y,b[40]=u,b[41]=H,b[42]=a):a=b[42];return a}function o(a){return a==null?void 0:a.element}function p(a){return l.jsx("div",{className:(h||(h=c("stylex")))([a==null?void 0:a.xstyle]),style:babelHelpers["extends"]({},a.style),children:a.item&&a.item.element},a.key)}p.displayName=p.name+" [from "+f.id+"]";function q(a){return a!=null?a.key:0}g["default"]=a}),98);
__d("useGetMultiReactOrderedItems",["I64","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i;b=h||d("react");var j=b.useMemo,k=b.useRef;function l(a,b){var c={};a.forEach(function(a){c[a]=!0});var d=a;b.forEach(function(a){a=a.emoji.join("");if(c[a])return;d.push(a)});return d}function m(a,b){b=((b=b)!=null?b:[]).filter(function(a){return(i||(i=d("I64"))).gt(a.count,i.zero)});return b.map(function(b,c){return{emoji:a[c],reaction:b}}).filter(function(a){return a.emoji!=null})}function a(a,b){var c=k(!0),e=k([]),f=j(function(){return m(a,b)},[a,b]),g=j(function(){var a={};f.forEach(function(b){a[b.emoji.join("")]=b});return a},[f]);return j(function(){if(c.current)c.current=!1,e.current=f.sort(function(a,b){return(i||(i=d("I64"))).compare(b.reaction.count,a.reaction.count)}).map(function(a){return a.emoji.join("")});else{var a=e.current.filter(function(a){a=g[a];return a==null?!1:(i||(i=d("I64"))).to_int32(a.reaction.count)>0});e.current=l(a,f)}return e.current.map(function(a){return g[a]}).filter(Boolean)},[g,f])}g["default"]=a}),98);
__d("MWMessageReactionsContainerV2.react",["LSMessagingThreadTypeUtil","MAWPSendOrRemoveReaction.react","MWAddReactionButton.react","MWExpandReactionsButton.react","MWLSThread","MWMessageReactionsList.react","MWMultiReactConstants","ReQL","ReQLSuspense","emptyFunction","justknobx","react","stylex","unrecoverableViolation","useGetMultiReactOrderedItems","useIsMultiReactionEnabled","useIsReactionsV2Enabled","useOnOutsideClick","usePrevious","useReStore","useThrottled"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=j||(j=d("react"));b=j;b.useCallback;var l=b.useRef,m=b.useState,n=b.c,o={wrapper:{alignItems:"x1cy8zhl",display:"x78zum5",flexDirection:"x1q0g3np",flexWrap:"x1a02dak",marginTop:"x1gslohp",$$css:!0},wrapperOutgoing:{alignItems:"xuk3077",justifyContent:"x13a6bvl",$$css:!0}};function a(a){var b=n(83),e=a.emojis,g=a.isMultiReactRowExpanded,j=a.message,p=a.onOpenDialog,q=a.outgoing,r=a.reactionsV2,s=a.toggleMultiReactionRowExpansion;a=m(-1);var t=a[0],u=a[1];b[0]===Symbol["for"]("react.memo_cache_sentinel")?(a=c("justknobx")._("2078"),b[0]=a):a=b[0];var v=a;b[1]===Symbol["for"]("react.memo_cache_sentinel")?(a={isReactionsRowAnimationInProgress:!1,shouldAnimate:v},b[1]=a):a=b[1];a=m(a);var w=a[0],x=a[1];b[2]===Symbol["for"]("react.memo_cache_sentinel")?(a=function(a){v&&x(function(b){return babelHelpers["extends"]({},b,{isReactionsRowAnimationInProgress:a})})},b[2]=a):a=b[2];var y=a;b[3]===Symbol["for"]("react.memo_cache_sentinel")?(a=function(a){v&&x(function(b){return babelHelpers["extends"]({},b,{shouldAnimate:a})})},b[3]=a):a=b[3];var z=a;a=m(!1);var A=a[0],B=a[1];a=j.threadKey;var C=(h||(h=c("useReStore")))(),D=d("MWLSThread").useThread(a),E;b[4]!==D||b[5]!==C?(E=function(){return(D==null?void 0:D.parentThreadKey)?d("ReQL").fromTableAscending(C.tables.community_folders).getKeyRange(D==null?void 0:D.parentThreadKey):d("ReQL").empty()},b[4]=D,b[5]=C,b[6]=E):E=b[6];var F=D==null?void 0:D.parentThreadKey,G;b[7]!==C||b[8]!==F?(G=[C,F],b[7]=C,b[8]=F,b[9]=G):G=b[9];F=d("ReQLSuspense").useFirst(E,G,f.id+":99");if(b[10]!==D){G=(E=D)!=null?E:{};b[10]=D;b[11]=G}else G=b[11];E=G;G=E.threadType;if(G==null)throw c("unrecoverableViolation")("thread cannot be null when reacting to message","messenger_web_messaging");b[12]!==G?(E=d("LSMessagingThreadTypeUtil").isArmadilloSecure(G),b[12]=G,b[13]=E):E=b[13];E=E;var H;b[14]!==G?(H=d("LSMessagingThreadTypeUtil").isDiscoverableChannel(G),b[14]=G,b[15]=H):H=b[15];H=H;var I;b[16]!==g||b[17]!==A||b[18]!==s?(I=g?function(){A||(z(!0),s&&s(),y(!0))}:null,b[16]=g,b[17]=A,b[18]=s,b[19]=I):I=b[19];I=c("useOnOutsideClick")(I);var J=d("useIsMultiReactionEnabled").useIsMultiReactEnabled(a),K=d("MAWPSendOrRemoveReaction.react").useSendOrRemoveReaction(j,E,"instant_react"),L;b[20]!==K||b[21]!==j.messageId?(L=function(a,b){return K(j.messageId,a,b?"remove_reaction":"reaction")},b[20]=K,b[21]=j.messageId,b[22]=L):L=b[22];var M=L;b[23]!==M?(L=function(a,b){M(a,b)},b[23]=M,b[24]=L):L=b[24];L=c("useThrottled")(L,750);var N=l(null),O;b[25]!==t?(O=function(a){if(t===a)return;B(!0);N.current!=null&&window.clearTimeout(N.current);u(-1);N.current=window.setTimeout(function(){u(a)},1500)},b[25]=t,b[26]=O):O=b[26];O=O;var P;b[27]===Symbol["for"]("react.memo_cache_sentinel")?(P=function(){B(!1),N.current!=null&&window.clearTimeout(N.current),N.current=window.setTimeout(function(){return u(-1)},300)},b[27]=P):P=b[27];var Q=P;b[28]!==p?(P=function(a,b){p({reactionFbid:a,reactionType:b}),Q()},b[28]=p,b[29]=P):P=b[29];P=P;var R=c("useGetMultiReactOrderedItems")(e,r);J=J?H===!0?d("MWMultiReactConstants").PUBLIC_CHANNELS_MAX_REACTIONS_EMOJIS_PREVIEWED_WHEN_COLLAPSED:d("MWMultiReactConstants").CM_MAX_REACTION_EMOJIS_ALLOWED:d("MWMultiReactConstants").DEFAULT_MAX_REACTION_PREVIEWED_ALLOWED;var S;b[30]!==g||b[31]!==R||b[32]!==J?(S=g?R:R.slice(0,J),b[30]=g,b[31]=R,b[32]=J,b[33]=S):S=b[33];S=S;var T;b[34]!==g||b[35]!==R||b[36]!==J?(T=g?[]:R.slice(J),b[34]=g,b[35]=R,b[36]=J,b[37]=T):T=b[37];J=T;var U=J.length;T=R.length||0;J=c("usePrevious")(R);if(T<1)return null;b[38]!==D||b[39]!==(F==null?void 0:F.communityType)?(R=D==null?!1:d("useIsReactionsV2Enabled").isReactionsV2ReadOnly(D,F==null?void 0:F.communityType),b[38]=D,b[39]=F==null?void 0:F.communityType,b[40]=R):R=b[40];F=R;R=!q&&w.isReactionsRowAnimationInProgress;H=!F&&T>0&&(H||T<d("MWMultiReactConstants").CM_MAX_REACTION_EMOJIS_ALLOWED)&&!R;T=U>0&&!R;R=q?o.wrapperOutgoing:!1;b[41]!==R?(q=(i||(i=c("stylex")))(o.wrapper,R),b[41]=R,b[42]=q):q=b[42];b[43]!==e||b[44]!==g||b[45]!==F||b[46]!==j||b[47]!==P||b[48]!==J||b[49]!==S||b[50]!==r||b[51]!==L||b[52]!==w.shouldAnimate||b[53]!==O||b[54]!==a||b[55]!==t?(R=k.jsx(c("MWMessageReactionsList.react"),{emojis:e,hideTooltip:Q,isMultiReactExpanded:g,isReactionReadOnly:F,message:j,onTooltipCTAPress:P,previousReactionItems:J,reactionItemsShown:S,reactionsV2:r,sendReactionThrottled:L,setIsReactionsRowAnimationInProgress:y,setShouldAnimate:z,shouldAnimate:w.shouldAnimate,showTooltip:O,threadKey:a,tooltipIndex:t}),b[43]=e,b[44]=g,b[45]=F,b[46]=j,b[47]=P,b[48]=J,b[49]=S,b[50]=r,b[51]=L,b[52]=w.shouldAnimate,b[53]=O,b[54]=a,b[55]=t,b[56]=R):R=b[56];if(b[57]!==T||b[58]!==U||b[59]!==s||b[60]!==g||b[61]!==F||b[62]!==E||b[63]!==j||b[64]!==M||b[65]!==a||b[66]!==G){J=T?k.jsx(c("MWExpandReactionsButton.react"),{isMultiReactExpanded:g,isReactionReadOnly:F,isSecure:E,message:j,numOverflowEmojis:(e=U)!=null?e:0,sendReaction:M,setIsReactionsRowAnimationInProgress:y,threadKey:a,threadType:G,toggleMultiReactExpanded:(P=s)!=null?P:c("emptyFunction")}):null;b[57]=T;b[58]=U;b[59]=s;b[60]=g;b[61]=F;b[62]=E;b[63]=j;b[64]=M;b[65]=a;b[66]=G;b[67]=J}else J=b[67];b[68]!==H||b[69]!==U||b[70]!==s||b[71]!==M||b[72]!==E||b[73]!==j||b[74]!==a||b[75]!==G?(S=H?k.jsx(c("MWAddReactionButton.react"),{isSecure:E,message:j,sendReaction:function(a,b){U>0&&(s==null?void 0:s()),window.setTimeout(function(){M(a,b)},U*10)},setShouldRowStayExpanded:B,threadKey:a,threadType:G}):null,b[68]=H,b[69]=U,b[70]=s,b[71]=M,b[72]=E,b[73]=j,b[74]=a,b[75]=G,b[76]=S):S=b[76];b[77]!==q||b[78]!==I||b[79]!==R||b[80]!==J||b[81]!==S?(r=k.jsxs("div",{className:q,"data-testid":void 0,ref:I,children:[R,J,S]}),b[77]=q,b[78]=I,b[79]=R,b[80]=J,b[81]=S,b[82]=r):r=b[82];return r}g["default"]=a}),98);
__d("MWMessageSeenCountTooltip.react",["fbt","I64","Int64Hooks","LSMessagingThreadTypeUtil","MWClickedMessageContext.react","MWLSThread","MWLogBroadcastChannelFalcoEvent","MWMessageDeliveryStatus","MWMessageUnsentTimestampText.react","MWXTooltip.react","ReQL","ReQLSuspense","getMessengerPreciseTimestamp","gkx","justknobx","react","useReStore","useSinglePartialViewImpression"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l=k||(k=d("react"));b=k;var m=b.useMemo,n=b.c,o=c("gkx")("23219")?3:11;function p(a){var b,e=(i||(i=c("useReStore")))(),g=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableAscending(e.tables.community_chat_message_seen_count).getKeyRange(a.threadKey,a.messageId)},[e,a.threadKey,a.messageId],f.id+":46"),k=(b=d("MWLSThread").useThread(a.threadKey,function(a){return d("LSMessagingThreadTypeUtil").isDiscoverablePublicBroadcastChannel(a.threadType)}))!=null?b:!1,n=g?(j||(j=d("I64"))).to_int32(g.seenCount):null;b=d("Int64Hooks").useCallbackInt64(function(){if(!k)return;d("MWLogBroadcastChannelFalcoEvent").logBroadcastChannelFalcoEvent({action:2,event:16,parentSurface:o,source:15,surface:7,threadFbid:a.threadKey})},[k,a.threadKey]);var p=c("useSinglePartialViewImpression")({onImpressionStart:b});return m(function(){var b=a.isUnsent,e=a.timestampMs,f=a.unsentTimestampMs;if(f!=null&&b)return[l.jsx(c("MWMessageUnsentTimestampText.react"),{timestampMs:a.timestampMs,unsentTimestampMs:f},"first"),h._("__JHASH__8eZEd_EeDsx__JHASH__")];b=n!=null?d("MWMessageDeliveryStatus").getSeenCount(n):d("MWMessageDeliveryStatus").Titles.loading;return[l.jsxs("div",{children:[l.jsx("div",{children:h._("__JHASH__GNnexJRNZQN__JHASH__",[h._param("time",c("getMessengerPreciseTimestamp")((j||(j=d("I64"))).to_float(e)))])}),(!c("justknobx")._("2943")||n!==0)&&l.jsx("div",{ref:p,children:b})]},"first"),b]},[a,p,n])}function a(a){var b=n(8),d=a.children,e=a.message;a=c("MWClickedMessageContext.react").useHook();var f=a.fetchMessageSeenCount;a=p(e);var g=a[0];a=a[1];var h;b[0]!==f||b[1]!==e?(h=function(a){a&&f(e.threadKey,e.messageId)},b[0]=f,b[1]=e,b[2]=h):h=b[2];var i;b[3]!==a||b[4]!==h||b[5]!==g||b[6]!==d?(i=l.jsx(c("MWXTooltip.react"),{align:"middle",label:a,onVisibilityChange:h,position:"start",tooltip:g,children:d}),b[3]=a,b[4]=h,b[5]=g,b[6]=d,b[7]=i):i=b[7];return i}g["default"]=a}),226);
__d("useMAWBulkMediaDownloadManualRetry",["MAWDbMedia","MAWDownloadMediaInWorkerDeferred","MAWRetryReceiverFetchSticker","MAWStateContext.react","WAHashUtils","isReceiverFetchSticker","react","react-forget-runtime","useAsyncReStore"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");b.useCallback;b.useContext;var i=b.c;function a(a,b){var e=i(7),f=c("useAsyncReStore")(),g=d("react-forget-runtime").useContextWithBailoutExperiment__unstable(d("MAWStateContext.react").MAWStateContext,l),h=g.dispatch,m=d("MAWStateContext.react").useMAWSelector(k),n=d("MAWStateContext.react").useMAWSelector(j);e[0]!==a||e[1]!==b||e[2]!==m||e[3]!==n||e[4]!==f||e[5]!==h?(g=function(){a.forEach(function(a){var e=c("isReceiverFetchSticker")(a);if(e){b==null?void 0:b.start({isManualRetry:!0,manualRetryCount:(e=m[a.messageId])!=null?e:0,previousManualRetryErrorDetails:(e=n[a.messageId])==null?void 0:e.mainMediaStatusDetails});d("MAWRetryReceiverFetchSticker").retryReceiverFetchSticker(f,a,h,b);return}e=a.attachmentFbid;var g=isNaN(e);g=g?d("WAHashUtils").stringToPlaintextHash(e):d("MAWDbMedia").convertNumberToMediaId(parseInt(e,10));b==null?void 0:b.start({isManualRetry:!0,manualRetryCount:(e=m[g.toString()])!=null?e:0,previousManualRetryErrorDetails:(e=n[g.toString()])==null?void 0:e.mainMediaStatusDetails});h({tag:"SetMediaDownloadStatusState",value:{key:g,newMediaDownloadState:null}});h({tag:"IncreaseMediaDownloadRetryCount",value:{key:g}});d("MAWDownloadMediaInWorkerDeferred").downloadMediaInWorker({attachment:a,dispatch:h,mediaRenderQpl:b,triggerUIView:"manual-retry-thread"})})},e[0]=a,e[1]=b,e[2]=m,e[3]=n,e[4]=f,e[5]=h,e[6]=g):g=e[6];return g}function j(a){return a.mediaDownloadStatus}function k(a){return a.mediaDownloadRetryCount}function l(a){return[a.dispatch]}g["default"]=a}),98);
__d("MWMustacheMediaGroupAttachments.react",["fbt","BaseMiddot.react","MWPMessageListColumn.react","MWXLink.react","MWXText.react","react","stylex","useMAWBulkMediaDownloadManualRetry"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=(j||(j=d("react"))).c,l=j,m={incoming:{paddingStart:"x1ye3gou",$$css:!0},outgoing:{alignSelf:"xpvyfi4",paddingEnd:"xn6708d",$$css:!0},row:{paddingBottom:"xwib8y2",paddingTop:"x1iorvi4",$$css:!0}};function a(a){var b=k(14),e=a.mediaGroupInfo,f=a.mediaRenderQpl;a=a.outgoing;f=c("useMAWBulkMediaDownloadManualRetry")(e.attachmentsToRetryDownload,f);a=a?m.outgoing:m.incoming;var g;b[0]!==a?(g=(i||(i=c("stylex")))(m.row,a),b[0]=a,b[1]=g):g=b[1];b[2]!==e.mediaDownloadErrorsCount||b[3]!==e.groupSize?(a=h._("__JHASH__xlczHN0K-Kb__JHASH__",[h._param("errorQuantity",e.mediaDownloadErrorsCount),h._param("totalQuantity",e.groupSize)]),b[2]=e.mediaDownloadErrorsCount,b[3]=e.groupSize,b[4]=a):a=b[4];var j;b[5]!==e.attachmentsToRetryDownload.length||b[6]!==f?(j=e.attachmentsToRetryDownload.length>0&&l.jsxs(l.Fragment,{children:[l.jsx(c("BaseMiddot.react"),{}),l.jsx(c("MWXLink.react"),{onClick:f,weight_DEPRECATED:"medium",children:h._("__JHASH__BGxC_0TtXwE__JHASH__")})]}),b[5]=e.attachmentsToRetryDownload.length,b[6]=f,b[7]=j):j=b[7];b[8]!==a||b[9]!==j?(e=l.jsxs(c("MWXText.react"),{color:"negative",type:"meta4",children:[a,j]}),b[8]=a,b[9]=j,b[10]=e):e=b[10];b[11]!==g||b[12]!==e?(f=l.jsx(d("MWPMessageListColumn.react").MWPMessageListColumnWithGutters,{shrinkwrap:!0,children:l.jsx("div",{className:g,children:e})}),b[11]=g,b[12]=e,b[13]=f):f=b[13];return f}g["default"]=a}),226);
__d("useMAWMediaDownloadManualRetry",["react","useMAWBulkMediaDownloadManualRetry"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");b.useMemo;var i=b.c;function a(a,b){var d=i(2),e;d[0]!==a?(e=[a],d[0]=a,d[1]=e):e=d[1];a=e;d=a;return c("useMAWBulkMediaDownloadManualRetry")(d,b)}g["default"]=a}),98);
__d("MWMustacheTextAttachmentError.react",["fbt","BaseMiddot.react","MAWMediaDownloadStatusUIStateType","MAWVideoAudioPlaybackErrorHandlerUtils","MWPMessageListColumn.react","MWXLink.react","MWXText.react","react","stylex","useMAWMediaDownloadManualRetry"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=(j||(j=d("react"))).c,l=j,m={incoming:{alignSelf:"xqcrz7y",paddingStart:"x1ye3gou",$$css:!0},outgoing:{alignSelf:"xpvyfi4",$$css:!0},row:{paddingBottom:"xwib8y2",paddingTop:"x1iorvi4",$$css:!0}};function a(a){var b=k(18),e=a.attachment,f=a.downloadStatusUIState,g=a.mediaRenderQpl,j=a.outgoing;a=a.validationResult;e=c("useMAWMediaDownloadManualRetry")(e,g);if(b[0]!==a){g=(g=a)!=null?g:{};b[0]=a;b[1]=g}else g=b[1];a=g;g=a.mimeType;b[2]!==g?(a=g==="invalid-mp4"&&d("MAWVideoAudioPlaybackErrorHandlerUtils").isPlaybackErrorFallbackEnabled(),b[2]=g,b[3]=a):a=b[3];g=a;b[4]!==g?(a=g?h._("__JHASH__9pTPm1txftc__JHASH__"):h._("__JHASH__jCbL2nmLvOs__JHASH__"),b[4]=g,b[5]=a):a=b[5];a=a;j=j?m.outgoing:m.incoming;var n;b[6]!==j?(n=(i||(i=c("stylex")))(m.row,j),b[6]=j,b[7]=n):n=b[7];b[8]!==f||b[9]!==g||b[10]!==e?(j=d("MAWMediaDownloadStatusUIStateType").isRetryableErrorState(f)&&!g&&l.jsxs(l.Fragment,{children:[l.jsx(c("BaseMiddot.react"),{}),l.jsx(c("MWXLink.react"),{onClick:e,weight_DEPRECATED:"medium",children:h._("__JHASH__BGxC_0TtXwE__JHASH__")})]}),b[8]=f,b[9]=g,b[10]=e,b[11]=j):j=b[11];b[12]!==a||b[13]!==j?(f=l.jsxs(c("MWXText.react"),{color:"negative",type:"meta4",children:[a,j]}),b[12]=a,b[13]=j,b[14]=f):f=b[14];b[15]!==n||b[16]!==f?(g=l.jsx(d("MWPMessageListColumn.react").MWPMessageListColumnWithGutters,{shrinkwrap:!0,children:l.jsx("div",{className:n,children:f})}),b[15]=n,b[16]=f,b[17]=g):g=b[17];return g}g["default"]=a}),226);
__d("MWPConcatenateMessageListsDataSource",["ReplayLastSubject","relay-runtime","switchMap"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a){var b=a.count,e=a.first,f=a.getSecond;this.$1=c("switchMap")(e,function(a){var c=a.data.length;if(c>=b||a.hasMore||a.isLoadingMore)return new(d("ReplayLastSubject").ReplayLastSubject)(babelHelpers["extends"]({},a,{hasMore:!0}));c=d("relay-runtime").Observable.from(f(b-c));return c.map(function(b){return{data:[].concat(a.data,b.data),hasMore:a.hasMore||b.hasMore,isLoadingMore:a.isLoadingMore||b.isLoadingMore}})})}var b=a.prototype;b.subscribe=function(a){return this.$1.subscribe(a)};return a}();g["default"]=a}),98);
__d("MWPEditMessageHistoryListText.react",["MWChatTextTransform","MWUnvaultedText","MWXMessageTextWithEntities.react","MWXText.react","react","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=(i||(i=d("react"))).c,k=i,l={incoming:{color:"x18lvrbx",$$css:!0},outgoing:{color:"xyk4ms5",$$css:!0},regular:{marginTop:"x1gslohp",marginEnd:"x11i5rnm",marginBottom:"x12nagc",marginStart:"x1mh8g0r",textAlign:"x1yc453h",whiteSpace:"x126k92a",$$css:!0}};function a(a){var b=j(19),e=a.isSecureMessage,f=a.maxLength,g=a.maxLines,i=a.seeLessLinkProps,m=a.seeMoreLinkProps,n=a.text,o=a.truncationStyle,p=a.outgoing,q=a.ranges,r=a.renderers,s=a.transforms;a=a.xstyleForText;e=d("MWUnvaultedText").useMWUnvaultedText(e,n);n=p?"white":"primary";p=p?l.outgoing:l.incoming;var t;b[0]!==a||b[1]!==p?(t=(h||(h=c("stylex")))(l.regular,a,p),b[0]=a,b[1]=p,b[2]=t):t=b[2];a=e||"";e=(p=s)!=null?p:d("MWChatTextTransform").textTransforms;b[3]!==f||b[4]!==g||b[5]!==q||b[6]!==r||b[7]!==i||b[8]!==m||b[9]!==a||b[10]!==e||b[11]!==o?(s=k.jsx(c("MWXMessageTextWithEntities.react"),{maxLength:f,maxLines:g,ranges:q,renderers:r,seeLessLinkProps:i,seeMoreLinkProps:m,text:a,transforms:e,truncationStyle:o,truncationThreshold:2,withParagraphs:!0}),b[3]=f,b[4]=g,b[5]=q,b[6]=r,b[7]=i,b[8]=m,b[9]=a,b[10]=e,b[11]=o,b[12]=s):s=b[12];b[13]!==t||b[14]!==s?(p=k.jsx("div",{className:t,dir:"auto",children:s}),b[13]=t,b[14]=s,b[15]=p):p=b[15];b[16]!==n||b[17]!==p?(f=k.jsx(c("MWXText.react"),{color:n,type:"body3",children:p}),b[16]=n,b[17]=p,b[18]=f):f=b[18];return f}g["default"]=a}),98);
__d("MWPEditedMessageHistoryEntry.react",["MWPEditMessageHistoryListText.react","MWXMessageBubble.react","react","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||(i=d("react"));b=i;var k=b.useState,l=b.c,m={border:{boxShadow:"x7h7r2v",$$css:!0},inner:{display:"x78zum5",flexGrow:"x1iyjqo2",flexShrink:"xs83m0k",marginBottom:"xjpr12u",minWidth:"xeuugli",opacity:"xbyyjgo",$$css:!0},makeSpaceForMessageActions:{maxWidth:"x1no2skz",$$css:!0},messageBubbleIncoming:{paddingEnd:"x1k62owy",$$css:!0},messageBubbleOutgoing:{paddingStart:"x6plb61",$$css:!0},outgoing:{flexDirection:"x15zctf7",$$css:!0}};function a(a){var b=l(33),d=a.isReply,e=a.isSecureMessage,f=a.messageHistoryEntry,g=a.outgoing,i=a.renderMessageActions;a=g?"white":void 0;var n;b[0]!==a?(n={color_DEPRECATED:a,weight_DEPRECATED:"semibold"},b[0]=a,b[1]=n):n=b[1];a=n;n=k(!1);var o=n[0],p=n[1];n=g&&m.outgoing;var q;b[2]!==n?(q=(h||(h=c("stylex")))(m.inner,n),b[2]=n,b[3]=q):q=b[3];var r;b[4]!==i?(n=function(){i!=null&&p(!0)},r=function(){i!=null&&p(!1)},b[4]=i,b[5]=n,b[6]=r):(n=b[5],r=b[6]);var s=i?m.makeSpaceForMessageActions:g?m.messageBubbleOutgoing:m.messageBubbleIncoming,t;b[7]!==s?(t=(h||(h=c("stylex")))(s),b[7]=s,b[8]=t):t=b[8];s=g?"right":"left";var u=g?"outgoing":"incoming";d=!g&&d&&m.border;var v;b[9]===Symbol["for"]("react.memo_cache_sentinel")?(v=[],b[9]=v):v=b[9];var w=f.messageContent||"";b[10]!==e||b[11]!==g||b[12]!==a||b[13]!==w?(v=j.jsx(c("MWPEditMessageHistoryListText.react"),{isSecureMessage:e,maxLength:300,maxLines:3,outgoing:g,ranges:v,seeLessLinkProps:a,seeMoreLinkProps:a,text:w,truncationStyle:"see-more-and-less"}),b[10]=e,b[11]=g,b[12]=a,b[13]=w,b[14]=v):v=b[14];b[15]!==s||b[16]!==u||b[17]!==d||b[18]!==v?(e=j.jsx(c("MWXMessageBubble.react"),{align:s,color:u,connectBottom:!1,connectTop:!1,variant:"opaque",xstyle:d,children:v}),b[15]=s,b[16]=u,b[17]=d,b[18]=v,b[19]=e):e=b[19];b[20]!==t||b[21]!==e?(g=j.jsx("div",{className:t,children:e}),b[20]=t,b[21]=e,b[22]=g):g=b[22];b[23]!==i||b[24]!==o||b[25]!==f?(a=i&&o?j.jsx("div",{className:"xc26acl x78zum5",children:i(f)}):null,b[23]=i,b[24]=o,b[25]=f,b[26]=a):a=b[26];b[27]!==q||b[28]!==n||b[29]!==r||b[30]!==g||b[31]!==a?(w=j.jsxs("div",{className:q,"data-testid":void 0,onMouseEnter:n,onMouseLeave:r,role:"none",children:[g,a]}),b[27]=q,b[28]=n,b[29]=r,b[30]=g,b[31]=a,b[32]=w):w=b[32];return w}g.MWPEditedMessageHistoryEntry=a}),98);
__d("useEditMessageHistoryLS",["ReQL","ReQLSuspense","react","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i;b=i||d("react");b.useMemo;var j=b.c;function a(a,b){var e=j(9),g=(h||(h=c("useReStore")))(),i;e[0]!==g.tables.edit_message_history||e[1]!==a?(i=function(){return d("ReQL").fromTableAscending(g.tables.edit_message_history.index("originalMsgPkEditTs")).getKeyRange(a)},e[0]=g.tables.edit_message_history,e[1]=a,e[2]=i):i=e[2];var k;e[3]!==g||e[4]!==a?(k=[g,a],e[3]=g,e[4]=a,e[5]=k):k=e[5];i=d("ReQLSuspense").useArray(i,k,f.id+":29");e[6]!==b||e[7]!==i?(k=b?i.slice(0,-1):i,e[6]=b,e[7]=i,e[8]=k):k=e[8];b=k;return b}g["default"]=a}),98);
__d("MWPEditedMessageHistoryList.react",["I64","MWMessageEditContext.react","MWPEditedMessageHistoryEntry.react","QPLUserFlow","cr:4654","qex","qpl","react","stylex","useEditMessageHistoryLS","useMAWSeparateReadsSelector"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=i||(i=d("react"));e=i;var l=e.useEffect,m=e.c,n={base:{backgroundColor:"x1eb86dx",maxWidth:"x193iq5w",zIndex:"x1vjfegm",$$css:!0},incoming:{display:"x1lliihq",paddingStart:"xd06s5i",$$css:!0},outgoing:{display:"x1lliihq",paddingEnd:"x1sxyh0",$$css:!0}};function a(a){var e=m(26),f=a.editCount,g=a.isReply,i=a.isSecureMessage,p=a.msgId,q=a.outgoing,r=a.renderMessageActions,s=a.threadType;a=a.xstyle;var t=d("MWMessageEditContext.react").useMWMessageEditContext()||{showEdits:!1},u=t.showEdits;t=c("useEditMessageHistoryLS")(p,i);p=b("cr:4654")(p,i);if(e[0]!==i){var v;v=i&&((v=c("qex")._("228"))!=null?v:!1);e[0]=i;e[1]=v}else v=e[1];var w=d("useMAWSeparateReadsSelector").useMAWSeparateReadsArraySelector("EditMessageHistory",p,t,v,o);e[2]!==u||e[3]!==i||e[4]!==s||e[5]!==w||e[6]!==f?(p=function(){u&&(c("QPLUserFlow").addAnnotations(c("qpl")._(1056849214,"1777"),{bool:{isSecureMessage:i},"int":{threadType:(j||(j=d("I64"))).to_int32(s)}}),w!=null&&f!=null&&w.length===(j||(j=d("I64"))).to_int32(f)?c("QPLUserFlow").endSuccess(c("qpl")._(1056849214,"1777")):c("QPLUserFlow").endFailure(c("qpl")._(1056849214,"1777"),"no edits found"))},t=[w,f,u,i,s],e[2]=u,e[3]=i,e[4]=s,e[5]=w,e[6]=f,e[7]=p,e[8]=t):(p=e[7],t=e[8]);l(p,t);v=q?n.outgoing:n.incoming;e[9]!==v||e[10]!==a?(p=(h||(h=c("stylex")))(n.base,v,a),e[9]=v,e[10]=a,e[11]=p):p=e[11];if(e[12]!==g||e[13]!==i||e[14]!==q||e[15]!==r||e[16]!==w){e[18]!==g||e[19]!==i||e[20]!==q||e[21]!==r?(t=function(a,b){return k.jsx(d("MWPEditedMessageHistoryEntry.react").MWPEditedMessageHistoryEntry,{isReply:g,isSecureMessage:i,messageHistoryEntry:a,outgoing:q,renderMessageActions:r},b)},e[18]=g,e[19]=i,e[20]=q,e[21]=r,e[22]=t):t=e[22];v=w.map(t);e[12]=g;e[13]=i;e[14]=q;e[15]=r;e[16]=w;e[17]=v}else v=e[17];e[23]!==p||e[24]!==v?(a=k.jsx("div",{className:p,role:"none",children:v}),e[23]=p,e[24]=v,e[25]=a):a=e[25];t=a;return u?t:null}function o(a,b){return(j||(j=d("I64"))).compare(a.pk,b.pk)}g["default"]=a}),98);
__d("memoizeObservable",["deepEquals","relay-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h={};function a(a,b){b===void 0&&(b=c("deepEquals"));return d("relay-runtime").Observable.create(function(c){var d=h,e=a.subscribe({complete:function(){c.complete()},error:function(a){c.error(a)},next:function(a){b(d,a)||(d=a,c.next(a))}});return function(){e.unsubscribe()}})}g["default"]=a}),98);
__d("MWPMessageListSingleDirectionDataSource",["I64","LSAuthorityLevel","LSIntEnum","LSMessageRenderingType","LSMessagingThreadTypeUtil","MAWJids","MLV2DataSourceLogger","Promise","ReQL","ReQLObservable","ReplayLastSubject","WAJids","combineLatestWith","cr:906","gkx","justknobx","memoizeObservable","promiseDone","relay-runtime","setTimeout","switchMap","useMAWSeparateReadsSelector","useMAWSeparateReadsSelectorCommon"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=b("cr:906")==null?void 0:b("cr:906").MAWMessagesLiveQuery;function l(a){return a.length>0?a[a.length-1]:void 0}var m=2,n=!c("gkx")("7019"),o=c("gkx")("7990");a=function(){function a(a,b,e,f,g,h,k,l,m,n){this.$7=new(d("ReplayLastSubject").ReplayLastSubject)(!1),this.$1=a,this.$2=b,this.$4=e,this.$3=f,this.$5=g,this.$6=h,this.$10=k,this.$11=l!=null&&(i||(i=d("I64"))).equal(l,(j||(j=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").OPTIMISTIC)),this.$9=d("MLV2DataSourceLogger").startMLV2LoggerForThread(this.$4.threadKey,this.$3,this.$5,k),this.$12=m,this.$13=n,this.$8=this.$14()}var e=a.prototype;e.subscribe=function(a){var b;(b=this.$9)==null?void 0:b.markQPLPoint("subscribed");return this.$8.subscribe(a)};e.$15=function(a){var b,d=this;n&&this.$16(!0);(b=this.$9)==null?void 0:b.markQPLPoint("fetch_more_msgs_start");c("promiseDone")(this.$6.extendRange(a,this.$3,this.$12)["finally"](function(){var a;(a=d.$9)==null?void 0:a.markQPLPoint("fetch_more_msgs_end","begin attempting to extend a message range in a given direction");n&&d.$16(!1)}))};e.$16=function(a){var d=this;c("justknobx")._("3066")&&!a?c("promiseDone")(new(h||(h=b("Promise")))(function(a){return c("setTimeout")(a,0)}).then(function(){return d.$7.next(a)})):this.$7.next(a)};e.$17=function(a){var b=this.$4,e=b.messageId;b=b.timestampMs;e=(e==null||e==="")&&(i||(i=d("I64"))).equal(b,(i||(i=d("I64"))).max_int);b=e&&(i||(i=d("I64"))).equal(a.minTimestampMs,(i||(i=d("I64"))).max_int);e=!a.hasMoreBefore||b;e=this.$3==="asc"?{gte:d("ReQL").key(this.$4.timestampMs),lte:d("ReQL").key(a.hasMoreAfter?a.maxTimestampMs:(i||(i=d("I64"))).max_int)}:{gte:d("ReQL").key(e?(i||(i=d("I64"))).min_int:a.minTimestampMs),lte:d("ReQL").key(this.$4.timestampMs)};a=b?m:this.$5;b=q(this.$13,this.$2,this.$4,this.$10,this.$3,e,a);a=(e=p(this.$1,this.$3,this.$4,e,a))!=null?e:d("relay-runtime").Observable.from([]);if(b==null||this.$11&&o)return a;if(d("useMAWSeparateReadsSelectorCommon").isDiffingEnabled())return c("combineLatestWith")(b,a).map(function(a){var b=a[0];a=a[1];a=r(a);return d("useMAWSeparateReadsSelector").mawSeparateReadsMapSelector("MessageList",b,a,!0,["transportKey"])});else return b};e.$18=function(a,b,c){var d,e;b===void 0&&(b=[]);a=a;d=(d=l(b))==null?void 0:d[1];e=this.$3==="asc"?[c==null?void 0:c.maxMessageId,(e=c==null?void 0:c.hasMoreAfter)!=null?e:!1,(e=c==null?void 0:c.isLoadingAfter)!=null?e:!1]:[c==null?void 0:c.minMessageId,(e=c==null?void 0:c.hasMoreBefore)!=null?e:!1,(e=c==null?void 0:c.isLoadingBefore)!=null?e:!1];var f=e[0],g=e[1];e=e[2];d=b.length===this.$5&&(d!=null&&d.messageId!==f||!g);c!=null&&b.length<this.$5&&g&&!d&&!a&&!e&&(a=!0,this.$15(c));return{data:b,hasMore:d||g,isLoadingMore:a||!d&&e}};e.$14=function(){var a=this;return(i||(i=d("I64"))).equal(this.$4.timestampMs,(i||(i=d("I64"))).max_int)&&this.$3==="asc"?d("relay-runtime").Observable.from(new(d("ReplayLastSubject").ReplayLastSubject)({data:[],hasMore:!1,isLoadingMore:!1})):c("memoizeObservable")(c("combineLatestWith")(this.$7,c("switchMap")(this.$6.getOrCreateMessageRangeCoveringCursor(this.$4,this.$9,this.$12),function(b){var c;(c=a.$9)==null?void 0:c.markQPLPoint("emitting_range");(c=a.$9)==null?void 0:c.addQPLAnnotations({string:{range:JSON.stringify(babelHelpers["extends"]({},b,{maxTimestampMs:b.maxTimestampMs==null?null:(i||(i=d("I64"))).to_string(b.maxTimestampMs),minTimestampMs:b.minTimestampMs==null?null:(i||(i=d("I64"))).to_string(b.minTimestampMs)}))}});return a.$17(b).map(function(a){return{messages:a,messagesRange:b}})})).map(function(b){var c=b[0];b=b[1];b=(b=b)!=null?b:{};var d=b.messages;b=b.messagesRange;return a.$18(c,d,b)}))["do"]({error:function(b){var c;(c=a.$9)==null?void 0:c.markQPLFailure(b);a.$9=void 0},next:function(b){var c,d=b.data;b=b.isLoadingMore;(c=a.$9)==null?void 0:c.markQPLPoint("emitting_messages");if(!b){(c=a.$9)==null?void 0:c.addQPLAnnotations({"int":{final_query_count:a.$5,num_fetched:d.length}});(b=a.$9)==null?void 0:b.markQPLSuccess();a.$9=void 0}else{(c=a.$9)==null?void 0:c.markQPLPoint("waiting_for_fetch")}}})};return a}();function p(a,b,e,f,g){b=b==="asc"?d("ReQL").fromTableAscending:d("ReQL").fromTableDescending;b=c("gkx")("5081")?b(a.tables.messages.index("messageDisplayOrder")):b(a.tables.messages);var h=b.getKeyRange(e.threadKey).bounds(f).filter(function(a){var b=a.isCollapsed;a=a.messageRenderingType;return!b&&!(i||(i=d("I64"))).equal(a,(i||(i=d("I64"))).of_int32(c("LSMessageRenderingType").HIDDEN))}).take(g);return d("ReQLObservable").create(a,function(){return h})}function q(a,b,c,e,f,g,h){var j=c.secureThreadJid==null?null:(i||(i=d("I64"))).to_string(c.secureThreadJid);if(b==null||j==null||k==null)return null;e=d("LSMessagingThreadTypeUtil").isGroup(e);e=e?d("WAJids").toGroupJid(j):d("MAWJids").toUserJid(j);return k(a,b,c.threadKey,e,f,g,h)}function r(a){return a.map(function(a){var b=a[0],c=a[1];return b.length===4?[[b[0],b[2]],c]:a})}g["default"]=a}),98);
__d("MWPMessageRangeDataSource",["I64","LSFactory","LSIntEnum","LSIssueMessagesRangeQueryStoredProcedure","LSMailboxMessagesRangeQueryDirection","LSMessagePointQueryStoredProcedure","MLV2DataSourceLogger","Promise","ReQL","ReQLObservable","asyncToGeneratorRuntime","err","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;a=function(a){var e=this;this.$2=function(a){return k(e.$1.tables.messages_ranges_v2__generated,a)};this.getOrCreateMessageRangeCoveringCursor=function(a,b,f){b==null?void 0:b.annotateMessageRangesDataSource("MWPMessageRangeDataSource");b==null?void 0:b.markQPLPoint("msys_message_range_fetch_start");return d("ReQLObservable").create(e.$1,function(){return e.$2(a)}).map(function(f){b==null?void 0:b.markQPLPoint("msys_message_range_fetch_end");f=(f=f[0])==null?void 0:f[1];if(f==null)if(a.messageId==null){var g;return{hasMoreAfter:!(j||(j=d("I64"))).equal(a.timestampMs,j.max_int),hasMoreBefore:!0,isLoadingAfter:!1,isLoadingBefore:!1,maxMessageId:(g=a.messageId)!=null?g:"",maxTimestampMs:a.timestampMs,minMessageId:(g=a.messageId)!=null?g:"",minTimestampMs:a.timestampMs,threadKey:a.threadKey}}else{c("promiseDone")(p(e.$1,a));return{hasMoreAfter:!0,hasMoreBefore:!0,isLoadingAfter:!0,isLoadingBefore:!0,maxMessageId:(g=a.messageId)!=null?g:"",maxTimestampMs:a.timestampMs,minMessageId:(g=a.messageId)!=null?g:"",minTimestampMs:a.timestampMs,threadKey:a.threadKey}}return f})};this.extendRange=function(a,g,i){var k=d("MLV2DataSourceLogger").getMLV2LoggerForThread(a.threadKey,g),o=a.threadKey;if(!n(a,g)){k==null?void 0:k.markQPLPoint("mwp_msg_range_not_extensible","Trying to extend a range that is not extensible");return(h||(h=b("Promise"))).resolve()}return e.$1.runInTransaction(function(){var e=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){var e;k==null?void 0:k.markQPLPoint("fetch_message_ranges_from_table_start","Find a range in the database matching the range we were handed.");e=(e=(yield d("ReQL").firstAsync(d("ReQL").fromTableDescending(b.messages_ranges_v2__generated).getKeyRange(o).bounds({lte:d("ReQL").key(a.minTimestampMs)}).filter(function(b){return(j||(j=d("I64"))).ge(b.maxTimestampMs,a.maxTimestampMs)}))))!=null?e:a;if(!n(e,g)){k==null?void 0:k.markQPLPoint("mwp_msg_range_not_extensible","Trying to extend a range that is not extensible");return}if(!l(e,a,g)){k==null?void 0:k.markQPLPoint("mwp_msg_range_bound_mismatch","The range we are trying to extend has already been extended");return}k==null?void 0:k.markQPLPoint("mwp_fetch_message_ranges_start","Begin fetching message ranges");return c("LSIssueMessagesRangeQueryStoredProcedure")(c("LSFactory")(b),m(e,g))["finally"](function(){k==null?void 0:k.markQPLPoint("mwp_fetch_message_ranges_end","Finish fetching message ranges")})});return function(a){return e.apply(this,arguments)}}(),"readwrite",void 0,void 0,f.id+":131")};this.$1=a};function k(a,b){return d("ReQL").fromTableDescending(a).getKeyRange(b.threadKey).bounds({lte:d("ReQL").key(b.timestampMs)}).filter(function(a){return o(b,a)}).take(1)}function l(a,b,c){if(c==="asc")return(j||(j=d("I64"))).equal(a.minTimestampMs,b.minTimestampMs);else return(j||(j=d("I64"))).equal(a.maxTimestampMs,b.maxTimestampMs)}function m(a,b){var e=a.maxTimestampMs,f=a.minTimestampMs;a=a.threadKey;return b==="asc"?{direction:(i||(i=d("LSIntEnum"))).ofNumber(c("LSMailboxMessagesRangeQueryDirection").AFTER),referenceTimestampMs:e,threadKey:a}:{direction:(i||(i=d("LSIntEnum"))).ofNumber(c("LSMailboxMessagesRangeQueryDirection").BEFORE),referenceTimestampMs:f,threadKey:a}}function n(a,b){return b==="asc"&&a.hasMoreAfter&&!a.isLoadingAfter||b==="desc"&&a.hasMoreBefore&&!a.isLoadingBefore}function o(a,b){a=a.timestampMs;return((j||(j=d("I64"))).equal(a,(j||(j=d("I64"))).max_int)||(j||(j=d("I64"))).ge(b.maxTimestampMs,a))&&(j||(j=d("I64"))).le(b.minTimestampMs,a)}function p(a,b,c){return q.apply(this,arguments)}function q(){q=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e){e===void 0&&(e=20);var g=b.messageId,h=b.threadKey;if(g==null)throw c("err")("Cannot issue a point query without a message ID.");yield a.runInTransaction(function(a){return c("LSMessagePointQueryStoredProcedure")(c("LSFactory")(a),{messageId:g,numContextMessages:(j||(j=d("I64"))).of_float(e),threadKey:h})},"readwrite",void 0,void 0,f.id+":285")});return q.apply(this,arguments)}g.MSYSMessageRangeDataSource=a}),98);
__d("MWPMessageListDataSource",["I64","LSAuthorityLevel","LSIntEnum","LSMessagingThreadTypeUtil","MAWDumbRangeDataSource","MAWEBCombinedRangeDataSource","MWPConcatenateMessageListsDataSource","MWPMessageListSingleDirectionDataSource","MWPMessageRangeDataSource","combineLatestWith","gkx","nullthrows"],(function(a,b,c,d,e,f,g){"use strict";var h,i;a=function(){var a=b.prototype;a.subscribe=function(a){return this.$1.subscribe(a)};function b(a,b,e,f,g){var i=e.after,l=e.before,m=e.cursor,n=e.secondaryThreadKey,o=e.secondaryThreadType,p=e.threadAuthorityLevel,q=e.threadType,r=function(e,i){return new(c("MWPMessageListSingleDirectionDataSource"))(a,b,i==="desc"&&!(h||(h=d("I64"))).equal(m.timestampMs,(h||(h=d("I64"))).max_int)?babelHelpers["extends"]({},m,{timestampMs:(h||(h=d("I64"))).sub(m.timestampMs,(h||(h=d("I64"))).one)}):m,i,e,j(a,q,p),q,p,f,g)},s=function(e,i){return new(c("MWPMessageListSingleDirectionDataSource"))(a,b,{messageId:m.messageId,threadKey:c("nullthrows")(n),timestampMs:i==="desc"&&!(h||(h=d("I64"))).equal(m.timestampMs,(h||(h=d("I64"))).max_int)?(h||(h=d("I64"))).sub(m.timestampMs,(h||(h=d("I64"))).one):m.timestampMs},i,e,j(a,c("nullthrows")(o),p),q,p,f,g)},t;n==null||o==null?(e=r(l,"desc"),t=r(i,"asc")):(e=new(c("MWPConcatenateMessageListsDataSource"))({count:l,first:r(l,"desc"),getSecond:function(a){return s(a,"desc")}}),t=new(c("MWPConcatenateMessageListsDataSource"))({count:i,first:s(i,"asc"),getSecond:function(a){return r(a,"asc")}}));this.$1=c("combineLatestWith")(e,t).map(function(a){var b=a[0];a=a[1];var c=b.data.toReversed().concat(a.data).sort(k(m.threadKey));return{data:c,hasNext:a.hasMore,hasPrevious:b.hasMore,isLoadingNext:a.isLoadingMore,isLoadingPrevious:b.isLoadingMore}})}return b}();function j(a,b,e){return d("LSMessagingThreadTypeUtil").isArmadilloSecure(b)?(h||(h=d("I64"))).equal(e,(i||(i=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").OPTIMISTIC))&&c("gkx")("7990")?c("MAWDumbRangeDataSource")():c("MAWEBCombinedRangeDataSource")(a):new(d("MWPMessageRangeDataSource").MSYSMessageRangeDataSource)(a)}var k=function(a){return function(b,c){b=b[1];c=c[1];var e=(h||(h=d("I64"))).compare(b.threadKey,c.threadKey);if(e!==0)return(h||(h=d("I64"))).equal(b.threadKey,a)?1:-1;e=h.compare(b.primarySortKey,c.primarySortKey);if(e!==0)return e;e=h.compare((e=b.secondarySortKey)!=null?e:(h||(h=d("I64"))).zero,(e=c.secondarySortKey)!=null?e:(h||(h=d("I64"))).zero);return e!==0?e:h.compare(b.timestampMs,c.timestampMs)}};g["default"]=a}),98);
__d("useIsNearBottomOfScrollArea",["react"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");var i=b.useLayoutEffect,j=b.useState,k=b.c,l=10;function a(a,b){var c=k(6),d=b===void 0?l:b;b=j(!0);var e=b[0],f=b[1];c[0]!==a.current||c[1]!==d?(b=function(){var b=a.current;if(b==null)return;var c=function(){return f(Math.abs(b.scrollHeight-b.scrollTop-b.clientHeight)<d)},e=window.requestAnimationFrame(c);b.addEventListener("scroll",c);return function(){b.removeEventListener("scroll",c),window.cancelAnimationFrame(e)}},c[0]=a.current,c[1]=d,c[2]=b):b=c[2];var g;c[3]!==d||c[4]!==a?(g=[d,a],c[3]=d,c[4]=a,c[5]=g):g=c[5];i(b,g);return e}g["default"]=a}),98);
__d("MWPMessageListJumpToMostRecentMessageButton.react",["MWPJumpToMostRecentMessageButtonAnimationWrapper.react","react","useIsNearBottomOfScrollArea"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=(i||d("react")).c,k=h||(h=c("react"));function a(a){var b=j(4),d=a.alwaysShow,e=a.jumpToMostRecentMessage,f=a.renderButton;a=a.scrollAreaRef;a=c("useIsNearBottomOfScrollArea")(a,108);a=a===!1||d;b[0]!==f||b[1]!==e||b[2]!==a?(d=f?k.jsx(c("MWPJumpToMostRecentMessageButtonAnimationWrapper.react"),{visible:a,children:f(e)}):null,b[0]=f,b[1]=e,b[2]=a,b[3]=d):d=b[3];return d}g["default"]=a}),98);
__d("MWXMessageScrollList.react",["CometInfiniteScrollTrigger.react","MWXScrollableAreaStyles","gkx","react","stylex","useMergeRefs","useResizeObserver"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||(i=d("react"));b=i;b.useCallback;var k=b.useLayoutEffect,l=b.useRef,m=b.c,n=10,o=function(a){return a},p={expanding:{display:"x78zum5",flexDirection:"xdt5ytf",flexGrow:"x1iyjqo2",flexShrink:"x2lah0s",justifyContent:"xl56j7k",minHeight:"x121v3j4",$$css:!0},scrollArea:{display:"x78zum5",flexDirection:"xdt5ytf",flexGrow:"x1iyjqo2",overflowX:"x6ikm8r",overflowY:"x1odjw0f",$$css:!0}};function q(a){var b=m(22),d=a.anchoredElement,e=a.getKeyForItem,f=a.hasNext;a=a.items;e=e===void 0?o:e;var g=a.length,h;b[0]!==g||b[1]!==a||b[2]!==e?(h=g>0?e(a[0]):void 0,b[0]=g,b[1]=a,b[2]=e,b[3]=h):h=b[3];var i=h;b[4]!==g||b[5]!==a||b[6]!==e?(h=g>0?e(a[a.length-1]):void 0,b[4]=g,b[5]=a,b[6]=e,b[7]=h):h=b[7];var j=h,p=l(g),q=l(i),r=l(j),s=l(),t=l(),u=l(),v=l(),w=l();b[8]===Symbol["for"]("react.memo_cache_sentinel")?(a=function(a){a=a.target;if(!(a instanceof HTMLDivElement))return;if(s.current!=null&&a.scrollHeight!==s.current||t.current!=null&&a.clientHeight!==t.current)return;u.current=a.scrollTop},b[8]=a):a=b[8];e=a;b[9]===Symbol["for"]("react.memo_cache_sentinel")?(h=function(){var a=w.current;if(a==null)return;a.scrollTop<=n&&(a.scrollTop=a.scrollHeight)},a=[],b[9]=h,b[10]=a):(h=b[9],a=b[10]);k(h,a);b[11]!==d||b[12]!==g||b[13]!==i||b[14]!==j||b[15]!==f?(h=function(){var a,b,c,e,h,k,l;a=(a=d==null?void 0:(a=d.current)==null?void 0:a.offsetTop)!=null?a:0;var m=r.current,o=q.current;b=(b=p.current)!=null?b:0;c=(c=s.current)!=null?c:0;e=(e=t.current)!=null?e:0;h=(h=u.current)!=null?h:0;k=(k=v.current)!=null?k:-1;var x=w.current;if((x==null?void 0:x.scrollHeight)===0&&(x==null?void 0:x.clientHeight)===0)return;s.current=(l=x==null?void 0:x.scrollHeight)!=null?l:s.current;u.current=(l=x==null?void 0:x.scrollTop)!=null?l:u.current;p.current=g;q.current=i;r.current=j;v.current=a;if(x==null)return;l=x.clientHeight;var y=x.scrollHeight;t.current=l;var z=Math.abs(c-h-e)<n;m=m!=null&&j!==m;o=o!=null&&i!==o;b=g>b;o=b&&o;b=b&&m;var A=e!==0&&e!==l;m=k!==-1&&k>h&&k<h+e;var B;(d==null?void 0:d.current)!=null&&m?B=a-(k-h):!f&&z?B=h+y-c+e-l:o?B=h+y-c:b&&(B=h);var C=B;if(C!=null){x.scrollTop=C;u.current=B;var D=window.requestAnimationFrame(function(){var a=x.scrollTop;Math.abs(a-C)>n?x.scrollTop=C+(a>C?1:-1)*n:A&&(x.scrollTop=C)});return function(){return window.cancelAnimationFrame(D)}}},b[11]=d,b[12]=g,b[13]=i,b[14]=j,b[15]=f,b[16]=h):h=b[16];a=h;h=c("useResizeObserver")(a);var x=c("useResizeObserver")(a),y;b[17]!==a?(y=[a],b[17]=a,b[18]=y):y=b[18];k(a,y);a=c("useMergeRefs")(w,h);b[19]!==x||b[20]!==a?(y={contentRef:x,onScroll:e,ref:a},b[19]=x,b[20]=a,b[21]=y):y=b[21];return y}e=j.forwardRef(a);function a(a,b){var d=m(50),e=a.anchoredElement,f=a.ariaLabel,g=a.getKeyForItem,i=a.hasNext,k=a.hasPrevious,l=a.isLoadingNext,n=a.isLoadingPrevious,o=a.items,r=a.loadNext,s=a.loadPrevious,t=a.onUserScroll,u=a.renderFooter,v=a.renderHeader,w=a.renderItem;a=a.renderLoadingAnimation;var x=o.length,y;d[0]!==k||d[1]!==v?(y=!k&&v!=null&&j.jsx(j.Fragment,{children:v()},"header"),d[0]=k,d[1]=v,d[2]=y):y=d[2];d[3]!==a||d[4]!==x?(v=a==null?void 0:a(x),d[3]=a,d[4]=x,d[5]=v):v=d[5];var z;d[6]!==k||d[7]!==n||d[8]!==s||d[9]!==v?(z=j.jsx(c("CometInfiniteScrollTrigger.react"),{hasMore:k,isLoading:n,onLoadMore:s,xstyle:p.expanding,children:v},"loadPrevious"),d[6]=k,d[7]=n,d[8]=s,d[9]=v,d[10]=z):z=d[10];d[11]!==w||d[12]!==o||d[13]!==x?(k=o.map(function(a,b){return w(a,o[b-1],o[b+1],c("gkx")("7810")?x-1-b:0)}),d[11]=w,d[12]=o,d[13]=x,d[14]=k):k=d[14];d[15]!==a||d[16]!==x?(n=a==null?void 0:a(x),d[15]=a,d[16]=x,d[17]=n):n=d[17];d[18]!==i||d[19]!==l||d[20]!==r||d[21]!==n?(s=j.jsx(c("CometInfiniteScrollTrigger.react"),{hasMore:i,isLoading:l,onLoadMore:r,xstyle:p.expanding,children:n},"loadNext"),d[18]=i,d[19]=l,d[20]=r,d[21]=n,d[22]=s):s=d[22];d[23]!==i||d[24]!==u?(v=!i&&u!=null&&j.jsx(j.Fragment,{children:u()},"footer"),d[23]=i,d[24]=u,d[25]=v):v=d[25];d[26]!==y||d[27]!==z||d[28]!==k||d[29]!==s||d[30]!==v?(a=[y,z].concat(k,[s,v]),d[26]=y,d[27]=z,d[28]=k,d[29]=s,d[30]=v,d[31]=a):a=d[31];l=a;d[32]!==e||d[33]!==g||d[34]!==i||d[35]!==o?(r={anchoredElement:e,getKeyForItem:g,hasNext:i,items:o},d[32]=e,d[33]=g,d[34]=i,d[35]=o,d[36]=r):r=d[36];n=q(r);u=n.contentRef;var A=n.onScroll;y=n.ref;d[37]!==t||d[38]!==A?(z=function(a){t==null?void 0:t(),A(a)},d[37]=t,d[38]=A,d[39]=z):z=d[39];k=z;s=c("useMergeRefs")(y,b);d[40]===Symbol["for"]("react.memo_cache_sentinel")?(v=(h||(h=c("stylex")))(p.scrollArea,c("MWXScrollableAreaStyles").themed),d[40]=v):v=d[40];d[41]===Symbol["for"]("react.memo_cache_sentinel")?(a="x78zum5 xdt5ytf x1iyjqo2 x2lah0s xl56j7k x121v3j4",d[41]=a):a=d[41];d[42]!==u||d[43]!==l?(e=j.jsx("div",{className:a,ref:u,children:l}),d[42]=u,d[43]=l,d[44]=e):e=d[44];d[45]!==f||d[46]!==k||d[47]!==s||d[48]!==e?(g=j.jsx("div",{"aria-label":f,className:v,"data-testid":void 0,onScroll:k,ref:s,role:"grid",children:e}),d[45]=f,d[46]=k,d[47]=s,d[48]=e,d[49]=g):g=d[49];return g}f=e;g["default"]=f}),98);
__d("MessageForIntegrityCheck",[],(function(a,b,c,d,e,f){"use strict";function a(a){return a.isAdminMessage?null:{displayedContentTypes:a.displayedContentTypes,messageId:a.messageId,offlineThreadingId:a.offlineThreadingId,primarySortKey:a.primarySortKey}}f.prepMessageForIntegrityCheck=a}),66);
__d("useMWPMessageListOnScrollToBottom",["I64","MWMessageListScrollContext.react","Promise","gkx","react","useIsNearBottomOfScrollArea","useMWPSafelyMarkThreadAsRead"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;e=j||d("react");e.useCallback;var k=e.useEffect,l=e.c;function m(a,d,e,f,g){var i=l(10),j;i[0]!==f||i[1]!==e?(j=function(){return(h||(h=b("Promise"))).resolve(f&&!e)},i[0]=f,i[1]=e,i[2]=j):j=i[2];j=j;var m=c("useMWPSafelyMarkThreadAsRead")(g,j,a,d);i[3]!==a?(g=a(),i[3]=a,i[4]=g):g=i[4];var n=g;i[5]!==f||i[6]!==n||i[7]!==m?(j=function(){f&&!n&&m()},d=[f,n,m],i[5]=f,i[6]=n,i[7]=m,i[8]=j,i[9]=d):(j=i[8],d=i[9]);k(j,d)}function a(a,b,e,f,g,h){var j=l(11),n=c("useIsNearBottomOfScrollArea")(g),o=d("MWMessageListScrollContext.react").useMWMessageListScrollContextSetters();j[0]!==h.threadKey?(g=(i||(i=d("I64"))).to_string(h.threadKey),j[0]=h.threadKey,j[1]=g):g=j[1];var p=g,q;j[2]!==o||j[3]!==p||j[4]!==n?(g=function(){if(c("gkx")("7117")&&o!=null){o.setIsThreadAtBottom(p,n);return function(){return o.unsetIsThreadAtBottom(p)}}},q=[n,o,p],j[2]=o,j[3]=p,j[4]=n,j[5]=g,j[6]=q):(g=j[5],q=j[6]);k(g,q);j[7]!==f||j[8]!==n?(g=function(){f!=null&&f(n)},q=[n,f],j[7]=f,j[8]=n,j[9]=g,j[10]=q):(g=j[9],q=j[10]);k(g,q);m(a,b,e,n,h)}g["default"]=a}),98);
__d("getOrCreateMapValue",[],(function(a,b,c,d,e,f){"use strict";function a(a,b,c){var d=a.get(b);d==null&&(d=c(),a.set(b,d));return d}f["default"]=a}),66);
__d("useMWPMessageListScrollVisibleMessageIntoView",["MWPVisibleMessageContext.react","getOrCreateMapValue","react"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");var i=b.createRef,j=b.startTransition;b.useCallback;var k=b.useEffect,l=b.useRef,m=b.c;function a(){var a=m(11),b;a[0]===Symbol["for"]("react.memo_cache_sentinel")?(b=new Map(),a[0]=b):b=a[0];var e=l(b);b=d("MWPVisibleMessageContext.react").useMWPVisibleMessageContext();var f=b.setVisibleMessage,g=b.visibleMessage;a[1]!==g||a[2]!==f?(b=function(a){var b=c("getOrCreateMapValue")(e.current,a,i);g!=null&&a===g.messageId&&(g==null?void 0:g.ref)!==b&&f(babelHelpers["extends"]({},g,{ref:b}));return b},a[1]=g,a[2]=f,a[3]=b):b=a[3];b=b;var h,n;a[4]!==g||a[5]!==f?(h=function(){var a=g==null?void 0:g.messageId;if(a==null||g==null)return;var b=e.current.get(a);b!==(g==null?void 0:g.ref)&&j(function(){f(babelHelpers["extends"]({},g,{ref:b}))})},n=[g,f],a[4]=g,a[5]=f,a[6]=h,a[7]=n):(h=a[6],n=a[7]);k(h,n);a[8]!==g?(h=function(){var a,b=g==null?void 0:(a=g.ref)==null?void 0:a.current;if(b==null)return;var c=window.requestAnimationFrame(function(){b.scrollIntoView({behavior:"instant",block:"start",inline:"nearest"})});return function(){return window.cancelAnimationFrame(c)}},n=[g],a[8]=g,a[9]=h,a[10]=n):(h=a[9],n=a[10]);k(h,n);return b}g["default"]=a}),98);
__d("useMWPRelayMessageListJumpToMostRecentMessage",["MWPVisibleMessageContext.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h;h||(h=d("react"));var i=h.useCallback;function a(a){var b=d("MWPVisibleMessageContext.react").useMWPVisibleMessageContext(),c=b.setVisibleMessage;return i(function(){var b=a.current;b!=null&&(c(void 0),b.scrollTop=b.scrollHeight)},[a,c])}g["default"]=a}),98);
__d("useObserveMessagePageLoad",["I64","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i;c=h||d("react");var j=c.useEffect,k=c.useRef,l=c.c;function m(a,b){return b?[a.slice(0,a.length-1),a[a.length-1]]:[[].concat(a),null]}function n(a,b,c){if(b==null)return m(a,c);else{var d=a.findIndex(function(a){return a.messageId===b});if(d===-1)return m(a,c);else return[a.slice(0,d),a.at(d)]}}var o=function(a,b){return a.some(function(a){return b.findIndex(function(b){return b.offlineThreadingId===a.offlineThreadingId})>-1})};function p(a,b,c,e,f,g){var h=l(9),m;h[0]===Symbol["for"]("react.memo_cache_sentinel")?(m=[],h[0]=m):m=h[0];var p=k(m),q=k(null),r=k(0),s;h[1]!==g||h[2]!==a||h[3]!==f||h[4]!==e||h[5]!==b||h[6]!==c?(m=function(){var h;g?(p.current.length>0&&!o(p.current,a)&&(p.current=[],q.current=null,r.current=f?999:0),p.current=[].concat(p.current,a).reduce(function(a,b){var c=a.find(function(a){return a.offlineThreadingId===b.offlineThreadingId});if(c==null)a.push(b);else if(c.offlineThreadingId===c.messageId&&b.messageId!==b.offlineThreadingId){c=a.indexOf(c);a[c]=b}return a},[]).sort(function(a,b){var c=(i||(i=d("I64"))).compare(a.primarySortKey,b.primarySortKey);return c!==0?c:a.offlineThreadingId.localeCompare(b.offlineThreadingId)}),h=p.current):h=a;if(e)return;if(h.length===0){q.current=null;return}h=n(h,q.current,f);var j=h[0];h=h[1];if(j.length<b)return;j=j.reverse();h=h;while(j.length>=b){var k=j.splice(0,b);c(h==null?null:h,k.map(function(a){return a}),b,r.current);r.current=r.current+1;h=k[k.length-1]}q.current=(k=h)==null?void 0:k.messageId},s=[c,b,a,e,f,g],h[1]=g,h[2]=a,h[3]=f,h[4]=e,h[5]=b,h[6]=c,h[7]=m,h[8]=s):(m=h[7],s=h[8]);j(m,s)}function a(a,b,c,d,e){return p(a,b,c,d,e,!1)}function b(a,b,c,d,e){return p(a,b,c,d,e,!0)}g.useObserveMessagePageLoad=a;g.useObserveMessagePageLoadWithAggregation=b}),98);
__d("MWPRelayBaseMessageList.react",["BaseHeadingContextWrapper.react","Box.react","CometHeroHoldTrigger.react","CometHideableComponentExperiment.react","I64","LSAuthorityLevel","LSIntEnum","LSMessagingThreadTypeUtil","MWPMessageAuthor.react","MWPMessageListJumpToMostRecentMessageButton.react","MWPVisibleMessageContext.react","MWXMessageScrollList.react","MessageForIntegrityCheck","cr:6271","emptyFunction","gkx","justknobx","react","useMWPMessageListOnScrollToBottom","useMWPMessageListScrollVisibleMessageIntoView","useMWPRelayMessageListJumpToMostRecentMessage","useObserveMessagePageLoad"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=h||(h=d("react"));f=h;var l=f.useImperativeHandle,m=f.useRef,n=f.c,o={backgroundColor:{backgroundColor:"x1eb86dx",$$css:!0},list:{display:"x78zum5",flexDirection:"xdt5ytf",flexGrow:"x1iyjqo2",flexShrink:"xs83m0k",overflowX:"x6ikm8r",overflowY:"x10wlt62",zIndex:"x1ja2u2z",$$css:!0}},p=k.forwardRef(a);function a(a,e){var f=n(34),g=a.checkIsThreadManuallySetAsUnread,h=a.entryPoint,j=a.onPageLoaded,p=a.onScrollToBottom,r=a.onUserScroll,s=a.renderFooter,t=a.renderHeader,u=a.renderJumpToMostRecentMessageButton,v=a.renderLoadingAnimation,w=a.renderRow,x=a.secondaryThread,y=a.shouldPausePageLoadTracking,z=a.thread;a=g===void 0?c("emptyFunction").thatReturnsFalse:g;g=j===void 0?c("emptyFunction"):j;j=y===void 0?!1:y;var A=m();y=b("cr:6271")(z,x);x=y.hasNext;var B=y.hasPrevious,C=y.isLoadingNext,D=y.isLoadingPrevious,E=y.loadNext,F=y.loadPrevious;y=y.messages;var G=c("useMWPMessageListScrollVisibleMessageIntoView")();if(f[0]!==z.threadKey||f[1]!==y){var H;f[3]!==z.threadKey?(H=function(a){return(i||(i=d("I64"))).equal(a.threadKey,z.threadKey)?d("MessageForIntegrityCheck").prepMessageForIntegrityCheck(a):null},f[3]=z.threadKey,f[4]=H):H=f[4];H=y.map(H).filter(Boolean);f[0]=z.threadKey;f[1]=y;f[2]=H}else H=f[2];d("useObserveMessagePageLoad").useObserveMessagePageLoadWithAggregation(H,10,g,j,x);c("useMWPMessageListOnScrollToBottom")(a,h,x,p,A,z);var I=c("useMWPRelayMessageListJumpToMostRecentMessage")(A);f[5]!==I?(H=function(){return{getScrollAreaElement:c("emptyFunction"),jumpToMostRecentMessage:function(){I(!0)},restoreScrollPosition:c("emptyFunction")}},g=[I],f[5]=I,f[6]=H,f[7]=g):(H=f[6],g=f[7]);l(e,H,g);var J=m(null);a=(j=d("MWPVisibleMessageContext.react").useMWPVisibleMessageContext().visibleMessage)==null?void 0:j.ref;f[8]!==G||f[9]!==w?(h=function(a,b,e,f){return k.jsx("div",{className:(i||(i=d("I64"))).to_float(a.displayedContentTypes)===8&&"x1vjfegm",ref:G(a.messageId),children:k.jsx(c("CometHideableComponentExperiment.react"),{callingSurface:"thread_view",disableHiding:!0,scrollport:function(){return A.current},unmountXStyle:o.backgroundColor,children:k.jsx(d("MWPMessageAuthor.react").MWPMessageAuthor,{contactId:a.senderId,threadKey:a.threadKey,children:w({domElementRef:J,message:a,nextMessage:e,prevMessage:b,rowIndexFromBottom:f})})})},a.offlineThreadingId)},f[8]=G,f[9]=w,f[10]=h):h=f[10];f[11]!==v?(p=function(a){if(c("gkx")("511")){a=a>c("justknobx")._("2674");return k.jsxs(k.Fragment,{children:[v==null?void 0:v(a),k.jsx(c("CometHeroHoldTrigger.react"),{description:"MessageListLoadingMoreItems",hold:!a})]})}else return v==null?void 0:v()},f[11]=v,f[12]=p):p=f[12];f[13]!==a||f[14]!==x||f[15]!==B||f[16]!==C||f[17]!==D||f[18]!==y||f[19]!==E||f[20]!==F||f[21]!==r||f[22]!==s||f[23]!==t||f[24]!==h||f[25]!==p?(e=k.jsx(c("BaseHeadingContextWrapper.react"),{children:k.jsx(c("MWXMessageScrollList.react"),{anchoredElement:a,getKeyForItem:q,hasNext:x,hasPrevious:B,isLoadingNext:C,isLoadingPrevious:D,items:y,loadNext:E,loadPrevious:F,onUserScroll:r,ref:A,renderFooter:s,renderHeader:t,renderItem:h,renderLoadingAnimation:p})}),f[13]=a,f[14]=x,f[15]=B,f[16]=C,f[17]=D,f[18]=y,f[19]=E,f[20]=F,f[21]=r,f[22]=s,f[23]=t,f[24]=h,f[25]=p,f[26]=e):e=f[26];f[27]!==x||f[28]!==I||f[29]!==u?(H=k.jsx(c("MWPMessageListJumpToMostRecentMessageButton.react"),{alwaysShow:x,jumpToMostRecentMessage:I,renderButton:u,scrollAreaRef:A}),f[27]=x,f[28]=I,f[29]=u,f[30]=H):H=f[30];f[31]!==e||f[32]!==H?(g=k.jsxs(c("Box.react"),{xstyle:o.list,children:[e,H]}),f[31]=e,f[32]=H,f[33]=g):g=f[33];return g}function q(a){return a.messageId}f=k.forwardRef(e);function e(a,b){var e=n(15);if(e[0]!==a){a.pageSize;var f=babelHelpers.objectWithoutPropertiesLoose(a,["pageSize"]);f=f;e[0]=a;e[1]=f}else f=e[1];a=f;var g=a.renderHeader,h=a.renderLoadingAnimation;a=a.thread;if((i||(i=d("I64"))).equal(a.authorityLevel,(j||(j=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").OPTIMISTIC))&&!c("gkx")("7990")){var l;e[2]===Symbol["for"]("react.memo_cache_sentinel")?(l=k.jsx(c("CometHeroHoldTrigger.react"),{description:"MWChatWaitingForDisplayState-optimisticThread",hold:!0}),e[2]=l):l=e[2];var m;e[3]!==g?(m=g==null?void 0:g(),e[3]=g,e[4]=m):m=e[4];e[5]!==m?(g=k.jsxs(k.Fragment,{children:[l,m]}),e[5]=m,e[6]=g):g=e[6];return g}l=(i||(i=d("I64"))).equal(a.authorityLevel,(j||(j=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").OPTIMISTIC))&&d("LSMessagingThreadTypeUtil").isCMSubthread(a.threadType);if(l){e[7]===Symbol["for"]("react.memo_cache_sentinel")?(m=k.jsx(c("CometHeroHoldTrigger.react"),{description:"MWChatWaitingForDisplayState-optimisticSubThread",hold:!0}),e[7]=m):m=e[7];e[8]!==h?(g=h==null?void 0:h(c("gkx")("511")?!1:void 0),e[8]=h,e[9]=g):g=e[9];e[10]!==g?(a=k.jsxs(k.Fragment,{children:[m,g]}),e[10]=g,e[11]=a):a=e[11];return a}e[12]!==f||e[13]!==b?(l=k.jsx(p,babelHelpers["extends"]({},f,{ref:b})),e[12]=f,e[13]=b,e[14]=l):l=e[14];return l}a=f;g["default"]=a}),98);
__d("MWPThreadThemeProviderQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="7801872189881330"}),null);
__d("MWPThreadThemeProviderQuery.graphql",["MWPThreadThemeProviderQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"id"}],c=[{kind:"Variable",name:"id",variableName:"id"}],d={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},e={alias:null,args:null,kind:"ScalarField",name:"accessibility_label",storageKey:null},f={alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},g={alias:null,args:null,kind:"ScalarField",name:"app_color_mode",storageKey:null},h={alias:null,args:null,kind:"ScalarField",name:"composer_background_color",storageKey:null},i={alias:null,args:null,kind:"ScalarField",name:"background_gradient_colors",storageKey:null},j={alias:null,args:null,kind:"ScalarField",name:"is_deprecated",storageKey:null},k={alias:null,args:null,kind:"ScalarField",name:"title_bar_button_tint_color",storageKey:null},l={alias:null,args:null,kind:"ScalarField",name:"inbound_message_gradient_colors",storageKey:null},m={alias:null,args:null,kind:"ScalarField",name:"title_bar_text_color",storageKey:null},n={alias:null,args:null,kind:"ScalarField",name:"composer_tint_color",storageKey:null},o={alias:null,args:null,kind:"ScalarField",name:"title_bar_attribution_color",storageKey:null},p={alias:null,args:null,kind:"ScalarField",name:"composer_input_background_color",storageKey:null},q={alias:null,args:null,kind:"ScalarField",name:"hot_like_color",storageKey:null},r=[d,{alias:null,args:null,concreteType:"Image",kind:"LinkedField",name:"image",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"uri",storageKey:null}],storageKey:null}],s={alias:null,args:null,concreteType:"MessengerThreadBackgroundAsset",kind:"LinkedField",name:"background_asset",plural:!1,selections:r,storageKey:null},t={alias:null,args:null,kind:"ScalarField",name:"message_text_color",storageKey:null},u={alias:null,args:null,kind:"ScalarField",name:"message_border_color",storageKey:null},v={alias:null,args:null,kind:"ScalarField",name:"message_border_width",storageKey:null},w={alias:null,args:null,kind:"ScalarField",name:"inbound_message_text_color",storageKey:null},x={alias:null,args:null,kind:"ScalarField",name:"inbound_message_border_color",storageKey:null},y={alias:null,args:null,kind:"ScalarField",name:"inbound_message_border_width",storageKey:null},z={alias:null,args:null,kind:"ScalarField",name:"primary_button_background_color",storageKey:null},A={alias:null,args:null,kind:"ScalarField",name:"title_bar_background_color",storageKey:null},B={alias:null,args:null,kind:"ScalarField",name:"tertiary_text_color",storageKey:null},C={alias:null,args:null,kind:"ScalarField",name:"reverse_gradients_for_radial",storageKey:null},D={alias:null,args:null,kind:"ScalarField",name:"reaction_pill_background_color",storageKey:null},E={alias:null,args:null,kind:"ScalarField",name:"secondary_text_color",storageKey:null},F={alias:null,args:null,kind:"ScalarField",name:"fallback_color",storageKey:null},G={alias:null,args:null,kind:"ScalarField",name:"gradient_colors",storageKey:null},H={alias:null,args:null,kind:"ScalarField",name:"normal_theme_id",storageKey:null};r={alias:null,args:null,concreteType:"MessengerThreadThemeIconAsset",kind:"LinkedField",name:"icon_asset",plural:!1,selections:r,storageKey:null};d=[d,e,f,g,h,i,j,k,l,m,n,o,p,q,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,r,{alias:null,args:null,concreteType:"MessengerThreadTheme",kind:"LinkedField",name:"alternative_themes",plural:!0,selections:[d,e,f,g,h,i,j,k,l,m,n,o,p,q,s,t,u,v,w,x,y,H,z,A,B,C,D,E,F,G,r],storageKey:null}];return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"MWPThreadThemeProviderQuery",selections:[{alias:null,args:c,concreteType:"MessengerThreadTheme",kind:"LinkedField",name:"messenger_thread_theme",plural:!1,selections:[{kind:"InlineDataFragmentSpread",name:"MWPThreadThemeQuery_Fragment",selections:d,args:null,argumentDefinitions:[]}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"MWPThreadThemeProviderQuery",selections:[{alias:null,args:c,concreteType:"MessengerThreadTheme",kind:"LinkedField",name:"messenger_thread_theme",plural:!1,selections:d,storageKey:null}]},params:{id:b("MWPThreadThemeProviderQuery_facebookRelayOperation"),metadata:{},name:"MWPThreadThemeProviderQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("MWPThreadThemesFetchQPLLogger",["QPLUserFlow","qpl"],(function(a,b,c,d,e,f,g){"use strict";var h=0,i=c("qpl")._(25308538,"426");function a(){c("QPLUserFlow").start(i,{instanceKey:h});return h++}function b(a,b){b!=null?c("QPLUserFlow").endFailure(i,b,{instanceKey:a}):c("QPLUserFlow").endSuccess(i,{instanceKey:a})}function d(a,b,d){c("QPLUserFlow").addPoint(i,b,{instanceKey:a}),d!=null&&c("QPLUserFlow").addAnnotations(i,d,{instanceKey:a})}g.logThemesFetchStart=a;g.logThemesFetchEnd=b;g.logPoint=d}),98);
__d("MessengerThreadThemeGradientType",[],(function(a,b,c,d,e,f){a=Object.freeze({MESSAGE_BUBBLE_OUTBOUND:0,MESSAGE_BUBBLE_INBOUND:1,THREADVIEW_BACKGROUND:2,DELIVERY_RECEIPT:3,COMPOSER_CIRCLE_BUTTON:4,COMPOSER_SEND_BUTTON:5,EMPHASIS:6});f["default"]=a}),66);
__d("MWPThreadThemeProvider.react",["CometRelay","I64","Int64Hooks","LSIntEnum","MWPThemeCSSProvider.react","MWPThreadThemeContext","MWPThreadThemeProviderQuery.graphql","MWPThreadThemesFetchQPLLogger","MessengerThreadThemeGradientType","ReQL","ReQLSuspense","cr:5300","cr:8933","defaultMWPThreadTheme","promiseDone","react","useCurrentDisplayMode","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l,m=l||(l=d("react"));e=l;var n=e.useMemo,o=e.useState,p=e.c;function q(a,e){var g=(i||(i=c("useReStore")))(),l=c("useCurrentDisplayMode")(),m=d("ReQLSuspense").useFirst(function(){return a==null?d("ReQL").empty():d("ReQL").fromTableAscending(g.tables.thread_themes).getKeyRange(a)},[g,a],f.id+":41"),o=d("MWPThemeCSSProvider.react").useIsThemeV2(),p=b("cr:5300")==null?void 0:b("cr:5300")(g,a),q=l==="dark"&&o&&p!=null?p:m,r=d("ReQLSuspense").useArray(function(){return(q==null?void 0:q.fbid)==null?d("ReQL").empty():d("ReQL").fromTableAscending(g.tables.gradient_colors).getKeyRange(q==null?void 0:q.fbid)},[g,q==null?void 0:q.fbid],f.id+":56"),s=d("CometRelay").useRelayEnvironment();d("Int64Hooks").useEffectInt64(function(){if(q==null&&a!=null&&b("cr:8933")!=null){var e=d("MWPThreadThemesFetchQPLLogger").logThemesFetchStart();c("promiseDone")(d("CometRelay").fetchQuery(s,h!==void 0?h:h=b("MWPThreadThemeProviderQuery.graphql"),{id:(j||(j=d("I64"))).to_string(a)}).toPromise().then(function(a){return b("cr:8933").insertGraphQLThemeResponseIntoDatabase(a==null?void 0:a.messenger_thread_theme,e)}))}},[a,q,s,g]);return n(function(){return q!=null?{backgroundGradientColors:r.filter(function(a){return(j||(j=d("I64"))).equal(a.type_,(k||(k=d("LSIntEnum"))).ofNumber(c("MessengerThreadThemeGradientType").THREADVIEW_BACKGROUND))}),incomingGradientColors:r.filter(function(a){return(j||(j=d("I64"))).equal(a.type_,(k||(k=d("LSIntEnum"))).ofNumber(c("MessengerThreadThemeGradientType").MESSAGE_BUBBLE_INBOUND))}),outgoingGradientColors:r.filter(function(a){return(j||(j=d("I64"))).equal(a.type_,(k||(k=d("LSIntEnum"))).ofNumber(c("MessengerThreadThemeGradientType").MESSAGE_BUBBLE_OUTBOUND))}),threadTheme:q}:e},[q,r,e])}function a(a){var b=p(18),c=a.children,e=a.defaultTheme,f=a.themeFbid;a=o();var g=a[0],h=a[1],i;b[0]!==g||b[1]!==f?(a=function(){var a;return(a=g)!=null?a:f},i=[f,g],b[0]=g,b[1]=f,b[2]=a,b[3]=i):(a=b[2],i=b[3]);a=d("Int64Hooks").useMemoInt64(a,i);i=d("defaultMWPThreadTheme").useDefaultThemeWithColors();var j=q(a,(a=e)!=null?a:i);b[4]!==j.backgroundGradientColors||b[5]!==j.incomingGradientColors||b[6]!==j.outgoingGradientColors||b[7]!==j.threadTheme||b[8]!==g?(e=function(){return{backgroundGradientColors:j.backgroundGradientColors,incomingGradientColors:j.incomingGradientColors,outgoingGradientColors:j.outgoingGradientColors,previewId:g,setPreviewId:h,threadTheme:j.threadTheme}},b[4]=j.backgroundGradientColors,b[5]=j.incomingGradientColors,b[6]=j.outgoingGradientColors,b[7]=j.threadTheme,b[8]=g,b[9]=e):e=b[9];b[10]!==j||b[11]!==g?(a=[j,g],b[10]=j,b[11]=g,b[12]=a):a=b[12];i=d("Int64Hooks").useMemoInt64(e,a);b[13]!==c?(e=m.jsx(d("MWPThemeCSSProvider.react").MWPThemeCSSProvider,{children:c}),b[13]=c,b[14]=e):e=b[14];b[15]!==i||b[16]!==e?(a=m.jsx(d("MWPThreadThemeContext").MWPThreadThemeContext.Provider,{value:i,children:e}),b[15]=i,b[16]=e,b[17]=a):a=b[17];return a}g["default"]=a}),98);
__d("MWPThreadThemeQuery_AllThemesQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="26068956082718275"}),null);
__d("MWPThreadThemeQuery_AllThemesQuery.graphql",["MWPThreadThemeQuery_AllThemesQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"version"}],c=[{kind:"Variable",name:"version",variableName:"version"}],d={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},e={alias:null,args:null,kind:"ScalarField",name:"accessibility_label",storageKey:null},f={alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},g={alias:null,args:null,kind:"ScalarField",name:"app_color_mode",storageKey:null},h={alias:null,args:null,kind:"ScalarField",name:"composer_background_color",storageKey:null},i={alias:null,args:null,kind:"ScalarField",name:"background_gradient_colors",storageKey:null},j={alias:null,args:null,kind:"ScalarField",name:"is_deprecated",storageKey:null},k={alias:null,args:null,kind:"ScalarField",name:"title_bar_button_tint_color",storageKey:null},l={alias:null,args:null,kind:"ScalarField",name:"inbound_message_gradient_colors",storageKey:null},m={alias:null,args:null,kind:"ScalarField",name:"title_bar_text_color",storageKey:null},n={alias:null,args:null,kind:"ScalarField",name:"composer_tint_color",storageKey:null},o={alias:null,args:null,kind:"ScalarField",name:"title_bar_attribution_color",storageKey:null},p={alias:null,args:null,kind:"ScalarField",name:"composer_input_background_color",storageKey:null},q={alias:null,args:null,kind:"ScalarField",name:"hot_like_color",storageKey:null},r=[d,{alias:null,args:null,concreteType:"Image",kind:"LinkedField",name:"image",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"uri",storageKey:null}],storageKey:null}],s={alias:null,args:null,concreteType:"MessengerThreadBackgroundAsset",kind:"LinkedField",name:"background_asset",plural:!1,selections:r,storageKey:null},t={alias:null,args:null,kind:"ScalarField",name:"message_text_color",storageKey:null},u={alias:null,args:null,kind:"ScalarField",name:"message_border_color",storageKey:null},v={alias:null,args:null,kind:"ScalarField",name:"message_border_width",storageKey:null},w={alias:null,args:null,kind:"ScalarField",name:"inbound_message_text_color",storageKey:null},x={alias:null,args:null,kind:"ScalarField",name:"inbound_message_border_color",storageKey:null},y={alias:null,args:null,kind:"ScalarField",name:"inbound_message_border_width",storageKey:null},z={alias:null,args:null,kind:"ScalarField",name:"primary_button_background_color",storageKey:null},A={alias:null,args:null,kind:"ScalarField",name:"title_bar_background_color",storageKey:null},B={alias:null,args:null,kind:"ScalarField",name:"tertiary_text_color",storageKey:null},C={alias:null,args:null,kind:"ScalarField",name:"reverse_gradients_for_radial",storageKey:null},D={alias:null,args:null,kind:"ScalarField",name:"reaction_pill_background_color",storageKey:null},E={alias:null,args:null,kind:"ScalarField",name:"secondary_text_color",storageKey:null},F={alias:null,args:null,kind:"ScalarField",name:"fallback_color",storageKey:null},G={alias:null,args:null,kind:"ScalarField",name:"gradient_colors",storageKey:null},H={alias:null,args:null,kind:"ScalarField",name:"normal_theme_id",storageKey:null};r={alias:null,args:null,concreteType:"MessengerThreadThemeIconAsset",kind:"LinkedField",name:"icon_asset",plural:!1,selections:r,storageKey:null};d=[d,e,f,g,h,i,j,k,l,m,n,o,p,q,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,r,{alias:null,args:null,concreteType:"MessengerThreadTheme",kind:"LinkedField",name:"alternative_themes",plural:!0,selections:[d,e,f,g,h,i,j,k,l,m,n,o,p,q,s,t,u,v,w,x,y,H,z,A,B,C,D,E,F,G,r],storageKey:null}];return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"MWPThreadThemeQuery_AllThemesQuery",selections:[{alias:null,args:c,concreteType:"MessengerThreadTheme",kind:"LinkedField",name:"messenger_thread_themes",plural:!0,selections:[{kind:"InlineDataFragmentSpread",name:"MWPThreadThemeQuery_Fragment",selections:d,args:null,argumentDefinitions:[]}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"MWPThreadThemeQuery_AllThemesQuery",selections:[{alias:null,args:c,concreteType:"MessengerThreadTheme",kind:"LinkedField",name:"messenger_thread_themes",plural:!0,selections:d,storageKey:null}]},params:{id:b("MWPThreadThemeQuery_AllThemesQuery_facebookRelayOperation"),metadata:{},name:"MWPThreadThemeQuery_AllThemesQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("MWPThreadThemeQuery_Fragment.graphql",[],(function(a,b,c,d,e,f){"use strict";a={kind:"InlineDataFragment",name:"MWPThreadThemeQuery_Fragment"};e.exports=a}),null);
__d("MWPThreadThemeQuery",["CometRelay","I64","LSDatabaseSingleton","MWPColorUtils","MWPThreadThemeQuery_AllThemesQuery.graphql","MWPThreadThemeQuery_Fragment.graphql","MWPThreadThemesFetchQPLLogger","MessengerAppColorMode","MessengerThreadThemeGradientType","Promise","asyncToGeneratorRuntime","nullthrows","promiseDone","react","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l,m,n,o=l||d("react"),p=o.useEffect,q=o.c,r=h!==void 0?h:h=b("MWPThreadThemeQuery_Fragment.graphql");function s(a){return a==null?null:d("MWPColorUtils").hexToI64(a)}function t(a){switch(a){case"LIGHT":return(m||(m=d("I64"))).of_int32(c("MessengerAppColorMode").NORMAL);case"DARK":return(m||(m=d("I64"))).of_int32(c("MessengerAppColorMode").DARK)}return(m||(m=d("I64"))).of_int32(c("MessengerAppColorMode").NORMAL)}function u(a,b,c,d){return v.apply(this,arguments)}function v(){v=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e,f){for(e of e.entries()){var g=e[0],h=e[1];yield b.gradient_colors.put({color:c("nullthrows")(s(h)),gradientIndex:(m||(m=d("I64"))).of_int32(g+10*f),themeFbid:a,type_:m.of_int32(f)})}});return v.apply(this,arguments)}function w(a,b,c,d){return x.apply(this,arguments)}function x(){x=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e,f){var g;a=d("CometRelay").readInlineData(r,a);if(a==null){e!=null&&d("MWPThreadThemesFetchQPLLogger").logThemesFetchEnd(e,"themes_null");return}g=[].concat((g=a==null?void 0:a.alternative_themes)!=null?g:[]);g.push(a);for(a of g){var h;if(a==null)continue;g=(m||(m=d("I64"))).of_string(c("nullthrows")(a.id));yield u(g,b,a.background_gradient_colors,c("MessengerThreadThemeGradientType").THREADVIEW_BACKGROUND);yield u(g,b,a.gradient_colors,c("MessengerThreadThemeGradientType").MESSAGE_BUBBLE_OUTBOUND);yield u(g,b,a.inbound_message_gradient_colors,c("MessengerThreadThemeGradientType").MESSAGE_BUBBLE_INBOUND);yield b.thread_themes.put({accessibilityLabel:(h=a.accessibility_label)!=null?h:"",appColorMode:t(a.app_color_mode),backgroundUrl:(h=a.background_asset)==null?void 0:(h=h.image)==null?void 0:h.uri,composerBackgroundColor:s(a.composer_background_color),composerInputBackgroundColor:s(a.composer_input_background_color),composerTintColor:s(a.composer_tint_color),description:a.description,fallbackColor:s(c("nullthrows")(a.fallback_color)),fbid:g,hotLikeColor:a.hot_like_color,iconUrl:(h=a.icon_asset)==null?void 0:(g=h.image)==null?void 0:g.uri,incomingMessageBorderColor:s(a.inbound_message_border_color),incomingMessageBorderWidth:a.inbound_message_border_width,incomingMessageTextColor:s(a.inbound_message_text_color),isDeprecated:!!a.is_deprecated,messageBorderColor:s(a.message_border_color),messageBorderWidth:a.message_border_width?(m||(m=d("I64"))).of_int32(a.message_border_width):void 0,messageTextColor:s(a.message_text_color),normalThemeId:m.of_string(c("nullthrows")(a.normal_theme_id)),primaryButtonBackgroundColor:s(a.primary_button_background_color),reactionPillBackgroundColor:s(a.reaction_pill_background_color),reverseGradiantsForRadial:!!a.reverse_gradients_for_radial,secondaryTextColor:s(a.secondary_text_color),tertiaryTextColor:s(a.tertiary_text_color),themeIdx:f!=null?(m||(m=d("I64"))).of_int32(f):(m||(m=d("I64"))).of_string(c("nullthrows")(a.id)),titlebarAttributionTextColor:s(a.title_bar_attribution_color),titlebarBackgroundColor:s(a.title_bar_background_color),titlebarButtonTintColor:s(a.title_bar_button_tint_color),titlebarTextColor:s(a.title_bar_text_color)})}e!=null&&(d("MWPThreadThemesFetchQPLLogger").logPoint(e,"insert_themes_to_db_end"),d("MWPThreadThemesFetchQPLLogger").logThemesFetchEnd(e))});return x.apply(this,arguments)}function a(a,b){return y.apply(this,arguments)}function y(){y=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){d("MWPThreadThemesFetchQPLLogger").logPoint(b,"insert_themes_to_db_start");var c=(yield (n||(n=d("LSDatabaseSingleton"))).LSDatabaseSingleton);return c.runInTransaction(function(c){return w(a,c,b)},"readwrite",void 0,void 0,f.id+":305")});return y.apply(this,arguments)}function e(){var a=q(6),e=(k||(k=c("useReStore")))(),g=d("CometRelay").useLazyLoadQuery(i!==void 0?i:i=b("MWPThreadThemeQuery_AllThemesQuery.graphql"),{version:"default"}),h;a[0]!==e||a[1]!==g.messenger_thread_themes?(h=function(){c("promiseDone")(e.runInTransaction(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){yield (j||(j=b("Promise"))).all(g.messenger_thread_themes.map(function(b,c){return w(b,a,void 0,c+1)}))});return function(b){return a.apply(this,arguments)}}(),"readwrite",void 0,void 0,f.id+":342"))},a[0]=e,a[1]=g.messenger_thread_themes,a[2]=h):h=a[2];var l;a[3]!==g||a[4]!==e?(l=[g,e],a[3]=g,a[4]=e,a[5]=l):l=a[5];p(h,l)}g.MWPThreadThemeQuery_Fragment=r;g.insertGraphQLThemeResponseIntoDatabaseWithTxn=w;g.insertGraphQLThemeResponseIntoDatabase=a;g.useFetchAllThreadThemes=e}),98);
__d("WAGetUserMedia",[],(function(a,b,c,d,e,f){"use strict";function a(){var a=navigator.mediaDevices;return a==null?null:function(b){return a.getUserMedia(b)}}b=a();f.getUserMedia=b}),66);
__d("WAOpusRecorderWorkerClient",["WAWebOpusRecorderWorkerResource","WorkerBundleResource"],(function(a,b,c,d,e,f,g){var h=function(){function a(a){this.$1=d("WorkerBundleResource").createDedicatedWebWorker(c("WAWebOpusRecorderWorkerResource"));this.$1.onmessage=(a=a)!=null?a:null}var b=a.prototype;b.getWorker=function(){return this.$1};b.postMessage=function(a,b){a={type:"message",message:a};this.$1.postMessage(a,b)};b.addEventListener=function(a,b){this.$1.addEventListener(a,b)};b.removeEventListener=function(a,b){this.$1.addEventListener(a,b)};return a}();function a(){return new h()}function b(a){return new h(a)}g.WAOpusRecorderWorkerClient=h;g.getOpusEncoderWorker=a;g.getOpusDecoderWorker=b}),98);
__d("WAPttComposerOpusRecorder",["$InternalEnum","Promise","WAGetUserMedia","WANullthrows","WAOpusRecorderWorkerClient","asyncToGeneratorRuntime","err"],(function(a,b,c,d,e,f,g){var h,i={bitRate:16e3,bufferLength:4096,numberOfChannels:1,encoderSampleRate:16e3,maxBuffersPerPage:40,encoderApplication:2048,encoderFrameSize:20,streamOptions:{optional:[],mandatory:{googEchoCancellation:!1,googAutoGainControl:!1,googNoiseSuppression:!1,googHighpassFilter:!1}}},j=b("$InternalEnum").Mirrored(["INACTIVE","RECORDING","PAUSED","STOPPED"]);a=function(){function a(a){var d=this;this._duration=0;this._recordedPages=[];this._state=j.INACTIVE;this._isFirstBuffer=!1;this._requestCount=0;this._pendingFlushResolvers=new Map();this._handleEncoderMessage=function(a){a=a.data;switch(a.message){case"page":d._storePage(a.page);break;case"flushed":d._handleFlushed(a.requestId);break;default:throw c("err")("Invalid message event type: "+a.message)}};if(!l())throw c("err")("Recording is not supported in this browser");this._createStream=a.createStream;this._onDuration=a.onDuration;this._onPause=a.onPause;this._onResume=a.onResume;this._onStart=a.onStart;this._onStop=a.onStop;this._handlePage=a.onPage;this._completeRecordingPromise=new(h||(h=b("Promise")))(function(a){d._resolveCompleteRecordingPromise=a});this._audioContext=new AudioContext();this._encoderNode=this._audioContext.createScriptProcessor(i.bufferLength,i.numberOfChannels,i.numberOfChannels);this._encoderNode.onaudioprocess=function(a){d._encodeBuffers(a.inputBuffer)};this._monitorNode=this._audioContext.createGain()}var e=a.prototype;e.getState=function(){return this._state};e.start=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){switch(this._state){case j.RECORDING:return!0;case j.STOPPED:return!1;case j.PAUSED:return this.resume();case j.INACTIVE:break}this._recordedPages=[];this._isFirstBuffer=!0;this._duration=0;var a=d("WAOpusRecorderWorkerClient").getOpusEncoderWorker();this._encoder=a;a.addEventListener("message",this._handleEncoderMessage);var b=(yield this._startRecording());if(!b)return!1;this._onStart==null?void 0:this._onStart();this._onDuration==null?void 0:this._onDuration(this._duration);a.postMessage({command:"encode-init",config:babelHelpers["extends"]({},i,{originalSampleRate:this._audioContext.sampleRate})});this._encoderNode.connect(this._audioContext.destination);return!0});function c(){return a.apply(this,arguments)}return c}();e.stop=function(){var a;if(this._state===j.STOPPED)return;this._state=j.STOPPED;(a=this._recordingAbortController)==null?void 0:a.abort();this._audioContext.close&&this._audioContext.close();this._monitorNode.disconnect();this._encoderNode.disconnect();(a=this._encoder)==null?void 0:a.postMessage({command:"encode-done"})};e.pause=function(){var a;if(this._state!==j.RECORDING)return;this._state=j.PAUSED;(a=this._recordingAbortController)==null?void 0:a.abort();this._onPause==null?void 0:this._onPause()};e.resume=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){switch(this._state){case j.RECORDING:return!0;case j.STOPPED:return!1;case j.INACTIVE:throw c("err")("Attempting to resume recording that hasn't started");case j.PAUSED:break}var a=(yield this._startRecording());if(!a)return!1;this._onResume==null?void 0:this._onResume();return!0});function d(){return a.apply(this,arguments)}return d}();e.getDuration=function(){return this._duration};e.getMonitorNode=function(){return this._monitorNode};e._encodeBuffers=function(a){if(this._isFirstBuffer){this._isFirstBuffer=!1;return}if(this._state!==j.RECORDING)return;var b=[];for(var d=0;d<a.numberOfChannels;d++)b[d]=a.getChannelData(d);d=c("WANullthrows")(this._encoder);d.postMessage({command:"encode",buffers:b});this._duration+=a.duration;this._onDuration==null?void 0:this._onDuration(this._duration)};e._getNextRequestId=function(){this._requestCount++;return this._requestCount};e._startRecording=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){this._state=j.RECORDING;this._recordingAbortController=new AbortController();var a=(yield m(this._createStream,this._audioContext,[this._encoderNode,this._monitorNode],this._recordingAbortController.signal));if(!a){this.stop();return!1}return!0});function a(){return a.apply(this,arguments)}return a}();e._storePage=function(a){this._recordedPages.push(a);if(a[5]&4){this._handlePage==null?void 0:this._handlePage(a,!0);var b=c("WANullthrows")(this._encoder);b.removeEventListener("message",this._handleEncoderMessage);this._resolveCompleteRecordingPromise(k(this._recordedPages));this._recordedPages=[];this._onStop==null?void 0:this._onStop();return}this._handlePage==null?void 0:this._handlePage(a,!1)};e._handleFlushed=function(a){var b=c("WANullthrows")(this._pendingFlushResolvers.get(a));this._pendingFlushResolvers["delete"](a);b(k(this._recordedPages))};e.getPartialRecording=function(){var a=this,d=this._getNextRequestId(),e=new(h||(h=b("Promise")))(function(b){a._pendingFlushResolvers.set(d,b)}),f=c("WANullthrows")(this._encoder);f.postMessage({command:"flush",requestId:d});return e};e.getCompleteRecording=function(){return this._completeRecordingPromise};return a}();function k(a){var b=a.reduce(function(a,b){return a+b.length},0);b=new Uint8Array(b);var c=0;for(a of a)b.set(a,c),c+=a.length;return new Blob([b],{type:"audio/ogg; codecs=opus"})}function l(){return Boolean(window.AudioContext&&d("WAGetUserMedia").getUserMedia)}function m(a,b,c,d){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c,d){var e=(yield a(d));if(d.aborted||e==null)return!1;var f=b.createMediaStreamSource(e);c.forEach(function(a){f.connect(a)});d.addEventListener("abort",function(){e.getTracks().forEach(function(a){a.stop()}),f.disconnect()},{once:!0});return!0});return n.apply(this,arguments)}g.OpusRecorderState=j;g.OpusRecorder=a}),98);
__d("WAPttComposerRecorderPollableTimer",[],(function(a,b,c,d,e,f){a=function(){function a(){}var b=a.prototype;b.start=function(){this.$1=Date.now()};b.stop=function(){this.$2=Date.now()};b.pause=function(){this.stop()};b.resume=function(){this.$1=Date.now()-this.getTime(),this.$2=null};b.getTime=function(){var a,b=this.$1;if(b==null)return 0;a=(a=this.$2)!=null?a:Date.now();return a-b};return a}();f["default"]=a}),66);
__d("WAPttComposerScaleWaveform",["invariant"],(function(a,b,c,d,e,f,g,h){function a(a,b){if(b===a.length)return a;if(b===0)return[];if(a.length===0)return new Array(b).fill(0);return b>a.length?i(a,b):j(a,b)}function i(a,b){b>a.length||h(0,75746,b,a.length);var c;if(a.length===1)c=0;else{var d=(b-a.length)/(a.length-1);c=1/(1+d)}d=[];b>=1&&d.push(a[0]);for(var e=1;e<b-1;e++){var f=e*c,g=Math.floor(f),i=f-g;d.push(k(a[g],a[Math.ceil(f)],i))}b>=2&&d.push(a[a.length-1]);return d}function j(a,b){b<a.length||h(0,75747,b,a.length);var c=[];b=b/a.length;var d=0,e=0,f=0;for(var a=a,g=Array.isArray(a),i=0,a=g?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var j;if(g){if(i>=a.length)break;j=a[i++]}else{i=a.next();if(i.done)break;j=i.value}j=j;d+=j;f+=1;e+=b;e>=1&&(c.push(d/f),f=0,d=0,e-=1)}f>0&&c.push(d/f);return c}function k(a,b,c){return a+(b-a)*c}g["default"]=a}),98);
__d("WAStartAnimationLoop",[],(function(a,b,c,d,e,f){function a(a,b){b=(b=b)!=null?b:{};b=b.delay;var c=b===void 0?0:b,d,e,f;b=function(){e=!0,window.cancelAnimationFrame(d)};var g=function b(g){(f==null||g-f>=c)&&(a(g),f=g);if(e)return;d=window.requestAnimationFrame(b)};d=window.requestAnimationFrame(g);return b}f.startAnimationLoop=a}),66);
__d("WAPttComposerWaveformRecorder",["WANullthrows","WAPttComposerRecorderPollableTimer","WAPttComposerScaleWaveform","WAStartAnimationLoop"],(function(a,b,c,d,e,f,g){a=function(){function a(a,b){var d=this;this.$2=new(c("WAPttComposerRecorderPollableTimer"))();this.$3=[];this.$4=[];this.$5=0;this.$10=function(){d.$5=Math.max(d.$5,d.$11());var a=d.$3.length/d.$1;a=Math.floor((d.getDuration()-a)*d.$1);if(a===0)return;for(var b=0;b<a;b++)d.$3.push(d.$5);d.$5=0};this.$12=0;this.$7=h(a);a.connect(this.$7);this.$1=b}var b=a.prototype;b.start=function(){this.$2.start(),this.$9()};b.stop=function(){this.$2.stop(),this.$6==null?void 0:this.$6()};b.pause=function(){this.$2.pause(),this.$6==null?void 0:this.$6()};b.resume=function(){this.$2.resume(),this.$9()};b.$9=function(){this.$6=d("WAStartAnimationLoop").startAnimationLoop(this.$10)};b.$11=function(){var a,b=c("WANullthrows")(this.$7);this.$8=(a=this.$8)!=null?a:new Uint8Array(b.frequencyBinCount);a=this.$8;b.getByteFrequencyData(a);return Math.max.apply(Math,Array.from(a))/255};b.commitSamples=function(a){a=Math.floor(a*this.$1);a=a-this.$4.length;var b=this.$3.length-this.$12;if(a===0||b===0)return;b=this.$3.slice(this.$12,this.$3.length);b=c("WAPttComposerScaleWaveform")(b,a);for(var a=b,b=Array.isArray(a),d=0,a=b?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(b){if(d>=a.length)break;e=a[d++]}else{d=a.next();if(d.done)break;e=d.value}e=e;this.$4.push(e)}this.$12=this.$3.length};b.getSamples=function(){return this.$3};b.getDuration=function(){var a;a=(a=this.$2.getTime())!=null?a:0;return a/1e3};b.getCorrectedSamples=function(){return this.$4};return a}();function h(a){a=a.context.createAnalyser();a.fftSize=32;a.smoothingTimeConstant=0;a.minDecibels=-60;a.maxDecibels=-10;return a}g["default"]=a}),98);
__d("WAPttComposerRecorder",["WAPttComposerOpusRecorder","WAPttComposerWaveformRecorder","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){a=function(){function a(a){var b=this;this._handleOpusRecorderDuration=function(){b._waveformRecorder.commitSamples(b.getDuration()),b._onDuration==null?void 0:b._onDuration(b.getDuration())};this._onDuration=a.onDuration;this._opusRecorder=new(d("WAPttComposerOpusRecorder").OpusRecorder)({createStream:a.createStream,onDuration:this._handleOpusRecorderDuration,onPage:function(b,c){a.onPage==null?void 0:a.onPage(b,c)}});this._waveformRecorder=new(c("WAPttComposerWaveformRecorder"))(this._opusRecorder.getMonitorNode(),a.waveformSampleRate)}var e=a.prototype;e.start=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=(yield this._opusRecorder.start());if(!a)return!1;this._waveformRecorder.start();return!0});function c(){return a.apply(this,arguments)}return c}();e.stop=function(){this._opusRecorder.stop(),this._waveformRecorder.stop()};e.pause=function(){this._opusRecorder.pause(),this._waveformRecorder.pause()};e.resume=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=(yield this._opusRecorder.resume());if(!a)return!1;this._waveformRecorder.resume();return!0});function c(){return a.apply(this,arguments)}return c}();e.getDuration=function(){return this._opusRecorder.getDuration()};e.getPreciseDuration=function(){var a;return(a=this._waveformRecorder.getDuration())!=null?a:0};e.getLiveWaveformSamples=function(){return this._waveformRecorder.getSamples()};e.getCorrectedWaveformSamples=function(){return this._waveformRecorder.getCorrectedSamples()};e.getPartialRecording=function(){return this._opusRecorder.getPartialRecording()};e.getCompleteRecording=function(){return this._opusRecorder.getCompleteRecording()};return a}();g["default"]=a}),98);
__d("MWPUseVoiceRecorderV2",["MWPAudioPlayerLabels","Promise","WAPttComposerRecorder","WATagsLogger","clearTimeout","emptyFunction","err","react","setTimeout","useIsMountedRef","usePrevious"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["PTT recording stop Error ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["PTT recording start Error ",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["PTT recording start successfully"]);l=function(){return a};return a}var m=i||d("react"),n=m.useCallback,o=m.useEffect,p=m.useReducer,q=m.useRef,r=d("WATagsLogger").TAGS(["MWPUseVoiceRecorderV2"]),s=8.5;function a(a){switch(a.stage){case"Unopen":case"Recording":return!1;case"Recorded":case"Playing":return!0}}function e(a){switch(a.stage){case"Unopen":case"Recording":return!1;case"Recorded":case"Playing":return!0}}function f(a){switch(a.stage){case"Unopen":return 0;case"Recording":return a.duration;case"Recorded":case"Playing":return Math.max(a.duration-a.currentTime,0)}}function t(a){switch(a.stage){case"Unopen":return 0;case"Recording":return a.recordingTimeout;case"Recorded":case"Playing":return a.duration}}function u(a){switch(a.stage){case"Unopen":case"Recording":return;case"Recorded":case"Playing":return a.currentTime}}function v(a){switch(a.stage){case"Unopen":case"Recorded":return!1;case"Recording":case"Playing":return!0}}function w(a){if(a.stage==="Recorded")return a.currentTime===0;else return!1}function x(a){switch(a.stage){case"Recording":return d("MWPAudioPlayerLabels").stopLabel;case"Unopen":case"Recorded":return d("MWPAudioPlayerLabels").playLabel;case"Playing":return d("MWPAudioPlayerLabels").pauseLabel}}function y(a,b){switch(b.type){case"Start":return{duration:0,mediaStream:b.mediaStream,recordingTimeout:b.recordingTimeout,stage:"Recording"};case"Toggle":switch(a.stage){case"Unopen":return a;case"Recording":return{currentTime:0,duration:a.duration,stage:"Recorded"};case"Recorded":return{currentTime:a.currentTime,duration:a.duration,stage:"Playing"};case"Playing":return{currentTime:a.currentTime,duration:a.duration,stage:"Recorded"}}break;case"UpdateDuration":var c=b.duration;switch(a.stage){case"Unopen":return a;case"Recording":return{duration:c,mediaStream:a.mediaStream,recordingTimeout:a.recordingTimeout,stage:"Recording"};case"Recorded":return{currentTime:a.currentTime,duration:c,stage:"Recorded"};case"Playing":return{currentTime:a.currentTime,duration:c,stage:"Playing"}}break;case"UpdateTime":c=b.currentTime;switch(a.stage){case"Unopen":case"Recording":return a;case"Recorded":var d=a.duration;return c===d?{currentTime:0,duration:d,stage:"Recorded"}:{currentTime:c,duration:d,stage:"Recorded"};case"Playing":d=a.duration;return c===d?{currentTime:0,duration:d,stage:"Recorded"}:{currentTime:c,duration:d,stage:"Playing"}}break;case"RecordingTimeout":return{currentTime:0,duration:b.recordingTimeout,stage:"Recorded"};case"Reset":return{stage:"Unopen"}}}var z={stage:"Unopen"};function A(a,d,e){a===void 0&&(a=60);d===void 0&&(d=c("emptyFunction"));e===void 0&&(e=c("emptyFunction"));var f=p(y,z),g=f[0],i=f[1],m=c("useIsMountedRef")(),t=q(),u=q(),v=q(),w=q(),x=q(c("emptyFunction")),A=n(function(a){var b=a[0],c=a[1];if(!m.current)return;var d=new File([b],"voice-clip.ogg",{type:"audio/ogg"});a=URL.createObjectURL(d);v.current=a;var e=new Audio(a);e.addEventListener("canplay",function(){u.current=e;var a=e.duration;i({duration:a,type:"UpdateDuration"});var b={amplitudes:c,sampling_freq:s};a={duration:a,file:d,waveformData:b};w.current=a;x.current(a)});e.addEventListener("timeupdate",function(){var a;a=(a=u.current)==null?void 0:a.currentTime;a!=null&&i({currentTime:a,type:"UpdateTime"})});e.addEventListener("durationchange",function(){var a;a=(a=u.current)==null?void 0:a.duration;a!=null&&!Number.isNaN(a)&&i({duration:a,type:"UpdateDuration"})})},[m]);o(function(){if(g.stage!=="Recording")return;d();var a=g.mediaStream;void (h||(h=b("Promise"))).resolve().then(function(){var d=new(c("WAPttComposerRecorder"))({createStream:function(){return(h||(h=b("Promise"))).resolve(a)},waveformSampleRate:s});t.current=d;return d.start()}).then(function(a){if(a){r.LOG(l());return}return(h||(h=b("Promise"))).reject(c("err")("PTT recording start failed"))})["catch"](function(a){r.ERROR(k(),a)});return function(){var a;(a=t.current)==null?void 0:a.stop()}},[d,g.mediaStream,g.stage]);var B=c("usePrevious")(g);o(function(){if((B==null?void 0:B.stage)==="Recording"&&g.stage==="Recorded"){var a=t.current;if(a==null)return;a.stop();void (h||(h=b("Promise"))).all([a.getCompleteRecording(),a.getCorrectedWaveformSamples()]).then(function(a){var b=a[0];a=a[1];A([b,a])})["catch"](function(a){r.ERROR(j(),a)})}},[A,B==null?void 0:B.stage,g.stage]);o(function(){if(g.stage!=="Recording")return;var b=Date.now(),d,e=function e(){var f=(Date.now()-b)/1e3;if(f>=a){i({recordingTimeout:a,type:"RecordingTimeout"});return}i({duration:f,type:"UpdateDuration"});d=c("setTimeout")(e,1e3)};d=c("setTimeout")(e,1e3);return function(){d!=null&&c("clearTimeout")(d)}},[a,g.stage]);f=n(function(b){i({mediaStream:b,recordingTimeout:a,type:"Start"})},[a]);var C=n(function(){var a;i({type:"Reset"});(a=u.current)==null?void 0:a.pause();u.current=void 0;w.current=void 0;a=v.current;a!=null&&(URL.revokeObjectURL(a),v.current=void 0)},[]),D=n(function(){var a=function(){i({type:"Toggle"})},b=u.current;if(b==null){a();return}switch(g.stage){case"Unopen":case"Recording":a();break;case"Recorded":b.play().then(a)["catch"](e);break;case"Playing":b.pause();a();break}},[e,g.stage]),E=n(function(){return new(h||(h=b("Promise")))(function(a){var b=w.current;if(b!=null)return a(b);x.current=a;if(g.stage==="Recording")return D()})},[g,D]);return{audioEl:u,getVoiceClip:E,reset:C,start:f,state:g,toggle:D}}g.showScreenReaderLabel=a;g.hasScrubber=e;g.getTimerTime=f;g.getDuration=t;g.getCurrentTime=u;g.isProgressing=v;g.isCompleted=w;g.getPlaybackLabel=x;g.useVoiceRecorder=A}),98);
__d("MWV2ChatHotlikeButtonAnimation.react",["BaseView.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||(h=d("react"))).c,j=h;b=150;e=2500;f=b+e;d={medium:.7,small:.35};var k={almostPoppingShakeAnimationHotlike:{animationDelay:"x1uhpyvt",animationDuration:"xtsvl71",animationFillMode:"x10e4vud",animationIterationCount:"xa4qsjk",animationName:"x1kol0s",animationTimingFunction:"x1fjjn57",transformOrigin:"xhmqdbg",$$css:!0},animationBox:{alignItems:"x6s0dn4",display:"x78zum5",height:"x1qx5ct2",justifyContent:"xl56j7k",pointerEvents:"x47corl",width:"xw4jnvo",$$css:!0},growAnimationHotlike:{animationDelay:"xmmqq2k",animationDuration:"x1h5mrz9",animationFillMode:"x10e4vud",animationIterationCount:"x1v7wizp",animationName:"x1kvv0nh",animationTimingFunction:"x1fjjn57",transformOrigin:"xhmqdbg",$$css:!0},shakeAnimationHotlike:{animationDelay:"xmmqq2k",animationDuration:"xtsvl71",animationFillMode:"x10e4vud",animationIterationCount:"xa4qsjk",animationName:"x1dogid2",animationTimingFunction:"x1fjjn57",transformOrigin:"xhmqdbg",$$css:!0}};function a(a){var b=i(12),d=a.animationsContainerRef,e=a.children;a=a.shouldShowGrowAnimation;var f=a&&k.growAnimationHotlike,g=a&&k.shakeAnimationHotlike;a=a&&k.almostPoppingShakeAnimationHotlike;var h;b[0]!==a?(h=[k.animationBox,a],b[0]=a,b[1]=h):h=b[1];b[2]!==h||b[3]!==e?(a=j.jsx(c("BaseView.react"),{xstyle:h,children:e}),b[2]=h,b[3]=e,b[4]=a):a=b[4];b[5]!==g||b[6]!==a?(h=j.jsx(c("BaseView.react"),{xstyle:g,children:a}),b[5]=g,b[6]=a,b[7]=h):h=b[7];b[8]!==d||b[9]!==f||b[10]!==h?(e=j.jsx(c("BaseView.react"),{ref:d,xstyle:f,children:h}),b[8]=d,b[9]=f,b[10]=h,b[11]=e):e=b[11];return e}g.TOTAL_GROW_ANIMATION_TIME_MS=f;g.EMOJI_SIZE_PERCENTAGE_THRESHOLDS=d;g.MWV2ChatHotlikeButtonAnimation=a}),98);
__d("useMWV2ChatHotlikeButton",["I64","LSHotEmojiSize","LSIntEnum","MWV2ChatHotlikeButtonAnimation.react","MessengerWebUXLogger","QPLUserFlow","StickerConstants","clearTimeout","gkx","isStringNullOrEmpty","qex","qpl","react","requireDeferred","setTimeout","useDebouncedComet"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;b=h||d("react");b.useCallback;var k=b.useEffect,l=b.useRef,m=b.useState,n=b.c,o=c("requireDeferred")("MWV2ChatHotlikeSounds").__setRef("useMWV2ChatHotlikeButton"),p=500,q=50,r=(e={},e[c("LSHotEmojiSize").NONE]=(i||(i=d("I64"))).of_string(c("StickerConstants").HOT_LIKE_SMALL_STICKER_ID),e[c("LSHotEmojiSize").SMALL]=i.of_string(c("StickerConstants").HOT_LIKE_SMALL_STICKER_ID),e[c("LSHotEmojiSize").MEDIUM]=i.of_string(c("StickerConstants").HOT_LIKE_MEDIUM_STICKER_ID),e[c("LSHotEmojiSize").LARGE]=i.of_string(c("StickerConstants").HOT_LIKE_LARGE_STICKER_ID),e);function s(a){if(a<=d("MWV2ChatHotlikeButtonAnimation.react").EMOJI_SIZE_PERCENTAGE_THRESHOLDS.small)return c("LSHotEmojiSize").SMALL;else if(a<=d("MWV2ChatHotlikeButtonAnimation.react").EMOJI_SIZE_PERCENTAGE_THRESHOLDS.medium)return c("LSHotEmojiSize").MEDIUM;else return c("LSHotEmojiSize").LARGE}function t(){o.onReadyImmediately(function(a){return a.start()})}function u(){o.onReadyImmediately(function(a){return a.pop()})}function v(a){o.onReadyImmediately(function(b){return b.snap(a)})}function a(a,b,e,f){var g=n(29),h;g[0]!==a?(h=c("isStringNullOrEmpty")(a),g[0]=a,g[1]=h):h=g[1];var i=h;h=m(!1);var o=h[0],w=h[1],x=l(null),y=l(null),z=l(!1),A=c("MessengerWebUXLogger").useInteractionLogger();g[2]!==A||g[3]!==i||g[4]!==e?(h=function(a){A==null?void 0:A({eventName:i?"send_hot_like":"send_hot_emoji",extraData:{size:a.toString()},threadType:e})},g[2]=A,g[3]=i,g[4]=e,g[5]=h):h=g[5];var B=h;g[6]!==i||g[7]!==b||g[8]!==a||g[9]!==f||g[10]!==B?(h=function(c){!i?b(a,void 0,void 0,(j||(j=d("LSIntEnum"))).ofNumber(c),void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,f):b(void 0,void 0,r[c],(j||(j=d("LSIntEnum"))).ofNumber(c),void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,f),B(c)},g[6]=i,g[7]=b,g[8]=a,g[9]=f,g[10]=B,g[11]=h):h=g[11];var C=h;g[12]===Symbol["for"]("react.memo_cache_sentinel")?(h={leading:!0,wait:q},g[12]=h):h=g[12];var D=c("useDebouncedComet")(C,h);g[13]===Symbol["for"]("react.memo_cache_sentinel")?(h=function(){c("clearTimeout")(x.current),x.current=null},g[13]=h):h=g[13];var E=h,F;g[14]===Symbol["for"]("react.memo_cache_sentinel")?(h=function(){return function(){E()}},F=[],g[14]=h,g[15]=F):(h=g[14],F=g[15]);k(h,F);g[16]!==o?(h=function(){return z.current===!0&&(!o||x.current==null)},g[16]=o,g[17]=h):h=g[17];var G=h;g[18]===Symbol["for"]("react.memo_cache_sentinel")?(F=function(){z.current===!0&&(c("QPLUserFlow").endCancel(c("qpl")._(25311430,"2261"),{annotations:{string:{reason:"hover-out"}}}),u()),z.current=!1,w(!1),E()},g[18]=F):F=g[18];h=F;g[19]===Symbol["for"]("react.memo_cache_sentinel")?(F=function(){if(c("gkx")("23249")||c("qex")._("256")!==!0)return;c("QPLUserFlow").start(c("qpl")._(25311430,"2261"));z.current=!0;w(!0);t();x.current=c("setTimeout")(function(){u(),w(!1),x.current=null,c("QPLUserFlow").endCancel(c("qpl")._(25311430,"2261"),{annotations:{string:{reason:"long-press-pop"}}})},d("MWV2ChatHotlikeButtonAnimation.react").TOTAL_GROW_ANIMATION_TIME_MS+p)},g[19]=F):F=g[19];F=F;var H;g[20]===Symbol["for"]("react.memo_cache_sentinel")?(H=function(){var a;a=(a=y.current)==null?void 0:a.getAnimations()[0];a=a==null?void 0:a.currentTime;return a!=null?a/d("MWV2ChatHotlikeButtonAnimation.react").TOTAL_GROW_ANIMATION_TIME_MS:0},g[20]=H):H=g[20];var I=H;g[21]!==D||g[22]!==C||g[23]!==G||g[24]!==i?(H=function(){if(c("gkx")("23249")||c("qex")._("256")!==!0){c("gkx")("7245")?D(c("LSHotEmojiSize").SMALL):C(c("LSHotEmojiSize").SMALL);return}if(G()){z.current=!1;return}E();w(!1);z.current=!1;var a=I();a=s(a);v(a);c("gkx")("7245")?D(a):C(a);c("QPLUserFlow").endSuccess(c("qpl")._(25311430,"2261"),{annotations:{bool:{isDefaultLike:i},"int":{size:a}}})},g[21]=D,g[22]=C,g[23]=G,g[24]=i,g[25]=H):H=g[25];H=H;g[26]!==H||g[27]!==o?(h={animationsContainerRef:y,handleHoverOut:h,handleOnPress:H,handlePressIn:F,shouldShowGrowAnimation:o},g[26]=H,g[27]=o,g[28]=h):h=g[28];return h}g["default"]=a}),98);
__d("MWV2ChatHotlikeButtonV2.react",["fbt","BaseView.react","CometEmoji.react","EmojiRenderer","MWLikeSvgIcon.react","MWV2ChatHotlikeButtonAnimation.react","MWXPressable.react","MWXTooltip.react","gkx","isStringNullOrEmpty","react","useMWV2ChatHotlikeButton"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||(i=d("react"));b=i;b.useCallback;var k=b.c;e=20;var l=56;e/l;var m={adjustEmojiSize:{transform:"xtzsbya",$$css:!0},customEmojiButtonFDS:{marginStart:"xsgj6o6",marginEnd:"xw3qccf",marginLeft:null,marginRight:null,paddingTop:"x1y1aw1k",paddingBottom:"xwib8y2",paddingStart:"xcu9agk",paddingEnd:"x2qib4z",paddingLeft:null,paddingRight:null,$$css:!0},customEmojiButtonMDS:{marginStart:"x1i64zmx",marginEnd:"x1emribx",marginLeft:null,marginRight:null,paddingTop:"x1y1aw1k",paddingBottom:"xwib8y2",paddingStart:"xcu9agk",paddingEnd:"x2qib4z",paddingLeft:null,paddingRight:null,$$css:!0},hotlikeButtonFDS:{marginStart:"xsgj6o6",marginEnd:"xw3qccf",marginLeft:null,marginRight:null,paddingTop:"x1y1aw1k",paddingEnd:"x1sxyh0",paddingBottom:"xwib8y2",paddingStart:"xurb0ha",$$css:!0},hotlikeButtonMDS:{marginStart:"x1i64zmx",marginEnd:"x1emribx",marginLeft:null,marginRight:null,paddingTop:"x1y1aw1k",paddingEnd:"x1sxyh0",paddingBottom:"xwib8y2",paddingStart:"xurb0ha",$$css:!0}},n=h._("__JHASH__OzQk4bc7gK8__JHASH__");function a(a){var b=k(42),e=a.customEmoji,f=a.disabled,g=a.onSendMessage,i=a.shouldHideTooltip;a=a.threadType;f=f===void 0?!1:f;i=i===void 0?!1:i;g=c("useMWV2ChatHotlikeButton")(e,g,a,"MWV2ChatHotlikeButtonV2");a=g.animationsContainerRef;var q=g.handleHoverOut,r=g.handleOnPress,s=g.handlePressIn;g=g.shouldShowGrowAnimation;var t;b[0]!==e?(t=function(a){if(c("isStringNullOrEmpty")(e))return;var b=d("EmojiRenderer").parse(e).map(function(a){return a.emoji});if(b.length!==1)return j.jsx("span",{children:e});b=b[0];return a===l?j.jsx(c("BaseView.react"),{xstyle:m.adjustEmojiSize,children:j.jsx(c("CometEmoji.react"),{emoji:b,size:a})}):j.jsx(c("CometEmoji.react"),{emoji:b,size:a})},b[0]=e,b[1]=t):t=b[1];t=t;if(!c("isStringNullOrEmpty")(e)){var u;b[2]!==e?(u=h._("__JHASH__tAqfCk1edp7__JHASH__",[h._param("emoji",e)]),b[2]=e,b[3]=u):u=b[3];u=u;var v=f||g,w;b[4]!==t?(w=t(l),b[4]=t,b[5]=w):w=b[5];var x;b[6]!==a||b[7]!==g||b[8]!==w?(x=j.jsx(d("MWV2ChatHotlikeButtonAnimation.react").MWV2ChatHotlikeButtonAnimation,{animationsContainerRef:a,shouldShowGrowAnimation:g,children:w}),b[6]=a,b[7]=g,b[8]=w,b[9]=x):x=b[9];b[10]!==u||b[11]!==f||b[12]!==g||b[13]!==q||b[14]!==r||b[15]!==s||b[16]!==v||b[17]!==x?(w=j.jsx(c("MWXPressable.react"),{"aria-label":u,disabled:f,hideFocusOverlay:g,hideHoverOverlay:g,onHoverOut:q,onPress:r,onPressIn:s,overlayDisabled:v,overlayRadius:"50%",testid:void 0,xstyle:p,children:x}),b[10]=u,b[11]=f,b[12]=g,b[13]=q,b[14]=r,b[15]=s,b[16]=v,b[17]=x,b[18]=w):w=b[18];u=w;if(i)return u;b[19]!==t?(v=h._("__JHASH__CsSxx_HAT5f__JHASH__",[h._param("emoji",t(16))]),b[19]=t,b[20]=v):v=b[20];x=v;w=g?null:x;b[21]!==w||b[22]!==u?(t=j.jsx(c("MWXTooltip.react"),{align:"middle",label:n,position:"above",tooltip:w,children:u}),b[21]=w,b[22]=u,b[23]=t):t=b[23];return t}v=f||g;b[24]===Symbol["for"]("react.memo_cache_sentinel")?(x="xsrhx6k",b[24]=x):x=b[24];w=f?void 0:"var(--chat-composer-button-color)";b[25]!==w?(u=j.jsx(c("MWLikeSvgIcon.react"),{className:x,color:w,size:20}),b[25]=w,b[26]=u):u=b[26];b[27]!==a||b[28]!==g||b[29]!==u?(t=j.jsx(d("MWV2ChatHotlikeButtonAnimation.react").MWV2ChatHotlikeButtonAnimation,{animationsContainerRef:a,shouldShowGrowAnimation:g,children:u}),b[27]=a,b[28]=g,b[29]=u,b[30]=t):t=b[30];b[31]!==f||b[32]!==g||b[33]!==q||b[34]!==r||b[35]!==s||b[36]!==v||b[37]!==t?(x=j.jsx(c("MWXPressable.react"),{"aria-label":n,disabled:f,hideFocusOverlay:g,hideHoverOverlay:g,onHoverOut:q,onPress:r,onPressIn:s,overlayDisabled:v,overlayRadius:"50%",testid:void 0,xstyle:o,children:t}),b[31]=f,b[32]=g,b[33]=q,b[34]=r,b[35]=s,b[36]=v,b[37]=t,b[38]=x):x=b[38];w=x;if(i)return w;a=g?null:n;b[39]!==a||b[40]!==w?(u=j.jsx(c("MWXTooltip.react"),{align:"middle",label:n,position:"above",tooltip:a,children:w}),b[39]=a,b[40]=w,b[41]=u):u=b[41];return u}function o(){return[c("gkx")("23219")?m.hotlikeButtonMDS:m.hotlikeButtonFDS]}function p(){return[c("gkx")("23219")?m.customEmojiButtonMDS:m.customEmojiButtonFDS]}g["default"]=a}),226);
__d("MWV2ChatRTCButtonsBaseButton.react",["MWChatHeaderActionButton.react","MWXThreadThemeColor","gkx","react","useMWIsOffline"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||(h=d("react"))).c,j=h;function a(a){var b=i(10),e=a.disabled,f=a.icon,g=a.label,h=a.loggingEvent,k=a.onPress,l=a.size;a=a.testid;var m=c("useMWIsOffline")(),n;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(n=d("MWXThreadThemeColor").mwxThreadThemeColor("var(--mwp-header-button-color)"),b[0]=n):n=b[0];e=m||((e=e)!=null?e:!1);m=m?void 0:g;b[1]!==e||b[2]!==f||b[3]!==g||b[4]!==h||b[5]!==k||b[6]!==l||b[7]!==a||b[8]!==m?(n=j.jsx(c("MWChatHeaderActionButton.react"),{color:n,disabled:e,icon:f,label:g,loggingEvent:h,onPress:k,size:l,testid:void 0,tooltipLabel:m,tooltipPosition:c("gkx")("23219")?"below":"above"}),b[1]=e,b[2]=f,b[3]=g,b[4]=h,b[5]=k,b[6]=l,b[7]=a,b[8]=m,b[9]=n):n=b[9];return n}g["default"]=a}),98);
__d("MWV2ChatRTCButtonsAudio.react",["fbt","MWStartRTCCallUtils","MWV2ChatRTCButtonsBaseButton.react","MWXIconPhone","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=(i||(i=d("react"))).c,k=i;function a(a){var b=j(7),e=a.canCall,f=a.size;a=a.startAudioCall;if(e===d("MWStartRTCCallUtils").CanCallResult.VOICE_UNSUPPORTED)return null;var g;b[0]!==e?(g=e===d("MWStartRTCCallUtils").CanCallResult.SECURE_VOICE_UNSUPPORTED?h._("__JHASH__AmOrybl4tkj__JHASH__"):h._("__JHASH__7OlJstElKZQ__JHASH__"),b[0]=e,b[1]=g):g=b[1];g=g;e=e!==d("MWStartRTCCallUtils").CanCallResult.VOICE_SUPPORTED;var i;b[2]!==e||b[3]!==g||b[4]!==a||b[5]!==f?(i=k.jsx(c("MWV2ChatRTCButtonsBaseButton.react"),{disabled:e,icon:c("MWXIconPhone"),label:g,loggingEvent:"start_audio_call",onPress:a,size:f,testid:void 0}),b[2]=e,b[3]=g,b[4]=a,b[5]=f,b[6]=i):i=b[6];return i}g["default"]=a}),226);
__d("MWXIconCamcorder",["MWXSvgIcon","SVGIcon","cr:12350","gkx"],(function(a,b,c,d,e,f,g){"use strict";a=d("MWXSvgIcon").mwxSvgIcon(d("SVGIcon").svgIcon(b("cr:12350")),c("gkx")("23219"));g["default"]=a}),98);
__d("MWV2ChatRTCButtonsJoinExistingChat.react",["fbt","I64","LSIntEnum","LSRtcCallState","MWXCircleButton.react","MWXIconCamcorder","MWXIconPhone","MWXThreadThemeColor","MWXTooltip.react","emptyFunction","gkx","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l=(i||(i=d("react"))).c,m=i;function a(a){var b=l(15),e=a.ongoingCallState,f=a.size,g=a.startAudioCall,i=a.startVideoCall;if((j||(j=d("I64"))).equal(e,(k||(k=d("LSIntEnum"))).ofNumber(c("LSRtcCallState").NO_ONGOING_CALL)))return null;b[0]!==g||b[1]!==i?(a=function(a){if((j||(j=d("I64"))).equal(a,(k||(k=d("LSIntEnum"))).ofNumber(c("LSRtcCallState").AUDIO_GROUP_CALL))||(j||(j=d("I64"))).equal(a,(k||(k=d("LSIntEnum"))).ofNumber(c("LSRtcCallState").AUDIO_1TO1_CALL)))return[h._("__JHASH__Jezj_QnZwHq__JHASH__"),c("MWXIconPhone"),g];else if((j||(j=d("I64"))).equal(a,(k||(k=d("LSIntEnum"))).ofNumber(c("LSRtcCallState").VIDEO_GROUP_CALL))||(j||(j=d("I64"))).equal(a,(k||(k=d("LSIntEnum"))).ofNumber(c("LSRtcCallState").VIDEO_1TO1_CALL)))return[h._("__JHASH__LWBq4gDrf_a__JHASH__"),c("MWXIconCamcorder"),i];return["",c("MWXIconPhone"),c("emptyFunction")]},b[0]=g,b[1]=i,b[2]=a):a=b[2];a=a;var n;b[3]!==a||b[4]!==e?(n=a(e),b[3]=a,b[4]=e,b[5]=n):n=b[5];a=n;e=a[0];n=a[1];a=a[2];var o;b[6]===Symbol["for"]("react.memo_cache_sentinel")?(o=d("MWXThreadThemeColor").mwxThreadThemeColor("var(--mwp-header-button-color)"),b[6]=o):o=b[6];b[7]!==n||b[8]!==e||b[9]!==a||b[10]!==f?(o=m.jsx(c("MWXCircleButton.react"),{color:o,icon:n,label:e,onPress:a,size:f,testid:void 0}),b[7]=n,b[8]=e,b[9]=a,b[10]=f,b[11]=o):o=b[11];b[12]!==e||b[13]!==o?(n=m.jsx(c("MWXTooltip.react"),{align:"middle",position:c("gkx")("23219")?"below":"above",tooltip:e,children:o}),b[12]=e,b[13]=o,b[14]=n):n=b[14];return n}g["default"]=a}),226);
__d("MWV2ChatRTCButtonsVideo.react",["fbt","MWStartRTCCallUtils","MWV2ChatRTCButtonsBaseButton.react","MWXIconCamcorder","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=(i||(i=d("react"))).c,k=i;function a(a){var b=j(7),e=a.canCall,f=a.size;a=a.startVideoCall;if(e===d("MWStartRTCCallUtils").CanCallResult.VIDEO_UNSUPPORTED)return null;var g;b[0]!==e?(g=e===d("MWStartRTCCallUtils").CanCallResult.SECURE_VIDEO_UNSUPPORTED?h._("__JHASH__peNbbKoq33W__JHASH__"):h._("__JHASH__BhmiwbAyMN2__JHASH__"),b[0]=e,b[1]=g):g=b[1];g=g;e=e!==d("MWStartRTCCallUtils").CanCallResult.VIDEO_SUPPORTED;var i;b[2]!==e||b[3]!==g||b[4]!==a||b[5]!==f?(i=k.jsx(c("MWV2ChatRTCButtonsBaseButton.react"),{disabled:e,icon:c("MWXIconCamcorder"),label:g,loggingEvent:"start_video_chat",onPress:a,size:f,testid:void 0}),b[2]=e,b[3]=g,b[4]=a,b[5]=f,b[6]=i):i=b[6];e=i;return e}g["default"]=a}),226);
__d("MWV2ChatRTCButtons.react",["I64","LSIntEnum","LSRtcCallState","MWStartRTCCallUtils","MWV2ChatRTCButtonsAudio.react","MWV2ChatRTCButtonsJoinExistingChat.react","MWV2ChatRTCButtonsVideo.react","react","useShouldTryWithMessengerDesktop"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=(h||(h=d("react"))).c,l=h;function m(a){return a}function a(a){var b=k(25),e=a.canAudioCall,f=a.canVideoCall,g=a.ongoingCallState,h=a.renderContainer,n=a.size,o=a.startWebAudioCall,p=a.startWebVideoCall;a=a.threadKey;h=h===void 0?m:h;n=n===void 0?28:n;var q=c("useShouldTryWithMessengerDesktop")(),r=d("MWStartRTCCallUtils").useStartMessengerDesktopCall(a,"video",p);a=d("MWStartRTCCallUtils").useStartMessengerDesktopCall(a,"audio",o);r=q?r:p;p=q?a:o;if(e===d("MWStartRTCCallUtils").CanCallResult.VOICE_UNSUPPORTED&&f===d("MWStartRTCCallUtils").CanCallResult.VIDEO_UNSUPPORTED)return null;if(!(i||(i=d("I64"))).equal(g,(j||(j=d("LSIntEnum"))).ofNumber(c("LSRtcCallState").NO_ONGOING_CALL))){b[0]!==g||b[1]!==n||b[2]!==p||b[3]!==r?(q=l.jsx(c("MWV2ChatRTCButtonsJoinExistingChat.react"),{ongoingCallState:g,size:n,startAudioCall:p,startVideoCall:r}),b[0]=g,b[1]=n,b[2]=p,b[3]=r,b[4]=q):q=b[4];b[5]!==h||b[6]!==q?(a=h(q),b[5]=h,b[6]=q,b[7]=a):a=b[7];return a}b[8]!==e||b[9]!==n||b[10]!==p?(o=l.jsx(c("MWV2ChatRTCButtonsAudio.react"),{canCall:e,size:n,startAudioCall:p}),b[8]=e,b[9]=n,b[10]=p,b[11]=o):o=b[11];b[12]!==h||b[13]!==o?(g=h(o),b[12]=h,b[13]=o,b[14]=g):g=b[14];b[15]!==f||b[16]!==n||b[17]!==r?(q=l.jsx(c("MWV2ChatRTCButtonsVideo.react"),{canCall:f,size:n,startVideoCall:r}),b[15]=f,b[16]=n,b[17]=r,b[18]=q):q=b[18];b[19]!==h||b[20]!==q?(a=h(q),b[19]=h,b[20]=q,b[21]=a):a=b[21];b[22]!==g||b[23]!==a?(e=l.jsxs(l.Fragment,{children:[g,a]}),b[22]=g,b[23]=a,b[24]=e):e=b[24];return e}g["default"]=a}),98);
__d("MWV2ComposerStickerCommon",["fbt","qex"],(function(a,b,c,d,e,f,g,h){"use strict";b=h._("__JHASH__430IPCMJAf3__JHASH__");var i=["LAST_SELECTED_TAB","CUSTOM_PACK","AVATAR_PACK","STICKER_PACK"];function a(){return!c("qex")._("2947")?i:c("qex")._("3027")?[].concat(i,["SEARCH"]):["SEARCH"].concat(i)}g.LABEL=b;g.getTabListForSecureThreads=a}),226);
__d("useMWV2ComposerOnStickerSelect",["FBLogger","I64","LSShape","nullthrows","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i;b=h||d("react");b.useCallback;var j=b.c,k=(i||(i=d("I64"))).of_string("128");function l(a){return d("LSShape").ofRecord({preview_height:k,preview_url:a,preview_width:k})}function a(a,b,e){var f=j(4),g;f[0]!==b||f[1]!==e||f[2]!==a?(g=function(f,g){var h;h=(h=g.animated_uri)!=null?h:g.uri;g=(i||(i=d("I64"))).of_string(f);if(!Boolean(h))throw c("FBLogger")("messenger_web_media").mustfixThrow("Sticker URI is null when trying to send sticker message. (isSecure = %s, composer entrypoint = %s)",b.toString(),e);return a(void 0,void 0,g,void 0,void 0,b?c("nullthrows")(h):void 0,b?void 0:l(h),void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,e)},f[0]=b,f[1]=e,f[2]=a,f[3]=g):g=f[3];return g}g["default"]=a}),98);
__d("MWV2ComposerStickerButtonLegacy.react",["JSResourceForInteraction","MWChatComposerIcons","MWV2ComposerStickerCommon","MWXLazyPopoverTrigger.react","MWXPressable.react","MWXTooltip.react","MessengerWebUXLogger","gkx","react","useMWV2ComposerOnStickerSelect"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||(h=d("react"))).c,j=h,k=c("JSResourceForInteraction")("MWChatStickersFlyout.react").__setRef("MWV2ComposerStickerButtonLegacy.react"),l={buttonFDS:{paddingTop:"x1iorvi4",paddingEnd:"x150jy0e",paddingBottom:"xjkvuk6",paddingStart:"x1e558r4",$$css:!0},buttonMDS:{paddingTop:"x1y1aw1k",paddingEnd:"x1sxyh0",paddingBottom:"xwib8y2",paddingStart:"xurb0ha",$$css:!0}};function a(a){var b=i(12),e=a.color,f=a.disabled,g=a.isSecureThread,h=a.onSelectStickerPack;a=a.onSendMessage;a=c("useMWV2ComposerOnStickerSelect")(a,g,"MWV2ComposerStickerButtonLegacy");var m=c("MessengerWebUXLogger").useInteractionLogger(),n;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(n="x1fepime",b[0]=n):n=b[0];b[1]!==h||b[2]!==a||b[3]!==g?(n={className:n,onSelectStickerPack:h,onStickerSelect:a,shouldAlwaysShowAvatarPack:g,shouldHideDefaultPacks:g},b[1]=h,b[2]=a,b[3]=g,b[4]=n):n=b[4];b[5]!==f||b[6]!==m||b[7]!==e?(h=function(a,b,g,h,i,k,n){return j.jsx(c("MWXTooltip.react"),{align:"middle",forceInlineDisplay:!0,position:"above",tooltip:d("MWV2ComposerStickerCommon").LABEL,children:j.jsx(c("MWXPressable.react"),{"aria-label":d("MWV2ComposerStickerCommon").LABEL,disabled:f,onHoverIn:h,onHoverOut:i,onPress:function(){b(),m==null?void 0:m({eventName:"composer_open_sticker_picker"})},onPressIn:k,overlayRadius:"50%",ref:a,testid:void 0,xstyle:function(){return[c("gkx")("23219")?l.buttonMDS:l.buttonFDS]},children:j.jsx(d("MWChatComposerIcons").MWChatComposerIconsSticker,{fill:f?void 0:e,size:20})})})},b[5]=f,b[6]=m,b[7]=e,b[8]=h):h=b[8];b[9]!==n||b[10]!==h?(a=j.jsx(c("MWXLazyPopoverTrigger.react"),{align:"middle",disableAutoFlip:!0,popoverProps:n,popoverResource:k,position:"above",children:h}),b[9]=n,b[10]=h,b[11]=a):a=b[11];return a}g["default"]=a}),98);
__d("MWXIconArrowLeft",["MWXSvgIcon","SVGIcon","cr:12289","gkx"],(function(a,b,c,d,e,f,g){"use strict";a=d("MWXSvgIcon").mwxSvgIcon(d("SVGIcon").svgIcon(b("cr:12289")),c("gkx")("23219"));g["default"]=a}),98);
__d("MWXIconArrowRight",["MWXSvgIcon","SVGIcon","cr:12291","gkx"],(function(a,b,c,d,e,f,g){"use strict";a=d("MWXSvgIcon").mwxSvgIcon(d("SVGIcon").svgIcon(b("cr:12291")),c("gkx")("23219"));g["default"]=a}),98);
__d("MWXIconBell",["MWXSvgIcon","SVGIcon","cr:12321","gkx"],(function(a,b,c,d,e,f,g){"use strict";a=d("MWXSvgIcon").mwxSvgIcon(d("SVGIcon").svgIcon(b("cr:12321")),c("gkx")("23219"));g["default"]=a}),98);
__d("Query__lightspeed_data",["LSRelayContext","Promise","emptyFunction","promiseDone","relay-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){var e=new Map(),f=d("LSRelayContext").getContext(a);f instanceof(h||(h=b("Promise")))&&c("promiseDone")(f,function(a){f=a,e.forEach(function(a){return a()}),e.clear()});return{read:function(){return f instanceof(h||(h=b("Promise")))?d("relay-runtime").suspenseSentinel():{context:f,value:void 0}},subscribe:function(a){if(!(f instanceof(h||(h=b("Promise")))))return c("emptyFunction");var d={};e.set(d,a);return function(){e["delete"](d)}}}}g.lightspeed_data=a}),98);
__d("TetraMWChatComposerOverflowIcons.react",["MWChatChatButtonColorConstants","react","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||d("react"),k={icon:{display:"x1lliihq",forcedColorAdjust:"x1tzjh5l",$$css:!0}};a=function(a){var b=a.fill,e=a.size,f=a.title;a=a.xstyle;a=a===void 0?!1:a;return j.jsxs("svg",{className:(h||(h=c("stylex")))(k.icon,d("MWChatChatButtonColorConstants").styles.fillGrey,a),height:e.toString()+"px",viewBox:"0 0 40 42",width:e.toString()+"px",children:[j.jsx("title",{children:f}),j.jsx("rect",{fill:b,height:"7",rx:"2",transform:"rotate(-90 4.5 30.5)",width:"29",x:"-6.5",y:"26.5"}),j.jsx("rect",{fill:b,height:"7",rx:"2",transform:"rotate(-90 20.5 24.5)",width:"41",x:"3.5",y:"20.5"}),j.jsx("rect",{fill:b,height:"7",rx:"2",transform:"rotate(-90 36.5 35.5)",width:"19",x:"30.5",y:"31.5"})]})};b=function(a){var b=a.fill,e=a.size,f=a.title;a=a.xstyle;a=a===void 0?!1:a;return j.jsxs("svg",{className:(h||(h=c("stylex")))(k.icon,d("MWChatChatButtonColorConstants").styles.fillGrey,a),height:String(e)+"px",viewBox:"0 0 46 46",width:String(e)+"px",children:[j.jsx("title",{children:f}),j.jsx("path",{d:"M18 17.54v.92c0 1.79 1.75 3.26 4 3.49v-7.9c-2.25.23-4 1.7-4 3.49zM26 26.2v7.6c2.13-.5 4-1.94 4-3.34v-.92c0-1.4-1.87-2.84-4-3.34z",fill:b,transform:"translate(-1 -1)"}),j.jsx("path",{d:"M24 1a23 23 0 1023 23A23 23 0 0024 1zm10 29.46c0 3.95-4 6.83-8 7.42V40a2 2 0 01-4 0v-2.06c-4.43-.3-7.94-3.52-7.94-7.48a2 2 0 014 0c0 1.78 1.72 3.24 3.94 3.49V26c-4.46-.28-8-3.51-8-7.49v-.92c0-4 3.54-7.21 8-7.49V8a2 2 0 014 0v2.13c4 .63 7.09 3.71 7.09 7.41a2 2 0 01-4 0A3.74 3.74 0 0026 14.21v7.91c4 .59 8 3.47 8 7.42z",fill:b,transform:"translate(-1 -1)"})]})};e=function(a){var b=a.fill,e=a.size;a=a.title;return j.jsxs("svg",{className:(h||(h=c("stylex")))(k.icon,d("MWChatChatButtonColorConstants").styles.fillGrey,d("MWChatChatButtonColorConstants").styles.strokeGrey),height:e.toString()+"px",viewBox:"0 0 34 48",width:e.toString()+"px",children:[j.jsx("title",{children:a}),j.jsx("path",{d:"M17 37v9",fill:"none",stroke:b,strokeLinejoin:"round",strokeWidth:"4"}),j.jsx("path",{d:"M10 46h14",fill:"none",stroke:b,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"4px"}),j.jsx("path",{d:"M39 20v3.5A14.5 14.5 0 0124.5 38h-1A14.5 14.5 0 019 23.5V20",fill:"none",stroke:b,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"4px",transform:"translate(-7)"}),j.jsx("rect",{fill:b,height:"28",rx:"6.5",stroke:b,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"4",width:"14",x:"10",y:"2"})]})};g.PollsSVG=a;g.DollarSignSVG=b;g.MicrophoneSVG=e}),98);
__d("canMWAddMemberToGroupThread",["I64","LSIntEnum","LSThreadBitOffset"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a,b){if(b)return!1;b=(h||(h=d("I64"))).equal(a.threadType,(i||(i=d("LSIntEnum"))).ofNumber(16));b=b&&a.needsAdminApprovalForNewParticipant===!1;return d("LSThreadBitOffset").has(27,a)||b}g["default"]=a}),98);
__d("getMWV2HeaderSettingsPopoverTooltip",["fbt","LSMessagingThreadTypeUtil"],(function(a,b,c,d,e,f,g,h){"use strict";function a(a){a=a.threadType;a=d("LSMessagingThreadTypeUtil").isDiscoverablePublicBroadcastChannel(a);return a?h._("__JHASH__J1KJGjGSRI0__JHASH__"):h._("__JHASH__FjEOIpwxx5G__JHASH__")}g["default"]=a}),226);
__d("useC4GEngagementSurface",["MWLSThreadDisplayContext"],(function(a,b,c,d,e,f,g){"use strict";function a(){var a=d("MWLSThreadDisplayContext").useMWLSThreadDisplayContext(),b="messenger_inbox";switch(a){case"ChatTab":b="chats_tab"}return b}g["default"]=a}),98);
__d("useCometSubscribeMessengerHasDefaultThreadOneToOneCapability",["LSContactBitOffset","LSMessagingThreadTypeUtil","ReQL","ReQLSuspense","react","useEnsureContactsExistAndUpdated","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=(i||d("react")).c;function a(a,b){var e=j(27);c("useEnsureContactsExistAndUpdated")(b!=null&&d("LSMessagingThreadTypeUtil").isOpenOneToOne(b)?a:void 0);var g=(h||(h=c("useReStore")))(),i;e[0]!==g.tables._user_info?(i=function(){return d("ReQL").fromTableAscending(g.tables._user_info).map(function(a){return a.facebookUserId})},e[0]=g.tables._user_info,e[1]=i):i=e[1];var k;e[2]!==g?(k=[g],e[2]=g,e[3]=k):k=e[3];var l=d("ReQLSuspense").useFirst(i,k,f.id+":42");e[4]!==l||e[5]!==g.tables.contacts?(i=function(){return l!=null?d("ReQL").fromTableAscending(g.tables.contacts,d("LSContactBitOffset").contactCapabilityFields).getKeyRange(l):d("ReQL").empty()},e[4]=l,e[5]=g.tables.contacts,e[6]=i):i=e[6];e[7]!==g||e[8]!==l?(k=[g,l],e[7]=g,e[8]=l,e[9]=k):k=e[9];i=d("ReQLSuspense").useFirst(i,k,f.id+":47");k=i!=null&&d("LSContactBitOffset").has(80,i);var m;e[10]!==a||e[11]!==b||e[12]!==g.tables.contacts?(m=function(){return a!=null&&b!=null&&d("LSMessagingThreadTypeUtil").isOpenOneToOne(b)?d("ReQL").fromTableAscending(g.tables.contacts,[].concat(d("LSContactBitOffset").contactCapabilityFields,["id"])).getKeyRange(a):d("ReQL").empty()},e[10]=a,e[11]=b,e[12]=g.tables.contacts,e[13]=m):m=e[13];var n;e[14]!==g||e[15]!==a||e[16]!==b?(n=[g,a,b],e[14]=g,e[15]=a,e[16]=b,e[17]=n):n=e[17];m=d("ReQLSuspense").useFirst(m,n,f.id+":66");if(b==null||!d("LSMessagingThreadTypeUtil").isOpenOneToOne(b)){e[18]===Symbol["for"]("react.memo_cache_sentinel")?(n=[!1,!0,null],e[18]=n):n=e[18];return n}if(i==null){e[19]===Symbol["for"]("react.memo_cache_sentinel")?(n=[!1,!1,null],e[19]=n):n=e[19];return n}if(!k){e[20]===Symbol["for"]("react.memo_cache_sentinel")?(i=[!1,!0,null],e[20]=i):i=e[20];return i}if(m==null){e[21]===Symbol["for"]("react.memo_cache_sentinel")?(n=[!1,!1,null],e[21]=n):n=e[21];return n}if(e[22]!==m){i=(k=d("LSContactBitOffset").has(83,m))!=null?k:!1;e[22]=m;e[23]=i}else i=e[23];n=i;e[24]!==n||e[25]!==m.id?(k=[n,!0,m.id],e[24]=n,e[25]=m.id,e[26]=k):k=e[26];return k}g["default"]=a}),98);
__d("useHasGroupLimitBeenReachedForThread",["I64","Int64Hooks","LSMessagingThreadTypeUtil","MWGroupLimitConfig","MWXacGating","ReQL","ReQLSuspense","isMWXacGroupThread","react","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=(j||d("react")).c;function a(a,b){var e=k(18),g;e[0]!==b?(g=b===void 0?[]:b,e[0]=b,e[1]=g):g=e[1];var j=g,l=(h||(h=c("useReStore")))();e[2]!==l.tables.threads||e[3]!==a?(b=function(){return d("ReQL").fromTableAscending(l.tables.threads,["memberCount","threadType","capabilities","capabilities2","capabilities3","capabilities4"]).getKeyRange(a)},e[2]=l.tables.threads,e[3]=a,e[4]=b):b=e[4];e[5]!==l||e[6]!==a?(g=[l,a],e[5]=l,e[6]=a,e[7]=g):g=e[7];var m=d("ReQLSuspense").useFirst(b,g,f.id+":30");b=(m==null?void 0:m.memberCount)!=null?(i||(i=d("I64"))).to_int32(m.memberCount):0;b=b+((g=j==null?void 0:j.length)!=null?g:0);var n;e[8]!==j||e[9]!==m?(g=function(){var a;a=((a=j)!=null?a:[]).some(function(a){return a.isInstagramAccount});if(m==null)return!1;return d("MWXacGating").isGroupsEnabled()?c("isMWXacGroupThread")({capabilities:m.capabilities,capabilities2:m.capabilities2,capabilities3:m.capabilities3,capabilities4:m.capabilities4,threadType:m.threadType})||a:!1},n=[m,j],e[8]=j,e[9]=m,e[10]=g,e[11]=n):(g=e[10],n=e[11]);g=d("Int64Hooks").useMemoInt64(g,n);if(m==null){e[12]===Symbol["for"]("react.memo_cache_sentinel")?(n=[!1,!1],e[12]=n):n=e[12];return n}n=g?b>=d("MWGroupLimitConfig").gxac:d("LSMessagingThreadTypeUtil").isArmadilloSecure(m.threadType)?b>=d("MWGroupLimitConfig").armadillo():b>=d("MWGroupLimitConfig").nonGxac;e[13]!==b?(g=d("MWXacGating").isGroupsEnabled()&&b>=d("MWGroupLimitConfig").gxac,e[13]=b,e[14]=g):g=e[14];b=g;e[15]!==n||e[16]!==b?(g=[n,b],e[15]=n,e[16]=b,e[17]=g):g=e[17];return g}g["default"]=a}),98);
__d("useMAWSelectedMessageNoOp",[],(function(a,b,c,d,e,f){"use strict";function a(a,b,c){}f["default"]=a}),66);
__d("useMWAddParticipantDialog",["JSResourceForInteraction","LSIntEnum","LSMessagingThreadTypeUtil","MWLSDatabaseLazySync","promiseDone","react","useMWXLazyDialog"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=(h||d("react")).c;function a(a,b){var e=j(9),f;e[0]===Symbol["for"]("react.memo_cache_sentinel")?(f=(i||(i=d("LSIntEnum"))).ofNumber(7),e[0]=f):f=e[0];var g=d("MWLSDatabaseLazySync").useSync(f);e[1]===Symbol["for"]("react.memo_cache_sentinel")?(f=c("JSResourceForInteraction")("MWAddParticipantOpenDialog.react").__setRef("useMWAddParticipantDialog"),e[1]=f):f=e[1];f=c("useMWXLazyDialog")(f);var h=f[0];e[2]===Symbol["for"]("react.memo_cache_sentinel")?(f=c("JSResourceForInteraction")("MAWAddParticipantSecureDialog.react").__setRef("useMWAddParticipantDialog"),e[2]=f):f=e[2];f=c("useMWXLazyDialog")(f);var k=f[0];e[3]!==g||e[4]!==b||e[5]!==k||e[6]!==a||e[7]!==h?(f=function(){c("promiseDone")(g());var e=d("LSMessagingThreadTypeUtil").isArmadilloSecure(b);e?k({threadKey:a}):h({threadKey:a})},e[3]=g,e[4]=b,e[5]=k,e[6]=a,e[7]=h,e[8]=f):f=e[8];return f}g["default"]=a}),98);
__d("useMWCMEditChatInfoDialogEntrypoint",["GroupsCometChatEditChatDialog.entrypoint","I64","MWXCardedDialogLoadingState.react","react","useMWXEntryPointDialog"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=(h||(h=d("react"))).c,k=h;function a(a,b){var e=j(7),f;e[0]!==a?(f=(i||(i=d("I64"))).to_string(a),e[0]=a,e[1]=f):f=e[1];e[2]!==f?(a={threadID:f},e[2]=f,e[3]=a):a=e[3];f=c("useMWXEntryPointDialog")(c("GroupsCometChatEditChatDialog.entrypoint"),a,void 0,l);var g=f[0];e[4]!==g||e[5]!==b?(a=function(){return g({enableEditNameOrDescription:!0,entryPoint:b})},e[4]=g,e[5]=b,e[6]=a):a=e[6];return a}function l(){return k.jsx(c("MWXCardedDialogLoadingState.react"),{})}l.displayName=l.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("useMWPMessageListData",["I64","Int64Hooks","MAWObservableUtils","MAWStateContext.react","MWPMessageListDataSource","MWPVisibleMessageContext.react","ReQL","ReQLSuspense","cr:558","qex","react","useObservable","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;e=j||d("react");var k=e.useCallback,l=e.useContext,m=e.useEffect,n=e.useRef,o=e.useState,p=15;function q(a,b){return JSON.stringify(a)===JSON.stringify(b)}function a(a,e){var g,j=a.authorityLevel,r=a.threadKey,s=a.threadType,t=(h||(h=c("useReStore")))(),u=n(d("MAWObservableUtils").getUniqueRef()),v=b("cr:558")();a=l(d("MAWStateContext.react").MAWStateContext);var w=a.dispatch;a=d("MWPVisibleMessageContext.react").useMWPVisibleMessageContext();a=a.visibleMessage;var x=a==null?void 0:a.messageId,y=(a=a==null?void 0:a.timestamp)!=null?a:(i||(i=d("I64"))).max_int,z=e==null?void 0:e.threadKey,A=e==null?void 0:e.threadType;a=o(p);var B=a[0],C=a[1];e=o(p);var D=e[0],E=e[1];a=o(x);var F=a[0],G=a[1];e=o(y);var H=e[0],I=e[1];a=o(!1);e=a[0];var J=a[1];a=o(!1);var K=a[0],L=a[1],M=n(new Map()),N=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableAscending(t.tables.mi_act_mapping_table,["jid"]).getKeyRange(r).map(function(a){return a.jid})},[t,r],f.id+":83");a=d("Int64Hooks").useMemoInt64(function(){return new(c("MWPMessageListDataSource"))(t,v,{after:D,before:B,cursor:{messageId:F,secureThreadJid:N,threadKey:r,timestampMs:H},secondaryThreadKey:z,secondaryThreadType:A,threadAuthorityLevel:j,threadType:s},w,u.current)},[D,B,t,v,N,w,F,z,A,r,s,H,j]);a=c("useObservable")(a);var O=a[0];a=a[1];m(function(){J(!1),L(!1)},[O]);if(a!=null)throw a;a=(a=O==null?void 0:O.data.map(function(a){a[0];a=a[1];var b=M.current.get(a.messageId);if(b!=null&&q(a,b))return b;c("qex")._("189")&&M.current.set(a.messageId,a);return a}))!=null?a:[];var P=a.some(function(a){return a.messageId===x});d("Int64Hooks").useEffectInt64(function(){P||(I(y),G(x),C(p),E(p))},[P,x,y]);var Q=(g=O==null?void 0:O.hasNext)!=null?g:!1,R=((g=O==null?void 0:O.isLoadingNext)!=null?g:!1)||K;g=k(function(){!R&&Q&&(E(D+p),L(!0))},[Q,R,D]);var S=(K=O==null?void 0:O.hasPrevious)!=null?K:!0,T=((K=O==null?void 0:O.isLoadingPrevious)!=null?K:!1)||e;O=k(function(){!T&&S&&(C(B+p),J(!0))},[S,T,B]);return{hasNext:Q,hasPrevious:S,isLoadingNext:R,isLoadingPrevious:T,loadNext:g,loadPrevious:O,messages:a}}g["default"]=a}),98);
__d("useMWV2StartGroupCall",["I64","Int64Hooks","JSResourceForInteraction","LSIntEnum","LSMessagingThreadTypeUtil","getRTCCallStateOfLSRTCCallState","react","useMWXLazyDialog","useRTWebCometStartCallCallback"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=(h||d("react")).c;function a(a,b,e,f){var g=k(11),h=a.ongoingCallState,l=a.threadKey,m=a.threadType,n=c("useRTWebCometStartCallCallback")();g[0]===Symbol["for"]("react.memo_cache_sentinel")?(a=c("JSResourceForInteraction")("MWChatRestrictedUserInGroupInterstitialDialog.react").__setRef("useMWV2StartGroupCall"),g[0]=a):a=g[0];a=c("useMWXLazyDialog")(a);var o=a[0],p;g[1]!==b||g[2]!==m||g[3]!==h||g[4]!==e||g[5]!==l||g[6]!==f||g[7]!==o||g[8]!==n?(a=function(a){var g,k=a.jid,p=a.ongoingCallServerInfoData,q=a.otherParticipantId;a=a.restrictedUsers;a=a===void 0?[]:a;b();g=(g=d("LSMessagingThreadTypeUtil").isGroup(m))!=null?g:!1;g=g&&a.length>0;var r={existingCall:p!=null?{call_state:c("getRTCCallStateOfLSRTCCallState")((i||(i=d("LSIntEnum"))).unwrapIntEnum(h),(i||(i=d("LSIntEnum"))).unwrapIntEnum(m)),initiator_fbid:null,server_info_data:p}:null,isE2eeMandated:d("LSMessagingThreadTypeUtil").isArmadilloSecure(m),mediaType:e,thread:{e2eeThreadID:k!=null?(j||(j=d("I64"))).to_string(k):void 0,id:(j||(j=d("I64"))).to_string(l),secureOneToOneThreadPeerId:q!=null&&(j||(j=d("I64"))).equal(m,(i||(i=d("LSIntEnum"))).ofNumber(15))?(j||(j=d("I64"))).to_string(q):void 0,type:(i||(i=d("LSIntEnum"))).unwrapIntEnum(m)},trigger:f};return g?o({onContinue:function(){return n(r)},restrictedUsers:a}):n(r)},p=[b,m,h,e,l,f,n,o],g[1]=b,g[2]=m,g[3]=h,g[4]=e,g[5]=l,g[6]=f,g[7]=o,g[8]=n,g[9]=a,g[10]=p):(a=g[9],p=g[10]);return d("Int64Hooks").useCallbackInt64(a,p)}g["default"]=a}),98);/*FB_PKG_DELIM*/
__d("EchoBackupCompareUtils",[],(function(a,b,c,d,e,f){"use strict";function a(a){var b;return{contentSubtype:a.contentSubtype,contentType:a.contentType,reactionTsList:(b=a.reactionAuthoritativeTimestampMs)==null?void 0:b.map(function(a){return a.displayName==null?null:Number(a.displayName)/1e3}).filter(Boolean).sort(),receiptTsList:(b=a.receiptStatusList)==null?void 0:b.map(function(a){return a.timestampMs==null?null:a.timestampMs/1e3}).filter(Boolean).sort()}}function g(a,b){if(a==null&&b==null)return!0;if(a!=null&&b!=null)return a.length===b.length&&a.every(function(a,c){return a===b[c]});return a==null&&(b==null?void 0:b.length)===0||b==null&&(a==null?void 0:a.length)===0?!0:!1}function b(a,b){return b!=null&&a.contentSubtype===b.contentSubtype&&a.contentType===b.contentType&&g(a.reactionTsList,b.reactionTsList)}f.buildEchoDocCacheValue=a;f.echoEquals=b}),66);
__d("EchoConstants",[],(function(a,b,c,d,e,f){"use strict";a=new Set(["\0","\x01","\x02","\x03","\x04","\x05","\x06","\x07","\b","\t","\n","\v","\f","\r","\x0e","\x0f","\x10","\x11","\x12","\x13","\x14","\x15","\x16","\x17","\x18","\x19","\x1a","\x1b","\x1c","\x1d","\x1e","\x1f",'"'," ","(",")",",",":",";","<",">","@","[","]","\\"]);f.ADDRESS_LOCAL_KEY_CHARS_NEED_QUOTE=a}),66);
__d("EchoEncodingUtils",["EchoConstants","EchoMessage","MAWMsgType","WABase64","unrecoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";var h=new Set(['"',"\\","\n","\r","\0"]),i=new Set(["\0","\x01","\x02","\x03","\x04","\x05","\x06","\x07","\b","\t","\n","\v","\f","\r","\x0e","\x0f","\x10","\x11","\x12","\x13","\x14","\x15","\x16","\x17","\x18","\x19","\x1a","\x1b","\x1c","\x1d","\x1e","\x1f",'"',"\\"]);function j(a,b){for(var b=b,c=Array.isArray(b),d=0,b=c?b:b[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=b.length)break;e=b[d++]}else{d=b.next();if(d.done)break;e=d.value}e=e;if(a.indexOf(e)>=0)return!0}return!1}function k(a,b,d){d===void 0&&(d=new Set());if(a.length<=0)throw c("unrecoverableViolation")("The input string must be non-empty","labyrinth_web");var e=b;b==="conditional"&&(j(a,d)?e="always":e="never");if(e==="never")return a;b='"';for(d=0;d<a.length;d++){e=a[d];h.has(e)?(b+="\\",e==="\r"?b+="r":e==="\n"?b+="n":b+=e):b+=e}return b+'"'}function l(a){if(!Number.isSafeInteger(a))throw c("unrecoverableViolation")("The input value must be a safe integer","labyrinth_web");return a.toString()}function m(a){var b="",c=a.displayName,e=a.localKey;a=a.transportKey;c!=null&&c.length>0&&(b+=k(c,"always")+" <");b+=k(e,"conditional",d("EchoConstants").ADDRESS_LOCAL_KEY_CHARS_NEED_QUOTE)+"@"+a;c!=null&&c.length>0&&(b+=">");return b}function n(a,b,c){c!=null&&c.length!==0&&a.set(b,k(c,"conditional",i))}function a(a,b,c){if(c!=null){c=l(c);n(a,b,c)}}function b(a,b,c){if(c!=null){c=l(c?1:0);n(a,b,c)}}function e(a,b,c){c!=null&&a.set(b,m(c))}function f(a,b,c){if(c!=null){var d="";c.forEach(function(a,b){d+=m(a),b<c.length-1&&(d+=", ")});a.set(b,d)}}function o(a){var b="";a.forEach(function(a,c){b=b+c+": "+a+"\r\n"});return b}function p(a){return d("WABase64").encodeB64UrlSafe(a)}function q(a){switch(a){case d("MAWMsgType").MSG_TYPE.TEXT:return d("EchoMessage").EchoXMessageContentType.TEXT;case d("MAWMsgType").MSG_TYPE.IMAGE:return d("EchoMessage").EchoXMessageContentType.IMAGE;case d("MAWMsgType").MSG_TYPE.VIDEO:return d("EchoMessage").EchoXMessageContentType.VIDEO;case d("MAWMsgType").MSG_TYPE.PTT:return d("EchoMessage").EchoXMessageContentType.AUDIO;case d("MAWMsgType").MSG_TYPE.STICKER:return d("EchoMessage").EchoXMessageContentType.STICKER;case d("MAWMsgType").MSG_TYPE.GIF:return d("EchoMessage").EchoXMessageContentType.GIF;case d("MAWMsgType").MSG_TYPE.XMA:return d("EchoMessage").EchoXMessageContentType.XMA;case d("MAWMsgType").MSG_TYPE.DOCUMENT_FILE:return d("EchoMessage").EchoXMessageContentType.DOCUMENT;case d("MAWMsgType").MSG_TYPE.REACTION:return d("EchoMessage").EchoXMessageContentType.REACTION;case d("MAWMsgType").MSG_TYPE.EPHEMERAL_SETTING_ADMIN:return d("EchoMessage").EchoXMessageContentType.EPHEMERAL_SETTINGS;case d("MAWMsgType").MSG_TYPE.EPHEMERAL_SYNC_RESPONSE:return d("EchoMessage").EchoXMessageContentType.EPHEMERAL_SYNC_RESPONSE;case d("MAWMsgType").MSG_TYPE.DELETE_FOR_ME:return d("EchoMessage").EchoXMessageContentType.MESSAGE_DELETE_FOR_ME;case d("MAWMsgType").MSG_TYPE.REVOKED:return d("EchoMessage").EchoXMessageContentType.UNSEND;case d("MAWMsgType").MSG_TYPE.GROUP_INVITE:return d("EchoMessage").EchoXMessageContentType.GROUP_INVITES;case d("MAWMsgType").MSG_TYPE.BUMP_EXISTING_MESSAGE:return d("EchoMessage").EchoXMessageContentType.BUMP;default:return d("EchoMessage").EchoXMessageContentType.UNKNOWN}}function r(a){if(a==null)return void 0;switch(a){case d("EchoMessage").EchoXMessageContentType.TEXT:return d("MAWMsgType").MSG_TYPE.TEXT;case d("EchoMessage").EchoXMessageContentType.IMAGE:return d("MAWMsgType").MSG_TYPE.IMAGE;case d("EchoMessage").EchoXMessageContentType.VIDEO:return d("MAWMsgType").MSG_TYPE.VIDEO;case d("EchoMessage").EchoXMessageContentType.AUDIO:return d("MAWMsgType").MSG_TYPE.PTT;case d("EchoMessage").EchoXMessageContentType.STICKER:return d("MAWMsgType").MSG_TYPE.STICKER;case d("EchoMessage").EchoXMessageContentType.GIF:return d("MAWMsgType").MSG_TYPE.GIF;case d("EchoMessage").EchoXMessageContentType.XMA:return d("MAWMsgType").MSG_TYPE.XMA;case d("EchoMessage").EchoXMessageContentType.DOCUMENT:return d("MAWMsgType").MSG_TYPE.DOCUMENT_FILE;case d("EchoMessage").EchoXMessageContentType.REACTION:return d("MAWMsgType").MSG_TYPE.REACTION;case d("EchoMessage").EchoXMessageContentType.EPHEMERAL_SETTINGS:return d("MAWMsgType").MSG_TYPE.EPHEMERAL_SETTING_ADMIN;case d("EchoMessage").EchoXMessageContentType.EPHEMERAL_SYNC_RESPONSE:return d("MAWMsgType").MSG_TYPE.EPHEMERAL_SYNC_RESPONSE;case d("EchoMessage").EchoXMessageContentType.MESSAGE_DELETE_FOR_ME:return d("MAWMsgType").MSG_TYPE.DELETE_FOR_ME;case d("EchoMessage").EchoXMessageContentType.UNSEND:return d("MAWMsgType").MSG_TYPE.REVOKED;case d("EchoMessage").EchoXMessageContentType.GROUP_INVITES:return d("MAWMsgType").MSG_TYPE.GROUP_INVITE;case d("EchoMessage").EchoXMessageContentType.BUMP:return d("MAWMsgType").MSG_TYPE.BUMP_EXISTING_MESSAGE;default:return void 0}}g.echoSetStringField=n;g.echoSetIntField=a;g.echoSetBooleanField=b;g.echoSetAddressField=e;g.echoSetAddressListField=f;g.echoEncodeFields=o;g.convertMediaKeyToString=p;g.convertDbMsgTypeToXMessageContentType=q;g.convertXMessageContentTypeToDbMsgType=r}),98);
__d("EchoCommonUtils",[],(function(a,b,c,d,e,f){"use strict";c="Echo-Doc-Version";function a(a,b){var c=a.localKey;a=a.transportKey;return c+"@"+a+"-"+b}function b(a,b,c){return a==null?{localKey:b,transportKey:c}:{displayName:a,localKey:b,transportKey:c}}f.ECHO_COMMON_FIELD_DOCUMENT_VERSION=c;f.getEchoAddressFieldNameWithSuffix=a;f.craftEchoAddress=b}),66);
__d("EchoDecodingUtils",["invariant","EchoConstants","WALogger"],(function(a,b,c,d,e,f,g,h){"use strict";function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] "," not a valid number in echo message"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] Fail to decode if the input string does not have CRLF"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] Address  decode failed with value: ",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] invalid input to echoDecodeAddressList detected"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] invalid transportKey in address detected"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] invalid localKey in address detected"]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] parse localKey in address failed"]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] echoDecodeAddress failed"]);p=function(){return a};return a}function q(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] conditional quote mode decode failed"]);q=function(){return a};return a}function r(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] invalid input to echoDecodeAddress"]);r=function(){return a};return a}function s(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] Fail decoding because we didn't have a closing quote. Error Field: ",""]);s=function(){return a};return a}function t(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] Field name is blank"]);t=function(){return a};return a}function u(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] This is a raw line and we cannot decode its field name and value."]);u=function(){return a};return a}var v=new Set([]);function w(a,b){if(a.length===0)return;var c=a.indexOf(":");if(c===-1){d("WALogger").ERROR(u());return}var e=a.substring(0,c).trim();a=a.substring(c+1).trim();if(e.length===0){d("WALogger").ERROR(t());return}if(a.length===0){b.has(e)&&b["delete"](e);return}b.set(e,a)}function x(a,b,c,e){c===void 0&&(c=new Set());var f=!1,g=b==="conditional"&&a[0]==='"',h="",i=g?1:0;while(i<a.length){var j=a[i];if(b==="conditional"&&!g&&j==='"')break;if(!g&&c.has(j))break;if(g&&!f&&j==='"'){g=!1;i++;break}if(g&&!f&&j==="\\"){if(i===a.length-1)break;f=!0}else f&&j==="r"?h+="\r":f&&j==="n"?h+="\n":h+=j,f=!1;i++}if(g||h.length===0){c=(j=e)!=null?j:"unknown";d("WALogger").ERROR(s(),c);return{remainder:a,result:null,success:!1}}return{remainder:a.substring(i),result:h,success:!0}}function y(a,b){if(a.length===0){d("WALogger").ERROR(r());return{remainder:a,result:null,success:!1}}var c=a.trimLeft();c=x(c,"conditional",d("EchoConstants").ADDRESS_LOCAL_KEY_CHARS_NEED_QUOTE,b);if(!c.success){d("WALogger").ERROR(q());return{remainder:a,result:null,success:!1}}c.result!=null||h(0,47923);if(c.remainder[0]==="@"){var e=z(c.remainder,c.result,b);return{remainder:e.remainder,result:e.result,success:e.success}}e=c.result;c=c.remainder.trimLeft();if(c.startsWith("<")){c=z(c.substring(1),void 0,b);b=c.result;var f=c.remainder;if(c.success&&b!=null&&f.startsWith(">"))if(e.length===0)return{remainder:f.substring(1),result:b,success:!0};else return{remainder:f.substring(1),result:babelHelpers["extends"]({},b,{displayName:e}),success:!0}}d("WALogger").ERROR(p());return{remainder:a,result:null,success:!1}}function z(a,b,c){var e=b==null?a.trimLeft():a;b=b;if(b==null){var f=x(e,"conditional",d("EchoConstants").ADDRESS_LOCAL_KEY_CHARS_NEED_QUOTE,c);if(!f.success){d("WALogger").ERROR(o());return{remainder:a,result:null,success:!1}}b=f.result;e=f.remainder}if(b==null||b.length===0||e[0]!=="@"){d("WALogger").ERROR(n());return{remainder:a,result:null,success:!1}}f=x(e.substring(1),"never",d("EchoConstants").ADDRESS_LOCAL_KEY_CHARS_NEED_QUOTE,c);e=f.result;if(f.success&&e!=null&&e.length>0)return{remainder:f.remainder,result:{localKey:b,transportKey:e},success:!0};else{d("WALogger").ERROR(m());return{remainder:a,result:null,success:!1}}}function A(a,b){if(a.length===0){d("WALogger").ERROR(l());return{result:null,success:!1}}var c=y(a,b);if(!c.success){d("WALogger").ERROR(k(),a);return{result:null,success:!1}}c.result!=null||h(0,47927);a=[c.result];c=c.remainder;while(c.startsWith(",")){var e=y(c.substring(1).trimLeft(),b);if(e.success)e.result!=null&&a.push(e.result),c=e.remainder;else break}return{result:a,success:!0}}function a(a){var b=new Map(),c=a.split("\r\n");if(c.length===1&&c[0]===a){d("WALogger").ERROR(j());return b}c.forEach(function(a){return w(a,b)});return b}function b(a,b){a=a.get(b);if(a==null||a.length===0||a==='""')return{result:null,success:!1};a=x(a,"conditional",v,b);b=a.result;a=a.success;return{result:b,success:a}}function c(a,b){a=B(a,b);return{result:(b=a.result)!=null?b:0,success:a.success}}function B(a,b){a=a.get(b);if(a==null||a.length===0)return{result:null,success:!1};a=parseInt(a,10);if(isNaN(a)){d("WALogger").ERROR(i(),b);return{result:null,success:!1}}else return Number.isSafeInteger(a)?{result:a,success:!0}:{result:a>Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,success:!0}}function e(a,b){a=C(a,b);return{result:(b=a.result)!=null?b:!1,success:a.success}}function C(a,b){a=B(a,b);return!a.success||a.result!==0&&a.result!==1?{result:null,success:!1}:{result:a.result===1,success:!0}}function f(a,b){a=a.get(b);if(a==null||a.length===0)return{result:null,success:!1};a=y(a,b);b=a.result;a=a.success;return{result:b,success:a}}function D(a,b){a=a.get(b);return a==null||a.length===0?{result:null,success:!1}:A(a,b)}function E(a,b){a=a.get(b);if(a==null||a.length===0)return{result:null,success:!1};b=a.split(",").map(function(a){return a.trim()}).filter(Boolean);return b.length===0?{result:null,success:!1}:{result:b,success:!0}}g.echoDecodeFields=a;g.echoDecodeStringField=b;g.echoDecodeIntField=c;g.echoDecodeNullableIntField=B;g.echoDecodeBooleanField=e;g.echoDecodeNullableBooleanField=C;g.echoDecodeAddressField=f;g.echoDecodeAddressListField=D;g.echoDecodeObjectIdListField=E}),98);
__d("EchoMessage",["$InternalEnum","EchoCommonUtils","EchoDecodingUtils","EchoEncodingUtils","EchoMessageMediaFieldUtils","EchoMessageMediaGroupFieldUtil","EchoMessageQuoteFieldUtils","EchoMessageReceiptStatusFieldUtils","EchoMessageXMAFieldUtils","FBLogger","WALogger","gkx"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] mandatory xma data is missing from xma message, msgId: ",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose([""," Message origin: ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose([""," Message origin: ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose([""," Message origin: ",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose([""," Message origin: ",""]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] Failed to decode media data for Receiver Fetch, Message origin: ",""]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] fieldsMap is empty for the echo message"]);n=function(){return a};return a}var o="Message-ID",p="Thread-ID",q="Sort-Order",r="Display-Timestamp",s="Authoritative-Timestamp",t="From",u="Text",v="Text-Size",w="Send-Error",x="Is-Tombstoned",y="Expire-Timestamp",z="Delete-Timestamp",A="Ephemeral-Duration",B="Message-Content-Type",C="X-Message-Content-Type",D="Message-Content-Subtype",E="Is-Forwarded",F="X-Offline-Threading-ID",G="X-Thread-ID",H="X-Message-Placeholder-Type",I="Reactions",J="Reaction-Authoritative-Timestamps",K="X-Reaction-Offline-Threading-IDs",L="Echo-Serialization-Origin",M="Revoke-Sent-Timestamp",N="Revoke-Unsent-Timestamp",O="Edit-Count",P="Edit-Contents-",Q="Edit-Timestamps-";f="Group-ID";var R="Group-Index",S="Group-Size",T="Receiver-Fetch-Id",U="Message-Ephemerality-Type",V=1,W=(b=b("$InternalEnum"))({NONE:"none",SMALL:"small",MEDIUM:"medium",LARGE:"large"}),X=b({NONE:"none",UNSEND:"unsend"}),Y=b({DECRYPTION_FAILURE:"decryption_failure",UNSUPPORTED_NEEDS_UPDATE:"unsupported_needs_update",TEXT:"text",ADMIN_MESSAGE:"admin_message",MEDIA:"media",XMA:"xma",NULL_STATE:"null_state",PLACEHOLDER:"placeholder"}),aa=b({UNKNOWN:"unknown",TEXT:"text",IMAGE:"image",VIDEO:"video",AUDIO:"audio",STICKER:"sticker",GIF:"gif",URL:"url",EPHEMERAL_SETTINGS:"ephemeral_settings",LOCATION:"location",DOCUMENT:"document",UNSEND:"unsend",SCREENSHOT_ACTION:"screenshot_action",REACTION:"reaction",XMA:"xma",VISUAL_MESSAGE_VIDEO:"visual_message_video",VISUAL_MESSAGE_IMAGE:"visual_message_image",VISUAL_MESSAGE_ACTION:"visual_message_action",SCREEN_RECORDING_ACTION:"screen_recording_action",MESSAGE_DELETE_FOR_ME:"message_delete_for_me",ENCRYPTED_BACKUP_NEW_DEVICE_ENROLLMENT:"encrypted_backup_new_device_enrollment",SENDER_KEY:"sender_key",DELETE_THREAD:"delete_thread",READ_THREAD:"read_thread",UNREAD_THREAD:"unread_thread",REACTION_UNSEND:"reaction_unsend",GROUP_INVITES:"group_invites",EPHEMERAL_SYNC_RESPONSE:"ephemeral_sync_response",BUMP:"bump"}),Z=b({NO_PLACEHOLDER:"0",DECRYPTION_FAILURE:"-1",CLIENT_NOT_SUPPORTED_NEED_UPDATE:"-2",UNAVIALABLE_DEVICE:"-3"}),$=b({UNKNOWN:"Unknown",WEB:"Web",MOBILE:"Mobile"});function a(a){var b=new Map();ia(b,a);"mediaData"in a&&a.mediaData&&d("EchoMessageMediaFieldUtils").echoMessageSetMediaMetadataFields(b,a.mediaData);return d("EchoEncodingUtils").echoEncodeFields(b)}function ba(a,b){var c,e=[],f=new Set();b.forEach(function(c,g,h){c=g.startsWith(P);h=g.startsWith(Q);if(c||h){h=g.slice(c?P.length:Q.length);if(!f.has(h)){f.add(h);c=(g=d("EchoDecodingUtils").echoDecodeStringField(b,""+P+h).result)!=null?g:"";g=((g=d("EchoDecodingUtils").echoDecodeIntField(b,""+Q+h).result)!=null?g:0)/1e3;e.push({messageId:h,originalMessageId:a,text:c,timestamp:g})}}});c=(c=d("EchoDecodingUtils").echoDecodeIntField(b,O).result)!=null?c:0;return{editCount:c,editHistory:e}}function e(a){a=d("EchoDecodingUtils").echoDecodeFields(a);if(a.size===0){d("WALogger").ERROR(n());return null}var b=d("EchoDecodingUtils").echoDecodeStringField(a,o),e=d("EchoDecodingUtils").echoDecodeStringField(a,p),f=d("EchoDecodingUtils").echoDecodeIntField(a,q),g=d("EchoDecodingUtils").echoDecodeIntField(a,r),O=d("EchoDecodingUtils").echoDecodeStringField(a,B),P=d("EchoDecodingUtils").echoDecodeStringField(a,C),Q=d("EchoDecodingUtils").echoDecodeStringField(a,D);if(b.success&&e.success&&f.success){b=b.result;if(b==null)throw c("FBLogger")("messenger_e2ee_web").mustfixThrow("The decoded messageId cannot be null");e=e.result;if(e==null)throw c("FBLogger")("messenger_e2ee_web").mustfixThrow("The decoded threadId cannot be null");O=O==null?void 0:O.result;if(O==null)throw c("FBLogger")("messenger_e2ee_web").mustfixThrow("The decoded contentTypeString cannot be null");var R=ba(b,a),S=R.editCount;R=R.editHistory;Q={contentSubtype:fa(Q.result),contentType:da(O),displayTimestampMs:g.success?g.result:f.result,editCount:S,editHistory:R,messageId:b,sortOrderMs:f.result,threadId:e};O=ea(P.result);O!=null&&(Q.xContentType=O);g=d("EchoDecodingUtils").echoDecodeAddressField(a,t);g.success&&g.result!=null&&(Q.from=g.result);S=d("EchoDecodingUtils").echoDecodeNullableBooleanField(a,x);S.success&&S.result!=null&&(Q.isTombstoned=S.result);R=d("EchoDecodingUtils").echoDecodeStringField(a,u);R.success&&R.result!=null&&(Q.text=R.result);b=d("EchoDecodingUtils").echoDecodeStringField(a,v);if(b.success&&b.result!=null){f=ca(b.result);Q.textSize=f}e=d("EchoDecodingUtils").echoDecodeStringField(a,H);if(e.success&&e.result!=null){P=ga(e.result);Q.xMessagePlaceholderType=P}O=d("EchoDecodingUtils").echoDecodeStringField(a,w);O.success&&O.result!=null&&(Q.sendError=O.result);g=d("EchoDecodingUtils").echoDecodeNullableIntField(a,y);g.success&&g.result!=null&&(Q.expireTimestampMs=g.result);S=d("EchoDecodingUtils").echoDecodeNullableIntField(a,z);S.success&&S.result!=null&&(Q.deleteTimestampMs=S.result);R=d("EchoDecodingUtils").echoDecodeNullableIntField(a,A);R.success&&R.result!=null&&(Q.ephemeralDurationInSec=R.result);b=d("EchoDecodingUtils").echoDecodeStringField(a,U);b.success&&b.result!=null&&(b.result==="view_once"&&(Q.viewOnce=!0));f=d("EchoDecodingUtils").echoDecodeNullableIntField(a,s);f.success&&f.result!=null&&(Q.authoritativeTimestampMs=f.result);e=d("EchoMessageReceiptStatusFieldUtils").echoMessageDecodeReceiptStatusDataFields(a);e.length>0&&(Q.receiptStatusList=e);P=d("EchoDecodingUtils").echoDecodeNullableBooleanField(a,E);P.success&&P.result!=null&&(Q.isForwarded=P.result);d("EchoMessageMediaGroupFieldUtil").decodeMessageMediaGroupFields(a,Q);O=d("EchoDecodingUtils").echoDecodeStringField(a,F);O.success&&O.result!=null&&(Q.xOfflineThreadingId=O.result);g=d("EchoDecodingUtils").echoDecodeStringField(a,G);g.success&&g.result!=null&&(Q.xThreadId=g.result);S=d("EchoDecodingUtils").echoDecodeStringField(a,L);S.success&&S.result!=null&&(Q.serializationOrigin=ha(S.result));R=d("EchoDecodingUtils").echoDecodeNullableIntField(a,d("EchoCommonUtils").ECHO_COMMON_FIELD_DOCUMENT_VERSION);Q.version=R.success&&R.result!=null?R.result:V;b=d("EchoDecodingUtils").echoDecodeAddressListField(a,I);b.success&&b.result!=null&&(Q.reactions=b.result);f=d("EchoDecodingUtils").echoDecodeAddressListField(a,J);f.success&&f.result!=null&&(Q.reactionAuthoritativeTimestampMs=f.result);e=d("EchoDecodingUtils").echoDecodeAddressListField(a,K);e.success&&e.result!=null&&(Q.reactionXOfflineThreadingIds=e.result);P=d("EchoMessageQuoteFieldUtils").echoMessageDecodeQuoteFields(a);P!=null&&(Q.quoteData=P);O=(Q==null?void 0:Q.contentType)===Y.XMA&&a.has(d("EchoMessageMediaFieldUtils").ECHO_MESSAGE_FIELD_NAME_ATTACHMENT_TYPE)&&(a.has(d("EchoMessageMediaFieldUtils").ECHO_MESSAGE_FIELD_NAME_ATTACHMENT_OBJECT_ID)||a.has(d("EchoMessageMediaFieldUtils").ECHO_MESSAGE_FIELD_NAME_ATTACHMENT_OBJECT_IDS));g=a.has(T);S=c("gkx")("5624");if(a.has(T)&&S){R=d("EchoMessageMediaFieldUtils").decodeReceiverFetchData(a);b=d("EchoDecodingUtils").echoDecodeStringField(a,T);f=b.result;e=b.success;R==null||!e||f==null?d("WALogger").ERROR(m(),Q.serializationOrigin):(Q.receiverFetchData=R,Q.receiverFetchId=f)}if(((Q==null?void 0:Q.contentType)===Y.MEDIA||O)&&!g){P=d("EchoMessageMediaFieldUtils").echoMessageDecodeMediaDataFields(a,Q==null?void 0:Q.contentType,Q==null?void 0:Q.xContentType);S="[labyrinth_web] mandatory media data is missing from media message, msgId: "+Q.messageId+".";P!=null?(P.length!==1&&P.length!==2&&((Q==null?void 0:Q.contentType)===Y.MEDIA&&d("WALogger").ERROR(l(),S,Q.serializationOrigin),(Q==null?void 0:Q.contentType)===Y.XMA&&d("WALogger").WARN(k(),S,Q.serializationOrigin)),Q.mediaData=P[0],P.length===2&&(Q.previewMediaData=P[1])):((Q==null?void 0:Q.contentType)===Y.MEDIA&&d("WALogger").ERROR(j(),S,Q.serializationOrigin),(Q==null?void 0:Q.contentType)===Y.XMA&&d("WALogger").WARN(i(),S,Q.serializationOrigin))}if(Q.contentType===Y.PLACEHOLDER&&Q.contentSubtype===X.UNSEND){b=d("EchoDecodingUtils").echoDecodeNullableIntField(a,M);b.success&&b.result!=null&&(Q.revokeSentTimestampMs=b.result);e=d("EchoDecodingUtils").echoDecodeNullableIntField(a,N);e.success&&e.result!=null&&(Q.revokeUnsentTimestampMS=e.result)}if(Q.contentType===Y.XMA){R=d("EchoMessageXMAFieldUtils").decodeXMAFields(a);if(R!=null)Q.xmaData=R;else{d("WALogger").ERROR(h(),Q.messageId);return null}}return Q}else return null}function ca(a){return(a=W.cast(a))!=null?a:W.NONE}function da(a){return(a=Y.cast(a))!=null?a:Y.TEXT}function ea(a){return aa.cast(a)}function fa(a){return(a=X.cast(a))!=null?a:X.NONE}function ga(a){return(a=Z.cast(a))!=null?a:Z.NO_PLACEHOLDER}function ha(a){return(a=$.cast(a))!=null?a:$.UNKNOWN}function ia(a,b){var c;(c=d("EchoEncodingUtils")).echoSetStringField(a,o,b.messageId);c.echoSetStringField(a,p,b.threadId);c.echoSetIntField(a,q,b.sortOrderMs);c.echoSetIntField(a,r,b.displayTimestampMs);c.echoSetIntField(a,s,b.authoritativeTimestampMs);c.echoSetAddressField(a,t,b.from);c.echoSetStringField(a,u,b.text);b.textSize!=null&&d("EchoEncodingUtils").echoSetStringField(a,v,b.textSize);b.xMessagePlaceholderType!=null&&d("EchoEncodingUtils").echoSetStringField(a,H,b.xMessagePlaceholderType);d("EchoEncodingUtils").echoSetStringField(a,w,b.sendError);d("EchoEncodingUtils").echoSetBooleanField(a,x,b.isTombstoned);d("EchoEncodingUtils").echoSetIntField(a,y,b.expireTimestampMs);d("EchoEncodingUtils").echoSetIntField(a,z,b.deleteTimestampMs);d("EchoEncodingUtils").echoSetIntField(a,A,b.ephemeralDurationInSec);b.contentType!=null&&d("EchoEncodingUtils").echoSetStringField(a,B,b.contentType);b.xContentType!=null&&d("EchoEncodingUtils").echoSetStringField(a,C,b.xContentType);d("EchoMessageReceiptStatusFieldUtils").echoMessageSetReceiptStatusDataFields(a,b.receiptStatusList);d("EchoEncodingUtils").echoSetBooleanField(a,E,b.isForwarded);d("EchoEncodingUtils").echoSetStringField(a,F,b.xOfflineThreadingId);d("EchoEncodingUtils").echoSetStringField(a,G,b.xThreadId);d("EchoEncodingUtils").echoSetIntField(a,d("EchoCommonUtils").ECHO_COMMON_FIELD_DOCUMENT_VERSION,b.version);b.contentSubtype!=null&&d("EchoEncodingUtils").echoSetStringField(a,D,b.contentSubtype);d("EchoEncodingUtils").echoSetAddressListField(a,I,b.reactions);d("EchoEncodingUtils").echoSetAddressListField(a,J,b.reactionAuthoritativeTimestampMs);d("EchoEncodingUtils").echoSetAddressListField(a,K,b.reactionXOfflineThreadingIds);d("EchoMessageQuoteFieldUtils").echoMessageSetQuoteFields(a,b);b.serializationOrigin!=null&&d("EchoEncodingUtils").echoSetStringField(a,L,b.serializationOrigin);b.revokeSentTimestampMs!=null&&d("EchoEncodingUtils").echoSetIntField(a,M,b.revokeSentTimestampMs);b.revokeUnsentTimestampMS!=null&&d("EchoEncodingUtils").echoSetIntField(a,N,b.revokeUnsentTimestampMS);d("EchoMessageMediaGroupFieldUtil").echoMessageSetMediaGroupFields(a,b);c=b.xmaData;c!=null&&d("EchoMessageXMAFieldUtils").echoMessageSetXMAFields(a,c);((c=b.editHistory)==null?void 0:c.length)>0&&(d("EchoEncodingUtils").echoSetIntField(a,O,b.editCount),b.editHistory.forEach(function(b){var c=b.messageId;c!=null&&(d("EchoEncodingUtils").echoSetStringField(a,P+c,b.text),d("EchoEncodingUtils").echoSetIntField(a,Q+c,b.timestamp*1e3))}));b.receiverFetchId!=null&&d("EchoEncodingUtils").echoSetStringField(a,T,b.receiverFetchId)}g.ECHO_SERIALIZATION_ORIGIN=L;g.ECHO_MESSAGE_FIELD_NAME_EDIT_COUNT=O;g.ECHO_MESSAGE_FIELD_NAME_EDIT_CONTENT_PREFIX=P;g.ECHO_MESSAGE_FIELD_NAME_EDIT_TS_PREFIX=Q;g.ECHO_MESSAGE_FIELD_GROUP_ID=f;g.ECHO_MESSAGE_FIELD_GROUP_INDEX=R;g.ECHO_MESSAGE_FIELD_GROUP_SIZE=S;g.ECHO_MESSAGE_FIELD_RECEIVER_FETCH_ID=T;g.ECHO_MESSAGE_FIELD_NAME_EPHEMERALITY_TYPE=U;g.ECHO_MESSAGE_MIGRATION_DOCUMENT_VERSION=V;g.MessageTextSize=W;g.EchoMessageContentSubtype=X;g.EchoMessageContentType=Y;g.EchoXMessageContentType=aa;g.EchoMessagePlaceholderType=Z;g.EchoSerializationOriginType=$;g.encodeEchoMessage=a;g.decodeEchoMessage=e}),98);
__d("EchoMessageMediaFieldUtils",["$InternalEnum","EchoDecodingUtils","EchoEncodingUtils","EchoMessage","WALogger"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] Missing media fields for receiver fetch"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] Invalid media attachment type: ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] multi blob media message: can not parse objects ids. "," msgType: "," mediaType: ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] Missing enum fields from media fields: attachmentType: "," mediaPreviewContentType: "," mediaAttachmentType: "," EchoOrigin: "," xOfflineThreadingId: ",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] Missing "," from media fields. AttachmentType: "," EchoOrigin: "," xOfflineThreadingId: ",""]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] Missing "," from media fields. AttachmentType: "," EchoOrigin: ",""]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] Missing "," from media fields. xAttachmentType: ",", AttachmentType: ",". EchoOrigin: "," xOfflineThreadingId: ",""]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] Unable to get primary and secondary attachment object ids"]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] multi blob media message: primary attachment object id is null. msgType: "," mediaType: ",""]);p=function(){return a};return a}function q(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] Missing xAttachmentType field from required media metadata fields, msgId: ",""]);q=function(){return a};return a}function r(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] Missing xContentType field from required media metadata fields, msgId: ",""]);r=function(){return a};return a}function s(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] Missing plaintextHash field from required media metadata fields, msgId: ",""]);s=function(){return a};return a}function t(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] Missing direct path field from required media metadata fields, msgId: ",""]);t=function(){return a};return a}function u(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] Missing attachment type from required media metadata fields, msgId: ",""]);u=function(){return a};return a}function v(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] Missing attachment object id from required media metadata fields, msgId: ",""]);v=function(){return a};return a}var w="X-Object-Id",x="X-Attachment-Object-Ids",y="Attachment-Type",z="Content-Type",A="X-Encrypted-Hash",B="X-Attachment-Type",C="X-Backup-Ent-Fbid",D="X-Backup-Status",E="X-Content-Type",F="X-Direct-Path",G="Height",H="X-Media-Key",I="X-Media-Key-Timestamp",J="Playable-Duration",K="Preview-Height",L="Preview-Content-Type",M="Preview-Width",N="Size",O="Width",P="X-Plaintext-Hash",Q="File-Name",R="Header-Attribution-Content-Type",S=(f=b("$InternalEnum"))({IMAGE:"image",STICKER:"sticker",VIDEO:"video",GIF:"animated_image",PTT:"audio",XMA:"xma",DOCUMENT:"document"}),T=f({IMAGE_JPEG:"image/jpeg",IMAGE_PNG:"image/png",STICKER:"image/webp",GIF:"image/gif",AUDIO_MP4:"audio/mp4",AUDIO_WAV:"audio/wav",XMA:"xma"}),U=f({INVALID:"-1",IMAGE:"0",PTT:"1",AUDIO:"2",DOCUMENT:"3",VIDEO:"4",GIF:"5",STICKER:"6",PROFILE_PICTURE:"7",APP_STATE:"8",HISTORY_SYNC:"9",THUMBNAIL_IMAGE:"10",THUMBNAIL_VIDEO:"11",THUMBNAIL_GIF:"12",THUMBNAIL_DOCUMENT:"13",THUMBNAIL_LINK:"14",NOVI_IMAGE:"15",NOVI_VIDEO:"16",KYCID:"17",WAFFLE_IMAGE:"18",WAFFLE_VIDEO:"19",WAFFLE_GIF:"20",PAYMENT_BG_IMAGE:"21",XMA_IMAGE:"22",PAYMENT_BR_DOCUMENT:"23",BIZ_COVER_PHOTO:"24",MESSENGER_PREVIEW:"25"}),V=f({FULL:"full",PREVIEW:"preview"});function W(a,b){var c=a.attachmentObjectId,e=a.attachmentType,f=a.backupEntFbid,g=a.directPath,h=a.filename,i=a.encryptedHash,j=a.height,k=a.mediaBackupStatus,l=a.mediaContentType,m=a.mediaKey,n=a.mediaKeyTimestamp,o=a.mediaPlayableDuration,p=a.plaintextHash,w=a.previewContentHeight,x=a.previewContentType,y=a.previewContentWidth,z=a.size,A=a.width,B=a.xAttachmentType,C=a.xContentType;a=a.xmaData;if(c==null)d("WALogger").ERROR(v(),b);else if(e==null)d("WALogger").ERROR(u(),b);else if(g==null)d("WALogger").ERROR(t(),b);else if(p==null)d("WALogger").ERROR(s(),b);else if(C==null)d("WALogger").ERROR(r(),b);else if(B==null)d("WALogger").ERROR(q(),b);else return{attachmentObjectId:c,attachmentType:e,backupEntFbid:f,directPath:g,encryptedHash:i,filename:h,height:j,mediaBackupStatus:k,mediaContentType:l,mediaKey:m,mediaKeyTimestamp:n,mediaPlayableDuration:o,plaintextHash:p,previewContentHeight:w,previewContentType:x,previewContentWidth:y,size:z,width:A,xAttachmentType:B,xContentType:C,xmaData:a}}function a(a,b){var c;(c=d("EchoEncodingUtils")).echoSetStringField(a,w,b.attachmentObjectId);c.echoSetStringField(a,y,b.attachmentType);c.echoSetStringField(a,P,b.plaintextHash);c.echoSetStringField(a,A,b.encryptedHash);c.echoSetIntField(a,N,b.size);c.echoSetStringField(a,H,b.mediaKey);c.echoSetIntField(a,I,b.mediaKeyTimestamp);c.echoSetStringField(a,F,b.directPath);b.mediaContentType!=null&&d("EchoEncodingUtils").echoSetStringField(a,z,b.mediaContentType);d("EchoEncodingUtils").echoSetIntField(a,O,b.width);d("EchoEncodingUtils").echoSetIntField(a,G,b.height);b.previewContentType!=null&&d("EchoEncodingUtils").echoSetStringField(a,L,b.previewContentType);b.headerAttributionContentType!=null&&d("EchoEncodingUtils").echoSetStringField(a,R,b.headerAttributionContentType);d("EchoEncodingUtils").echoSetIntField(a,M,b.previewContentWidth);d("EchoEncodingUtils").echoSetIntField(a,K,b.previewContentHeight);d("EchoEncodingUtils").echoSetIntField(a,J,b.mediaPlayableDuration);b.xAttachmentType!=null&&d("EchoEncodingUtils").echoSetStringField(a,B,b.xAttachmentType);d("EchoEncodingUtils").echoSetStringField(a,E,b.xContentType);d("EchoEncodingUtils").echoSetStringField(a,C,b.backupEntFbid);d("EchoEncodingUtils").echoSetStringField(a,D,b.mediaBackupStatus);d("EchoEncodingUtils").echoSetStringField(a,Q,b.filename)}function c(a,b,c){var e={},f=!1,g=!1,h=!1;if(ba(a)){var i=$(a,b,c);if(i==null){d("WALogger").ERROR(p(),b,c);return null}i.length!==2&&d("WALogger").ERROR(o());c=!1;var j=!1,k=i[0];i=i[1];var l={};f=Z(a,e,k);c=Z(a,l,i);g=Y(a,e,b,k,k);j=Y(a,l,b,i,k);h=X(a,e,k);k=X(a,l,i);if(!f||!g||!h||!c||!j||!k)return null;i=d("EchoDecodingUtils").echoDecodeStringField(a,"X-Offline-Threading-ID").result;c=W(e,i);j=W(l,i);if(c!=null&&j!=null)return[c,j]}else{f=Z(a,e);g=Y(a,e,b);h=X(a,e);if(!f||!g||!h)return null;k=W(e);if(k!=null)return[k]}return null}function X(a,b,c){var e,f=d("EchoDecodingUtils").echoDecodeStringField(a,"X-Offline-Threading-ID").result;e=(e=a.get(d("EchoMessage").ECHO_SERIALIZATION_ORIGIN))!=null?e:"";c=[{fieldName:"height",id:G},{fieldName:"width",id:O},{fieldName:"size",id:N},{fieldName:"previewContentHeight",id:K},{fieldName:"previewContentWidth",id:M},{fieldName:"mediaKeyTimestamp",id:c!=null?c+"-"+I:I}];var g=[{attachmentTypes:[U.VIDEO,U.AUDIO],fieldName:"mediaPlayableDuration",id:J}];for(var h=0;h<g.length;h++){var i=g[h],j=i.attachmentTypes,k=i.fieldName;i=i.id;i=d("EchoDecodingUtils").echoDecodeIntField(a,i);var l=i.result;i=i.success;if(i&&l!=null)b[k]=l;else if(!(b.xAttachmentType!=null&&!aa(j,b.xAttachmentType)||b.attachmentType===S.XMA)){d("WALogger").ERROR(n(),k,b.xAttachmentType,b.attachmentType,e,f);return!1}}c.map(function(f){var c=f.fieldName;f=f.id;f=d("EchoDecodingUtils").echoDecodeIntField(a,f);var e=f.result;f=f.success;f&&e!=null&&(b[c]=e)});return!0}function Y(a,b,c,e,f){var g,h=d("EchoDecodingUtils").echoDecodeStringField(a,"X-Offline-Threading-ID").result,i,j;g=(g=a.get(d("EchoMessage").ECHO_SERIALIZATION_ORIGIN))!=null?g:"";var k=[{fieldName:"filename",id:Q}];e!=null&&f!=null?(b.attachmentObjectId=e,i=[{fieldName:"plaintextHash",id:e+"-"+P},{fieldName:"directPath",id:e+"-"+F},{fieldName:"xContentType",id:e+"-"+E}],k.push({fieldName:"mediaKey",id:e+"-"+H}),j=f+"-"+C,e=e+"-"+A):(i=[{fieldName:"attachmentObjectId",id:w},{fieldName:"plaintextHash",id:P},{fieldName:"directPath",id:F},{fieldName:"xContentType",id:E}],k.push({fieldName:"mediaKey",id:H}),j=C,e=A);k.push({fieldName:"backupEntFbid",id:j});k.push({fieldName:"mediaContentType",id:z});k.push({fieldName:"encryptedHash",id:e});j=f!=null?f+"-"+D:D;k.push({fieldName:"mediaBackupStatus",id:j});e=[];for(f=i,j=Array.isArray(f),i=0,f=j?f:f[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var n;if(j){if(i>=f.length)break;n=f[i++]}else{i=f.next();if(i.done)break;n=i.value}n=n;var o=n.fieldName;n=n.id;n=d("EchoDecodingUtils").echoDecodeStringField(a,n);var p=n.result;n=n.success;n&&p!=null?b[o]=p:e.push(o)}if(e.length>0){n=e.join(", ");c===d("EchoMessage").EchoMessageContentType.XMA?d("WALogger").WARN(m(),n,b.attachmentType,g):d("WALogger").ERROR(l(),n,b.attachmentType,g,h);return!1}k.map(function(f){var c=f.fieldName;f=f.id;f=d("EchoDecodingUtils").echoDecodeStringField(a,f);var e=f.result;f=f.success;f&&e!=null&&(b[c]=e)});return!0}function Z(a,b,c){var e,f=d("EchoDecodingUtils").echoDecodeStringField(a,"X-Offline-Threading-ID").result;e=(e=a.get(d("EchoMessage").ECHO_SERIALIZATION_ORIGIN))!=null?e:"";var g=d("EchoDecodingUtils").echoDecodeStringField(a,y);g=g.result==="file"?S.DOCUMENT:S.cast(g.result);g!=null&&(b.attachmentType=g);var h=d("EchoDecodingUtils").echoDecodeStringField(a,L);h=T.cast(h.result);h!=null&&(b.previewContentType=h);var i=d("EchoDecodingUtils").echoDecodeStringField(a,R);i=i.result;i!=null&&(b.headerAttributionContentType=i);i=d("EchoDecodingUtils").echoDecodeStringField(a,c!=null?c+"-"+B:B);i.success&&i.result!=null&&(a=ca(i.result),a!=null&&(b.xAttachmentType=a));if(g!=null&&(h!=null||g===S.DOCUMENT||g===S.PTT))return!0;else d("WALogger").ERROR(k(),g,h,i,e,f);return!1}function aa(a,b){return a.reduce(function(a,c){return a||c===b},!1)}function ba(a){return a.has(x)}function $(a,b,c){var e=d("EchoDecodingUtils").echoDecodeObjectIdListField(a,x),f=e.result;e=e.success;if(!e||f==null||f.length!==2){d("WALogger").ERROR(j(),f,b,c);return null}e=f.find(function(b){b=b+"-"+D;b=d("EchoDecodingUtils").echoDecodeStringField(a,b);var c=b.result;b=b.success;if(b&&c!=null)return!0});if(e!=null){b=e===f[0]?f[1]:f[0];return[e,b]}e=f.find(function(b){b=b+"-"+E;b=d("EchoDecodingUtils").echoDecodeStringField(a,b);var c=b.result;b=b.success;if(b&&c!=null&&V.cast(c)===V.FULL)return!0});if(e!=null){c=e===f[0]?f[1]:f[0];return[e,c]}return f}function ca(a){var b=U.cast(a);b==null&&d("WALogger").ERROR(i(),a);return(a=b)!=null?a:U.INVALID}function e(a){var b={};b=Z(a,b);if(!b)return null;b=d("EchoDecodingUtils").echoDecodeStringField(a,z);var c=d("EchoDecodingUtils").echoDecodeIntField(a,G),e=d("EchoDecodingUtils").echoDecodeIntField(a,O);a=d("EchoDecodingUtils").echoDecodeStringField(a,y);if(!b.success||!c.success||!e.success||!a.success||b.result==null||c.result==null||e.result==null||a.result==null){d("WALogger").ERROR(h());return null}return{mimetype:b.result,previewHeight:c.result,previewWidth:e.result,type:a.result}}g.ECHO_MESSAGE_FIELD_NAME_ATTACHMENT_OBJECT_ID=w;g.ECHO_MESSAGE_FIELD_NAME_ATTACHMENT_OBJECT_IDS=x;g.ECHO_MESSAGE_FIELD_NAME_ATTACHMENT_TYPE=y;g.AttachmentType=S;g.EchoMessageMediaPreviewType=T;g.EchoMessageActMediaAttachmentType=U;g.convertMediaMetadataDetailsToMediaMetadata=W;g.echoMessageSetMediaMetadataFields=a;g.echoMessageDecodeMediaDataFields=c;g.setMediaIntFields=X;g.setMediaEnumFields=Z;g.getAttachmentObjectIdsFromMultiBlobMediaMsg=$;g.decodeReceiverFetchData=e}),98);
__d("EchoMessageMediaGroupFieldUtil",["EchoDecodingUtils","EchoEncodingUtils","EchoMessage"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){b.groupId!=null&&d("EchoEncodingUtils").echoSetStringField(a,d("EchoMessage").ECHO_MESSAGE_FIELD_GROUP_ID,b.groupId),b.groupIndex!=null&&d("EchoEncodingUtils").echoSetIntField(a,d("EchoMessage").ECHO_MESSAGE_FIELD_GROUP_INDEX,b.groupIndex),b.groupSize!=null&&d("EchoEncodingUtils").echoSetIntField(a,d("EchoMessage").ECHO_MESSAGE_FIELD_GROUP_SIZE,b.groupSize)}function b(a,b){var c=d("EchoDecodingUtils").echoDecodeStringField(a,d("EchoMessage").ECHO_MESSAGE_FIELD_GROUP_ID);c.success&&c.result!=null&&(b.groupId=c.result);c=d("EchoDecodingUtils").echoDecodeIntField(a,d("EchoMessage").ECHO_MESSAGE_FIELD_GROUP_INDEX);c.success&&c.result!=null&&(b.groupIndex=c.result);c=d("EchoDecodingUtils").echoDecodeIntField(a,d("EchoMessage").ECHO_MESSAGE_FIELD_GROUP_SIZE);c.success&&c.result!=null&&(b.groupSize=c.result)}g.echoMessageSetMediaGroupFields=a;g.decodeMessageMediaGroupFields=b}),98);
__d("EchoMessageQuoteFieldUtils",["$InternalEnum","EchoDecodingUtils","EchoEncodingUtils"],(function(a,b,c,d,e,f,g){"use strict";var h="Reply-Message-Id",i="Reply-Message-Sender",j="Reply-Sort-Order",k="Reply-Type",l="Reply-Status",m=b("$InternalEnum").Mirrored(["BUMP"]),n=b("$InternalEnum")({VALID:"valid"});function a(a){var b={quoteMessageId:"<not set>",quoteMessageSender:{localKey:"<not set>",transportKey:"<not set>"},quoteSortOrderInMs:0},c=o(a,b),d=p(a,b),e=q(a,b);a=r(a,b);return!c||!d||!e||!a?null:b}function c(a,b){b=b.quoteData;if(b==null)return;d("EchoEncodingUtils").echoSetStringField(a,h,b.quoteMessageId);d("EchoEncodingUtils").echoSetAddressField(a,i,b.quoteMessageSender);d("EchoEncodingUtils").echoSetIntField(a,j,b.quoteSortOrderInMs);b.status!=null&&d("EchoEncodingUtils").echoSetStringField(a,l,b.status);b.replyType!=null&&d("EchoEncodingUtils").echoSetStringField(a,k,b.replyType)}function o(a,b){var c=[{fieldName:"quoteMessageSender",id:i}];for(var e=0;e<c.length;e++){var f=c[e],g=f.fieldName;f=f.id;f=d("EchoDecodingUtils").echoDecodeAddressField(a,f);var h=f.result;f=f.success;if(f&&h!=null)b[g]=h;else return!1}return!0}function p(a,b){var c=[{fieldName:"quoteMessageId",id:h}];for(var e=0;e<c.length;e++){var f=c[e],g=f.fieldName;f=f.id;f=d("EchoDecodingUtils").echoDecodeStringField(a,f);var i=f.result;f=f.success;if(f&&i!=null)b[g]=i;else return!1}return!0}function q(a,b){var c=[{fieldName:"quoteSortOrderInMs",id:j}];for(var e=0;e<c.length;e++){var f=c[e],g=f.fieldName;f=f.id;f=d("EchoDecodingUtils").echoDecodeIntField(a,f);var h=f.result;f=f.success;if(f&&h!=null)b[g]=h;else return!1}return!0}function r(a,b){var c=d("EchoDecodingUtils").echoDecodeStringField(a,k);c=m.cast(c.result);c!=null&&(b.replyType=c);c=d("EchoDecodingUtils").echoDecodeStringField(a,l);a=n.cast(c.result);a!=null&&(b.status=a);return!0}g.EchoMessageQuoteReplyType=m;g.EchoMessageQuoteStatus=n;g.echoMessageDecodeQuoteFields=a;g.echoMessageSetQuoteFields=c}),98);
__d("EchoMessageReceiptStatusFieldUtils",["$InternalEnum","EchoCommonUtils","EchoDecodingUtils","EchoEncodingUtils","WALogger"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] Error occurred while decoding participants from echo doc, error: ",""]);h=function(){return a};return a}var i="Receipt-Status",j="Receipt-Timestamp",k=b("$InternalEnum")({UNKNOWN:"unknown",SENDING:"sending",SERVER_RECEIVED:"server_received",DELIVERED:"delivered",READ:"read",ERROR:"error",NON_RETRYABLE_ERROR:"non_retryable_error"});function a(a,b){if(b==null||b.length===0)return;b.forEach(function(b){d("EchoEncodingUtils").echoSetStringField(a,d("EchoCommonUtils").getEchoAddressFieldNameWithSuffix(b.address,i),b.status),b.timestampMs!=null&&d("EchoEncodingUtils").echoSetIntField(a,d("EchoCommonUtils").getEchoAddressFieldNameWithSuffix(b.address,j),b.timestampMs)})}function c(a){var b=[];l(a).forEach(function(c){var e=d("EchoCommonUtils").getEchoAddressFieldNameWithSuffix(c,i);e=d("EchoDecodingUtils").echoDecodeStringField(a,e);if(e.success){e=(e=k.cast(e.result))!=null?e:k.UNKNOWN;var f=d("EchoCommonUtils").getEchoAddressFieldNameWithSuffix(c,j);f=d("EchoDecodingUtils").echoDecodeNullableIntField(a,f);f.result!=null?b.push({address:c,status:e,timestampMs:f.result}):b.push({address:c,status:e})}});return b}function l(a){var b=new Set();for(var a=a.keys(),c=Array.isArray(a),e=0,a=c?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var f;if(c){if(e>=a.length)break;f=a[e++]}else{e=a.next();if(e.done)break;f=e.value}f=f;if(f.includes(i))try{f=f.split("@");var g=f[0];f=m(f[1]);b.add({localKey:g,transportKey:f})}catch(a){d("WALogger").ERROR(h(),a)}}return Array.from(b)}function m(a){a=a.split(i);return a[0].split("-")[0]}g.MessageReceiptStatus=k;g.echoMessageSetReceiptStatusDataFields=a;g.echoMessageDecodeReceiptStatusDataFields=c}),98);
__d("EchoMessageXMAFieldUtils",["$InternalEnum","EchoDecodingUtils","EchoEncodingUtils","WALogger"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] Missing "," from xma fields"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] Missing "," from xma fields"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] Missing "," from media fields"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] Missing xmaIsTombstoned from xma fields"]);k=function(){return a};return a}var l="XMA-Default-CTA",m="XMA-Gating-Type",n="XMA-Header-Subtitle",o="XMA-Header-Title",p="XMA-Is-Tombstoned",q="XMA-Layout-Type",r="XMA-Max-Subtitle-Num-Lines",s="XMA-Max-Title-Num-Lines",t="XMA-Subtitle-Text",u="XMA-Target-Expiry",v="XMA-Target-ID",w="XMA-Target-Type",x="XMA-Target-Username",y="XMA-Title-Text",z="XMA-Content-Ref",A=b("$InternalEnum").Mirrored(["SINGLE","HSCROLL","VSTACK","PORTRAIT"]),B=b("$InternalEnum").Mirrored(["NONE","IG_STORY_PHOTO_MENTION","IG_SINGLE_IMAGE_POST_SHARE","IG_MULTIPOST_SHARE","IG_SINGLE_VIDEO_POST_SHARE","IG_STORY_PHOTO_SHARE","IG_STORY_VIDEO_SHARE","IG_CLIPS_SHARE","IG_IGTV_SHARE","IG_SHOP_SHARE","IG_PROFILE_SHARE","IG_STORY_PHOTO_HIGHLIGHT_SHARE","IG_STORY_VIDEO_HIGHLIGHT_SHARE","IG_STORY_REPLY","IG_STORY_REACTION","FB_FEED_SHARE","FB_STORY_REPLY","FB_STORY_SHARE","FB_STORY_MENTION","FB_FEED_VIDEO_SHARE","FB_GAMING_CUSTOM_UPDATE","FB_PRODUCER_STORY_REPLY","MSG_EXTERNAL_LINK_SHARE","MSG_RECEIVER_FETCH","RTC_AUDIO_CALL","RTC_VIDEO_CALL","RTC_MISSED_AUDIO_CALL","RTC_MISSED_VIDEO_CALL","RTC_GROUP_AUDIO_CALL","RTC_GROUP_VIDEO_CALL","FB_EVENT","FB_SHORT"]),C=b("$InternalEnum").Mirrored(["NONE","PRIVATE","SENSITIVE","MISINFORMATION","MEDIA_LABEL","POST_COVER","POST_LABEL","WARNING_SCREENS","INFO","EYE_OFF","NEWS_OFF","WARNING"]);function a(a,b){b.xmaLayoutType!=null&&d("EchoEncodingUtils").echoSetStringField(a,q,b.xmaLayoutType),b.xmaTargetType!=null&&d("EchoEncodingUtils").echoSetStringField(a,w,b.xmaTargetType),d("EchoEncodingUtils").echoSetStringField(a,x,b.xmaTargetUsername),d("EchoEncodingUtils").echoSetStringField(a,v,b.xmaTargetId),b.xmaTargetExpiry!=null&&d("EchoEncodingUtils").echoSetIntField(a,u,b.xmaTargetExpiry),d("EchoEncodingUtils").echoSetStringField(a,l,b.xmaDefaultCTA),d("EchoEncodingUtils").echoSetStringField(a,o,b.xmaHeaderTitle),d("EchoEncodingUtils").echoSetStringField(a,n,b.xmaHeaderSubtitle),d("EchoEncodingUtils").echoSetStringField(a,y,b.xmaTitleText),d("EchoEncodingUtils").echoSetStringField(a,t,b.xmaSubtitleText),b.xmaMaxTitleNumLines!=null&&d("EchoEncodingUtils").echoSetIntField(a,s,b.xmaMaxTitleNumLines),b.xmaMaxSubtitleNumLines!=null&&d("EchoEncodingUtils").echoSetIntField(a,r,b.xmaMaxSubtitleNumLines),b.xmaGatingType!=null&&d("EchoEncodingUtils").echoSetStringField(a,m,b.xmaGatingType),d("EchoEncodingUtils").echoSetBooleanField(a,p,b.xmaIsTombstoned),b.xmaContentRef!=null&&d("EchoEncodingUtils").echoSetStringField(a,z,b.xmaContentRef)}function c(a){var b=F(a,p);if(b==null){d("WALogger").ERROR(k());return null}var c=C.cast(d("EchoDecodingUtils").echoDecodeStringField(a,m).result),e=A.cast(d("EchoDecodingUtils").echoDecodeStringField(a,q).result),f=B.cast(d("EchoDecodingUtils").echoDecodeStringField(a,w).result);return{xmaContentRef:D(a,z),xmaDefaultCTA:D(a,l),xmaGatingType:c,xmaHeaderSubtitle:D(a,n),xmaHeaderTitle:D(a,o),xmaIsTombstoned:b,xmaLayoutType:e,xmaMaxSubtitleNumLines:E(a,r),xmaMaxTitleNumLines:E(a,s),xmaSubtitleText:D(a,t),xmaTargetExpiry:E(a,u),xmaTargetId:D(a,v),xmaTargetType:f,xmaTargetUsername:D(a,x),xmaTitleText:D(a,y)}}function D(a,b){a=d("EchoDecodingUtils").echoDecodeStringField(a,b);var c=a.result;a=a.success;if(a&&c!=null)return c;else d("WALogger").WARN(j(),b)}function E(a,b){a=d("EchoDecodingUtils").echoDecodeIntField(a,b);var c=a.result;a=a.success;if(a&&c!=null)return c;else d("WALogger").WARN(i(),b)}function F(a,b){a=d("EchoDecodingUtils").echoDecodeBooleanField(a,b);var c=a.result;a=a.success;if(a&&c!=null)return c;else d("WALogger").WARN(h(),b)}g.XMALayoutType=A;g.XMAContentType=B;g.XMAGatingType=C;g.echoMessageSetXMAFields=a;g.decodeXMAFields=c}),98);
__d("LSEBPayloadSerializerError",[],(function(a,b,c,d,e,f){a=Object.freeze({INVALID_BACKUP_OPERATION:-7,INVALID_CONTENT_TYPE:-6,INVALID_PAYLOAD_FORMAT:-5,CQL_DB_ERROR:-4,REQUIRED_COLUMN_NOT_PRESENT_ON_CLIENT:-3,DEPRECATED_SPROC:-2,UNKNOWN_ERROR:-1,NOT_AN_ERROR:0,BACKUP_NOT_FOUND:1,REQUIRED_TABLE_NOT_FOUND:2,NATIVE_OP_NOT_FOUND:3,BACKUP_UPLOAD_KILLSWITCHED:4,TASK_ID_NOT_FOUND:5,NOT_IMPLEMENTED:6,NOT_SUPPORTED_ON_WEB:7,DUPLICATE_TASK:8,CLIENT_STATE_NOT_LOADED:9,RECOVERY_CODE_NOT_FOUND:10,EPOCH_KEYS_NOT_FOUND:11,DEVICE_PAYLOAD_NOT_CREATED:12,NULL_DEVICE_PAYLOAD:13,EPOCH_PAYLOAD_NOT_CREATED:14,NULL_EPOCH_PAYLOAD:15,VIRTUAL_DEVICE_PAYLOAD_NOT_CREATED:16,NULL_VIRTUAL_DEVICE_PAYLOAD:17,DEVICE_METADATA_NOT_FOUND:18,NO_MATCHING_DEVICE_PUBLIC_KEY:19,NULL_MAILBOX_ROOT_KEY:20,NULL_ENCRYPTION_VERSION:21,NULL_OCMF_KEY:22,NULL_EPOCH_KEYS:23,NULL_DEVICE_ID:24,OPE_KEY_DERIVATION_FAILED:25,MESSAGE_KEY_DERIVATION_FAILED:26,NULL_MAILBOX_ROOT_KEY_V2:27,ECHO_DOCUMENT_ENCODING_FAILED:30,ECHO_PAYLOAD_CREATION_DISABLED:31,MESSAGE_PAYLOAD_ENCRYPTION_FAILED:40,SERVER_THREAD_ID_NOT_FOUND_FOR_JID:52,UNKNOWN_PROTOBUF_TYPE:60,SUPPLEMENTARY_DATA_KEY_UNEXPECTED:61,PROTOBUF_ENCRYPTION_FAILED:62,PROTOBUF_NOT_FOUND_IN_TOPLEVEL_TABLE:63,PROTOBUF_NOT_FOUND_IN_SUPPLEMENTAL_TABLE:64,SUPPLEMENTAL_KEY_NOT_SET_IN_CONTEXT_TABLE:65,SUPPLEMENTAL_ENCRYPTION_FAILED:66,PROTOBUF_CONTEXT_ROW_NOT_FOUND:67,PROTOBUF_FORMATTING_FAILED:68,SUPPLEMENTAL_FORMATTING_FAILED:69,PROTOBUF_ALREADY_DELETED:70,PROTOBUF_NOT_FOUND_IN_DELETED_MESSAGES_TABLE:71,DELETION_PROTOBUF_IS_NULL:72,THREAD_PK_NOT_FOUND_FOR_JID:100,MESSAGE_DECRYPTION_FAILED:101,EPOCH_KEY_FETCH_FAILED:102,TOO_MANY_OPEN_EPOCHS:103,MESSAGE_RANGE_PREPARE_FAILURE:104,ECHO_DOCUMENT_RESTORE_FAILED:105,MISMATCH_POINT_QUERY_MESSAGE_AND_RANGE_LENGTH:106,INITIAL_THREADS_FETCH_FOR_RESTORE_FAILED:107,MISSING_SUPPLEMENTAL_KEY_CIPHERTEXT:108,SUPPLEMENTAL_KEY_DECRYPTION_FAILURE:109,DEVICE_ID_MISMATCH:110,RESTORE_TO_TAM_INFO:111,MISSING_SERVER_THREAD_KEY:112,EB_ADD_DEVICE_FOUND_NO_LOCAL_THREADS:113,EB_MORE_THREADS_IN_MAPPING_TABLE:114,RESTORE_INTEGRITY_CHECK_FAILED:115,MESSAGE_PK_NOT_FOUND_IN_CLIENT_MESSAGES:200,OTID_NOT_FOUND_IN_ACT_MESSAGES:201,THREAD_ID_NOT_FOUND_IN_ACT_THREADS:202,THREAD_PK_NOT_FOUND_IN_CLIENT_THREADS:203,FAILED_TO_GET_THREAD_SORT_KEY:204,MEDIA_INFO_INVALID:205,REVERB_DB_NOT_ENABLED_FOR_INSTAMADILLO:206,SKIPPED_EB_DISABLED:300,SKIPPED_THREAD_NOT_ELIGIBLE:301,SKIPPED_MESSAGE_NOT_ELIGIBLE:302,NO_EPOCHS_FOUND:400,LATEST_EPOCH_QUERY_BY_ID_FAILED:401,FOUND_EPOCH_WITH_NULL_ROOT_KEY:402,FOUND_EPOCH_WITH_NULL_ANON_ID:403,NO_RECOVERY_CODE:501,NO_ERROR:601,ERROR_GENERAL:602,UNKNOWN:603,ONBOARDING_MATERIAL_DERIVATION_FAILURE:604,NULL_DEVICE_HMAC:605,MISSING_LATEST_EPOCH_AT_ONBOARDING:606,NO_THREADS_TO_COMPARE:701,START_SORT_KEY_FAILURE:702,END_SORT_KEY_FAILURE:703,LOOPING_UPLOAD_PAYLOAD_NOT_FOUND:704,NULL_ECHO_IDENTIFIERS:705,ECHO_TIMESTAMP_CONVERSION_FAILED:706,ECHO_PROTOBUF_THREAD_ID_MISMATCH:707,ECHO_PROTOBUF_TIMESTAMP_MISMATCH:708,ECHO_PROTOBUF_OTID_MISMATCH:709,NULL_ECHO_DOCUMENT:710,INVALID_PROTOBUF_BACKUP_ACTION:711,EMPTY_ENCODED_ECHO_DOCUMENT:712,ECHO_DOCUMENT_ENCODING_UNKNOWN_ENCODING_ERROR:750,ECHO_DOCUMENT_ENCODING_MESSAGE_PK_NOT_FOUND_ERROR:751,ECHO_DOCUMENT_ENCODING_DISK_WRITE_CHECK_FAILED:752,ECHO_DOCUMENT_ENCODING_THREAD_TRANSPORT_ID_FETCH_FAILED:753,ECHO_DOCUMENT_ENCODING_FILE_WRITE_FAILED:754,ECHO_DOCUMENT_ENCODING_DISK_WRITE_DISABLED:755,ECHO_DOCUMENT_ENCODING_SHOULD_NOT_PERSIST:756,MISSING_SUPPLEMENTAL_DATA:757,ECHO_DOCUMENT_ENCODING_MESSAGE_FIELDS_REPLY_PROXY_ERROR:758,ECHO_DOCUMENT_ENCODING_MESSAGE_FIELDS_EDIT_MESSAGE_QUERY_ERROR:759,ECHO_DOCUMENT_ENCODING_MESSAGE_FIELDS_EDIT_MESSAGE_ERROR:760,ECHO_DOCUMENT_ENCODING_MESSAGE_FIELDS_RECEIPTS_ERROR:761,ECHO_DOCUMENT_ENCODING_MESSAGE_FIELDS_REACTIONS_ERROR:762,ECHO_DOCUMENT_ENCODING_MESSAGE_FIELDS_VISUAL_MESSAGE_ACTIONS_ERROR:763,ECHO_DOCUMENT_ENCODING_MESSAGE_FIELDS_POLLS_ERROR:764});f["default"]=a}),66);
__d("MAWBridgeTypesCreators",["I64","MAWDbMsg","MAWImageUtils","MAWMsgType","MAWThreadBumpType","MAWUserJidWrapper","WAJids","WAMediaUtils","WATimeUtils","err","gkx","justknobx"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){return{threadJid:a}}function i(a){var b,c=a.ts;switch(a.type){case d("MAWMsgType").MSG_TYPE.REVOKED:c=(b=a.originalTs)!=null?b:a.ts;break;default:c=d("MAWDbMsg").getCanonicalTsFromMsg(a)}return{msgId:a.msgId,ts:c}}function b(a,b){b=b.map(i);return{messages:b,threadJid:a}}function e(a){return{ravenMsgId:a.msgId,threadJid:a.threadJid}}function f(a,b){return a.filter(function(a){return b===a.threadJid}).map(function(a){return a.msgId})}function j(a){var b,e=a.chatJid,f=a.filteredMsgIds,g=a.hasMediaForUI,h=a.media,i=a.offlineAttachmentId,j=a.ravenSettings,k=a.sortOrderMs;a=a.transportKey;switch(h.mediaType){case"Image":return{duration:null,ephemeralMediaState:j==null?void 0:j.ephemeralMediaState,ephemeralMediaViewMode:j==null?void 0:j.ephemeralMediaViewMode,filesize:h.size,hasMedia:g,hasPreviewMedia:((b=h.validatedImageInfo)==null?void 0:b.jpegThumbnail)!=null,mediaId:h.mediaId,mediaType:h.mediaType,msgIds:f,offlineAttachmentId:i,plaintextHash:h.plaintextHash,previewHeight:(b=h.validatedImageInfo)==null?void 0:b.jpegThumbnailHeight,previewHeightLarge:(b=h.validatedImageInfo)==null?void 0:b.height,previewWidth:(b=h.validatedImageInfo)==null?void 0:b.jpegThumbnailWidth,previewWidthLarge:(b=h.validatedImageInfo)==null?void 0:b.width,sortOrderMs:d("WATimeUtils").castToMillisTime(k!=null?k:h.ts*1e3),threadJid:e,transportKey:a,ts:d("WATimeUtils").castToUnixTime(k!=null?k/1e3:h.ts)};case"Video":return{duration:((b=h.validatedVideoInfo)==null?void 0:b.duration)!=null?((b=h.validatedVideoInfo)==null?void 0:b.duration)*1e3:0,ephemeralMediaState:j==null?void 0:j.ephemeralMediaState,ephemeralMediaViewMode:j==null?void 0:j.ephemeralMediaViewMode,filesize:h.size,hasMedia:g,hasPreviewMedia:((b=h.validatedVideoInfo)==null?void 0:b.jpegThumbnail)!=null,mediaId:h.mediaId,mediaType:h.mediaType,msgIds:f,offlineAttachmentId:i,plaintextHash:h.plaintextHash,previewHeight:(j=h.validatedVideoInfo)==null?void 0:j.jpegThumbnailHeight,previewHeightLarge:(b=h.validatedVideoInfo)==null?void 0:b.height,previewWidth:(j=h.validatedVideoInfo)==null?void 0:j.jpegThumbnailWidth,previewWidthLarge:(b=h.validatedVideoInfo)==null?void 0:b.width,sortOrderMs:d("WATimeUtils").castToMillisTime(k!=null?k:h.ts*1e3),threadJid:e,transportKey:a,ts:d("WATimeUtils").castToUnixTime(k!=null?k/1e3:h.ts)};case"Ptt":return{duration:((j=h.validatedAudioInfo)==null?void 0:j.duration)?h.validatedAudioInfo.duration*1e3:null,filesize:h.size,hasMedia:g,mediaId:h.mediaId,mediaType:h.mediaType,msgIds:f,offlineAttachmentId:i,plaintextHash:h.plaintextHash,previewHeight:null,previewHeightLarge:null,previewWidth:null,previewWidthLarge:null,sortOrderMs:d("WATimeUtils").castToMillisTime(k!=null?k:h.ts*1e3),threadJid:e,transportKey:a,ts:d("WATimeUtils").castToUnixTime(k!=null?k/1e3:h.ts)};case"Gif":return{duration:null,filesize:h.size,hasMedia:g,mediaId:h.mediaId,mediaType:h.mediaType,msgIds:h.msgIds,offlineAttachmentId:i,plaintextHash:h.plaintextHash,previewHeight:(b=h.validatedImageInfo)==null?void 0:b.jpegThumbnailHeight,previewHeightLarge:(j=h.validatedImageInfo)==null?void 0:j.height,previewWidth:(b=h.validatedImageInfo)==null?void 0:b.jpegThumbnailWidth,previewWidthLarge:(j=h.validatedImageInfo)==null?void 0:j.width,sortOrderMs:d("WATimeUtils").castToMillisTime(k!=null?k:h.ts*1e3),threadJid:e,transportKey:a,ts:d("WATimeUtils").castToUnixTime(k!=null?k/1e3:h.ts)};case"Sticker":b=d("MAWImageUtils").boundHeightWidth((b=h.validatedImageInfo)==null?void 0:b.jpegThumbnailHeight,(j=h.validatedImageInfo)==null?void 0:j.jpegThumbnailWidth,d("MAWImageUtils").STICKER_THUMBNAIL_MAX_SIZE);j=b.height;b=b.width;return{duration:null,filesize:h.size,hasMedia:g,mediaId:h.mediaId,mediaType:h.mediaType,msgIds:h.msgIds,offlineAttachmentId:i,plaintextHash:h.plaintextHash,previewHeight:j,previewHeightLarge:j,previewWidth:b,previewWidthLarge:b,sortOrderMs:d("WATimeUtils").castToMillisTime(k!=null?k:h.ts*1e3),threadJid:e,transportKey:a,ts:d("WATimeUtils").castToUnixTime(k!=null?k/1e3:h.ts)};case"DocumentFile":j={};for(var b=h.mediaEntries,l=Array.isArray(b),m=0,b=l?b:b[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var n;if(l){if(m>=b.length)break;n=b[m++]}else{m=b.next();if(m.done)break;n=m.value}n=n;var o=n[0];n=n[1];n=d("WAMediaUtils").mediaEntryDataToRawData(h.plaintextHash,n);n=n.filename;n!=null&&(j[o]=n)}return{defaultFilename:(o=h.validatedDocumentFileInfo)==null?void 0:o.filename,duration:null,filenames:j,filesize:h.size,hasMedia:g,mediaId:h.mediaId,mediaType:h.mediaType,msgIds:f,offlineAttachmentId:i,plaintextHash:h.plaintextHash,previewHeight:null,previewHeightLarge:null,previewWidth:null,previewWidthLarge:null,sortOrderMs:d("WATimeUtils").castToMillisTime(k!=null?k:h.ts*1e3),threadJid:e,transportKey:a,ts:d("WATimeUtils").castToUnixTime(k!=null?k/1e3:h.ts)};default:h.mediaType;throw c("err")("[createBridgeMedia] Unsupported media type: "+h.mediaType)}}function k(a,b,c,e,f){return{chatJid:a,deliveredWatermarkTs:(a=c)!=null?a:d("WATimeUtils").castToUnixTime(0),fbid:b,lastReadActionTs:(c=f)!=null?c:d("WATimeUtils").castToUnixTime(0),lastReadWatermarkTs:(a=e)!=null?a:d("WATimeUtils").castToUnixTime(0)}}function l(a){var b=a.cannotReplyReason,c=a.folder,d=a.muteExpireTimeMs,e=a.snippetParams,f=a.snippetSenderContactId,g=a.snippetType;a=a.threadJid;return{cannotReplyReason:b,folder:c,muteExpireTimeMs:d,snippetContactIDs:e==null?void 0:e.contactIDs,snippetMentionJIDs:e==null?void 0:e.mentionJIDs,snippetParams:e==null?void 0:e.strings,snippetSenderContactId:f,snippetType:g,threadJid:a}}function m(a){return{chatJid:a.groupJid,memberAddMode:a.memberAddMode,threadName:a.name}}var n={snippetContactIDs:[],snippetMentionJIDs:[],snippetParams:[],snippetSenderContactId:null,snippetType:null};function o(a){var b,c=a.bumpTimestampMs,d=a.description,e=a.isMessageAuthorMe,f=a.isUnbump,g=a.skipBumpTimestampValidation,h=a.skipServerThreadBump,i=a.snippetData;a=a.threadJid;b=i==null?n:{snippetContactIDs:i.params.contactIDs,snippetMentionJIDs:(b=i.params.mentionJIDs)!=null?b:[],snippetParams:i.params.strings,snippetSenderContactId:i.senderContactId,snippetType:i.type};return babelHelpers["extends"]({},b,{bumpTimestampMs:c,description:d,isMessageAuthorMe:e,isUnbump:f,skipBumpTimestampValidation:(i=g)!=null?i:!1,skipServerThreadBump:(b=h)!=null?b:!1,threadJid:a})}var p={bumpedByLocalDeviceSend:!1,bumpTimestampMs:(h||d("I64")).zero,isAuthorMe:!1,isThrottled:!1,isUnbump:!1,threadBumpType:d("MAWThreadBumpType").THREAD_BUMP_TYPE.NO_UPDATE};function q(a){var b=a.centralizedThreadBumpData,c=a.centralizedThreadSnippetData,d=a.description,e=a.jid;a=a.threadUpdateType;return babelHelpers["extends"]({},(b=b)!=null?b:p,{centralizedThreadSnippetData:c,description:d,jid:e,threadUpdateType:a})}function r(a){var b;if(c("gkx")("239"))return 0;return!c("justknobx")._("2319")?d("MAWDbMsg").getOriginalTsFromMsg(a)*1e3:(b=a.sortOrderMs)!=null?b:d("MAWDbMsg").getOriginalTsFromMsg(a)*1e3}function s(a,b,d,e,f,g){g===void 0&&(g="before");b=b;if(b.length===0)return{chatJid:a,rangeExtensionType:null};if(d)return{chatJid:a,rangeExtensionType:{hasMoreBefore:e,maxMsgId:b[0].msgId,minMsgId:b[b.length-1].msgId,minMsgTs:r(b[b.length-1]),rangeKind:"initial"}};return c("gkx")("23927")?{chatJid:a,rangeExtensionType:{hasMoreAfter:f,hasMoreBefore:e,maxMsgId:b[0].msgId,maxMsgTs:r(b[0]),minMsgId:b[b.length-1].msgId,minMsgTs:r(b[b.length-1]),rangeKind:g==="before"?"before":"after"}}:{chatJid:a,rangeExtensionType:{hasMoreBefore:e,minMsgId:b[b.length-1].msgId,minMsgTs:r(b[b.length-1]),rangeKind:"extensionBefore"}}}function t(a){var b=a.author,c=a.chatJid,e=a.reaction,f=a.reactToMsgId;a=a.ts;return{actorId:d("WAJids").authorToUserId(b,d("WAJids").extractUserId(d("MAWUserJidWrapper").getMyUserJid())),chatJid:c,messageId:f,reaction:e,ts:a}}function u(a){var b=a.newestMsgId,c=a.newestMsgTs,e=a.oldestMsgId;a=a.thread;return{hasMoreAfter:!1,hasMoreBefore:!1,maxMsgId:b,maxMsgTs:c,minMsgId:e,minMsgTs:d("WATimeUtils").castToMillisTime(0),threadJid:a.jid}}function v(a){var b=d("WAJids").extractUserId(d("MAWUserJidWrapper").getMyUserJid()),c=a.author,e=a.chatJid;a=a.reactToMsgId;return{actorId:d("WAJids").authorToUserId(c,b),chatJid:e,messageId:a}}function w(a){return{creationTs:a.creationTs,creator:a.creator,groupJid:a.groupJid,msgExpiration:a.msgExpiration,name:a.name,nameOwner:a.nameOwner,nameTs:a.nameTs,participantVersion:a.participantVersion}}function x(a){var b=a.threadJid,c=a.inviteeJid;return{caption:a.caption,inviteCode:a.inviteCode,inviteeId:c,inviteExpireTs:a.inviteExpirationTs,inviterId:d("WAJids").extractUserId(a.inviterJid),threadJid:b}}function y(a){return{threadJid:a}}function z(a,b,c){return{senderId:d("WAJids").extractUserId(b),state:c,threadJid:a}}g.createBridgeUpdateE2EEMetadataParticipants=a;g.createBridgeDeleteMessages=b;g.createBridgeRavenAction=e;g.getMsgIdsFilteredByJid=f;g.createBridgeMedia=j;g.createBridgeReceivedReceipt=k;g.createBridgeUpdatedThread=l;g.createBridgeUpdatedGroupInfo=m;g.createBridgeBumpedThreadV2=o;g.createBridgeCentralizedThreadUpdate=q;g.createBridgeMsgsLoadedInfo=s;g.createBridgeUpsertReaction=t;g.createBridgeUpdateMessageRange=u;g.createBridgeDeleteReaction=v;g.createBridgeGroupInfo=w;g.createBridgeGroupInvite=x;g.createBridgeDeleteGroupInvite=y;g.createBridgeReceivedChatState=z}),98);
__d("EncryptedBackupsAttachmentProductType",["$InternalEnum"],(function(a,b,c,d,e,f){a=b("$InternalEnum")({MSGR:"msgr",IGD:"igd"});c=a;f["default"]=c}),66);
__d("MAWBridgeUpload",["MAWMainTraceUtils"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=a.actionType,c=a.attachmentContext,d=a.attachmentContextArray,e=a.authTs,f=a.echoDocument,g=a.echoEncodingLatencyNs,i=a.errorCode,j=a.errorMessage,k=a.messageId,l=a.messageType,m=a.productType,n=a.protoMsg,o=a.sortOrderMs,p=a.threadId,q=a.traceId;a=a.uploadTrackingInstanceKey;c=h(c,m!=null?m:"msgr",d);return{actionType:b,attachmentBackupContext:c,authTs:e,echoDocument:f,echoEncodingLatencyNs:g,errorCode:i,errorMessage:j,messageId:k,messageType:l,protoMsg:n,sortOrderMs:o,threadId:p,traceId:q,uploadTrackingInstanceKey:a}}function b(a,b,c,d,e,f){return{actionType:f,echoDocument:e,folderType:b,threadId:a,transportKey:c,ts:d}}function c(a,b,c,d,e,f,g,h){return{deliveryObjectId:a,mediaType:b,messageId:c,productType:d,threadId:e,threadJid:f,traceId:h,ts:g}}function h(a,b,c){if(c==null)return void 0;else{a=c.map(function(a){return{attachmentTraceId:d("MAWMainTraceUtils").createTraceId(),mediaType:a.mediaType,zippyObjectId:a.mediaObjectId}});c={attachmentInfos:a,productType:b};return c}}g.createBridgeUploadMessage=a;g.createBridgeDeleteMessagesOfThread=b;g.createBridgeUploadAttachment=c;g.createBridgeUploadAttachmentBackupContext=h}),98);
__d("MAWDbParticipant",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){return a+"_"+b}f.craftParticipantId=a}),66);
__d("MAWDbThread",["MAWHexUtils"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){return d("MAWHexUtils").orderPreservingHex(a)+"_"+b}g.craftThreadOrder=a}),98);
__d("MAWDexie",["cr:10766"],(function(a,b,c,d,e,f,g){"use strict";f.exports=b("cr:10766")}),34);
__d("MAWDexieTable",["MAWDexie","Promise","justknobx"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(a){return(h||(h=b("Promise"))).resolve(a)}function a(a){return a.reduce(function(a,b,c){return a.then(function(a){return b(c).then(function(b){a.push(b);return a})})},n([]))}function e(a){return c("MAWDexie").Promise.all(a)}function f(a){return c("MAWDexie").Promise.allSettled(a)}function j(a){return c("MAWDexie").Promise.PSD[a]}function k(a,b){c("MAWDexie").Promise.PSD[a]=b}function l(a){c("MAWDexie").Promise.PSD[a]=void 0}var m=function(){function a(a,b,d,e){d===void 0&&(d=!0);e=new(c("MAWDexie"))(a,babelHelpers["extends"]({},e,{chromeTransactionDurability:"relaxed",modifyChunkSize:c("justknobx")._("3166")}));b(e);this.name=a;this.stores=e;d&&this.open()}var b=a.prototype;b.open=function(){this.stores.open()};b.close=function(){this.stores.close()};b.transact=function(a,b,c){var d=this;return i(this.stores.transaction(a,b.map(function(a){return d.stores[a]}),function(){return c()}))};babelHelpers.createClass(a,[{key:"tables",get:function(){return this.stores.tables}}]);return a}();function n(a){return c("MAWDexie").Promise.resolve(a)}function o(a){return c("MAWDexie").waitFor(a)}g.DEXIE_MIN_KEY=d("MAWDexie").Dexie.minKey;g.DEXIE_MAX_KEY=d("MAWDexie").Dexie.maxKey;g.undexify=i;g.dexieSequentialAll=a;g.dexieAll=e;g.dexieAllSettled=f;g.getDexiePSDItem=j;g.setDexiePSDItem=k;g.clearDexiePSDItem=l;g.DexieTable=m;g.dexieResolve=n;g.dexieExpensiveAwait=o}),98);
__d("WADbSignal",[],(function(a,b,c,d,e,f){"use strict";function a(a){return a}function b(a,b,c){return a+"_"+b+"_"+c}c={abProps:"abProps",authKeyPair:"authKeyPair",cat:"cat",certificateChain:"certificateChain",clockSkew:"clockSkew",deviceId:"deviceId",deviceUUID:"deviceUUID",edgeInfo:"edgeInfo",fbid:"fbid",identityKeyPair:"identityKeyPair",lastPrekeyGenerationId:"lastPrekeyGenerationId",lastPrekeyId:"lastPrekeyId",lastSessionDeviceWasLinkedTo:"lastSessionDeviceWasLinkedTo",lastSignedPrekeyId:"lastSignedPrekeyId",regId:"regId",registrationVersion:"registrationVersion"};({msgrDeviceId:"msgrDeviceId"});f.unsafeCoerceToSenderKeySessionId=a;f.buildSenderKeySessionId=b;f.MetaKeysEnum=c}),66);
__d("MAWDbSchema.dexie",["MAWDbMsg","MAWDbParticipant","MAWDbThread","MAWDbVersionList","MAWDexie","MAWDexieTable","MAWFolderTypes","MAWLocalizationType","MAWODSProxy","MAWTimeUtils","MAWWaitForBackendSetup","WADbSignal","WAJids","WALogger","WAMsg","WAMsgType","WAOdsEnums","WAStanzaUtils","WATimeUtils","emptyFunction","gkx","promiseDone","unrecoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Duplicate waMsgId found for receipt, number of duplicates: ",""]);i=function(){return a};return a}a=function(a){var b=function(a){var b;b=(b=a.quote)==null?void 0:b.content;return a.quoteExternalId!=null&&(b==null?void 0:b.media)!=null};return a.messages.where("quoteExternalId").between(d("WAStanzaUtils").toStanzaId("0"),d("WAStanzaUtils").toStanzaId("["),!0,!0).filter(b).toArray()["catch"](function(){return a.messages.filter(b).toArray()}).then(function(b){var c=new Set(b.map(function(a){a=(a=a.quote)==null?void 0:a.content;return a==null?void 0:(a=a.media)==null?void 0:a.plaintextHash}).filter(Boolean)),d=b.map(function(a){a=a.msgId;return a});return a.media.filter(function(a){a=a.plaintextHash;return c.has(a)}).toArray().then(function(b){var c=new Map(b.map(function(a){var b=a.mediaId;a=a.plaintextHash;return[a,b]}));return a.messages.where("msgId").anyOf(d).modify(function(a){var b;b=(b=a.quote)==null?void 0:b.content;a.quote.content.mediaId=c.get(b.media.plaintextHash);delete a.quote.content.media})})})};b=function(a){return a.groupInfo.toCollection().modify(function(a){typeof a.inviter==="number"&&delete a.inviter})};e=function(a){return a.meta.get(d("WADbSignal").MetaKeysEnum.deviceId).then(function(b){var c;if((b==null?void 0:(c=b.value)==null?void 0:c.deviceId)!=null&&typeof b.value.deviceId!=="number")return a.meta.clear()})};f=function(a){return a.threads.filter(function(a){return d("WAJids").switchOnMsgrChatJidType(a.jid,{group:function(){return!1},user:function(){return a.oldestMsg!=null}})}).toArray().then(function(b){var c=[];b.forEach(function(a){c.push(a.oldestMsg),c.push(a.newestMsg)});return a.messages.where("msgId").anyOf(c.filter(Boolean)).toArray().then(function(c){var e=new Map(),f=[],g=[];c.forEach(function(a){e.set(a.msgId,a)});b.forEach(function(b){var c=e.get(b.oldestMsg),h=e.get(b.newestMsg);(c==null?void 0:c.type)==="Admin"&&(h==null?void 0:h.type)==="Admin"&&(c.msgId===h.msgId?g.push(b.chatId):f.push(b));return d("MAWDexieTable").dexieAll(f.map(function(b){return a.messages.where("thread").equals(b.chatId).toArray()})).then(function(b){b.forEach(function(a){if(a.length===0)return;var b=a[0].thread;a=a.filter(function(a){return a.type!=="Admin"});if(a.length>0)return;g.push(b)});return d("MAWDexieTable").dexieAll([a.threads.bulkDelete(g),a.messages.where("thread").anyOf(g)["delete"]()])})})})})};var j=function(a){return a.unrenderedMessages.toCollection().modify(function(a){if(a.type===d("WAMsgType").MSG_TYPE.DELETE_FOR_ME){var b=a.messageDeleteForMeTs;a.messageDeleteForMeTs=b}})},k=function(a){var b=0,e=0,f=c("MAWDexie").currentTransaction;if(f==null)throw c("unrecoverableViolation")("transaction does not exist","maw_db");f.on("complete",function(){c("promiseDone")(d("MAWWaitForBackendSetup").waitForBackendSetup("DB upgrade to V31").then(function(){b>0&&d("MAWODSProxy").odsBumpEntityKey({amount:b,entity:d("WAOdsEnums").Entity.MESSAGE_MISSING_THREAD_JID,key:"fail"}),e>0&&d("MAWODSProxy").odsBumpEntityKey({amount:e,entity:d("WAOdsEnums").Entity.MESSAGE_MISSING,key:"fail"})}))});f.on("complete",function(){b>0&&d("MAWODSProxy").odsBumpEntityKey({amount:b,entity:d("WAOdsEnums").Entity.MESSAGE_MISSING_THREAD_JID,key:"fail"}),e>0&&d("MAWODSProxy").odsBumpEntityKey({amount:e,entity:d("WAOdsEnums").Entity.MESSAGE_MISSING,key:"fail"})});return a.threads.toArray().then(function(c){var f=c.reduce(function(a,b){b!=null&&a.set(b.chatId,b);return a},new Map());return d("MAWDexieTable").dexieAll([a.messages.toCollection().modify(function(a){if(a!=null){var c=f.get(a.thread);c!=null?a.threadJid=c.jid:b+=1}else e+=1}),a.unrenderedMessages.toCollection().modify(function(a){if(a!=null){var c=f.get(a.thread);c!=null?a.threadJid=c.jid:b+=1}else e+=1})])})},l=function(a){return a.isDualSend.toCollection().modify(function(a){a.version==null&&(a.version=1)})},m=function(a){return a.messages.toCollection().modify(function(a){a.type===d("WAMsgType").MSG_TYPE.ADMIN&&a.msgContent.adminType===d("MAWLocalizationType").LOCALIZATION_TYPE.E2EE_THREAD_DESCRIPTION&&(a.altIndex=d("MAWDbMsg").craftE2eeAdminMsgAltIndex(a.thread))})},n=function(a){return a.messages.toCollection().modify(function(a){a.sortOrderMs=d("MAWDbMsg").getSortOrderWithFallback(a)})},o=function(a){return a.threads.toCollection().modify(function(a){a.folder==null&&(a.folder=d("MAWFolderTypes").FOLDER_ID.INBOX)})},p=function(a){return a.messages.toCollection().modify(function(a){a.sortOrderMs=d("MAWDbMsg").getSortOrderWithFallback(a)})},q=function(a){return a.personalSenderKeyStatuses.toCollection().modify(function(a){a.rotateSenderKey=!0,a.hasSenderKey=new Set()})},r=function(a){return a.messages.toCollection().modify(function(a){a.type===d("WAMsgType").MSG_TYPE.ADMIN&&a.msgContent.adminType===d("MAWLocalizationType").LOCALIZATION_TYPE.CUTOVER_THREAD_ADMIN_MESSAGE&&a.sortOrderMs!=null&&a.sortOrderMs>0&&(a.sortOrderMs=0)})},s=function(a){return a.messages.toCollection().modify(function(a){!(a.type===d("WAMsgType").MSG_TYPE.ADMIN&&(a.msgContent.adminType===d("MAWLocalizationType").LOCALIZATION_TYPE.CUTOVER_THREAD_ADMIN_MESSAGE||a.msgContent.adminType===d("MAWLocalizationType").LOCALIZATION_TYPE.E2EE_THREAD_DESCRIPTION))&&a.sortOrderMs!=null&&a.sortOrderMs<1661204086&&(a.sortOrderMs=d("MAWDbMsg").getCanonicalTsFromMsg(a)*1e3)})},t=function(a){return a.threads.filter(function(a){return a.isMigratedLocally===!0&&a.newestMsg!=null}).toArray().then(function(b){var c=b.map(function(a){return a.chatId}),e=new Map();return d("MAWDexieTable").dexieAll(b.map(function(b){return a.messages.where(["thread","sortOrderMs"]).between([b.chatId,0],[b.chatId,Number.MAX_VALUE]).last().then(function(a){a!=null&&e.set(a.thread,a.msgId)})})).then(function(){return a.threads.where("chatId").anyOf(c).modify(function(a){var b=e.get(a.chatId);b!=null&&(a.newestMsg=b)})})})},u=function(a){return a.identity.toCollection().modify(function(a){a.userJid=d("WAJids").extractUserJid(a.deviceJid)})},v=function(a){return a.threads.toCollection().modify(function(a){a.lastReadMsgTs!=null&&a.lastReadMsgTs<d("WATimeUtils").MAX_INT&&(a.lastReadMsgTs=d("MAWTimeUtils").ensureValidMillisTime(a.lastReadMsgTs));if(a.newestMsgTs!=null&&a.newestMsgTs<d("WATimeUtils").MAX_INT){var b=d("MAWTimeUtils").ensureValidMillisTime(a.newestMsgTs);a.newestMsgTs=b;b!=null&&(a.threadOrder=d("MAWDbThread").craftThreadOrder(b,a.jid))}})},w=function(a){return a.messages.toCollection().modify(function(a){a.type===d("WAMsgType").MSG_TYPE.ADMIN&&a.msgContent.adminType===d("MAWLocalizationType").LOCALIZATION_TYPE.CUTOVER_THREAD_ADMIN_MESSAGE&&(a.altIndex=d("MAWDbMsg").craftCutoverAdminMsgAltIndex(a.thread))})},x=function(a){return a.meta.get(d("WADbSignal").MetaKeysEnum.fbid).then(function(b){var c;if((b==null?void 0:(c=b.value)==null?void 0:c.fbid)!=null&&b.value.fbid==="0")return a.meta.clear()})},y=function(a){return a.prekey.filter(function(a){return a.isDeleted===!0})["delete"]()},z=function(a){return c("gkx")("23905")?a.meta.clear():d("MAWDexieTable").dexieResolve()},A=function(a){return a.participants.toCollection().modify(function(a){var b;if(a==null||((b=a.userJid)==null?void 0:b.indexOf("@msgr@msgr"))===!1)return;a.id=a.id.replace("@msgr@msgr","@msgr");a.userJid=a.userJid.replace("@msgr@msgr","@msgr")}).then(c("emptyFunction"))},B=function(a){var b=a.threads.filter(function(a){return a.snippetMsg!=null&&a.snippetMsgTs==null});return b.toArray().then(function(c){var e=c.reduce(function(a,b){b!=null&&b.snippetMsg!=null&&a.set(b.jid,b.snippetMsg);return a},new Map());c=Array.from(e.values());return a.messages.where("msgId").anyOf(c).toArray().then(function(a){var c=a.reduce(function(a,b){b!=null&&b.serverTs!=null&&a.set(b.msgId,b.serverTs);return a},new Map());b.modify(function(a){var b=e.get(a.jid);if(b!=null){b=c.get(b);b!=null&&(a.snippetMsgTs=d("WATimeUtils").castUnixTimeToMillisTime(b))}})})})},C=function(a){return a.threads.toArray().then(function(b){return d("MAWDexieTable").dexieAll(b.map(function(b){return a.participants.where("threadId").equals(b.chatId).modify(function(a){a.threadJid=(a=a.threadJid)!=null?a:b.jid})}))})},D=C,E=function(a){var b=[];return a.groupInvites.toArray().then(function(c){var d=c.map(function(a){return a.invitedParticipantId});return a.participants.bulkGet(d).then(function(d){d.forEach(function(a,d){if(a==null){a=c[d];b.push(a)}});var e=d.filter(Boolean);return a.groupInvites.bulkPut(c.map(function(a){var c=e.find(function(b){return b.id===a.invitedParticipantId});if(c!=null){a.inviteeJid=c.userJid;a.threadJid=c.threadJid;return babelHelpers["extends"]({},a,{inviteeJid:c.userJid,threadJid:c.threadJid})}else{b.push(a);return a}}))})}).then(function(){return a.groupInvites.bulkDelete(b.map(function(a){return[a.invitedParticipantId,a.inviterJid]}))})},F=function(a){var b=new Map();return a.receipts.toArray().then(function(e){return d("MAWDexieTable").dexieAll(e.map(function(e){return a.messages.get({msgId:e.msgId}).then(function(f){if(f==null)return a.receipts["delete"](e.msgId).then(c("emptyFunction"));else{var g=d("WAMsg").craftWAMsgIdString({author:f.author,chat:f.threadJid,externalId:f.externalId});if(b.has(g)){var h;h=(h=b.get(g))!=null?h:1;b.set(g,h);d("WALogger").ERROR(i(),h);return a.receipts["delete"](e.msgId).then(c("emptyFunction"))}else{b.set(g,1);return a.receipts.where("msgId").equals(f.msgId).modify(function(a){a.waMsgId=g}).then(c("emptyFunction"))}}})}))})},G=function(a){var b=[];return a.contacts.toArray().then(function(c){for(var c=c,d=Array.isArray(c),e=0,c=d?c:c[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var f;if(d){if(e>=c.length)break;f=c[e++]}else{e=c.next();if(e.done)break;f=e.value}f=f;b.push({ephemeralSetting:f.ephemeralSetting,ephemeralSyncResponseBackoffInfo:f.ephemeralSyncResponseBackoffInfo,userJid:f.contactJid})}return a.ephemeralSettings.bulkPut(b)})},H=function(a){return a.participants.toArray().then(function(b){var c=b.map(function(a){return babelHelpers["extends"]({},a,{id:d("MAWDbParticipant").craftParticipantId(a.threadJid,a.userJid)})});b=b.map(function(a){return a.id});return a.participants.bulkDelete(b).then(function(){a.participants.bulkPut(c)})})},I=function(a){return a.reactions.toCollection().modify(function(a){a.ts=a.ts})};a=new Map([[(h=d("MAWDbVersionList")).VERSION.V26,a],[h.VERSION.V27,b],[h.VERSION.V28,e],[h.VERSION.V29,f],[h.VERSION.V30,j],[h.VERSION.V31,k],[h.VERSION.V43,l],[h.VERSION.V44,m],[h.VERSION.V45,n],[h.VERSION.V46,o],[h.VERSION.V47,p],[h.VERSION.V53,q],[h.VERSION.V54,r],[h.VERSION.V55,s],[h.VERSION.V56,t],[h.VERSION.V57,u],[h.VERSION.V58,v],[h.VERSION.V60,w],[h.VERSION.V66,x],[h.VERSION.V68,y],[h.VERSION.V71,z],[h.VERSION.V72,A],[h.VERSION.V82,B],[h.VERSION.V85,C],[h.VERSION.V87,D],[h.VERSION.V90,E],[h.VERSION.V91,F],[h.VERSION.V101,G],[h.VERSION.V104,H],[h.VERSION.V116,I]]);g.dbUpgrades=a}),98);
__d("MAWDbSchemaReStoreDexieUtils",["MAWDbSchema","MAWDbSchema.dexie","err","sortBy"],(function(a,b,c,d,e,f,g){"use strict";var h=c("sortBy")(Array.from(new Set([].concat(Array.from(d("MAWDbSchema").dbSchema.keys()),Array.from(d("MAWDbSchema.dexie").dbUpgrades.keys())))).map(function(a){return{schema:d("MAWDbSchema").dbSchema.get(a),upgrade:d("MAWDbSchema.dexie").dbUpgrades.get(a),version:a}}),function(a){a=a.version;return a}),i=function(a,b){return Array.from(a.filter(function(a){return a.version<=b&&a.schema!=null}).reduce(function(a,b){(b=b.schema)==null?void 0:b.forEach(function(b){a.set(b.name,b)});return a},new Map()).values())},j=function(a,b){return i(a,b).reduce(function(a,b){var d=b.autoIncrement,e=b.dexieOnly_primaryKeyUnique,f=b.name,g=b.primaryKey,h=b.removed;f=f.replace(/^e2ee_/,"");if(h===!0){a[f]=null;return a}if(d&&e===!0)throw c("err")("Invalid schema, cannot have both autoincremnet and unique constraints "+JSON.stringify(b));h=d?"++":"";d=e===!0?"&":"";e=""+(g.length>1?"[":"")+g.join("+")+(g.length>1?"]":"");g=Object.values(b.indexes).map(function(a){var b=a.columns,c=!(a.unique===!1),d=b.length>1;a=a.multiEntry_DO_NOT_USE===!0;c=c&&!a?"&":"";a=a?"*":"";c=""+c+a;return""+c+(d?"[":"")+b.join("+")+(d?"]":"")}).join(",");a[f]=[""+h+d+e,g].filter(Boolean).join(",");return a},{})};a=function(a){return j(h,a)};g.MAW_DB_VERSION_CHANGES=h;g.getDexieSchemaForVersion=j;g.getCompleteDexieSchemaForVersion=a}),98);
__d("MAWDbVersion",["MAWCurrentUser","MAWDbSchemaReStoreDexieUtils","MAWDbVersionList","MAWGetDbVersion","MAWIndexedDbMetadata","MAWODSProxy","Promise","WAOdsEnums","WATagsLogger"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Applying "," updates between "," and ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["Skipping db upgrade and just applying latest schema"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["current db version is greater than target db version"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["version is not set in QE"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["current db version: ",", target db version: ",""]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["[getDexieDbVersion] "," blocked, version: ",""]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["[getDexieDbVersion] "," error ",""]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose(["[getDexieDbVersion] "," version: ",""]);p=function(){return a};return a}function q(){var a=babelHelpers.taggedTemplateLiteralLoose(["[getDexieDbVersion] "," onupgradeneeded - closing db"]);q=function(){return a};return a}var r=d("WATagsLogger").TAGS(["DB","VERSION"]);e=d("MAWGetDbVersion").getArmadilloDbVersion();f=d("MAWDbSchemaReStoreDexieUtils").getCompleteDexieSchemaForVersion(Math.min(d("MAWDbSchemaReStoreDexieUtils").MAW_DB_VERSION_CHANGES[d("MAWDbSchemaReStoreDexieUtils").MAW_DB_VERSION_CHANGES.length-1].version,e>0?e:Infinity));function s(a,b){var c=b.schema,d=b.upgrade;b=b.version;c!=null&&d!=null?a.version(b).stores(c).upgrade(d):c!=null?a.version(b).stores(c):d!=null?a.version(b).upgrade(d):a.version(b);return b}function t(a){return new(h||(h=b("Promise")))(function(b){if(!indexedDB){b();return}var c=indexedDB.open(a);c.onupgradeneeded=function(c){c.target.transaction.abort();c=c.target.result;r.LOG(q(),a);c==null?void 0:c.close();b()};c.onsuccess=function(c){var e;c=c.target.result;var f=c==null?void 0:c.version;r.LOG(p(),a,(e=f)!=null?e:"null");c==null?void 0:c.close();f!=null?(f%10>=1&&d("MAWODSProxy").odsBumpEntityKey({amount:1,entity:d("WAOdsEnums").Entity.MAW_DB_UNEXPECTED_VERSION,key:"fail_"+f%10}),b(d("MAWDbVersionList").toVersion(f/10))):b()};c.onerror=function(c){r.LOG(o(),a,c==null?void 0:(c=c.target)==null?void 0:(c=c.error)==null?void 0:c.message);b()};c.onblocked=function(b){b=b.target.result;var c=b==null?void 0:b.version;r.LOG(n(),a,(c=c)!=null?c:"null");b==null?void 0:b.close()}})}function a(){var a=d("MAWCurrentUser").getID();return t(d("MAWIndexedDbMetadata").dbName(a))}function u(a,b){if(a.upgrade!=null||b.upgrade!=null)return!0;a=Object.keys((a==null?void 0:a.schema)||{});b=Object.keys((b==null?void 0:b.schema)||{});a=[].concat(a,b);b=new Set(a);return b.size!==a.length}function v(a){return a.reduce(function(a,b,c){if(c===0)return[babelHelpers["extends"]({},b,{schema:d("MAWDbSchemaReStoreDexieUtils").getCompleteDexieSchemaForVersion(b.version)})];c=a[a.length-1];b=babelHelpers["extends"]({},b,{schema:b.schema!=null?d("MAWDbSchemaReStoreDexieUtils").getDexieSchemaForVersion([b],b.version):null});if(u(c,b)){a.push(b);return a}a.splice(a.length-1,1,babelHelpers["extends"]({},c,b,{schema:babelHelpers["extends"]({},c==null?void 0:c.schema,b==null?void 0:b.schema)}));return a},[])}function c(a,b,c,e){var f=c!=null?c:d("MAWGetDbVersion").getArmadilloDbVersion==null?void 0:d("MAWGetDbVersion").getArmadilloDbVersion();r.LOG(m(),b,f);f==null&&r.WARN(l());b!=null&&b>f&&(r.WARN(k()),f=b);c=d("MAWDbSchemaReStoreDexieUtils").MAW_DB_VERSION_CHANGES.filter(function(a){a=a.version;return b==null||a>b}).filter(function(a){a=a.version;return f==null||f>=a});var g=d("MAWDbSchemaReStoreDexieUtils").MAW_DB_VERSION_CHANGES.filter(function(a){a=a.version;return f==null||f>=a});if(c.length===0||c.length===g.length){r.LOG(j());g=d("MAWDbSchemaReStoreDexieUtils").MAW_DB_VERSION_CHANGES[d("MAWDbSchemaReStoreDexieUtils").MAW_DB_VERSION_CHANGES.length-1].version;g=Math.min(f!=null&&f>0?f:g,g);a.version(g).stores(d("MAWDbSchemaReStoreDexieUtils").getCompleteDexieSchemaForVersion(g));return g}g=v(c);r.LOG(i(),g.length,c[0].version,c[c.length-1].version);c=g.filter(function(a){return!!a.upgrade}).map(function(a){return a.version.toString()});var h=g.filter(function(a){return!!a.schema}).map(function(a){return a.version.toString()});c.length&&(e==null?void 0:e.addAnnotations({string_array:{dataMigrationVersions:c}}));h.length&&(e==null?void 0:e.addAnnotations({string_array:{schemaUpgradeVersions:h}}));var n=0;g.forEach(function(b){n=Math.max((b=s(a,b))!=null?b:0,(b=n)!=null?b:0)});return n}g.CURRENT_MAW_STORES=f;g.getDexieDbVersion=t;g.getDBVersion=a;g.updateDB=c}),98);
__d("MAWDexieError",[],(function(a,b,c,d,e,f){"use strict";a="ModifyError";b="BulkError";c="OpenFailedError";d="VersionChangeError";e="SchemaError";var g="UpgradeError",h="InvalidTableError",i="MissingAPIError",j="NoSuchDatabaseError",k="InvalidArgumentError",l="SubTransactionError",m="UnsupportedError",n="InternalError",o="DatabaseClosedError",p="PrematureCommitError",q="ForeignAwaitError",r="UnknownError",s="ConstraintError",t="DataError",u="TransactionInactiveError",v="ReadOnlyError",w="VersionError",x="NotFoundError",y="InvalidStateError",z="InvalidAccessError",A="AbortError",B="TimeoutError",C="QuotaExceededError",D="SyntaxError",E="DataCloneError";A={AbortError:A,BulkError:b,ConstraintError:s,DatabaseClosedError:o,DataCloneError:E,DataError:t,ForeignAwaitError:q,InternalError:n,InvalidAccessError:z,InvalidArgumentError:k,InvalidStateError:y,InvalidTableError:h,MissingAPIError:i,ModifyError:a,NoSuchDatabaseError:j,NotFoundError:x,OpenFailedError:c,PrematureCommitError:p,QuotaExceededError:C,ReadOnlyError:v,SchemaError:e,SubTransactionError:l,SyntaxError:D,TimeoutError:B,TransactionInactiveError:u,UnknownError:r,UnsupportedError:m,UpgradeError:g,VersionChangeError:d,VersionError:w};f.DEXIE_ERROR=A}),66);
__d("MAWIDbSetupQplEventListener",["MAWDexieError"],(function(a,b,c,d,e,f,g){"use strict";var h,i=null;function j(a){var b=new Set(Object.keys(d("MAWDexieError").DEXIE_ERROR));b.has(a.reason)&&h!=null&&(h.endFail(a.reason),i!=null&&(i(),i=null))}b=function(b,c){h=b;i=c;a.addEventListener("unhandledrejection",j);return function(){return a.removeEventListener("unhandledrejection",j)}};g.trackDbSetupFailure=b}),98);
__d("MAWDbFactory",["ClientConsistencyEventEmitter","Deferred","MAWCurrentUser","MAWDbVersion","MAWDexieTable","MAWGetDbVersion","MAWIDbSetupQplEventListener","MAWIndexedDBDeletion","MAWIndexedDbMetadata","MAWLowLevelApiTypes","MAWQplProxy","MAWReliabilityMonitor","Promise","asyncToGeneratorRuntime","err","gkx","promiseDone","qpl"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Versionchange detected: ("," -> "," (event version: ",", highestUsed: (","), name: ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["DB forcibly closed"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["DB is null"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["DB setup complete, marking as ready"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["DB Open blocked"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["latest pushed version: ",", current: ",", requested: ",""]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["Waiting for worker to upgrade schema..."]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose(["Current version: ","."]);p=function(){return a};return a}function q(){var a=babelHelpers.taggedTemplateLiteralLoose(["Starting DB Setup"]);q=function(){return a};return a}function r(){var a=babelHelpers.taggedTemplateLiteralLoose(["DB exists: ",""]);r=function(){return a};return a}function a(a,e,f){var g=null,s=new(c("Deferred"))(),t=!1,u=!1,v,w=null,x=f!=="worker"?null:d("MAWReliabilityMonitor").MAWReliabilityMonitorSingleton.startMonitoring("DB_"+e+"_"+f,function(){return{extra:{isMakingDB:String(t),willBeSetup:String(u)},reason:String(w),state:function(){if(w==null)return d("MAWReliabilityMonitor").HealthReportState.UNKNOWN;switch(w){case d("MAWLowLevelApiTypes").DatabaseState.Initializing:case d("MAWLowLevelApiTypes").DatabaseState.Upgrading:return d("MAWReliabilityMonitor").HealthReportState.PENDING;case d("MAWLowLevelApiTypes").DatabaseState.Open:return d("MAWReliabilityMonitor").HealthReportState.OK;case d("MAWLowLevelApiTypes").DatabaseState.Closed:case d("MAWLowLevelApiTypes").DatabaseState.Error:return d("MAWReliabilityMonitor").HealthReportState.ERROR}}()}});function y(){s=new(c("Deferred"))(),v==null?void 0:v(),t=!1,u=!1}function z(){return u}function A(a,b,c){return B.apply(this,arguments)}function B(){B=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b,h,z){var A=h.backendInitPromise,B=h.dbStateCallback,C=h.middleware;h=babelHelpers.objectWithoutPropertiesLoose(h,["backendInitPromise","dbStateCallback","middleware"]);var D=d("MAWCurrentUser").getID(),E=d("MAWIndexedDbMetadata").dbName(D);function F(a,b){w=b,x==null?void 0:x.updateState(),B==null?void 0:B(a,b)}if(g!=null){a.LOG(r(),e);return}var G=d("MAWQplProxy").startQplUserFlow(c("qpl")._(1056836116,"905"),{string:{db:e,name:E}});u=!0;if(t)return s.getPromise();a.LOG(q());t=!0;v=d("MAWIDbSetupQplEventListener").trackDbSetupFailure(G,function(){s.reject("DB setup failed"),y()});F(E,d("MAWLowLevelApiTypes").DatabaseState.Initializing);var H=(yield d("MAWDbVersion").getDexieDbVersion(E));G.addAnnotations({"int":{currentVersion:H}});D=(D=z)!=null?D:d("MAWGetDbVersion").getArmadilloDbVersion();G.addAnnotations({"int":{targetVersion:D}});a.LOG(p(),H);if(A&&(H||0)<D){G.addPoint("separate_read_waiting_on_worker_upgrade");a.LOG(o());try{yield A}catch(a){throw c("err")("Worker startup promise rejected, schema upgrade failed.")}var I=(yield d("MAWDbVersion").getDexieDbVersion(E));if(I!==D)throw c("err")("Main thread waiting on worker schema upgrade from %s to %s, upgrade failed with version %s",H,D,I);H=I}else if(f==="worker"){d("MAWQplProxy").sendQPLIntAnnotationThroughBridge(c("qpl")._(1056839232,"112"),"dbVersion",(D=H)!=null?D:0);d("MAWQplProxy").sendQPLIntAnnotationThroughBridge(c("qpl")._(1056839232,"112"),"useSentBytesCache",c("gkx")("33008")?1:0)}var J=function(b){var e;b=d("MAWDbVersion").updateDB(b,H,z,G);!A&&f==="worker"&&d("MAWQplProxy").sendQPLBoolAnnotationThroughBridge(c("qpl")._(1056839232,"112"),"dbUpgradeNeeded",H!==b);a.LOG(n(),b,H,(e=z)!=null?e:"<latest>");G.addPoint("database_version_upgraded",{"int":{dbVersion:b}});return b};g=new(d("MAWDexieTable").DexieTable)(E,function(e){C.forEach(function(a){e.use(a(b))});var g=J(e);e.on("blocked",function(){a.ERROR(m()),F(E,d("MAWLowLevelApiTypes").DatabaseState.Error),s.reject("DB Open blocked"),G.endFail("db_blocked"),y()});e.on("ready",function(b){a.LOG(l());F(E,d("MAWLowLevelApiTypes").DatabaseState.Open);t=!1;if(b==null){a.ERROR(k());s.reject("DB is null");G.endFail("db_null");y();return}v==null?void 0:v();s.resolve();G.endSuccess({"int":{dbVersion:g}})});e.on("close",function(){a.WARN(j())});e.on("versionchange",function(b){a.ERROR(i(),b==null?void 0:b.oldVersion,b==null?void 0:b.newVersion,b==null?void 0:b.version,g,b==null?void 0:b.name),F(E,d("MAWLowLevelApiTypes").DatabaseState.Upgrading),f!=="worker"&&c("ClientConsistencyEventEmitter").emit("softRefresh","mawdb_versionchange")})},void 0,h);return s.getPromise()});return B.apply(this,arguments)}function C(a){if(g==null){throw c("err")('IndexDB has not been initialized before executing "'+((a=a)!=null?a:"unnamed")+'"')}return g}function D(a){if(g!=null&&!t)return(h||(h=b("Promise"))).resolve(g);s=s||new(c("Deferred"))();return s.getPromise().then(function(){return C(a)})}function E(){return F.apply(this,arguments)}function F(){F=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=(yield D());a!=null&&(a.close(),g=null);y()});return F.apply(this,arguments)}function G(){g=null,y()}function H(a){c("promiseDone")(E());a=d("MAWIndexedDbMetadata").dbName((a=a)!=null?a:d("MAWCurrentUser").getID());c("promiseDone")(d("MAWIndexedDBDeletion").deleteDB(a,"maw"));x==null?void 0:x.stopMonitoring()}return{closeDB:E,deleteDb:H,getDB:D,getDBExn:C,makeDB:A,reset_singleton_INTERNAL_ONLY:G,setupPromise:function(){return s.getPromise()},willSetupDB:z}}g.makeIDBFactory=a}),98);
__d("MAWIndexedDbUI",["MAWDbFactory","MAWDbMutationMiddleware","MAWIndexedDb","MAWTransactor","WATagsLogger","gkx"],(function(a,b,c,d,e,f,g){"use strict";function a(a){a===void 0&&(a=d("WATagsLogger").TAGS(["DB on UI"]));var b=d("MAWDbFactory").makeIDBFactory(a,"ui_idb","main"),e=!1;return{closeDB:b.closeDB,dbFactoryRan:function(){return e},deleteDb:b.deleteDb,getDB:b.getDB,makeDB:function(a,f,g){e=!0;a=b.makeDB(a,{autoOpen:c("gkx")("6817"),backendInitPromise:f,middleware:[d("MAWDbMutationMiddleware").getMAWDbMutationMiddleware]},g);return a},reset_singleton_INTERNAL_ONLY:b.reset_singleton_INTERNAL_ONLY}}b=a();e=b.makeDB;f=b.closeDB;var h=b.dbFactoryRan,i=b.getDB,j=b.deleteDb;b=b.reset_singleton_INTERNAL_ONLY;var k=i("MawDbInUISingleton_INTERNAL_ONLY").then(function(a){return{chunk:a.stores.chunk,editMsgHistory:a.stores.editMsgHistory,groupInfo:a.stores.groupInfo,media:a.stores.media,messages:a.stores.messages,participants:a.stores.participants,reactions:a.stores.reactions,receiverFetchInfo:a.stores.receiverFetchInfo,threads:a.stores.threads,xma:a.stores.xma}});g.makeMsgrTransactor=d("MAWTransactor").makeMsgrUITransactor_IMPORT_FROM_MAWIndexedDbUI_INSTEAD;g.afterTransaction=d("MAWIndexedDb").afterTransaction;g.makeMAWIndexedDBFactory=a;g.makeDB=e;g.closeDB=f;g.dbFactoryRan=h;g.getDB=i;g.deleteDb=j;g.reset_singleton_INTERNAL_ONLY=b;g.MawDbInUISingleton=k}),98);
__d("MAWDataSyncQueue",["Promise","WALogger","asyncToGeneratorRuntime","getErrorSafe","qex","throttle"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[MAWIndexedDbMiddleware] error handling queue batch: ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["Unhandled exception caught in middleware "," sync: ",""]);j=function(){return a};return a}var k=c("qex")._("853")||1e3;a=c("qex")._("855")||1e3;e=function(){n=!1;return s({isUnloading:!0})};var l=[],m=[],n=!1,o=[],p=function(){var a,b=l.splice(0,l.length);(a=m).push.apply(a,b)},q=function(){return m.splice(0,k)},r=function a(c){var e=q();if(e.length===0)return;return(h||(h=b("Promise"))).all(o.map(function(a,b){return a(e,c)["catch"](function(a){d("WALogger").ERROR(j(),b,a)})})).then(function(){return a(c)})},s=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(n)return;n=!0;p();try{yield r(a)}catch(e){var b;a=c("getErrorSafe")(e);d("WALogger").ERROR(i(),(b=a==null?void 0:a.message)!=null?b:a.toString());throw e}finally{n=!1,l.length>0&&t()}});return function(b){return a.apply(this,arguments)}}(),t=c("throttle")(s,a);f=function(a,b){l.push({type:a,value:b}),t()};a=function(a){o.some(function(b){return b===a})||o.push(a)};var u=function(){o=[]},v=function(){l=[],m=[]},w=function(){return l};g.forceFlushDataSyncQueue=e;g.addSyncItem=f;g.registerDataSyncCallback=a;g.clearDataSyncCallbacks=u;g.clearDataSyncQueue_FOR_TESTING_ONLY=v;g.getDataSyncQueue_FOR_TESTING_ONLY=w}),98);
__d("MAWDataSyncMiddleware",["FBLogger","MAWDataSyncQueue"],(function(a,b,c,d,e,f,g){"use strict";var h=new Set(["contacts","groupInfo","messages","participants","threads","reactions","xma","pendingStanzas"]);function i(a,b){var c=a.table(b);return!h.has(b)?c:babelHelpers["extends"]({},c,{mutate:function(a){return c.mutate(a).then(function(c){if(a.type==="delete"){a.keys.forEach(function(c){d("MAWDataSyncQueue").addSyncItem(a.type,{key:c,tableName:b})});return c}else c.results!=null?c.results.forEach(function(c){d("MAWDataSyncQueue").addSyncItem(a.type,{key:c,tableName:b,values:a.values})}):c.lastResult!=null&&d("MAWDataSyncQueue").addSyncItem(a.type,{key:c.lastResult,tableName:b,values:a.values});return c})}})}function a(){return{create:function(a){try{return babelHelpers["extends"]({},a,{table:function(b){return i(a,b)}})}catch(b){c("FBLogger")("maw_db").catching(b).mustfix("Error applying DataSync Middleware, messages made during this session will not be properly synced to registered consumers");return a}},name:"MAWDataSyncMiddleware",stack:"dbcore"}}g.getDataSyncMiddleware=a}),98);
__d("MAWIndexedDb",["ExecutionEnvironment","FBLogger","I64","MAWBridge","MAWDataSyncMiddleware","MAWDbFactory","MAWDbMutationMiddleware","MAWDbMutationValidator","MAWDbSchema","MAWDexie","MAWGetWorkerStatusApi","MAWMiActOnActThreadReadyQueue","MAWTransactor","WATagsLogger","cr:10181","cr:10182","cr:10223","gkx","promiseDone","unrecoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["[afterTransaction] afterTransactionForThreadEvent called outside of dexie transaction"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["[afterTransaction] called outside of dexie transaction"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["[afterTransactionEffect] called outside of dexie transaction"]);l=function(){return a};return a}function a(c,e){c===void 0&&(c=d("WATagsLogger").TAGS(["DB"]));e===void 0&&(e="idb");var f=d("MAWDbFactory").makeIDBFactory(c,e,"worker");function a(a){return f.setupPromise().then(function(){return f.getDBExn(a)})}return babelHelpers["extends"]({},f,{getSignalDB:a,makeDB:function(a,c,e){var g=[d("MAWDbMutationMiddleware").getMAWDbMutationMiddleware];b("cr:10223")!=null&&c.disableThreadSnippetAndTimestampMiddleware!==!0&&g.push(b("cr:10223"));c.enableDataSyncMiddleware&&g.push(d("MAWDataSyncMiddleware").getDataSyncMiddleware);c.enableMutationValidator===!0&&g.push(d("MAWDbMutationValidator").getMutationValidatorMiddleware);return f.makeDB(a,{autoOpen:!0,dbStateCallback:d("MAWGetWorkerStatusApi").setDatabaseStatus,middleware:g},e)}})}var m=a(),n="idle",o=m.willSetupDB,p=function(a,b,c){return m.makeDB(a,b,c).then(function(){n="ready"})},q=m.closeDB,r=m.getDBExn,s=m.getSignalDB,t=m.getDB,u=function(a){return m.reset_singleton_INTERNAL_ONLY()},v=m.deleteDb;function e(){return n}function f(a){var b=n;n="migrating";return a["finally"](function(){n=b})}var w=new WeakMap(),x=new WeakMap(),y=d("WATagsLogger").TAGS(["DB"]);function z(a){var b=c("MAWDexie").currentTransaction;if(b==null){y.ERROR(l());throw c("unrecoverableViolation")("afterTransactionEffect called outside of dexie transaction","maw_db")}if(typeof a!=="function")return;var d=w.get(b)||[];d.push(a);w.set(b,d);d.length===1&&b.on("complete",function(){var a=w.get(b)||[];a.forEach(function(a){a()});w["delete"](b)})}function A(a){var e=c("MAWDexie").currentTransaction;if(e==null){y.ERROR(k());throw c("unrecoverableViolation")("afterTransaction called outside of dexie transaction","maw_db")}var f=x.get(e);if(f!=null)f.push(a);else{var g=[a];x.set(e,g);e.on("complete",function(){x["delete"](e),c("gkx")("5675")&&(i||(i=c("ExecutionEnvironment"))).isInMainThread&&b("cr:10182")!==null&&b("cr:10181")!==null?b("cr:10182").handleEvents(b("cr:10181").LSDatabaseSingleton,g):d("MAWBridge").getBridge().fireAndForget("event","uiUpdate",{events:g})})}}function B(a){if(a.tag==="ThreadUpdated")try{var b=a.value.snippetContactIDs;b!=null&&b.some(function(a){return a==="Facebook User"})&&(c("FBLogger")("messenger_e2ee_web").mustfix('Something is still setting a contact id as "Facebook User"'),a.value=babelHelpers["extends"]({},a.value,{snippetContactIDs:b.map(function(a){return a==="Facebook User"?"0":a})}))}catch(a){}else if(a.tag==="VerifyThreadExists"&&c("gkx")("5014")){b=a.value;if(b.clientThreadKey!=null){var e=(h||(h=d("I64"))).of_string(b==null?void 0:b.clientThreadKey);c("promiseDone")(d("MAWMiActOnActThreadReadyQueue").processQueueOnActThreadReady(e,b.jid,"MAWIndexedDb:afterTransaction:withClientThreadKey"))}if(b.authoritativeThreadKey!=null){e=(h||(h=d("I64"))).of_string(b.authoritativeThreadKey);c("promiseDone")(d("MAWMiActOnActThreadReadyQueue").processQueueOnActThreadReady(e,b.jid,"MAWIndexedDb:afterTransaction:withAuthoritativeThreadKey"))}}A(a)}function C(a,b){var e=c("MAWDexie").currentTransaction;if(e==null){y.ERROR(j());throw c("unrecoverableViolation")("afterTransactionForThreadEvent called outside of dexie transaction","maw_db")}e.on("complete",function(){d("MAWBridge").getBridge().fireAndForget("threadEvent",b,a)})}g.TABLES_TO_ENCRYPT=d("MAWDbSchema").TABLES_TO_ENCRYPT;g.makeMsgrTransactor=d("MAWTransactor").makeMsgrTransactor;g.makeMAWIndexedDBFactory=a;g.willSetupDB=o;g.makeDB=p;g.closeDB=q;g.getDBExn=r;g.getSignalDB=s;g.getDB=t;g.setDB_INTERNAL_USE_ONLY=u;g.deleteDb=v;g.getDbStatus=e;g.updateStatusDuringMigration=f;g.afterTransactionEffect=z;g.afterTransaction=B;g.afterTransactionThreadEvent=C}),98);
__d("MAWLLAMigrationUtils",["MAWRestoreDbState","gkx","justknobx","qpl"],(function(a,b,c,d,e,f,g){"use strict";b=c("justknobx")._("652");var h=1/Math.max(b,10);e=1/(5*b);f=1/(10*b);b=10/b;var i=new Map([["setClockSkew",f],["getRoutingInfo",e],["unknown",f],["FTS",f],["bulkHandleIncomingMsgs",b]]);e=15e3;function a(a,b,e){b===void 0&&(b=!1);e===void 0&&(e={});var f=i.get(a)||h;return a==="debug"||a==="test"?[]:c("gkx")("23956")&&Math.random()<f?[c("qpl")._(1056839327,"560"),babelHelpers["extends"]({bool:{isUsingShim:d("MAWRestoreDbState").isUsingShim_LOGGING_ONLY(),newLLA:b},string:{transactor:a}},e)]:[]}g.QPL_TRANSACTION_TIMEOUT_MS=e;g.getTransactorQPLParam=a}),98);
__d("MAWTransactor",["FBLogger","MAWDexie","MAWDexieTable","MAWErrorObject","MAWIndexedDb","MAWIndexedDbUI","MAWLLAMigrationUtils","MAWMICSchema","MAWQplProxy","MAWTransactionMode","WAExceededStorageQuota","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h=["MWPTransactor"],i=c("FBLogger")("messenger_e2ee_web");function j(a,b,d,e,f,g){e!=null&&c("MAWDexie").currentTransaction!=null&&e.endFail("invoked_in_nested_transaction",{string:{current_transaction_mode:c("MAWDexie").currentTransaction.mode},string_array:{current_transaction_store_names:c("MAWDexie").currentTransaction.storeNames}});if(c("MAWDexie").currentTransaction!=null)throw i.mustfixThrow("makeMsgrTransactor %s cannot be called within another transaction",f);return a.transact(b,d,g)}function k(a){a=d("MAWLLAMigrationUtils").getTransactorQPLParam(a);a=a.length===2?a:[null,void 0];var b=a[0];a=a[1];return b!=null?d("MAWQplProxy").startQplUserFlow(b,a,void 0,d("MAWLLAMigrationUtils").QPL_TRANSACTION_TIMEOUT_MS):null}function a(a,b,c){return n(a,b,function(a){return d("MAWIndexedDb").getDB(a)},c)}function e(a,b,c){return n(a,b,d("MAWIndexedDbUI").getDB,c)}function f(a,b,c){return n(a,b,d("MAWIndexedDbUI").getDB,c)}var l=0,m=new Map();function n(a,b,c,e){var f=Object.keys(a),g=f.some(function(b){return a[b]===d("MAWTransactionMode").READWRITE})?d("MAWTransactionMode").READWRITE:d("MAWTransactionMode").READONLY;return function(){for(var a=arguments.length,i=new Array(a),n=0;n<a;n++)i[n]=arguments[n];var p=k(b);p!=null&&p.addAnnotations({string:{mode:g===d("MAWTransactionMode").READWRITE?"readwrite":"readonly"},string_array:{maybeLockedOn:Array.from(m.values()),stores:f}});r(b);return c(b).then(function(a){p==null?void 0:p.addPoint("lock_wait_start");return j(a,g,f,p,b,function(){l+=1;var c=l;m.set(c,b);var g=p!=null?a.stores[f[0]].get("").then(function(){p==null?void 0:p.addPoint("lock_wait_end"),p==null?void 0:p.addPoint("transaction_opened"),p==null?void 0:p.addPoint("transactor_execution_start")}):d("MAWDexieTable").dexieResolve();return g.then(function(){return e(a.stores).apply(void 0,i)}).then(function(a){m["delete"](c);p==null?void 0:p.addPoint("transactor_execution_end");p==null?void 0:p.endSuccess();return a})["catch"](function(a){m["delete"](c);d("WAExceededStorageQuota").checkQuotaExceededError(a);p==null?void 0:p.markError("transaction_error",null,a);if(a instanceof Error){var e=a,f=typeof (e==null?void 0:e.stack)==="string"?e.stack:typeof (e==null?void 0:e.stack);e=typeof (e==null?void 0:e.message)==="string"?e.message:typeof (e==null?void 0:e.message);p==null?void 0:p.addAnnotations({string:{errMessage:e,errStack:f}})}p==null?void 0:p.endFail("transaction_fail");e=d("MAWErrorObject").getErrorObject(a);throw o(e).mustfixThrow("[%s] Error performing %s transaction",h.join("|"),(f=b)!=null?f:"")})})})["catch"](function(a){d("WAExceededStorageQuota").checkQuotaExceededError(a);p==null?void 0:p.endFail("transaction_fail");a=d("MAWErrorObject").getErrorObject(a);throw o(a).mustfixThrow("[%s] Error performing %s transaction",h.join("|"),(a=b)!=null?a:"")})}}function o(a){if(a)return i.catching(a);else return i}function p(a){return q.apply(this,arguments)}function q(){q=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(c("MAWDexie").currentTransaction==null)throw c("FBLogger")("messenger_e2ee_web").mustfixThrow("Cannot use runInLSDB outside of a MAW transaction");var b=c("MAWDexie").currentTransaction.idbtrans;b=(yield b.transaction);return a(b)});return q.apply(this,arguments)}function r(a){["bulkCreateThreadByJid","createThreadByJid"].includes(a)&&d("MAWQplProxy").sendQplPointThroughBridge(d("MAWMICSchema").EVENT,d("MAWMICSchema").POINTS.occamadillo_thread_mapping_txn_reached)}g.makeMsgrTransactor=a;g.makeMsgrUITransactor_IMPORT_FROM_MAWIndexedDbUI_INSTEAD=e;g.makeMsgrUIWritableTransactor=f;g.runInLSDB=p}),98);
__d("isEncryptionAtRestEnabled",["isInstamadillo","qex"],(function(a,b,c,d,e,f,g){"use strict";function a(){if(c("qex")._("507")===!0)return!0;else return c("isInstamadillo")()}g["default"]=a}),98);
__d("MAWDbMiddlewareMutations",["MAWDbObjEncryption","MAWVaultDb","MAWVaultDefinitions","gkx","isEncryptionAtRestEnabled"],(function(a,b,c,d,e,f,g){"use strict";var h=c("gkx")("23909");function a(a,b,e){if(!h&&!(c("isEncryptionAtRestEnabled")()||c("gkx")("23910")))return a;a=babelHelpers["extends"]({},a);a=d("MAWVaultDb").unvaultDbRow(a,b,d("MAWVaultDefinitions").ARMADILLO_IDB_VAULT_DEFINITIONS);a=d("MAWDbObjEncryption").encryptDbObj(a,b,e);return a}function b(a,b){return!h?a:d("MAWVaultDb").unvaultDbRow(babelHelpers["extends"]({},a),b,d("MAWVaultDefinitions").ARMADILLO_IDB_VAULT_DEFINITIONS)}function e(a,b,c){a=d("MAWDbObjEncryption").decryptDbObj(babelHelpers["extends"]({},a),b,c);return!h?a:d("MAWVaultDb").vaultDbRow(a,b,d("MAWVaultDefinitions").ARMADILLO_IDB_VAULT_DEFINITIONS)}function f(a,b){if(a==null)return void 0;return!h?a:d("MAWVaultDb").vaultDbRow(a,b,d("MAWVaultDefinitions").ARMADILLO_IDB_VAULT_DEFINITIONS)}g.mutateValue=a;g.mutateVaultedValue=b;g.getValue=e;g.getVaultedValue=f}),98);
__d("MAWDbMutationValidator",["FBLogger","MAWIndexedDb","MAWMessageHasNonNullServerTsOnReceivedAckValidator","MAWMessageHasUniqueExternalIdValidator","MAWODSProxy","MAWParticipantMatchOneOnOneThreadValidator","MAWReactionHasUniqueProtocolMsgIdValidator","Promise","Random","WAOdsEnums","gkx","justknobx","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h,i=[d("MAWMessageHasUniqueExternalIdValidator").MAWMessageHasUniqueExternalIdValidator,d("MAWParticipantMatchOneOnOneThreadValidator").MAWParticipantMatchOneOnOneThreadValidator,d("MAWReactionHasUniqueProtocolMsgIdValidator").MAWReactionHasUniqueProtocolMsgIdValidator,d("MAWMessageHasNonNullServerTsOnReceivedAckValidator").MAWMessageHasNonNullServerTsOnReceivedAckValidator],j=c("justknobx")._("2610"),k=c("gkx")("5906"),l=function(a){return d("Random").coinflip((a=a)!=null?a:j)||k};function m(a,e){var f=a.table(e),g=i.filter(function(a){return a.table===e});return g.length===0?f:babelHelpers["extends"]({},f,{mutate:function(a){return d("MAWIndexedDb").getDbStatus()!=="ready"?f.mutate(a):f.mutate(a).then(function(e){var f=g.filter(function(b){var c=b.sampleRate;b=b.type;return b.includes(a.type)&&l(c)});d("MAWIndexedDb").afterTransactionEffect(function(){var a=f.flatMap(function(a){var b=a.description,c=a.isValid;return((a=e.results)!=null?a:[]).map(function(a){return c(a).then(function(a){return babelHelpers["extends"]({validatorName:b},a)})})});c("promiseDone")((h||(h=b("Promise"))).all(a).then(function(a){a.forEach(function(a){switch(a.result){case"valid":d("MAWODSProxy").odsBumpEntityKey({entity:d("WAOdsEnums").Entity.MAW_MUTATION_VALIDATOR,key:a.validatorName+".valid"});break;case"invalid":d("MAWODSProxy").odsBumpEntityKey({entity:d("WAOdsEnums").Entity.MAW_MUTATION_VALIDATOR,key:a.validatorName+".invalid"});c("FBLogger")("maw_mutation_validator").mustfix("Validator %s failed with description: %s",a.validatorName,a.description);break;case"skipped":break}})}))});return e})}})}function a(){return{create:function(a){try{return babelHelpers["extends"]({},a,{table:function(b){return m(a,b)}})}catch(b){c("FBLogger")("maw_db").catching(b).mustfix("Error applying Mutation Validator Middleware");return a}},name:"MAWMutationValidatorMiddleware",stack:"dbcore"}}g.getMutationValidatorMiddleware=a}),98);
__d("MAWMessageHasNonNullServerTsOnReceivedAckValidator",["MAWAckLevel","MAWTransactionMode","MAWTransactor"],(function(a,b,c,d,e,f,g){"use strict";a=d("MAWTransactor").makeMsgrTransactor({messages:d("MAWTransactionMode").READONLY},"isMessageHasNonNullServerTsOnReceivedAckValidator",function(a){return function(b){return a.messages.get(b).then(function(a){return a==null||a.ack<d("MAWAckLevel").ACK.sent?{key:b,result:"skipped"}:a.serverTs!=null?{key:b,result:"valid"}:{description:"Message with "+a.ack+" ack has empty serverTs.",key:b,result:"invalid"}})}});b={description:"MAWMessageHasNonNullServerTsOnReceivedAckValidator",isValid:a,table:"messages",type:["add","put"]};g.MAWMessageHasNonNullServerTsOnReceivedAckValidator=b}),98);
__d("lruMap",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a){var b=a.limit;a=a.entries;this.size=0;this.limit=b;this.oldest=this.newest=void 0;this.$1=new Map();a!=null&&(this.assign(a),b<1&&(this.limit=this.size))}var b=a.prototype;b.assign=function(a){var b=this,c=null,d=this.limit||Number.MAX_VALUE;this.$1.clear();a.forEach(function(a){a=new g(a.key,a.value);b.$1.set(a.key,a);c==null?b.oldest=a:(c.next=a,a.prev=c);c=a;if(d--==0)throw new Error("Tried to init with more entries than the limit")});this.newest=c;this.size=this.$1.size};b.$2=function(a){if(a===this.newest)return;a.next&&(a===this.oldest&&(this.oldest=a.next),a.next.prev=a.prev);a.prev&&(a.prev.next=a.next);a.next=void 0;a.prev=this.newest;this.newest&&(this.newest.next=a);this.newest=a};b.get=function(a){a=this.$1.get(a);if(!a)return null;this.$2(a);return a.value};b.set=function(a,b){var c=this.$1.get(a);if(c){c.value=b;this.$2(c);return this}this.$1.set(a,c=new g(a,b));this.newest?(this.newest.next=c,c.prev=this.newest):this.oldest=c;this.newest=c;++this.size;this.size>this.limit&&this.$3();return this};b.$3=function(){var a=this.oldest;if(a){this.oldest!=null?(this.oldest=this.oldest.next,this.oldest!=null&&(this.oldest.prev=void 0)):(this.oldest=void 0,this.newest=void 0);a.next=a.prev=void 0;this.$1["delete"](a.key);--this.size;return[a.key,a.value]}};b.clear=function(){this.oldest=this.newest=void 0,this.size=0,this.$1.clear()};b.toJSON=function(){var a=new Array(this.size),b=0,c=this.oldest;while(c)a[b++]={key:c.key,value:c.value},c=c.next;return a};return a}();var g=function(a,b){this.key=a,this.value=b,this.next=void 0,this.prev=void 0};f["default"]=a}),66);
__d("MAWMessageHasUniqueExternalIdValidator",["MAWDexieTable","MAWTransactionMode","MAWTransactor","WAJids","WAStanzaUtils","justknobx","lruMap"],(function(a,b,c,d,e,f,g){"use strict";b=c("justknobx")._("3288");var h=new(c("lruMap"))({limit:50});function a(a,b,c){a.forEach(function(a){h.set(a,{extraData:c,source:b})})}e=d("MAWTransactor").makeMsgrTransactor({messages:d("MAWTransactionMode").READONLY},"isMessageWithUniqueExternalIdValidator",function(a){return function(b){return a.messages.get(b).then(function(c){var e=c==null?void 0:c.externalId;return c==null||e==null?d("MAWDexieTable").dexieResolve({key:b,result:"skipped"}):a.messages.where("externalId").equals(d("WAStanzaUtils").toStanzaId(e)).filter(function(a){return a.author===c.author&&a.threadJid===c.threadJid}).toArray().then(function(a){if(a.length===1)return{key:b,result:"valid"};else{a=i(b,c,e,a);return{description:a,key:b,result:"invalid"}}})})}});function i(a,b,c,e){var f;c=h.get(c);f=(f=c==null?void 0:c.extraData)!=null?f:{};var g=e[0].author;(d("WAJids").isAuthorSystem(g)||d("WAJids").isAuthorMe(g))&&(f=babelHelpers["extends"]({},f,{author:g}));g=e.every(function(a){return a.serverTs===b.serverTs});e=e.filter(function(b){return b.rowId!==a});c="Message has duplicate externalId. Source: "+((c=c==null?void 0:c.source)!=null?c:"unknown")+". "+("New message type: "+((c=b.type)!=null?c:"")+". ")+("Existing message types: "+e.map(function(a){return a.type}).join(", ")+". ")+("Messages have same serverTS: "+g.toString()+". ")+("Extra data "+JSON.stringify(f)+")");return c}f={description:"MAWMessageHasUniqueExternalIdValidator",isValid:e,sampleRate:b,table:"messages",type:["add","put"]};g.logMessageAddSource=a;g.MAWMessageHasUniqueExternalIdValidator=f}),98);
__d("MAWParticipantMatchOneOnOneThreadValidator",["MAWIndexedDb","MAWTransactionMode","MAWUserJidWrapper","WAJids","justknobx"],(function(a,b,c,d,e,f,g){"use strict";a=c("justknobx")._("3121");b=d("MAWIndexedDb").makeMsgrTransactor({participants:d("MAWTransactionMode").READONLY},"isParticipantMatchingOneOnOneThreadValidator",function(a){return function(b){return a.participants.get(b).then(function(a){return a==null?{key:b,result:"skipped"}:d("WAJids").switchOnMsgrChatJidType(a.threadJid,{group:function(){return{key:b,result:"skipped"}},user:function(c){return a.userJid!==c&&a.userJid!==d("MAWUserJidWrapper").getMyUserJid()?{description:"Participants added to 1:1 thread is neither self or the other user",key:b,result:"invalid"}:{key:b,result:"valid"}}})})}});e={description:"MAWParticipantMatchOneOnOneThreadValidator",isValid:b,sampleRate:a,table:"participants",type:["add","put"]};g.MAWParticipantMatchOneOnOneThreadValidator=e}),98);
__d("MAWReactionHasUniqueProtocolMsgIdValidator",["MAWDexieTable","MAWTransactionMode","MAWTransactor","WAStanzaUtils"],(function(a,b,c,d,e,f,g){"use strict";a=d("MAWTransactor").makeMsgrTransactor({reactions:d("MAWTransactionMode").READONLY},"isReactionWithUniqueProtocolMsgIdValidator",function(a){return function(b){return a.reactions.get(b).then(function(c){var e=c==null?void 0:c.externalId;return e==null?d("MAWDexieTable").dexieResolve({key:b,result:"skipped"}):a.reactions.where("externalId").equals(d("WAStanzaUtils").toStanzaId(e)).filter(function(a){return a.author===(c==null?void 0:c.author)&&a.threadJid===(c==null?void 0:c.threadJid)}).toArray().then(function(a){if(a.length===1)return{key:b,result:"valid"};else return{description:"Reaction has duplicate protocolMsgId",key:b,result:"invalid"}})})}});b={description:"MAWReactionHasUniqueProtocolMsgIdValidator",isValid:a,table:"reactions",type:["add","put"]};g.MAWReactionHasUniqueProtocolMsgIdValidator=b}),98);
__d("MAWDbMutationMiddleware",["FBLogger","MAWDbMiddlewareMutations"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return{create:function(b){return babelHelpers["extends"]({},b,{table:function(e){var f=b.table(e);try{return babelHelpers["extends"]({},f,{get:function(b){return f.get(b).then(function(b){return b==null?void 0:d("MAWDbMiddlewareMutations").getValue(b,e,a)})},getMany:function(b){return f.getMany(b).then(function(b){return b.map(function(b){return b==null?void 0:d("MAWDbMiddlewareMutations").getValue(b,e,a)})})},mutate:function(b){var c=null;switch(b.type){case"add":case"put":c=b.values.map(function(b){return d("MAWDbMiddlewareMutations").mutateValue(b,e,a)});break;case"delete":break;case"deleteRange":break}if(b.type==="delete"||b.type==="deleteRange"||c==null)return f.mutate(b);b.values=c;return f.mutate(b).then(function(a){return a})},openCursor:function(b){return f.openCursor(b).then(function(b){return b==null||b.value==null?b:h(b,e,a)})},query:function(b){return f.query(b).then(function(b){if(b.result.length===0||typeof b.result[0]!=="object")return b;var c=b.result.map(function(b){return d("MAWDbMiddlewareMutations").getValue(b,e,a)});b.result=c;return b})}})}catch(a){c("FBLogger")("maw_ear").catching(a).mustfix("Error applying MAWDbMiddleware");return f}}})},name:"MAWDbMutationMiddleware",stack:"dbcore"}}function b(){return{create:function(a){return babelHelpers["extends"]({},a,{table:function(b){var e=a.table(b);try{return babelHelpers["extends"]({},e,{get:function(a){return e.get(a).then(function(a){return d("MAWDbMiddlewareMutations").getVaultedValue(a,b)})},getMany:function(a){return e.getMany(a).then(function(a){return a.map(function(a){return d("MAWDbMiddlewareMutations").getVaultedValue(a,b)})})},mutate:function(a){if(a.type==="delete"||a.type==="deleteRange")return e.mutate(a);a.values=a.values.map(function(a){return d("MAWDbMiddlewareMutations").mutateVaultedValue(a,b)});return e.mutate(a)},openCursor:function(a){return e.openCursor(a).then(function(a){return a==null||a.value==null?a:i(a,b)})},query:function(a){return e.query(a).then(function(a){return a.result.length===0||typeof a.result[0]!=="object"?a:babelHelpers["extends"]({},a,{result:a.result.map(function(a){return d("MAWDbMiddlewareMutations").getVaultedValue(a,b)})})})}})}catch(a){c("FBLogger")("maw_ear").catching(a).mustfix("Error applying MAWDbMiddleware");return e}}})},name:"getMAWVaultMiddleware",stack:"dbcore"}}function h(a,b,c){var e;return Object.create(a,{"continue":{get:function(){return a["continue"]}},continuePrimaryKey:{get:function(){return a.continuePrimaryKey}},key:{get:function(){return a.key}},primaryKey:{get:function(){return a.primaryKey}},start:{value:function(f){return a.start(function(){e=d("MAWDbMiddlewareMutations").getValue(a.value,b,c);try{a.value=e}catch(a){}f()})}},value:{get:function(){return e}}})}function i(a,b){var c;return Object.create(a,{"continue":{get:function(){return a["continue"]}},continuePrimaryKey:{get:function(){return a.continuePrimaryKey}},key:{get:function(){return a.key}},primaryKey:{get:function(){return a.primaryKey}},start:{value:function(e){return a.start(function(){c=d("MAWDbMiddlewareMutations").getVaultedValue(a.value,b);try{a.value=c}catch(a){}e()})}},value:{get:function(){return c}}})}g.getMAWDbMutationMiddleware=a;g.getMAWVaultMiddleware=b}),98);
__d("MAWArmadilloAppDataTableSchema.pb",["WAProtoConst"],(function(a,b,c,d,e,f,g){a={};b={};c={};e={};f={};var h={},i={},j={},k={},l={},m={},n={},o={},p={},q={},r={},s={};a.internalSpec={externalId:[1,(d=d("WAProtoConst")).TYPES.STRING],author:[2,d.TYPES.STRING],chat:[3,d.TYPES.STRING]};b.internalSpec={fromMe:[1,d.TYPES.BOOL],id:[2,d.TYPES.STRING]};c.internalSpec={key:[1,d.TYPES.MESSAGE,b],ts:[2,d.TYPES.INT64]};e.internalSpec={lastMessageTimestamp:[1,d.TYPES.INT64],lastSystemMessageTimestamp:[2,d.TYPES.INT64],messages:[3,d.FLAGS.REPEATED|d.TYPES.MESSAGE,c]};f.internalSpec={type:[1,d.TYPES.STRING],chatJid:[2,d.TYPES.STRING],archived:[3,d.TYPES.BOOL],ts:[4,d.TYPES.INT64],messageRange:[5,d.TYPES.MESSAGE,e],read:[6,d.TYPES.BOOL]};h.internalSpec={type:[1,d.TYPES.STRING],protocolMsgId:[2,d.TYPES.MESSAGE,a]};i.internalSpec={chatAction:[1,d.TYPES.MESSAGE,f],messageAction:[2,d.TYPES.MESSAGE,h],__oneofs__:{action:["chatAction","messageAction"]}};j.internalSpec={actions:[1,d.FLAGS.REPEATED|d.TYPES.MESSAGE,i]};k.internalSpec={id:[1,d.TYPES.UINT64],anonId:[2,d.TYPES.BYTES],rootKey:[3,d.TYPES.BYTES],status:[4,d.TYPES.INT32]};l.internalSpec={backupId:[1,d.TYPES.UINT64],serverDataId:[2,d.TYPES.UINT64],epoch:[3,d.FLAGS.REPEATED|d.TYPES.MESSAGE,k],tempOcmfClientState:[4,d.TYPES.BYTES],mailboxRootKey:[5,d.TYPES.BYTES],obliviousValidationToken:[6,d.TYPES.BYTES]};m.internalSpec={currentIndex:[1,d.TYPES.UINT32],deviceIndexes:[2,d.FLAGS.REPEATED|d.TYPES.UINT32],rawId:[3,d.TYPES.UINT32]};n.internalSpec={keyId:[1,d.TYPES.BYTES],keyData:[2,d.TYPES.BYTES],keyEpoch:[3,d.TYPES.UINT32],timestamp:[4,d.TYPES.INT64],fingerprint:[5,d.TYPES.MESSAGE,m]};o.internalSpec={keys:[1,d.FLAGS.REPEATED|d.TYPES.MESSAGE,n],orphanKeys:[2,d.FLAGS.REPEATED|d.TYPES.BYTES]};p.internalSpec={keyIds:[1,d.FLAGS.REPEATED|d.TYPES.BYTES]};q.internalSpec={type:[1,d.TYPES.STRING],actions:[2,d.FLAGS.REPEATED|d.TYPES.MESSAGE,i],encryptedBackupsSecrets:[3,d.TYPES.MESSAGE,l],syncKeyShare:[4,d.TYPES.MESSAGE,o],syncKeyRequest:[5,d.TYPES.MESSAGE,p]};r.internalSpec={deviceJid:[1,d.TYPES.STRING],serializedPubKey:[2,d.TYPES.BYTES],baseKey:[3,d.TYPES.BYTES]};s.internalSpec={externalId:[1,d.TYPES.STRING],ts:[2,d.TYPES.INT64],contents:[3,d.TYPES.MESSAGE,q],permittedIdentitiesPerDevice:[4,d.FLAGS.REPEATED|d.TYPES.MESSAGE,r],ack:[5,d.TYPES.INT32],appDataId:[6,d.TYPES.INT32],recipientDevices:[7,d.FLAGS.REPEATED|d.TYPES.STRING],sendPartial:[8,d.TYPES.BOOL]};g.ProtocolMsgIdSpec=a;g.MetaSyncMessageKeyProtoSpec=b;g.MetaSyncMessageProtoSpec=c;g.MetaSyncMessageRangeProtoSpec=e;g.MetaSyncChatActionProtoSpec=f;g.MetaSyncMessageActionProtoSpec=h;g.MetaSyncActionProtoSpec=i;g.MetaSyncAppDataProtoSpec=j;g.EncryptedBackupsSecretsEpochProtoSpec=k;g.EncryptedBackupsSecretsProtoSpec=l;g.FingerprintProtoSpec=m;g.SyncKeyDataProtoSpec=n;g.SyncKeyShareProtoSpec=o;g.SyncKeyRequestProtoSpec=p;g.AppDataProtoSpec=q;g.IdentitiesPerDeviceProtoSpec=r;g.AppDataTableSchemaProtoSpec=s}),98);
__d("MAWArmadilloAppMetaTableSchema.pb",["WAProtoConst"],(function(a,b,c,d,e,f,g){a={};b={};a.internalSpec={msgTypeVersion:[1,(c=d("WAProtoConst")).TYPES.INT32],hmacKey:[2,c.TYPES.BYTES],allowSecurityAlert:[3,c.TYPES.BOOL],hotlikeSticker:[4,c.TYPES.BYTES],isBackfilledForOccamadillo:[5,c.TYPES.BOOL],allowSecurityAlertForSelf:[11,c.TYPES.BOOL],hasMigratedFromDexie:[12,c.TYPES.BOOL],restoreMigrationAttempts:[13,c.TYPES.INT32],deviceJid:[14,c.TYPES.STRING],restoreToDexieMigrationComplete:[15,c.TYPES.BOOL],dbMigrationVersion:[16,c.TYPES.INT32]};b.internalSpec={key:[1,c.TYPES.STRING],value:[2,c.TYPES.MESSAGE,a]};g.DbAppMetaValuesProtoSpec=a;g.AppMetaTableSchemaProtoSpec=b}),98);
__d("MAWArmadilloCollectionVersionsTableSchema.pb",["WAProtoConst"],(function(a,b,c,d,e,f,g){a={};a.internalSpec={collection:[1,(b=d("WAProtoConst")).TYPES.STRING],version:[2,b.TYPES.INT32],state:[3,b.TYPES.STRING],finiteFailureStartTime:[4,b.TYPES.INT64],ltHash:[5,b.TYPES.BYTES],isCollectionInMacMismatchFatal:[6,b.TYPES.BOOL],isCollectionLthashInconsistent:[7,b.TYPES.BOOL]};g.CollectionVersionsTableSchemaProtoSpec=a}),98);
__d("MAWArmadilloContactsTableSchema.pb",["WAProtoConst"],(function(a,b,c,d,e,f,g){a={};b={};c={};e={};f={};a.internalSpec={ephemeralExpirationInSec:[1,(d=d("WAProtoConst")).TYPES.UINT32],ephemeralLastUpdatedOrSetTimestamp:[2,d.TYPES.INT64]};b.internalSpec={syncResponseRetries:[1,d.TYPES.INT32],syncResponseSentTs:[2,d.TYPES.INT64]};c.internalSpec={sequence:[1,d.TYPES.INT64],timestamp:[2,d.TYPES.INT64],devices:[3,d.FLAGS.REPEATED|d.TYPES.BYTES],signingDeviceIndex:[4,d.TYPES.INT64],dirty:[5,d.TYPES.BOOL]};e.internalSpec={timeBucket:[1,d.TYPES.INT64],alert:[2,d.TYPES.BOOL]};f.internalSpec={contactJid:[1,d.TYPES.STRING],dhash:[3,d.TYPES.STRING],nameForSearch:[4,d.TYPES.STRING],ephemeralSetting:[5,d.TYPES.MESSAGE,a],isBlocked:[6,d.TYPES.BOOL],lastSyncTs:[7,d.TYPES.INT64],icdcInfo:[8,d.TYPES.MESSAGE,c],ephemeralSyncResponseBackoffInfo:[9,d.TYPES.MESSAGE,b],icdcFails:[10,d.FLAGS.REPEATED|d.TYPES.MESSAGE,e],relationship:[11,d.TYPES.INT32],isRestricted:[12,d.TYPES.BOOL]};g.EphemeralSettingProtoSpec=a;g.EphemeralSyncResponseBackoffInfoSpec=b;g.ICDCInfoProtoSpec=c;g.ICDCCheckFailSpec=e;g.ContactsTableSchemaProtoSpec=f}),98);
__d("MAWArmadilloDeletedMessagesTableSchema.pb",["WAProtoConst"],(function(a,b,c,d,e,f,g){a={};a.internalSpec={author:[1,(b=d("WAProtoConst")).TYPES.STRING],chat:[2,b.TYPES.STRING],externalId:[3,b.TYPES.STRING],reason:[4,b.TYPES.STRING]};g.DeletedMessagesTableSchemaProtoSpec=a}),98);
__d("MAWArmadilloDeviceChangeAlertsTableSchema.pb",["WAProtoConst"],(function(a,b,c,d,e,f,g){a={};a.internalSpec={action:[1,(b=d("WAProtoConst")).TYPES.STRING],isArchived:[2,b.TYPES.BOOL],deviceChangeAlertsId:[3,b.TYPES.INT64],location:[4,b.TYPES.STRING],model:[5,b.TYPES.STRING],ts:[6,b.TYPES.INT64],loggedOut:[7,b.TYPES.BOOL],deviceJid:[8,b.TYPES.STRING],identity:[9,b.TYPES.BYTES],platform:[10,b.TYPES.STRING],latitude:[11,b.TYPES.STRING],longitude:[12,b.TYPES.STRING],isConfirmed:[13,b.TYPES.BOOL],isNotified:[14,b.TYPES.BOOL]};g.DeviceChangeAlertsTableSchemaProtoSpec=a}),98);
__d("MAWArmadilloDyiBatchTableSchema.pb",["WAProtoConst"],(function(a,b,c,d,e,f,g){a={BACKUP_RESTORE:0,E2E_DYI:1};b={};b.internalSpec={batchId:[1,(c=d("WAProtoConst")).TYPES.INT32],numMessages:[2,c.TYPES.INT32],oldestTs:[3,c.TYPES.INT64],threadId:[4,c.TYPES.STRING],isThread:[5,c.TYPES.BOOL],numMessagesRestored:[6,c.TYPES.INT32],qplInstanceKeyForThread:[7,c.TYPES.INT64],qplFlowDescriptor:[8,c.TYPES.ENUM,a],qplInstanceKeyE2E:[9,c.TYPES.INT64],numThreadsRestored:[10,c.TYPES.INT64]};g.DYI_BATCH_TABLE_SCHEMA_PROTO_QPL_FLOW_DESCRIPTOR=a;g.DyiBatchTableSchemaProtoSpec=b}),98);
__d("MAWArmadilloEBMsgRangesTableSchema.pb",["WAProtoConst"],(function(a,b,c,d,e,f,g){a={};a.internalSpec={rangeId:[1,(b=d("WAProtoConst")).TYPES.UINT32],threadJid:[2,b.TYPES.STRING],minMsgExternalId:[3,b.TYPES.STRING],maxMsgExternalId:[4,b.TYPES.STRING],minMsgSortOrderMs:[5,b.TYPES.UINT64],maxMsgSortOrderMs:[6,b.TYPES.UINT64]};g.EBMsgRangesTableSchemaProtoSpec=a}),98);
__d("MAWArmadilloMessagesTableSchema.pb",["MAWArmadilloContactsTableSchema.pb","WAProtoConst"],(function(a,b,c,d,e,f,g){var h;a={};b={};c={};e={};f={};var i={},j={},k={},l={},m={};a.internalSpec={content:[1,(h=d("WAProtoConst")).TYPES.STRING],adminMsgContent:[2,h.FLAGS.REPEATED|h.TYPES.STRING],adminType:[3,h.TYPES.STRING],obsoleteExpiration:[4,h.TYPES.INT32],obsoleteTs:[5,h.TYPES.INT64],subtype:[6,h.TYPES.STRING],protobuf:[7,h.TYPES.BYTES],screenshotActionType:[8,h.TYPES.INT32],authorName:[9,h.TYPES.STRING],version:[10,h.TYPES.INT32],mentionedJids:[11,h.FLAGS.REPEATED|h.TYPES.STRING]};b.internalSpec={frankingTag:[1,h.TYPES.BYTES],frankingVersion:[2,h.TYPES.INT32],reportingContent:[3,h.TYPES.BYTES],reportingTag:[4,h.TYPES.BYTES],frankingKey:[5,h.TYPES.BYTES]};c.internalSpec={remoteJid:[1,h.TYPES.STRING],content:[2,h.TYPES.MESSAGE,l]};e.internalSpec={duration:[1,h.TYPES.INT32],width:[2,h.TYPES.INT32],height:[3,h.TYPES.INT32],mimetype:[4,h.TYPES.STRING],jpegThumbnail:[5,h.TYPES.BYTES],jpegThumbnailHeight:[6,h.TYPES.INT32],jpegThumbnailWidth:[7,h.TYPES.INT32]};f.internalSpec={width:[1,h.TYPES.UINT32],height:[2,h.TYPES.UINT32],jpegThumbnail:[3,h.TYPES.BYTES],jpegThumbnailHeight:[4,h.TYPES.INT32],jpegThumbnailWidth:[5,h.TYPES.INT32]};i.internalSpec={duration:[1,h.TYPES.INT32],mimetype:[2,h.TYPES.STRING],played:[3,h.TYPES.BOOL]};j.internalSpec={filename:[1,h.TYPES.STRING],mimetype:[2,h.TYPES.STRING]};k.internalSpec={mediaType:[1,h.TYPES.STRING],plaintextHash:[2,h.TYPES.STRING],size:[3,h.TYPES.INT32],ts:[4,h.TYPES.INT64],mediaEntry:[5,h.TYPES.BYTES],validatedVideoInfo:[6,h.TYPES.MESSAGE,e],validatedImageInfo:[7,h.TYPES.MESSAGE,f],validatedAudioInfo:[8,h.TYPES.MESSAGE,i],validatedDocumentFileInfo:[9,h.TYPES.MESSAGE,j]};l.internalSpec={type:[1,h.TYPES.STRING],ts:[2,h.TYPES.INT64],externalId:[3,h.TYPES.STRING],author:[4,h.TYPES.STRING],msgContent:[5,h.TYPES.MESSAGE,a],obsoleteMedia:[6,h.TYPES.MESSAGE,k],msgId:[7,h.TYPES.STRING],mediaId:[8,h.TYPES.INT32],sourceId:[9,h.TYPES.STRING],xmaMessageType:[10,h.TYPES.INT32],specialTextSize:[11,h.TYPES.INT32],plaintextHash:[12,h.TYPES.STRING],expirationTs:[13,h.TYPES.INT64]};m.internalSpec={type:[1,h.TYPES.STRING],ts:[2,h.TYPES.INT64],externalId:[3,h.TYPES.STRING],msgId:[4,h.TYPES.STRING],author:[5,h.TYPES.STRING],ack:[6,h.TYPES.INT32],resendCount:[7,h.TYPES.INT32],msgContent:[8,h.TYPES.MESSAGE,a],altIndex:[9,h.TYPES.STRING],forwardingScore:[10,h.TYPES.INT32],quote:[11,h.TYPES.MESSAGE,c],messageExpirationTs:[12,h.TYPES.INT64],ephemeralSetting:[13,h.TYPES.MESSAGE,d("MAWArmadilloContactsTableSchema.pb").EphemeralSettingProtoSpec],revokedExternalId:[14,h.TYPES.STRING],isForwarded:[15,h.TYPES.BOOL],originalTs:[17,h.TYPES.INT64],sortOrderMs:[18,h.TYPES.INT64],reportingMeta:[19,h.TYPES.MESSAGE,b],messageDeleteTs:[20,h.TYPES.INT64],ephemeralCounterStarted:[21,h.TYPES.BOOL],quoteExternalId:[22,h.TYPES.STRING],unsendMsgContentDeleteTs:[23,h.TYPES.INT64],rowId:[24,h.TYPES.INT32],thread:[25,h.TYPES.INT32],mediaId:[26,h.TYPES.INT32],ephemeralMsgDisappeared:[27,h.TYPES.BOOL],threadJid:[28,h.TYPES.STRING],xmaId:[29,h.TYPES.INT32],specialTextSize:[30,h.TYPES.INT32],xmaMessageType:[31,h.TYPES.INT32],isExpiredXmaMsg:[32,h.TYPES.BOOL],ravenEphemeralType:[33,h.TYPES.INT32],ravenEphemeralMediaState:[34,h.TYPES.INT32],editCount:[35,h.TYPES.INT32],groupId:[36,h.TYPES.STRING],groupIndex:[37,h.TYPES.INT64],groupSize:[38,h.TYPES.INT64],receiverFetchId:[39,h.TYPES.STRING],source:[40,h.TYPES.STRING],quoteExpirationTs:[41,h.TYPES.INT64]};g.MsgContentProtoSpec=a;g.ReportingMetaProtoSpec=b;g.DbQuotedMsgProtoSpec=c;g.VideoMsgContentProtoSpec=e;g.ImageMsgContentProtoSpec=f;g.AudioMsgContentProtoSpec=i;g.DocumentFileMsgContentProtoSpec=j;g.QuotedDbMediaProtoSpec=k;g.DbQuotedMsgContentProtoSpec=l;g.MessagesTableSchemaProtoSpec=m}),98);
__d("MAWArmadilloEditMsgHistoryTableSchema.pb",["MAWArmadilloMessagesTableSchema.pb","WAProtoConst"],(function(a,b,c,d,e,f,g){a={};a.internalSpec={author:[1,(b=d("WAProtoConst")).TYPES.STRING],editMsgHistoryId:[2,b.TYPES.INT32],editTs:[3,b.TYPES.INT64],msgContent:[4,b.TYPES.MESSAGE,d("MAWArmadilloMessagesTableSchema.pb").MsgContentProtoSpec],originalMsgExternalId:[5,b.TYPES.STRING],specialTextSize:[6,b.TYPES.INT32],threadJid:[7,b.TYPES.STRING],editExternalId:[8,b.TYPES.STRING],sendStatus:[9,b.TYPES.INT32]};g.EditMsgHistoryTableSchemaProtoSpec=a}),98);
__d("MAWArmadilloGroupInfoTableSchema.pb",["WAProtoConst"],(function(a,b,c,d,e,f,g){a={};a.internalSpec={groupJid:[1,(b=d("WAProtoConst")).TYPES.STRING],threadId:[2,b.TYPES.INT32],creator:[3,b.TYPES.STRING],creationTs:[4,b.TYPES.INT64],name:[5,b.TYPES.STRING],nameOwner:[6,b.TYPES.STRING],nameTs:[7,b.TYPES.INT64],msgExpiration:[8,b.TYPES.INT32],participantVersion:[9,b.TYPES.STRING],inviter:[10,b.TYPES.STRING],memberAddMode:[11,b.TYPES.STRING]};g.GroupInfoSchemaProtoSpec=a}),98);
__d("MAWArmadilloGroupInvitesTableSchema.pb",["WAProtoConst"],(function(a,b,c,d,e,f,g){a={};a.internalSpec={inviterJid:[1,(b=d("WAProtoConst")).TYPES.STRING],invitedParticipantId:[2,b.TYPES.STRING],inviteCode:[3,b.TYPES.STRING],inviteExpirationTs:[4,b.TYPES.INT64],caption:[5,b.TYPES.STRING]};g.GroupInvitesTableSchemaProtoSpec=a}),98);
__d("MAWArmadilloMediaTablesSchema.pb",["WAProtoConst"],(function(a,b,c,d,e,f,g){a={};b={};c={};e={};f={};var h={},i={},j={},k={};a.internalSpec={plaintextHash:[1,(d=d("WAProtoConst")).TYPES.STRING],blobData:[2,d.TYPES.BYTES],mimetype:[3,d.TYPES.STRING],hashedPlaintextHash:[4,d.TYPES.STRING],chunkId:[5,d.TYPES.INT32]};b.internalSpec={mediaBackupId:[1,d.TYPES.INT32],mediaId:[2,d.TYPES.INT32],objectId:[3,d.TYPES.STRING],msgId:[4,d.TYPES.STRING],fbid:[5,d.TYPES.STRING]};c.internalSpec={msgId:[1,d.TYPES.STRING],mediaEntryData:[2,d.TYPES.BYTES]};e.internalSpec={duration:[1,d.TYPES.UINT32],width:[2,d.TYPES.UINT32],height:[3,d.TYPES.UINT32],mimetype:[4,d.TYPES.STRING],jpegThumbnail:[5,d.TYPES.BYTES],jpegThumbnailHeight:[6,d.TYPES.UINT32],jpegThumbnailWidth:[7,d.TYPES.UINT32],thumbnailPlaintextHash:[8,d.TYPES.STRING]};f.internalSpec={width:[1,d.TYPES.UINT32],height:[2,d.TYPES.UINT32],jpegThumbnail:[3,d.TYPES.BYTES],jpegThumbnailHeight:[4,d.TYPES.UINT32],jpegThumbnailWidth:[5,d.TYPES.UINT32],thumbnailPlaintextHash:[6,d.TYPES.STRING]};h.internalSpec={duration:[1,d.TYPES.UINT32],mimetype:[2,d.TYPES.STRING],played:[3,d.TYPES.BOOL]};i.internalSpec={filename:[1,d.TYPES.STRING],mimetype:[2,d.TYPES.STRING]};j.internalSpec={mimetype:[1,d.TYPES.STRING],videoStreamType:[2,d.TYPES.STRING],videoCalculatedFps:[3,d.TYPES.UINT32],videoNominalFps:[4,d.TYPES.UINT32],videoWidth:[5,d.TYPES.UINT32],videoHeight:[6,d.TYPES.UINT32],videoDuration:[7,d.TYPES.UINT32],videoAvgBitsPerSecond:[8,d.TYPES.UINT32],audioStreamType:[9,d.TYPES.STRING],audioSamplingRate:[10,d.TYPES.UINT32],audioNumberOfChannels:[11,d.TYPES.UINT32],audioAvgBitsPerSecond:[12,d.TYPES.UINT32]};k.internalSpec={mediaType:[1,d.TYPES.STRING],plaintextHash:[2,d.TYPES.STRING],size:[3,d.TYPES.UINT64],mediaEntries:[4,d.FLAGS.REPEATED|d.TYPES.MESSAGE,c],ts:[5,d.TYPES.INT64],validatedVideoInfo:[6,d.TYPES.MESSAGE,e],validatedImageInfo:[7,d.TYPES.MESSAGE,f],validatedAudioInfo:[8,d.TYPES.MESSAGE,h],hashedPlaintextHash:[9,d.TYPES.STRING],mediaId:[10,d.TYPES.INT32],msgIds:[11,d.FLAGS.REPEATED|d.TYPES.STRING],objectId:[12,d.TYPES.STRING],fbid:[13,d.TYPES.STRING],validatedDocumentFileInfo:[14,d.TYPES.MESSAGE,i],validatedResult:[15,d.TYPES.MESSAGE,j]};g.ChunkTableSchemaProtoSpec=a;g.MediaBackupSchemaProtoSpec=b;g.MediaEntriesProtoSpec=c;g.VideoMsgContentProtoSpec=e;g.ImageMsgContentProtoSpec=f;g.AudioMsgContentProtoSpec=h;g.DocumentFileMsgContentProtoSpec=i;g.ValidatedResultSpec=j;g.MediaTableSchemaProtoSpec=k}),98);
__d("MAWArmadilloMetaRowTableSchema.pb",["WAProtoConst"],(function(a,b,c,d,e,f,g){a={};b={};c={};e={};f={};var h={},i={},j={},k={},l={};a.internalSpec={encryptedSerializedCat:[1,(d=d("WAProtoConst")).TYPES.STRING],expirationTimeInSeconds:[2,d.TYPES.INT32]};b.internalSpec={publicKey:[1,d.TYPES.BYTES],privateKey:[2,d.TYPES.BYTES]};c.internalSpec={intValue:[1,d.TYPES.INT32],strValue:[2,d.TYPES.STRING],boolValue:[3,d.TYPES.BOOL],__oneofs__:{value:["intValue","strValue","boolValue"]}};e.internalSpec={name:[1,d.TYPES.STRING],value:[2,d.TYPES.MESSAGE,c]};f.internalSpec={expoKey:[1,d.TYPES.INT32],value:[2,d.TYPES.STRING]};h.internalSpec={abKey:[1,d.TYPES.STRING],abHash:[2,d.TYPES.STRING],lastSyncTime:[3,d.TYPES.INT64],expoKeyStr:[4,d.TYPES.STRING],refresh:[5,d.TYPES.INT64],internalExpoKeys:[6,d.FLAGS.REPEATED|d.TYPES.STRING],propExpoKeys:[7,d.FLAGS.REPEATED|d.TYPES.MESSAGE,f],propValues:[8,d.FLAGS.REPEATED|d.TYPES.MESSAGE,e]};i.internalSpec={key:[1,d.FLAGS.REQUIRED|d.TYPES.BYTES],notAfter:[2,d.FLAGS.REQUIRED|d.TYPES.INT32],notBefore:[3,d.FLAGS.REQUIRED|d.TYPES.INT32]};j.internalSpec={leaf:[1,d.TYPES.MESSAGE,i],intermediate:[2,d.TYPES.MESSAGE,i]};k.internalSpec={cat:[1,d.TYPES.MESSAGE,a],deviceUUID:[2,d.TYPES.STRING],regId:[3,d.TYPES.INT32],identityKeyPair:[4,d.TYPES.MESSAGE,b],fbid:[5,d.TYPES.STRING],deviceId:[6,d.TYPES.INT32],lastSignedPrekeyId:[7,d.TYPES.INT32],lastPrekeyId:[8,d.TYPES.INT32],lastPrekeyGenerationId:[9,d.TYPES.INT32],edgeInfo:[10,d.TYPES.BYTES],clockSkew:[11,d.TYPES.INT32],msgrDeviceId:[12,d.TYPES.STRING],abProps:[13,d.TYPES.MESSAGE,h],registrationVersion:[14,d.TYPES.INT32],authKeyPair:[15,d.TYPES.MESSAGE,b],certificateChain:[16,d.TYPES.MESSAGE,j],lastSessionDeviceWasLinkedTo:[17,d.TYPES.STRING],restoreMigrationAttempts:[18,d.TYPES.INT32],__oneofs__:{value:["cat","deviceUUID","regId","identityKeyPair","fbid","deviceId","lastSignedPrekeyId","lastPrekeyId","lastPrekeyGenerationId","edgeInfo","clockSkew","msgrDeviceId","abProps","registrationVersion","authKeyPair","certificateChain","lastSessionDeviceWasLinkedTo","restoreMigrationAttempts"]}};l.internalSpec={key:[1,d.TYPES.STRING],value:[2,d.TYPES.MESSAGE,k]};g.ValidCatProtoSpec=a;g.KeyPairProtoSpec=b;g.AbPropTypeSpec=c;g.AbPropValueSpec=e;g.ExpoKeyMapSpec=f;g.AbPropsConfigSpec=h;g.CertificateDetailsSpec=i;g.CertificateChainSpec=j;g.ValueProtoSpec=k;g.MetaRowTableSchemaProtoSpec=l}),98);
__d("MAWArmadilloMissingKeysTableSchema.pb",["WAProtoConst"],(function(a,b,c,d,e,f,g){a={};b={};a.internalSpec={deviceId:[1,(c=d("WAProtoConst")).TYPES.INT32],deviceResponse:[2,c.TYPES.BOOL]};b.internalSpec={keyHex:[1,c.TYPES.STRING],keyId:[2,c.TYPES.BYTES],timestamp:[3,c.TYPES.INT64],deviceResponses:[4,c.FLAGS.REPEATED|c.TYPES.MESSAGE,a]};g.DeviceResponseSpec=a;g.MissingKeysTableSchemaProtoSpec=b}),98);
__d("MAWArmadilloParticipantsTableSchema.pb",["WAProtoConst"],(function(a,b,c,d,e,f,g){a={};a.internalSpec={id:[1,(b=d("WAProtoConst")).TYPES.STRING],userJid:[2,b.TYPES.STRING],deliveredWatermarkTs:[3,b.TYPES.INT64],lastReadWatermarkTs:[4,b.TYPES.INT64],type:[5,b.TYPES.STRING],addressable:[6,b.TYPES.BOOL],lastReadActionTs:[7,b.TYPES.INT64],threadId:[9,b.TYPES.INT32],threadJid:[10,b.TYPES.STRING]};g.ParticipantsTableSchemaProtoSpec=a}),98);
__d("MAWArmadilloPendingMutationsTableSchema.pb",["WAProtoConst"],(function(a,b,c,d,e,f,g){a={SET:0,REMOVE:1};b={};b.internalSpec={id:[1,(c=d("WAProtoConst")).TYPES.INT32],collection:[2,c.TYPES.STRING],index:[3,c.TYPES.STRING],binarySyncAction:[4,c.TYPES.BYTES],version:[5,c.TYPES.INT32],operation:[6,c.TYPES.ENUM,a],timestamp:[7,c.TYPES.INT64],action:[8,c.TYPES.STRING]};g.SYNCD_MUTATION_SYNCD_OPERATION=a;g.PendingMutationsTableSchemaProtoSpec=b}),98);
__d("MAWArmadilloPersonalSenderKeyStatusTableSchema.pb",["WAProtoConst"],(function(a,b,c,d,e,f,g){a={};a.internalSpec={groupJid:[1,(b=d("WAProtoConst")).TYPES.STRING],senderKeyId:[2,b.TYPES.INT32],rotateSenderKey:[4,b.TYPES.BOOL],senderKeyTs:[5,b.TYPES.INT64],hasSenderKey:[6,b.FLAGS.REPEATED|b.TYPES.STRING]};g.PersonalSenderKeyStatusTableSchemaProtoSpec=a}),98);
__d("MAWArmadilloReactionsTableSchema.pb",["WAProtoConst"],(function(a,b,c,d,e,f,g){a={};a.internalSpec={ack:[1,(b=d("WAProtoConst")).TYPES.INT32],author:[2,b.TYPES.STRING],externalId:[3,b.TYPES.STRING],reactionId:[4,b.TYPES.STRING],reactToExternalId:[5,b.TYPES.STRING],reactToAuthor:[6,b.TYPES.STRING],reactToMsgId:[7,b.TYPES.STRING],threadJid:[8,b.TYPES.STRING],reaction:[9,b.TYPES.STRING],groupingKey:[10,b.TYPES.STRING],ts:[11,b.TYPES.INT64],rowId:[12,b.TYPES.INT32],senderTimestampMs:[13,b.TYPES.INT64]};g.ReactionsTableSchemaProtoSpec=a}),98);
__d("MAWArmadilloReceiptTablesSchema.pb",["WAProtoConst"],(function(a,b,c,d,e,f,g){a={};b={};c={};e={};f={};var h={},i={};a.internalSpec={deliveredTs:[1,(d=d("WAProtoConst")).TYPES.INT64],readTs:[2,d.TYPES.INT64]};b.internalSpec={userJid:[1,d.TYPES.STRING],dbUserStatusTs:[2,d.TYPES.MESSAGE,a]};c.internalSpec={deviceJid:[1,d.TYPES.STRING],serializedPubKey:[2,d.TYPES.BYTES],baseKey:[3,d.TYPES.BYTES]};e.internalSpec={deviceJid:[1,d.TYPES.STRING],count:[2,d.TYPES.INT32]};f.internalSpec={msgId:[1,d.TYPES.STRING],statusTsPerUser:[2,d.FLAGS.REPEATED|d.TYPES.MESSAGE,b],permittedIdentitiesPerDevice:[3,d.FLAGS.REPEATED|d.TYPES.MESSAGE,c],recipientDevices:[4,d.FLAGS.REPEATED|d.TYPES.STRING],retryCountsPerDevice:[5,d.FLAGS.REPEATED|d.TYPES.MESSAGE,e],waMsgId:[6,d.TYPES.STRING]};h.internalSpec={device:[1,d.TYPES.STRING],ts:[2,d.TYPES.INT64]};i.internalSpec={pendingReceiptId:[1,d.TYPES.STRING],thread:[2,d.TYPES.STRING],externalId:[3,d.TYPES.STRING],author:[4,d.TYPES.STRING],deliveryReceipts:[5,d.FLAGS.REPEATED|d.TYPES.MESSAGE,h],readReceipts:[6,d.FLAGS.REPEATED|d.TYPES.MESSAGE,h]};g.DbUserStatusTsProtoSpec=a;g.StatusTsPerUserProtoSpec=b;g.IdentitiesPerDeviceProtoSpec=c;g.RetryCountPerDeviceProtoSpec=e;g.ReceiptsTableSchemaProtoSpec=f;g.ReceiptsSpec=h;g.PendingReceiptsTableSchemaProtoSpec=i}),98);
__d("MAWArmadilloReceiverFetchInfoTableSchema.pb",["WAProtoConst"],(function(a,b,c,d,e,f,g){a={};a.internalSpec={mimetype:[1,(b=d("WAProtoConst")).TYPES.STRING],previewHeight:[2,b.TYPES.UINT32],previewWidth:[3,b.TYPES.UINT32],receiverFetchId:[4,b.TYPES.STRING],type:[5,b.TYPES.STRING],previewUrl:[6,b.TYPES.STRING],previewUrlExpirationTimestampMs:[7,b.TYPES.UINT64]};g.ReceiverFetchInfoTableSchemaProtoSpec=a}),98);
__d("MAWArmadilloSignalTablesSchema.pb",["WAProtoConst"],(function(a,b,c,d,e,f,g){a={};b={};c={};e={};f={};var h={};a.internalSpec={deviceJid:[1,(d=d("WAProtoConst")).TYPES.STRING],identity:[2,d.TYPES.BYTES],firstSeenTs:[3,d.TYPES.INT64],deviceName:[4,d.TYPES.STRING],platform:[5,d.TYPES.STRING],userJid:[6,d.TYPES.STRING]};b.internalSpec={keyId:[1,d.TYPES.INT32],encoded:[2,d.TYPES.BYTES],isDeleted:[3,d.TYPES.BOOL]};c.internalSpec={generationId:[1,d.TYPES.INT32],startingId:[2,d.TYPES.INT32],endingId:[3,d.TYPES.INT32],createdTs:[4,d.TYPES.INT64]};e.internalSpec={id:[1,d.TYPES.STRING],session:[2,d.TYPES.BYTES]};f.internalSpec={keyId:[1,d.TYPES.INT32],encoded:[2,d.TYPES.BYTES]};h.internalSpec={id:[1,d.TYPES.STRING],groupJid:[2,d.TYPES.STRING],userJid:[3,d.TYPES.STRING],deviceId:[4,d.TYPES.INT32],record:[5,d.TYPES.BYTES]};g.IdentityTableSchemaProtoSpec=a;g.PrekeyTableSchemaProtoSpec=b;g.PrekeyGenerationTableSchemaProtoSpec=c;g.SessionTableSchemaProtoSpec=e;g.SignedPrekeyTableSchemaProtoSpec=f;g.SenderKeySessionsTableSchemaProtoSpec=h}),98);
__d("MAWArmadilloSyncActionsTableSchema.pb",["WAProtoConst"],(function(a,b,c,d,e,f,g){a={};a.internalSpec={index:[1,(b=d("WAProtoConst")).TYPES.STRING],binarySyncData:[2,b.TYPES.BYTES],actionState:[3,b.TYPES.STRING],version:[4,b.TYPES.INT32],keyId:[5,b.TYPES.BYTES],modelId:[6,b.TYPES.STRING],modelType:[7,b.TYPES.STRING],indexMac:[8,b.TYPES.BYTES],valueMac:[9,b.TYPES.BYTES],collection:[10,b.TYPES.STRING],timestamp:[11,b.TYPES.INT64],action:[12,b.TYPES.STRING]};g.SyncActionsTableSchemaProtoSpec=a}),98);
__d("MAWArmadilloSyncKeysTableSchema.pb",["WAProtoConst"],(function(a,b,c,d,e,f,g){a={};b={};a.internalSpec={currentIndex:[1,(c=d("WAProtoConst")).TYPES.INT32],deviceIndexes:[2,c.FLAGS.REPEATED|c.TYPES.INT32],rawId:[3,c.TYPES.INT64]};b.internalSpec={id:[1,c.TYPES.BYTES],keyId:[2,c.TYPES.BYTES],keyData:[3,c.TYPES.BYTES],keyEpoch:[4,c.TYPES.INT64],timestamp:[5,c.TYPES.INT64],fingerprint:[6,c.TYPES.MESSAGE,a]};g.SyncKeyFingerprintSpec=a;g.SyncKeysTableSchemaProtoSpec=b}),98);
__d("MAWArmadilloTasksTableSchema.pb",["WAProtoConst"],(function(a,b,c,d,e,f,g){a={};a.internalSpec={taskName:[1,d("WAProtoConst").TYPES.STRING],scheduledTime:[2,d("WAProtoConst").TYPES.INT64]};g.TasksTableSchemaProtoSpec=a}),98);
__d("MAWArmadilloThreadsTableSchema.pb",["WAProtoConst"],(function(a,b,c,d,e,f,g){a={};a.internalSpec={jid:[1,(b=d("WAProtoConst")).TYPES.STRING],threadOrder:[2,b.TYPES.STRING],folder:[4,b.TYPES.INT32],newestMsg:[5,b.TYPES.STRING],oldestMsg:[6,b.TYPES.STRING],lastReadMsg:[7,b.TYPES.STRING],lastReadMsgReceiptSent:[8,b.TYPES.STRING],lastReadMsgTs:[9,b.TYPES.INT64],newestMsgTs:[10,b.TYPES.INT64],muteExpireTimeMs:[11,b.TYPES.INT64],muteCallsExpireTimeMs:[12,b.TYPES.INT64],archived:[13,b.TYPES.BOOL],cannotReplyReason:[14,b.TYPES.STRING],chatId:[15,b.TYPES.INT32],optimisticThreadKey:[16,b.TYPES.STRING],isMigratedLocally:[17,b.TYPES.BOOL],snippetMsg:[18,b.TYPES.STRING],deduplicationKey:[19,b.TYPES.STRING],authoritativeThreadKey:[20,b.TYPES.STRING],snippetMsgTs:[21,b.TYPES.INT64],didInsertDualThreadCutoverAdminMsg:[22,b.TYPES.BOOL]};g.ThreadsTableSchemaProtoSpec=a}),98);
__d("MAWArmadilloUnrenderedMessagesTableSchema.pb",["MAWArmadilloContactsTableSchema.pb","MAWArmadilloMessagesTableSchema.pb","WAProtoConst"],(function(a,b,c,d,e,f,g){a={};a.internalSpec={type:[1,(b=d("WAProtoConst")).TYPES.STRING],ts:[2,b.TYPES.INT64],externalId:[3,b.TYPES.STRING],msgId:[4,b.TYPES.STRING],author:[5,b.TYPES.STRING],ack:[6,b.TYPES.INT32],resendCount:[7,b.TYPES.INT32],ephemeralSetting:[8,b.TYPES.MESSAGE,d("MAWArmadilloContactsTableSchema.pb").EphemeralSettingProtoSpec],messageDeleteForMeTs:[9,b.TYPES.INT64],rowId:[10,b.TYPES.INT32],thread:[11,b.TYPES.INT32],mediaId:[12,b.TYPES.INT32],msgContent:[13,b.TYPES.STRING],threadJid:[14,b.TYPES.STRING],reportingMeta:[15,b.TYPES.MESSAGE,d("MAWArmadilloMessagesTableSchema.pb").ReportingMetaProtoSpec],invitedParticipantUserJid:[16,b.TYPES.STRING],groupName:[17,b.TYPES.STRING],quote:[18,b.TYPES.MESSAGE,d("MAWArmadilloMessagesTableSchema.pb").DbQuotedMsgProtoSpec],xmaMessageType:[19,b.TYPES.INT32],sortOrderMs:[20,b.TYPES.INT64]};g.UnrenderedMessagesTableSchemaProtoSpec=a}),98);
__d("MAWArmadilloXMATableSchema.pb",["WAProtoConst"],(function(a,b,c,d,e,f,g){a={};b={};a.internalSpec={associatedMessageId:[1,(c=d("WAProtoConst")).TYPES.STRING],author:[2,c.TYPES.STRING],ctas:[3,c.FLAGS.REPEATED|c.TYPES.MESSAGE,b],defaultCTA:[4,c.TYPES.MESSAGE,b],defaultPreviewMediaId:[5,c.TYPES.INT32],externalId:[6,c.TYPES.STRING],faviconMediaId:[7,c.TYPES.INT32],headerMediaId:[8,c.TYPES.INT32],headerTitle:[9,c.TYPES.STRING],isTombstoned:[10,c.TYPES.BOOL],maxSubtitleNumOfLines:[11,c.TYPES.INT32],maxTitleNumOfLines:[12,c.TYPES.INT32],msgId:[13,c.TYPES.STRING],overlayDescription:[14,c.TYPES.STRING],overlayIconGlyph:[15,c.TYPES.INT32],overlayTitle:[16,c.TYPES.STRING],previewMediaIds:[17,c.FLAGS.REPEATED|c.TYPES.INT32],subtitleText:[18,c.TYPES.STRING],targetExpiringAtSec:[19,c.TYPES.INT64],targetId:[20,c.TYPES.STRING],targetType:[21,c.TYPES.INT32],targetUsername:[22,c.TYPES.STRING],threadJid:[23,c.TYPES.STRING],titleText:[24,c.TYPES.STRING],xmaId:[25,c.TYPES.INT32],xmaLayoutType:[26,c.TYPES.INT32],defaultPreviewMediaPlaintextHash:[27,c.TYPES.STRING],faviconPlaintextHash:[28,c.TYPES.STRING],headerMediaPlaintextHash:[29,c.TYPES.STRING]};b.internalSpec={buttonType:[1,c.TYPES.INT32],title:[2,c.TYPES.STRING],actionUrl:[3,c.TYPES.STRING],nativeUrl:[4,c.TYPES.STRING],ctaType:[5,c.TYPES.STRING]};g.XMATableSchemaProtoSpec=a;g.CTAProtoSpec=b}),98);
__d("MAWXMACTAUtil",[],(function(a,b,c,d,e,f){"use strict";function a(a){var b=a.actionUrl,c=a.buttonType,d=a.nativeUrl;a=a.title;return{actionUrl:b,buttonType:c,nativeUrl:d,title:a}}function b(a){var b=a.actionUrl,c=a.buttonType,d=a.nativeUrl;a=a.title;return{actionUrl:b,buttonType:c,nativeUrl:d,title:a}}f.toMAWCTAEncode=a;f.fromMAWCTAEncode=b}),66);
__d("WAServerSync.pb",["$InternalEnum","WAProtoConst"],(function(a,b,c,d,e,f,g){a=b("$InternalEnum")({SET:0,REMOVE:1});c={};e={};f={};b={};var h={},i={},j={},k={},l={},m={},n={};c.internalSpec={version:[1,(d=d("WAProtoConst")).TYPES.UINT64]};e.internalSpec={code:[1,d.TYPES.UINT64],text:[2,d.TYPES.STRING]};f.internalSpec={blob:[1,d.TYPES.BYTES]};b.internalSpec={blob:[1,d.TYPES.BYTES]};h.internalSpec={id:[1,d.TYPES.BYTES]};i.internalSpec={index:[1,d.TYPES.MESSAGE,f],value:[2,d.TYPES.MESSAGE,b],keyId:[3,d.TYPES.MESSAGE,h]};j.internalSpec={mediaKey:[1,d.TYPES.BYTES],directPath:[2,d.TYPES.STRING],handle:[3,d.TYPES.STRING],fileSizeBytes:[4,d.TYPES.UINT64],fileSha256:[5,d.TYPES.BYTES],fileEncSha256:[6,d.TYPES.BYTES]};k.internalSpec={version:[1,d.TYPES.MESSAGE,c],records:[2,d.FLAGS.REPEATED|d.TYPES.MESSAGE,i],mac:[3,d.TYPES.BYTES],keyId:[4,d.TYPES.MESSAGE,h]};l.internalSpec={mutations:[1,d.FLAGS.REPEATED|d.TYPES.MESSAGE,m]};m.internalSpec={operation:[1,d.TYPES.ENUM,a],record:[2,d.TYPES.MESSAGE,i]};n.internalSpec={version:[1,d.TYPES.MESSAGE,c],mutations:[2,d.FLAGS.REPEATED|d.TYPES.MESSAGE,m],externalMutations:[3,d.TYPES.MESSAGE,j],snapshotMac:[4,d.TYPES.BYTES],patchMac:[5,d.TYPES.BYTES],keyId:[6,d.TYPES.MESSAGE,h],exitCode:[7,d.TYPES.MESSAGE,e],deviceIndex:[8,d.TYPES.UINT32],clientDebugData:[9,d.TYPES.BYTES]};g.SyncdMutation$SyncdOperation=a;g.SyncdVersionSpec=c;g.ExitCodeSpec=e;g.SyncdIndexSpec=f;g.SyncdValueSpec=b;g.KeyIdSpec=h;g.SyncdRecordSpec=i;g.ExternalBlobReferenceSpec=j;g.SyncdSnapshotSpec=k;g.SyncdMutationsSpec=l;g.SyncdMutationSpec=m;g.SyncdPatchSpec=n}),98);
__d("MAWDbObjDecode",["MAWArmadilloAppDataTableSchema.pb","MAWArmadilloAppMetaTableSchema.pb","MAWArmadilloCollectionVersionsTableSchema.pb","MAWArmadilloContactsTableSchema.pb","MAWArmadilloDeletedMessagesTableSchema.pb","MAWArmadilloDeviceChangeAlertsTableSchema.pb","MAWArmadilloDyiBatchTableSchema.pb","MAWArmadilloEBMsgRangesTableSchema.pb","MAWArmadilloEditMsgHistoryTableSchema.pb","MAWArmadilloGroupInfoTableSchema.pb","MAWArmadilloGroupInvitesTableSchema.pb","MAWArmadilloMediaTablesSchema.pb","MAWArmadilloMessagesTableSchema.pb","MAWArmadilloMetaRowTableSchema.pb","MAWArmadilloMissingKeysTableSchema.pb","MAWArmadilloParticipantsTableSchema.pb","MAWArmadilloPendingMutationsTableSchema.pb","MAWArmadilloPersonalSenderKeyStatusTableSchema.pb","MAWArmadilloReactionsTableSchema.pb","MAWArmadilloReceiptTablesSchema.pb","MAWArmadilloReceiverFetchInfoTableSchema.pb","MAWArmadilloSignalTablesSchema.pb","MAWArmadilloSyncActionsTableSchema.pb","MAWArmadilloSyncKeysTableSchema.pb","MAWArmadilloTasksTableSchema.pb","MAWArmadilloThreadsTableSchema.pb","MAWArmadilloUnrenderedMessagesTableSchema.pb","MAWArmadilloXMATableSchema.pb","MAWMsgType","MAWODSProxy","MAWXMACTAUtil","WAOdsEnums","WAServerSync.pb","decodeProtobuf","err"],(function(a,b,c,d,e,f,g){var h={appData:function(a){return J(a)},appMeta:function(a){return K(a)},browserEncryptionMeta:function(a){throw c("err")("unexpected table for decryption")},chunk:function(a){return L(a)},collectionVersions:function(a){return U(a)},contacts:function(a){return E(a)},danglingQueue:function(a){throw c("err")("unexpected table for decryption")},deletedMessages:function(a){return n(a)},deviceChangeAlerts:function(a){return i(a)},dualSendMedia:function(a){throw c("err")("unexpected table for decryption")},dyiBatch:function(a){return P(a)},ebMessageRestoreTasks:function(a){throw c("err")("unexpected table for decryption")},ebMsgRanges:function(a){return Q(a)},ebRestoreQueue:function(a){throw c("err")("unexpected table for decryption")},ebUploadQueue:function(a){throw c("err")("unexpected table for decryption")},editMsgHistory:function(a){return X(a)},ephemeralSettings:function(a){throw c("err")("unexpected table for decryption")},existingUsers:function(a){throw c("err")("unexpected table for decryption")},ftsBackloggedMessages:function(a){throw c("err")("unexpected table for decryption")},ftsEncryptionMeta:function(a){throw c("err")("unexpected table for decryption")},ftsIndexV3:function(a){throw c("err")("unexpected table for decryption")},ftsPurgeBacklog:function(a){throw c("err")("unexpected table for decryption")},ftsPurgeThreadBacklog:function(a){throw c("err")("unexpected table for decryption")},groupInfo:function(a){return q(a)},groupInvites:function(a){return G(a)},historySyncQRCodeData:function(a){throw c("err")("unexpected table for decryption")},historySyncQRCodeSecretKey:function(a){throw c("err")("unexpected table for decryption")},identity:function(a){return t(a)},igMessageAuxiliaryInfo:function(a){throw c("err")("unexpected table for decryption")},isDualSend:function(a){throw c("err")("unexpected table for decryption")},jobs:function(a){throw c("err")("unexpected table for decryption")},media:function(a){return N(a)},mediaBackup:function(a){return M(a)},mediaKeys:function(a){throw c("err")("unexpected table for decryption")},messages:function(a){return m(a)},meta:function(a){return s(a)},missingKeys:function(a){return S(a)},participants:function(a){return F(a)},pendingMessageStanzaQueue:function(a){throw c("err")("unexpected table for decryption")},pendingMutations:function(a){return T(a)},pendingReceipts:function(a){return C(a)},pendingStanzas:function(a){throw c("err")("unexpected table for decryption")},personalSenderKeyStatuses:function(a){return I(a)},prekey:function(a){return u(a)},prekeyGeneration:function(a){return v(a)},reactions:function(a){return O(a)},receipts:function(a){return B(a)},receiverFetchInfo:function(a){return Y(a)},senderKeySessions:function(a){return y(a)},sentBytesCache:function(a){throw c("err")("unexpected table for decryption")},session:function(a){return w(a)},signedPrekey:function(a){return x(a)},staleQueue:function(a){throw c("err")("unexpected table for decryption")},stanzaQueue:function(a){throw c("err")("unexpected table for decryption")},syncActions:function(a){return R(a)},syncKeys:function(a){return V(a)},tasks:function(a){return H(a)},threads:function(a){return D(a)},unrenderedMessages:function(a){return o(a)},xma:function(a){return W(a)}};function a(a,b){if(Object.prototype.hasOwnProperty.call(h,b))b=h[b](a);else throw c("err")("not a valid table name");return b}function i(a){a=d("decodeProtobuf").decodeProtobuf(d("MAWArmadilloDeviceChangeAlertsTableSchema.pb").DeviceChangeAlertsTableSchemaProtoSpec,a);return{action:a.action,deviceJid:a.deviceJid,identity:a.identity,isArchived:a.isArchived,latitude:a.latitude,location:a.location,loggedOut:a.loggedOut,longitude:a.longitude,model:a.model,platform:a.platform,ts:a.ts}}function j(a){a=a.quote;var b;if(a!=null){if(a.content==null)throw c("err")("QuotedMsgContent missing upon decoding");var d=a.content,e=d.author,f=d.expirationTs,g=d.externalId,h=d.mediaId,i=d.msgContent,j=d.msgId,k=d.plaintextHash,l=d.sourceId,m=d.specialTextSize,n=d.ts,o=d.type;d=d.xmaMessageType;b={content:babelHelpers["extends"]({},a.content,{author:e,expirationTs:f,externalId:g,mediaId:h,msgContent:i,msgId:j,plaintextHash:k,sourceId:l,specialTextSize:m,ts:n,type:o,xmaMessageType:d}),remoteJid:a.remoteJid}}return b}function k(a){if(a==null)return a;else return new Uint8Array(a)}function l(a){if(a==null||a.length===0)return new Set();else return new Set(a)}function m(a){a=d("decodeProtobuf").decodeProtobuf(d("MAWArmadilloMessagesTableSchema.pb").MessagesTableSchemaProtoSpec,a);var b=a.msgContent;if(a.type===d("MAWMsgType").MSG_TYPE.FUTUREPROOF){if(b==null)throw c("err")("MsgContent missing upon decoding futureproof message");b.subtype=b.subtype}var e=j(a),f=p(a.reportingMeta);return babelHelpers["extends"]({},a,{msgContent:b,quote:e,reportingMeta:f})}function n(a){a=d("decodeProtobuf").decodeProtobuf(d("MAWArmadilloDeletedMessagesTableSchema.pb").DeletedMessagesTableSchemaProtoSpec,a);return babelHelpers["extends"]({},a)}function o(a){a=d("decodeProtobuf").decodeProtobuf(d("MAWArmadilloUnrenderedMessagesTableSchema.pb").UnrenderedMessagesTableSchemaProtoSpec,a);var b=j(a),c=p(a.reportingMeta);return babelHelpers["extends"]({},a,{quote:b,reportingMeta:c})}function p(a){if(a==null)return;return{frankingKey:a.frankingKey!=null?new Uint8Array(a.frankingKey):a.frankingKey,frankingTag:a.frankingTag!=null?new Uint8Array(a.frankingTag):a.frankingTag,frankingVersion:a.frankingVersion,reportingContent:a.reportingContent,reportingTag:a.reportingTag!=null?new Uint8Array(a.reportingTag):a.reportingTag}}function q(a){a=d("decodeProtobuf").decodeProtobuf(d("MAWArmadilloGroupInfoTableSchema.pb").GroupInfoSchemaProtoSpec,a);return{creationTs:a.creationTs,creator:a.creator,inviter:a.inviter,memberAddMode:a.memberAddMode,msgExpiration:a.msgExpiration,name:a.name,nameOwner:a.nameOwner,nameTs:a.nameTs,participantVersion:a.participantVersion}}function r(a,b){var d;a=a;if(a==null)d=a;else{var e=a.privateKey;a=a.publicKey;if(e==null||a==null)throw c("err")("Decoding "+b+" private or public key missing");d={privateKey:new Uint8Array(e),publicKey:new Uint8Array(a)}}return d}function s(a){var b,c,e,f;a=d("decodeProtobuf").decodeProtobuf(d("MAWArmadilloMetaRowTableSchema.pb").MetaRowTableSchemaProtoSpec,a);b=(b=a.value)==null?void 0:b.cat;if(b==null)b=b;else{var g;b={encrypted_serialized_cat:(g=a.value)==null?void 0:(g=g.cat)==null?void 0:g.encryptedSerializedCat,expiration_time_in_seconds:(g=a.value)==null?void 0:(g=g.cat)==null?void 0:g.expirationTimeInSeconds}}g=(g=a.value)==null?void 0:g.edgeInfo;g=k(g);c=r((c=a.value)==null?void 0:c.identityKeyPair,"identityKeyPair");e=r((e=a.value)==null?void 0:e.authKeyPair,"authKeyPair");return{value:{abProps:(f=a.value)==null?void 0:f.abProps,authKeyPair:e,cat:b,certificateChain:(f=a.value)==null?void 0:f.certificateChain,clockSkew:(e=a.value)==null?void 0:e.clockSkew,deviceId:(b=a.value)==null?void 0:b.deviceId,deviceUUID:(f=a.value)==null?void 0:f.deviceUUID,edgeInfo:g,fbid:(e=a.value)==null?void 0:e.fbid,identityKeyPair:c,lastPrekeyGenerationId:(b=a.value)==null?void 0:b.lastPrekeyGenerationId,lastPrekeyId:(f=a.value)==null?void 0:f.lastPrekeyId,lastSessionDeviceWasLinkedTo:(g=a.value)==null?void 0:g.lastSessionDeviceWasLinkedTo,lastSignedPrekeyId:(e=a.value)==null?void 0:e.lastSignedPrekeyId,regId:(c=a.value)==null?void 0:c.regId,registrationVersion:(b=a.value)==null?void 0:b.registrationVersion,restoreMigrationAttempts:(f=a.value)==null?void 0:f.restoreMigrationAttempts}}}function t(a){a=d("decodeProtobuf").decodeProtobuf(d("MAWArmadilloSignalTablesSchema.pb").IdentityTableSchemaProtoSpec,a);var b=a.identity,c=a.firstSeenTs;b=k(b);return{deviceName:a.deviceName,firstSeenTs:c,identity:b,platform:a.platform}}function u(a){a=d("decodeProtobuf").decodeProtobuf(d("MAWArmadilloSignalTablesSchema.pb").PrekeyTableSchemaProtoSpec,a);var b=a.encoded;b=k(b);return{encoded:b,isDeleted:a.isDeleted}}function v(a){return d("decodeProtobuf").decodeProtobuf(d("MAWArmadilloSignalTablesSchema.pb").PrekeyGenerationTableSchemaProtoSpec,a)}function w(a){a=d("decodeProtobuf").decodeProtobuf(d("MAWArmadilloSignalTablesSchema.pb").SessionTableSchemaProtoSpec,a);a=a.session;a=k(a);return{session:a}}function x(a){a=d("decodeProtobuf").decodeProtobuf(d("MAWArmadilloSignalTablesSchema.pb").SignedPrekeyTableSchemaProtoSpec,a);a=a.encoded;a=k(a);return{encoded:a}}function y(a){a=d("decodeProtobuf").decodeProtobuf(d("MAWArmadilloSignalTablesSchema.pb").SenderKeySessionsTableSchemaProtoSpec,a);var b=a.record;b=k(b);return{deviceId:a.deviceId,record:b}}function z(a){if(a.length===0)return null;else return new Map(a.map(function(a){var b=a.deviceJid;if(b==null||a.serializedPubKey==null)throw c("err")("Expected deviceJid or serializedPubKey are missing ");var d=new Uint8Array(a.serializedPubKey);a=k(a.baseKey);a={baseKey:a,pubKey:d};return[b,a]}))}function A(a){if(a==null)return null;else return new Map(a.map(function(a){if(a.deviceJid==null)throw c("err")("Expected deviceJID is missing ");return[a.deviceJid,(a=a.count)!=null?a:0]}))}function B(a){a=d("decodeProtobuf").decodeProtobuf(d("MAWArmadilloReceiptTablesSchema.pb").ReceiptsTableSchemaProtoSpec,a);var b=a.recipientDevices;b=l(b);return{permittedIdentitiesPerDevice:z(a.permittedIdentitiesPerDevice),recipientDevices:b,retryCountsPerDevice:A(a.retryCountsPerDevice)}}function C(a){return d("decodeProtobuf").decodeProtobuf(d("MAWArmadilloReceiptTablesSchema.pb").PendingReceiptsTableSchemaProtoSpec,a)}function D(a){a=d("decodeProtobuf").decodeProtobuf(d("MAWArmadilloThreadsTableSchema.pb").ThreadsTableSchemaProtoSpec,a);return{archived:a.archived,cannotReplyReason:a.cannotReplyReason,didInsertDualThreadCutoverAdminMsg:a.didInsertDualThreadCutoverAdminMsg,folder:a.folder,isMigratedLocally:a.isMigratedLocally,lastReadMsg:a.lastReadMsg,lastReadMsgReceiptSent:a.lastReadMsgReceiptSent,muteCallsExpireTimeMs:a.muteCallsExpireTimeMs,muteExpireTimeMs:a.muteExpireTimeMs,newestMsg:a.newestMsg,newestMsgTs:a.newestMsgTs,oldestMsg:a.oldestMsg,optimisticThreadKey:a.optimisticThreadKey,snippetMsg:a.snippetMsg,snippetMsgTs:a.snippetMsgTs}}function E(a){a=d("decodeProtobuf").decodeProtobuf(d("MAWArmadilloContactsTableSchema.pb").ContactsTableSchemaProtoSpec,a);var b=a.icdcInfo,c;b!=null&&(c={devices:b.devices.map(function(a){return new Uint8Array(a)}),dirty:b.dirty,sequence:b.sequence,signingDeviceIndex:b.signingDeviceIndex,timestamp:b.timestamp});return{dhash:a.dhash,ephemeralSetting:a.ephemeralSetting,ephemeralSyncResponseBackoffInfo:a.ephemeralSyncResponseBackoffInfo,icdcFails:a.icdcFails,icdcInfo:c,isBlocked:a.isBlocked,isRestricted:a.isRestricted,lastSyncTs:a.lastSyncTs,nameForSearch:a.nameForSearch,relationship:a.relationship}}function F(a){return d("decodeProtobuf").decodeProtobuf(d("MAWArmadilloParticipantsTableSchema.pb").ParticipantsTableSchemaProtoSpec,a)}function G(a){return d("decodeProtobuf").decodeProtobuf(d("MAWArmadilloGroupInvitesTableSchema.pb").GroupInvitesTableSchemaProtoSpec,a)}function H(a){return d("decodeProtobuf").decodeProtobuf(d("MAWArmadilloTasksTableSchema.pb").TasksTableSchemaProtoSpec,a)}function I(a){a=d("decodeProtobuf").decodeProtobuf(d("MAWArmadilloPersonalSenderKeyStatusTableSchema.pb").PersonalSenderKeyStatusTableSchemaProtoSpec,a);var b=a.hasSenderKey;b=l(b);return{hasSenderKey:b,rotateSenderKey:a.rotateSenderKey,senderKeyId:a.senderKeyId,senderKeyTs:a.senderKeyTs}}function J(a){a=d("decodeProtobuf").decodeProtobuf(d("MAWArmadilloAppDataTableSchema.pb").AppDataTableSchemaProtoSpec,a);return{ack:a.ack,contents:a.contents,permittedIdentitiesPerDevice:z(a.permittedIdentitiesPerDevice),recipientDevices:new Set(a.recipientDevices),sendPartial:a.sendPartial,ts:a.ts}}function K(a){return d("decodeProtobuf").decodeProtobuf(d("MAWArmadilloAppMetaTableSchema.pb").AppMetaTableSchemaProtoSpec,a)}function L(a){return d("decodeProtobuf").decodeProtobuf(d("MAWArmadilloMediaTablesSchema.pb").ChunkTableSchemaProtoSpec,a)}function M(a){return d("decodeProtobuf").decodeProtobuf(d("MAWArmadilloMediaTablesSchema.pb").MediaBackupSchemaProtoSpec,a)}function N(a){a=d("decodeProtobuf").decodeProtobuf(d("MAWArmadilloMediaTablesSchema.pb").MediaTableSchemaProtoSpec,a);var b,e=a.mediaEntries;e==null?b=new Map():b=new Map(e.map(function(a){if(a.msgId==null||a.mediaEntryData==null)throw c("err")("Expected msgId or mediaEntryData are missing ");return[a.msgId,new Uint8Array(a.mediaEntryData)]}));return{mediaEntries:b,mediaType:a.mediaType,plaintextHash:a.plaintextHash,size:a.size,ts:a.ts,validatedAudioInfo:a.validatedAudioInfo,validatedDocumentFileInfo:a.validatedDocumentFileInfo,validatedImageInfo:a.validatedImageInfo,validatedResult:a.validatedResult,validatedVideoInfo:a.validatedVideoInfo}}function O(a){a=d("decodeProtobuf").decodeProtobuf(d("MAWArmadilloReactionsTableSchema.pb").ReactionsTableSchemaProtoSpec,a);a.ts!=null&&d("MAWODSProxy").odsBumpEntityKey({entity:d("WAOdsEnums").Entity.MAW_MIGRATE_REACTION_TS_AS_INDEX,key:"reaction_ts_encrypted"});return babelHelpers["extends"]({ack:a.ack,author:a.author,groupingKey:a.groupingKey,reaction:a.reaction,reactToAuthor:a.reactToAuthor,senderTimestampMs:a.senderTimestampMs},a.ts!=null?{ts:a.ts}:{})}function P(a){a=d("decodeProtobuf").decodeProtobuf(d("MAWArmadilloDyiBatchTableSchema.pb").DyiBatchTableSchemaProtoSpec,a);return{isThread:a.isThread,numMessages:a.numMessages,numMessagesRestored:a.numMessagesRestored,numThreadsRestored:a.numThreadsRestored,oldestTs:a.oldestTs,qplFlowDescriptor:a.qplFlowDescriptor,qplInstanceKeyE2E:a.qplInstanceKeyE2E,qplInstanceKeyForThread:a.qplInstanceKeyForThread,threadId:a.threadId}}function Q(a){a=d("decodeProtobuf").decodeProtobuf(d("MAWArmadilloEBMsgRangesTableSchema.pb").EBMsgRangesTableSchemaProtoSpec,a);return{maxMsgExternalId:a.maxMsgExternalId,maxMsgSortOrderMs:a.maxMsgSortOrderMs,minMsgExternalId:a.minMsgExternalId,minMsgSortOrderMs:a.minMsgSortOrderMs}}function R(a){a=d("decodeProtobuf").decodeProtobuf(d("MAWArmadilloSyncActionsTableSchema.pb").SyncActionsTableSchemaProtoSpec,a);return{binarySyncData:a.binarySyncData,keyId:a.keyId,timestamp:a.timestamp,valueMac:a.valueMac,version:a.version}}function S(a){a=d("decodeProtobuf").decodeProtobuf(d("MAWArmadilloMissingKeysTableSchema.pb").MissingKeysTableSchemaProtoSpec,a);var b;a.deviceResponses==null?b=new Map():b=new Map(a.deviceResponses.map(function(a){if(a.deviceId==null)throw c("err")("Expected deviceId is missing");else return[a.deviceId,a.deviceResponse]}));return{deviceResponses:b,keyId:a.keyId,timestamp:a.timestamp}}function T(a){a=d("decodeProtobuf").decodeProtobuf(d("MAWArmadilloPendingMutationsTableSchema.pb").PendingMutationsTableSchemaProtoSpec,a);var b;switch(a.operation){case d("MAWArmadilloPendingMutationsTableSchema.pb").SYNCD_MUTATION_SYNCD_OPERATION.SET:b=d("WAServerSync.pb").SyncdMutation$SyncdOperation.SET;break;case d("MAWArmadilloPendingMutationsTableSchema.pb").SYNCD_MUTATION_SYNCD_OPERATION.REMOVE:b=d("WAServerSync.pb").SyncdMutation$SyncdOperation.REMOVE;break;default:throw c("err")("operation missing when decoding PendingMutation")}return{binarySyncAction:a.binarySyncAction,operation:b,timestamp:a.timestamp,version:a.version}}function U(a){a=d("decodeProtobuf").decodeProtobuf(d("MAWArmadilloCollectionVersionsTableSchema.pb").CollectionVersionsTableSchemaProtoSpec,a);return{finiteFailureStartTime:a.finiteFailureStartTime,isCollectionInMacMismatchFatal:a.isCollectionInMacMismatchFatal,isCollectionLthashInconsistent:a.isCollectionLthashInconsistent,ltHash:a.ltHash,state:a.state,version:a.version}}function V(a){a=d("decodeProtobuf").decodeProtobuf(d("MAWArmadilloSyncKeysTableSchema.pb").SyncKeysTableSchemaProtoSpec,a);return{fingerprint:a.fingerprint,keyData:a.keyData,timestamp:a.timestamp}}function W(a){a=d("decodeProtobuf").decodeProtobuf(d("MAWArmadilloXMATableSchema.pb").XMATableSchemaProtoSpec,a);return{author:a.author,ctas:a.ctas.map(function(a){return d("MAWXMACTAUtil").fromMAWCTAEncode(a)}),defaultCTA:a.defaultCTA==null?a.defaultCTA:d("MAWXMACTAUtil").fromMAWCTAEncode(a.defaultCTA),defaultPreviewMediaPlaintextHash:a.defaultPreviewMediaPlaintextHash,faviconPlaintextHash:a.faviconPlaintextHash,headerMediaPlaintextHash:a.headerMediaPlaintextHash,headerTitle:a.headerTitle,isTombstoned:a.isTombstoned,maxSubtitleNumOfLines:a.maxSubtitleNumOfLines,maxTitleNumOfLines:a.maxTitleNumOfLines,msgId:a.msgId,overlayDescription:a.overlayDescription,overlayIconGlyph:a.overlayIconGlyph,overlayTitle:a.overlayTitle,previewMediaIds:a.previewMediaIds,subtitleText:a.subtitleText,targetId:a.targetId,targetType:a.targetType,targetUsername:a.targetUsername,threadJid:a.threadJid,titleText:a.titleText,xmaLayoutType:a.xmaLayoutType}}function X(a){a=d("decodeProtobuf").decodeProtobuf(d("MAWArmadilloEditMsgHistoryTableSchema.pb").EditMsgHistoryTableSchemaProtoSpec,a);return{author:a.author,editExternalId:a.editExternalId,editTs:a.editTs,msgContent:a.msgContent,sendStatus:a.sendStatus,specialTextSize:a.specialTextSize}}function Y(a){a=d("decodeProtobuf").decodeProtobuf(d("MAWArmadilloReceiverFetchInfoTableSchema.pb").ReceiverFetchInfoTableSchemaProtoSpec,a);return{mimetype:a.mimetype,previewHeight:a.previewHeight,previewUrl:a.previewUrl,previewUrlExpirationTimestampMs:a.previewUrlExpirationTimestampMs,previewWidth:a.previewWidth,type:a.type}}g.decodeDbObj=a;g.decodeDbMetaForEncryption=s}),98);
__d("WASyncdKeyTypes",[],(function(a,b,c,d,e,f){"use strict";function a(a){return a}function b(a){return a}function c(a){return a}function d(a){return a}f.toSyncKeyId=a;f.fromSyncKeyId=b;f.toSyncKeyData=c;f.fromSyncKeyData=d}),66);
__d("MAWDbObjEncode",["MAWArmadilloAppDataTableSchema.pb","MAWArmadilloAppMetaTableSchema.pb","MAWArmadilloContactsTableSchema.pb","MAWArmadilloDeletedMessagesTableSchema.pb","MAWArmadilloDeviceChangeAlertsTableSchema.pb","MAWArmadilloDyiBatchTableSchema.pb","MAWArmadilloEBMsgRangesTableSchema.pb","MAWArmadilloEditMsgHistoryTableSchema.pb","MAWArmadilloGroupInfoTableSchema.pb","MAWArmadilloGroupInvitesTableSchema.pb","MAWArmadilloMediaTablesSchema.pb","MAWArmadilloMessagesTableSchema.pb","MAWArmadilloMetaRowTableSchema.pb","MAWArmadilloParticipantsTableSchema.pb","MAWArmadilloPersonalSenderKeyStatusTableSchema.pb","MAWArmadilloReactionsTableSchema.pb","MAWArmadilloReceiptTablesSchema.pb","MAWArmadilloReceiverFetchInfoTableSchema.pb","MAWArmadilloSignalTablesSchema.pb","MAWArmadilloTasksTableSchema.pb","MAWArmadilloThreadsTableSchema.pb","MAWArmadilloUnrenderedMessagesTableSchema.pb","MAWArmadilloXMATableSchema.pb","MAWMsgType","MAWXMACTAUtil","WASyncdKeyTypes","encodeProtobuf","err"],(function(a,b,c,d,e,f,g){"use strict";var h={appData:C,appMeta:D,browserEncryptionMeta:b,chunk:E,contacts:x,danglingQueue:b,deletedMessages:i,deviceChangeAlerts:a,dualSendMedia:b,dyiBatch:I,ebMessageRestoreTasks:b,ebMsgRanges:J,ebRestoreQueue:b,ebUploadQueue:b,editMsgHistory:L,ephemeralSettings:b,existingUsers:b,ftsBackloggedMessages:b,ftsEncryptionMeta:b,ftsIndexV3:b,ftsPurgeBacklog:b,ftsPurgeThreadBacklog:b,groupInfo:k,groupInvites:z,historySyncQRCodeData:b,historySyncQRCodeSecretKey:b,identity:m,igMessageAuxiliaryInfo:b,isDualSend:b,jobs:b,media:G,mediaBackup:F,mediaKeys:b,messages:f,meta:l,participants:y,pendingMessageStanzaQueue:b,pendingReceipts:v,pendingStanzas:b,personalSenderKeyStatuses:B,prekey:n,prekeyGeneration:o,reactions:H,receipts:u,receiverFetchInfo:M,senderKeySessions:r,sentBytesCache:b,session:p,signedPrekey:q,staleQueue:b,stanzaQueue:b,tasks:A,threads:w,unrenderedMessages:j,xma:K};function a(a){a={action:a.action,deviceJid:a.deviceJid,identity:a.identity,isArchived:a.isArchived,latitude:a.latitude,location:a.location,loggedOut:a.loggedOut,longitude:a.longitude,model:a.model,platform:a.platform,ts:a.ts};return{encodedFields:a,proto:d("encodeProtobuf").encodeProtobuf(d("MAWArmadilloDeviceChangeAlertsTableSchema.pb").DeviceChangeAlertsTableSchemaProtoSpec,a).readByteArray()}}function b(a){throw c("err")("unexpected table for encryption")}function e(a,b){if(Object.prototype.hasOwnProperty.call(h,b))b=h[b](a);else throw c("err")("not a valid table name");return b}function f(a){a.altIndex;a.externalId;a.messageDeleteTs;a.messageExpirationTs;a.msgId;a.quoteExpirationTs;a.quoteExternalId;a.revokedExternalId;a.rowId;a.serverTs;a.sortOrderMs;a.threadJid;a.unsendMsgContentDeleteTs;a=babelHelpers.objectWithoutPropertiesLoose(a,["altIndex","externalId","messageDeleteTs","messageExpirationTs","msgId","quoteExpirationTs","quoteExternalId","revokedExternalId","rowId","serverTs","sortOrderMs","threadJid","unsendMsgContentDeleteTs"]);a=a;var b;if(a.quote==null)b=a.quote;else{var c;c={author:a.quote.content.author,expirationTs:a.quote.content.expirationTs,externalId:(c=a.quote)==null?void 0:c.content.externalId,mediaId:a.quote.content.mediaId,msgContent:a.quote.content.msgContent,msgId:a.quote.content.msgId,plaintextHash:a.quote.content.plaintextHash,sourceId:a.quote.content.sourceId,specialTextSize:a.quote.content.specialTextSize,ts:a.quote.content.ts,type:a.quote.content.type,xmaMessageType:a.quote.content.xmaMessageType};c={content:c,remoteJid:a.quote.remoteJid};b=c}c=a.msgContent;a.type===d("MAWMsgType").MSG_TYPE.FUTUREPROOF&&(c={protobuf:a.msgContent.protobuf,subtype:a.msgContent.subtype});var e=a.ravenEphemeralType,f=a.ravenEphemeralMediaState;e=e!=null?e:null;f=f!=null?f:null;c={ack:a.ack,author:a.author,editCount:a.editCount,ephemeralCounterStarted:a.ephemeralCounterStarted,ephemeralMsgDisappeared:a.ephemeralMsgDisappeared,ephemeralSetting:a.ephemeralSetting,forwardingScore:a.forwardingScore,groupId:a.groupId,groupIndex:a.groupIndex,groupSize:a.groupSize,isExpiredXmaMsg:a.isExpiredXmaMsg,isForwarded:a.isForwarded,mediaId:a.mediaId,msgContent:c,originalTs:a.originalTs,quote:b,ravenEphemeralMediaState:f,ravenEphemeralType:e,receiverFetchId:a.receiverFetchId,reportingMeta:a.reportingMeta,resendCount:a.resendCount,source:a.source,specialTextSize:a.specialTextSize,ts:a.ts,type:a.type,xmaMessageType:a.xmaMessageType};return{encodedFields:c,proto:d("encodeProtobuf").encodeProtobuf(d("MAWArmadilloMessagesTableSchema.pb").MessagesTableSchemaProtoSpec,c).readByteArray()}}function i(a){a.author;a.chat;a.externalId;a.rowId;a=babelHelpers.objectWithoutPropertiesLoose(a,["author","chat","externalId","rowId"]);a={reason:String(a.reason)};return{encodedFields:a,proto:d("encodeProtobuf").encodeProtobuf(d("MAWArmadilloDeletedMessagesTableSchema.pb").DeletedMessagesTableSchemaProtoSpec,a).readByteArray()}}function j(a){var b;if(a.quote==null)b=a.quote;else{var c;c={author:a.quote.content.author,expirationTs:a.quote.content.expirationTs,externalId:(c=a.quote)==null?void 0:c.content.externalId,mediaId:a.quote.content.mediaId,msgContent:a.quote.content.msgContent,msgId:a.quote.content.msgId,plaintextHash:a.quote.content.plaintextHash,sourceId:a.quote.content.sourceId,ts:a.quote.content.ts,type:a.quote.content.type,xmaMessageType:a.quote.content.xmaMessageType};c={content:c,remoteJid:a.quote.remoteJid};b=c}c={ack:a.ack,author:a.author,ephemeralSetting:a.ephemeralSetting,groupName:a.groupName,invitedParticipantUserJid:a.invitedParticipantUserJid,mediaId:a.mediaId,msgContent:a.msgContent,quote:b,reportingMeta:a.reportingMeta,resendCount:a.resendCount,ts:a.ts,type:a.type,xmaMessageType:a.xmaMessageType};return{encodedFields:c,proto:d("encodeProtobuf").encodeProtobuf(d("MAWArmadilloUnrenderedMessagesTableSchema.pb").UnrenderedMessagesTableSchemaProtoSpec,c).readByteArray()}}function k(a){a={creationTs:a.creationTs,creator:a.creator,inviter:a.inviter,memberAddMode:a.memberAddMode,msgExpiration:a.msgExpiration,name:a.name,nameOwner:a.nameOwner,nameTs:a.nameTs,participantVersion:a.participantVersion};return{encodedFields:a,proto:d("encodeProtobuf").encodeProtobuf(d("MAWArmadilloGroupInfoTableSchema.pb").GroupInfoSchemaProtoSpec,a).readByteArray()}}function l(a){var b=a.value.cat==null?a.value.cat:{encryptedSerializedCat:a.value.cat.encrypted_serialized_cat,expirationTimeInSeconds:a.value.cat.expiration_time_in_seconds};b={value:{abProps:a.value.abProps,authKeyPair:a.value.authKeyPair,cat:b,certificateChain:a.value.certificateChain,clockSkew:a.value.clockSkew,deviceId:a.value.deviceId,deviceUUID:a.value.deviceUUID,edgeInfo:a.value.edgeInfo,fbid:a.value.fbid,identityKeyPair:a.value.identityKeyPair,lastPrekeyGenerationId:a.value.lastPrekeyGenerationId,lastPrekeyId:a.value.lastPrekeyId,lastSessionDeviceWasLinkedTo:a.value.lastSessionDeviceWasLinkedTo,lastSignedPrekeyId:a.value.lastSignedPrekeyId,regId:a.value.regId,registrationVersion:a.value.registrationVersion}};return{encodedFields:b,proto:d("encodeProtobuf").encodeProtobuf(d("MAWArmadilloMetaRowTableSchema.pb").MetaRowTableSchemaProtoSpec,b).readByteArray()}}function m(a){a={deviceName:a.deviceName,firstSeenTs:a.firstSeenTs,identity:a.identity,platform:a.platform};return{encodedFields:a,proto:d("encodeProtobuf").encodeProtobuf(d("MAWArmadilloSignalTablesSchema.pb").IdentityTableSchemaProtoSpec,a).readByteArray()}}function n(a){a={encoded:a.encoded,isDeleted:a.isDeleted};return{encodedFields:a,proto:d("encodeProtobuf").encodeProtobuf(d("MAWArmadilloSignalTablesSchema.pb").PrekeyTableSchemaProtoSpec,a).readByteArray()}}function o(a){a={createdTs:a.createdTs,endingId:a.endingId,startingId:a.startingId};return{encodedFields:a,proto:d("encodeProtobuf").encodeProtobuf(d("MAWArmadilloSignalTablesSchema.pb").PrekeyGenerationTableSchemaProtoSpec,a).readByteArray()}}function p(a){a={session:a.session};return{encodedFields:a,proto:d("encodeProtobuf").encodeProtobuf(d("MAWArmadilloSignalTablesSchema.pb").SessionTableSchemaProtoSpec,a).readByteArray()}}function q(a){a={encoded:a.encoded};return{encodedFields:a,proto:d("encodeProtobuf").encodeProtobuf(d("MAWArmadilloSignalTablesSchema.pb").SignedPrekeyTableSchemaProtoSpec,a).readByteArray()}}function r(a){a={deviceId:a.deviceId,record:a.record};return{encodedFields:a,proto:d("encodeProtobuf").encodeProtobuf(d("MAWArmadilloSignalTablesSchema.pb").SenderKeySessionsTableSchemaProtoSpec,a).readByteArray()}}function s(a){if(a==null)return a;else return Array.from(a,function(a){var b=a[0];a=a[1];return{baseKey:a.baseKey,deviceJid:b,serializedPubKey:a.pubKey}})}function t(a){if(a==null)return null;else return Array.from(a,function(a){var b=a[0];a=a[1];return{count:a,deviceJid:b}})}function u(a){var b=Array.from(a.recipientDevices);b={permittedIdentitiesPerDevice:s(a.permittedIdentitiesPerDevice),recipientDevices:b,retryCountsPerDevice:t(a.retryCountsPerDevice)};return{encodedFields:b,proto:d("encodeProtobuf").encodeProtobuf(d("MAWArmadilloReceiptTablesSchema.pb").ReceiptsTableSchemaProtoSpec,b).readByteArray()}}function v(a){a={author:a.author,deliveryReceipts:a.deliveryReceipts,externalId:a.externalId,readReceipts:a.readReceipts,thread:a.thread};return{encodedFields:a,proto:d("encodeProtobuf").encodeProtobuf(d("MAWArmadilloReceiptTablesSchema.pb").PendingReceiptsTableSchemaProtoSpec,a).readByteArray()}}function w(a){a={archived:a.archived,cannotReplyReason:a.cannotReplyReason,didInsertDualThreadCutoverAdminMsg:a.didInsertDualThreadCutoverAdminMsg,folder:a.folder,isMigratedLocally:a.isMigratedLocally,lastReadMsg:a.lastReadMsg,lastReadMsgReceiptSent:a.lastReadMsgReceiptSent,muteExpireTimeMs:a.muteExpireTimeMs,newestMsg:a.newestMsg,newestMsgTs:a.newestMsgTs,oldestMsg:a.oldestMsg,optimisticThreadKey:a.optimisticThreadKey,snippetMsg:a.snippetMsg,snippetMsgTs:a.snippetMsgTs};return{encodedFields:a,proto:d("encodeProtobuf").encodeProtobuf(d("MAWArmadilloThreadsTableSchema.pb").ThreadsTableSchemaProtoSpec,a).readByteArray()}}function x(a){a={dhash:a.dhash,icdcFails:a.icdcFails,icdcInfo:a.icdcInfo,lastSyncTs:a.lastSyncTs};return{encodedFields:a,proto:d("encodeProtobuf").encodeProtobuf(d("MAWArmadilloContactsTableSchema.pb").ContactsTableSchemaProtoSpec,a).readByteArray()}}function y(a){a={addressable:a.addressable,deliveredWatermarkTs:a.deliveredWatermarkTs,lastReadActionTs:a.lastReadActionTs,lastReadWatermarkTs:a.lastReadWatermarkTs,type:a.type};return{encodedFields:a,proto:d("encodeProtobuf").encodeProtobuf(d("MAWArmadilloParticipantsTableSchema.pb").ParticipantsTableSchemaProtoSpec,a).readByteArray()}}function z(a){a={caption:a.caption,inviteCode:a.inviteCode,inviteExpirationTs:a.inviteExpirationTs};return{encodedFields:a,proto:d("encodeProtobuf").encodeProtobuf(d("MAWArmadilloGroupInvitesTableSchema.pb").GroupInvitesTableSchemaProtoSpec,a).readByteArray()}}function A(a){a={scheduledTime:a.scheduledTime};return{encodedFields:a,proto:d("encodeProtobuf").encodeProtobuf(d("MAWArmadilloTasksTableSchema.pb").TasksTableSchemaProtoSpec,a).readByteArray()}}function B(a){var b=Array.from(a.hasSenderKey);b={hasSenderKey:b,rotateSenderKey:a.rotateSenderKey,senderKeyId:a.senderKeyId,senderKeyTs:a.senderKeyTs};return{encodedFields:b,proto:d("encodeProtobuf").encodeProtobuf(d("MAWArmadilloPersonalSenderKeyStatusTableSchema.pb").PersonalSenderKeyStatusTableSchemaProtoSpec,b).readByteArray()}}function C(a){var b;switch(a.contents.type){case"meta_sync":var e=[];for(var f=a.contents.actions,g=Array.isArray(f),h=0,f=g?f:f[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var i;if(g){if(h>=f.length)break;i=f[h++]}else{h=f.next();if(h.done)break;i=h.value}i=i;i.chatAction?e.push({chatAction:i.chatAction}):i.messageAction&&e.push({messageAction:i.messageAction})}b={actions:e,type:"meta_sync"};break;case"backups_secrets":b={encryptedBackupsSecrets:a.contents.encryptedBackupsSecrets,type:"backups_secrets"};break;case"sync_key_share":b={syncKeyShare:{keys:a.contents.syncKeyShare.keys,orphanKeys:(i=a.contents.syncKeyShare)==null?void 0:(h=i.orphanKeys)==null?void 0:h.map(d("WASyncdKeyTypes").fromSyncKeyId)},type:"sync_key_share"};break;case"sync_key_request":b={syncKeyRequest:{keyIds:a.contents.syncKeyRequest.keyIds.map(d("WASyncdKeyTypes").fromSyncKeyId)},type:"sync_key_request"};break;default:a.contents.type;throw c("err")("Unknown appdata type: "+a.contents.type)}g={ack:a.ack,contents:b,permittedIdentitiesPerDevice:s(a.permittedIdentitiesPerDevice),recipientDevices:Array.from(a.recipientDevices),sendPartial:a.sendPartial,ts:a.ts};return{encodedFields:g,proto:d("encodeProtobuf").encodeProtobuf(d("MAWArmadilloAppDataTableSchema.pb").AppDataTableSchemaProtoSpec,g).readByteArray()}}function D(a){a={value:a.value};return{encodedFields:a,proto:d("encodeProtobuf").encodeProtobuf(d("MAWArmadilloAppMetaTableSchema.pb").AppMetaTableSchemaProtoSpec,a).readByteArray()}}function E(a){a={blobData:a.blobData,mimetype:a.mimetype,plaintextHash:a.plaintextHash};return{encodedFields:a,proto:d("encodeProtobuf").encodeProtobuf(d("MAWArmadilloMediaTablesSchema.pb").ChunkTableSchemaProtoSpec,a).readByteArray()}}function F(a){a={fbid:a.fbid};return{encodedFields:a,proto:d("encodeProtobuf").encodeProtobuf(d("MAWArmadilloMediaTablesSchema.pb").MediaBackupSchemaProtoSpec,a).readByteArray()}}function G(a){var b=Array.from(a.mediaEntries,function(a){var b=a[0];a=a[1];return{mediaEntryData:a,msgId:b}});b={mediaEntries:b,mediaType:a.mediaType,plaintextHash:a.plaintextHash,size:a.size,ts:a.ts,validatedAudioInfo:a.validatedAudioInfo,validatedDocumentFileInfo:a.validatedDocumentFileInfo,validatedImageInfo:a.validatedImageInfo,validatedResult:a.validatedResult,validatedVideoInfo:a.validatedVideoInfo};return{encodedFields:b,proto:d("encodeProtobuf").encodeProtobuf(d("MAWArmadilloMediaTablesSchema.pb").MediaTableSchemaProtoSpec,b).readByteArray()}}function H(a){a={ack:a.ack,author:a.author,groupingKey:a.groupingKey,reaction:a.reaction,reactToAuthor:a.reactToAuthor,senderTimestampMs:a.senderTimestampMs};return{encodedFields:a,proto:d("encodeProtobuf").encodeProtobuf(d("MAWArmadilloReactionsTableSchema.pb").ReactionsTableSchemaProtoSpec,a).readByteArray()}}function I(a){a={isThread:a.isThread,numMessages:a.numMessages,numMessagesRestored:a.numMessagesRestored,numThreadsRestored:a.numThreadsRestored,oldestTs:a.oldestTs,qplFlowDescriptor:a.qplFlowDescriptor,qplInstanceKeyE2E:a.qplInstanceKeyE2E,qplInstanceKeyForThread:a.qplInstanceKeyForThread,threadId:a.threadId};return{encodedFields:a,proto:d("encodeProtobuf").encodeProtobuf(d("MAWArmadilloDyiBatchTableSchema.pb").DyiBatchTableSchemaProtoSpec,a).readByteArray()}}function J(a){a={maxMsgExternalId:a.maxMsgExternalId,maxMsgSortOrderMs:a.maxMsgSortOrderMs,minMsgExternalId:a.minMsgExternalId,minMsgSortOrderMs:a.minMsgSortOrderMs};return{encodedFields:a,proto:d("encodeProtobuf").encodeProtobuf(d("MAWArmadilloEBMsgRangesTableSchema.pb").EBMsgRangesTableSchemaProtoSpec,a).readByteArray()}}function K(a){var b=a.ctas==null?[]:a.ctas.map(function(a){return d("MAWXMACTAUtil").toMAWCTAEncode(a)});b={author:a.author,ctas:b,defaultCTA:a.defaultCTA==null?a.defaultCTA:d("MAWXMACTAUtil").toMAWCTAEncode(a.defaultCTA),defaultPreviewMediaPlaintextHash:a.defaultPreviewMediaPlaintextHash,faviconPlaintextHash:a.faviconPlaintextHash,headerMediaPlaintextHash:a.headerMediaPlaintextHash,headerTitle:a.headerTitle,isTombstoned:a.isTombstoned,maxSubtitleNumOfLines:a.maxSubtitleNumOfLines,maxTitleNumOfLines:a.maxTitleNumOfLines,msgId:a.msgId,overlayDescription:a.overlayDescription,overlayIconGlyph:a.overlayIconGlyph,overlayTitle:a.overlayTitle,previewMediaIds:a.previewMediaIds,subtitleText:a.subtitleText,targetId:a.targetId,targetType:a.targetType,targetUsername:a.targetUsername,threadJid:a.threadJid,titleText:a.titleText,xmaLayoutType:a.xmaLayoutType};return{encodedFields:b,proto:d("encodeProtobuf").encodeProtobuf(d("MAWArmadilloXMATableSchema.pb").XMATableSchemaProtoSpec,b).readByteArray()}}function L(a){a={author:a.author,editExternalId:a.editExternalId,editTs:a.editTs,msgContent:a.msgContent,sendStatus:a.sendStatus,specialTextSize:a.specialTextSize};return{encodedFields:a,proto:d("encodeProtobuf").encodeProtobuf(d("MAWArmadilloEditMsgHistoryTableSchema.pb").EditMsgHistoryTableSchemaProtoSpec,a).readByteArray()}}function M(a){a={mimetype:a.mimetype,previewHeight:a.previewHeight,previewUrl:a.previewUrl,previewUrlExpirationTimestampMs:a.previewUrlExpirationTimestampMs,previewWidth:a.previewWidth,type:a.type};return{encodedFields:a,proto:d("encodeProtobuf").encodeProtobuf(d("MAWArmadilloReceiverFetchInfoTableSchema.pb").ReceiverFetchInfoTableSchemaProtoSpec,a).readByteArray()}}g.encodeDbObj=e}),98);
__d("MAWDbObjEncryption",["ExecutionEnvironment","FBLogger","MAWBridge","MAWCryptoConsts","MAWDbObjDecode","MAWDbObjEncode","MAWEARDebugs","MAWEARDecryptionErrorCheck","MAWIndexedDb","MAWKeychainCrypto","MAWKeychainNaClCrypto","MAWKeychainUtil","MAWQplProxy","MAWUnrecoverableDbErrors","MWEARKeychainV3Errors","ODS","WABase64","WATimeUtils","gkx","isEncryptionAtRestEnabled","justknobx","qpl"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j="_encryptedContent",k=new Set(["threads","identity","contacts","messages","participants"]);function a(a,b,e){if(!(c("isEncryptionAtRestEnabled")()||c("gkx")("23910")===!0)||!d("MAWIndexedDb").TABLES_TO_ENCRYPT.includes(b))return a;var f=d("MAWQplProxy").startQplUserFlow(c("qpl")._(25300256,"115"));try{var g=babelHelpers["extends"]({},a);e=e();var h=e.keys;h=h[0];var i=e.version;e=e.randomisedVersion;i=e==null||!c("gkx")("7814")?d("MAWKeychainUtil").makeAAD(i,d("MAWCryptoConsts").CIPHER_ID):d("MAWKeychainUtil").makeAADWithRandomisedVersion(i,d("MAWCryptoConsts").CIPHER_ID,e);var l=d("MAWDbObjEncode").encodeDbObj(a,b),m=l.encodedFields;l=l.proto;Object.keys(m).forEach(function(b){Object.prototype.hasOwnProperty.call(a,b)&&delete g[b]});m=c("gkx")("6753")?d("MAWKeychainNaClCrypto").encryptTweetNaClArrayBuffer(h,l,i):d("MAWKeychainNaClCrypto").encrypt(h,l,i);g[j]=m;k.has(b)&&(g.updatedAt_S456130=Date.now(),g.randomisedVersion_S456130=e);f==null?void 0:f.endSuccess();return g}catch(a){f==null?void 0:f.endFail("ear_encrypt_fail");throw c("FBLogger")("maw_db_ear").catching(a).mustfixThrow("[%s] %s - Encrypted dexie was unable to encrypt an entity for table %s",a.name,a.message,b)}}function b(a,b,e){if(!d("MAWIndexedDb").TABLES_TO_ENCRYPT.includes(b)||!Object.prototype.hasOwnProperty.call(a,j))return a;var f=d("MAWQplProxy").startQplUserFlow(c("qpl")._(25313004,"118")),g;try{var n=a[j],o=babelHelpers["extends"]({},a);(i||(i=d("ODS"))).bumpEntityKey(3185,"maw_db_ear_decryption","encrypted_content_type."+b+"."+(n instanceof ArrayBuffer?"ArrayBuffer":"string"));n=n instanceof ArrayBuffer?n:d("WABase64").decodeB64(n);var p=d("MAWKeychainCrypto").getKeyVersionFromCipherDataString(n),q=p.aadLengthInBytes,r=p.keyVersion;p=p.originRandomisedVersion;e=e(r);g=e;var s=e.dbEntry,t=e.keys,u={},v;for(var t=t,w=Array.isArray(t),x=0,t=w?t:t[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var y;if(w){if(x>=t.length)break;y=t[x++]}else{x=t.next();if(x.done)break;y=x.value}y=y;try{v=d("MAWKeychainNaClCrypto").decryptArrayBuffer(y,n,r,s.formatVersion,q);break}catch(a){}}if(v==null){throw new(d("MAWKeychainNaClCrypto").EARDecryptionError)("decryptTweetNaCl was unable to decrypt an entity. Attempting to use key version : "+((y=r)!=null?y:"non-provided")+". Format version "+((x=s.formatVersion)!=null?x:"unknown")+". "+("Aad length: "+q+". Encrypted content signature: "+String(p!=null)+". ")+("Encrypted key signature: "+String(e.randomisedVersion!=null)+". "))}var z=d("MAWDbObjDecode").decodeDbObj(v,b);Object.keys(z).forEach(function(a){u[a]=z[a]});delete o[j];w=babelHelpers["extends"]({},o,u);f.endSuccess();Math.random()<1/1e3&&void d("MAWEARDebugs").touchDbEncryptionKeyVersion_S456130({encryptionKey:g});return w}catch(e){void d("MAWEARDebugs").analyseEncryptionKeyResult_S456130(e,g);if(k.has(b)){f.addAnnotations({"int":{updatedAt:(t=a==null?void 0:a.updatedAt_S456130)!=null?t:-1}})}f.markError("ear_decrypt_exception",null,e);f.endFail("ear_decrypt_fail");c("justknobx")._("3208")&&(h||(h=c("ExecutionEnvironment"))).isInWorker&&(e instanceof d("MAWKeychainNaClCrypto").EARDecryptionError||e instanceof d("MWEARKeychainV3Errors").EARKeychainNotFoundError)&&d("MAWBridge").getBridge().fireAndForget("event","unrecoverableDbError",{error:new(d("MAWUnrecoverableDbErrors").EarRuntimeError)()});e instanceof d("MAWKeychainNaClCrypto").EARDecryptionError&&(c("gkx")("7412")&&d("MAWEARDecryptionErrorCheck").hasChecked()===!1&&d("MAWEARDecryptionErrorCheck").checkEARIssues());throw c("FBLogger")("maw_db_ear").catching(e).mustfixThrow("[%s] %s - (v2) Encrypted dexie was unable to decrypt an entity for table %s. UpdatedAt: %s. KeyStatus: %s. Signature matches: %s",e.name,e.message,b,l(a==null?void 0:a.updatedAt_S456130),m(a,g),(a==null?void 0:a.randomisedVersion_S456130)!=null&&((n=g)==null?void 0:n.randomisedVersion)!=null?a.randomisedVersion_S456130===g.randomisedVersion:null)}}function l(a){if(a==null)return"unknown";a=Date.now()-a;a=Math.floor(a/(1e3*60*60*24));if(a<1)return"0-1 days";else if(a<7)return"1-7 days";else if(a<14)return"7-14 days";else if(a<30)return"14-30 days";else return"30+ days"}function m(a,b){if((a==null?void 0:a.updatedAt_S456130)==null||b==null)return null;a=d("WATimeUtils").castToUnixTime(a.updatedAt_S456130/1e3);b=b.dbEntry.expiration-d("MAWCryptoConsts").ENC_KEY_TTL;if(a===b)return"same";else if(a>b)return"key_older";else return"key_newer"}g.ENCRYPTED_COLUMN_NAME=j;g.encryptDbObj=a;g.decryptDbObj=b}),98);
__d("WorkerScheduler",["$InternalEnum","Promise","WAGetSafeQPLError","WAPREList","WAPREMetrics","WAResolvable","WAShiftTimer","WATagsLogger","WATimeUtils","err"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Scheduler fatal: ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["Promoting task ",":"," to blocking priority"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["Safeguard: Pending task without corresponding record: Task: ",", Scheduler: ",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["Possibly stuck: ",""]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["Safeguard: Active task without corresponding record: Task: ",", Scheduler: ",""]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["Safeguard: Active task without corresponding record: Task: ",", Scheduler: ",""]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose([""," failed: ",""]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose(["Failed: ",""]);p=function(){return a};return a}function q(){var a=babelHelpers.taggedTemplateLiteralLoose(["Completed: ",""]);q=function(){return a};return a}function r(){var a=babelHelpers.taggedTemplateLiteralLoose(["Started: ",""]);r=function(){return a};return a}function s(){var a=babelHelpers.taggedTemplateLiteralLoose(["Safeguard: Task without corresponding record: Task: ",", Scheduler: ",""]);s=function(){return a};return a}var t=d("WATagsLogger").TAGS(["WorkerScheduler"]),u=0,v=2,w=1,x=0,y=100,z=3e4,A=10,B=6e4,C=b("$InternalEnum")({CREATED:0,SCHEDULED:1,RUNNING:2,COMPLETED:3,CANCELLED:-3,FAILED:-2,STUCK:-1}),D=function(){function a(a,b){var c;this.$3=new Map();this.$4=new Map();this.$5=new Map();this.$6=[new Set(),new Set(),new Set()];this.$7=[new((c=d("WAResolvable")).Resolvable)(),new c.Resolvable(),new c.Resolvable()];this.$8=new c.Resolvable();this.$1=a;this.config=b;this.$2=t.TAGS([a])}var e=a.prototype;e.waitUntilEndReached=function(){return this.$8.promise};e.waitUntilBlockingEnded=function(){return this.$7[x].promise};e.waitUntilRegularEnded=function(){return this.$7[w].promise};e.waitUntilBackgroundEnded=function(){return this.$7[v].promise};e.$9=function(){if(this.$5.size<this.config.maxConcurrency){var a=this.pendingTasksTick({lowestTier:x,increaseCounter:!1,tasksToPick:1,tickDelta:0});a=a.candidates;var b=F.getHighestActivePriority();a.length>0&&this.maybeStartTask(a[0].id,b)}};e.runTask=function(a){return this.task(a).run()};e.task=function(a){var b,c=this.$1+":"+a.name+":"+u++;b=(b=a.priority)!=null?b:w;b=this.$10(c,{name:a.name,fn:a.fn,priority:b,customFlags:a.customFlags});this.$3.set(c,b);return b.publicApi};e.$11=function(a){var d=this.$3.get(a);if(d==null)return(h||(h=b("Promise"))).reject(c("err")("Cannot run task from Scheduler:"+this.$1+" Task was already cancelled"));d.publicApi.status=C.SCHEDULED;this.$4.set(a,d);this.$6[d.priority].add(a);this.$12(d.priority);d.metric.addPoint("schedule_start");F.scheduleTimerIfNeeded();this.$9();return d.resolvable.promise};e.$10=function(a,b){var c,e=this,f=new(d("WAResolvable").Resolvable)(),g={id:a,name:b.name,tickCounter:0,waitCounter:0,resolvable:f,scheduledTime:Date.now(),startTime:null,fn:b.fn,priority:b.priority,maxTickDelta:0,metric:d("WAPREMetrics").startMetric(d("WAPREList").PRE_METRIC.WORKER_SCHEDULER,{string:{scheduler:this.$1,name:b.name},bool:babelHelpers["extends"]({},(c=b.customFlags)!=null?c:{}),"int":{originalPriority:b.priority}}),publicApi:{id:a,promise:f.promise,name:b.name,status:C.CREATED,cancel:function(){if(g.publicApi.status!==C.CREATED)return!1;g.publicApi.status=C.CANCELLED;return e.$3["delete"](a)},run:function(){return e.$11(a)},promote:function(a){if((g.publicApi.status===C.CREATED||g.publicApi.status===C.SCHEDULED)&&g.priority>a){e.$13(g,a);return!0}return!1}}};return g};e.$14=function(a,b){var c=this.$4.get(a),d=c==null?void 0:c.publicApi.status;if(c==null||d===C.COMPLETED||d===C.FAILED||d===C.STUCK)return;this.$4["delete"](a);this.$5["delete"](a);c.publicApi.status=b;var e=[this.$6[x].size===0,this.$6[w].size===0,this.$6[v].size===0];this.$5.forEach(function(a){e[a]=!1});e[x]&&e[w]&&e[v]&&this.$8.resolve();for(d=x;d<=v;d++)e[d]&&this.$7[d].resolve()};e.maybeStartTask=function(a,b){var c=this.$4.get(a);if(c==null){this.$2.ERROR(s(),a,this.$1);return}if(b==null)return this.$15(c);if(b<c.priority)return;return this.$15(c)};e.$15=function(a){var c=this;this.$6[a.priority]["delete"](a.id);this.$5.set(a.id,a.priority);this.$2.LOG(r(),a.id);a.startTime=Date.now();a.publicApi.status=C.RUNNING;a.metric.addPoint("schedule_end",{"int":{waitTicks:a.waitCounter,priorityTier:a.priority}});a.metric.addPoint("run_start",{"int":{startPriority:a.priority}});var e;try{e=a.fn()}catch(a){e=(h||(h=b("Promise"))).reject(a)}a.resolvable.resolve(e);e.then(function(){c.$2.LOG(q(),a.id),a.metric.addPoint("run_end",{"int":{executionTicks:a.tickCounter}}),c.$14(a.id,C.COMPLETED),a.metric.endSuccess({"int":{maxTickDeltaMs:a.maxTickDelta}}),c.$9()})["catch"](function(b){c.$2.WARN(p(),a.id),a.metric.addPoint("run_fail"),t.TAGS(["TASK"]).ERROR(o(),a.name,b),c.$14(a.id,C.FAILED),a.metric.endFail("runtime",{"int":{maxTickDeltaMs:a.maxTickDelta},string:{jsError:d("WAGetSafeQPLError").getSafeQPLErrorMessage(b)}}),c.$9()})};e.$12=function(a){for(var b=x;b<=a;b++)this.$7[b].resolveWasCalled()&&(this.$7[b]=new(d("WAResolvable").Resolvable)());this.$8.resolveWasCalled()&&(this.$8=new(d("WAResolvable").Resolvable)())};e.getHighestActivePriority=function(){var a=this,b=null;this.$5.forEach(function(c,d){c=a.$4.get(d);if(c==null){t.ERROR(n(),d,a.$1);a.$5["delete"](d);return}(b==null||b>c.priority)&&(b=c.priority)});return b};e.activeTasksTick=function(a){var b=this,c=null;this.$5.forEach(function(e,f){e=b.$4.get(f);if(e==null){t.ERROR(m(),f,b.$1);b.$5["delete"](f);return}e.tickCounter++;e.maxTickDelta=Math.max(a,e.maxTickDelta);(c==null||c>e.priority)&&(c=e.priority);e.tickCounter>b.config.ticksToStuck&&e.publicApi.status===C.RUNNING&&(t.WARN(l(),e.name),d("WAPREMetrics").startMetric(d("WAPREList").PRE_METRIC.WORKER_SCHEDULER_STUCK).endFail(e.name),b.$14(e.id,C.STUCK),e.metric.endFail("stuck",{"int":{maxTickDeltaMs:e.maxTickDelta}}))});return c};e.$13=function(a,b){function c(){switch(d){case v:return w;case w:return x;default:return x}}var d=a.priority;b=(b=b)!=null?b:c();if(b===d)return;a.metric.addPoint("promote_to_"+b);this.$6[d]["delete"](a.id);a.priority=b;this.$6[b].add(a.id)};e.pendingTasksTick=function(a){var b=this,c=a.increaseCounter,d=a.lowestTier,e=a.tasksToPick,f=a.tickDelta,g=[],h=!0;a=function(a){h&&(h=b.$6[a].size===0),b.$6[a].forEach(function(d){var h=b.$4.get(d);if(h==null){t.ERROR(k(),d,b.$1);b.$6[a]["delete"](d);return}c&&(h.waitCounter++,h.maxTickDelta=Math.max(f,h.maxTickDelta),h.priority>w&&h.waitCounter>=b.config.throttleTicks&&b.$13(h),h.priority===w&&h.waitCounter>=F.maxWaitTicksMultiplierForFinalPromotion*b.config.throttleTicks&&(t.LOG(j(),b.$1,h.name),b.$13(h)));if(g.length>=e)return;if(b.$5.size+g.length>=b.config.maxConcurrency)return;g.push(h)})};for(var i=x;i<=d;i++)a(i);return{candidates:g.map(function(a){return{id:a.id,priority:a.priority}}),isEmpty:h}};return a}(),E=function(){function a(){var a=this;this.$1=new Map();this.tickFrequencyMs=y;this.maxThrottleMs=B;this.maxWaitTicksMultiplierForFinalPromotion=A;this.$2=null;this.$3=new(d("WAShiftTimer").ShiftTimer)(function(){var b=!1;try{var c,e=d("WATimeUtils").performanceAbsoluteNow();b=a.$4(e-((c=a.$2)!=null?c:e))}catch(a){t.ERROR(i(),a)}finally{b===!1?(a.$2=d("WATimeUtils").performanceAbsoluteNow(),a.$3.onOrBefore(a.tickFrequencyMs)):a.$2=null}});this.$5=new Map()}var b=a.prototype;b.getHighestActivePriority=function(){var a=null;this.$5.forEach(function(b){b=b.getHighestActivePriority();a!=null&&b!=null&&a<b&&(a=b);a==null&&b!=null&&(a=b)});return a};b.$4=function(a){var b,c=!0,d=null;this.$5.forEach(function(b){b=b.activeTasksTick(a);d!=null&&b!=null&&d<b&&(d=b);d==null&&b!=null&&(d=b)});var e=[[],[],[]];this.$5.forEach(function(b){var d=b.pendingTasksTick({increaseCounter:!0,lowestTier:v,tasksToPick:b.config.concurrency,tickDelta:a}),f=d.candidates;d=d.isEmpty;c&&(c=d);f.forEach(function(a){e[a.priority].push({id:a.id,scheduler:b})})});b=(b=e.find(function(a){return a.length>0}))!=null?b:[];for(var b=b,f=Array.isArray(b),g=0,b=f?b:b[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var h;if(f){if(g>=b.length)break;h=b[g++]}else{g=b.next();if(g.done)break;h=g.value}h=h;var i=h.id;h=h.scheduler;h.maybeStartTask(i,d)}return c};b.scheduleTimerIfNeeded=function(){this.$3.onOrBefore(this.tickFrequencyMs)};b.newScheduler=function(a,b){var c=this.$5.get(a);if(c)return c;c=new D(a,b);this.$5.set(a,c);return c};b.TEST_ONLY_reset=function(){this.$5=new Map(),this.$1=new Map()};return a}(),F=new E();function a(a,b){return F.newScheduler(a,{maxConcurrency:b.maxConcurrency,concurrency:(a=b.concurrency)!=null?a:1,ticksToStuck:Math.round(((a=b.timeToStuckMs)!=null?a:z)/F.tickFrequencyMs),throttleTicks:Math.round(((a=b.maxThrottleMs)!=null?a:F.maxThrottleMs)/F.tickFrequencyMs)})}function e(a){a.tickFrequencyMs!=null&&(F.tickFrequencyMs=a.tickFrequencyMs),a.maxThrottleMs!=null&&(F.maxThrottleMs=a.maxThrottleMs),a.maxWaitTicksMultiplierForFinalPromotion!=null&&(F.maxWaitTicksMultiplierForFinalPromotion=a.maxWaitTicksMultiplierForFinalPromotion)}function f(){F.TEST_ONLY_reset()}g.BACKGROUND_PRIORITY=v;g.REGULAR_PRIORITY=w;g.BLOCKING_PRIORITY=x;g.SchedulerExecutionState=C;g.makeScheduler=a;g.configWorkerScheduler=e;g.TEST_ONLY_reset=f}),98);
__d("MAWEARDecryptionErrorCheck",["FBLogger","MAWDexieTable","MAWIndexedDb","MAWKeychainNaClCrypto","MAWTransactionMode","Promise","WADbTransactor","WorkerScheduler","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h,i=!1;function a(){return i}function e(){i=!0;var a=d("WorkerScheduler").makeScheduler("ear_checker",{concurrency:1,maxConcurrency:1,maxThrottleMs:2e3,timeToStuckMs:3e4}),e=function(a){if(a.start&&a.middle&&a.end)return"all";if(!a.start&&!a.middle&&!a.end)return"none";a=[a.start?"start":null,a.middle?"middle":null,a.end?"end":null];return a.filter(Boolean).join("_")};c("promiseDone")(a.runTask({fn:function(){return(h||(h=b("Promise"))).all([n(),k(),o(),l(),m()]).then(function(a){var b=a[0],d=a[1],f=a[2],g=a[3];a=a[4];c("FBLogger")("maw_db_ear").mustfix("EAR decruption error check. Identity: %s, Threads: %s, Contacts: %s, PendingReceipts: %s, Messages: %s",e(b),e(d),e(f),e(g),e(a))})},name:"ear_checker",priority:d("WorkerScheduler").BACKGROUND_PRIORITY}))}function j(a){return a.then(function(a){return!1})["catch"](function(a){return a instanceof d("MAWKeychainNaClCrypto").EARDecryptionError?!0:!1})}var k=d("MAWIndexedDb").makeMsgrTransactor({threads:(f=d("MAWTransactionMode")).READONLY},"checkThreadsForEARIssue",function(a){return function(){return d("MAWDexieTable").dexieAll([j(a.threads.toCollection().limit(10).toArray()),j(a.threads.toCollection().reverse().limit(10).toArray()),j(a.threads.count().then(function(b){return a.threads.toCollection().offset(b/2).limit(10).toArray()}))]).then(function(a){var b=a[0],c=a[1];a=a[2];return{end:c,middle:a,start:b}})}}),l=d("MAWIndexedDb").makeMsgrTransactor({pendingReceipts:f.READONLY},"checkPendingReceiptsForEARIssue",function(a){return function(){return d("MAWDexieTable").dexieAll([j(a.pendingReceipts.toCollection().limit(10).toArray()),j(a.pendingReceipts.toCollection().reverse().limit(10).toArray()),j(a.pendingReceipts.count().then(function(b){return a.pendingReceipts.toCollection().offset(b/2).limit(10).toArray()}))]).then(function(a){var b=a[0],c=a[1];a=a[2];return{end:c,middle:a,start:b}})}}),m=d("MAWIndexedDb").makeMsgrTransactor({messages:f.READONLY},"checkMessagesForEARIssue",function(a){return function(){return d("MAWDexieTable").dexieAll([j(a.messages.toCollection().limit(10).toArray()),j(a.messages.toCollection().reverse().limit(10).toArray()),j(a.messages.count().then(function(b){return a.messages.toCollection().offset(b/2).limit(10).toArray()}))]).then(function(a){var b=a[0],c=a[1];a=a[2];return{end:c,middle:a,start:b}})}}),n=d("WADbTransactor").makeSignalTransactor({identity:f.READONLY},"checkIdentityForEARIssue",function(a){return function(){return d("MAWDexieTable").dexieAll([j(a.identity.toCollection().limit(10).toArray()),j(a.identity.toCollection().reverse().limit(10).toArray()),j(a.identity.count().then(function(b){return a.identity.toCollection().offset(b/2).limit(10).toArray()}))]).then(function(a){var b=a[0],c=a[1];a=a[2];return{end:c,middle:a,start:b}})}}),o=d("WADbTransactor").makeSignalTransactor({contacts:f.READONLY},"checkContactsForEARIssue",function(a){return function(){return d("MAWDexieTable").dexieAll([j(a.contacts.toCollection().limit(10).toArray()),j(a.contacts.toCollection().reverse().limit(10).toArray()),j(a.contacts.count().then(function(b){return a.contacts.toCollection().offset(b/2).limit(10).toArray()}))]).then(function(a){var b=a[0],c=a[1];a=a[2];return{end:c,middle:a,start:b}})}});g.hasChecked=a;g.checkEARIssues=e}),98);
__d("WADbTransactor",["MAWDexie","MAWIndexedDb","MAWTransactionMode","WAExceededStorageQuota","WAPREList","WAPREMetrics","asyncToGeneratorRuntime","err"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,c){var e=Object.keys(a),f=e.some(function(b){return a[b]===d("MAWTransactionMode").READWRITE})?d("MAWTransactionMode").READWRITE:d("MAWTransactionMode").READONLY;return function(){for(var a=arguments.length,g=new Array(a),i=0;i<a;i++)g[i]=arguments[i];return d("MAWIndexedDb").getSignalDB(b).then(function(a){return h(f,e,function(){return c(a.stores).apply(void 0,g)})})["catch"](function(a){throw k(a,b)})}}function h(a,b,e){if(c("MAWDexie").currentTransaction!=null)throw c("err")("protocolDB transactor %s cannot be called within another transaction");return d("MAWIndexedDb").getSignalDB().then(function(c){return c.transact(a,b,e)})}function i(a){if(a instanceof Error)return a;else if(typeof a==="string")return c("err")(a);else return null}function e(a,b,c,d){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c,e){var f=a+"_"+e,g=a==="danglingQueue"?d("WAPREMetrics").startMetric(d("WAPREList").PRE_METRIC.WORM,{string:{operationType:f},bool:{isDexiePQ:!0}},void 0,1e4):null,h=(yield d("MAWIndexedDb").getDB(f));return h.transact(b,[a],function(){return c(h.stores[a])}).then(function(a){g==null?void 0:g.endSuccess();return a})["catch"](function(a){g==null?void 0:g.endFail("error");throw k(a,f)})});return j.apply(this,arguments)}function k(a,b){d("WAExceededStorageQuota").checkQuotaExceededError(a);a=i(a);if(!a){var e;return c("err")("["+((e=a==null?void 0:a.toString())!=null?e:"unknown error")+"] Error performing %s transaction "+b)}a.message="["+((e=a==null?void 0:a.toString())!=null?e:"unknown error")+"] Error performing %s transaction "+b;return a}g.makeSignalTransactor=a;g.persistedQueueTransactor=e}),98);
__d("MAWUploadThreadTxns",["$InternalEnum","MAWFolderTypes"],(function(a,b,c,d,e,f,g){"use strict";var h=b("$InternalEnum")({INBOX:0,PENDING:1,OTHER:2,SPAM:3,ARCHIVED:4,HIDDEN:5});function i(a){switch(a){case d("MAWFolderTypes").FOLDER_ID.INBOX:return h.INBOX;case d("MAWFolderTypes").FOLDER_ID.PENDING:return h.PENDING;case d("MAWFolderTypes").FOLDER_ID.ARCHIVED:return h.ARCHIVED;default:return h.INBOX}}function a(a){return i(a).toString()}g.FolderType=h;g.getFolderTypeAsText=a}),98);
__d("MAWBridgeEventTransmitter",["MAWBridge","MAWBridgeMsg","MAWBridgeTrace","MAWBridgeTypesCreators","MAWBridgeUpload","MAWIndexedDb","MAWUploadThreadTxns","WAJids","WATimeUtils"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,c,e,f){d("MAWBridge").getBridge().fireAndForget("event","uiUpdate",{events:[{tag:"IssuePointQuery",value:{jid:f,messageId:a,startSortKey:c,taskSource:e,threadId:b}}]})}function b(a,b){d("MAWIndexedDb").afterTransaction({tag:"DeleteMessagesOfThread",value:d("MAWBridgeUpload").createBridgeDeleteMessagesOfThread(d("WAJids").threadIdForChatJid(a.jid),d("MAWUploadThreadTxns").getFolderTypeAsText(a.folder),"AdvancedCrypto",(a=b)!=null?a:d("WATimeUtils").castToMillisTime(1),null,2)})}function c(a,b,c,e,f){d("MAWIndexedDb").afterTransaction({tag:"MsgsLoaded",value:d("MAWBridgeTypesCreators").createBridgeMsgsLoadedInfo(a,b,c,e,f)})}function e(a,b,c){d("MAWBridge").getBridge().fireAndForget("event","uiUpdate",{events:[{tag:"StartTrace",value:d("MAWBridgeTrace").createBridgeStartTraceData(a,b,c)}]})}function f(a,b){(b==null?void 0:b.get(a.externalId))!=null?d("MAWBridge").getBridge().fireAndForget("event","uiUpdate",{events:[{tag:"NewMsg",value:d("MAWBridgeMsg").createBridgeMsg(a,b.get(a.externalId),void 0,"EncryptedBackups")}]}):d("MAWBridge").getBridge().fireAndForget("event","uiUpdate",{events:[{tag:"NewMsg",value:d("MAWBridgeMsg").createBridgeMsg(a,void 0,void 0,"EncryptedBackups")}]})}function h(a,b,c){d("MAWBridge").getBridge().fireAndForget("event","uiUpdate",{events:[{tag:"ThreadUpdated",value:d("MAWBridgeTypesCreators").createBridgeUpdatedThread({cannotReplyReason:a,folder:b,threadJid:c})}]})}function i(a,b,c){d("MAWIndexedDb").afterTransaction({tag:"DeleteMessageRangesV2",value:{minMsgId:a,minTimestampMs:b,threadJid:c}})}g.issuePointQueryOutsideTxn=a;g.deleteMessagesOfThreadAfterTxn=b;g.issueMsgLoadedEventAfterTxn=c;g.startTraceOutsideTxn=e;g.issueNewMsgUiEventOutsideTxn=f;g.updateThreadOutsideTxn=h;g.deleteMessageRangesV2AfterTxn=i}),98);
__d("MAWConstants",[],(function(a,b,c,d,e,f){"use strict";a=5;b="Facebook user";c="Instagram user";d=3;e=50;f.MESSAGE_RETRY_COUNT_LIMIT=a;f.FB_UNKNOWN_USER=b;f.INS_UNKNOWN_USER=c;f.CURRENT_REGISTRATION_VERSION=d;f.BRIDGE_UPLOAD_BATCH_SIZE=e}),66);
__d("MAWBridgeReceiverFetchInfo",["WALogger","WATimeUtils"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["Failed to cast previewUrlExpirationTimestampMs to millis time: ",""]);h=function(){return a};return a}function a(a,b){var c=b.mimetype,d=b.previewHeight,e=b.previewUrl,f=b.previewUrlExpirationTimestampMs,g=b.previewWidth,h=b.receiverFetchId;b=b.type;return{mimetype:c,msgId:a.msgId,previewHeight:d,previewUrl:e,previewUrlExpirationTimestampMs:j(f),previewWidth:g,receiverFetchId:h,sortOrderMs:i(a),threadJid:a.threadJid,type:b}}function b(a,b){var c=b.mimetype,d=b.previewHeight,e=b.previewWidth,f=b.receiverFetchId;b=b.type;return{mimetype:c,msgId:a.msgId,previewHeight:d,previewWidth:e,receiverFetchId:f,sortOrderMs:i(a),threadJid:a.threadJid,type:b}}function i(a){return d("WATimeUtils").castToMillisTime(a.sortOrderMs!=null?a.sortOrderMs:a.ts*1e3)}function j(a){if(a==null)return void 0;try{return d("WATimeUtils").castLongIntToMillisTime(a)}catch(a){d("WALogger").ERROR(h(),a);return void 0}}g.createBridgeReceiverFetchInfoPayloadFromDbInfo=a;g.createBridgeReceiverFetchInfoPayloadFromUnstoredInfo=b}),98);
__d("MAWDbAppMeta",[],(function(a,b,c,d,e,f){"use strict";a={allowSecurityAlert:"allowSecurityAlert",allowSecurityAlertForSelf:"allowSecurityAlertForSelf",dbMigrationVersion:"dbMigrationVersion",deviceJid:"deviceJid",hasMigratedFromDexie:"hasMigratedFromDexie",hmacKey:"hmacKey",hotlikeSticker:"hotlikeSticker",isBackfilledForOccamadillo:"isBackfilledForOccamadillo",msgTypeVersion:"msgTypeVersion",restoreMigrationAttempts:"restoreMigrationAttempts",restoreToDexieMigrationComplete:"restoreToDexieMigrationComplete"};f.AppMetaKeysEnum=a}),66);
__d("MAWDbMsgTypeVersionTxns",["MAWDbAppMeta","MAWDexieTable","emptyFunction"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){return a.appMeta.get({key:d("MAWDbAppMeta").AppMetaKeysEnum.msgTypeVersion}).then(function(a){return a==null?void 0:a.value.msgTypeVersion})}function b(a,b){return a.appMeta.add({key:d("MAWDbAppMeta").AppMetaKeysEnum.msgTypeVersion,value:{msgTypeVersion:b}})}function e(a,b){return a.appMeta.put({key:d("MAWDbAppMeta").AppMetaKeysEnum.msgTypeVersion,value:{msgTypeVersion:b}})}function f(a,b){return a.appMeta.add({key:d("MAWDbAppMeta").AppMetaKeysEnum.hmacKey,value:{hmacKey:b}})}function i(a){return a.appMeta.get({key:d("MAWDbAppMeta").AppMetaKeysEnum.hmacKey}).then(function(a){return a==null?void 0:a.value.hmacKey})}function j(a,b){return a.appMeta.get({key:b})}function k(a,b){return a.appMeta.put({key:d("MAWDbAppMeta").AppMetaKeysEnum.allowSecurityAlert,value:{allowSecurityAlert:b}}).then(c("emptyFunction"))}function l(a,b){return a.appMeta.put({key:d("MAWDbAppMeta").AppMetaKeysEnum.allowSecurityAlertForSelf,value:{allowSecurityAlertForSelf:b}}).then(c("emptyFunction"))}function m(a){return j(a,d("MAWDbAppMeta").AppMetaKeysEnum.allowSecurityAlert).then(function(a){return(a=a==null?void 0:a.value.allowSecurityAlert)!=null?a:!1})}function n(a){return j(a,d("MAWDbAppMeta").AppMetaKeysEnum.allowSecurityAlertForSelf).then(function(a){return(a=a==null?void 0:a.value.allowSecurityAlertForSelf)!=null?a:!0})}function o(a,b){return a.appMeta.add({key:d("MAWDbAppMeta").AppMetaKeysEnum.hotlikeSticker,value:{hotlikeSticker:b}})}function p(a){return d("MAWDexieTable").dexieAll([n(a),m(a)]).then(function(a){var b=a[0];a=a[1];return{allowSecurityAlertForContact:a,allowSecurityAlertForSelf:b}})}g.MSG_TYPE_VERSION=(h=d("MAWDbAppMeta")).AppMetaKeysEnum.msgTypeVersion;g.ALLOW_SECURITY_ALERT_FOR_CONTACT=h.AppMetaKeysEnum.allowSecurityAlert;g.ALLOW_SECURITY_ALERT_FOR_SELF=h.AppMetaKeysEnum.allowSecurityAlertForSelf;g.HOT_LIKE=h.AppMetaKeysEnum.hotlikeSticker;g.getMsgTypeVersion=a;g.addMsgTypeVersion=b;g.updateMsgTypeVersion=e;g.addHMACKey=f;g.getHMACKey=i;g.getAppMetaValue=j;g.updateSecurityAlertValueForContact=k;g.updateSecurityAlertValueForSelf=l;g.getSecuritySettingForContact=m;g.getSecuritySettingForSelf=n;g.addHotLike=o;g.maybeBulkGetSecuritySetting=p}),98);
__d("MAWHMACKey",["MAWCryptoConsts","MAWDbMsgTypeVersionTxns","MAWIndexedDb","MAWKeychainUtil","MAWSubtleCrypto","MAWTransactionMode","WABase64","tweetnacl-auth"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=d("MAWKeychainUtil").getBufferWithRandomValuesFromLength(d("MAWCryptoConsts").HKDF_SEED_LENGTH_IN_BYTES);return i(a).then(function(a){return d("MAWSubtleCrypto").MAWSubtleCrypto.exportKey("raw",a)})}function a(a,b){a=new TextEncoder().encode(a);b=new Uint8Array(b);a=c("tweetnacl-auth")(a,b);return d("WABase64").encodeB64UrlSafe(a)}function b(){return h().then(function(a){return d("MAWIndexedDb").makeMsgrTransactor({appMeta:d("MAWTransactionMode").READWRITE},"generateAndInsertHMACKey",function(b){return function(){return d("MAWDbMsgTypeVersionTxns").getHMACKey(b).then(function(c){return c!=null?c:d("MAWDbMsgTypeVersionTxns").addHMACKey(b,a).then(function(){return a})})}})()})}function i(a){return d("MAWSubtleCrypto").MAWSubtleCrypto.importKey("raw",a,{hash:"SHA-256",name:"HMAC"},!0,["sign"])}g.genHMACKey=h;g.hmacTweetNaCl=a;g.generateAndInsertHMACKey=b}),98);
__d("MAWMediaGalleryM2Utils",["qex"],(function(a,b,c,d,e,f,g){"use strict";function a(a){if((a==null?void 0:a.isSilent)===!0){return(a=c("qex")._("1602"))!=null?a:!1}return(a=c("qex")._("19"))!=null?a:!1}function b(a){if((a==null?void 0:a.isSilent)===!0){return(a=c("qex")._("1604"))!=null?a:!1}return(a=c("qex")._("1596"))!=null?a:!1}g.isMediaGalleryM2Enabled=a;g.isFilesEBRestoreEnabled=b}),98);
__d("MAWMediaUtils",["FBLogger","MAWDbMedia","MAWDexieTable","MAWHMACKey","MAWImageUtils","MAWMediaGalleryM2Utils","MAWMsgType","WAGlobals","WAHashUtils","WAMediaUtils","WAMsgType","WATimeUtils","asyncToGeneratorRuntime","err","gkx","justknobx"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){b===void 0&&(b="media");switch(a){case d("MAWDbMedia").MEDIA_TYPE.IMAGE:return b==="xma-media"?"xma-image":"image";case d("MAWDbMedia").MEDIA_TYPE.VIDEO:return"video";case d("MAWDbMedia").MEDIA_TYPE.PTT:return"ptt";case d("MAWDbMedia").MEDIA_TYPE.GIF:return"gif";case d("MAWDbMedia").MEDIA_TYPE.STICKER:return"sticker";case d("MAWDbMedia").MEDIA_TYPE.DOCUMENT_FILE:return"document";default:throw c("err")("get a wrong media file with type "+a)}}function h(a){try{return d("WAMediaUtils").blobToArrayBuffer(a).then(i)}catch(a){throw c("err")("Got "+a+" when convert the blob to Uint8Array")}}function i(a){return self.crypto.subtle.digest("SHA-256",a).then(function(a){return new Uint8Array(a)})}function e(a){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=(yield h(a));a=d("WAHashUtils").toPlaintextHash(a);var b=k(a);return[a,b]});return j.apply(this,arguments)}function k(a){var b=d("WAGlobals").getHMACKey();return d("WAHashUtils").toHashedPlaintextHash(d("MAWHMACKey").hmacTweetNaCl(a,b))}function f(a){var b="preview-"+d("WATimeUtils").unixTime().toString()+".jpeg";return l(a,b,"image/jpeg")}function l(a,b,c){return new File([new Blob([new Uint8Array(a)],{type:c})],b,{type:c})}function m(a,b,e){var f=function(){return e!=null&&c("gkx")("3743")?d("MAWDexieTable").dexieResolve(e.filter(function(a){return a.type!==d("WAMsgType").REVOKED&&b.msgIds.includes(a.msgId)})):a.messages.where("msgId").anyOf(b.msgIds).filter(function(a){return a.type!==d("WAMsgType").REVOKED}).toArray()};return f().then(function(a){return n(b,a)})}function n(a,b){b=b.filter(function(b){return b.type!==d("WAMsgType").REVOKED&&a.msgIds.includes(b.msgId)});var e=b.map(function(a){return a.msgId});e=babelHelpers["extends"]({},a,{msgIds:e});if(c("gkx")("5319")===!0){var f=b.reduce(function(a,b){a[b.msgId]=d("WATimeUtils").castToMillisTime(b.sortOrderMs!=null?b.sortOrderMs:b.ts*1e3);return a},{});e=babelHelpers["extends"]({},e,{messagesSortOrderMs:f})}if(b.every(function(a){return a.type===d("WAMsgType").STICKER})&&c("justknobx")._("2932")&&d("MAWMediaGalleryM2Utils").isMediaGalleryM2Enabled({isSilent:!0})){f=d("MAWImageUtils").boundHeightWidth(e.previewHeight,e.previewWidth,d("MAWImageUtils").STICKER_THUMBNAIL_MAX_SIZE);var g=f.height;f=f.width;e=babelHelpers["extends"]({},e,{mediaType:d("MAWDbMedia").MEDIA_TYPE.STICKER,previewHeight:g,previewHeightLarge:g,previewWidth:f,previewWidthLarge:f})}g=new Set(b.map(function(a){return a.type}));g.forEach(function(b){a.mediaType!==o(b)&&c("FBLogger")("messenger_e2ee_web").mustfix("Message and media type mismatch: message with type %s is associated with media with type %s",b,a.mediaType)});return e}function o(a){switch(a){case d("MAWMsgType").MSG_TYPE.IMAGE:return d("MAWDbMedia").MEDIA_TYPE.IMAGE;case d("MAWMsgType").MSG_TYPE.VIDEO:return d("MAWDbMedia").MEDIA_TYPE.VIDEO;case d("MAWMsgType").MSG_TYPE.PTT:return d("MAWDbMedia").MEDIA_TYPE.PTT;case d("MAWMsgType").MSG_TYPE.GIF:return d("MAWDbMedia").MEDIA_TYPE.GIF;case d("MAWMsgType").MSG_TYPE.STICKER:return d("MAWDbMedia").MEDIA_TYPE.STICKER;case d("MAWMsgType").MSG_TYPE.DOCUMENT_FILE:return d("MAWDbMedia").MEDIA_TYPE.DOCUMENT_FILE}}g.getServerMediaTypeFromMediaType=a;g.hashBlob=h;g.hashArrayBuffer=i;g.genBlobHashes=e;g.genHMACPlaintextHash=k;g.convertJpegThumbnailArrayBufferToFile=f;g.getBridgeMediaAnnotatedForDisplay=m;g.annotateBridgeMediaForDisplay=n;g.getMediaTypeFromMsgType=o}),98);
__d("WAErrorMessage",[],(function(a,b,c,d,e,f){"use strict";var g="NoErrorMessageProvided";function a(a){if(typeof a==="string")return a;if(a instanceof Error)return a.message;if(typeof a==="object")if(typeof (a==null?void 0:a.description)==="string")return a.description;else if(typeof (a==null?void 0:a.message)==="string")return a.message;return g}f.NO_ERROR_MESSAGE_PROVIDED=g;f.maybeGetMessageFromError=a}),66);
__d("MAWDbChunkTxns",["MAWMediaUtils","MAWODSProxy","WAErrorMessage","WAOdsEnums","WATagsLogger"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["Failed to add chunk. Possible duplicate? Will attempt a retry. For hashedPlaintextHash: ",". Error: ",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Failed to add chunk after retry. Error: ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["Failed to add chunk for hashedPlaintextHash: ",". Error: ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["Chunk found after retry for hashedPlaintextHash: ",""]);k=function(){return a};return a}var l=d("WATagsLogger").TAGS(["MAWDbChunkTxns"]);b=function a(b,c,e,f,g){g===void 0&&(g=0);var m=d("MAWMediaUtils").genHMACPlaintextHash(c);return b.chunk.where("hashedPlaintextHash").equals(m).first().then(function(n){if(n){g>0&&l.LOG(k(),m);return n}else{var o={blobData:e,hashedPlaintextHash:m,mimetype:f,plaintextHash:c};return b.chunk.add(o).then(function(a){return babelHelpers["extends"]({},o,{chunkId:a})})["catch"](function(k){var n=d("WAErrorMessage").maybeGetMessageFromError(k);if(g>0){l.WARN(j(),m,n);l.ERROR(i(),n);throw k}else{l.WARN(h(),m,n);d("MAWODSProxy").odsBumpEntityKey({amount:1,entity:d("WAOdsEnums").Entity.MAW_MEDIA_DB_DUPLICATE_CHUNK,key:"retry"});return a(b,c,e,f,g+1)}})}})};var m=function(a,b){return a.chunk.where("hashedPlaintextHash").equals(b)};c=function(a,b){return m(a,b).count().then(function(a){return a>0})};e=function(a,b){return m(a,b).first()};f=function(a,b){return a.chunk.where("hashedPlaintextHash").anyOf(b).toArray().then(function(a){return new Map(a.map(function(a){return[a.hashedPlaintextHash,a]}))})};function a(a,b){return a.chunk.bulkGet(b)}var n=function(a,b){b=d("MAWMediaUtils").genHMACPlaintextHash(b);return a.chunk.get({hashedPlaintextHash:b})};g.getOrCreateMediaChunk=b;g.hasMediaChunk=c;g.maybeGetChunkFromHash=e;g.maybeBulkGetChunksFromHash=f;g.bulkGetChunks=a;g.maybeGetChunkByPlaintextHash=n}),98);
__d("MAWJidUtils",["FBLogger","I64","LSIntEnum","MAWJids","WAGlobals","WAJids"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function j(a,b,e){if(d("WAJids").isAuthorSystem(a)||b==null||e==null){c("FBLogger")("messenger_e2ee_web").warn("Failed to create protocolMsgId with externalId %s for a msg to edit",e);return}return{author:a,chat:b,externalId:e}}function a(a){var b;return j(a.author,a.threadJid,(b=a.externalId)!=null?b:a.editExternalId)}function b(a){return d("WAJids").isAuthorMe(a)?d("WAGlobals").getMyUserJid():a}function e(a,b){a=(h||(h=d("I64"))).to_string(a);b=(i||(i=d("LSIntEnum"))).unwrapIntEnum(b);switch(b){case 15:return d("MAWJids").jidUtils.toUserJid(a);case 16:return d("WAJids").toGroupJid(a);default:return null}}g.maybeToProtocolMsgId=j;g.toProtocolMsgId=a;g.getAuthorJid=b;g.LSJidtoChatJid=e}),98);
__d("MAWLoadReplyMediaTxns",["ExecutionEnvironment","MAWBridgeReceiverFetchInfo","MAWDbChunkTxns","MAWDbMedia","MAWDbMsg","MAWDbXMATxns","MAWDexieTable","MAWIndexedDb","MAWJidUtils","MAWMediaUtils","MAWMsgType","MAWUserJidWrapper","MAWXMAUtils","MWPBumpEntityKey","WAAssertUnreachable","WAJids","WALogger","WAMsgType","WAResultOrError","gkx","justknobx","qex"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Invalid msg for getReplyMediaForReceiverFetch with type: ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["Missing msgId for getReplyMediaForReceiverFetch"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["Unable to convert receiver fetch id to media id: ",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["Missing receiverFetchInfo for getReplyMediaForReceiverFetchWithReceiverFetchId"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["Missing receiverFetchId for getReplyMediaForReceiverFetchWithReceiverFetchId"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["Unable to fetch reply media XMA with id ",": ",""]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["Unable to fetch reply media with id ",": ",""]);o=function(){return a};return a}function p(a,b,e){if(c("gkx")("2419")&&e!=null){e=d("MAWMediaUtils").genHMACPlaintextHash(e);return a.media.where("hashedPlaintextHash").equals(e).first()}else return a.media.get(b)}function q(a,b,c){if(c!=null){c=d("MAWMediaUtils").genHMACPlaintextHash(c);return a.media.where("hashedPlaintextHash").equals(c).first().then(function(b){return b==null?[void 0,void 0]:d("MAWDbChunkTxns").maybeGetChunkFromHash(a,b.hashedPlaintextHash).then(function(a){return a==null?[void 0,b]:[a,b]})})}else return a.media.get(b).then(function(b){return b==null?[void 0,void 0]:d("MAWDbChunkTxns").maybeGetChunkFromHash(a,b.hashedPlaintextHash).then(function(a){return a==null?[void 0,b]:[a,b]})})}var r=new Set([(e=d("MAWDbMedia")).MEDIA_TYPE.IMAGE,e.MEDIA_TYPE.GIF,e.MEDIA_TYPE.PTT,e.MEDIA_TYPE.STICKER,e.MEDIA_TYPE.VIDEO,e.MEDIA_TYPE.DOCUMENT_FILE]);function s(a){var b;switch(a.mediaType){case d("MAWDbMedia").MEDIA_TYPE.IMAGE:case d("MAWDbMedia").MEDIA_TYPE.GIF:case d("MAWDbMedia").MEDIA_TYPE.STICKER:b=a.validatedImageInfo;break;case d("MAWDbMedia").MEDIA_TYPE.VIDEO:b=a.validatedVideoInfo;break}a=b||{};var c=a.height,e=a.jpegThumbnailHeight,f=a.jpegThumbnailWidth;a=a.width;return{replyMediaPreviewHeight:(e=e)!=null?e:c,replyMediaPreviewWidth:(e=f)!=null?e:a}}function t(a){switch(a.type){case d("MAWMsgType").MSG_TYPE.IMAGE:case d("MAWMsgType").MSG_TYPE.VIDEO:case d("MAWMsgType").MSG_TYPE.PTT:case d("MAWMsgType").MSG_TYPE.GIF:case d("MAWMsgType").MSG_TYPE.STICKER:case d("MAWMsgType").MSG_TYPE.DOCUMENT_FILE:case d("MAWMsgType").MSG_TYPE.RECEIVER_FETCH:return!0;case d("MAWMsgType").MSG_TYPE.XMA:return d("MAWXMAUtils").isXMAShare(a.xmaMessageType)||c("justknobx")._("2919")&&d("MAWXMAUtils").isXMAStoryReply(a.xmaMessageType);case d("MAWMsgType").MSG_TYPE.TEXT:case d("MAWMsgType").MSG_TYPE.UNAVAILABLE:case d("MAWMsgType").MSG_TYPE.REVOKED:case d("MAWMsgType").MSG_TYPE.EXPIRED_EPHEMERAL:case d("MAWMsgType").MSG_TYPE.GROUP_INVITE:case d("MAWMsgType").MSG_TYPE.CIPHERTEXT:case d("WAMsgType").NOTE_REPLY:case d("MAWMsgType").MSG_TYPE.BUMP_EXISTING_MESSAGE:case d("MAWMsgType").MSG_TYPE.RAVEN:return!1;default:return c("WAAssertUnreachable")(a.type)}}function u(a,b,e){var f;if(b==null)return d("MAWDexieTable").dexieResolve();f=(f=c("qex")._("237"))!=null?f:!1;f=f?p(a,b,e).then(function(a){if(a==null)return d("WAResultOrError").makeError("reply_media_not_found");if(!r.has(a.mediaType))return d("WAResultOrError").makeError("reply_media_type_unknown");var c=s(a),e=c.replyMediaPreviewHeight;c=c.replyMediaPreviewWidth;b!=null&&a.plaintextHash==null&&d("MWPBumpEntityKey").bumpEntityKeyWithAppId("maw.reply_attachment_media_missing_plaintext_hash","load_reply_media_txns_for_reply_type_unknown}");return d("WAResultOrError").makeResult({replyMediaId:b,replyMediaPreviewHeight:e,replyMediaPreviewWidth:c,replyPlaintextHash:a.plaintextHash})}):q(a,b,e).then(function(a){var c=a[0];a=a[1];if(a==null)return d("WAResultOrError").makeError("reply_media_not_found");if(!r.has(a.mediaType))return d("WAResultOrError").makeError("reply_media_type_unknown");var e=s(a),f=e.replyMediaPreviewHeight;e=e.replyMediaPreviewWidth;var g;c!=null&&(g=c.mimetype);if(b!=null&&a.plaintextHash==null){d("MWPBumpEntityKey").bumpEntityKeyWithAppId("maw.reply_attachment_media_missing_plaintext_hash","load_reply_media_txns_for_reply_type_"+((c=g)!=null?c:"unknown"))}return d("WAResultOrError").makeResult({replyMediaId:b,replyMediaPreviewHeight:f,replyMediaPreviewWidth:e,replyMediaUrlMimeType:g,replyPlaintextHash:a.plaintextHash})});return f.then(function(a){if(a.success!==!0){d("WALogger").ERROR(o(),b,a.error);return}return a.value})}function v(a,b){var e,f=b.defaultPreviewMediaId;if(f==null)return d("MAWDexieTable").dexieResolve({replyXMAId:b.xmaId});e=(e=c("qex")._("237"))!=null?e:!1;e=e?a.media.get(f).then(function(a){if(a==null)return d("WAResultOrError").makeError("reply_xma_media_not_found");if(!r.has(a.mediaType))return d("WAResultOrError").makeError("reply_xma_media_type_unknown");var c=s(a),e=c.replyMediaPreviewHeight;c=c.replyMediaPreviewWidth;return d("WAResultOrError").makeResult({replyMediaPreviewHeight:e,replyMediaPreviewWidth:c,replyPlaintextHash:a.plaintextHash,replyXMAId:b.xmaId})}):q(a,f).then(function(a){var c=a[0];a=a[1];if(c==null||a==null)return d("WAResultOrError").makeError("reply_xma_media_not_found");if(!r.has(a.mediaType))return d("WAResultOrError").makeError("reply_xma_media_type_unknown");var e=s(a),f=e.replyMediaPreviewHeight;e=e.replyMediaPreviewWidth;return d("WAResultOrError").makeResult({replyMediaPreviewHeight:f,replyMediaPreviewWidth:e,replyMediaUrlMimeType:c.mimetype,replyPlaintextHash:a.plaintextHash,replyXMAId:b.xmaId})});return e.then(function(a){if(a.success!==!0){d("WALogger").ERROR(n(),b.xmaId,a.error);return}return a.value})}function a(a,b,c){var e,f;c===void 0&&(c=!1);e=((e=b.quote)==null?void 0:e.content)||{};var g=e.author,h=e.externalId,i=e.mediaId,j=e.msgId,k=e.plaintextHash,l=e.type;e=e.xmaMessageType;if(((f=b.quote)==null?void 0:f.content)==null||!t((f=b.quote)==null?void 0:f.content))return d("MAWDexieTable").dexieResolve();f=b.threadJid;b=g===d("MAWUserJidWrapper").getMyUserJid();b=b?d("WAJids").AUTHOR_ME:g;if(d("MAWXMAUtils").isXMAShare(e))return w(a,d("MAWJidUtils").maybeToProtocolMsgId(b,f,h));return l===d("MAWMsgType").MSG_TYPE.RECEIVER_FETCH?y(a,j):u(a,i,c?null:k)}function w(a,b){return b==null?d("MAWDexieTable").dexieResolve():d("MAWDbXMATxns").maybeGetXMAFromProtocolMsgId(a,b).then(function(b){if(b==null||d("MAWXMAUtils").isXMAExpired(b.isTombstoned,b.targetExpiringAtSec))return;return v(a,b)})}function b(a,b){var e=b.author,f=b.externalId,g=b.mediaId,h=b.plaintextHash,i=b.threadJid,j=b.type,k=b.xmaMessageType;k=d("MAWXMAUtils").isXMAShare(k);j=j===d("MAWMsgType").MSG_TYPE.RECEIVER_FETCH;if(!d("MAWDbMsg").isMediaMsg(b)&&!k&&!j)return d("MAWDexieTable").dexieResolve();if(k)return w(a,d("MAWJidUtils").maybeToProtocolMsgId(e,i,f));return j?!c("gkx")("5177")?d("MAWDexieTable").dexieResolve():x(a,b.receiverFetchId):u(a,g,h)}function x(a,b,e){if(b==null){d("WALogger").ERROR(m());return d("MAWDexieTable").dexieResolve()}return a.receiverFetchInfo.get({receiverFetchId:b}).then(function(a){if(a==null){d("WALogger").WARN(l());return}try{var b,f=d("MAWDbMedia").convertNumberToMediaId(parseInt(a.receiverFetchId,10));b=(b=c("qex")._("237"))!=null?b:!1;e!=null&&(!b||(h||(h=c("ExecutionEnvironment"))).isInWorker)&&d("MAWIndexedDb").afterTransaction({tag:"NewReceiverFetchInfo",value:d("MAWBridgeReceiverFetchInfo").createBridgeReceiverFetchInfoPayloadFromDbInfo(e,a)});return{replyMediaId:f,replyMediaPreviewHeight:a.previewHeight,replyMediaPreviewWidth:a.previewWidth,replyMediaUrlMimeType:a.mimetype}}catch(a){d("WALogger").ERROR(k(),a);return}})}function y(a,b){if(b==null){d("WALogger").ERROR(j());return d("MAWDexieTable").dexieResolve()}return a.messages.get({msgId:b}).then(function(b){if(b==null||b.type!==d("MAWMsgType").MSG_TYPE.RECEIVER_FETCH||b.receiverFetchId==null){d("WALogger").ERROR(i(),b==null?void 0:b.type);return}return x(a,b.receiverFetchId,b)})}g.getMedia=p;g.getMediaAndChunk=q;g.MSG_MEDIA_TYPE=r;g.getImageAttributes=s;g.isMediaReplyContent=t;g.getReplyMediaForMsgQuote=a;g.getReplyMediaForMsg=b}),98);
__d("EncryptedBackupsUtils",["FBLogger","WAJids","WAStanzaUtils","WATimeUtils"],(function(a,b,c,d,e,f,g){"use strict";f=function(a){return Date.now()-a>d("WATimeUtils").DAY_MILLISECONDS*30};function a(a,b,c,d,e){d={frankingTag:d==null?void 0:d.frankingTag,reportingTag:d==null?void 0:d.reportingTag};d={frankingMetadata:d,messageId:b,senderId:a,timestampMs:c};return{encryptedTransportMessage:e,metadata:d}}function b(a){return JSON.stringify([a.author,a.chat,a.externalId])}function e(a){a=JSON.parse(a);if(!Array.isArray(a))throw c("FBLogger")("labyrinth_web").mustfixThrow("Unable to parse msg id string as proper json");if(a.length!==3)throw c("FBLogger")("labyrinth_web").mustfixThrow("Parsed array should have 3 components");var b=d("WAJids").unsafeCoerceToUserJid(a[0]),e=d("WAJids").unsafeCoerceToChatJid(a[1]);a=d("WAStanzaUtils").toStanzaId(a[2]);return{author:b,chat:e,externalId:a}}g.entryOlderThan30Days=f;g.asBackupMessage=a;g.convertWAMsgIdToStringId=b;g.convertStringIdToWAMsgId=e}),98);
__d("WAMsgMap",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a){var b=this;this.$1=new Map();a==null?void 0:a.forEach(function(a){var c=a[0];a=a[1];b.set(c,a)})}var b=a.prototype;b.clear=function(){this.$1.clear()};b["delete"]=function(a){var b;(b=this.$1.get(a.externalId))==null?void 0:(b=b.get(a.author))==null?void 0:b["delete"](a.chat)};b.get=function(a){var b;return(b=this.$1.get(a.externalId))==null?void 0:(b=b.get(a.author))==null?void 0:b.get(a.chat)};b.has=function(a){var b;return(b=(b=this.$1.get(a.externalId))==null?void 0:(b=b.get(a.author))==null?void 0:b.has(a.chat))!=null?b:!1};b.set=function(a,b){var c,d;c=(c=this.$1.get(a.externalId))!=null?c:new Map();this.$1.has(a.externalId)||this.$1.set(a.externalId,c);d=(d=c.get(a.author))!=null?d:new Map();c.has(a.author)||c.set(a.author,d);d.set(a.chat,b);return this};b.keys=function(){var a=[],b=this.$1;for(var c=b.keys(),d=Array.isArray(c),e=0,c=d?c:c[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var f,g;if(d){if(e>=c.length)break;g=c[e++]}else{e=c.next();if(e.done)break;g=e.value}g=g;f=(f=b.get(g))!=null?f:new Map();for(var h=f.keys(),i=Array.isArray(h),j=0,h=i?h:h[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var k,l;if(i){if(j>=h.length)break;l=h[j++]}else{j=h.next();if(j.done)break;l=j.value}l=l;k=(k=f.get(l))!=null?k:new Map();for(var k=k.keys(),m=Array.isArray(k),n=0,k=m?k:k[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var o;if(m){if(n>=k.length)break;o=k[n++]}else{n=k.next();if(n.done)break;o=n.value}o=o;a.push({externalId:g,author:l,chat:o})}}}return a};b.entries=function(){var a=[],b=this.$1;for(var c=b.keys(),d=Array.isArray(c),e=0,c=d?c:c[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var f,g;if(d){if(e>=c.length)break;g=c[e++]}else{e=c.next();if(e.done)break;g=e.value}g=g;f=(f=b.get(g))!=null?f:new Map();for(var h=f.keys(),i=Array.isArray(h),j=0,h=i?h:h[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var k,l;if(i){if(j>=h.length)break;l=h[j++]}else{j=h.next();if(j.done)break;l=j.value}l=l;k=(k=f.get(l))!=null?k:new Map();for(var m=k.keys(),n=Array.isArray(m),o=0,m=n?m:m[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var p;if(n){if(o>=m.length)break;p=m[o++]}else{o=m.next();if(o.done)break;p=o.value}p=p;var q=k.get(p);q!=null&&a.push([{externalId:g,author:l,chat:p},q])}}}return a};b.values=function(){return this.entries().map(function(a){return a[1]})};return a}();f.MsgMap=a}),66);
__d("MAWDbMsgUtil",["WAJids","WALogger","WAMsgMap"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["Invalid author when converting msg array to map"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Missing jid prevents adding message to array map"]);i=function(){return a};return a}function a(a){return a.reduce(function(a,b){var c=b.threadJid;if(c==null){d("WALogger").ERROR(i());return a}if(b.author==="@system"){d("WALogger").ERROR(h());return a}a.set({author:b.author,chat:c,externalId:b.externalId},b);return a},new(d("WAMsgMap").MsgMap)())}function b(a){return d("WAJids").isAuthorSystem(a.author)||a.threadJid==null?null:{author:a.author,chat:a.threadJid,externalId:a.externalId}}g.convertMsgArrayToMap=a;g.getProtocolMsgIdFromDbMsg=b}),98);
__d("MAWDbUnrenderedMsgTxns",["MAWAckLevel","MAWDbMsg","MAWDbMsgUtil","MAWDexieTable","WAJids","WALogger","WAMsgMap","WAResultOrError"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["bulkUpdateSystemAck on sent message"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["bulkUpdateSystemAck on incoming message"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["updateSystemAckForUnrenderedMsg on non existing message"]);j=function(){return a};return a}function a(a,b){var c=b.author,e=b.chat,f=b.externalId;return a.threads.get({jid:e}).then(function(b){return b==null?d("WAResultOrError").makeError("missing_thread_unrendered_msg"):k(a,f,e,c).then(function(a){return a==null?d("WAResultOrError").makeError("missing_unrendered_msg"):d("WAResultOrError").makeResult(a)})})}function b(a,b){var c=b.map(function(a){a=a.externalId;return a});return a.unrenderedMessages.where("externalId").anyOf(c).toArray().then(function(a){var c=d("MAWDbMsgUtil").convertMsgArrayToMap(a),e=new(d("WAMsgMap").MsgMap)();b.forEach(function(a){var b=c.get(a);b!=null&&e.set(a,b)});return e})}function k(a,b,c,d){return a.unrenderedMessages.where("externalId").equals(b).filter(function(a){return a.author===d&&a.threadJid===c}).first()}function l(a,b){return a+"_"+b}function c(a,b){var c=b.map(function(a){a=a.externalId;return a}),e=Array.from(new Set(b.map(function(a){return a.chat})));return d("MAWDexieTable").dexieAll([a.threads.where("jid").anyOf(e).toArray(),a.unrenderedMessages.where("externalId").anyOf(c).toArray()]).then(function(a){var c=a[0];a=a[1];if(a.length===0||c.length===0)return[];var d=new Map();b.forEach(function(a){var b=a.author,c=a.chat;a=a.externalId;var e=d.get(a)||new Set();e.add(l(b,c));d.set(a,e)});return a.filter(function(a){var b=a.author,c=a.externalId;a=a.threadJid;c=d.get(c);return c!=null&&a!=null&&c.has(l(b,a))})})}function e(a,b,c){return m(a,[{ack:c,msgId:b}]).then(function(a){a=a[0];if(a==null){d("WALogger").LOG(j());return null}return a})}function m(a,b){var c=b.map(function(a){return a.msgId}),e=new Map();b.forEach(function(a){return e.set(a.msgId,{ack:a.ack})});return a.unrenderedMessages.where("msgId").anyOf(c).toArray().then(function(b){if(b.length===0)return b;var c=[],f=[];b.forEach(function(a){var b;if(a.author!==d("WAJids").AUTHOR_ME){d("WALogger").ERROR(i());c.push(a);return}if(a.ack>d("MAWAckLevel").ACK.clock){d("WALogger").LOG(h());c.push(a);return}b=(b=e.get(a.msgId))==null?void 0:b.ack;if(b==null)return null;a=babelHelpers["extends"]({},a,{ack:b});b===d("MAWAckLevel").ACK.sent&&delete a.resendCount;f.push(a)});return a.unrenderedMessages.bulkPut(f).then(function(){return[].concat(f,c)})})}function f(a,b){b=b.map(function(b){return a.unrenderedMessages.get({msgId:b})});return d("MAWDexieTable").dexieAll(b)}function n(a,b){return a.unrenderedMessages.where("msgId").between(d("MAWDbMsg").msgIdsInChatLowerBound(b.chatId),d("MAWDbMsg").msgIdsInChatUpperBound(b.chatId)).last().then(function(a){a=a==null?0:d("MAWDbMsg").getInChatMsgIdFromMsgId(a.msgId);return a+1})}g.maybeGetUnrenderedMsgByProtocolMsgId=a;g.getUnrenderedMsgMapByProtocolMsgId=b;g.maybeGetUnrenderedMsgByExternalId=k;g.getUnrenderedMsgsByProtocolMsgId=c;g.updateSystemAckForUnrenderedMsg=e;g.bulkUpdateSystemAckForUnrenderedMsgs=m;g.getUnrenderedMsgsByMsgIds=f;g.getNextUnrenderedMsgIdNumberForThread=n}),98);
__d("WAArrayGroupBy",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){var c=new Map();for(var d=0;d<a.length;d++){var e=b(a[d]),f=c.get(e);f==null?c.set(e,[a[d]]):f.push(a[d])}return Array.from(c.entries())}f.groupBy=a}),66);
__d("MAWDbMsgTxns",["EncryptedBackupsUtils","MAWAckLevel","MAWBridgeMsg","MAWDbMsg","MAWDbMsgUtil","MAWDbThreadTxns","MAWDbUnrenderedMsgTxns","MAWDbXMATxns","MAWDexieTable","MAWIndexedDb","MAWJidUtils","MAWLoadReplyMediaTxns","MAWMsgType","MAWUpdateThreadMsgMetadataApi","Random","WAArrayGroupBy","WAJids","WALogger","WAMsg","WAMsgMap","WAResultOrError","WATimeUtils","emptyFunction","err","gkx","justknobx","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["Successfull deleted "," messages"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["updateMediaId on message "," that already has this mediaId ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["Replacing mediaId for message with pre-existing media. type=",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["updateMediaId on message "," that already has this mediaId ",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["getFutureproofMsg gets a message "," with unsupported type ",""]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["getMsgsFromOffset() newest msg thread jid is not equal to thread jid.\n            msg.threadJid: ",",\n            thread.jid: ",",\n            thread.chatId: ",",\n            offsetMsgId: ","."]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["getMsgsFromOffset, fetched msgs length: ",""]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["getMsgsFromOffset input: offsetMsgId: ",", numMsgs: ",", includeOffset: ",", includeExpired: ",", direction: ",""]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose(["bulkUpdateSystemAck: not updating ",""]);p=function(){return a};return a}function q(){var a=babelHelpers.taggedTemplateLiteralLoose(["updateSystemAck on non existing message"]);q=function(){return a};return a}function r(){var a=babelHelpers.taggedTemplateLiteralLoose(["[maybeGetMsgByProtocolMsgId] Suspected multiple instances of same message!"]);r=function(){return a};return a}function s(){var a=babelHelpers.taggedTemplateLiteralLoose(["[maybeGetMsgByProtocolMsgId] Can't have "," messages with the same protocolMsgId!"]);s=function(){return a};return a}function t(){var a=babelHelpers.taggedTemplateLiteralLoose(["[CacheDiscrepancy] Thread "," has a discrepancy between the cached and uncached values for field: ",". Cached value: ",", uncached value: ",".\n        Cached msgType: ",", uncached msgType: ",".\n        Cached ts: ",", uncached sortOrderMs: ","."]);t=function(){return a};return a}function a(a,b){return b==null?d("MAWDexieTable").dexieResolve():a.messages.get({msgId:b})}function b(a,b){return a.messages.where("threadJid").equals(b).count().then(function(a){return a===0})}function e(a,b){return a.messages.where("threadJid").equals(b).filter(function(a){return a.type!==d("MAWMsgType").MSG_TYPE.ADMIN}).toArray()}function u(a,b,c,e,f,g){d("WALogger").LOG(t(),a.jid,b,c,e,f==null?void 0:f.type,g==null?void 0:g.type,a.newestMsgTs,g==null?void 0:g.sortOrderMs)}function v(a,b,c,e){return e.then(function(e){if(e==null&&c==null||e===d("WATimeUtils").castToMillisTime(0)||e!=null&&c!=null&&Math.floor(e/1e3)===c/1e3)return;u(a,b,c,e,null,null)})}function w(a){switch(a){case"newestMsgTs":return d("Random").coinflip(c("justknobx")._("2537"))}}function x(a,b){b=w(b);var c=!1;switch(a){case"query_by_sortOrderMs":c=!0;break;case"use_cached_fields":c=!1;break}return{isCacheBypassed:c,isLoggingExpected:b}}function y(a,b,c,d){return a.messages.where(["threadJid","sortOrderMs"]).between([b,Number.MIN_SAFE_INTEGER],[b,Number.MAX_SAFE_INTEGER],c,d)}function z(a,b){return y(a,b,!1,!1).last()}function f(a,b){return z(a,b).then(function(a){return a==null?void 0:a.msgId})}function A(a,b,c){c===void 0&&(c="query_by_sortOrderMs");var e="newestMsgTs";c=x(c,e);var f=c.isCacheBypassed;c=c.isLoggingExpected;var g=b.newestMsgTs;a=z(a,b.jid).then(function(a){return(a==null?void 0:a.sortOrderMs)==null?null:d("WATimeUtils").castToMillisTime(a.sortOrderMs)});c&&v(b,e,g,a);return f?a:d("MAWDexieTable").dexieResolve(g)}function B(a,b,c){return y(a,b,!1,!1).reverse().limit(c).toArray()}function C(a,b){return y(a,b,!1,!1).first()}function D(a,b){return C(a,b).then(function(a){return a==null?void 0:a.msgId})}function E(a,b){return a.messages.where("externalId").equals(b.externalId).filter(function(a){return a.author===b.author&&a.threadJid===b.chat}).toArray().then(G)}function F(a,b){var c=new Set(b.map(function(a){var b=a.author,c=a.chat;a=a.externalId;return d("WAMsg").craftWAMsgIdString({author:b,chat:c,externalId:a})}));return a.messages.where("externalId").anyOf(b.map(function(a){a=a.externalId;return a})).filter(function(a){var b=a.author,e=a.externalId;a=a.threadJid;return c.has(d("WAMsg").craftWAMsgIdString({author:b,chat:a,externalId:e}))}).toArray().then(function(a){return d("WAArrayGroupBy").groupBy(a,function(a){return d("WAMsg").craftWAMsgIdString({author:a.author,chat:a.threadJid,externalId:a.externalId})}).map(function(a){a[0];a=a[1];return G(a)}).filter(Boolean)})}function G(a){if(a.length>1){var b=a.map(function(a){var b;return a.type+":"+((b=a.serverTs)!=null?b:0).toString()+":"+((b=a.ts)!=null?b:0).toString()});b=new Set(b).size===1;!b?d("WALogger").ERROR(s(),a.length):d("WALogger").ERROR(r())}return a[0]}function H(a,b,c,d){d={author:d,chat:c,externalId:b};return E(a,d)}function I(a,b){return a.messages.where("msgId").equals(b).toArray()}function J(a,b){return M(a,b).then(function(a){return a.success?a:a})}function K(a,b){var c=b.map(function(a){a=a.externalId;return a});return a.messages.where("externalId").anyOf(c).toArray().then(function(a){var c=d("MAWDbMsgUtil").convertMsgArrayToMap(a),e=new(d("WAMsgMap").MsgMap)();b.forEach(function(a){var b=c.get(a);b!=null&&e.set(a,b)});return e})}function L(a,b){return a.messages.where("msgId").equals(b).first().then(function(a){return a==null?void 0:a.sortOrderMs})}function M(a,b){var c=b.author,e=b.chat,f=b.externalId;return a.threads.get({jid:e}).then(function(b){return b==null?d("WAResultOrError").makeError("missing_thread_msg"):H(a,f,b.jid,c).then(function(a){return a==null?d("WAResultOrError").makeError("missing_msg"):d("WAResultOrError").makeResult(a)})})}function N(a,b){var c=b.author,d=b.chat,e=b.externalId;return a.threads.get({jid:d}).then(function(b){if(b==null)return;return a.messages.where("revokedExternalId").equals(e).filter(function(a){return a.author===c&&a.threadJid===b.jid&&a.type==="Revoked"}).first()})}function O(a,b,c,e){var f=a.messages.where("revokedExternalId").equals(b).filter(function(a){return a.author===e&&a.threadJid===c&&a.type===d("MAWMsgType").MSG_TYPE.REVOKED}).first();a=d("MAWDbUnrenderedMsgTxns").maybeGetUnrenderedMsgByExternalId(a,b,c,e).then(function(a){if((a==null?void 0:a.type)===d("MAWMsgType").MSG_TYPE.DELETE_FOR_ME)return a});return d("MAWDexieTable").dexieAll([f,a]).then(function(a){var b=a[0];a=a[1];return b!=null||a!=null})}function P(a,b){var c=new Array(b.length),e=new Set();b.forEach(function(a){c.push(a.externalId),e.add(d("EncryptedBackupsUtils").convertWAMsgIdToStringId(a))});return a.messages.where("externalId").anyOf(c).filter(function(a){return e.has(d("EncryptedBackupsUtils").convertWAMsgIdToStringId({author:a.author,chat:a.threadJid,externalId:a.externalId}))}).toArray()}function Q(a,b,c,e,f,g){return R(a,[{ack:c,msgId:b,reportingMeta:f,serverTs:e}],g).then(function(a){a=a.find(function(a){return a.msgId===b});if(a==null){d("WALogger").LOG(q());return null}return a})}function R(a,b,c){c==null?void 0:c.addPoint("bulk_update_system_ack_start");var e=b.map(function(a){return a.msgId});return d("MAWDbXMATxns").getXMAMsgIdsFromAssociatedMsgIds(a,e).then(function(f){var g=new Map();b.forEach(function(a){g.set(a.msgId,{ack:a.ack,reportingMeta:a.reportingMeta,serverTs:a.serverTs});var b=f.get(a.msgId);b!=null&&g.set(b,{ack:a.ack,reportingMeta:a.reportingMeta,serverTs:a.serverTs})});var h=Array.from(new Set(e.concat(Array.from(f.values()))));return a.messages.where("msgId").anyOf(h).toArray().then(function(b){if(b.length===0)return b;var e=[],f=[];b.forEach(function(a){var b,c;if(a.author!==d("WAJids").AUTHOR_ME||a.ack>d("MAWAckLevel").ACK.clock){e.push(a);return}b=(b=g.get(a.msgId))==null?void 0:b.ack;c=(c=g.get(a.msgId))==null?void 0:c.serverTs;if(b==null)return null;var h=babelHelpers["extends"]({},a,{ack:b});c!=null&&(h.serverTs=c);a=(c=g.get(a.msgId))==null?void 0:c.reportingMeta;a!=null&&(h.reportingMeta=a);b===d("MAWAckLevel").ACK.sent&&delete h.resendCount;f.push(h)});e.length>0&&d("WALogger").LOG(p(),e.map(function(a){return a.msgId}).toString());return a.messages.bulkPut(f).then(function(){return d("MAWDexieTable").dexieAll(f.map(function(b){return d("MAWLoadReplyMediaTxns").getReplyMediaForMsgQuote(a,b)}))}).then(function(a){f.forEach(function(b,e){d("MAWIndexedDb").afterTransaction({tag:"MsgUpdated",value:d("MAWBridgeMsg").createBridgeMsg(b,void 0,a[e],void 0,c==null?void 0:c.getFlowDetails().instanceKey)})});return[].concat(f,e)})})})}function S(a,b,e,f){return d("MAWDbThreadTxns").getThread(a,b).then(function(b){if(!b.success||f==null||b.value.oldestMsg!==e&&b.value.newestMsg!==e)return;var g=b.value;b=[a.messages.where(["threadJid","sortOrderMs"]).above([g.jid,f]).first(),a.messages.where(["threadJid","sortOrderMs"]).below([g.jid,f]).last()];return d("MAWDexieTable").dexieAll(b).then(function(b){var f=b[0];b=b[1];return d("MAWDbThreadTxns").updateThread(a,babelHelpers["extends"]({},g,{newestMsg:g.newestMsg===e?b==null?void 0:b.msgId:g.newestMsg,newestMsgTs:g.newestMsg===e?(b==null?void 0:b.ts)==null?null:d("WATimeUtils").castUnixTimeToMillisTime(b.ts):g.newestMsgTs,oldestMsg:g.oldestMsg===e?f==null?void 0:f.msgId:g.oldestMsg})).then(c("emptyFunction"))})})}function T(a,b,e,f,g){if(b===(e==null?void 0:e.msgId)&&f===(g==null?void 0:g.msgId))return d("MAWDexieTable").dexieResolve();d("MAWIndexedDb").afterTransactionEffect(function(){c("promiseDone")(c("MAWUpdateThreadMsgMetadataApi")(a,b,e,f,g))})}function U(a,b,e,f,g,h,i){g===void 0&&(g=!1);h===void 0&&(h=!1);i===void 0&&(i="before");return f===0?d("MAWDexieTable").dexieResolve({hasMoreAfter:!1,hasMoreBefore:!1,msgs:[]}):d("MAWDexieTable").dexieAll([a.threads.get({jid:b}),e==null?d("MAWDexieTable").dexieResolve(null):a.messages.get({msgId:e})]).then(function(b){var j=b[0],k=b[1],l=j==null?void 0:j.oldestMsg,p=j==null?void 0:j.newestMsg;if(j==null||e!=null&&k==null)return{hasMoreAfter:!1,hasMoreBefore:!1,msgs:[]};var q=h?function(a){return!0}:function(a){return a.messageExpirationTs==null||a.messageExpirationTs>d("WATimeUtils").unixTime()};b=d("MAWDexieTable").dexieResolve([]);f===1&&g&&k!=null&&(b=d("MAWDexieTable").dexieResolve([k].filter(q)));d("WALogger").LOG(o(),k==null?void 0:k.msgId,f,g,h,i);return b.then(function(b){b=b.length>0?d("MAWDexieTable").dexieResolve(b):Z(a,j.jid,k,g,f,q,i);var h=c("gkx")("23927");return d("MAWDexieTable").dexieAll([b,z(a,j.jid),C(a,j.jid)]).then(function(a){var b=a[0],c=a[1];a=a[2];T(j,l,a,p,c);d("WALogger").LOG(n(),b.length);if(b.length===0)return{hasMoreAfter:!1,hasMoreBefore:!1,msgs:[]};var g=b[b.length-1],i=b[0];g=h?g.msgId!==(a==null?void 0:a.msgId):g.msgId!==(a==null?void 0:a.msgId)&&b.length===f;a=h?i.msgId!==(c==null?void 0:c.msgId):!1;i.threadJid!==j.jid&&d("WALogger").ERROR(m(),i.threadJid,j.jid,j.chatId,e);return{hasMoreAfter:a,hasMoreBefore:g,msgs:b}})})})}function V(a){return a.messages.where("altIndex").equals(d("MAWDbMsg").FUTUREPROOF_ALT_INDEX).toArray().then(function(a){var b=[];a.forEach(function(a){if(a.type!==d("MAWMsgType").MSG_TYPE.FUTUREPROOF){d("WALogger").ERROR(l(),a.msgId,a.type);return}b.push(a)});return b})}function W(a){return a.toString()}function aa(a,b,e,f){var g=b.mediaId;if(g===e){d("WALogger").LOG(k(),b.msgId,e);return d("MAWDexieTable").dexieResolve()}g=g!=null?a.media.get(g):d("MAWDexieTable").dexieResolve();return g.then(function(g){g&&d("WALogger").ERROR(j(),b.type);g=(g=f)!=null?g:void 0;g=babelHelpers["extends"]({},b,{mediaId:e,plaintextHash:g});return a.messages.put(g).then(c("emptyFunction"))})}function ba(a,b){var e=Array.from(b.keys());return a.messages.where("msgId").anyOf(e).toArray().then(function(e){var f=[];e.map(function(a){var e=b.get(a.msgId),g=a.mediaId;if(g!=null&&g!==e){if(e!=null)throw c("err")("mediaId "+W(g)+" in message "+a.msgId+" is different with the "+W(e)+" in bulkUpdateMediaId");d("WALogger").LOG(i(),a.msgId,e);return}g=babelHelpers["extends"]({},a,{mediaId:e,plaintextHash:a.plaintextHash});f.push(g)});return a.messages.bulkPut(f).then(c("emptyFunction"))})}function ca(a,b){return X(a,[b]).then(c("emptyFunction"))}function X(a,b){return a.messages.where("msgId").anyOf(b).toArray().then(function(b){var c=b.map(function(a){return babelHelpers["extends"]({},a,{isExpiredXmaMsg:!0})});return a.messages.bulkPut(c).then(function(){return c})})}function Y(a,b,c,e){if(e!=null&&e<=0)return d("MAWDexieTable").dexieResolve([]);a=a.messages.where("altIndex").equals(d("MAWDbMsg").craftToBeReadAltIndex(b)).filter(function(a){return d("MAWDbMsg").getSortOrderWithFallback(a)<=c});e!=null&&(a=a.limit(e));return a.toArray()}function da(a,b,c){return Y(a,b,c).then(function(b){var c=b.map(function(a){return babelHelpers["extends"]({altIndex:null},a)});return a.messages.bulkPut(c).then(function(){return c})})}function ea(a,b){return a.messages["delete"](b)}function fa(a,b,c){var e=b.map(function(a){return a.rowId});b=c!=null?b.map(function(a){a=d("MAWJidUtils").toProtocolMsgId(a);if(!a)return;return babelHelpers["extends"]({},a,{reason:c})}).filter(Boolean):[];return d("MAWDexieTable").dexieAll([a.deletedMessages.bulkAdd(b),a.messages.bulkDelete(e)]).then(function(a){a[0];a=a[1];d("WALogger").LOG(h(),a)})}function ga(a,b){return a.messages.where("msgId").anyOf(b).toArray()}function ha(a){return a.messages.where("altIndex").anyOf([d("MAWDbMsg").SPAM_ALT_INDEX,d("MAWDbMsg").FUTUREPROOF_SPAM_ALT_INDEX]).toArray()}function Z(a,b,c,e,f,g,h){h===void 0&&(h="before");c=c==null?null:d("MAWDbMsg").getSortOrderWithFallback(c);if(h==="before"){return a.messages.where(["threadJid","sortOrderMs"]).between([b,Number.MIN_SAFE_INTEGER],[b,(h=c)!=null?h:Number.MAX_SAFE_INTEGER],!0,e).reverse().filter(g).limit(f).toArray()}else{return a.messages.where(["threadJid","sortOrderMs"]).between([b,(h=c)!=null?h:Number.MIN_SAFE_INTEGER],[b,Number.MAX_SAFE_INTEGER],e,!0).filter(g).limit(f).toArray().then(function(a){return a.sort(function(a,b){return b.ts-a.ts})})}}function ia(a,b,c,d){var e=c.msgId;if(a==null&&b==null)return{newestMsg:e,oldestMsg:e};if(d==null){var f;return{newestMsg:e,oldestMsg:(f=a==null?void 0:a.msgId)!=null?f:e}}f=[a,b,c].filter(Boolean);return{newestMsg:f.reduce(function(a,b){return $(b,e,d)>=$(a,e,d)?b:a}).msgId,oldestMsg:f.reduce(function(a,b){return $(a,e,d)<$(b,e,d)?a:b}).msgId}}function $(a,b,c){return a.msgId===b?c:d("MAWDbMsg").getSortOrderWithFallback(a)}function ja(a,b){return a.messages.where("msgId").between(d("MAWDbMsg").msgIdsInChatLowerBound(b.chatId),d("MAWDbMsg").msgIdsInChatUpperBound(b.chatId)).last().then(function(a){a=a==null?0:d("MAWDbMsg").getInChatMsgIdFromMsgId(a.msgId);return a+1})}g.maybeGetMsg=a;g.getIsThreadEmpty=b;g.getNonAdminMsgs=e;g.getThreadMessagesBySortOrder=y;g.getThreadNewestMessageBySortOrder=z;g.getThreadNewestMessageId=f;g.getThreadNewestMessageTs=A;g.getThreadNewestNumMessagesBySortOrder=B;g.getThreadOldestMessageBySortOrder=C;g.getThreadOldestMessageId=D;g.maybeGetMsgByProtocolMsgId=E;g.getUniqueMsgsByProtocolMsgIds=F;g.maybeGetMsgByExternalId=H;g.maybeGetMsgListByMsgId_I_KNOW_WHAT_I_AM_DOING=I;g.maybeGetMsgResultByProtocolMsgId=J;g.getMsgMapByProtocolMsgId=K;g.getSortOrderFromMsgId=L;g.maybeGetRevokedMsgByProtocolMsgId=N;g.checkIfMsgIsDeletedForMeOrRevoked=O;g.getMsgsByProtocolMsgId=P;g.updateSystemAck=Q;g.bulkUpdateSystemAck=R;g.maybeUpdateThreadMsgsForDeleteForMe=S;g.getMsgsFromOffset=U;g.getFutureProofMsgs=V;g.updateMediaId=aa;g.bulkUpdateMediaId=ba;g.updateDbMsgXMAExpiration=ca;g.bulkUpdateDbMsgXMAExpired=X;g.getMsgsNeedingRetroactiveReadReceiptsUpTo=Y;g.clearRetroactiveReadReceiptStatusFromMsgsUpTo=da;g.deleteDbMsg=ea;g.deleteMessages=fa;g.getMsgsByMsgIds=ga;g.getSpamMsgs=ha;g.fetchMessagesFromDbWithSortOrderMs=Z;g.calculateOldestAndNewestMsg=ia;g.getNextMsgIdNumberForThread=ja}),98);
__d("MAWDbThreadTxns",["MAWBridgeTypesCreators","MAWDbMsgTxns","MAWDexieTable","MAWFolderTypes","MAWIndexedDb","WAArrayZip","WALogger","WAResultOrError","WATimeUtils","emptyFunction"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["markCutoverThreadAsNotMigratedLocally failed because thread is already unmigrated"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["markThreadAsMigratedLocally failed because thread is already migrated"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["markThreadAsMigratedLocally failed to get the thread"]);j=function(){return a};return a}function a(a,b){return a.threads.get({deduplicationKey:b}).then(function(a){return a==null?d("WAResultOrError").makeError("missing"):d("WAResultOrError").makeResult(a)})}function k(a,b){return a.threads.get({jid:b}).then(function(a){return a==null?d("WAResultOrError").makeError("missing"):d("WAResultOrError").makeResult(a)})}function l(a,b){return a.threads.where("jid").anyOf(b).toArray()}function b(a,b){return a.threads.where("jid").startsWith(b+"@").first().then(function(a){return a==null?d("WAResultOrError").makeError("missing"):d("WAResultOrError").makeResult(a)})}function e(a,b){return a.threads.where("jid").equals(b)["delete"]().then(c("emptyFunction"))}function f(a,b){return a.participants.where("userJid").equals(b).toArray().then(function(b){b=b.map(function(a){return a.threadJid});return l(a,b)})}function m(a,b){return a.participants.where("userJid").anyOf(b).toArray().then(function(b){var c=new Map(),d=new Set();b.forEach(function(a){var b,e=a.userJid;b=(b=c.get(e))!=null?b:[];b.push(a.threadJid);c.set(e,b);d.add(a.threadJid)});return l(a,Array.from(d)).then(function(a){var b=a.reduce(function(a,b){a.set(b.jid,b);return a},new Map());return new Map(Array.from(c.entries()).map(function(a){var c=a[0];a=a[1];return[c,a.map(function(a){return b.get(a)}).filter(Boolean)]}))})})}function n(a,b,c){return(b==null?void 0:b.lastReadMsgReceiptSent)==null?d("MAWDexieTable").dexieResolve(!1):d("MAWDbMsgTxns").getSortOrderFromMsgId(a,b.lastReadMsgReceiptSent).then(function(a){return c.sortOrderMs==null||a==null?!1:c.sortOrderMs<=a})}function o(a,b){return a.threads.get({jid:b.threadJid}).then(function(c){return n(a,c,b)})}function p(a,b){return a.threads.where("jid").anyOf(b.map(function(a){return a.threadJid})).toArray().then(function(c){return d("MAWDexieTable").dexieAll(d("WAArrayZip").zip(b,c).map(function(b){var c=b[0];b=b[1];return n(a,b,c)}))})}function q(a,b,c){return a.threads.where("jid").anyOf(b).toArray().then(function(b){var e=b.filter(Boolean).map(function(a){return babelHelpers["extends"]({},a,{archived:!0,cannotReplyReason:c?"viewer_not_subscribed":a.cannotReplyReason,folder:d("MAWFolderTypes").FOLDER_ID.ARCHIVED})});return a.threads.bulkPut(e).then(function(){e.forEach(function(a){c&&d("WALogger").LOG(["[Occamadillo] Leaving a group thread\n          "+a.jid.toString()+", showing a VIEWER_NOT_SUBSCRIBED composer blocker"]),d("MAWIndexedDb").afterTransaction({tag:"ThreadUpdated",value:d("MAWBridgeTypesCreators").createBridgeUpdatedThread({cannotReplyReason:a.cannotReplyReason,folder:d("MAWFolderTypes").FOLDER_ID.ARCHIVED,threadJid:a.jid})})})})})}function r(a,b){return a.threads.where("jid").anyOf(b).toArray().then(function(b){var c=b.filter(Boolean).map(function(a){return babelHelpers["extends"]({},a,{cannotReplyReason:null})});return a.threads.bulkPut(c).then(function(){c.forEach(function(a){a={cannotReplyReason:null,threadJid:a.jid};d("MAWIndexedDb").afterTransaction({tag:"ThreadUpdated",value:d("MAWBridgeTypesCreators").createBridgeUpdatedThread(a)})})})})}function s(a,b){return a.threads.where("jid").anyOf(b).toArray().then(function(b){var c=b.filter(Boolean).map(function(a){return babelHelpers["extends"]({},a,{archived:!1,cannotReplyReason:a.cannotReplyReason==="viewer_not_subscribed"?a.cannotReplyReason:null,folder:d("MAWFolderTypes").FOLDER_ID.INBOX})});return a.threads.bulkPut(c).then(function(){c.forEach(function(a){d("MAWIndexedDb").afterTransaction({tag:"ThreadUpdated",value:d("MAWBridgeTypesCreators").createBridgeUpdatedThread({cannotReplyReason:a.cannotReplyReason,folder:d("MAWFolderTypes").FOLDER_ID.INBOX,threadJid:a.jid})})})})})}function t(a,b){return a.threads.where("jid").anyOf(b).toArray().then(function(b){var c=b.filter(Boolean).map(function(a){return babelHelpers["extends"]({},a,{cannotReplyReason:"viewer_not_subscribed"})});return a.threads.bulkPut(c).then(function(){c.forEach(function(a){var b={cannotReplyReason:"viewer_not_subscribed",threadJid:a.jid};d("WALogger").LOG(["[Occamadillo] User is unsubscribed from thread\n          "+a.jid.toString()+", showing a VIEWER_NOT_SUBSCRIBED composer blocker"]);d("MAWIndexedDb").afterTransaction({tag:"ThreadUpdated",value:d("MAWBridgeTypesCreators").createBridgeUpdatedThread(b)})})})})}function u(a,b){return k(a,b).then(function(b){if(!b.success){d("WALogger").WARN(j());return}b=b.value;if(b.isMigratedLocally===!0){d("WALogger").WARN(i());return}b=babelHelpers["extends"]({},b,{isMigratedLocally:!0});return a.threads.put(b).then(c("emptyFunction"))})}function v(a,b){if(b.isMigratedLocally===!1){d("WALogger").WARN(h());return d("MAWDexieTable").dexieResolve(b)}var c=babelHelpers["extends"]({},b,{isMigratedLocally:!1});return a.threads.put(c).then(function(){return c})}function w(a,b){return a.threads.put(b).then(c("emptyFunction"))}function x(a,b,c,e,f,g){c=c===(e==null?void 0:e.msgId);f=f===(g==null?void 0:g.msgId);return c&&f?d("MAWDexieTable").dexieResolve():w(a,babelHelpers["extends"]({},b,{newestMsg:g==null?void 0:g.msgId,newestMsgTs:f?b.newestMsgTs:(g==null?void 0:g.ts)==null?null:d("WATimeUtils").castUnixTimeToMillisTime(g.ts),oldestMsg:e==null?void 0:e.msgId}))}g.getThreadByDeduplicationKey=a;g.getThread=k;g.getThreads=l;g.getThreadPrimaryId=b;g.deleteThreadRow=e;g.getAllThreadsForUser=f;g.getAllThreadsForUsers=m;g.needsRetroactiveReadReceiptInThread=o;g.bulkNeedsRetroactiveReadReceiptInThread=p;g.archiveThreads=q;g.subscribeToThreads=r;g.unarchiveThreads=s;g.unsubscribeFromThreads=t;g.markCutoverThreadAsMigratedLocally=u;g.markCutoverThreadAsNotMigratedLocally=v;g.updateThread=w;g.updateThreadMsgsForUndefinedOldestOrNewestMsgs=x}),98);
__d("MAWDbMediaTxns",["MAWDbMsg","MAWDexieTable","MAWMediaUtils","MAWMsgType","WALogger","WAResultOrError","err"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["mediaId is null for media msg with msgId: ",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["mediaId is null for media msg with msgId: "," and msg type ",""]);i=function(){return a};return a}function a(a,b){return b==null?d("MAWDexieTable").dexieResolve():a.media.get({mediaId:b})}function j(a,b){return a.media.where("hashedPlaintextHash").equals(b).first()}function b(a,b){b=d("MAWMediaUtils").genHMACPlaintextHash(b);return j(a,b)}function e(a,b){b=b.map(function(a){return d("MAWMediaUtils").genHMACPlaintextHash(a)});return k(a,b)}function k(a,b){return a.media.where("hashedPlaintextHash").anyOf(b).toArray()}function f(a,b){return b==null?d("MAWDexieTable").dexieResolve():l(a,b).then(function(c){c=c==null?void 0:c.mediaId;return c!=null?a.media.get({mediaId:c}):a.media.get({objectId:b})})}function l(a,b){return b==null?d("MAWDexieTable").dexieResolve():a.mediaBackup.get({objectId:b})}function m(a,b){a=a.mediaBackup.where("objectId").anyOf(b).toArray();return a.then(function(a){return new Map(a.map(function(a){return[a.objectId,a]}))})}function n(a,b){if(b==null)return d("MAWDexieTable").dexieResolve();a=a.mediaBackup.where("msgId").equals(b).toArray();return a}function o(a,b){if(b.length===0)return d("MAWDexieTable").dexieResolve([]);b=b.filter(d("MAWDbMsg").isMediaMsg);var e=b.reduce(function(a,b){if(b.mediaId==null){d("WALogger").ERROR(i(),b.msgId,b.type);return a}return a.set(b.mediaId,b)},new Map());b=Array.from(e.keys());return r(a,b).then(function(a){var b=[];a.forEach(function(a){if(a==null)throw c("err")("Error missing media");var d=e.get(a.mediaId);if(d==null)throw c("err")("Error missing media");b.push([d,a])});return b})}function p(a,b){if(b.length===0)return d("MAWDexieTable").dexieResolve([]);b=b.filter(d("MAWDbMsg").isMediaMsg).map(function(a){var b=a.mediaId;if(b==null){d("WALogger").ERROR(h(),a.msgId);throw c("err")("mediaId is missing")}else return b});return r(a,b).then(function(a){var b=[];a.forEach(function(a){a!=null&&b.push(a)});return b})}function q(a,b){if(b.type===d("MAWMsgType").MSG_TYPE.DELETE_FOR_ME||d("MAWDbMsg").isMediaMsg(b)){var c=b.mediaId;return c==null?b.type===d("MAWMsgType").MSG_TYPE.DELETE_FOR_ME?d("MAWDexieTable").dexieResolve(d("WAResultOrError").makeResult()):d("MAWDexieTable").dexieResolve(d("WAResultOrError").makeError("missing")):a.media.get(c).then(function(a){return a==null?d("WAResultOrError").makeError("missing"):d("WAResultOrError").makeResult(a)})}else return d("MAWDexieTable").dexieResolve(d("WAResultOrError").makeResult())}function r(a,b){return a.media.bulkGet(b)}function s(a,b){var c=b.previewMediaIds!=null?r(a,b.previewMediaIds):d("MAWDexieTable").dexieResolve(),e=b.headerMediaId!=null?a.media.get(b.headerMediaId):d("MAWDexieTable").dexieResolve(),f=b.faviconMediaId!=null?a.media.get(b.faviconMediaId):d("MAWDexieTable").dexieResolve();a=b.defaultPreviewMediaId!=null?a.media.get(b.defaultPreviewMediaId):d("MAWDexieTable").dexieResolve();return d("MAWDexieTable").dexieAll([c,e,f,a]).then(function(a){var c=a[0],e=a[1],f=a[2];a=a[3];if(b.headerMediaId!=null&&e==null)return d("WAResultOrError").makeError("missing");if(b.faviconMediaId!=null&&f==null)return d("WAResultOrError").makeError("missing");if(c==null)return d("WAResultOrError").makeError("missing");var g=[];for(var c=c,h=Array.isArray(c),i=0,c=h?c:c[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var j;if(h){if(i>=c.length)break;j=c[i++]}else{i=c.next();if(i.done)break;j=i.value}j=j;if(j==null)return d("WAResultOrError").makeError("missing");else g.push(j)}return d("WAResultOrError").makeResult({defaultPreview:a,favicon:f,header:e,previews:g})})}function t(a,b,c){b=babelHelpers["extends"]({},b,c);return a.media.put(b)}g.maybeGetMediaFromMediaId=a;g.maybeGetMediaFromHashedPlaintextHash=j;g.maybeGetMediaFromPlaintextHash=b;g.maybeBulkGetMediaFromPlaintextHash=e;g.maybeBulkGetMediaFromHashedPlaintextHash=k;g.maybeGetMediaFromObjectId=f;g.maybeGetMediaBackupRowFromObjectId=l;g.maybeGetMediaBackupRowsFromObjectIds=m;g.maybeGetMediaBackupRowFromMsgId=n;g.getMsgMediaPairFromMsgs=o;g.getMediaFromMsgs=p;g.getAndCheckMediaFromMsg=q;g.bulkGetMedias=r;g.getMediaForXMA=s;g.updateMedia=t}),98);
__d("MAWDbXMATxns",["MAWDbMediaTxns","MAWDbMsg","MAWDbMsgTxns","MAWDbThreadTxns","MAWDexieTable","MAWJidUtils","MAWXMAUtils","WAResultOrError"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){return a.xma.bulkGet(b)}function b(a,b){return b==null?d("MAWDexieTable").dexieResolve():a.xma.get({xmaId:b})}function h(a,b){return b==null?d("MAWDexieTable").dexieResolve():a.xma.where("associatedMessageId").equals(b).first()}function i(a,b){return b==null?d("MAWDexieTable").dexieResolve():a.xma.where("externalId").equals(b.externalId).filter(function(a){return a.author===b.author&&a.threadJid===b.chat}).first()}function c(a,b){return i(a,b).then(function(b){return b==null?d("WAResultOrError").makeError("missing"):d("MAWDexieTable").dexieAll([d("MAWDbMediaTxns").getMediaForXMA(a,b),d("MAWDbMsgTxns").maybeGetMsg(a,b.associatedMessageId)]).then(function(a){var c=a[0];a=a[1];if(!c.success)return d("WAResultOrError").makeError("missing");c=c.value;var e=c.defaultPreview,f=c.favicon,g=c.header;c=c.previews;return d("WAResultOrError").makeResult({associatedMessage:a,defaultPreview:e,favicon:f,header:g,previews:c,xma:b})})})}function e(a,b){return h(a,b).then(function(b){if(b==null)return;return d("MAWDbMsgTxns").maybeGetMsg(a,b.msgId)})}function f(a,b){if(b.length===0)return d("MAWDexieTable").dexieResolve([]);b=b.filter(d("MAWDbMsg").isXMAMsg).map(function(a){return d("MAWJidUtils").maybeToProtocolMsgId(a.author,a.threadJid,a.externalId)}).filter(Boolean);b=b.map(function(b){return i(a,b)});return d("MAWDexieTable").dexieAll(b).then(function(a){return a.filter(Boolean)})}function j(a,b){return a.xma.where("associatedMessageId").anyOf(b).toArray().then(function(a){a=a.filter(function(a){return a.msgId!=null&&d("MAWXMAUtils").isXMAShare(a.targetType)});return a.reduce(function(a,b){return b.associatedMessageId!=null&&b.msgId!=null?a.set(b.associatedMessageId,b.msgId):a},new Map())})}function k(a,b){return a.xma.where("associatedMessageId").equals(b).first()}function l(a,b){return a.xma.where("associatedMessageId").equals(b).first().then(function(b){if(b==null)return;b=d("MAWJidUtils").maybeToProtocolMsgId(b.author,b.threadJid,b.externalId);if(b==null)return;return d("MAWDbMsgTxns").maybeGetMsgByProtocolMsgId(a,b)})}function m(a,b){return k(a,b).then(function(b){return b==null?d("WAResultOrError").makeResult():d("MAWDexieTable").dexieAll([d("MAWDbMediaTxns").getMediaForXMA(a,b),d("MAWDbMsgTxns").maybeGetMsg(a,b.associatedMessageId)]).then(function(a){var c=a[0];a=a[1];if(!c.success)return d("WAResultOrError").makeError("missing");c=c.value;var e=c.defaultPreview,f=c.favicon,g=c.header;c=c.previews;return d("WAResultOrError").makeResult({associatedMessage:a,defaultPreview:e,favicon:f,header:g,previews:c,xma:b})})})}function n(a,b,c){return d("MAWDbThreadTxns").getThread(a,c).then(function(c){if(!c.success)return;c=c.value;if(b==null)return d("MAWDexieTable").dexieResolve();c={author:b.author,chat:c.jid,externalId:b.externalId};return d("MAWDbMsgTxns").maybeGetMsgByProtocolMsgId(a,c)})}g.bulkGetXMAs=a;g.maybeGetXMAFromXMAId=b;g.maybeGetXMAFromAssociatedMsgId=h;g.maybeGetXMAFromProtocolMsgId=i;g.maybeGetXMAPayloadFromProtocolMsgId=c;g.getDbXMAMsgFromAssociatedMsgId=e;g.getXMAFromMsgs=f;g.getXMAMsgIdsFromAssociatedMsgIds=j;g.maybeGetDbXMAMsgByAssociatedMsgId=l;g.maybeGetXMAPayloadFromAssociatedMsgId=m;g.maybeGetAssociatedXMAMsg=n}),98);
__d("MAWUpdateThreadMsgMetadataApi",["MAWDbThreadTxns","MAWDexieTable","MAWIndexedDb","MAWTransactionMode","WALogger","WATimeUtils","emptyFunction"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["updated oldestMsg from id "," to id "," when oldestMsg is undefined"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["updated newestMsg from id "," to id ",", and newestMsgTs from "," to "," when newestMsg is undefined"]);i=function(){return a};return a}a=d("MAWIndexedDb").makeMsgrTransactor({threads:d("MAWTransactionMode").READWRITE},"updateThreadMsgMetadataApiTransactor",function(a){return function(b,e,f,g,j){var k=e===(f==null?void 0:f.msgId),l=g===(j==null?void 0:j.msgId);if(k&&l)return d("MAWDexieTable").dexieResolve();l||d("WALogger").ERROR(i(),g,j==null?void 0:j.msgId,b.newestMsgTs,(j==null?void 0:j.ts)==null?null:d("WATimeUtils").castUnixTimeToMillisTime(j.ts));k||d("WALogger").ERROR(h(),e,f==null?void 0:f.msgId);return d("MAWDbThreadTxns").updateThreadMsgsForUndefinedOldestOrNewestMsgs(a,b,e,f,g,j).then(c("emptyFunction"))}});b=a;g["default"]=b}),98);
__d("MAWDbPendingStanza",["WAAssertUnreachable"],(function(a,b,c,d,e,f,g){"use strict";var h="revoked",i="deleteForMe",j="deleteThread";b="Revoked";d="DeleteForMe";e="DeleteThread";f={DELETE_FOR_ME:d,DELETE_THREAD:e,REVOKED:b};function a(a){switch(a){case"Revoked":return h;case"DeleteForMe":return i;case"DeleteThread":return j;default:return c("WAAssertUnreachable")(a)}}g.PENDING_REVOKED=h;g.PENDING_DELETE_FOR_ME=i;g.REVOKED=b;g.DELETE_FOR_ME=d;g.PENDING_TYPE=f;g.getPendingSuffix=a}),98);
__d("MAWEBBackendQPLUtils",["MAWEBSwitch","MAWQplProxy","gkx","hashString","qpl"],(function(a,b,c,d,e,f,g){"use strict";function h(a){return c("hashString")(a)}function a(a,b){if(c("gkx")("23946")!==!0)return;var e=h(b);d("MAWQplProxy").startQplUserFlow(c("qpl")._(521485625,"1876"),{bool:{eb_switch:c("MAWEBSwitch").isEnabled(),is_retroactive_backups_upload:a},string:{trace_id:b}},e)}function b(a,b,e){if(c("gkx")("23946")!==!0||a==null)return;a=h(a);d("MAWQplProxy").sendQplPointThroughBridge(c("qpl")._(521485625,"1876"),b,{annotations:e,instanceKey:a})}function e(a,b,e){if(c("gkx")("23946")!==!0||a==null)return;a=h(a);d("MAWQplProxy").sendQPLFailThroughBridge(c("qpl")._(521485625,"1876"),b,e,a)}g.getQplInstanceKey=h;g.startEBBackupUploadQplUserFlow=a;g.addPointEBBackupUpload=b;g.endFailEBBackupUpload=e}),98);
__d("MAWEBUploadMessageUtils",["I64","MAWDbMsg","MAWExtractMsFromExternalId","WALogger"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[sortOrder] externalId is not a valid int64"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["[sortOrder] Timestamp bits in externalId not valid"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["[sortOrder] ExternalId is not present"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["echoOverrideMessageSortOrder called without ID"]);l=function(){return a};return a}function a(a){var b=a.revokedExternalId!=null?a.revokedExternalId:a.externalId;b==null&&d("WALogger").ERROR(l());b=(h||(h=d("I64"))).of_string_opt(b);if(a.serverTs==null){if(a.sortOrderMs!=null)return a.sortOrderMs;b==null&&d("WALogger").WARN(k());var c=b==null?null:d("MAWExtractMsFromExternalId").extractMsFromExternalId(b);return d("MAWDbMsg").getCanonicalTsFromMsg(a)*1e3+((c=c)!=null?c:0)}if(b!=null){c=d("MAWExtractMsFromExternalId").extractMsFromExternalId(b);if(c!=null){b=a.originalTs!=null?a.originalTs:a.serverTs;return Number(b)*1e3+c}else d("WALogger").WARN(j())}else d("WALogger").WARN(i());return d("MAWDbMsg").getSortOrderWithFallback(a)}g.echoOverrideMessageSortOrder=a}),98);
__d("MAWEncryptedBackupCacheManager",[],(function(a,b,c,d,e,f){"use strict";var g=new Map(),h=new Map(),i=new Map();function a(a,b){h.set(a,{cache:b,status:"restoring"})}function b(a){a.forEach(function(a){var b=h.get(a);b!=null&&h.set(a,{cache:b.cache,status:"done"})})}function c(a){a=h.get(a);if(a!=null)return a.status;else return"none"}function d(a){return(a=h.get(a))==null?void 0:a.cache}function e(a){return h["delete"](a)}function j(a,b){var c=g.get(a)||new Set();c.add(b);g.set(a,c)}function k(a,b){a=g.get(a);return a!=null?a==null?void 0:a.has(b):!1}function l(a,b){a=g.get(a);a!=null&&a["delete"](b)}function m(a){return h.has(a)}function n(a){return i.has(a)}function o(a){return i.get(a)}function p(a){n(a)&&i["delete"](a)}function q(a,b){i.set(a,b)}f.restoredCache=h;f.addMsgEntryToRestoredCache=a;f.setRestoredCacheStatusAsDone=b;f.getRestoredCacheStatus=c;f.getRestoredCache=d;f.removeFromRestoredCache=e;f.addMsgEntryToReuploadCache=j;f.checkForMsgEntryInReuploadCache=k;f.removeMsgEntryFromReuploadCache=l;f.peekRestoreCache=m;f.peekPendingStanzaCache=n;f.getPendingStanzaCacheValue=o;f.removePendingStanzaCacheValue=p;f.addPendingStanzaToPendingStanzaCache=q}),66);
__d("WAProtocolMsgId",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){return a.externalId===b.externalId&&a.author===b.author&&a.chat===b.chat}f.equals=a}),66);
__d("EBUploadMessages",["$InternalEnum","EchoBackupCompareUtils","EchoMessage","LSDataTraceCheckPoint","LSDataTraceType","LSEBPayloadSerializerError","LSIntEnum","LSMEBTaskCreationSource","MAWBridge","MAWBridgeEventTransmitter","MAWBridgeTrace","MAWBridgeUpload","MAWConstants","MAWDbMsg","MAWDbMsgTxns","MAWDbMsgUtil","MAWDbPendingStanza","MAWDbThreadTxns","MAWDexieTable","MAWEBBackendQPLUtils","MAWEBSwitch","MAWEBUploadMessageUtils","MAWEBUploadTrackingUtils","MAWEncryptedBackupCacheManager","MAWHMACKey","MAWHandlePendingStanzasInRestoreV2","MAWIndexedDb","MAWMediaUtils","MAWMsgType","MAWQplProxy","MAWTraceUtils","MAWTransactionMode","Promise","WAGlobals","WAJids","WALogger","WAProtocolMsgId","WAStanzaUtils","WATimeUtils","asyncToGeneratorRuntime","cr:2172","cr:5916","gkx","qpl","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["",""]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["",""]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] Cannot proceed with encodeAndSendEchoMessage: Encrypted Backups are not enabled"]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] Cannot proceed with encodeAndSendEchoMessage: Encrypted Backups are not enabled"]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] ",""]);p=function(){return a};return a}function q(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] attachmentContextArray is null, type: ",""]);q=function(){return a};return a}function r(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] Duplicated upload stopped by cache, extId: ",""]);r=function(){return a};return a}function s(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] extId is null, source: ",""]);s=function(){return a};return a}function t(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] threadJid is null for pendingStanza"]);t=function(){return a};return a}function u(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] externalId is null for pendingStanza"]);u=function(){return a};return a}function v(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] pendingStanzaMessageType: "," not supported"]);v=function(){return a};return a}var w=c("requireDeferred")("EchoSerializationFailureFalcoEvent").__setRef("EBUploadMessages"),x=c("requireDeferred")("EchoSerializationSuccessFalcoEvent").__setRef("EBUploadMessages");function a(a){return a==null?[]:a.filter(Boolean).map(function(a){if(a!=null)return d("MAWDbMsg").toMsgId(a)}).filter(Boolean)}var y=b("$InternalEnum").Mirrored(["FATAL","WARN"]);function z(a,b){return a.messages.bulkGet(b).then(function(a){return a.filter(Boolean)})}function A(a,b){return a.pendingStanzas.bulkGet(b).then(function(a){return a.filter(Boolean).map(function(a){var b=a.pendingContent.type;if(b==null||b!==d("MAWDbPendingStanza").PENDING_TYPE.REVOKED&&b!==d("MAWDbPendingStanza").PENDING_TYPE.DELETE_FOR_ME){d("WALogger").WARN(v(),b);return}b=a.pendingContent.content.externalId;if(b==null){d("WALogger").WARN(u());return}b=a.pendingContent.content.threadJid;if(b==null){d("WALogger").WARN(t());return}d("MAWHandlePendingStanzasInRestoreV2").issuePointQueryForPendingStanza(a)})}).then(function(a){return[]})}function B(a,b){return a.reactions.bulkGet(b).then(function(b){b=b.filter(Boolean).map(function(b){return d("MAWDbThreadTxns").getThread(a,b.threadJid).then(function(e){var f=e.success?e.value:null;if(f!=null&&f.chatId!=null){e=b.reactToAuthor;e=e===d("WAGlobals").getMyUserJid()?d("WAJids").AUTHOR_ME:e;return d("MAWDbMsgTxns").maybeGetMsgByExternalId(a,b.reactToExternalId,f.jid,e).then(function(a){if(a==null&&!d("MAWEncryptedBackupCacheManager").peekRestoreCache(b.reactToExternalId)){var e=d("WAJids").threadIdForChatJid(f.jid);d("MAWEncryptedBackupCacheManager").addMsgEntryToReuploadCache(f.jid,b.reactToExternalId);d("MAWBridgeEventTransmitter").issuePointQueryOutsideTxn(b.reactToExternalId,e,void 0,c("LSMEBTaskCreationSource").POINT_QUERY_FROM_EB,f.jid)}return a})}})});return d("MAWDexieTable").dexieAll(b).then(function(a){return a.filter(Boolean)})})}function C(a,b){b=b.filter(Boolean);return a.xma.bulkGet(b).then(function(b){b=b.map(function(a){return a==null?void 0:a.associatedMessageId}).filter(Boolean);return a.messages.where("msgId").anyOf(b).toArray()})}function D(a,c,e){c.forEach(function(a){if(a.uploadTrackingInstanceKey!=null)if(b("cr:2172")!=null)d("MAWEBUploadTrackingUtils").addPointWorkerOnly(a.uploadTrackingInstanceKey,"fire_ebls_upload");else if(T()){var c;d("MAWEBUploadTrackingUtils").addPointWorkerOnly((c=a.uploadTrackingInstanceKey)!=null?c:0,"fire_gql_upload_ui_event")}else{d("MAWEBUploadTrackingUtils").addPointWorkerOnly((c=a.uploadTrackingInstanceKey)!=null?c:0,"fire_ui_event")}});if(b("cr:2172")!=null)return b("cr:2172").uploadMessagesFromWorker(c);else return d("MAWBridge").getBridge().sendAndReceive("event","uploadMessagesToBackup",{checkPoint:a,messages:c,qpl:e})}function E(a,b,e){var f=[],g=[];if(a!=null){var h=c("gkx")("23946"),i=c("qpl")._(521485625,"1876");b.forEach(function(b){var c=b.checkPoint;b=b.pointName;h&&b!=null&&f.push({action:{name:b,type:"point"},annotations:null,event:i,instanceKey:d("MAWEBBackendQPLUtils").getQplInstanceKey(a),timestamp:d("MAWQplProxy").performanceAbsoluteNow()});g.push(d("MAWBridgeTrace").createBridgeTraceRecordCheckpointData((j||(j=d("LSIntEnum"))).ofNumber(c),(b=e)!=null?b:a,void 0,!1,-1,void 0))})}return{checkPointArray:g,qplArray:f}}function F(a,b,c,e,f,g,h){var i=b==null?void 0:b.externalId;if(i==null){d("WALogger").ERROR(s(),h);return null}if(d("MAWEncryptedBackupCacheManager").getRestoredCacheStatus(i)==="done"){var j=d("EchoBackupCompareUtils").buildEchoDocCacheValue(a);j=d("EchoBackupCompareUtils").echoEquals(j,d("MAWEncryptedBackupCacheManager").getRestoredCache(i));d("MAWEncryptedBackupCacheManager").removeFromRestoredCache(i);if(j){d("WALogger").LOG(r(),i);L("success",f,i,"construct_echo_success_duplicate_message",{string:{errorMsg:"not unique from cache"}});return null}}if(b!=null&&c!=null){j=window.performance.now();var k=d("EchoMessage").encodeEchoMessage(a),l=window.performance.now();g=g==null?void 0:g.get(i);g==null&&d("MAWMediaUtils").getMediaTypeFromMsgType(b.type)!=null&&h==="upload_queue"&&d("WALogger").ERROR(q(),b.type);L("point",f,b.externalId,"construct_echo_success");H(b.externalId,c);return d("MAWBridgeUpload").createBridgeUploadMessage({actionType:1,attachmentContextArray:g,authTs:b.serverTs,echoDocument:k,echoEncodingLatencyNs:(l-j)*1e6,errorCode:null,errorMessage:null,messageId:i,messageType:b.type,productType:"msgr",protoMsg:e,sortOrderMs:d("MAWEBUploadMessageUtils").echoOverrideMessageSortOrder(b),threadId:a.threadId,traceId:c,uploadTrackingInstanceKey:K(f,b.externalId)})}return null}function G(a,b){a!=null&&void w.load().then(function(c){return c.log(function(){return{message_id:a,trace_id:b}})})}function H(a,b){a!=null&&void x.load().then(function(c){return c.log(function(){return{message_id:a,trace_id:b}})})}function I(a,b,c){if(a==null||b==null)return c;else{b=K(b,a.externalId);if(b!=null)return b.toString();else return c}}function J(a,e,f,g,h){var i=new Map();a.forEach(function(a){return i.set(a.dbMsg.externalId,a)});N(g,a.map(function(a){return{extId:a.dbMsg.externalId,type:a.dbMsg.type}}),"encode_and_send_echo_message",f,h);return O(a).then(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.map(function(a){var b,k=i.get(a.externalId)||{dbMsg:null,traceId:null},l=k.dbMsg;k=k.traceId;b=l!=null?(b=e==null?void 0:e.find(function(a){var b=a.originalMsgProtocolId,c=d("MAWDbMsgUtil").getProtocolMsgIdFromDbMsg(l);if(c==null)return!1;if(a.backupActionType===2&&b!=null){var e=b.author,f=b.chat;b=b.externalId;if(e!=null&&f!=null&&b!=null)return d("WAProtocolMsgId").equals({author:e,chat:f,externalId:b},c)}return d("WAProtocolMsgId").equals(a.msgId,c)}))!=null?b:void 0:void 0;var m=a.echoMessage,n=[],o=I(l,f,k);if(a.maybeErrorDetail!=null){a=a.maybeErrorDetail;if(l!=null&&k!=null)if(a.uploadErrorType===y.WARN||a.errorCode===c("LSEBPayloadSerializerError").MEDIA_INFO_INVALID){var q;q=a.uploadErrorType===y.WARN?"possible error when constructing echo message: "+((q=a.errorMsg)!=null?q:""):"media info invalid thrown from constructEchoMessage, error msg: "+((q=a.errorMsg)!=null?q:"");d("WALogger").WARN(p(),q);L("success",f,l.externalId,"construct_echo_success_media/xma_warn/error",{string:{errorMsg:q}});G(l.externalId,k)}else{q=d("MAWBridgeUpload").createBridgeUploadMessage({actionType:1,authTs:l.serverTs,echoDocument:null,echoEncodingLatencyNs:null,errorCode:a.errorCode,errorMessage:a.errorMsg,messageId:(q=m==null?void 0:m.xOfflineThreadingId)!=null?q:"0",messageType:l.type,protoMsg:b,sortOrderMs:d("MAWEBUploadMessageUtils").echoOverrideMessageSortOrder(l),threadId:(q=m==null?void 0:m.threadId)!=null?q:"0",traceId:k,uploadTrackingInstanceKey:K(f,l.externalId)});L("fail",f,l.externalId,"construct_echo_failed",{string:{errorMsg:(a=a.errorMsg)!=null?a:"null error msg, msg type: "+l.type}});H(l.externalId,k);return{bridgeUploadMessage:q,toCheckPoint:null,toQPL:null}}return null}if((m==null?void 0:m.xOfflineThreadingId)==null){if(l!=null&&k!=null){q=d("MAWBridgeUpload").createBridgeUploadMessage({actionType:1,authTs:l.serverTs,echoDocument:null,echoEncodingLatencyNs:null,errorCode:c("LSEBPayloadSerializerError").OTID_NOT_FOUND_IN_ACT_MESSAGES,errorMessage:null,messageId:"0",messageType:l.type,protoMsg:b,sortOrderMs:d("MAWEBUploadMessageUtils").echoOverrideMessageSortOrder(l),threadId:(a=m==null?void 0:m.threadId)!=null?a:"0",traceId:k,uploadTrackingInstanceKey:K(f,l.externalId)});L("fail",f,l.externalId,"construct_echo_failed",{string:{errorMsg:"oitd not found"}});H(l.externalId,k);return{bridgeUploadMessage:q,toCheckPoint:null,toQPL:null}}return null}else{a=F(m,l,k,b,f,g,h);if(a==null)return null;n.push({checkPoint:c("LSDataTraceCheckPoint").LABYRINTH_WEB_UPLOAD_ISSUE_MESSAGE_UPLOAD_UI_EVENT,pointName:"issue_message_upload_ui_event"});q=E(k,n,o);m=q.checkPointArray;b=q.qplArray;d("MAWTraceUtils").startNewTrace((j||(j=d("LSIntEnum"))).ofNumber(c("LSDataTraceType").ENCRYPTED_BACKUPS_UPLOAD),d("MAWTraceUtils").CONTEXT_BACKUP_UPLOAD,o);return{bridgeUploadMessage:a,toCheckPoint:m,toQPL:b}}}).filter(Boolean);while(b.length>0){var k=[],l=[],m=[];while(k.length<d("MAWConstants").BRIDGE_UPLOAD_BATCH_SIZE&&b.length>0){var n=b.shift();n!=null&&(k.push(n.bridgeUploadMessage),n.toCheckPoint!=null&&m.push.apply(m,n.toCheckPoint),n.toQPL!=null&&l.push.apply(l,n.toQPL))}yield D(m,k,l)}return a});return function(b){return a.apply(this,arguments)}}())}function K(a,b){return a.get(b)}function L(a,b,c,e,f){b=K(b,c);if(b!=null)switch(a){case"success":d("MAWEBUploadTrackingUtils").endSuccessWorkerOnly(b,e,f);break;case"fail":d("MAWEBUploadTrackingUtils").endFailWorkerOnly(b,e,f);break;case"point":d("MAWEBUploadTrackingUtils").addPointWorkerOnly(b,e,f);break}}function M(a){var b=new Set(),c=[];a.forEach(function(a){var e=a.externalId+"|"+d("WAJids").threadIdForChatJid(a.threadJid)+"|"+a.author;d("MAWEncryptedBackupCacheManager").getRestoredCacheStatus(a.externalId)!=="restoring"&&!b.has(e)&&(b.add(e),c.push(a))});return c}function e(a,e,f,g,h,j,k){if(!c("MAWEBSwitch").isEnabled()){d("WALogger").LOG(o());h.forEach(function(a,b){d("MAWEBUploadTrackingUtils").endSuccessWorkerOnly(a,"upload_tracking_cancelled_eb_turned_off_upload",{string:{externalId:b,from:"uploadUniqueMessage"}})});return(i||(i=b("Promise"))).resolve()}a=M(a).filter(function(a){return d("MAWEBUploadTrackingUtils").isUploadSupported(a)}).map(function(a){var b;b=(b=f)!=null?b:!1;L("point",h,a.externalId,"construct_echo_start",{bool:{isMedia:d("MAWMsgType").isMAWSupportedMediaType(a.type),isRetroactiveBackupsUpload:b},string:{msgType:a.type}});b=((b=K(h,a.externalId))!=null?b:d("MAWTraceUtils").createTraceId()).toString();d("MAWEBBackendQPLUtils").startEBBackupUploadQplUserFlow(f,b);f!=null&&f&&d("MAWEBBackendQPLUtils").addPointEBBackupUpload(b,"retroactive_backup_upload_started");return{lastRetryTs:d("WATimeUtils").millisTime(),msg:a,retriedTimes:0,traceId:b}});return Q(a.filter(function(a){return a.msg.type!==d("MAWMsgType").MSG_TYPE.RAVEN}).map(function(a){var b=a.msg.quoteExternalId;if(b!=null)return{dbMsg:a.msg,quotedMsg:e==null?void 0:e.get(b),traceId:a.traceId};else return{dbMsg:a.msg,traceId:a.traceId}}),g,j,h,new Map(),k).then(function(){return(i||(i=b("Promise"))).resolve()})}function N(a,b,c,d,e){e===void 0&&(e="upload_queue");if(e!=="upload_queue")return;e=a.size;var f=b.length;for(b of b)if(!a.has(b.extId)){var g;b.type!=null?g={mismatch_msg_type:b.type,missing_extId:b.extId}:g={missing_extId:b.extId};L("point",d,b.extId,c,{"int":{dbMsgsSize:f,uploadEntitySize:e},string:g})}}function f(a,e,f,g){if(!c("MAWEBSwitch").isEnabled()){d("WALogger").LOG(n());e.forEach(function(a,b){d("MAWEBUploadTrackingUtils").endSuccessWorkerOnly(a,"upload_tracking_cancelled_eb_turned_off_upload",{string:{externalId:b,from:"uploadMessageFromUploadQueue"}})});return(i||(i=b("Promise"))).resolve()}return Q(a.filter(function(a){var b=d("MAWEBUploadTrackingUtils").isUploadSupported(a)&&a.type!==d("MAWMsgType").MSG_TYPE.RAVEN;b||L("success",e,a.externalId,"upload_not_supported",{string:{msgType:a.type}});return b}).map(function(a){var b;b=((b=K(e,a.externalId))!=null?b:d("MAWTraceUtils").createTraceId()).toString();L("point",e,a.externalId,"construct_echo_start");return{dbMsg:a,traceId:b}}),void 0,f,e,g,"upload_queue")}var O=d("MAWIndexedDb").makeMsgrTransactor({editMsgHistory:(h=d("MAWTransactionMode")).READONLY,media:h.READONLY,mediaBackup:h.READONLY,messages:h.READONLY,reactions:h.READONLY,receiverFetchInfo:h.READONLY,threads:h.READONLY,xma:h.READONLY},"constructEchoMessage",function(a){return function(){for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b("cr:5916").constructEchoMessage.apply(b("cr:5916"),[a].concat(d))}});function P(a,b,e,f,g){b=z(a,b);c("gkx")("2251")?A(a,e):d("MAWDexieTable").dexieResolve();e=B(a,f);f=C(a,g);return d("MAWDexieTable").dexieAll([b,e,f]).then(function(a){return a.flat()})}function Q(a,e,f,g,h,n){var o=new Map();N(h,a.map(function(a){return{extId:a.dbMsg.externalId,type:a.dbMsg.type}}),"construct_echo_msg",g,n);a.forEach(function(a){var b=a.dbMsg;a=a.traceId;d("MAWEBBackendQPLUtils").addPointEBBackupUpload(a,"echo_message_upload_begin",{string:{message_type:b.type}});var f=d("MAWQplProxy").startQplUserFlow(c("qpl")._(521475102,"868"),{bool:{eb_switch:c("MAWEBSwitch").isEnabled()},"int":{sort_order:b.sortOrderMs},string:{hashed_msgid:R(b.externalId),message_id:b.externalId,message_type:b.type.toString(),org_trace_id:e==null?void 0:e.get(b.externalId),trace_id:a}});o.set(b.externalId,{constructEchoFlow:f,traceId:a})});a=J(a,f,g,h,n)["catch"](function(a){a="[labyrinth_web] Error while encode and upload message to backup: "+String(a);d("WALogger").ERROR(m(),a);for(var e of o.values())d("MAWEBBackendQPLUtils").endFailEBBackupUpload(e.traceId,"echo_message_upload_failure",{string:{error_message:a}}),d("MAWTraceUtils").recordFailureAndFlushForTraceId(e.traceId,(j||(j=d("LSIntEnum"))).ofNumber(c("LSDataTraceCheckPoint").LABYRINTH_WEB_ECHO_MESSAGE_UPLOAD_FAILURE),[],a),e.constructEchoFlow.endFail("serialisation_failure");return(i||(i=b("Promise"))).resolve()});return a.then(function(a){a==null?void 0:a.forEach(function(a){var b;b=(b=a.echoMessage)==null?void 0:b.messageId;if(b!=null&&o.has(d("WAStanzaUtils").toStanzaId(b))){var e;b=o.get(d("WAStanzaUtils").toStanzaId(b))||{constructEchoFlow:null,traceId:null};var f=b.constructEchoFlow;b=b.traceId;e=a==null?void 0:(e=a.maybeErrorDetail)==null?void 0:e.uploadErrorType;a=a==null?void 0:(a=a.maybeErrorDetail)==null?void 0:a.errorMsg;if(e!=null)switch(e){case y.WARN:a!=null&&d("WALogger").WARN(l(),a);f==null?void 0:f.endSuccess({bool:{is_skipped:!0}});b!=null&&(d("MAWEBBackendQPLUtils").addPointEBBackupUpload(b,"echo_message_upload_invalid_request"),d("MAWTraceUtils").recordInvalidUploadRequestAndFlushTrace(b,(j||(j=d("LSIntEnum"))).ofNumber(c("LSDataTraceCheckPoint").LABYRINTH_WEB_ECHO_MESSAGE_UPLOAD_INVALID_REQUEST),[]));break;case y.FATAL:a=(e=a)!=null?e:"[labyrinth_web] unknown error in the upload message flow";d("WALogger").ERROR(k(),a);b!=null&&(d("MAWEBBackendQPLUtils").endFailEBBackupUpload(b,"echo_message_upload_failure",{string:{error_message:a}}),d("MAWTraceUtils").recordFailureAndFlushForTraceId(b,(j||(j=d("LSIntEnum"))).ofNumber(c("LSDataTraceCheckPoint").LABYRINTH_WEB_ECHO_MESSAGE_UPLOAD_FAILURE),[],a));f==null?void 0:f.endFail("serialisation_failure");break}else f==null?void 0:f.endSuccess()}});return(i||(i=b("Promise"))).resolve()})}function R(a){if(a==null)return"";var b=d("WAGlobals").getHMACKey();return d("MAWHMACKey").hmacTweetNaCl(a,b)}function S(a,b){var e=d("MAWTraceUtils").startNewTrace((j||(j=d("LSIntEnum"))).ofNumber(c("LSDataTraceType").ENCRYPTED_BACKUPS_UPLOAD),d("MAWTraceUtils").CONTEXT_BACKUP_UPLOAD);d("MAWTraceUtils").recordCheckpointForTrace(e,j.ofNumber(c("LSDataTraceCheckPoint").LABYRINTH_WEB_ECHO_MESSAGE_UPLOAD_BEGIN),[d("MAWTraceUtils").getTagForMsgType(a.type)],!1);d("MAWIndexedDb").afterTransaction({tag:"UploadMessage",value:d("MAWBridgeUpload").createBridgeUploadMessage({actionType:2,authTs:a.serverTs,echoDocument:null,echoEncodingLatencyNs:null,errorCode:null,errorMessage:null,messageId:a.externalId,messageType:a.type,sortOrderMs:d("MAWEBUploadMessageUtils").echoOverrideMessageSortOrder(a),threadId:d("WAJids").threadIdForChatJid(b),traceId:e,uploadTrackingInstanceKey:null})})}function T(){return c("gkx")("381")}g.convertStringMsgIdtoMsgId=a;g.UploadErrorType=y;g.deduplicateMessageArray=M;g.uploadUniqueMessage=e;g.logIfExtIdsNotInAttachmentContextArrayMap=N;g.uploadMessageFromUploadQueue=f;g.getMessagesBackupForUpload=P;g.sendDeleteEchoMessage=S}),98);
__d("MAWBridgeThread",["MAWTimeUtils","WAJids","WATimeUtils"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,c,e,f){var g=d("WAJids").switchOnMsgrChatJidType(a.jid,{group:function(a){return!0},user:function(a){return!1}});return{authoritativeThreadKey:c,cannotReplyReason:a.cannotReplyReason,clientThreadKey:b,description:e,folder:a.folder,isGroup:g,jid:a.jid,lastActivityTs:d("MAWTimeUtils").ensureValidMillisTime(a.snippetMsgTs!=null&&d("WATimeUtils").fromMillisTime(a.snippetMsgTs)!==0?a.snippetMsgTs:f)||d("WATimeUtils").castToMillisTime(0),lastReadTs:d("MAWTimeUtils").ensureValidMillisTime(a.lastReadMsgTs)||d("WATimeUtils").castToMillisTime(0),muteExpireTimeMs:(c=a.muteExpireTimeMs)!=null?c:0}}function b(a,b,c,d){return{lastActivityTimestampMs:c,lastReadWatermarkTs:b,markUnread:d,threadJid:a}}g.createBridgeThread=a;g.createBridgeThreadTimestampsUpdated=b}),98);
__d("MAWGetOrCreateThreadTxns",["MAWAdminMsgTxns","MAWBridgeThread","MAWBridgeTypesCreators","MAWDbMsgTxns","MAWDbThread","MAWDexieTable","MAWFolderTypes","MAWIndexedDb","MAWQplProxy","MAWWriteBulkWriteIncomingAdminMsgTxns","WATimeUtils","getErrorSafe","qpl"],(function(a,b,c,d,e,f,g){"use strict";function h(a,b){if(a!=null&&b!=null){var c=d("WATimeUtils").fromMillisTime(a),e=d("WATimeUtils").fromMillisTime(b);return d("WATimeUtils").castToMillisTime(Math.max(c,e))}return(c=a)!=null?c:b}function i(a,b){return a.threads.get({jid:b})}function j(a,b){return a.threads.where("jid").anyOf(b).toArray().then(function(a){var c=new Map();for(var a=a,d=Array.isArray(a),e=0,a=d?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var f;if(d){if(e>=a.length)break;f=a[e++]}else{e=a.next();if(e.done)break;f=e.value}f=f;c.set(f.jid,f)}return b.map(function(a){return c.get(a)})})}function a(a,b,e){var f=b.deduplicationKey,g=b.jid;f=b.deduplicationKey!=null?a.threads.get({deduplicationKey:f}):d("MAWDexieTable").dexieResolve();return d("MAWDexieTable").dexieAll([f,i(a,g)]).then(function(f){var g=f[0];f=f[1];if(g!=null)return{created:!1,thread:g};if(f==null){e!=null&&d("MAWQplProxy").sendQplPointThroughBridge(c("qpl")._(25313175,"1551"),"create-1-1-thread-start",{instanceKey:e});return l(a,b,e).then(function(a){return{created:!0,thread:a}})}else return o(a,b,f).then(function(a){return{created:!1,thread:a}})})}function b(a,b){var c=b.map(function(a){a=a.deduplicationKey;return a}).filter(function(a){return a!=null});c=a.threads.where("deduplicationKey").anyOf(c).toArray();return d("MAWDexieTable").dexieAll([c,j(a,b.map(function(a){a=a.jid;return a}))]).then(function(c){var e=c[0];c=c[1];var f=new Map();for(var e=e,g=Array.isArray(e),h=0,e=g?e:e[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var i;if(g){if(h>=e.length)break;i=e[h++]}else{h=e.next();if(h.done)break;i=h.value}i=i;i.deduplicationKey!=null&&f.set(i.deduplicationKey,i)}var j={};i=[];h=[];for(g=c.entries(),e=Array.isArray(g),c=0,g=e?g:g[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var k,l;if(e){if(c>=g.length)break;l=g[c++]}else{c=g.next();if(c.done)break;l=c.value}l=l;var n=l[0];l=l[1];k=(k=b[n])==null?void 0:k.deduplicationKey;if(k!=null){var o=f.get(k);if(o!=null){j[k]={created:!1,thread:o};continue}}l==null?i.push(b[n]):h.push({params:b[n],thread:l})}return d("MAWDexieTable").dexieAll([i.length?m(a,i):d("MAWDexieTable").dexieResolve([]),h.length?p(a,h):d("MAWDexieTable").dexieResolve([])]).then(function(a){var c=a[0];a=a[1];for(var c=c,d=Array.isArray(c),e=0,c=d?c:c[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var f;if(d){if(e>=c.length)break;f=c[e++]}else{e=c.next();if(e.done)break;f=e.value}f=f;j[f.jid]={created:!0,thread:f}}for(f=a,e=Array.isArray(f),d=0,f=e?f:f[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){if(e){if(d>=f.length)break;c=f[d++]}else{d=f.next();if(d.done)break;c=d.value}a=c;j[a.jid]={created:!1,thread:a}}return b.map(function(a){var b=a.deduplicationKey;a=a.jid;if(b!=null){return(b=j[b])!=null?b:j[a]}return j[a]})})})}function k(a){var b=a.authoritativeThreadKey,c=a.clientThreadKey,e=a.createTs,f=a.deduplicationKey,g=a.folder,h=a.jid;a=a.lastActivityTimestamp;var i=d("WATimeUtils").millisTime();e=(a=(a=a)!=null?a:e)!=null?a:i;i={authoritativeThreadKey:b!=null?b:void 0,deduplicationKey:f,folder:g!=null?g:d("MAWFolderTypes").FOLDER_ID.INBOX,jid:h,lastReadMsg:null,lastReadMsgReceiptSent:null,newestMsg:null,newestMsgTs:e,oldestMsg:null,optimisticThreadKey:(a=c)!=null?a:void 0,threadOrder:d("MAWDbThread").craftThreadOrder(e,h)};return i}function l(a,b,e){var f=b.authoritativeThreadKey,g=b.description,h=b.skipVerifyThread,i=k(b);return a.threads.add(i).then(function(b){b=babelHelpers["extends"]({},i,{chatId:b});h!==!0&&d("MAWIndexedDb").afterTransaction({tag:"VerifyThreadExists",value:d("MAWBridgeThread").createBridgeThread(b,b.optimisticThreadKey,f,g,i.newestMsgTs)});e!=null&&d("MAWQplProxy").sendQplPointThroughBridge(c("qpl")._(25313175,"1551"),"write-e2ee-admin-msg-in-new-thread",{instanceKey:e});return d("MAWAdminMsgTxns").writeE2EEThreadDescriptionMsg(a,b,e)})["catch"](function(a){a=c("getErrorSafe")(a);a.message="Error creating thread: "+a.message;throw a})}function m(a,b){var e=b.map(k);return a.threads.bulkAdd(e,{allKeys:!0}).then(function(c){c=c.map(function(a,c){return{data:babelHelpers["extends"]({},e[c],{chatId:a}),params:b[c]}});for(var f=c,g=Array.isArray(f),h=0,f=g?f:f[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var i;if(g){if(h>=f.length)break;i=f[h++]}else{h=f.next();if(h.done)break;i=h.value}i=i;i.params.skipVerifyThread!==!0&&d("MAWIndexedDb").afterTransaction({tag:"VerifyThreadExists",value:d("MAWBridgeThread").createBridgeThread(i.data,i.data.optimisticThreadKey,i.params.authoritativeThreadKey,i.params.description)})}return d("MAWWriteBulkWriteIncomingAdminMsgTxns").writeE2EEAdminMsgsForIncomingCreatedThreads(a,c.map(function(a){return a.data}))})["catch"](function(a){a=c("getErrorSafe")(a);a.message="Error bulk creating threads: "+a.message;throw a})}function n(a,b,c){var d=b.authoritativeThreadKey,e=b.clientThreadKey,f=b.deduplicationKey,g=b.folder;b=b.lastActivityTimestamp;g={authoritativeThreadKey:(d=d)!=null?d:a.authoritativeThreadKey,cannotReplyReason:g!=null||e!=null?null:a.cannotReplyReason,deduplicationKey:g!=null||e!=null?f:a.deduplicationKey,folder:(d=g)!=null?d:a.folder,newestMsgTs:h(c,b),optimisticThreadKey:(f=e)!=null?f:a.optimisticThreadKey};return babelHelpers["extends"]({},a,g)}function o(a,b,e){var f=b.authoritativeThreadKey,g=b.description,h=b.skipVerifyThread;return d("MAWDbMsgTxns").getThreadNewestMessageTs(a,e).then(function(i){var j=n(e,b,i);return a.threads.update(e.chatId,j).then(function(){var a;h!==!0&&d("MAWIndexedDb").afterTransaction({tag:"VerifyThreadExists",value:d("MAWBridgeThread").createBridgeThread(j,j.optimisticThreadKey,f,g,i)});d("MAWIndexedDb").afterTransaction({tag:"ThreadUpdated",value:d("MAWBridgeTypesCreators").createBridgeUpdatedThread({folder:(a=j==null?void 0:j.folder)!=null?a:d("MAWFolderTypes").FOLDER_ID.INBOX,threadJid:j.jid})});return j})["catch"](function(a){a=c("getErrorSafe")(a);a.message="Error updating thread: "+a.message;throw a})})}function p(a,b){return d("MAWDexieTable").dexieAll(b.map(function(b){var c=b.params,e=b.thread;return d("MAWDbMsgTxns").getThreadNewestMessageTs(a,e).then(function(a){a=n(e,c,a);return{params:c,thread:a}})})).then(function(b){return a.threads.bulkUpdate(b.map(function(a){a=a.thread;return{changes:a,key:a.chatId}})).then(function(){for(var a=b,c=Array.isArray(a),e=0,a=c?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var f;if(c){if(e>=a.length)break;f=a[e++]}else{e=a.next();if(e.done)break;f=e.value}f=f;var g=f.params,h=g.authoritativeThreadKey,i=g.description;g=g.skipVerifyThread;f=f.thread;g!==!0&&d("MAWIndexedDb").afterTransaction({tag:"VerifyThreadExists",value:d("MAWBridgeThread").createBridgeThread(f,f.optimisticThreadKey,h,i)});d("MAWIndexedDb").afterTransaction({tag:"ThreadUpdated",value:d("MAWBridgeTypesCreators").createBridgeUpdatedThread({folder:(g=f==null?void 0:f.folder)!=null?g:d("MAWFolderTypes").FOLDER_ID.INBOX,threadJid:f.jid})})}return b.map(function(a){a=a.thread;return a})})})["catch"](function(a){a=c("getErrorSafe")(a);a.message="Error bulk updating threads: "+a.message;throw a})}g.getExistingThread=i;g.bulkGetExistingThread=j;g.getOrCreateThread=a;g.bulkGetOrCreateThread=b;g.createThread=l;g.bulkCreateThread=m;g.prepareUpdatedThreadData=n;g.updateThread=o;g.bulkUpdateThread=p}),98);
__d("MAWLocalizationUtils",["MAWAckLevel","MAWExternalId","MAWLocalizationType","MAWMsgType","WAJids","WATimeUtils"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,c,e,f){return{ack:d("MAWAckLevel").ACK.sent,altIndex:(e=e)!=null?e:void 0,author:d("WAJids").AUTHOR_SYSTEM,externalId:d("MAWExternalId").generateExternalId(),msgContent:a,sortOrderMs:f,threadJid:b,ts:(e=c)!=null?e:d("WATimeUtils").unixTime(),type:d("MAWMsgType").MSG_TYPE.ADMIN}}function b(a){switch(a){case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_NAMED_GROUP:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_NAMED_GROUP:case d("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_NAMED_GROUP:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_ADDED_ONE_PARTICIPANT:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_ADDED_TWO_PARTICIPANTS:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_ADDED_MORE_THAN_TWO_PARTICIPANTS:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_YOU:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_YOU_AND_ONE_USER:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_YOU_AND_MORE_THAN_ONE_USERS:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_ONE_USER:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_TWO_USER:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_MORE_THAN_TWO_USER:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_REMOVED_ONE_PARTICIPANT:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_REMOVED_TWO_PARTICIPANTS:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_REMOVED_MORE_THAN_TWO_PARTICIPANTS:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_YOU:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_YOU_AND_ONE_USER:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_YOU_AND_MORE_THAN_ONE_USERS:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_ONE_USER:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_TWO_USER:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_MORE_THAN_TWO_USER:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_LEFT_GROUP:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SELF_DEMOTED:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_PROMOTED_PARTICIPANT:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_DEMOTED_PARTICIPANT:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_GOT_PROMOTED:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_GOT_DEMOTED:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_GOT_PROMOTED:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_GOT_DEMOTED:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_PROMOTED_YOU:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_DEMOTED_YOU:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_PROMOTED_PARTICIPANT:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SELF_DEMOTED:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_DEMOTED_PARTICIPANT:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_ADDED_DEVICE:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_DEVICE:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_REMOVED_DEVICE:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_DEVICE:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_UPDATED_DEVICE:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_UPDATED_DEVICE:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_CUSTOMIZE_HOTLIKE:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_CUSTOMIZE_NICKNAME:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_CUSTOMIZE_THEME:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_CUSTOMIZE_PHOTO:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_PINNED_MESSAGE:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_UNPINNED_MESSAGE:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_HOTLIKE:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_THEME:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_PHOTO:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_PINNED_MESSAGE:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_UNPINNED_MESSAGE:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_PARTICIPANT_NICKNAME:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CLEAR_PARTICIPANT_NICKNAME:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_CURRENT_USER_NICKNAME:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SET_OWN_NICKNAME:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_CLEAR_OWN_NICKNAME:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_CLEAR_PARTICIPANT_NICKNAME:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SET_OWN_NICKNAME:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CLEAR_OWN_NICKNAME:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CLEAR_CURRENT_USER_NICKNAME:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_MINUTES:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_MINUTES:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_HOURS:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_HOURS:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_DAYS:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_DAYS:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_OFF:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_SECONDS:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_SECONDS:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_TAKE_SCREENSHOT:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_RECORD_SCREEN:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SET_ADD_MODE_ADMIN_ONLY:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SET_ADD_MODE_ALL_MEMBERS:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SET_ADD_MODE_ADMIN_ONLY:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SET_ADD_MODE_ALL_MEMBERS:case d("MAWLocalizationType").LOCALIZATION_TYPE.SERVER_SET_ADD_MODE_ADMIN_ONLY:case d("MAWLocalizationType").LOCALIZATION_TYPE.SERVER_SET_ADD_MODE_ALL_MEMBERS:return!0}return!1}function c(a){switch(a){case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_ADDED_DEVICE:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_REMOVED_DEVICE:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_UPDATED_DEVICE:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_DEVICE:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_DEVICE:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_UPDATED_DEVICE:return!0}return!1}function e(a){switch(a){case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_ADDED_ONE_PARTICIPANT:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_ADDED_TWO_PARTICIPANTS:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_ADDED_MORE_THAN_TWO_PARTICIPANTS:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_YOU:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_YOU_AND_ONE_USER:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_YOU_AND_MORE_THAN_ONE_USERS:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_ONE_USER:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_TWO_USER:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_MORE_THAN_TWO_USER:case d("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_YOU:case d("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_YOU_AND_ONE_USER:case d("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_YOU_AND_MORE_THAN_ONE_USER:case d("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_ONE_USER:case d("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_TWO_USER:case d("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_MORE_THAN_TWO_USER:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_REMOVED_ONE_PARTICIPANT:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_REMOVED_TWO_PARTICIPANTS:case d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_REMOVED_MORE_THAN_TWO_PARTICIPANTS:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_YOU:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_YOU_AND_ONE_USER:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_YOU_AND_MORE_THAN_ONE_USERS:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_ONE_USER:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_TWO_USER:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_MORE_THAN_TWO_USER:case d("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_REMOVED_YOU:case d("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_REMOVED_YOU_AND_ONE_USER:case d("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_REMOVED_YOU_AND_MORE_THAN_ONE_USER:case d("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_REMOVED_ONE_USER:case d("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_REMOVED_TWO_USER:case d("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_REMOVED_MORE_THAN_TWO_USER:case d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_LEFT_GROUP:return!0}return!1}g.buildUnstoredDbAdminMsg=a;g.isAdminMsgNormalized=b;g.isDeviceChangeAdminMsg=c;g.isParticipantChangeAdminMsg=e}),98);
__d("MAWAdminMsgTxns",["MAWDbMsg","MAWDbThread","MAWDbThreadTxns","MAWLocalizationType","MAWLocalizationUtils","MAWTimeUtils","MAWWriteBulkWriteIncomingAdminMsgTxns","MAWWriteMsgTxns","WALogger","WATimeUtils","emptyFunction"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["writeReachabilityErrorAdminMsg failed to create or get 1:1 thread"]);h=function(){return a};return a}function a(a,b,c){var e=a.ts;e=d("WATimeUtils").castUnixTimeToMillisTime(e);c=d("MAWTimeUtils").ensureValidMillisTime(c)||d("WATimeUtils").castToMillisTime(0);e=e>c?e:c;return babelHelpers["extends"]({},b,{newestMsg:a.msgId,newestMsgTs:e,oldestMsg:a.msgId,snippetMsg:a.msgId,snippetMsgTs:d("WATimeUtils").castUnixTimeToMillisTime(d("MAWDbMsg").getCanonicalTsFromMsg(a)),threadOrder:d("MAWDbThread").craftThreadOrder(e,b.jid)})}function b(a,b){return d("MAWDbThreadTxns").getThread(a,b).then(function(b){if(!b.success){d("WALogger").WARN(h());return}b=b.value;var e=d("MAWLocalizationUtils").buildUnstoredDbAdminMsg({adminMsgContent:[],adminType:d("MAWLocalizationType").LOCALIZATION_TYPE.REACHABILITY_ERROR,version:0},b.jid,d("WATimeUtils").castMillisTimeToUnixTime(d("WATimeUtils").millisTime()));return d("MAWWriteMsgTxns").writeMsg(a,e,b,"MAWAdminMsgTxns::writeReachabilityErrorAdminMsg").then(c("emptyFunction"))})}function e(a,b,c){return d("MAWWriteBulkWriteIncomingAdminMsgTxns").writeE2EEAdminMsgsForIncomingCreatedThreads(a,[b],c).then(function(a){a=a[0];return a})}function f(a){var b=d("MAWDbMsg").craftE2eeAdminMsgAltIndex(a.chatId);b=d("MAWLocalizationUtils").buildUnstoredDbAdminMsg({adminMsgContent:[],adminType:d("MAWLocalizationType").LOCALIZATION_TYPE.E2EE_THREAD_DESCRIPTION,version:0},a.jid,d("WATimeUtils").castToUnixTime(0),b);return babelHelpers["extends"]({},b,{msgId:d("MAWDbMsg").craftMsgIdV2(a.chatId,1,b),sortOrderMs:0})}g.getUpdatedThreadForAdminMsg=a;g.writeReachabilityErrorAdminMsg=b;g.writeE2EEThreadDescriptionMsg=e;g.buildE2EEThreadDescriptionMsg=f}),98);
__d("MAWThreadUpdateMiddlewareGKUtil",["MAWMsgType","gkx"],(function(a,b,c,d,e,f,g){"use strict";function a(a){if(!c("gkx")("4847"))return!1;switch(a){case d("MAWMsgType").MSG_TYPE.ADMIN:case d("MAWMsgType").MSG_TYPE.EPHEMERAL_SYNC_RESPONSE:case d("MAWMsgType").MSG_TYPE.EPHEMERAL_SETTING_CHANGE_FROM_CURRENT_DEVICE:case d("MAWMsgType").MSG_TYPE.EPHEMERAL_SETTING_ADMIN:case d("MAWMsgType").MSG_TYPE.EPHEMERAL_SCREENSHOT_ACTION:case d("MAWMsgType").MSG_TYPE.ICDC_ALERT:case d("MAWMsgType").MSG_TYPE.SK_DISTRIBUTION:return c("gkx")("5915");case d("MAWMsgType").MSG_TYPE.TEXT:case d("MAWMsgType").MSG_TYPE.FUTUREPROOF:case d("MAWMsgType").MSG_TYPE.REVOKED:case d("MAWMsgType").MSG_TYPE.EDIT_ACTION:case d("MAWMsgType").MSG_TYPE.CIPHERTEXT:case d("MAWMsgType").MSG_TYPE.UNAVAILABLE:case d("MAWMsgType").MSG_TYPE.BUMP_EXISTING_MESSAGE:return c("gkx")("5916");case d("MAWMsgType").MSG_TYPE.IMAGE:case d("MAWMsgType").MSG_TYPE.VIDEO:case d("MAWMsgType").MSG_TYPE.PTT:case d("MAWMsgType").MSG_TYPE.GIF:case d("MAWMsgType").MSG_TYPE.STICKER:case d("MAWMsgType").MSG_TYPE.DOCUMENT_FILE:case d("MAWMsgType").MSG_TYPE.RECEIVER_FETCH:case d("MAWMsgType").MSG_TYPE.XMA:case d("MAWMsgType").MSG_TYPE.DELETE_FOR_ME:case d("MAWMsgType").MSG_TYPE.GROUP_INVITE:case d("MAWMsgType").MSG_TYPE.RAVEN:case d("MAWMsgType").MSG_TYPE.RAVEN_ACTION:return c("gkx")("6762");case d("MAWMsgType").MSG_TYPE.EXPIRED_EPHEMERAL:case d("MAWMsgType").MSG_TYPE.GROUP_POLL_CREATE:case d("MAWMsgType").MSG_TYPE.GROUP_POLL_UPDATE:return!1;default:a;return!1}}function b(){return c("gkx")("4847")&&c("gkx")("3739")}function e(){return c("gkx")("4847")&&c("gkx")("6236")}function f(){return c("gkx")("4847")&&c("gkx")("7904")}function h(){return c("gkx")("4847")&&c("gkx")("6236")&&c("gkx")("5915")&&c("gkx")("3739")&&c("gkx")("5916")&&c("gkx")("6762")}g.isThreadUpdateEnabledViaMiddlewareForMsgType=a;g.isThreadUpdateEnabledViaMiddlewareForReactions=b;g.isSnippetRecalculationEnabled=e;g.isThrottledUpdatesEnabled=f;g.isMiddlewareFullyRolledOut=h}),98);
__d("MAWAfterWriteMsgUtil",["$InternalEnum","ArmadilloDataTraceType","I64","MAWBridgeMsg","MAWBridgeTrace","MAWBridgeTypesCreators","MAWCalculateBumpTimestampMs","MAWDbMsg","MAWIndexedDb","MAWLocalizationType","MAWMsgType","MAWThreadUpdateMiddlewareGKUtil","MAWXMAUtils","WAJids","WALogger","WATimeUtils","justknobx","qex"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Skipping thread bump for thread: ",", msgType: ",", snippetType: ",", newestMsgTs: ",", bumpThreadOption: ","."]);i=function(){return a};return a}var j=b("$InternalEnum").Mirrored(["DO_NOT_BUMP_THREAD","BUMP_LOCAL_ONLY","BUMP_LOCAL_AND_SERVER"]);function a(a){var b=a.bumpThreadOption,e=a.dbMsg,f=a.hasMoreAfter,g=a.hasMoreBefore,h=a.initialLoad;h=h===void 0?!1:h;var i=a.isFirstMsg,j=a.isOldestMsgUpdated,l=a.openMessageOtid,m=a.openMessageParticipantCount,n=a.optimisticMsg,o=a.participantCount,p=a.quotedReplyAttachmentMeta,q=a.s2sInstanceKey,r=a.snippet;a=a.updatedThread;var s=a.authoritativeThreadKey,t=a.jid,u=a.newestMsgTs;a=a.oldestMsg;if(e.altIndex===d("MAWDbMsg").SPAM_ALT_INDEX||e.altIndex===d("MAWDbMsg").FUTUREPROOF_SPAM_ALT_INDEX)return;d("MAWIndexedDb").afterTransaction({tag:"StartTrace",value:d("MAWBridgeTrace").createBridgeStartTraceData(e,t,d("ArmadilloDataTraceType").armadilloMessageSend,l,i,m,o,s)});d("MAWXMAUtils").isXMAStoryReply(e.xmaMessageType)||d("MAWIndexedDb").afterTransaction({tag:"NewMsg",value:d("MAWBridgeMsg").createBridgeMsg(e,n,p,void 0,q)});k(b,e,t,u,r);if(h&&c("qex")._("1210")!==!0){d("MAWIndexedDb").afterTransaction({tag:"MsgsLoaded",value:d("MAWBridgeTypesCreators").createBridgeMsgsLoadedInfo(t,[e],!0,(l=g)!=null?l:!1,(i=f)!=null?i:!1)})}j&&a!=null&&d("MAWIndexedDb").afterTransaction({tag:"UpdateMinMessage",value:{minMessageId:a,minTimestampMs:d("MAWDbMsg").getCanonicalTsFromMsg(e)*1e3,threadJid:t}})}function k(a,b,c,e,f){switch(a){case j.DO_NOT_BUMP_THREAD:l(a,b,c,e,f);return;case j.BUMP_LOCAL_ONLY:case j.BUMP_LOCAL_AND_SERVER:if(m(b)||f==null||e==null){l(a,b,c,e,f);return}if(!d("MAWThreadUpdateMiddlewareGKUtil").isThreadUpdateEnabledViaMiddlewareForMsgType(b.type)){var g=f.snippetParams,i=f.snippetSenderContactId;f=f.snippetType;e=d("MAWCalculateBumpTimestampMs").calculateBumpTimestampMs(b.serverTs!=null?d("WATimeUtils").castUnixTimeToMillisTime(b.serverTs):e,(h||(h=d("I64"))).of_string_opt(b.externalId));d("MAWIndexedDb").afterTransaction({tag:"ThreadBumpedV2",value:d("MAWBridgeTypesCreators").createBridgeBumpedThreadV2({bumpTimestampMs:e,description:"writeMsgAfterTransaction-"+b.type,isMessageAuthorMe:b.author===d("WAJids").AUTHOR_ME,skipServerThreadBump:a===j.BUMP_LOCAL_ONLY,snippetData:{params:g,senderContactId:i,type:f},threadJid:c})})}}}function l(a,b,c,e,f){if(d("MAWThreadUpdateMiddlewareGKUtil").isThreadUpdateEnabledViaMiddlewareForMsgType(b.type))return;d("WALogger").LOG(i(),c,b.type,f==null?void 0:f.snippetType,e,a)}function m(a){if(d("MAWXMAUtils").isXMAStoryReply(a.xmaMessageType))return!0;return c("justknobx")._("2017")&&a.type===d("MAWMsgType").MSG_TYPE.ADMIN&&(d("MAWThreadUpdateMiddlewareGKUtil").isThreadUpdateEnabledViaMiddlewareForMsgType(a.type)||a.msgContent.adminType===d("MAWLocalizationType").LOCALIZATION_TYPE.E2EE_THREAD_DESCRIPTION||a.msgContent.adminType===d("MAWLocalizationType").LOCALIZATION_TYPE.DUAL_THREAD_CUTOVER_ADMIN_MESSAGE)?!0:!1}g.WriteMsgAfterTxnBumpThreadOption=j;g.writeMsgAfterTransaction=a}),98);
__d("MAWThreadSnippetForAdminOrEphemeralMsg",["MAWAdminMsgNormalized","MAWLocalizationUtils"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){var c=a.msgContent.adminType;a=d("MAWLocalizationUtils").isAdminMsgNormalized(c)?d("MAWAdminMsgNormalized").deconstructContactIdsFromAdminContent(c,a.msgContent.adminMsgContent):{contactIds:[],contents:a.msgContent.adminMsgContent};var e=a.contactIds;a=a.contents;return{snippetParams:{contactIDs:[].concat(e.map(function(a){return a==="Facebook User"?"0":a})),strings:[].concat(a)},snippetSenderContactId:b,snippetType:c}}g["default"]=a}),98);
__d("MAWThreadSnippetForBumpExistingMessageMsg",["MAWLocalizationType","WAJids","WALogger"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["Bump message sender is null"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Bump message has no quoted author"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["Bumped message can not have AUTHOR_SYSTEM"]);j=function(){return a};return a}function k(a,b,c){return{snippetParams:{contactIDs:(c=c)!=null?c:[],strings:[]},snippetSenderContactId:a,snippetType:b}}var l=function(a){return k(a,d("MAWLocalizationType").LOCALIZATION_TYPE.UNAVAILABLE_SNIPPET)};function a(a,b,c){var e;if(d("WAJids").isAuthorSystem(a.author)){d("WALogger").ERROR(j());return l(b)}e=(e=(e=a.quote)==null?void 0:e.content.author)!=null?e:c;if(e==null){d("WALogger").ERROR(i());return l(b)}if(d("WAJids").isAuthorMe(a.author))return d("WAJids").isAuthorMe(e)?k(b,d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_BUMPED_OWN_MESSAGE):k(b,d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_BUMPED_MESSAGE,[d("WAJids").userIdFromJid(e)]);if(b==null){d("WALogger").ERROR(h());return l(b)}if(d("WAJids").isAuthorMe(e))return k(b,d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_BUMPED_CURRENT_USER_MESSAGE,[b]);return e===a.author?k(b,d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_BUMPED_OWN_MESSAGE,[b]):k(b,d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_BUMPED_PARTICIPANT_MESSAGE,[b,d("WAJids").userIdFromJid(e)])}g["default"]=a}),98);
__d("MAWThreadSnippetForCiphertextMsg",["MAWLocalizationType","gkx"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return{snippetParams:{contactIDs:[],strings:[]},snippetSenderContactId:a,snippetType:c("gkx")("1564")?d("MAWLocalizationType").LOCALIZATION_TYPE.USER_SEND_ENCRYPTED_MESSAGE_FALLBACK:d("MAWLocalizationType").LOCALIZATION_TYPE.UNAVAILABLE_SNIPPET}}g["default"]=a}),98);
__d("MAWThreadSnippetForDocumentFileMsg",["MAWLocalizationType","WAJids","WALogger"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["Document file message can not have AUTHOR_SYSTEM"]);h=function(){return a};return a}function a(a,b){var c,e=d("MAWLocalizationType").LOCALIZATION_TYPE.UNAVAILABLE_SNIPPET;c={contactIDs:[],mentionJIDs:(c=a.msgContent)==null?void 0:c.mentionedJids,strings:[]};d("WAJids").isAuthorMe(a.author)?e=d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_ATTACHMENT:d("WAJids").isAuthorSystem(a.author)||b==null?d("WALogger").ERROR(h()):(e=d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_ATTACHMENT,c.contactIDs.push(b));return{snippetParams:c,snippetSenderContactId:b,snippetType:e}}g["default"]=a}),98);
__d("MAWThreadSnippetForFallbackMessageMsg",["MAWLocalizationType","WAJids"],(function(a,b,c,d,e,f,g){"use strict";function h(a,b,c){return{snippetParams:{contactIDs:(c=c)!=null?c:[],strings:[]},snippetSenderContactId:a,snippetType:b}}function a(a,b){var c=a.author;a=a.msgContent.subtype;if(d("WAJids").isAuthorMe(c))switch(a){case"liveLocationMessage":case"locationMessage":return h(b,d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_LOCATION_FALLBACK);case"contactShareMessage":return h(b,d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_CONTACT_SHARE_FALLBACK);case"storyMentionMessage":return h(b,d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_STORY_MENTION_FALLBACK);case"pollCreationMessage":return h(b,d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_POLL_CREATION_FALLBACK);case"bumpMessage":return h(b,d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_BUMPED_MESSAGE);case"stickerReceiverFetchMessage":return h(b,d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_STICKER_RECEIVER_FETCH_MESSAGE_FALLBACK);default:return h(b,d("MAWLocalizationType").LOCALIZATION_TYPE.UNAVAILABLE_SNIPPET)}else switch(a){case"liveLocationMessage":case"locationMessage":return h(b,d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_LOCATION_FALLBACK);case"contactShareMessage":return h(b,d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_CONTACT_SHARE_FALLBACK);case"storyMentionMessage":return h(b,d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_STORY_MENTION_FALLBACK);case"pollCreationMessage":return h(b,d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_POLL_CREATION_FALLBACK);case"bumpMessage":return h(b,d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_BUMPED_PARTICIPANT_MESSAGE);case"metaAiMessage":return h(b,d("MAWLocalizationType").LOCALIZATION_TYPE.META_AI_SEND_MESSAGE_FALLBACK);case"stickerReceiverFetchMessage":return h(b,d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_STICKER_RECEIVER_FETCH_MESSAGE_FALLBACK);default:return h(b,d("MAWLocalizationType").LOCALIZATION_TYPE.UNAVAILABLE_SNIPPET)}}g["default"]=a}),98);
__d("MAWThreadSnippetForGifMsg",["MAWLocalizationType","WAJids","WALogger"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["Animated message can not have AUTHOR_SYSTEM"]);h=function(){return a};return a}function a(a,b){var c,e=d("MAWLocalizationType").LOCALIZATION_TYPE.UNAVAILABLE_SNIPPET;c={contactIDs:[],mentionJIDs:(c=a.msgContent)==null?void 0:c.mentionedJids,strings:[]};d("WAJids").isAuthorMe(a.author)?e=d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_GIF:d("WAJids").isAuthorSystem(a.author)||b==null?d("WALogger").ERROR(h()):(e=d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_GIF,c.contactIDs.push(b));return{snippetParams:c,snippetSenderContactId:b,snippetType:e}}g["default"]=a}),98);
__d("MAWThreadSnippetForImageMsg",["MAWLocalizationType","WAJids","WALogger"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["Image message can not have AUTHOR_SYSTEM"]);h=function(){return a};return a}function a(a,b){var c,e=d("MAWLocalizationType").LOCALIZATION_TYPE.UNAVAILABLE_SNIPPET;c={contactIDs:[],mentionJIDs:(c=a.msgContent)==null?void 0:c.mentionedJids,strings:[]};d("WAJids").isAuthorMe(a.author)?e=d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_IMAGE:d("WAJids").isAuthorSystem(a.author)||b==null?d("WALogger").ERROR(h()):(e=d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_IMAGE,c.contactIDs.push(b));return{snippetParams:c,snippetSenderContactId:b,snippetType:e}}g["default"]=a}),98);
__d("MAWThreadSnippetForPttMsg",["MAWLocalizationType","WAJids","WALogger"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["Ptt message can not have AUTHOR_SYSTEM"]);h=function(){return a};return a}function a(a,b){var c,e=d("MAWLocalizationType").LOCALIZATION_TYPE.UNAVAILABLE_SNIPPET;c={contactIDs:[],mentionJIDs:(c=a.msgContent)==null?void 0:c.mentionedJids,strings:[]};d("WAJids").isAuthorMe(a.author)?e=d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_AUDIO:d("WAJids").isAuthorSystem(a.author)||b==null?d("WALogger").ERROR(h()):(e=d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_AUDIO,c.contactIDs.push(b));return{snippetParams:c,snippetSenderContactId:b,snippetType:e}}g["default"]=a}),98);
__d("MAWThreadSnippetForRavenMsg",["MAWLocalizationType","MAWMsg","WAJids","WALogger"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["Animated message can not have AUTHOR_SYSTEM"]);h=function(){return a};return a}function a(a,b){var c,e=d("MAWLocalizationType").LOCALIZATION_TYPE.UNAVAILABLE_SNIPPET;c={contactIDs:[],mentionJIDs:(c=a.msgContent)==null?void 0:c.mentionedJids,strings:[]};d("WAJids").isAuthorMe(a.author)?e=a.ravenMediaType===d("MAWMsg").MAWRavenMsgMediaType.IMAGE?d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_IMAGE:d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_VIDEO:d("WAJids").isAuthorSystem(a.author)||b==null?d("WALogger").ERROR(h()):(e=a.ravenMediaType===d("MAWMsg").MAWRavenMsgMediaType.IMAGE?d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_IMAGE:d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_VIDEO,c.contactIDs.push(b));return{snippetParams:c,snippetSenderContactId:b,snippetType:e}}g["default"]=a}),98);
__d("MAWThreadSnippetForMsgUtils",["MAWLocalizationType","WAJids","WALogger"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["Sticker message can not have AUTHOR_SYSTEM"]);h=function(){return a};return a}function a(a,b,c){var e=d("MAWLocalizationType").LOCALIZATION_TYPE.UNAVAILABLE_SNIPPET;b={contactIDs:[],mentionJIDs:b,strings:[]};d("WAJids").isAuthorMe(a)?e=d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_STICKER:d("WAJids").isAuthorSystem(a)||c==null?d("WALogger").ERROR(h()):(e=d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_STICKER,b.contactIDs.push(c));return{snippetParams:b,snippetSenderContactId:c,snippetType:e}}g.getMAWThreadSnippetForStickerMsg=a}),98);
__d("MAWThreadSnippetForReceiverFetchMsg",["MAWThreadSnippetForMsgUtils"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){return d("MAWThreadSnippetForMsgUtils").getMAWThreadSnippetForStickerMsg(a.author,(a=a.msgContent)==null?void 0:a.mentionedJids,b)}g["default"]=a}),98);
__d("MAWThreadSnippetForRevokedMsg",["MAWLocalizationType","WAJids","WALogger"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["Revoked message can not have AUTHOR_SYSTEM"]);h=function(){return a};return a}function a(a,b){var c,e=d("MAWLocalizationType").LOCALIZATION_TYPE.UNAVAILABLE_SNIPPET;c={contactIDs:[],mentionJIDs:(c=a.msgContent)==null?void 0:c.mentionedJids,strings:[]};d("WAJids").isAuthorMe(a.author)?e=d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_UNSENT_MESSAGE:d("WAJids").isAuthorSystem(a.author)||b==null?d("WALogger").ERROR(h()):(e=d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_UNSENT_MESSAGE,c.contactIDs.push(b));return{snippetParams:c,snippetSenderContactId:b,snippetType:e}}g["default"]=a}),98);
__d("MAWThreadSnippetForStickerMsg",["MAWThreadSnippetForMsgUtils"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){return d("MAWThreadSnippetForMsgUtils").getMAWThreadSnippetForStickerMsg(a.author,(a=a.msgContent)==null?void 0:a.mentionedJids,b)}g["default"]=a}),98);
__d("MAWThreadSnippetForTextMsg",["MAWLocalizationType","MAWVault","WAJids","WALogger"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["Text message can not have AUTHOR_SYSTEM"]);h=function(){return a};return a}function a(a,b,c){var e=d("MAWLocalizationType").LOCALIZATION_TYPE.UNAVAILABLE_SNIPPET,f={contactIDs:[],mentionJIDs:a.msgContent.mentionedJids,strings:[]};d("WAJids").isAuthorMe(a.author)?e=d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_TEXT:d("WAJids").isAuthorSystem(a.author)||b==null?d("WALogger").ERROR(h()):(e=c?d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_TEXT_IN_GROUP:d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_TEXT,f.contactIDs.push(b));if(a.specialTextSize===1||a.specialTextSize===2||a.specialTextSize===3){c=d("MAWVault").unvault(a.msgContent.content);f.strings.push(c==="\ud83d\udc4d"?"(Y)":a.msgContent.content)}else f.strings.push(a.msgContent.content);return{snippetParams:f,snippetSenderContactId:b,snippetType:e}}g["default"]=a}),98);
__d("MAWThreadSnippetForVideoMsg",["MAWLocalizationType","WAJids","WALogger"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["Video message can not have AUTHOR_SYSTEM"]);h=function(){return a};return a}function a(a,b){var c,e=d("MAWLocalizationType").LOCALIZATION_TYPE.UNAVAILABLE_SNIPPET;c={contactIDs:[],mentionJIDs:(c=a.msgContent)==null?void 0:c.mentionedJids,strings:[]};d("WAJids").isAuthorMe(a.author)?e=d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_VIDEO:d("WAJids").isAuthorSystem(a.author)||b==null?d("WALogger").ERROR(h()):(e=d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_VIDEO,c.contactIDs.push(b));return{snippetParams:c,snippetSenderContactId:b,snippetType:e}}g["default"]=a}),98);
__d("MAWThreadSnippetForXMAMsg",["MAWLocalizationType","WAArmadilloXMA.pb","WAJids","WALogger"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["Encountered unexpected XMAMessageType when building a thread snippet: ",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["XMA message can not have AUTHOR_SYSTEM"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["XMA message can not have AUTHOR_SYSTEM"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["XMA message can not have AUTHOR_SYSTEM"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["XMA message can not have AUTHOR_SYSTEM"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["XMA message can not have AUTHOR_SYSTEM"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["XMA message can not have AUTHOR_SYSTEM"]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["XMA message can not have AUTHOR_SYSTEM"]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose(["XMA message can not have AUTHOR_SYSTEM"]);p=function(){return a};return a}function q(){var a=babelHelpers.taggedTemplateLiteralLoose(["XMA story mentions must have a target Jid"]);q=function(){return a};return a}function r(){var a=babelHelpers.taggedTemplateLiteralLoose(["XMA message can not have AUTHOR_SYSTEM"]);r=function(){return a};return a}function s(){var a=babelHelpers.taggedTemplateLiteralLoose(["XMA message can not have AUTHOR_SYSTEM"]);s=function(){return a};return a}function t(){var a=babelHelpers.taggedTemplateLiteralLoose(["XMA message can not have AUTHOR_SYSTEM"]);t=function(){return a};return a}function u(){var a=babelHelpers.taggedTemplateLiteralLoose(["XMA message can not have AUTHOR_SYSTEM"]);u=function(){return a};return a}function v(){var a=babelHelpers.taggedTemplateLiteralLoose(["XMA message can not have AUTHOR_SYSTEM"]);v=function(){return a};return a}function w(){var a=babelHelpers.taggedTemplateLiteralLoose(["XMA message can not have AUTHOR_SYSTEM"]);w=function(){return a};return a}function x(){var a=babelHelpers.taggedTemplateLiteralLoose(["XMA message can not have AUTHOR_SYSTEM"]);x=function(){return a};return a}function y(){var a=babelHelpers.taggedTemplateLiteralLoose(["XMA message can not have AUTHOR_SYSTEM"]);y=function(){return a};return a}function z(){var a=babelHelpers.taggedTemplateLiteralLoose(["XMA message can not have AUTHOR_SYSTEM"]);z=function(){return a};return a}function A(){var a=babelHelpers.taggedTemplateLiteralLoose(["XMA message can not have AUTHOR_SYSTEM"]);A=function(){return a};return a}function B(){var a=babelHelpers.taggedTemplateLiteralLoose(["XMA message does not have xmaMessageType"]);B=function(){return a};return a}function a(a,b){var c,e=d("MAWLocalizationType").LOCALIZATION_TYPE.UNAVAILABLE_SNIPPET;c={contactIDs:[],mentionJIDs:(c=a.msgContent)==null?void 0:c.mentionedJids,strings:[]};a.xmaMessageType==null&&d("WALogger").ERROR(B());switch(a.xmaMessageType){case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_FEED_SHARE:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_GAMING_CUSTOM_UPDATE:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_RECEIVER_FETCH:d("WAJids").isAuthorMe(a.author)?e=d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_ATTACHMENT:d("WAJids").isAuthorSystem(a.author)||b==null?d("WALogger").ERROR(A()):(e=d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_ATTACHMENT,c.contactIDs.push(b));break;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_EXTERNAL_LINK_SHARE:if(d("WAJids").isAuthorMe(a.author)){var f;if(a.msgContent!=null&&((f=a.msgContent)==null?void 0:f.content)!=null){e=d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_TEXT;c.strings.push((f=a.msgContent)==null?void 0:f.content)}else e=d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_ATTACHMENT}else if(d("WAJids").isAuthorSystem(a.author)||b==null)d("WALogger").ERROR(z());else{e=d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_TEXT;c.contactIDs.push(b);if(a.msgContent!=null&&((f=a.msgContent)==null?void 0:f.content)!=null){c.strings.push((f=a.msgContent)==null?void 0:f.content)}}break;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_STORY_REPLY:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_PRODUCER_STORY_REPLY:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_STORY_SHARE:d("WAJids").isAuthorMe(a.author)?e=d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SENT_STORY:d("WAJids").isAuthorSystem(a.author)||b==null?d("WALogger").ERROR(y()):(e=d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SENT_STORY,c.contactIDs.push(b));break;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_STORY_MENTION:d("WAJids").isAuthorSystem(a.author)||b==null?d("WALogger").ERROR(x()):d("WAJids").isAuthorMe(a.author)?e=d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_STORY_MENTION:e=d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_STORY_MENTION;break;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_LOCATION_SHARING:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_LOCATION_SHARING_V2:d("WAJids").isAuthorSystem(a.author)||b==null?d("WALogger").ERROR(w()):d("WAJids").isAuthorMe(a.author)?e=d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_LOCATION:e=d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_LOCATION;break;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_CLIPS_SHARE:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_SHORT:d("WAJids").isAuthorMe(a.author)?e=d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SENT_REEL:d("WAJids").isAuthorSystem(a.author)||b==null?d("WALogger").ERROR(v()):e=d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SENT_REEL;break;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_FEED_POST_PRIVATE_REPLY:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_MULTIPOST_SHARE:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_SINGLE_IMAGE_POST_SHARE:d("WAJids").isAuthorMe(a.author)?e=d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SENT_POST:d("WAJids").isAuthorSystem(a.author)||b==null?d("WALogger").ERROR(u()):e=d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SENT_POST;break;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_HIGHLIGHTS_TAB_FRIEND_UPDATES_REPLY:d("WAJids").isAuthorMe(a.author)?e=d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SENT_POST:d("WAJids").isAuthorSystem(a.author)||b==null?d("WALogger").ERROR(t()):e=d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SENT_POST;break;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_PHOTO_SHARE:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_VIDEO_SHARE:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_REPLY:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_REACTION:d("WAJids").isAuthorMe(a.author)?e=d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SENT_STORY:d("WAJids").isAuthorSystem(a.author)||b==null?d("WALogger").ERROR(s()):(e=d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SENT_STORY,c.contactIDs.push(b));break;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_PHOTO_HIGHLIGHT_SHARE:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_VIDEO_HIGHLIGHT_SHARE:d("WAJids").isAuthorMe(a.author)?e=d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SENT_STORY_HIGHLIGHT:d("WAJids").isAuthorSystem(a.author)||b==null?d("WALogger").ERROR(r()):e=d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SENT_STORY_HIGHLIGHT;break;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_PHOTO_MENTION:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_VIDEO_MENTION:if(d("WAJids").isAuthorMe(a.author)){e=d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_MENTIONED_STORY_IG;f=a.threadJid;var g;f!=null&&(g=d("WAJids").interpretAsUserJid(f));if(g!=null){f=d("WAJids").userIdFromJid(g);c.contactIDs.push(f)}else d("WALogger").ERROR(q())}else d("WAJids").isAuthorSystem(a.author)?d("WALogger").ERROR(p()):e=d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_RECEIVED_STORY_MENTION_IG;break;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_AUDIO_CALL:d("WAJids").isAuthorMe(a.author)&&b!=null?(e=d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_AUDIO_CALLED,c.contactIDs.push(b)):d("WAJids").isAuthorSystem(a.author)||b==null?d("WALogger").ERROR(o()):(e=d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_AUDIO_CALLED,c.contactIDs.push(b));break;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_VIDEO_CALL:d("WAJids").isAuthorMe(a.author)&&b!=null?(e=d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_VIDEO_CALLED,c.contactIDs.push(b)):d("WAJids").isAuthorSystem(a.author)||b==null?d("WALogger").ERROR(n()):(e=d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_VIDEO_CALLED,c.contactIDs.push(b));break;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_AUDIO_CALL:d("WAJids").isAuthorMe(a.author)&&b!=null?(e=d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_MISSED_AUDIO_CALL,c.contactIDs.push(b)):d("WAJids").isAuthorSystem(a.author)||b==null?d("WALogger").ERROR(m()):(e=d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_MISSED_AUDIO_CALL,c.contactIDs.push(b));break;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_VIDEO_CALL:d("WAJids").isAuthorMe(a.author)&&b!=null?(e=d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_MISSED_VIDEO_CALL,c.contactIDs.push(b)):d("WAJids").isAuthorSystem(a.author)||b==null?d("WALogger").ERROR(l()):(e=d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_MISSED_VIDEO_CALL,c.contactIDs.push(b));break;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_GROUP_AUDIO_CALL:d("WAJids").isAuthorMe(a.author)&&b!=null?e=d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_STARTED_GROUP_AUDIO_CALL:d("WAJids").isAuthorSystem(a.author)||b==null?d("WALogger").ERROR(k()):(e=d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_STARTED_GROUP_AUDIO_CALL,c.contactIDs.push(b));break;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_GROUP_VIDEO_CALL:d("WAJids").isAuthorMe(a.author)&&b!=null?e=d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_STARTED_GROUP_VIDEO_CALL:d("WAJids").isAuthorSystem(a.author)||b==null?d("WALogger").ERROR(j()):(e=d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_STARTED_GROUP_VIDEO_CALL,c.contactIDs.push(b));break;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_EVENT:d("WAJids").isAuthorMe(a.author)?e=d("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SENT_EVENT:d("WAJids").isAuthorSystem(a.author)||b==null?d("WALogger").ERROR(i()):(e=d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SENT_EVENT,c.contactIDs.push(b));break;default:d("WALogger").ERROR(h(),a.xmaMessageType)}return{snippetParams:c,snippetSenderContactId:b,snippetType:e}}g["default"]=a}),98);
__d("MAWThreadSnippet",["FBLogger","MAWLocalizationType","MAWMsgType","MAWThreadSnippetForAdminOrEphemeralMsg","MAWThreadSnippetForBumpExistingMessageMsg","MAWThreadSnippetForCiphertextMsg","MAWThreadSnippetForDocumentFileMsg","MAWThreadSnippetForFallbackMessageMsg","MAWThreadSnippetForGifMsg","MAWThreadSnippetForImageMsg","MAWThreadSnippetForPttMsg","MAWThreadSnippetForRavenMsg","MAWThreadSnippetForReceiverFetchMsg","MAWThreadSnippetForRevokedMsg","MAWThreadSnippetForStickerMsg","MAWThreadSnippetForTextMsg","MAWThreadSnippetForVideoMsg","MAWThreadSnippetForXMAMsg","MAWUserJidWrapper","WAJids"],(function(a,b,c,d,e,f,g){"use strict";function h(a){return/^\d+$/.test(a)}function i(a){if(d("WAJids").isAuthorSystem(a))return;a=d("WAJids").isAuthorMe(a)?d("WAJids").userIdFromJid(d("MAWUserJidWrapper").getMyUserJid()):d("WAJids").userIdFromJid(a);if(!h(a)){c("FBLogger")("maw_db").mustfix("[MAWThreadSnippetBuildTxns] Snippet sender contact id is invalid");return}return a}function a(a,b,e){var f=i(a.author);switch(a.type){case d("MAWMsgType").MSG_TYPE.CIPHERTEXT:return c("MAWThreadSnippetForCiphertextMsg")(f);case d("MAWMsgType").MSG_TYPE.TEXT:return c("MAWThreadSnippetForTextMsg")(a,f,b);case d("MAWMsgType").MSG_TYPE.IMAGE:return c("MAWThreadSnippetForImageMsg")(a,f);case d("MAWMsgType").MSG_TYPE.VIDEO:return c("MAWThreadSnippetForVideoMsg")(a,f);case d("MAWMsgType").MSG_TYPE.PTT:return c("MAWThreadSnippetForPttMsg")(a,f);case d("MAWMsgType").MSG_TYPE.ADMIN:case d("MAWMsgType").MSG_TYPE.EPHEMERAL_SETTING_ADMIN:case d("MAWMsgType").MSG_TYPE.EPHEMERAL_SCREENSHOT_ACTION:return c("MAWThreadSnippetForAdminOrEphemeralMsg")(a,f);case d("MAWMsgType").MSG_TYPE.GIF:return c("MAWThreadSnippetForGifMsg")(a,f);case d("MAWMsgType").MSG_TYPE.STICKER:return c("MAWThreadSnippetForStickerMsg")(a,f);case d("MAWMsgType").MSG_TYPE.DOCUMENT_FILE:return c("MAWThreadSnippetForDocumentFileMsg")(a,f);case d("MAWMsgType").MSG_TYPE.REVOKED:return c("MAWThreadSnippetForRevokedMsg")(a,f);case d("MAWMsgType").MSG_TYPE.XMA:return c("MAWThreadSnippetForXMAMsg")(a,f);case d("MAWMsgType").MSG_TYPE.BUMP_EXISTING_MESSAGE:return c("MAWThreadSnippetForBumpExistingMessageMsg")(a,f,e);case d("MAWMsgType").MSG_TYPE.FUTUREPROOF:return c("MAWThreadSnippetForFallbackMessageMsg")(a,f);case d("MAWMsgType").MSG_TYPE.RECEIVER_FETCH:return c("MAWThreadSnippetForReceiverFetchMsg")(a,f);case d("MAWMsgType").MSG_TYPE.RAVEN:return c("MAWThreadSnippetForRavenMsg")(a,f);default:return{snippetParams:{contactIDs:[],strings:[]},snippetSenderContactId:f,snippetType:d("MAWLocalizationType").LOCALIZATION_TYPE.UNAVAILABLE_SNIPPET}}}g.getSnippetContactId=i;g.buildThreadSnippet=a}),98);
__d("MAWWriteBulkWriteIncomingAdminMsgTxns",["MAWAdminMsgTxns","MAWAfterWriteMsgUtil","MAWDbMsgTxns","MAWDexieTable","MAWMessageHasUniqueExternalIdValidator","MAWQplProxy","MAWThreadSnippet","MAWThreadSnippetForAdminOrEphemeralMsg","MAWThreadUpdateMiddlewareGKUtil","WALogger","qpl"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["OfflineBulkWriteAdminmsg - Missing thread when write e2ee thread description"]);h=function(){return a};return a}function i(a,b){var e=[],f=[],g=[],i=new Map(),j=new Map(),k=b.map(function(b){return d("MAWDbMsgTxns").getThreadOldestMessageId(a,b.jid).then(function(a){return i.set(b.jid,a)})}),l=b.map(function(b){return d("MAWDbMsgTxns").getThreadNewestMessageTs(a,b).then(function(a){return j.set(b.jid,a)})});return d("MAWDexieTable").dexieAll([k,l]).then(function(){b.forEach(function(a){a==null&&d("WALogger").ERROR(h());var b=d("MAWAdminMsgTxns").buildE2EEThreadDescriptionMsg(a),k=d("MAWAdminMsgTxns").getUpdatedThreadForAdminMsg(b,a,j.get(a.jid)),l=d("MAWThreadUpdateMiddlewareGKUtil").isThreadUpdateEnabledViaMiddlewareForMsgType(b.type)?null:c("MAWThreadSnippetForAdminOrEphemeralMsg")(b,d("MAWThreadSnippet").getSnippetContactId(b.author));a=i.get(a.jid);e.push(b);g.push(k);f.push({bumpThreadOption:d("MAWAfterWriteMsgUtil").WriteMsgAfterTxnBumpThreadOption.BUMP_LOCAL_ONLY,dbMsg:b,initialLoad:a==null,isFirstMsg:!1,isOldestMsgUpdated:a!=null&&b.msgId!==a,snippet:l,updatedThread:k})});return{afterTransactionSyncMsgsData:f,e2eeThreadAdminMsgs:e,threadsToUpdate:g}})}function a(a,b,e){return i(a,b).then(function(b){var f=b.afterTransactionSyncMsgsData,g=b.e2eeThreadAdminMsgs,h=b.threadsToUpdate;d("MAWMessageHasUniqueExternalIdValidator").logMessageAddSource(g.map(function(a){return a.externalId}),"MAWWriteBulkWriteIncomingAdminMsgTxns.js::writeE2EEAdminMsgsForIncomingCreatedThreads");e!=null&&d("MAWQplProxy").sendQplPointThroughBridge(c("qpl")._(25313175,"1551"),"write-bulk-admin-msgs-start",{instanceKey:e});return d("MAWDexieTable").dexieAll([a.messages.bulkAdd(g),a.threads.bulkPut(h)]).then(function(){e!=null&&d("MAWQplProxy").sendQplPointThroughBridge(c("qpl")._(25313175,"1551"),"write-bulk-admin-msgs-end",{instanceKey:e});f.forEach(function(a){return d("MAWAfterWriteMsgUtil").writeMsgAfterTransaction(a)});return h})})}g.writeE2EEAdminMsgsForIncomingCreatedThreads=a}),98);
__d("MAWAuthor",["MAWUserJidWrapper","WAJids","isStringNullOrEmpty"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){if(a==null||a===d("WAJids").AUTHOR_SYSTEM)return null;if(d("WAJids").isAuthorMe(a))return d("MAWUserJidWrapper").getMyUserJid();var b=d("WAJids").authorAsUserJid(a);if(b==null||c("isStringNullOrEmpty")(d("WAJids").userIdFromJid(b)))return null;else return d("WAJids").authorAsUserJid(a)};g.getAuthorUserJid=a}),98);
__d("MAWDbReactionsTxns",["FBLogger","MAWAuthor","MAWBridgeTypesCreators","MAWDbMsg","MAWDbMsgUtil","MAWDexieTable","MAWIndexedDb","WALogger","WAMsgMap","WATimeUtils"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["Deleted "," reactions"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Successfully deleted: "," reactions rows."]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["Successfully deleted reaction with id : ","."]);j=function(){return a};return a}var k=function(a){return a};function a(a,b){return a.reactions.put(k(b))}function b(a,b){return a.reactions["delete"](b.rowId).then(function(){var a=b.author,c=b.reactionId,e=b.reactToMsgId,f=b.threadJid;if(e==null)return;d("MAWIndexedDb").afterTransaction({tag:"DeleteReaction",value:d("MAWBridgeTypesCreators").createBridgeDeleteReaction({author:a,chatJid:f,reactToMsgId:e})});d("WALogger").LOG(j(),c)})}function e(a,b){return a.reactions.where("externalId").equals(b.externalId).filter(function(a){return a.author===b.author&&a.threadJid===b.chat}).first()}function f(a,b){var c=d("MAWAuthor").getAuthorUserJid(b.author);return a.reactions.where("reactToExternalId").equals(b.externalId).filter(function(a){return(a.reactToAuthor===c||a.reactToAuthor===b.author)&&a.threadJid===b.chat}).toArray()}function l(a,b){var d=b.reduce(function(a,b){a.set(b.msgId,b);return a},new Map());return a.reactions.where("reactToMsgId").anyOf(b.map(function(a){return a.msgId})).toArray().then(function(a){var b=a.filter(function(a){var b=a.reactToExternalId;a=a.reactToMsgId;return a!=null&&b===((b=d.get(a))==null?void 0:b.externalId)});b.length<a.length&&c("FBLogger")("messenger_e2ee_web").mustfix("Reactions query by reactToMsgId returns reactions with mismatching externalId");return b})}function m(a,b){return l(a,[b])}function n(a,b){var c=b.author,d=b.chat;b=b.externalId;return a.reactions.where("externalId").equals(b).filter(function(a){return a.author===c&&a.threadJid===d}).first()}function o(a,b){var c=b.map(function(a){a=a.externalId;return a});return a.reactions.where("externalId").anyOf(c).toArray().then(function(a){var c=d("MAWDbMsgUtil").convertMsgArrayToMap(a),e=new(d("WAMsgMap").MsgMap)();b.forEach(function(a){var b=c.get(a);b!=null&&e.set(a,b)});return e})}function p(a,b){return d("MAWDexieTable").dexieAll(b.map(function(b){var c=b.author;b=b.externalId;var e=d("MAWAuthor").getAuthorUserJid(c);return a.reactions.where("reactToExternalId").equals(b).filter(function(a){return d("MAWAuthor").getAuthorUserJid(a.reactToAuthor)===e}).toArray()})).then(function(b){b=b.flat();b.forEach(function(a){var b=a.author,c=a.reactToMsgId;a=a.threadJid;if(c==null)return;d("MAWIndexedDb").afterTransaction({tag:"DeleteReaction",value:d("MAWBridgeTypesCreators").createBridgeDeleteReaction({author:b,chatJid:a,reactToMsgId:c})})});d("WALogger").LOG(i(),b.length);return a.reactions.bulkDelete(b.map(function(a){return a.rowId}))})}function q(a,b){return a.reactions.where("reactToMsgId").anyOf(b.map(function(a){return a.msgId}))["delete"]().then(function(a){d("WALogger").LOG(h(),a)})}function r(a,b){return a.reactions.where("reactionId").between(d("MAWDbMsg").msgIdsInChatLowerBound(b.chatId),d("MAWDbMsg").msgIdsInChatUpperBound(b.chatId)).last().then(function(a){a=a==null?0:d("MAWDbMsg").getInChatMsgIdFromMsgId(a.reactionId);return a+1})}function s(a,b,c,e,f,g){c=c==null?null:c.ts;return a.reactions.where(["threadJid","ts"]).between([b,d("WATimeUtils").castToUnixTime(0)],[b,(a=c)!=null?a:d("WATimeUtils").unixTime()],!0,e).reverse().filter(g).limit(f).toArray()}g.coerceToReaction=k;g.putReaction=a;g.deleteReaction=b;g.getReaction=e;g.getReactionForEcho=f;g.getReactionsFromMessages=l;g.getReactionsFromMessage=m;g.maybeGetReactionByProtocolMsgId=n;g.getReactionMapByProtocolMsgId=o;g.deleteReactionsByUniqueMsgIdentifiers=p;g.deleteAllReactionsForMessages=q;g.getNextReactionIdNumberForThread=r;g.fetchReactionsFromDbWithTimestamp=s}),98);
__d("MAWMsgCleaner",["MAWLoggerUtils","Promise","WAAssertUnreachable","WAShiftTimer","WATagsLogger","WATimeUtils","WorkerScheduler","gkx","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["","::_purgeNow "," msgs' content cleaned"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["","::_purgeNow"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["","::update ",""]);k=function(){return a};return a}a="Unsend";e="Ephemeral";f="DeleteForMe";var l="PendingStanza",m="Xma",n="IGDDM";f={DELETE_FOR_ME:f,EPHEMERAL:e,IGDDM:n,PENDING_STANZA:l,UNSEND:a,XMA:m};var o;function p(){o==null&&(o=d("WorkerScheduler").makeScheduler("cleaner",{concurrency:1,maxConcurrency:1,maxThrottleMs:8e3}));return o}e=function(){function a(a,b){var e=this;this.$1=new(d("WAShiftTimer").ShiftTimer)(function(){c("promiseDone")(e.$2())});this.getNextTs=a.getNextTs;this.removeExpired=a.removeExpired;this.cleanerType=b;this.purgeEnabled=a.purgeEnabled;this.$1.forceRunNow()}var e=a.prototype;e.update=function(a){var b=q(this.cleanerType);d("WATagsLogger").TAGS([b,d("MAWLoggerUtils").Tag.MsgCleaner,d("MAWLoggerUtils").Tag.CleanerUpdate]).LOG(k(),b,a);this.$1.onOrBefore(d("WATimeUtils").cappedMillisecondsUntil(a))};e.$2=function(){var a=this,e=function(){if(!a.purgeEnabled())return(h||(h=b("Promise"))).resolve();var c=q(a.cleanerType);d("WATagsLogger").TAGS([c,d("MAWLoggerUtils").Tag.MsgCleaner,d("MAWLoggerUtils").Tag.CleanerPurge]).LOG(j(),c);return a.removeExpired().then(function(b){b>0&&d("WATagsLogger").TAGS([c,d("MAWLoggerUtils").Tag.MsgCleaner,d("MAWLoggerUtils").Tag.CleanerPurge]).LOG(i(),c,b);return a.getNextTs()}).then(function(b){b!=null&&a.update(b)})};if(c("gkx")("6593")){if(this.$3!=null)return(h||(h=b("Promise"))).resolve();this.$3=p().task({fn:e,name:this.cleanerType,priority:d("WorkerScheduler").BACKGROUND_PRIORITY});return this.$3.run()["finally"](function(){a.$3=null})}else return e()};return a}();function q(a){switch(a){case"Unsend":return"UnsendMsgCleaner";case"Ephemeral":return"EphemeralCleaner";case"DeleteForMe":return"DeleteForMeCleaner";case"PendingStanza":return"PendingStanzaCleaner";case"Xma":return"XmaCleaner";case"IGDDM":return"IGDDisappearingMsgCleaner";default:return c("WAAssertUnreachable")(a)}}n=e;g.CLEANER_TYPE=f;g.MsgCleaner=e;g.MSG_CLEANER_FOR_TESTING_ONLY=n}),98);
__d("MAWDeleteForMeMsgContentCleaner",["MAWMsgCleaner","WALogger","err"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["DeleteForMeMsgContentCleaner: Adding timestamps (",")"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["startDeleteForMeMsgContentCleaner invoked"]);j=function(){return a};return a}var k=null;function a(a){d("WALogger").LOG(j()),k==null&&(k=new(d("MAWMsgCleaner").MsgCleaner)(a,d("MAWMsgCleaner").CLEANER_TYPE.DELETE_FOR_ME))}function b(a){if(k==null){var b="Trying to add new DeleteForMeContentCleanerTimestamp before the cleaner is initialized!";d("WALogger").ERROR(i(),b);throw c("err")(b)}else d("WALogger").DEV(h(),a),k.update(a)}function e(){return k}function f(){k=null}g.startDeleteForMeMsgContentCleaner=a;g.addNewDeleteForMeMsgContentCleanerTimestamp=b;g.getDeleteForMeMsgContentCleaner_FOR_TESTING_ONLY=e;g.resetDeleteForMeMsgContentCleaner_FOR_TESTING_ONLY=f}),98);
__d("isWAFTSContentSearchEnabled",["isE2EEConversationSearchEnabled","isMAWUniversalSearchEnabled"],(function(a,b,c,d,e,f,g){"use strict";function a(){return c("isE2EEConversationSearchEnabled")()||c("isMAWUniversalSearchEnabled")()}g["default"]=a}),98);
__d("MAWFTSTxns",["MAWDexieTable","isWAFTSContentSearchEnabled","justknobx"],(function(a,b,c,d,e,f,g){"use strict";var h=c("justknobx")._("1146"),i=c("justknobx")._("2154");function a(a,b){return!c("isWAFTSContentSearchEnabled")()?d("MAWDexieTable").dexieResolve(null):a.ftsPurgeBacklog.put({externalId:b})}function b(a,b){return!c("isWAFTSContentSearchEnabled")()||!h?d("MAWDexieTable").dexieResolve(null):a.ftsBackloggedMessages.put({rowId:b})}function e(a,b){return!c("isWAFTSContentSearchEnabled")()||!h||!i?d("MAWDexieTable").dexieResolve(null):a.ftsBackloggedMessages.bulkPut(b.map(function(a){return{rowId:a}}))}function f(a,b){return!c("isWAFTSContentSearchEnabled")()?d("MAWDexieTable").dexieResolve(null):a.ftsPurgeThreadBacklog.put({chatJid:b})}g.maybePutMessageToPurgeBacklog=a;g.maybePutMessageToBacklog=b;g.maybePutMessagesToBacklog=e;g.maybePutThreadToPurgeBacklog=f}),98);
__d("MAWPendingStanzaCleaner",["MAWMsgCleaner","WALogger","err"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["PendingStanzaCleaner: Adding timestamps (",")"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["",""]);i=function(){return a};return a}var j=null;function a(a){j==null&&(j=new(d("MAWMsgCleaner").MsgCleaner)(a,d("MAWMsgCleaner").CLEANER_TYPE.PENDING_STANZA))}function b(a){if(j==null){var b="Trying to add new PendingStanzaCleanerTimestamp before the cleaner is initialized!";d("WALogger").ERROR(i(),b);throw c("err")(b)}else d("WALogger").DEV(h(),a),j.update(a)}function e(){return j}function f(){j=null}g.startPendingStanzaCleaner=a;g.addNewPendingStanzaCleanerTimestamp=b;g.getPendingStanzaCleaner_FOR_TESTING_ONLY=e;g.resetPendingStanzaCleaner_FOR_TESTING_ONLY=f}),98);
__d("MAWAdminMsgTypesGrouped",["MAWLocalizationType"],(function(a,b,c,d,e,f,g){"use strict";b=[(a=d("MAWLocalizationType")).LOCALIZATION_TYPE.CUTOVER_IGD_THREAD_ADMIN_MESSAGE,a.LOCALIZATION_TYPE.CUTOVER_THREAD_ADMIN_MESSAGE,a.LOCALIZATION_TYPE.DUAL_THREAD_CUTOVER_ADMIN_MESSAGE];c=[a.LOCALIZATION_TYPE.CURRENT_USER_ADDED_DEVICE,a.LOCALIZATION_TYPE.CURRENT_USER_REMOVED_DEVICE,a.LOCALIZATION_TYPE.CURRENT_USER_UPDATED_DEVICE,a.LOCALIZATION_TYPE.PARTICIPANT_ADDED_DEVICE,a.LOCALIZATION_TYPE.PARTICIPANT_REMOVED_DEVICE,a.LOCALIZATION_TYPE.PARTICIPANT_UPDATED_DEVICE];e=[a.LOCALIZATION_TYPE.CURRENT_USER_ADDED_MORE_THAN_TWO_PARTICIPANTS,a.LOCALIZATION_TYPE.CURRENT_USER_ADDED_ONE_PARTICIPANT,a.LOCALIZATION_TYPE.CURRENT_USER_ADDED_TWO_PARTICIPANTS,a.LOCALIZATION_TYPE.CURRENT_USER_REMOVED_MORE_THAN_TWO_PARTICIPANTS,a.LOCALIZATION_TYPE.CURRENT_USER_REMOVED_ONE_PARTICIPANT,a.LOCALIZATION_TYPE.CURRENT_USER_REMOVED_TWO_PARTICIPANTS,a.LOCALIZATION_TYPE.PARTICIPANT_ADDED_MORE_THAN_TWO_USER,a.LOCALIZATION_TYPE.PARTICIPANT_ADDED_ONE_USER,a.LOCALIZATION_TYPE.PARTICIPANT_ADDED_TWO_USER,a.LOCALIZATION_TYPE.PARTICIPANT_ADDED_YOU,a.LOCALIZATION_TYPE.PARTICIPANT_ADDED_YOU_AND_MORE_THAN_ONE_USERS,a.LOCALIZATION_TYPE.PARTICIPANT_ADDED_YOU_AND_ONE_USER,a.LOCALIZATION_TYPE.PARTICIPANT_REMOVED_MORE_THAN_TWO_USER,a.LOCALIZATION_TYPE.PARTICIPANT_REMOVED_ONE_USER,a.LOCALIZATION_TYPE.PARTICIPANT_REMOVED_TWO_USER,a.LOCALIZATION_TYPE.PARTICIPANT_REMOVED_YOU,a.LOCALIZATION_TYPE.PARTICIPANT_REMOVED_YOU_AND_MORE_THAN_ONE_USERS,a.LOCALIZATION_TYPE.PARTICIPANT_REMOVED_YOU_AND_ONE_USER,a.LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_MORE_THAN_TWO_USER,a.LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_ONE_USER,a.LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_TWO_USER,a.LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_YOU,a.LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_YOU_AND_MORE_THAN_ONE_USER,a.LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_YOU_AND_ONE_USER,a.LOCALIZATION_TYPE.UNKNOWN_USER_REMOVED_MORE_THAN_TWO_USER,a.LOCALIZATION_TYPE.UNKNOWN_USER_REMOVED_ONE_USER,a.LOCALIZATION_TYPE.UNKNOWN_USER_REMOVED_TWO_USER,a.LOCALIZATION_TYPE.UNKNOWN_USER_REMOVED_YOU,a.LOCALIZATION_TYPE.UNKNOWN_USER_REMOVED_YOU_AND_MORE_THAN_ONE_USER,a.LOCALIZATION_TYPE.UNKNOWN_USER_REMOVED_YOU_AND_ONE_USER];f=[a.LOCALIZATION_TYPE.CURRENT_USER_DEMOTED_PARTICIPANT,a.LOCALIZATION_TYPE.CURRENT_USER_PROMOTED_PARTICIPANT,a.LOCALIZATION_TYPE.PARTICIPANT_DEMOTED_PARTICIPANT,a.LOCALIZATION_TYPE.PARTICIPANT_PROMOTED_PARTICIPANT,a.LOCALIZATION_TYPE.CURRENT_USER_GOT_DEMOTED,a.LOCALIZATION_TYPE.CURRENT_USER_GOT_PROMOTED,a.LOCALIZATION_TYPE.CURRENT_USER_SELF_DEMOTED,a.LOCALIZATION_TYPE.PARTICIPANT_GOT_DEMOTED,a.LOCALIZATION_TYPE.PARTICIPANT_GOT_PROMOTED,a.LOCALIZATION_TYPE.PARTICIPANT_PROMOTED_YOU,a.LOCALIZATION_TYPE.PARTICIPANT_DEMOTED_YOU,a.LOCALIZATION_TYPE.PARTICIPANT_SELF_DEMOTED,a.LOCALIZATION_TYPE.CURRENT_USER_SET_ADD_MODE_ADMIN_ONLY,a.LOCALIZATION_TYPE.CURRENT_USER_SET_ADD_MODE_ALL_MEMBERS,a.LOCALIZATION_TYPE.PARTICIPANT_SET_ADD_MODE_ADMIN_ONLY,a.LOCALIZATION_TYPE.PARTICIPANT_SET_ADD_MODE_ALL_MEMBERS,a.LOCALIZATION_TYPE.SERVER_SET_ADD_MODE_ADMIN_ONLY,a.LOCALIZATION_TYPE.SERVER_SET_ADD_MODE_ALL_MEMBERS];d=[a.LOCALIZATION_TYPE.CURRENT_USER_LEFT_GROUP,a.LOCALIZATION_TYPE.PARTICIPANT_LEFT_GROUP];var h=[a.LOCALIZATION_TYPE.CURRENT_USER_NAMED_GROUP,a.LOCALIZATION_TYPE.CURRENT_USER_CUSTOMIZE_HOTLIKE,a.LOCALIZATION_TYPE.CURRENT_USER_CUSTOMIZE_NICKNAME,a.LOCALIZATION_TYPE.CURRENT_USER_CUSTOMIZE_PHOTO,a.LOCALIZATION_TYPE.CURRENT_USER_CUSTOMIZE_THEME,a.LOCALIZATION_TYPE.CURRENT_USER_CLEAR_OWN_NICKNAME,a.LOCALIZATION_TYPE.CURRENT_USER_CLEAR_PARTICIPANT_NICKNAME,a.LOCALIZATION_TYPE.CURRENT_USER_SET_OWN_NICKNAME],i=[a.LOCALIZATION_TYPE.PARTICIPANT_NAMED_GROUP,a.LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_CURRENT_USER_NICKNAME,a.LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_HOTLIKE,a.LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_PARTICIPANT_NICKNAME,a.LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_PHOTO,a.LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_THEME,a.LOCALIZATION_TYPE.UNKNOWN_USER_NAMED_GROUP,a.LOCALIZATION_TYPE.PARTICIPANT_CLEAR_CURRENT_USER_NICKNAME,a.LOCALIZATION_TYPE.PARTICIPANT_CLEAR_OWN_NICKNAME,a.LOCALIZATION_TYPE.PARTICIPANT_CLEAR_PARTICIPANT_NICKNAME,a.LOCALIZATION_TYPE.PARTICIPANT_SET_OWN_NICKNAME],j=[a.LOCALIZATION_TYPE.CURRENT_USER_PINNED_MESSAGE,a.LOCALIZATION_TYPE.CURRENT_USER_UNPINNED_MESSAGE,a.LOCALIZATION_TYPE.PARTICIPANT_PINNED_MESSAGE,a.LOCALIZATION_TYPE.PARTICIPANT_UNPINNED_MESSAGE],k=[a.LOCALIZATION_TYPE.TWO_USERS_CONNECTED,a.LOCALIZATION_TYPE.TWO_USERS_CONNECTED_ONE_MSPLIT],l=[a.LOCALIZATION_TYPE.CURRENT_USER_SEND_UNRENDERABLE_MESSAGE_FALLBACK,a.LOCALIZATION_TYPE.CURRENT_USER_SEND_LOCATION_FALLBACK,a.LOCALIZATION_TYPE.CURRENT_USER_SEND_POLL_CREATION_FALLBACK,a.LOCALIZATION_TYPE.CURRENT_USER_SEND_CONTACT_SHARE_FALLBACK,a.LOCALIZATION_TYPE.CURRENT_USER_SEND_STORY_MENTION_FALLBACK,a.LOCALIZATION_TYPE.CURRENT_USER_SEND_BUMP_MESSAGE_FALLBACK,a.LOCALIZATION_TYPE.CURRENT_USER_SEND_STICKER_RECEIVER_FETCH_MESSAGE_FALLBACK],m=[a.LOCALIZATION_TYPE.PARTICIPANT_SEND_UNRENDERABLE_MESSAGE_FALLBACK,a.LOCALIZATION_TYPE.PARTICIPANT_SEND_LOCATION_FALLBACK,a.LOCALIZATION_TYPE.PARTICIPANT_SEND_POLL_CREATION_FALLBACK,a.LOCALIZATION_TYPE.PARTICIPANT_SEND_CONTACT_SHARE_FALLBACK,a.LOCALIZATION_TYPE.PARTICIPANT_SEND_STORY_MENTION_FALLBACK,a.LOCALIZATION_TYPE.PARTICIPANT_SEND_BUMP_MESSAGE,a.LOCALIZATION_TYPE.PARTICIPANT_SEND_STICKER_RECEIVER_FETCH_MESSAGE_FALLBACK,a.LOCALIZATION_TYPE.META_AI_SEND_MESSAGE_FALLBACK,a.LOCALIZATION_TYPE.USER_SEND_UNAVAILABLE_MESSAGE_FALLBACK,a.LOCALIZATION_TYPE.USER_SEND_ENCRYPTED_MESSAGE_FALLBACK,a.LOCALIZATION_TYPE.PARTICIPANT_SEND_BUMP_MESSAGE_ORIGINAL_UNAVAILABLE_FALLBACK],n=[a.LOCALIZATION_TYPE.CURRENT_USER_BUMPED_MESSAGE,a.LOCALIZATION_TYPE.CURRENT_USER_BUMPED_OWN_MESSAGE],o=[a.LOCALIZATION_TYPE.PARTICIPANT_BUMPED_CURRENT_USER_MESSAGE,a.LOCALIZATION_TYPE.PARTICIPANT_BUMPED_OWN_MESSAGE,a.LOCALIZATION_TYPE.PARTICIPANT_BUMPED_PARTICIPANT_MESSAGE],p=[a.LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_DAYS,a.LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_HOURS,a.LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_MINUTES,a.LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_SECONDS,a.LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_OFF,a.LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_DAYS,a.LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_HOURS,a.LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_MINUTES,a.LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_SECONDS,a.LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_CHANGE_DAYS,a.LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_CHANGE_HOURS,a.LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_CHANGE_MINUTES,a.LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_CHANGE_SECONDS,a.LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_OFF,a.LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_DAYS,a.LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_HOURS,a.LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_MINUTES,a.LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_SETTING_TURNED_ON_SECONDS,a.LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_CHANGE_DAYS,a.LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_CHANGE_HOURS,a.LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_CHANGE_MINUTES,a.LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_CHANGE_SECONDS,a.LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_TURNED_OFF,a.LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_TURNED_ON_DAYS,a.LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_TURNED_ON_HOURS,a.LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_TURNED_ON_MINUTES,a.LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_TURNED_ON_SECONDS,a.LOCALIZATION_TYPE.EPHEMERAL_SETTINGS_AUTO_RESET],q=[a.LOCALIZATION_TYPE.YOUR_DEVICE_ICDC_ALERT_ADMIN_MESSAGE,a.LOCALIZATION_TYPE.ICDC_ALERT_ADMIN_MESSAGE],r=[a.LOCALIZATION_TYPE.CURRENT_USER_MISSED_AUDIO_CALL,a.LOCALIZATION_TYPE.CURRENT_USER_MISSED_VIDEO_CALL,a.LOCALIZATION_TYPE.PARTICIPANT_STARTED_GROUP_AUDIO_CALL,a.LOCALIZATION_TYPE.PARTICIPANT_STARTED_GROUP_VIDEO_CALL],s=[a.LOCALIZATION_TYPE.CURRENT_USER_AUDIO_CALLED,a.LOCALIZATION_TYPE.CURRENT_USER_STARTED_GROUP_AUDIO_CALL,a.LOCALIZATION_TYPE.CURRENT_USER_STARTED_GROUP_VIDEO_CALL,a.LOCALIZATION_TYPE.CURRENT_USER_VIDEO_CALLED,a.LOCALIZATION_TYPE.PARTICIPANT_MISSED_AUDIO_CALL,a.LOCALIZATION_TYPE.PARTICIPANT_MISSED_VIDEO_CALL,a.LOCALIZATION_TYPE.PARTICIPANT_AUDIO_CALLED,a.LOCALIZATION_TYPE.PARTICIPANT_VIDEO_CALLED],t=[a.LOCALIZATION_TYPE.CURRENT_USER_CREATED_GROUP,a.LOCALIZATION_TYPE.CURRENT_USER_MENTIONED_STORY_IG,a.LOCALIZATION_TYPE.CURRENT_USER_SENT_EVENT,a.LOCALIZATION_TYPE.CURRENT_USER_SENT_POST,a.LOCALIZATION_TYPE.CURRENT_USER_SENT_REEL,a.LOCALIZATION_TYPE.CURRENT_USER_SENT_STORY,a.LOCALIZATION_TYPE.CURRENT_USER_SENT_STORY_HIGHLIGHT,a.LOCALIZATION_TYPE.CURRENT_USER_RECEIVED_STORY_MENTION_IG,a.LOCALIZATION_TYPE.UNAVAILABLE_SNIPPET,a.LOCALIZATION_TYPE.YOU_EPHEMERAL_RECORD_SCREEN,a.LOCALIZATION_TYPE.YOU_EPHEMERAL_TAKE_SCREENSHOT,a.LOCALIZATION_TYPE.CURRENT_USER_UNSENT_MESSAGE],u=[a.LOCALIZATION_TYPE.PARTICIPANT_CREATED_GROUP,a.LOCALIZATION_TYPE.UNKNOWN_USER_CREATED_GROUP,a.LOCALIZATION_TYPE.PARTICIPANT_SEND_ATTACHMENT,a.LOCALIZATION_TYPE.PARTICIPANT_SEND_AUDIO,a.LOCALIZATION_TYPE.PARTICIPANT_SEND_GIF,a.LOCALIZATION_TYPE.PARTICIPANT_SEND_IMAGE,a.LOCALIZATION_TYPE.PARTICIPANT_SEND_STICKER,a.LOCALIZATION_TYPE.PARTICIPANT_SEND_TEXT,a.LOCALIZATION_TYPE.PARTICIPANT_SEND_TEXT_IN_GROUP,a.LOCALIZATION_TYPE.PARTICIPANT_SEND_VIDEO,a.LOCALIZATION_TYPE.PARTICIPANT_SENT_EVENT,a.LOCALIZATION_TYPE.PARTICIPANT_SENT_POST,a.LOCALIZATION_TYPE.PARTICIPANT_SENT_REEL,a.LOCALIZATION_TYPE.PARTICIPANT_SENT_STORY,a.LOCALIZATION_TYPE.PARTICIPANT_SENT_STORY_HIGHLIGHT,a.LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_RECORD_SCREEN,a.LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_TAKE_SCREENSHOT,a.LOCALIZATION_TYPE.PARTICIPANT_REACT_MESSAGE,a.LOCALIZATION_TYPE.PARTICIPANT_REACT_MESSAGE_IN_GROUP,a.LOCALIZATION_TYPE.PARTICIPANT_UNSENT_MESSAGE,a.LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_RECORD_SCREEN,a.LOCALIZATION_TYPE.UNKNOWN_USER_EPHEMERAL_TAKE_SCREENSHOT];a=[a.LOCALIZATION_TYPE.EMPTY_SNIPPET];g.cutoverAdminMsgs=b;g.deviceChanges=c;g.participantsAddedRemoved=e;g.groupPermissionsChanged=f;g.participantLeftGroup=d;g.chatCustomizedByCurrentUser=h;g.chatCustomizedByOtherUser=i;g.pinnedMessageUpdate=j;g.twoUsersConnected=k;g.fallbackMsgFromCurrentUser=l;g.fallbackMsgFromOtherUser=m;g.currentUserBumpsMessage=n;g.otherUserBumpsMessage=o;g.ephemeralSettingChanges=p;g.icdcAlerts=q;g.callActionToNotifyAbout=r;g.callActionNotToNotifyAbout=s;g.otherNonAdminMsgToBeBumped=t;g.otherNonAdminMsgToBeMarkedAsUnread=u;g.otherNonAdminMsgToNotTriggerUpdate=a}),98);
__d("MAWGetThreadUpdateTypeForAdminMsg",["FBLogger","MAWAdminMsgTypesGrouped","MAWLocalizationType","MAWThreadUpdateType"],(function(a,b,c,d,e,f,g){"use strict";function a(a){a=(a=a.msgContent)==null?void 0:a.adminType;if(a==null){c("FBLogger")("MAWCentralizedThreadUpdate").mustfix("nullAdminType");return d("MAWThreadUpdateType").THREAD_UPDATE_TYPE.NO_SNIPPET_OR_ACTIVITY_TS_UPDATE}if(h(a))return d("MAWThreadUpdateType").THREAD_UPDATE_TYPE.MARK_THREAD_AS_UNREAD;if(i(a))return d("MAWThreadUpdateType").THREAD_UPDATE_TYPE.BUMP_THREAD;if(j(a))return d("MAWThreadUpdateType").THREAD_UPDATE_TYPE.SNIPPET_ONLY;if(k(a))return d("MAWThreadUpdateType").THREAD_UPDATE_TYPE.NO_SNIPPET_OR_ACTIVITY_TS_UPDATE;c("FBLogger")("MAWCentralizedThreadUpdate").mustfix("unsupportedAdminMsgType");return d("MAWThreadUpdateType").THREAD_UPDATE_TYPE.NO_SNIPPET_OR_ACTIVITY_TS_UPDATE}function h(a){return d("MAWAdminMsgTypesGrouped").chatCustomizedByOtherUser.includes(a)||d("MAWAdminMsgTypesGrouped").callActionToNotifyAbout.includes(a)||d("MAWAdminMsgTypesGrouped").twoUsersConnected.includes(a)||d("MAWAdminMsgTypesGrouped").fallbackMsgFromOtherUser.includes(a)||d("MAWAdminMsgTypesGrouped").otherUserBumpsMessage.includes(a)||d("MAWAdminMsgTypesGrouped").otherNonAdminMsgToBeMarkedAsUnread.includes(a)||a===d("MAWLocalizationType").LOCALIZATION_TYPE.REACHABILITY_ERROR}function i(a){return d("MAWAdminMsgTypesGrouped").participantsAddedRemoved.includes(a)||d("MAWAdminMsgTypesGrouped").chatCustomizedByCurrentUser.includes(a)||d("MAWAdminMsgTypesGrouped").callActionNotToNotifyAbout.includes(a)||d("MAWAdminMsgTypesGrouped").fallbackMsgFromCurrentUser.includes(a)||d("MAWAdminMsgTypesGrouped").currentUserBumpsMessage.includes(a)||d("MAWAdminMsgTypesGrouped").otherNonAdminMsgToBeBumped.includes(a)}function j(a){return a===d("MAWLocalizationType").LOCALIZATION_TYPE.CUTOVER_ROLLBACK_ADMIN_MESSAGE||d("MAWAdminMsgTypesGrouped").ephemeralSettingChanges.includes(a)||d("MAWAdminMsgTypesGrouped").groupPermissionsChanged.includes(a)||d("MAWAdminMsgTypesGrouped").participantLeftGroup.includes(a)||d("MAWAdminMsgTypesGrouped").pinnedMessageUpdate.includes(a)}function k(a){return d("MAWAdminMsgTypesGrouped").cutoverAdminMsgs.includes(a)||d("MAWAdminMsgTypesGrouped").deviceChanges.includes(a)||d("MAWAdminMsgTypesGrouped").icdcAlerts.includes(a)||d("MAWAdminMsgTypesGrouped").otherNonAdminMsgToNotTriggerUpdate.includes(a)||a===d("MAWLocalizationType").LOCALIZATION_TYPE.E2EE_THREAD_DESCRIPTION||a===d("MAWLocalizationType").LOCALIZATION_TYPE.EMPTY_SNIPPET||a===d("MAWLocalizationType").LOCALIZATION_TYPE.DEBUG_MSG}g.getThreadUpdateTypeForAdminMsg=a}),98);
__d("MAWGetThreadUpdateType",["FBLogger","MAWDbThreadBumpMiddlewareUtils","MAWGetThreadUpdateTypeForAdminMsg","MAWThreadSnippetUtils","MAWThreadUpdateMiddlewareGKUtil","MAWThreadUpdateType","MAWUserJidWrapper","WAJids","err"],(function(a,b,c,d,e,f,g){"use strict";function h(a,b){return b&&!d("MAWThreadUpdateMiddlewareGKUtil").isThreadUpdateEnabledViaMiddlewareForMsgType(a.type)?d("MAWThreadUpdateType").THREAD_UPDATE_TYPE.NO_SNIPPET_OR_ACTIVITY_TS_UPDATE:m(a.type)(a)}function i(a){c("FBLogger")("MAWCentralizedThreadUpdate").mustfix("GetThreadUpdateType not implemented for message type %s",a.type);return d("MAWThreadUpdateType").THREAD_UPDATE_TYPE.NO_SNIPPET_OR_ACTIVITY_TS_UPDATE}function j(a,b){if(b&&!d("MAWThreadUpdateMiddlewareGKUtil").isThreadUpdateEnabledViaMiddlewareForReactions())return d("MAWThreadUpdateType").THREAD_UPDATE_TYPE.NO_SNIPPET_OR_ACTIVITY_TS_UPDATE;b=k(a.reactToAuthor);var c=!k(a.author);a=a.reaction==null;return b&&c&&!a?d("MAWThreadUpdateType").THREAD_UPDATE_TYPE.MARK_THREAD_AS_UNREAD:d("MAWThreadUpdateType").THREAD_UPDATE_TYPE.NO_SNIPPET_OR_ACTIVITY_TS_UPDATE}function k(a){return a===d("WAJids").AUTHOR_ME||a===d("MAWUserJidWrapper").getMyUserJid()}function l(a,b){var c=b.me;b=b.other;return d("WAJids").isAuthorMe(a.author)?c:b}function m(a){switch(a){case"Text":case"ReceiverFetch":case"Sticker":case"Unavailable":case"Video":case"Futureproof":case"DocumentFile":case"EphemeralScreenshotAction":case"Gif":case"Image":case"Ptt":case"RavenAction":case"Raven":case"GroupPollCreate":case"GroupPollUpdate":return function(a){return l(a,{me:d("MAWThreadUpdateType").THREAD_UPDATE_TYPE.BUMP_THREAD,other:d("MAWThreadUpdateType").THREAD_UPDATE_TYPE.MARK_THREAD_AS_UNREAD})};case"XMA":return function(a){return d("MAWThreadSnippetUtils").shouldIgnoreXMAMsgForSnippet(a)?d("MAWThreadUpdateType").THREAD_UPDATE_TYPE.NO_SNIPPET_OR_ACTIVITY_TS_UPDATE:l(a,{me:d("MAWThreadUpdateType").THREAD_UPDATE_TYPE.BUMP_THREAD,other:d("MAWThreadUpdateType").THREAD_UPDATE_TYPE.MARK_THREAD_AS_UNREAD})};case"Revoked":return function(){return d("MAWThreadUpdateType").THREAD_UPDATE_TYPE.BUMP_THREAD};case"DeleteForMe":return function(){return d("MAWThreadUpdateType").THREAD_UPDATE_TYPE.NO_SNIPPET_OR_ACTIVITY_TS_UPDATE};case"BumpExistingMessage":return function(){return d("MAWThreadUpdateType").THREAD_UPDATE_TYPE.BUMP_THREAD};case"EditAction":return function(a){return l(a,{me:d("MAWThreadUpdateType").THREAD_UPDATE_TYPE.SNIPPET_ONLY,other:d("MAWThreadUpdateType").THREAD_UPDATE_TYPE.NO_SNIPPET_OR_ACTIVITY_TS_UPDATE})};case"GroupInvite":return function(){return d("MAWThreadUpdateType").THREAD_UPDATE_TYPE.BUMP_THREAD};case"Admin":return function(a){if(a.type==="Admin")return d("MAWGetThreadUpdateTypeForAdminMsg").getThreadUpdateTypeForAdminMsg(a);throw c("err")("Non-admin msg passed in "+((a=a.type)!=null?a:"UNKNOWN"))};case"SenderKeyDistribution":return function(){return d("MAWThreadUpdateType").THREAD_UPDATE_TYPE.NO_SNIPPET_OR_ACTIVITY_TS_UPDATE};case"AlertICDC":return function(){return d("MAWThreadUpdateType").THREAD_UPDATE_TYPE.BUMP_THREAD};case"Ciphertext":return function(){return d("MAWThreadUpdateType").THREAD_UPDATE_TYPE.BUMP_THREAD};case"EphemeralSettingAdmin":case"EphemeralSettingChangeFromCurrentDevice":case"EphemeralSyncResponse":return function(){return d("MAWThreadUpdateType").THREAD_UPDATE_TYPE.SNIPPET_ONLY};case"ExpiredEphemeral":return i}}function a(a){return d("MAWDbThreadBumpMiddlewareUtils").switchOnMsgOrReactionNullish(a,{forMessage:function(a){return h(a,!0)},forNull:function(){return d("MAWThreadUpdateType").THREAD_UPDATE_TYPE.NO_SNIPPET_OR_ACTIVITY_TS_UPDATE},forReaction:function(a){return j(a,!0)}})}g.getThreadUpdateTypeForMsg=h;g.getThreadUpdateTypeForReaction=j;g.getThreadUpdateTypeForMsgOrReaction=a}),98);
__d("MAWUpdateThreadBumpTimestamp",["I64","MAWAckLevel","MAWBridgeTypesCreators","MAWCalculateBumpTimestampMs","MAWDbThreadBumpMiddlewareUtils","MAWIndexedDb","MAWMsgType","MAWODSProxy","MAWThreadBumpType","MAWThreadSnippetUtils","MAWThreadUpdateMiddlewareGKUtil","MAWThreadUpdateType","WAJids","gkx","nullthrows"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){var b=a.bumpMsgOrReaction,e=a.db,f=a.isThrottled,g=f===void 0?!1:f,h=a.odsBumpParams;f=a.sentByLocalDevice;var m=f===void 0?!1:f,n=a.thread,o=a.threadUpdateType,p=a.unbumpTrigger;f=p!=null;return d("MAWThreadSnippetUtils").getThreadSnippetFromScratch(e,n.jid,!f).then(function(a){var e;e=k((e=p)!=null?e:b,a,o);var f;switch(e){case d("MAWThreadUpdateType").THREAD_UPDATE_TYPE.NO_SNIPPET_OR_ACTIVITY_TS_UPDATE:f=!1;break;case d("MAWThreadUpdateType").THREAD_UPDATE_TYPE.SNIPPET_ONLY:f=!0;i("Updating snippet only since no message is eligible for bump",n,c("nullthrows")(a));break;case d("MAWThreadUpdateType").THREAD_UPDATE_TYPE.MARK_THREAD_AS_UNREAD:case d("MAWThreadUpdateType").THREAD_UPDATE_TYPE.BUMP_THREAD:f=!0;var q=l(b,p,m,g);j(c("nullthrows")(b),q,n,e,c("nullthrows")(a));break;default:e;f=!1;break}f&&d("MAWODSProxy").odsBumpEntityKey(h)})}function i(a,b,c){var e;d("MAWIndexedDb").afterTransaction({tag:"CentralizedThreadUpdate",value:d("MAWBridgeTypesCreators").createBridgeCentralizedThreadUpdate({centralizedThreadBumpData:null,centralizedThreadSnippetData:{snippetContactIDs:c.snippetParams.contactIDs,snippetMentionJIDs:(e=c.snippetParams.mentionJIDs)!=null?e:[],snippetParams:c.snippetParams.strings,snippetSenderContactId:c.snippetSenderContactId,snippetType:c.snippetType},description:a,jid:b.jid,threadUpdateType:d("MAWThreadUpdateType").THREAD_UPDATE_TYPE.SNIPPET_ONLY})})}function j(a,b,c,e,f){d("MAWIndexedDb").afterTransaction({tag:"CentralizedThreadUpdate",value:d("MAWBridgeTypesCreators").createBridgeCentralizedThreadUpdate({centralizedThreadBumpData:b,centralizedThreadSnippetData:{snippetContactIDs:f.snippetParams.contactIDs,snippetMentionJIDs:(b=f.snippetParams.mentionJIDs)!=null?b:[],snippetParams:f.snippetParams.strings,snippetSenderContactId:f.snippetSenderContactId,snippetType:f.snippetType},description:d("MAWDbThreadBumpMiddlewareUtils").switchOnMsgOrReaction(a,{forMessage:function(a){return"CentralizedThreadUpdate-MsgType:"+a.type},forReaction:function(){return"CentralizedThreadUpdate-Reaction"}}),jid:c.jid,threadUpdateType:e})})}function k(a,b,c){var e=d("MAWThreadUpdateType").THREAD_UPDATE_TYPE.NO_SNIPPET_OR_ACTIVITY_TS_UPDATE;b=b!=null;var f=d("MAWDbThreadBumpMiddlewareUtils").switchOnMsgOrReactionNullish(a,{forMessage:function(b){return d("MAWThreadUpdateMiddlewareGKUtil").isThreadUpdateEnabledViaMiddlewareForMsgType(b.type)&&(a==null?void 0:a.type)!==d("MAWMsgType").MSG_TYPE.REVOKED},forNull:function(){return!1},forReaction:function(){return d("MAWThreadUpdateMiddlewareGKUtil").isThreadUpdateEnabledViaMiddlewareForReactions()}});switch(c){case d("MAWThreadUpdateType").THREAD_UPDATE_TYPE.NO_SNIPPET_OR_ACTIVITY_TS_UPDATE:return c;case d("MAWThreadUpdateType").THREAD_UPDATE_TYPE.SNIPPET_ONLY:return b?c:e;case d("MAWThreadUpdateType").THREAD_UPDATE_TYPE.MARK_THREAD_AS_UNREAD:case d("MAWThreadUpdateType").THREAD_UPDATE_TYPE.BUMP_THREAD:if(f&&b)return c;else if(b)return d("MAWThreadUpdateType").THREAD_UPDATE_TYPE.SNIPPET_ONLY;else return e;default:c;return e}}function l(a,b,c,e){var f=b!=null;return{bumpedByLocalDeviceSend:c,bumpTimestampMs:n(a),isAuthorMe:d("MAWDbThreadBumpMiddlewareUtils").switchOnMsgOrReactionNullish((c=b)!=null?c:a,{forMessage:function(a){return a.author===d("WAJids").AUTHOR_ME},forNull:function(){return!1},forReaction:function(a){return a.author===d("WAJids").AUTHOR_ME}}),isThrottled:e,isUnbump:f,threadBumpType:m((c=b)!=null?c:a,f)}}function m(a,b){return d("MAWDbThreadBumpMiddlewareUtils").switchOnMsgOrReactionNullish(a,{forMessage:function(a){return d("MAWAckLevel").isMsgAuthoritative(a.ack)&&a.serverTs!=null?d("MAWThreadBumpType").THREAD_BUMP_TYPE.LOCAL_AND_SERVER:c("gkx")("7698")?d("MAWThreadBumpType").THREAD_BUMP_TYPE.NO_UPDATE:d("MAWThreadBumpType").THREAD_BUMP_TYPE.LOCAL_ONLY},forNull:function(){return d("MAWThreadBumpType").THREAD_BUMP_TYPE.NO_UPDATE},forReaction:function(){return b&&!c("gkx")("7007")?d("MAWThreadBumpType").THREAD_BUMP_TYPE.LOCAL_ONLY:d("MAWThreadBumpType").THREAD_BUMP_TYPE.LOCAL_AND_SERVER}})}function n(a){return d("MAWDbThreadBumpMiddlewareUtils").switchOnMsgOrReactionNullish(a,{forMessage:function(a){return d("MAWCalculateBumpTimestampMs").calculateBumpTimestampMsForMsg({msg:a,throwIfNoServerTs:d("MAWAckLevel").isMsgAuthoritative(a.ack)&&a.serverTs!=null})},forNull:function(){return(h||(h=d("I64"))).zero},forReaction:d("MAWCalculateBumpTimestampMs").calculateBumpTimestampMsForReaction})}g.updateThreadViaCentralizedThreadUpdate=a;g.updateSnippetViaCentralizedThreadHandler=i}),98);
__d("MAWDbThreadBumpMiddlewareUtils",["I64","MAWCalculateBumpTimestampMs","MAWDbMsg","MAWDbReaction","MAWGetThreadUpdateType","MAWThreadUpdateType","WATimeUtils","emptyArray","err","nullthrows"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){a=a.reduce(function(a,b){return a.set(b.threadJid,[].concat((a=a.get(b.threadJid))!=null?a:c("emptyArray"),[b]).toSorted(function(a,b){return i(b,a)}))},new Map());var b=new Map();a.forEach(function(a,e){var f=null,g=d("MAWThreadUpdateType").THREAD_UPDATE_TYPE.SNIPPET_ONLY;for(var a=a,h=Array.isArray(a),i=0,a=h?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var k;if(h){if(i>=a.length)break;k=a[i++]}else{i=a.next();if(i.done)break;k=i.value}k=k;var l=d("MAWGetThreadUpdateType").getThreadUpdateTypeForMsg(k,!1);switch(l){case d("MAWThreadUpdateType").THREAD_UPDATE_TYPE.NO_SNIPPET_OR_ACTIVITY_TS_UPDATE:case d("MAWThreadUpdateType").THREAD_UPDATE_TYPE.SNIPPET_ONLY:continue;case d("MAWThreadUpdateType").THREAD_UPDATE_TYPE.BUMP_THREAD:f=j(f,k);g=d("MAWThreadUpdateType").THREAD_UPDATE_TYPE.BUMP_THREAD;break;case d("MAWThreadUpdateType").THREAD_UPDATE_TYPE.MARK_THREAD_AS_UNREAD:f=j(f,k);g=d("MAWThreadUpdateType").THREAD_UPDATE_TYPE.MARK_THREAD_AS_UNREAD;break;default:throw c("err")("[MAWCentralizedThreadUpdate] Unhandled threadUpdateType "+l)}if(f!=null)break}b.set(e,{bumpMsg:f,threadUpdateType:g})});return b}function i(a,b){var c;c=(c=a.sortOrderMs)!=null?c:(h||(h=d("I64"))).to_float(d("MAWCalculateBumpTimestampMs").calculateBumpTimestampMsForMsg({msg:a,throwIfNoServerTs:!1}));a=(a=b.sortOrderMs)!=null?a:(h||(h=d("I64"))).to_float(d("MAWCalculateBumpTimestampMs").calculateBumpTimestampMsForMsg({msg:b,throwIfNoServerTs:!1}));return c-a}function j(a,b){if(a==null||b==null){var d;return c("nullthrows")((d=a)!=null?d:b,"both messages are null")}return i(a,b)>0?a:b}function b(a){return a.msgId!=null?d("WATimeUtils").castToMillisTime(d("MAWDbMsg").getSortOrderWithFallback(a)):d("MAWDbReaction").getReactionTimeMs(a)}function e(a,b){return a.msgId!=null?b.forMessage(a):b.forReaction(a)}function f(a,b){return a==null?b.forNull():a.msgId!=null?b.forMessage(a):b.forReaction(a)}function k(a){return a.reduce(function(a,b){b.type==null?(a.reactions==null&&(a.reactions=0),a.reactions+=1):(a[b.type]==null&&(a[b.type]=0),a[b.type]+=1);return a},{})}g.createThreadUpdateInfoWithoutSnippetMsgFromInsertedMsgs=a;g.getMsgOrReactionTimeMs=b;g.switchOnMsgOrReaction=e;g.switchOnMsgOrReactionNullish=f;g.getMessageTypesFromValues=k}),98);
__d("last",[],(function(a,b,c,d,e,f){"use strict";function a(a){var b=null;if(Array.isArray(a)||typeof a==="string")a.length&&(b={value:a[a.length-1]});else for(var a=a,c=Array.isArray(a),d=0,a=c?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=a.length)break;e=a[d++]}else{d=a.next();if(d.done)break;e=d.value}e=e;b=b||{};b.value=e}return b?b.value:null}f["default"]=a}),66);
__d("MAWThreadNewestMsgOrReactionUtils",["MAWDbMsg","MAWDbMsgTxns","MAWDbReaction","MAWDbReactionsTxns","MAWDbThreadBumpMiddlewareUtils","MAWGetThreadUpdateType","MAWThreadUpdateMiddlewareGKUtil","MAWThreadUpdateType","WALogger","WAMsg","WATimeUtils","err","first","last"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["[CentralizedThreadUpdate] No Reaction or Message in "," is eligible for snippet"]);h=function(){return a};return a}function a(a,b){return l(a,b,{checkIfMiddlewareIsEnabled:!1,filter:i})}function i(a,b){switch(a){case d("MAWThreadUpdateType").THREAD_UPDATE_TYPE.BUMP_THREAD:case d("MAWThreadUpdateType").THREAD_UPDATE_TYPE.MARK_THREAD_AS_UNREAD:return b!==!0;case d("MAWThreadUpdateType").THREAD_UPDATE_TYPE.NO_SNIPPET_OR_ACTIVITY_TS_UPDATE:case d("MAWThreadUpdateType").THREAD_UPDATE_TYPE.SNIPPET_ONLY:return!1;default:throw c("err")("[MAWCentralizedThreadUpdate] Unhandled threadUpdateType to create filter function : "+a)}}function b(a,b,c){c===void 0&&(c=!0);return l(a,b,{checkIfMiddlewareIsEnabled:c,filter:j})}function j(a,b){switch(a){case d("MAWThreadUpdateType").THREAD_UPDATE_TYPE.SNIPPET_ONLY:case d("MAWThreadUpdateType").THREAD_UPDATE_TYPE.BUMP_THREAD:case d("MAWThreadUpdateType").THREAD_UPDATE_TYPE.MARK_THREAD_AS_UNREAD:return b!==!0;case d("MAWThreadUpdateType").THREAD_UPDATE_TYPE.NO_SNIPPET_OR_ACTIVITY_TS_UPDATE:return!1;default:throw c("err")("[MAWCentralizedThreadUpdate] Unhandled threadUpdateType to create filter function : "+a)}}function k(a,b,c){return m(a,b,c).then(function(e){return n(a,b,c,e!=null?d("MAWDbMsg").getSortOrderWithFallback(e):Number.MIN_SAFE_INTEGER).then(function(a){if(e==null&&a==null){d("WALogger").WARN(h(),b);return null}if(a==null)return e;if(e==null)return a;var c=d("WATimeUtils").castToMillisTime(d("MAWDbMsg").getSortOrderWithFallback(e)),f=d("MAWDbReaction").getReactionTimeMs(a);return c>=f?e:a})})}function l(a,b,c){return k(a,b,c.filter).then(function(a){return!c.checkIfMiddlewareIsEnabled?a:d("MAWDbThreadBumpMiddlewareUtils").switchOnMsgOrReactionNullish(a,{forMessage:function(a){return d("MAWThreadUpdateMiddlewareGKUtil").isThreadUpdateEnabledViaMiddlewareForMsgType(a.type)?a:null},forNull:function(){return null},forReaction:function(a){return d("MAWThreadUpdateMiddlewareGKUtil").isThreadUpdateEnabledViaMiddlewareForReactions()?a:null}})})}function m(a,b,e){return d("MAWDbMsgTxns").fetchMessagesFromDbWithSortOrderMs(a,b,null,!0,1,function(a){return e(d("MAWGetThreadUpdateType").getThreadUpdateTypeForMsg(a,!1),a.ephemeralMsgDisappeared===!0)},"before").then(c("first"))}function n(a,b,e,f){f===void 0&&(f=Number.MIN_SAFE_INTEGER);var g=function(c,g){return d("MAWDbReactionsTxns").fetchReactionsFromDbWithTimestamp(a,b,g,g==null,c,function(a){return e(d("MAWGetThreadUpdateType").getThreadUpdateTypeForReaction(a,!1),!1)&&d("MAWDbReaction").getReactionTimeMs(a)>f})},h=[1,10],i=100,j=new Set(),k=function b(d,e){var f;return g((f=h[d])!=null?f:i,e).then(function(e){return e.length===0?null:o(a,e.filter(function(a){return!j.has(q(a))})).then(function(a){var f=a.newestReaction;a=a.nullMsgIds;if(f!=null)return f;a.forEach(function(a){return j.add(a)});return b(d+1,c("last")(e))})})};return k(0,null)}function o(a,b){return d("MAWDbMsgTxns").getUniqueMsgsByProtocolMsgIds(a,b.map(p)).then(function(a){var c=new Set(a.map(r)),d=new Set(),e=null;b.forEach(function(a){var b=q(a);c.has(b)?e=s(e,a):d.add(b)});return{newestReaction:e,nullMsgIds:d}})}function p(a){return{author:a.reactToAuthor,chat:a.threadJid,externalId:a.reactToExternalId}}function q(a){return d("WAMsg").craftWAMsgIdString(p(a))}function r(a){return d("WAMsg").craftWAMsgIdString({author:a.author,chat:a.threadJid,externalId:a.externalId})}function s(a,b){if(a==null)return b;return b==null?a:d("MAWDbReaction").getReactionTimeMs(a)>d("MAWDbReaction").getReactionTimeMs(b)?a:b}g.getNewestMsgOrReactionForBump=a;g.getNewestMsgOrReactionForSnippet=b;g.getNewestReactionToNonNullMsg=o}),98);
__d("MAWDbGroupInfoTxns",["MAWBridgeTypesCreators","MAWIndexedDb","WAResultOrError"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){return h(a,b.jid).then(function(c){var d=b.participantVersion;c.success&&c.value.participantVersion!=null&&b.participantVersion==null&&(d=c.value.participantVersion);c=b.subject.content;c!=null&&c.length===0&&(c=void 0);var e={creationTs:b.creationTs,creator:b.creator,groupJid:b.jid,inviter:b.inviter,memberAddMode:b.memberAddMode,name:c,nameOwner:b.subject.user,nameTs:b.subject.ts,participantVersion:d};return i(a,e).then(function(){return e})})}function h(a,b){return a.groupInfo.get({groupJid:b}).then(function(a){return a==null?d("WAResultOrError").makeError("missing"):d("WAResultOrError").makeResult(a)})}function i(a,b){return a.groupInfo.put(b).then(function(){d("MAWIndexedDb").afterTransaction({tag:"GroupInfoUpdated",value:d("MAWBridgeTypesCreators").createBridgeUpdatedGroupInfo(b)})})}function b(a,b){return a.groupInfo.bulkPut(b).then(function(){b.forEach(function(a){return d("MAWIndexedDb").afterTransaction({tag:"GroupInfoUpdated",value:d("MAWBridgeTypesCreators").createBridgeUpdatedGroupInfo(a)})})})}function c(a,b){return a.groupInfo.bulkGet(b)}function e(a,b){return a.groupInfo["delete"](b)}g.putGroupInfo=a;g.getGroupInfo=h;g.updateGroupInfo=i;g.bulkUpdateGroupInfo=b;g.getGroupInfos=c;g.deleteGroupInfo=e}),98);
__d("MAWThreadSnippetBuildTxns",["$InternalEnum","FBLogger","I64","MAWBridgeTypesCreators","MAWCalculateBumpTimestampMs","MAWDbGroupInfoTxns","MAWDbMsg","MAWDexieTable","MAWIndexedDb","MAWJidUtils","MAWLocalizationType","MAWMsgType","MAWThreadSnippet","MAWThreadSnippetUtils","MAWThreadUpdateMiddlewareGKUtil","MAWUserJidWrapper","WAJids","WALongInt","WAProtocolMsgId","WATimeUtils","emptyFunction","justknobx"],(function(a,b,c,d,e,f,g){"use strict";var h,i=b("$InternalEnum").Mirrored(["DO_NOT_BUMP_THREAD","MATCH_BUMP_TIMESTAMP_MS_TO_SNIPPET"]);function j(a,b,c){return d("MAWDexieTable").dexieAll([d("MAWDbGroupInfoTxns").getGroupInfo(a,d("WAJids").toGroupJid(b.threadJid))]).then(function(a){a=a[0];a=a.success;return d("MAWThreadSnippet").buildThreadSnippet(b,a,c)})}function a(a,b,c,e){return d("MAWDexieTable").dexieAll([d("MAWDbGroupInfoTxns").getGroupInfo(a,d("WAJids").toGroupJid(e))]).then(function(a){a=a[0];a=a.success;return k(b,c,a)})}function k(a,b,e){var f;d("WAJids").isAuthorMe(a)?(c("FBLogger")("maw_db").warn("[MAWThreadSnippetBuildTxns] Reaction snippet author should not be @me"),f=d("WAJids").userIdFromJid(d("MAWUserJidWrapper").getMyUserJid())):f=d("WAJids").userIdFromJid(a);a={contactIDs:[],strings:[]};e=e?d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REACT_MESSAGE_IN_GROUP:d("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REACT_MESSAGE;a.contactIDs.push(f);a.strings.push(b);return{snippetParams:a,snippetSenderContactId:f,snippetType:e}}function e(a,b,e,f){var g=e.newestReaction,h=e.reactionsToClear;if(g!=null&&d("WATimeUtils").castUnixTimeToMillisTime(g.ts)>((e=b.snippetMsgTs)!=null?e:0))return d("MAWDexieTable").dexieResolve({newestReaction:g,thread:l(b,g,f)});e=c("justknobx")._("2763")?h!=null&&h.length>0:h!=null;return e&&b.snippetMsg!=null?a.reactions.get({reactionId:b.snippetMsg}).then(function(c){var e=!1;if(c==null)e=!0;else{var f=d("MAWJidUtils").maybeToProtocolMsgId(c.author,c.threadJid,c.reactToExternalId);f!=null&&(e=h.some(function(a){a=d("MAWJidUtils").maybeToProtocolMsgId(a.author,a.threadJid,a.reactToExternalId);return a!=null&&d("WAProtocolMsgId").equals(a,f)}))}return e?m(a,{bumpThreadOption:i.DO_NOT_BUMP_THREAD,isUnbump:!0,thread:b}).then(function(a){return{newestReaction:null,thread:a}}):d("MAWDexieTable").dexieResolve({newestReaction:null,thread:b})}):d("MAWDexieTable").dexieResolve({newestReaction:null,thread:b})}function l(a,b,c){if(!d("MAWThreadUpdateMiddlewareGKUtil").isThreadUpdateEnabledViaMiddlewareForReactions()){var e=d("WATimeUtils").castUnixTimeToMillisTime(b.ts);c=k(b.author,b.reaction,c);var f=c.snippetParams,g=c.snippetSenderContactId;c=c.snippetType;var i=b.externalId!==void 0?(h||(h=d("I64"))).of_string_opt(b.externalId):void 0;e=b.senderTimestampMs!=null?(h||(h=d("I64"))).of_string(d("WALongInt").longIntToDecimalString(b.senderTimestampMs)):d("MAWCalculateBumpTimestampMs").calculateBumpTimestampMs(e,i);d("MAWIndexedDb").afterTransaction({tag:"ThreadBumpedV2",value:d("MAWBridgeTypesCreators").createBridgeBumpedThreadV2({bumpTimestampMs:e,description:"newReaction",isMessageAuthorMe:!1,snippetData:{params:f,senderContactId:g,type:c},threadJid:a.jid})})}return babelHelpers["extends"]({},a,{snippetMsg:b.reactionId,snippetMsgTs:d("WATimeUtils").castUnixTimeToMillisTime(b.ts)})}function m(a,b){var e=b.bumpMessageAuthorMap,f=b.bumpThreadOption,g=b.isUnbump,k=g===void 0?!1:g,l=b.thread;return d("MAWThreadSnippetUtils").recalculateSnippetFromScratch_EXPENSIVE(a,l).then(function(b){if(b==null){d("MAWThreadUpdateMiddlewareGKUtil").isThreadUpdateEnabledViaMiddlewareForMsgType(d("MAWMsgType").MSG_TYPE.TEXT)?c("FBLogger")("MAWCentralizedThreadUpdate").mustfix("[Occamadillo] ThreadUpdated handler called for clear snippet when centralized thread bump is enabled"):d("MAWIndexedDb").afterTransaction({tag:"ThreadUpdated",value:d("MAWBridgeTypesCreators").createBridgeUpdatedThread({snippetParams:{contactIDs:[],strings:[]},snippetSenderContactId:"0",snippetType:d("MAWLocalizationType").LOCALIZATION_TYPE.EMPTY_SNIPPET,threadJid:l.jid})});return babelHelpers["extends"]({},l,{snippetMsg:void 0,snippetMsgTs:void 0})}var g=e==null?void 0:e.get(b.externalId);return j(a,b,g).then(function(a){var c=a.snippetParams,e=a.snippetSenderContactId;a=a.snippetType;var g=d("WATimeUtils").castUnixTimeToMillisTime(d("MAWDbMsg").getCanonicalTsFromMsg(b));switch(f){case i.DO_NOT_BUMP_THREAD:d("MAWThreadUpdateMiddlewareGKUtil").isThreadUpdateEnabledViaMiddlewareForMsgType(b.type)||d("MAWIndexedDb").afterTransaction({tag:"ThreadUpdated",value:d("MAWBridgeTypesCreators").createBridgeUpdatedThread({snippetParams:c,snippetSenderContactId:e,snippetType:a,threadJid:l.jid})});break;case i.MATCH_BUMP_TIMESTAMP_MS_TO_SNIPPET:if(!d("MAWThreadUpdateMiddlewareGKUtil").isThreadUpdateEnabledViaMiddlewareForMsgType(b.type)){var j=d("MAWCalculateBumpTimestampMs").calculateBumpTimestampMs(g,(h||(h=d("I64"))).of_string_opt(b==null?void 0:b.externalId));d("MAWIndexedDb").afterTransaction({tag:"ThreadBumpedV2",value:d("MAWBridgeTypesCreators").createBridgeBumpedThreadV2({bumpTimestampMs:j,description:"getRefreshThreadSnippetChangeset",isMessageAuthorMe:b.author==="@me",isUnbump:k,skipBumpTimestampValidation:!0,skipServerThreadBump:!1,snippetData:{params:c,senderContactId:e,type:a},threadJid:l.jid})})}}return babelHelpers["extends"]({},l,{snippetMsg:b.msgId,snippetMsgTs:g})})})}function f(a,b,d){return m(a,{bumpMessageAuthorMap:d,bumpThreadOption:i.DO_NOT_BUMP_THREAD,thread:b}).then(function(b){return a.threads.put(b).then(c("emptyFunction"))})}g.buildThreadSnippet=j;g.buildReactionThreadSnippet=a;g.getReactionSnippetParams=k;g.getThreadChangesetForReactionChanges=e;g.getThreadChangesetForNewReaction=l;g.refreshThreadSnippet=f}),98);
__d("MAWEphemeralMsgUtils",[],(function(a,b,c,d,e,f){"use strict";function a(a){return function(b){return!a.has(b.msgId)&&b.ephemeralMsgDisappeared!==!0}}f.filterNonExpiredMsg=a}),66);
__d("MAWThreadSnippetUtils",["FBLogger","MAWBridgeTypesCreators","MAWDbMsg","MAWDbReaction","MAWDexieTable","MAWEphemeralMsgUtils","MAWIndexedDb","MAWLocalizationType","MAWLocalizationUtils","MAWMsgType","MAWThreadNewestMsgOrReactionUtils","MAWThreadSnippetBuildTxns","MAWThreadUpdateMiddlewareGKUtil","MAWUpdateThreadBumpTimestamp","MAWXMAUtils","WALogger","performance"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[MAWCentralizedThreadUpdate] Snippet Updated using cached field as no snippet is found from scratch. jid: ",""]);i=function(){return a};return a}function j(a){var b;if(q(a))return!0;b=((b=a.msgContent)==null?void 0:b.adminType)!=null?d("MAWLocalizationUtils").isDeviceChangeAdminMsg(a.msgContent.adminType):!1;if(a.type!==d("MAWMsgType").MSG_TYPE.ADMIN)return!1;a=a.msgContent.adminType;return a===d("MAWLocalizationType").LOCALIZATION_TYPE.DEBUG_MSG?!0:b}function a(a,b,c){return a.messages.where("[threadJid+sortOrderMs]").between([b.jid,Number.MIN_SAFE_INTEGER],[b.jid,Number.MAX_SAFE_INTEGER],!1,!1).filter(function(a){return(c==null||d("MAWEphemeralMsgUtils").filterNonExpiredMsg(c)(a))&&!j(a)}).reverse().first()}function k(a,b){return m(a,b).then(function(a){if(a!=null){var c=a.snippetParams,e=a.snippetSenderContactId;a=a.snippetType;d("MAWIndexedDb").afterTransaction({tag:"ThreadUpdated",value:d("MAWBridgeTypesCreators").createBridgeUpdatedThread({snippetParams:c,snippetSenderContactId:e,snippetType:a,threadJid:b.jid})})}})}function l(a,b,c,e){e=e!=null?d("MAWDbReaction").castToIncomingDbReaction(e):e;return e!=null&&e.ts>(b!=null?d("MAWDbMsg").getCanonicalTsFromMsg(b):0)?d("MAWThreadSnippetBuildTxns").buildReactionThreadSnippet(a,e.author,e.reaction,c):b==null?d("MAWDexieTable").dexieResolve():d("MAWThreadSnippetBuildTxns").buildThreadSnippet(a,b)}function m(a,b){var e=b.newestMsg,f=b.snippetMsg,g=(f=f)!=null?f:e;return g==null?d("MAWDexieTable").dexieResolve():d("MAWDexieTable").dexieAll([a.messages.get({msgId:g}),a.reactions.get({reactionId:g})]).then(function(d){var e=d[0];d=d[1];e!=null&&d!=null&&c("FBLogger")("maw_db").warn("[MAWUpdateThreadSnippet] msgId collision detected between Reaction and Message. jid: %s, msgId: %s",b.jid,g);return l(a,e,b.jid,d)})}var n={snippetParams:{contactIDs:[],mentionJIDs:[],strings:[]},snippetSenderContactId:null,snippetType:d("MAWLocalizationType").LOCALIZATION_TYPE.EMPTY_SNIPPET};function o(a,b){return p(a,b.jid).then(function(c){if(c==null)return k(a,b).then(function(){d("WALogger").WARN(i(),b.jid)});d("MAWUpdateThreadBumpTimestamp").updateSnippetViaCentralizedThreadHandler("calculateAndUpdateSnippetToUI",b,c)})}function p(a,b,e){e===void 0&&(e=!0);var f=(h||(h=c("performance"))).now();return d("MAWThreadNewestMsgOrReactionUtils").getNewestMsgOrReactionForSnippet(a,b,e).then(function(e){var g=(h||(h=c("performance"))).now();c("FBLogger")("MAWCentralizedThreadUpdate").warn("[getThreadSnippetFromScratch] Recalculating snippet from scratch took %s ms",g-f);if(e==null){if(d("MAWThreadUpdateMiddlewareGKUtil").isMiddlewareFullyRolledOut())return n;return}return l(a,e.msgId!=null?e:null,b,e.reactionId!=null?e:null).then(function(a){return a})})}function b(a,b){return d("MAWThreadUpdateMiddlewareGKUtil").isSnippetRecalculationEnabled()?o(a,b):k(a,b)}function q(a){return d("MAWXMAUtils").isXMAStoryReply(a.xmaMessageType)||d("MAWXMAUtils").isXMAMsgHighlightsTabFriendUpdatesReply(a.xmaMessageType)}g.isDbMsgDisabledForThreadSnippet=j;g.recalculateSnippetFromScratch_EXPENSIVE=a;g.updateExistingSnippetToUI=k;g.EMPTY_SNIPPET_DATA=n;g.calculateAndUpdateSnippetToUI=o;g.getThreadSnippetFromScratch=p;g.updateSnippetToUIOnPageLoad=b;g.shouldIgnoreXMAMsgForSnippet=q}),98);
__d("MAWUpdateQuotedMsgTxns",["MAWAuthor","MAWBridgeMsg","MAWDbXMATxns","MAWDexieTable","MAWIndexedDb","MAWLoadReplyMediaTxns","MAWMsgType","WAJids","gkx"],(function(a,b,c,d,e,f,g){"use strict";var h=function(a,b,c,e,f,g,h){var i=d("MAWAuthor").getAuthorUserJid(e);return a.messages.where("quoteExternalId").equals(c).toArray().then(function(c){if(c.length===0)return;var e=c;(h==null||!h)&&(e=c.filter(function(a){var c=a.quote;a=a.threadJid;return d("MAWAuthor").getAuthorUserJid(c==null?void 0:c.content.author)===i&&a===b}));var j=e.map(function(a){var b;b=Object.assign({},(b=a.quote)==null?void 0:b.content,f.content);b=babelHelpers["extends"]({},a.quote,f,{content:b});b.content.msgId==null&&g!=null&&(b.content.msgId=g);return babelHelpers["extends"]({},a,{quote:b})});return a.messages.bulkPut(j).then(function(){return j})})},i=function(a,b,c,e,f){f===void 0&&(f=d("MAWMsgType").MSG_TYPE.UNAVAILABLE);f={content:{mediaId:void 0,msgContent:void 0,type:f}};return h(a,b,c,e,f).then(function(a){if(a==null)return;a.forEach(function(a){d("MAWIndexedDb").afterTransaction({tag:"MsgUpdated",value:d("MAWBridgeMsg").createBridgeMsg(a)})})})};b=function(a,b,c){c===void 0&&(c=d("MAWMsgType").MSG_TYPE.UNAVAILABLE);var e=b.author,f=b.chat,g=b.externalId;return a.threads.get({jid:f}).then(function(b){if(b==null)return;return i(a,b.jid,g,e,c)})};var j=function(a,b,c,e){var f=c.author,g=c.externalId,i=c.mediaId,j=c.msgContent,k=c.msgId,l=c.plaintextHash,m=c.ts,n=c.type;if(d("WAJids").isAuthorSystem(f))return d("MAWDexieTable").dexieResolve();var o={author:f,chat:b,externalId:g};if(!d("MAWMsgType").isQuotedMsgType(n))return d("MAWDexieTable").dexieResolve();var p=d("MAWDexieTable").dexieResolve(null);c.type===d("MAWMsgType").MSG_TYPE.XMA&&(p=d("MAWDbXMATxns").maybeGetXMAPayloadFromProtocolMsgId(a,o).then(function(a){return a.success===!1?d("MAWDexieTable").dexieResolve(null):d("MAWDexieTable").dexieResolve(a.value)}));return p.then(function(c){var d;c={author:f,externalId:g,mediaId:(d=c==null?void 0:(d=c.defaultPreview)==null?void 0:d.mediaId)!=null?d:i,msgContent:j,plaintextHash:(d=c==null?void 0:(d=c.defaultPreview)==null?void 0:d.plaintextHash)!=null?d:l,ts:m,type:n,xmaMessageType:c==null?void 0:(d=c.xma)==null?void 0:d.targetType};return h(a,b,g,f,{content:c},k,e)})};function a(a,b,e){return!c("gkx")("5029")?d("MAWDexieTable").dexieResolve():d("MAWDexieTable").dexieAll([j(a,e,b),d("MAWLoadReplyMediaTxns").getReplyMediaForMsgQuote(a,b)]).then(function(c){var e=c[0];c=c[1];if(e!=null)return d("MAWDexieTable").dexieResolve(k(b,c)).then(function(){d("MAWDexieTable").dexieAll(e.map(function(b){return d("MAWLoadReplyMediaTxns").getReplyMediaForMsgQuote(a,b).then(function(a){k(b,a);return b})}))});else return d("MAWDexieTable").dexieResolve([])})}function k(a,b){d("MAWIndexedDb").afterTransaction({tag:"MsgUpdated",value:d("MAWBridgeMsg").createBridgeMsg(a,void 0,b)})}g.disassociateQuotedMsg=i;g.disassociateQuotedMessageByProtocolMsgId=b;g.associateQuotedMessage=j;g.associateAllReplies=a;g.issueReplyMsgUpdate=k}),98);
__d("MAWWriteDeleteMessageTxns",["EBUploadMessages","MAWAckLevel","MAWBridgeTypesCreators","MAWDbMsg","MAWDbMsgTxns","MAWDbPendingStanza","MAWDbReactionsTxns","MAWDbThreadTxns","MAWDbXMATxns","MAWDeleteForMeMsgContentCleaner","MAWDexieTable","MAWFTSTxns","MAWIndexedDb","MAWMsgType","MAWPendingStanzaCleaner","MAWThreadSnippetBuildTxns","MAWUpdateQuotedMsgTxns","MAWXMAUtils","WAResultOrError","WATimeUtils","gkx","justknobx"],(function(a,b,c,d,e,f,g){"use strict";var h=6*d("WATimeUtils").HOUR_SECONDS,i=30*d("WATimeUtils").DAY_SECONDS;function a(a,b){var c=b.protocolMsgId,e=c.author;b=c.chat;var f=c.externalId;return d("MAWDexieTable").dexieAll([d("MAWDbThreadTxns").getThread(a,b),a.unrenderedMessages.get({externalId:f}),d("MAWFTSTxns").maybePutMessageToPurgeBacklog(a,f)]).then(function(b){var g=b[0];b=b[1];if(!g.success)return d("WAResultOrError").makeError("missing_thread");return b!=null&&b.threadJid===g.value.jid&&b.author===e?d("WAResultOrError").makeError("duplicate_delete_for_me"):d("MAWDbMsgTxns").maybeGetMsgByProtocolMsgId(a,c).then(function(b){if(b==null){var h={ack:d("MAWAckLevel").ACK.received,author:e,externalId:f,threadJid:g.value.jid,type:d("MAWMsgType").MSG_TYPE.DELETE_FOR_ME},k=d("WATimeUtils").castToUnixTime(d("WATimeUtils").unixTime()+i);h={deleteTs:k,externalIdWithType:f+"_"+d("MAWDbPendingStanza").PENDING_DELETE_FOR_ME,pendingContent:{content:h,type:d("MAWDbPendingStanza").PENDING_TYPE.DELETE_FOR_ME}};return a.pendingStanzas.add(h).then(function(){d("MAWPendingStanzaCleaner").addNewPendingStanzaCleanerTimestamp(k);return d("WAResultOrError").makeResult()})}return d("MAWDexieTable").dexieResolve(j(a,b,e,c.chat,g.value)).then(function(){return d("WAResultOrError").makeResult()})})})}function j(a,b,e,f,g){var i,j=d("MAWDexieTable").dexieResolve();d("MAWXMAUtils").isXMAStoryReply((i=b.quote)==null?void 0:i.content.xmaMessageType)&&(j=k(a,b));var l={ack:b.ack,author:e,externalId:b.externalId,mediaId:b.mediaId,messageDeleteForMeTs:d("WATimeUtils").castToUnixTime(d("WATimeUtils").unixTime()+h),msgContent:(i=d("MAWDbMsg").getMsgContent(b))==null?void 0:i.content,msgId:b.msgId,quote:b.quote,reportingMeta:b.reportingMeta,serverTs:c("justknobx")._("1753")?void 0:b.serverTs,threadJid:f,ts:b.ts,type:d("MAWMsgType").MSG_TYPE.DELETE_FOR_ME,xmaMessageType:b.xmaMessageType};i=d("MAWDexieTable").dexieAll([d("MAWDbMsgTxns").deleteDbMsg(a,b.rowId),j]).then(function(){d("MAWIndexedDb").afterTransaction({tag:"DeleteMessages",value:d("MAWBridgeTypesCreators").createBridgeDeleteMessages(b.threadJid,[b])});c("gkx")("23914")&&c("justknobx")._("1071")&&d("EBUploadMessages").sendDeleteEchoMessage(b,g.jid);if(d("MAWDbMsg").isMediaMsg(b)){var e=b.mediaId,f=b.plaintextHash;e!=null&&(f!=null?d("MAWIndexedDb").afterTransaction({tag:"MediaExpired",value:{mediaId:e,msgId:b.msgId,plaintextHash:f,threadJid:b.threadJid}}):d("MAWIndexedDb").afterTransaction({tag:"MediaExpired",value:{mediaId:e,msgId:b.msgId,threadJid:b.threadJid}}))}return d("MAWThreadSnippetBuildTxns").refreshThreadSnippet(a,g)});return d("MAWDexieTable").dexieAll([i,a.unrenderedMessages.add(l),d("MAWDbReactionsTxns").deleteReactionsByUniqueMsgIdentifiers(a,[{author:e,chatJid:b.threadJid,externalId:b.externalId}]),d("MAWUpdateQuotedMsgTxns").disassociateQuotedMsg(a,b.threadJid,b.externalId,b.author,d("MAWMsgType").MSG_TYPE.REVOKED)]).then(function(){return d("MAWDbMsgTxns").maybeUpdateThreadMsgsForDeleteForMe(a,g.jid,b.msgId,b.sortOrderMs).then(function(){d("MAWDeleteForMeMsgContentCleaner").addNewDeleteForMeMsgContentCleanerTimestamp(l.messageDeleteForMeTs);return d("WAResultOrError").makeResult()})})}function k(a,b){return d("MAWDbXMATxns").maybeGetXMAFromAssociatedMsgId(a,b.msgId).then(function(b){return d("MAWDbMsgTxns").maybeGetMsg(a,b==null?void 0:b.msgId).then(function(b){if(b!=null)return d("MAWDbMsgTxns").deleteDbMsg(a,b.rowId)})})}g.REVOKE_CONTENT_EXPIRATION_IN_SEC=h;g.handleDeleteForMe=a;g.deleteXMAStoryReplyMsg=k}),98);
__d("MAWBuildIncomingMsgs",["MAWAckLevel","MAWDbMsg","MAWMsgType","WATimeUtils"],(function(a,b,c,d,e,f,g){"use strict";var h=6*d("WATimeUtils").HOUR_SECONDS;function a(a,b){var c=a.author;a=a.externalId;return{ack:d("MAWAckLevel").ACK.received,altIndex:void 0,author:c,externalId:a,serverTs:b,ts:b,type:d("MAWMsgType").MSG_TYPE.CIPHERTEXT}}function b(a,b){var c=a.author;a=a.externalId;return{ack:d("MAWAckLevel").ACK.failed,altIndex:void 0,author:c,externalId:a,serverTs:b,ts:b,type:d("MAWMsgType").MSG_TYPE.UNAVAILABLE}}function c(a,b){var c;return{ack:a.ack,author:a.author,externalId:a.externalId,messageDeleteForMeTs:d("WATimeUtils").castToUnixTime(d("WATimeUtils").unixTime()+h),msgContent:(c=d("MAWDbMsg").getMsgContent(a))==null?void 0:c.content,threadJid:b.jid,ts:a.ts,type:d("MAWMsgType").MSG_TYPE.DELETE_FOR_ME}}function e(a,b,c){return{ack:a.ack,altIndex:void 0,author:a.author,externalId:c.externalId,msgContent:d("MAWDbMsg").getMsgContent(a),originalTs:a.ts,revokedExternalId:c.revokedExternalId,threadJid:b.jid,ts:c.ts,type:d("MAWMsgType").MSG_TYPE.REVOKED,unsendMsgContentDeleteTs:d("WATimeUtils").castToUnixTime(d("WATimeUtils").unixTime()+h)}}g.REVOKE_CONTENT_EXPIRATION_IN_SEC=h;g.buildUnstoredCiphertextMsg=a;g.buildUnstoredUnavailableMsg=b;g.buildUnstoredDeleteForMeMsg=c;g.buildUnstoredRevokedMsg=e}),98);
__d("MAWDbEditMsgHistoryTxns",["MAWAckLevel","MAWDbEditMsgHistory","MAWDexieTable","MAWIndexedDb","MAWVault","WALogger","WATagsLogger","emptyFunction"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["[getEditHistoryMsgByEditedProtocolMsgId] Suspected multiple instances of same message!"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[getEditHistoryMsgByEditedProtocolMsgId] Can't have "," messages with the same editExternalId!"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["No msgId found mapped with externalId: Edit messages with the externalId do not have associated Msg in the IDB."]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["\n          'No edit history found for the messages despite there being an editCount greater than 0"]);k=function(){return a};return a}function a(a,b){var c=[];if(b.length===0)return d("MAWDexieTable").dexieResolve(c);b=b.filter(function(a){return a.editCount!=null&&a.editCount>0});var e=b.map(function(a){return[a.externalId,a.threadJid]});if(e.length===0)return d("MAWDexieTable").dexieResolve([]);var f=b.reduce(function(a,b){b.msgId!=null&&a.set(b.externalId,b.msgId);return a},new Map());return l(a,e).then(function(a){if(a.length===0){d("WATagsLogger").TAGS(["MAWLoadMsgsTxns"]).ERROR(k());return[]}for(var b=0;b<a.length;b++){var e=a[b],g=f.get(e.originalMsgExternalId);g!=null?c.push(babelHelpers["extends"]({},e,{editMsgHistoryId:d("MAWDbEditMsgHistory").convertToEditMsgHistoryId64(e.editMsgHistoryId),originalMsgId:g})):d("WATagsLogger").TAGS(["MAWLoadMsgsTxns"]).ERROR(j())}d("MAWIndexedDb").afterTransaction({tag:"EditMsgHistoryAdded",value:c});return c})}function l(a,b){return a.editMsgHistory.where(["originalMsgExternalId","threadJid"]).anyOf(b).toArray()}function b(a,b){return b==null?d("MAWDexieTable").dexieResolve():a.editMsgHistory.get({editMsgHistoryId:b})}function e(a,b,c){return a.editMsgHistory.where("originalMsgExternalId").equals(c).filter(function(a){return a.editExternalId===b.externalId&&a.author===b.author&&a.threadJid===b.chat}).toArray().then(function(a){if(a.length>1){var b=a.map(function(a){return""+a.editTs.toString()});b=new Set(b).size===1;!b?d("WALogger").ERROR(i(),a.length):d("WALogger").ERROR(h())}return a[0]})}function f(a,b){return b==null?d("MAWDexieTable").dexieResolve([]):a.editMsgHistory.where("originalMsgExternalId").equals(b.externalId).filter(function(a){return a.author===b.author&&a.threadJid===b.chat}).toArray().then(function(a){var b=[];a.forEach(function(a){if(a==null)return;b.push(a)});return b})}function m(a,b){return a.editMsgHistory.bulkGet(b)}function n(a,b,c){var e=b.map(function(a,b){return babelHelpers["extends"]({},a,{editMsgHistoryId:d("MAWDbEditMsgHistory").convertToEditMsgHistoryId64(c[b])})});return a.messages.where("externalId").anyOf(e.map(function(a){return a.originalMsgExternalId})).toArray().then(function(a){var b=new Map();a.forEach(function(a){a!=null&&b.set(a.externalId,a)});return e.map(function(a){var c=b.get(a.originalMsgExternalId);return c==null?null:babelHelpers["extends"]({},a,{originalMsgId:c.msgId})}).filter(Boolean)}).then(function(a){d("MAWIndexedDb").afterTransaction({tag:"EditMsgHistoryAdded",value:a});return c})}function o(a,b,c){c===void 0&&(c=!0);return a.editMsgHistory.bulkAdd(b,{allKeys:!0}).then(function(e){return c?n(a,b,e):d("MAWDexieTable").dexieResolve(e)})}function p(a,b,c,d){return d.then(function(d){return q(a,b,c,d)})}function q(a,b,c,e){var f=[];return a.editMsgHistory.where("originalMsgExternalId").equals(b).filter(function(a){return a.threadJid===e&&a.author===c&&(a.sendStatus==null||a.sendStatus>=d("MAWAckLevel").ACK.sent)}).toArray().then(function(a){a.forEach(function(a){f.push({messageId:a.editExternalId,originalMessageId:a.originalMsgExternalId,text:d("MAWVault").unvault(a.msgContent.content),timestamp:a.editTs})});return f})}function r(a,b,d,e){return a.editMsgHistory.where("originalMsgExternalId").equals(b).filter(function(a){return a.threadJid===e&&a.author===d})["delete"]().then(c("emptyFunction"))}var s=function(a,b){return a.editMsgHistory.where(["originalMsgExternalId","threadJid"]).anyOf(b)["delete"]().then(function(){return d("MAWDexieTable").dexieResolve(b.length)})};function t(a,b,c){return a.editMsgHistory.put(babelHelpers["extends"]({},b,{msgContent:c.msgContent})).then(function(b){return a.editMsgHistory.get({editMsgHistoryId:b})})}g.loadEditMsgHistory=a;g.getEditHistoryByOriginalMsgExternalIdAndThreadJid=l;g.maybeGetEditMsgHistoryFromEditMsgHistoryId=b;g.getEditHistoryMsgByEditedProtocolMsgId=e;g.maybeGetEditMsgHistoryFromProtocolMsgId=f;g.bulkGetEditMsgHistorys=m;g.bulkAddEditMsgHistory=o;g.getEditHistoryAsEchoWithJidPromise=p;g.getEditHistoryAsEcho=q;g.bulkRemoveEditHistory=r;g.deleteExpiredEditMsgHistory=s;g.updateEditMsgHistoryWithNewIncomingMsg=t}),98);
__d("MAWDeleteThreadUtil",[],(function(a,b,c,d,e,f){"use strict";function a(a){var b=[];a.forEach(function(a){if(a.pendingContent.type==="DeleteThread"){a=a.pendingContent.content.metaSyncMessageRange.lastMessageTimestamp;a!=null&&b.push(a)}});if(b.length===0)return null;b.sort(function(a,b){return b-a});a=b[0];return{lastMessageTimestamp:a}}function b(a,b){return b!=null&&b.lastMessageTimestamp>=a}f.getLatestDeleteThreadInfo=a;f.isMsgDeletedViaDeleteThread=b}),66);
__d("MAWDbPendingStanzaTxns",["MAWDbPendingStanza","MAWDeleteThreadUtil","MAWPendingStanzaCleaner","WAJids","WATimeUtils","emptyFunction"],(function(a,b,c,d,e,f,g){"use strict";function h(a,b,c,e,f){var g=d("MAWDbPendingStanza").getPendingSuffix(f);return a.pendingStanzas.where("externalIdWithType").equals(b+"_"+g).filter(function(a){a=a.pendingContent;return a.type===f&&a.content.author===c&&a.content.threadJid===e}).first()}function a(a,b,c,e){return h(a,b,c,e,d("MAWDbPendingStanza").PENDING_TYPE.REVOKED)}function b(a,b,c,e){return h(a,b,c,e,d("MAWDbPendingStanza").PENDING_TYPE.DELETE_FOR_ME)}function e(a,b){var e=b.map(function(a){a=a.expirationInSeconds;return d("WATimeUtils").castToUnixTime(d("WATimeUtils").unixTime()+a)});b=b.map(function(a,b){var c=a.content,f=a.externalId;a=a.pendingStanzaType;return{deleteTs:e[b],externalIdWithType:f+"_"+d("MAWDbPendingStanza").getPendingSuffix(a),pendingContent:c}});return a.pendingStanzas.bulkAdd(b).then(function(){return e.forEach(d("MAWPendingStanzaCleaner").addNewPendingStanzaCleanerTimestamp)}).then(c("emptyFunction"))}function f(a,b,c,e,f){f=d("MAWDbPendingStanza").getPendingSuffix(f);var g=d("WATimeUtils").castToUnixTime(d("WATimeUtils").unixTime()+c);c={deleteTs:g,externalIdWithType:e+"_"+f,pendingContent:b};return a.pendingStanzas.add(c).then(function(){d("MAWPendingStanzaCleaner").addNewPendingStanzaCleanerTimestamp(g)})}function i(a,b){var c=d("MAWDbPendingStanza").getPendingSuffix(d("MAWDbPendingStanza").PENDING_TYPE.DELETE_THREAD);return a.pendingStanzas.where("externalIdWithType").equals(b+"_"+c).toArray().then(function(a){return d("MAWDeleteThreadUtil").getLatestDeleteThreadInfo(a)})}function j(a){return a.pendingStanzas.toArray()}function k(a,b){b=b.map(function(a){return a.rowId});return a.pendingStanzas.bulkDelete(b)}function l(a){var b;return(a==null?void 0:(b=a.pendingContent)==null?void 0:b.type)===d("MAWDbPendingStanza").PENDING_TYPE.REVOKED?a==null?void 0:(b=a.pendingContent)==null?void 0:b.content:null}function m(a,b){var c=d("MAWDbPendingStanza").getPendingSuffix(d("MAWDbPendingStanza").PENDING_TYPE.DELETE_THREAD);b=b.map(function(a){return a+"_"+c});return a.pendingStanzas.where("externalIdWithType").anyOf(b).toArray().then(function(a){a=a.reduce(function(a,b){var c=a.get(b.externalIdWithType);c==null?a.set(b.externalIdWithType,[b]):c.push(b);return a},new Map());var b=new Map();a.forEach(function(a,c){c=d("WAJids").unsafeCoerceToChatJid(c.split("_")[0]);a=d("MAWDeleteThreadUtil").getLatestDeleteThreadInfo(a);a!=null&&b.set(c,a)});return b})}g.maybeGetPendingStanzaByExternalId=h;g.maybeGetPendingRevokedStanza=a;g.maybeGetPendingDeletedStanza=b;g.bulkPutPendingStanzas=e;g.putPendingStanza=f;g.maybeGetDeleteThreadFromPendingStanza=i;g.getAllPendingStanzas=j;g.deletePendingStanzas=k;g.getRevokedContent=l;g.bulkGetDeleteThreadPendingStanzas=m}),98);
__d("MAWBridgeMsgCountdown",["MAWDbMsg","MAWLoggerUtils","WATagsLogger","WATimeUtils"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["createBridgeMsgsStartCountdown: msg ",", expiration ",", ms until countdown ",", duration ",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Calling the messages starting countdown bridge event with remaning time less or equal to 0 (expired message)"]);i=function(){return a};return a}var j=d("WATagsLogger").TAGS([d("MAWLoggerUtils").Tag.Ephemeral,d("MAWLoggerUtils").Tag.Countdown]);function a(a){return{msgs:a.map(function(a){var b,c=a.messageExpirationTs;b=(b=a.ephemeralSetting)==null?void 0:b.ephemeralExpirationInSec;if(c==null||b==null)return;var e=d("WATimeUtils").cappedMillisecondsUntil(c);if(e<=0){j.LOG(i());return}var f=b*1e3;e>f&&(e=f);j.LOG(h(),a.msgId,c,e,b);return{countdownTs:c,millisecondsUntilCountdownTs:e,msgId:a.msgId,threadJid:a.threadJid,ts:d("MAWDbMsg").getCanonicalTsFromMsg(a)}}).filter(Boolean)}}function b(a,b){return{countdownTs:b,msgId:a}}g.createBridgeMsgsStartCountdown=a;g.createBridgeMsgClearCountdown=b}),98);
__d("MAWEphemeralCleaner",["MAWLoggerUtils","MAWMsgCleaner","WATagsLogger","err"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["EphemeralCleaner: Adding timestamps for UI(",") and backend(",")"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["startEphemeralCleaner invoked"]);j=function(){return a};return a}var k=null;function a(a){var b=a.backendFns;a=a.uiFns;d("WATagsLogger").TAGS([d("MAWLoggerUtils").Tag.Ephemeral,d("MAWLoggerUtils").Tag.MsgCleaner,d("MAWLoggerUtils").Tag.CleanerStart]).LOG(j());if(k==null){var c;k={backend:new((c=d("MAWMsgCleaner")).MsgCleaner)(b,c.CLEANER_TYPE.EPHEMERAL),ui:new c.MsgCleaner(a,c.CLEANER_TYPE.EPHEMERAL)}}}function b(a,b){if(k==null){var e="Trying to add new ephemeral timestamp before the cleaner is initialized!";d("WATagsLogger").TAGS([d("MAWLoggerUtils").Tag.Ephemeral,d("MAWLoggerUtils").Tag.MsgCleaner,d("MAWLoggerUtils").Tag.CleanerTimestamp]).ERROR(i(),e);throw c("err")(e)}else{e=k;var f=e.backend;e=e.ui;d("WATagsLogger").TAGS([d("MAWLoggerUtils").Tag.Ephemeral,d("MAWLoggerUtils").Tag.MsgCleaner,d("MAWLoggerUtils").Tag.CleanerTimestamp]).DEV(h(),a,b);e.update(a);f.update(b)}}function e(){return k}function f(){k=null}g.startEphemeralCleaner=a;g.addNewEphemeralTimestamp=b;g.getEphemeralCleaner_FOR_TESTING_ONLY=e;g.resetEphemeralCleaner_FOR_TESTING_ONLY=f}),98);
__d("MAWEphemeralSettingsCache",["MAWBridge","WATimeUtils","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h=new Map();function i(a,b){h.set(a,b)}function a(a){var b={ephemeralExpirationInSec:0,ephemeralLastUpdatedOrSetTimestamp:d("WATimeUtils").castToUnixTime(0)};return(a=h.get(a))!=null?a:b}function c(a){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b={ephemeralExpirationInSec:0,ephemeralLastUpdatedOrSetTimestamp:d("WATimeUtils").castToUnixTime(0)};if(!h.has(a)){var c=(yield d("MAWBridge").getBridge().sendAndReceive("event","getLSDBEphemeralSetting",{chatJid:a}));i(a,(a=c)!=null?a:b)}});return j.apply(this,arguments)}g.setEphemeralSettingCache=i;g.getEphemeralSettingCache=a;g.requestLSDBCacheForJid=c}),98);
__d("MAWEphemeralUtil",["MAWAckLevel","MAWBridgeMsgCountdown","MAWExternalId","MAWIndexedDb","MAWLocalizationType","MAWMsgType","WAArmadilloApplication.pb","WAGlobals","WAJids","WALogger","err"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["The new ephemeral setting timestamp should be greater than the existing timestamp"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["New ephemeral duration should be different from the existing duration"]);i=function(){return a};return a}function a(a,b,c){var e=d("WAGlobals").getMyDeviceJid();e=b.ephemeralExpirationInSec!==a.ephemeralExpirationInSec&&b.ephemeralLastUpdatedOrSetTimestamp===a.ephemeralLastUpdatedOrSetTimestamp&&e<=c;return e||a.ephemeralLastUpdatedOrSetTimestamp>b.ephemeralLastUpdatedOrSetTimestamp}function b(a,b,c){if(a==null)return!0;a=a.ephemeralSetting;if(a!=null&&a.ephemeralExpirationInSec===b){d("WALogger").DEV(i());return!1}if(a!=null&&a.ephemeralLastUpdatedOrSetTimestamp>c){d("WALogger").DEV(h());return!1}return!0}function e(a){a={ack:d("MAWAckLevel").ACK.sent,altIndex:void 0,author:d("WAJids").AUTHOR_SYSTEM,externalId:d("MAWExternalId").generateExternalId(),msgContent:{adminMsgContent:[],adminType:d("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_CHANGE_MINUTES},ts:a,type:d("MAWMsgType").MSG_TYPE.EPHEMERAL_SETTING_ADMIN};return{unstoredDbMedia:null,unstoredDbMsg:a,unstoredDbReaction:null}}function f(a,b){var e;switch(b){case d("WAArmadilloApplication.pb").ARMADILLO_CONTENT_SCREENSHOT_ACTION_SCREENSHOT_TYPE.SCREENSHOT_IMAGE:e=d("WAArmadilloApplication.pb").ARMADILLO_CONTENT_SCREENSHOT_ACTION_SCREENSHOT_TYPE.SCREENSHOT_IMAGE;break;case d("WAArmadilloApplication.pb").ARMADILLO_CONTENT_SCREENSHOT_ACTION_SCREENSHOT_TYPE.SCREEN_RECORDING:e=d("WAArmadilloApplication.pb").ARMADILLO_CONTENT_SCREENSHOT_ACTION_SCREENSHOT_TYPE.SCREEN_RECORDING;break;default:throw c("err")("Received unexpected screenshot action type")}b={ack:d("MAWAckLevel").ACK.sent,altIndex:void 0,author:d("WAJids").AUTHOR_SYSTEM,externalId:d("MAWExternalId").generateExternalId(),msgContent:{adminMsgContent:[],adminType:d("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_TAKE_SCREENSHOT,screenshotActionType:e},ts:a,type:d("MAWMsgType").MSG_TYPE.EPHEMERAL_SCREENSHOT_ACTION};return{unstoredDbMedia:null,unstoredDbMsg:b,unstoredDbReaction:void 0}}function j(a){return d("WAJids").switchOnMsgrChatJidType(a,{group:function(a){throw c("err")("Received invalid chatJid. We only support ephemeral messaging in 1:1 threads.")},user:function(a){return a}})}function k(a){a!=null&&a.messageExpirationTs!=null&&a.ephemeralCounterStarted===!0&&d("MAWIndexedDb").afterTransaction({tag:"MsgClearCountdown",value:d("MAWBridgeMsgCountdown").createBridgeMsgClearCountdown(a.msgId,a.messageExpirationTs)})}g.isLocalSettingOutdated=a;g.shouldUpdateForOutgoingUserEphemeralSettingChange=b;g.buildUnstoredDbEphemeralSettingMsgWithoutContentPlaceholder=e;g.buildUnstoredDbEphemeralScreenshotActionMsgWithoutContentPlaceholder=f;g.getUserJidForEphemeralSetting=j;g.maybeClearEphemeralMsgCountdown=k}),98);
__d("MAWEphemeralSettingsTxns",["DateConsts","MAWDbThreadTxns","MAWDexieTable","MAWEphemeralSettingsCache","MAWEphemeralUtil","MAWIndexedDb","MAWLoggerUtils","MAWUserJidWrapper","WAJids","WALogger","WAResultOrError","WATagsLogger","WATimeUtils","emptyFunction","err"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["maybeResetEphemeralSyncResponseBackoffInfo reset for ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["maybeResetEphemeralSyncResponseBackoffInfo no op for ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["Contact "," "," and ephemeral setting "," should not be null when receiving the server ack for outgoing ephemeral setting change"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["handleAndWriteIncomingEphemeralSetting - ephemeral setting in sync"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["handleAndWriteIncomingEphemeralSetting - Sending Sync Response with duration ",", timestamp ",""]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["Received invalid chat jid for incoming ephemeral settings"]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["handleAndWriteIncomingEphemeralSetting - Handle Incoming Ephemeral Setting duration: ",", lastUpdated: ",""]);o=function(){return a};return a}var p=d("WATagsLogger").TAGS([(h=d("MAWLoggerUtils")).Tag.Ephemeral,h.Tag.SettingChange,h.Tag.Incoming]),q=d("WATagsLogger").TAGS([h.Tag.Ephemeral,h.Tag.SettingChange,h.Tag.Outgoing]),r=null,s=90*d("DateConsts").SEC_PER_DAY;function a(a,b,e,f,g,h,i,j,k,q){if(f<0||f>s){j=d("WAJids").interpretAndValidateJid(i.jid).toString();throw c("err")("EphemeralSetting duration is invalid "+f+", jidType: "+j)}k={ephemeralExpirationInSec:f,ephemeralLastUpdatedOrSetTimestamp:g};d("WALogger").LOG(o(),f,g);j=d("WAJids").interpretAsUserJid(i.jid);if(j==null){p.ERROR(n());return d("MAWDexieTable").dexieResolve(r)}f=d("WAJids").isAuthorMe(b)?d("MAWUserJidWrapper").getMyUserJid():b;b=e!=null?d("WAJids").toDeviceJid(f,e.id):null;e=d("MAWEphemeralSettingsCache").getEphemeralSettingCache(i.jid);var t=e==null?void 0:e.ephemeralExpirationInSec,u=e==null?void 0:e.ephemeralLastUpdatedOrSetTimestamp;if(q){if(e!=null&&b!=null&&!d("MAWEphemeralUtil").isLocalSettingOutdated(k,e,b))if(g!==u){d("WALogger").LOG(m(),t,u);return d("MAWDexieTable").dexieResolve({dbMsg:null,outOfSyncEphemeralSetting:{chatJid:i.jid,correctEphemeralExpirationInSec:e.ephemeralExpirationInSec,correctEphemeralLastUpdatedOrSetTimestamp:e.ephemeralLastUpdatedOrSetTimestamp}})}else{d("WALogger").WARN(l());return d("MAWDexieTable").dexieResolve(r)}d("MAWIndexedDb").afterTransaction({tag:"EphemeralSettingsUpdatedForUI",value:{author:d("WAJids").userIdFromJid(f),chatJid:i.jid,ephemeralSettingArgs:k,isEphemeralSettingReset:h}});return d("MAWDexieTable").dexieResolve(r)}q={ephemeralSetting:k,ephemeralSyncResponseBackoffInfo:void 0,userJid:j};return a.ephemeralSettings.put(q).then(function(){return r})}function b(a,b,e,f,g){var h=e;if(h<0)throw c("err")("Ephemeral duration should be 0 or more");var i=d("MAWEphemeralUtil").getUserJidForEphemeralSetting(b);return d("MAWDbThreadTxns").getThread(a,b).then(function(b){return!b.success?d("WAResultOrError").makeResult({shouldUpdateSetting:!1}):a.ephemeralSettings.get({userJid:i}).then(function(b){if(!d("MAWEphemeralUtil").shouldUpdateForOutgoingUserEphemeralSettingChange(b,h,f))return d("WAResultOrError").makeResult({shouldUpdateSetting:!1});b=b==null?{ephemeralSetting:{ephemeralExpirationInSec:h,ephemeralLastUpdatedOrSetTimestamp:f},userJid:i}:babelHelpers["extends"]({},b,{ephemeralSetting:{ephemeralExpirationInSec:h,ephemeralLastUpdatedOrSetTimestamp:f}});return a.ephemeralSettings.put(b).then(function(){return d("WAResultOrError").makeResult({shouldUpdateSetting:!0})})})})}function e(a,b,e){var f=d("MAWEphemeralUtil").getUserJidForEphemeralSetting(b);return a.ephemeralSettings.get({userJid:f}).then(function(b){if(b==null||b.ephemeralSetting==null){q.ERROR(k(),f,b,b==null?void 0:b.ephemeralSetting);throw c("err")("Contact and ephemeral setting should not be null when receiving the server ack for outgoing ephemeral setting change")}b=babelHelpers["extends"]({},b,{ephemeralSetting:{ephemeralExpirationInSec:b.ephemeralSetting.ephemeralExpirationInSec,ephemeralLastUpdatedOrSetTimestamp:e}});return a.ephemeralSettings.put(b).then(c("emptyFunction"))})}function f(a,b){a=d("WAJids").interpretAsUserJid(b);if(a==null)throw c("err")("Unexpected chatJid input to isEphemeralMessagesEnabledForContact");a=d("MAWEphemeralSettingsCache").getEphemeralSettingCache(b);if(a.ephemeralLastUpdatedOrSetTimestamp===d("WATimeUtils").castToUnixTime(0))return d("MAWDexieTable").dexieResolve(d("WAResultOrError").makeError("no_ephemeral_setting"));return a!=null&&a.ephemeralExpirationInSec>0?d("MAWDexieTable").dexieResolve(d("WAResultOrError").makeResult({outOfSyncEphemeralSetting:{chatJid:b,correctEphemeralExpirationInSec:a.ephemeralExpirationInSec,correctEphemeralLastUpdatedOrSetTimestamp:a.ephemeralLastUpdatedOrSetTimestamp}})):d("MAWDexieTable").dexieResolve(d("WAResultOrError").makeError("no_ephemeral_setting"))}function t(a,b){return a.ephemeralSettings.get({userJid:b}).then(function(c){if((c==null?void 0:c.ephemeralSyncResponseBackoffInfo)==null){p.LOG(j(),b);return d("WAResultOrError").makeResult()}c.ephemeralSyncResponseBackoffInfo=void 0;p.LOG(i(),b);return a.ephemeralSettings.put(c).then(function(){return d("WAResultOrError").makeResult()})})}g.handleAndWriteIncomingEphemeralSetting=a;g.handleAndWriteOutgoingUserEphemeralSettingChange=b;g.updateContactWhenEphemeralSettingChangeMarkedSent=e;g.getOutOfSyncEphemeralSettingForIncomingNonEphemeralMsg=f;g.maybeResetEphemeralSyncResponseBackoffInfo=t}),98);
__d("MAWEphemeralMsgTxns",["FBLogger","MAWBridgeMsgCountdown","MAWBridgeTypesCreators","MAWDbMsg","MAWDbMsgTxns","MAWDbThreadTxns","MAWDbXMATxns","MAWDexieTable","MAWEphemeralCleaner","MAWEphemeralConsts","MAWEphemeralMsgUtils","MAWEphemeralSettingsTxns","MAWIndexedDb","MAWLocalizationType","MAWLoggerUtils","MAWMsgType","MAWThreadSnippetBuildTxns","MAWThreadSnippetUtils","MAWThreadUpdateMiddlewareGKUtil","WAJids","WATagsLogger","WATimeUtils","emptyFunction","justknobx"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["incoming msg is out of sync: correct duration ",", correct timestamp ",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["incoming msg is ephemeral: duration ",", timestamp ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["maybeUpdateEphemeralSettingOrCheckOutOfSyncAfterWritingIncomingMsg: Message from ",", chat ",", type ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["updating ephemeral timestamp msg ",", existing expiration ",", existing deletion ",", updated expiration ",", updated deletion ",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["markEphemeralMessageAsSent EphemeralCounter: Showing UI counter for ",""]);l=function(){return a};return a}var m=d("WATagsLogger").TAGS([(f=d("MAWLoggerUtils")).Tag.Ephemeral,f.Tag.SettingSync,f.Tag.Incoming]),n=d("WATagsLogger").TAGS([f.Tag.Ephemeral,f.Tag.OnRead,f.Tag.Countdown]);function o(a,b,c){c===void 0&&(c=function(){return!0});return d("MAWDbMsgTxns").getThreadMessagesBySortOrder(a,b,!1,!0).filter(c).limit(1).toArray().then(function(a){return{needsUpdate:!0,value:(a=a[0])!=null?a:null}})}function p(a,b,e){return e.size===0?d("MAWDexieTable").dexieResolve():d("MAWDbThreadTxns").getThread(a,b).then(function(b){if(!b.success)return;var f=b.value;return d("MAWDexieTable").dexieAll([d("MAWDbMsgTxns").getThreadOldestMessageId(a,f.jid),d("MAWDbMsgTxns").getThreadNewestMessageId(a,f.jid)]).then(function(b){var g=b[0],h=b[1];if(g==null||h==null)return;b=d("MAWEphemeralMsgUtils").filterNonExpiredMsg(e);var i=e.has(g)?o(a,f.jid,b):d("MAWDexieTable").dexieResolve({needsUpdate:!1});b=e.has(h)?d("MAWDbMsgTxns").getThreadMessagesBySortOrder(a,f.jid,!0,!1).filter(b).reverse().limit(1).toArray().then(function(b){b=b[0];return b!=null&&d("MAWThreadSnippetUtils").isDbMsgDisabledForThreadSnippet(b)?d("MAWThreadSnippetUtils").recalculateSnippetFromScratch_EXPENSIVE(a,f,e).then(function(a){return{needsUpdate:!0,value:(a=a)!=null?a:null}}):{needsUpdate:!0,value:(b=b)!=null?b:null}}):d("MAWDexieTable").dexieResolve({needsUpdate:!1});return d("MAWDexieTable").dexieAll([i,b]).then(function(b){var e=b[0],i=b[1];if(!e.needsUpdate&&!i.needsUpdate)return;b=i.needsUpdate?(b=(b=i.value)==null?void 0:b.msgId)!=null?b:void 0:h;var j=i.needsUpdate?i.value!=null?d("WATimeUtils").castUnixTimeToMillisTime(d("MAWDbMsg").getCanonicalTsFromMsg(i.value)):void 0:f.snippetMsgTs,k=babelHelpers["extends"]({},f,{newestMsg:b,oldestMsg:e.needsUpdate?(e=(e=e.value)==null?void 0:e.msgId)!=null?e:null:g,snippetMsg:b,snippetMsgTs:j});return a.threads.put(k).then(function(){if(i.needsUpdate){var b=i.value;if(b==null)d("MAWThreadUpdateMiddlewareGKUtil").isThreadUpdateEnabledViaMiddlewareForMsgType(d("MAWMsgType").MSG_TYPE.TEXT)?c("FBLogger")("MAWEphemeralMsgTxns").mustfix("[Occamadillo] ThreadUpdated handler called for clear snippet when centralized thread bump is enabled"):d("MAWIndexedDb").afterTransaction({tag:"ThreadUpdated",value:d("MAWBridgeTypesCreators").createBridgeUpdatedThread({snippetParams:{contactIDs:[],strings:[]},snippetSenderContactId:"0",snippetType:d("MAWLocalizationType").LOCALIZATION_TYPE.EMPTY_SNIPPET,threadJid:k.jid})});else if(!d("MAWThreadUpdateMiddlewareGKUtil").isThreadUpdateEnabledViaMiddlewareForMsgType(b.type))return d("MAWThreadSnippetBuildTxns").buildThreadSnippet(a,b).then(function(a){var b=a.snippetParams,c=a.snippetSenderContactId;a=a.snippetType;d("MAWIndexedDb").afterTransaction({tag:"ThreadUpdated",value:d("MAWBridgeTypesCreators").createBridgeUpdatedThread({snippetParams:b,snippetSenderContactId:c,snippetType:a,threadJid:k.jid})})})}})})})})}function a(a,b,e){if(b==null||b.ephemeralSetting==null||b.ephemeralSetting.ephemeralExpirationInSec===0)return d("MAWDexieTable").dexieResolve(b);var f=d("WATimeUtils").castToUnixTime(b.ts+b.ephemeralSetting.ephemeralExpirationInSec),g=d("WATimeUtils").castToUnixTime(f+d("MAWEphemeralConsts").ephemeralReportingWindowInSeconds);return q(a,[{messageDeleteTs:g,messageExpirationTs:f,msgId:b.msgId,readTsForLogging:b.ts}]).then(function(a){var b=a[0],f=a[1];a=a[2];a.length>0&&(n.LOG(l(),a.map(function(a){return a.msgId})),e===!0&&c("justknobx")._("3060")||d("MAWIndexedDb").afterTransaction({tag:"MsgsStartCountdown",value:d("MAWBridgeMsgCountdown").createBridgeMsgsStartCountdown(a)}));b!=null&&f!=null&&d("MAWEphemeralCleaner").addNewEphemeralTimestamp(b,f);return a[0]})}function q(a,b){var c=b.map(function(a){return a.msgId});return d("MAWDbXMATxns").getXMAMsgIdsFromAssociatedMsgIds(a,c).then(function(d){var e=new Map();b.forEach(function(a){e.set(a.msgId,{messageDeleteTs:a.messageDeleteTs,messageExpirationTs:a.messageExpirationTs,readTsForLogging:a.readTsForLogging});var b=d.get(a.msgId);b!=null&&e.set(b,{messageDeleteTs:a.messageDeleteTs,messageExpirationTs:a.messageExpirationTs,readTsForLogging:a.readTsForLogging})});var f=null,g=null,h=[],i=Array.from(new Set(c.concat(Array.from(d.values()))));return a.messages.where("msgId").anyOf(i).toArray().then(function(b){if(b.length===0)return;b.forEach(function(a){var b=a.messageExpirationTs,c=a.messageDeleteTs,d=e.get(a.msgId),i=d==null?void 0:d.messageExpirationTs;d=d==null?void 0:d.messageDeleteTs;n.LOG(k(),a.msgId,b,c,i,d);if(i==null||d==null)return;if(a.ephemeralCounterStarted===!0)return;f==null?f=i:i<f&&(f=i);g==null?g=d:d<g&&(g=d);b=babelHelpers["extends"]({},a,{ephemeralCounterStarted:!0,messageDeleteTs:d,messageExpirationTs:i});h.push(b)});return a.messages.bulkPut(h)}).then(function(){return[f,g,h]})})}function b(a,b){if(b.size===0)return d("MAWDexieTable").dexieResolve();var e=[];b.forEach(function(b,c){e.push(p(a,c,b))});return d("MAWDexieTable").dexieAll(e).then(c("emptyFunction"))}function e(a,b,e,f,g,k){if(b==null||g==null)return d("MAWDexieTable").dexieResolve();m.LOG(j(),e,f.jid,b.type);var l=d("MAWDexieTable").dexieResolve();if(b.ephemeralSetting==null)d("WAJids").switchOnMsgrChatJidType(f.jid,{group:function(){return d("MAWEphemeralSettingsTxns").maybeResetEphemeralSyncResponseBackoffInfo(a,e).then(c("emptyFunction"))},user:function(){d("MAWDbMsg").isMsgEligibleForTriggeringEphemeralSyncResponse(b)&&(l=d("MAWEphemeralSettingsTxns").getOutOfSyncEphemeralSettingForIncomingNonEphemeralMsg(a,f.jid).then(function(a){return a==null?void 0:(a=a.value)==null?void 0:a.outOfSyncEphemeralSetting}))}});else if(b.messageExpirationTs!=null&&b.messageDeleteTs!=null){var n=b.ephemeralSetting,o=b.messageDeleteTs,p=b.messageExpirationTs;m.LOG(i(),n.ephemeralExpirationInSec,n.ephemeralLastUpdatedOrSetTimestamp);d("MAWEphemeralCleaner").addNewEphemeralTimestamp(p,o);l=d("MAWEphemeralSettingsTxns").handleAndWriteIncomingEphemeralSetting(a,e,g,n.ephemeralExpirationInSec,n.ephemeralLastUpdatedOrSetTimestamp,!1,f,k,null,!0).then(function(a){return a==null?void 0:a.outOfSyncEphemeralSetting})}return l.then(function(b){if(b!=null){m.LOG(h(),b.correctEphemeralExpirationInSec,b.correctEphemeralLastUpdatedOrSetTimestamp);return b}else return d("MAWEphemeralSettingsTxns").maybeResetEphemeralSyncResponseBackoffInfo(a,e).then(c("emptyFunction"))})}g.markEphemeralMessageAsSent=a;g.bulkUpdateEphemeralMessageTimestamps=q;g.updateThreadsOnMessagesExpiredFromUi=b;g.syncEphemeralSettingOnIncomingMsg=e}),98);
__d("MAWGetMsgQuoteTxn",["LSMEBTaskCreationSource","MAWBridgeEventTransmitter","MAWDbMsgTxns","MAWDexieTable","MAWIndexedDb","MAWMsgType","MAWTransactionMode","WAJids","WATimeUtils"],(function(a,b,c,d,e,f,g){"use strict";var h=function(a){return a==null||a===d("WAJids").AUTHOR_SYSTEM?null:d("WAJids").authorAsUserJid(a)};function i(a,b,e,f){var g=b.quote;b=(g==null?void 0:g.content)||{};var i=b.author;b=b.externalId;if(i==null)return d("MAWDexieTable").dexieResolve(null);i=d("WAJids").isAuthorMe(i)?d("WAJids").AUTHOR_ME:h(i);if(g==null||i==null||b==null)return d("MAWDexieTable").dexieResolve(null);var j={author:i,chat:e,externalId:b},k=f!=null&&f==="ebrestore"?c("LSMEBTaskCreationSource").EB_POINT_QUERY_RESTORE_PROTOBUF:c("LSMEBTaskCreationSource").EB_POINT_QUERY_IN_ACT;return d("MAWDbMsgTxns").maybeGetMsgByProtocolMsgId(a,j).then(function(b){b==null&&d("MAWBridgeEventTransmitter").issuePointQueryOutsideTxn(j.externalId,d("WAJids").threadIdForChatJid(j.chat),void 0,k,j.chat);if(b==null||!d("MAWMsgType").isQuotedMsgType(b.type))return{quote:g,quoteExternalId:g.content.externalId};var a=b.author,c=b.externalId,e=b.mediaId,f=b.msgContent,h=b.msgId,i=b.plaintextHash,l=b.specialTextSize,m=b.ts,n=b.type,o=b.xmaMessageType;a={author:a,externalId:c,mediaId:e,msgContent:f,msgId:h,plaintextHash:i,specialTextSize:l,ts:m,type:n,xmaMessageType:o};b.messageExpirationTs!=null&&b.messageExpirationTs<d("WATimeUtils").unixTime()&&(a=babelHelpers["extends"]({},a,{mediaId:void 0,msgContent:void 0,type:d("MAWMsgType").MSG_TYPE.EXPIRED_EPHEMERAL}));return{quote:babelHelpers["extends"]({},g,{content:a}),quoteExternalId:b.externalId}})}function a(a,b,c){return i(a,b,c).then(function(a){return babelHelpers["extends"]({},b,{quote:a==null?void 0:a.quote,quoteExternalId:a==null?void 0:a.quoteExternalId})})}function j(a,b){return a.messages.where("quoteExternalId").anyOf(b).toArray()}b=d("MAWIndexedDb").makeMsgrTransactor({messages:d("MAWTransactionMode").READONLY},"maybeBatchGetMsgsByQuoteExternalId",function(a){return function(){for(var b=arguments.length,c=new Array(b),d=0;d<b;d++)c[d]=arguments[d];return j.apply(void 0,[a].concat(c))}});g.getMsgQuoteInfo=i;g.enhanceMsgWithQuoteInfo=a;g.maybeBatchGetMsgsByQuoteExternalId=j;g.maybeBatchGetMsgsByQuoteExternalIdWithTransaction=b}),98);
__d("MAWBridgeParticipants",["WAJids","WATimeUtils"],(function(a,b,c,d,e,f,g){"use strict";function h(a){var b=a.deliveredWatermarkTs,c=a.lastReadActionTs,e=a.lastReadWatermarkTs,f=a.threadJid,g=a.type;a=a.userJid;return{deliveredWatermarkTs:b||d("WATimeUtils").castToUnixTime(0),fbid:d("WAJids").extractUserId(a),isAdmin:g==="superadmin"||g==="admin",isInvited:g==="invitedParticipant",isSuperAdmin:g==="superadmin",lastReadActionTs:(b=c)!=null?b:d("WATimeUtils").castToUnixTime(0),readWatermarkTs:e||d("WATimeUtils").castToUnixTime(0),threadJid:f}}function a(a){return{participants:a.map(function(a){return h(a)})}}g.createBridgeParticipant=h;g.createBridgeParticipants=a}),98);
__d("MAWDbParticipantTxns",["FBLogger","MAWBridgeParticipants","MAWBridgeTypesCreators","MAWCurrentUser","MAWDbParticipant","MAWDexieTable","MAWIndexedDb","MAWODSProxy","MAWUserJidWrapper","WAJids","WAOdsEnums","WAResultOrError","WATimeUtils","emptyFunction"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["bulkUpdateParticipantTimestamps: participant ",", "," deliveredWatermarkTs: ",", lastReadWatermarkTs: ",", lastReadActionTs: ",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["bulkUpdateParticipantTimestamps: missing tsData for participant ",", ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["bulkUpdateParticipantTimestamps: missing participants "," vs ",""]);j=function(){return a};return a}function a(a,b,c,d,e){d===void 0&&(d="participant");return k(a,b,[{addressable:e,type:d,userJid:c}]).then(function(a){return a[0]})}function k(a,b,c){return m(a,c.map(function(a){return babelHelpers["extends"]({},a,{threadJid:b})}))}function l(a,b){d("WAJids").switchOnMsgrChatJidType(a.threadJid,{group:c("emptyFunction"),user:function(e){a.userJid!==e&&a.userJid!==d("MAWUserJidWrapper").getMyUserJid()&&c("FBLogger")("messenger_e2ee_web").mustfix("Attempting to insert participant to a mismatched one-on-one thread at %s",b)}})}function m(a,b){if(b.length===0)return d("MAWDexieTable").dexieResolve([]);var c=[];b.forEach(function(a){var b=a.addressable,e=a.threadJid,f=a.type;a=a.userJid;c.push({addressable:b,deliveredWatermarkTs:d("WATimeUtils").castToUnixTime(0),id:d("MAWDbParticipant").craftParticipantId(e,a),lastReadWatermarkTs:d("WATimeUtils").castToUnixTime(0),threadJid:e,type:f,userJid:a})});c.forEach(function(a){return l(a,"bulkAddParticipantsInThreads")});return a.participants.bulkPut(c).then(function(){d("MAWIndexedDb").afterTransaction({tag:"ParticipantsUpdated",value:d("MAWBridgeParticipants").createBridgeParticipants(c)});return c})}function b(a,b,c){return s(a,b).then(function(e){var f=[],g=new Set(c.map(function(a){return a.userJid}));for(var h=e,i=Array.isArray(h),j=0,h=i?h:h[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var l;if(i){if(j>=h.length)break;l=h[j++]}else{j=h.next();if(j.done)break;l=j.value}l=l;var m=g.has(l.userJid);m||f.push([l.threadJid,l.userJid])}m=[];l=new Set(e.map(function(a){return a.userJid}));for(j=0;j<c.length;j++){i=c[j];h=l.has(i.userJid);h||m.push(i)}f.length>0&&d("MAWODSProxy").odsBumpEntityKey({amount:1,entity:d("WAOdsEnums").Entity.MAW_ONE_TO_ONE_THREAD_PARTICIPANT_CLEANUP,key:d("MAWCurrentUser").isEmployee()?"employee":"public"});return d("MAWDexieTable").dexieAll([k(a,b,m),o(a,f)]).then(function(a){var b=a[0];a[1];a=c.reduce(function(a,c){var d=b.find(function(a){return a.userJid===c.userJid}),f=e.find(function(a){return a.userJid===c.userJid});d!=null&&f==null?a.push(d):f!=null&&a.push(f);return a},[]);return a})})}function e(a,b){b.forEach(function(a){return l(a,"bulkUpdateParticipants")});return a.participants.bulkPut(b).then(function(){b.length>0&&d("MAWIndexedDb").afterTransaction({tag:"ParticipantsUpdated",value:d("MAWBridgeParticipants").createBridgeParticipants(b)});return b})}function f(a,b,c){if(c.length===0)return d("MAWDexieTable").dexieResolve();c=c.map(function(a){return[b,a]});return o(a,c)}function n(a,b,c){if(b.length===0)return d("MAWDexieTable").dexieResolve();b=b.map(function(a){return[a,c]});return o(a,b)}function o(a,b){return a.participants.where(["threadJid","userJid"]).anyOf(b).toArray().then(function(b){return a.participants.bulkDelete(b.map(function(a){return a.id})).then(function(){return a.threads.where("jid").anyOf(Array.from(new Set(b.map(function(a){return a.threadJid})))).toArray()}).then(function(a){var c=new Map(a.map(function(a){return[a.jid,a.chatId]}));b.forEach(function(a){var b=c.get(a.threadJid);b!=null&&d("MAWIndexedDb").afterTransaction({tag:"ParticipantRemoved",value:{threadJid:a.threadJid,userId:d("WAJids").extractUserId(a.userJid)}})})})})}function p(a,b){return a.participants.where("threadJid").equals(b)["delete"]()}function q(a,b,c,d,e){return r(a,[{deliveredWatermarkTs:c,lastReadActionTs:e,lastReadWatermarkTs:d,participantKey:b}]).then(function(a){return a[0]})}function r(a,b,c){if(b.length===0)return d("MAWDexieTable").dexieResolve([]);var e=new Map(),f=[];b.forEach(function(a){f.push(a.participantKey),e.set(JSON.stringify(a.participantKey),a)});return a.participants.where(["threadJid","userJid"]).anyOf(f).toArray().then(function(b){b.length!==f.length&&(c!=null&&c.LOG(j(),b.length,f.length));var g=[],k=[];b.forEach(function(a){var b=e.get(JSON.stringify([a.threadJid,a.userJid]));if(b==null){c!=null&&c.LOG(i(),a.threadJid,a.userJid);return}var d=b.deliveredWatermarkTs,f=b.lastReadActionTs;b=b.lastReadWatermarkTs;var j=a.deliveredWatermarkTs,l=a.lastReadWatermarkTs,m=a.lastReadActionTs,n=d>j,o=b>l,p=m==null||f>m;c!=null&&c.LOG(h(),a.threadJid,a.userJid,d,b,f);if(!n&&!o&&!p){k.push(a);return}g.push(babelHelpers["extends"]({},a,{deliveredWatermarkTs:n?d:j,lastReadActionTs:p?f:m,lastReadWatermarkTs:o?b:l}))});g.forEach(function(a){return l(a,"bulkUpdateParticipantTimestamps")});return a.participants.bulkPut(g).then(function(){g.forEach(function(a){d("MAWIndexedDb").afterTransaction({tag:"ReceivedReceipt",value:d("MAWBridgeTypesCreators").createBridgeReceivedReceipt(a.threadJid,d("WAJids").extractUserId(a.userJid),a.deliveredWatermarkTs,a.lastReadWatermarkTs,a.lastReadActionTs)})});return[].concat(g,k)})})}function s(a,b){return a.participants.where("threadJid").equals(b).toArray()}function t(a,b){return a.participants.where("threadJid").anyOf(b).toArray()}function u(a,b){return s(a,b).then(function(a){return a.filter(function(a){return a.type==="invitedParticipant"})})}function v(a,b,c){return a.participants.where(["threadJid","userJid"]).equals([b,c]).first().then(function(a){return a==null?d("WAResultOrError").makeError("missing"):d("WAResultOrError").makeResult(a)})}function w(a,b){return a.participants.where(["threadJid","userJid"]).anyOf(b).toArray().then(function(a){var c=new Map(a.map(function(a){return[JSON.stringify([a.threadJid,a.userJid]),a]}));return b.map(function(a){return c.get(JSON.stringify(a))})})}g.addParticipant=a;g.bulkAddParticipants=k;g.logIfIllegalParticipant=l;g.bulkAddParticipantsInThreads=m;g.bulkUpsertParticiantsInThread=b;g.bulkUpdateParticipants=e;g.bulkDeleteParticipantsInThread=f;g.bulkDeleteParticipantAcrossThreads=n;g.bulkDeleteParticipants=o;g.deleteAllParticipantsForThread=p;g.updateParticipantTimestamps=q;g.bulkUpdateParticipantTimestamps=r;g.getParticipantsInThread=s;g.getParticipantsInThreads=t;g.getInvitedParticipantsInThread=u;g.getParticipant=v;g.bulkGetParticipants=w}),98);
__d("MAWWriteMsgSideEffectTxns",["MAWDbMsg","MAWDbParticipantTxns","MAWDexieTable"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){var c=d("MAWDbMsg").getCanonicalTsFromMsg(b),e=b.author;return e!=="@me"&&e!=="@system"?d("MAWDbParticipantTxns").updateParticipantTimestamps(a,[b.threadJid,e],c,c,c):d("MAWDexieTable").dexieResolve()}g.updateParticipantTimestampsForMsg=a}),98);
__d("MAWWriteMsgTxns",["MAWAfterWriteMsgUtil","MAWBridgeMsg","MAWBridgeTypesCreators","MAWBuildIncomingMsgs","MAWDbEditMsgHistory","MAWDbEditMsgHistoryTxns","MAWDbMsg","MAWDbMsgTxns","MAWDbPendingStanzaTxns","MAWDbReactionsTxns","MAWDbThread","MAWDbThreadTxns","MAWDbUnrenderedMsgTxns","MAWDeleteForMeMsgContentCleaner","MAWDeleteThreadUtil","MAWDexieTable","MAWEBUploadMessageUtils","MAWEphemeralMsgTxns","MAWFTSTxns","MAWFolderTypes","MAWGetMsgQuoteTxn","MAWGetOrCreateThreadTxns","MAWIndexedDb","MAWLoadReplyMediaTxns","MAWLocalizationUtils","MAWMessageHasUniqueExternalIdValidator","MAWMsgType","MAWThreadEvent","MAWThreadSnippetBuildTxns","MAWThreadSnippetUtils","MAWThreadUpdateMiddlewareGKUtil","MAWTimeUtils","MAWUpdateQuotedMsgTxns","MAWWriteMsgSideEffectTxns","MAWWriteRevokeMessageTxns","WAJids","WALogger","WATimeUtils","err","justknobx"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["handle"," Msg: Message from ",", chat ",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["writeMsgAfterTransaction - sortOrderMs: ",""]);i=function(){return a};return a}function j(a,b,e,f,g){var h=e.ts;h=[d("WATimeUtils").castUnixTimeToMillisTime(h),e.type===d("MAWMsgType").MSG_TYPE.EPHEMERAL_SETTING_ADMIN];var i=h[0],j=h[1];return d("MAWGetOrCreateThreadTxns").getExistingThread(a,b.jid).then(function(b){if(b==null)throw c("err")("at this point there's always a thread - checking for updates");var h=d("MAWDbMsgTxns").getThreadOldestMessageBySortOrder(a,b.jid),k=d("MAWDbMsgTxns").getThreadNewestMessageBySortOrder(a,b.jid);return d("MAWDexieTable").dexieAll([h,k]).then(function(c){var h,k,l=c[0];c=c[1];var m=c==null?1:d("MAWDbMsg").getInChatMsgIdFromMsgId(c.msgId)+1;h=d("WATimeUtils").castToMillisTime((h=c==null?void 0:c.sortOrderMs)!=null?h:0);var n=i>h&&!j?i:h;h=(h=d("MAWTimeUtils").ensureValidMillisTime(b.lastReadMsgTs))!=null?h:0;k=d("WATimeUtils").castToMillisTime((k=c==null?void 0:c.sortOrderMs)!=null?k:0);h=h<k;var o=e.author===d("WAJids").AUTHOR_ME||e.type===d("MAWMsgType").MSG_TYPE.ADMIN&&d("MAWLocalizationUtils").isParticipantChangeAdminMsg(e.msgContent.adminType)&&!h,p=babelHelpers["extends"]({},e,{msgId:(k=g)!=null?k:d("MAWDbMsg").craftMsgIdV2(b.chatId,m,e)}),q=d("MAWEBUploadMessageUtils").echoOverrideMessageSortOrder(e);k=q>((h=b.snippetMsgTs)!=null?h:0);var r=!d("MAWThreadSnippetUtils").isDbMsgDisabledForThreadSnippet(p)&&k;m=d("MAWDbMsgTxns").calculateOldestAndNewestMsg(l,c,p,f);var s=m.newestMsg,t=m.oldestMsg;h=r?d("MAWThreadSnippetBuildTxns").buildThreadSnippet(a,p):d("MAWDexieTable").dexieResolve(null);return h.then(function(a){return{isOldestMsgUpdated:l!=null&&t!==l.msgId,msgId:p.msgId,prevOldestMsg:l,updatedSnippet:a,updatedThread:babelHelpers["extends"]({},b,{lastReadMsg:o?p.msgId:b.lastReadMsg,lastReadMsgTs:o?n:b.lastReadMsgTs,newestMsg:s,newestMsgTs:n,oldestMsg:t,snippetMsg:r?p.msgId:b.snippetMsg,snippetMsgTs:r?d("WATimeUtils").castToMillisTime(q):b.snippetMsgTs,threadOrder:d("MAWDbThread").craftThreadOrder(n,b.jid)})}})})})}function a(a,b,c,e){return a.messages.where(["threadJid","sortOrderMs"]).equals([c.jid,e]).filter(function(a){return a.type!==d("MAWMsgType").MSG_TYPE.EPHEMERAL_SETTING_ADMIN&&a.type!==d("MAWMsgType").MSG_TYPE.EPHEMERAL_SCREENSHOT_ACTION?!1:a.type===b.type&&a.msgContent.adminType===b.msgContent.adminType}).first().then(function(d){return d!=null?d:l(a,b,c,"MAWWriteMsgTxns::writeDedupedEphemeralSettingAdminMessage")})}function b(a,b,c,e){return a.messages.where(["threadJid","sortOrderMs"]).equals([c.jid,e]).filter(function(a){return a.type===d("MAWMsgType").MSG_TYPE.ADMIN&&a.msgContent.adminType===b.msgContent.adminType}).first().then(function(d){return d!=null?d:l(a,b,c,"MAWWriteMsgTxns::writeDedupedAdminMessage")})}function k(a,b,c){c=c!=null?a.messages.put(babelHelpers["extends"]({},b,{rowId:c})):a.messages.add(b);return c.then(function(a){return babelHelpers["extends"]({},b,{rowId:a})})}function l(a,b,e,f,g){g===void 0&&(g={});g=g;var h=g.hasMoreAfter,l=g.hasMoreBefore,m=g.isFirstMsg,n=m===void 0?!1:m;m=g.isIncoming;var o=m===void 0?!1:m;m=g.isMediaGalleryRestore;var p=m===void 0?!1:m;m=g.isOutgoing;var q=m===void 0?!1:m,r=g.msgsLeftToRestoreForEB,s=g.openMessageOtid,t=g.openMessageParticipantCount,u=g.optimisticMsg,v=g.participantCount,w=g.quotedReplyAttachmentMeta,x=g.s2sInstanceKey;m=g.sortOrderMs;var y=g.upsertRowData;if(y&&!q)throw c("err")("Upsert attempted outside outgoing message path; aborting.");return j(a,e,b,m,y==null?void 0:y.msgId).then(function(e){var g=e.isOldestMsgUpdated,j=e.msgId,m=e.prevOldestMsg,z=e.updatedSnippet,A=e.updatedThread;e=babelHelpers["extends"]({},b,{msgId:j,sortOrderMs:d("MAWEBUploadMessageUtils").echoOverrideMessageSortOrder(b)});d("MAWMessageHasUniqueExternalIdValidator").logMessageAddSource([e.externalId],"MAWWriteMsgTxns::writeMsg::"+f,{editCount:((j=e.editCount)!=null?j:0).toString(),hasOptimisticMessage:(u!=null).toString(),isIncoming:o.toString(),isOutgoing:q.toString()});return d("MAWDexieTable").dexieAll([k(a,e,y==null?void 0:y.rowId),a.threads.put(A),d("MAWFTSTxns").maybePutMessageToBacklog(a,e.externalId)]).then(function(a){var b=a[0];a[1];q&&d("WALogger").LOG(i(),b.sortOrderMs);a=d("MAWAfterWriteMsgUtil").WriteMsgAfterTxnBumpThreadOption.BUMP_LOCAL_ONLY;o&&b.altIndex!==d("MAWDbMsg").SPAM_ALT_INDEX&&b.altIndex!==d("MAWDbMsg").FUTUREPROOF_SPAM_ALT_INDEX&&b.author!==d("WAJids").AUTHOR_ME?a=d("MAWAfterWriteMsgUtil").WriteMsgAfterTxnBumpThreadOption.BUMP_LOCAL_AND_SERVER:q&&(a=d("MAWAfterWriteMsgUtil").WriteMsgAfterTxnBumpThreadOption.DO_NOT_BUMP_THREAD);p&&c("justknobx")._("3060")||d("MAWAfterWriteMsgUtil").writeMsgAfterTransaction({bumpThreadOption:a,dbMsg:b,hasMoreAfter:h,hasMoreBefore:l,initialLoad:m==null&&!y,isFirstMsg:n,isOldestMsgUpdated:g,msgsLeftToRestoreForEB:r,openMessageOtid:s,openMessageParticipantCount:t,optimisticMsg:u,participantCount:v,quotedReplyAttachmentMeta:w,s2sInstanceKey:x,snippet:z,updatedThread:A});return b})})}function m(a,b,e){return d("MAWGetOrCreateThreadTxns").getExistingThread(a,e.jid).then(function(e){if(e==null)throw c("err")("at this point there's always a thread - checking for updates");return d("MAWDbUnrenderedMsgTxns").getNextUnrenderedMsgIdNumberForThread(a,e).then(function(c){var f=babelHelpers["extends"]({},b,{msgId:d("MAWDbMsg").craftUnrenderedMsgId(e.chatId,c)});return d("MAWDexieTable").dexieAll([a.unrenderedMessages.add(f),a.threads.put(e)]).then(function(a){var b=a[0];a[1];return babelHelpers["extends"]({},f,{rowId:b})})})})}function e(a,b,c){return d("MAWDexieTable").dexieAll([n(a,b,c),d("MAWDbEditMsgHistoryTxns").getEditHistoryByOriginalMsgExternalIdAndThreadJid(a,[[b.externalId,c.jid]]).then(function(a){return{editMsgHistories:a,originalEditMsgHistory:a.find(function(a){return a.editExternalId===b.externalId})}})]).then(function(a){var b=a[0];a=a[1];var c=a.editMsgHistories;a=a.originalEditMsgHistory;return babelHelpers["extends"]({},b,{editMsgHistories:c,existingEditMsgHistory:(b=a)!=null?b:null})})}function n(a,b,c){c=[b.externalId,c.jid,b.author];var e=c[0],f=c[1];c=c[2];return d("MAWDexieTable").dexieAll([d("MAWDbMsgTxns").maybeGetMsgByExternalId(a,e,f,c),d("MAWDbPendingStanzaTxns").maybeGetPendingRevokedStanza(a,e,c,f),d("MAWDbPendingStanzaTxns").maybeGetPendingDeletedStanza(a,e,c,f),d("MAWDbMsgTxns").checkIfMsgIsDeletedForMeOrRevoked(a,e,f,c),d("MAWDbPendingStanzaTxns").maybeGetDeleteThreadFromPendingStanza(a,f).then(function(a){return d("MAWDeleteThreadUtil").isMsgDeletedViaDeleteThread(b.ts,a)})]).then(function(a){var b=a[0],c=a[1],d=a[2],e=a[3];a=a[4];return{existingMsg:(b=b)!=null?b:null,isDeletedWithThread:a,isDeleteForMeOrRevoked:e,pendingDeleteForMeStanza:(b=d)!=null?b:null,pendingRevokedStanza:(a=c)!=null?a:null}})}function f(a,b,e,f,g,i){return d("MAWDbPendingStanzaTxns").maybeGetPendingRevokedStanza(a,b.externalId,b.author,e.jid).then(function(j){if(j!=null)return q(a,b,e,j);j=b.author;d("WALogger").DEV(h(),b.type,j,e.jid);var k=babelHelpers["extends"]({},babelHelpers["extends"]({},b,{threadJid:e.jid}));e.folder===d("MAWFolderTypes").FOLDER_ID.OTHER&&(k.altIndex=k.altIndex===d("MAWDbMsg").FUTUREPROOF_ALT_INDEX?d("MAWDbMsg").FUTUREPROOF_SPAM_ALT_INDEX:d("MAWDbMsg").SPAM_ALT_INDEX);return d("MAWGetMsgQuoteTxn").getMsgQuoteInfo(a,k,e.jid,i).then(function(b){b!=null&&(k=babelHelpers["extends"]({},k,{quote:b==null?void 0:b.quote,quoteExternalId:b==null?void 0:b.quoteExternalId}));return d("MAWDexieTable").dexieAll([d("MAWUpdateQuotedMsgTxns").associateQuotedMessage(a,e.jid,k),d("MAWLoadReplyMediaTxns").getReplyMediaForMsgQuote(a,k),d("MAWLoadReplyMediaTxns").getReplyMediaForMsg(a,k)]).then(function(b){var h=b[0],i=b[1],j=b[2];return l(a,k,e,f,{isIncoming:!0,isMediaGalleryRestore:g,quotedReplyAttachmentMeta:i}).then(function(b){return d("MAWDexieTable").dexieAll([d("MAWWriteMsgSideEffectTxns").updateParticipantTimestampsForMsg(a,k),d("MAWEphemeralMsgTxns").markEphemeralMessageAsSent(a,b,g)]).then(function(a){a=a[1];h!=null&&(g===!0&&c("justknobx")._("3060")||h.forEach(function(a){d("MAWIndexedDb").afterTransaction({tag:"MsgUpdated",value:d("MAWBridgeMsg").createBridgeMsg(a,void 0,j)})}));return a||b})})})})})}function o(a,b,c,e,f,g){var h=babelHelpers["extends"]({},babelHelpers["extends"]({},b,{msgId:c.msgId,rowId:c.rowId,serverTs:c.serverTs,sortOrderMs:c.sortOrderMs,threadJid:e.jid,ts:c.ts}));return d("MAWDexieTable").dexieAll([d("MAWUpdateQuotedMsgTxns").associateQuotedMessage(a,e.jid,h),d("MAWLoadReplyMediaTxns").getReplyMediaForMsgQuote(a,h),d("MAWLoadReplyMediaTxns").getReplyMediaForMsg(a,h),d("MAWGetMsgQuoteTxn").getMsgQuoteInfo(a,h,e.jid,g),d("MAWDbMsgTxns").getThreadNewestMessageId(a,e.jid)]).then(function(g){var i=g[0],j=g[1],k=g[2],l=g[3],m=g[4];h=babelHelpers["extends"]({},h,{quote:l==null?void 0:l.quote,quoteExternalId:l==null?void 0:l.quoteExternalId});return((g=c.editCount)!=null?g:0)>0&&f!=null&&b.type===d("MAWMsgType").MSG_TYPE.TEXT?d("MAWDbEditMsgHistoryTxns").updateEditMsgHistoryWithNewIncomingMsg(a,f,b).then(function(a){a!=null&&d("MAWIndexedDb").afterTransaction({tag:"EditMsgHistoryAdded",value:[babelHelpers["extends"]({},a,{editMsgHistoryId:d("MAWDbEditMsgHistory").convertToEditMsgHistoryId64(a.editMsgHistoryId),originalMsgId:c.msgId})]});return c}):a.messages.put(h).then(function(){return d("MAWDbThreadTxns").needsRetroactiveReadReceiptInThread(a,h)}).then(function(b){if(b){h.altIndex=d("MAWDbMsg").craftToBeReadAltIndex(e.chatId);return a.messages.put(h)}}).then(function(){d("MAWIndexedDb").afterTransaction({tag:"MsgUpdated",value:d("MAWBridgeMsg").createBridgeMsg(h,void 0,k)});d("MAWIndexedDb").afterTransaction({tag:"MsgUpdated",value:d("MAWBridgeMsg").createBridgeMsg(h,void 0,j)});d("MAWIndexedDb").afterTransactionThreadEvent({chatJid:e.jid,msgId:h.msgId},d("MAWThreadEvent").PLACEHOLDER_CONVERT_SUBSCRIPTION);i!=null&&i.forEach(function(a){d("MAWIndexedDb").afterTransaction({tag:"MsgUpdated",value:d("MAWBridgeMsg").createBridgeMsg(a,void 0,k)})});if(h.msgId===m){var b=h;b.rowId;b=babelHelpers.objectWithoutPropertiesLoose(b,["rowId"]);d("MAWWriteMsgSideEffectTxns").updateParticipantTimestampsForMsg(a,b);if(!d("MAWThreadUpdateMiddlewareGKUtil").isThreadUpdateEnabledViaMiddlewareForMsgType(h.type))return d("MAWThreadSnippetBuildTxns").buildThreadSnippet(a,h).then(function(a){var b=a.snippetParams,c=a.snippetSenderContactId;a=a.snippetType;d("MAWIndexedDb").afterTransaction({tag:"ThreadUpdated",value:d("MAWBridgeTypesCreators").createBridgeUpdatedThread({snippetParams:b,snippetSenderContactId:c,snippetType:a,threadJid:e.jid})});return h})}return h})})}function p(a,b,c,e){var f=d("MAWBuildIncomingMsgs").buildUnstoredDeleteForMeMsg(b,c);return d("MAWDexieTable").dexieAll([d("MAWDbReactionsTxns").deleteReactionsByUniqueMsgIdentifiers(a,[{author:f.author,chatJid:f.threadJid,externalId:f.externalId}]),m(a,f,c),a.pendingStanzas["delete"](e.rowId),d("MAWFTSTxns").maybePutMessageToPurgeBacklog(a,b.externalId)]).then(function(a){a[0];a=a[1];d("MAWDeleteForMeMsgContentCleaner").addNewDeleteForMeMsgContentCleanerTimestamp(f.messageDeleteForMeTs);return babelHelpers["extends"]({},f,{msgId:a.msgId,rowId:a.rowId})})}function q(a,b,e,f){var g=d("MAWDbPendingStanzaTxns").getRevokedContent(f);if(g==null)throw c("err")("missing revoked content");b=d("MAWBuildIncomingMsgs").buildUnstoredRevokedMsg(b,e,g);return d("MAWDexieTable").dexieAll([l(a,b,e,"MAWHandleMsgTxns::handleOutOfOrderRevokedMessage"),a.pendingStanzas["delete"](f.rowId)]).then(function(b){var c=b[0];return d("MAWWriteRevokeMessageTxns").markIncomingMessageRevoked(a,c,e).then(function(){return c})})}g.writeDedupedEphemeralSettingAdminMessage=a;g.writeDedupedAdminMessage=b;g.writeMsg=l;g.writeUnrenderedMsg=m;g.prepareTextMsgWriteData=e;g.prepareMsgWriteData=n;g.writeNewIncomingMsg=f;g.writeCiphertextUpdate=o;g.handleDeleteForMeMessage=p;g.handleOutOfOrderRevokedMessage=q}),98);
__d("MAWDbDeletedMessages",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";a=b("$InternalEnum")({ChatDelete:"chat_delete",Revoke:"revoke"});f.DbDeletedMsgReasonEnum=a}),66);
__d("MAWUnsendMsgContentCleaner",["MAWMsgCleaner","WALogger","err"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["UnsendMsgContentCleaner: Adding timestamps (",")"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["startUnsendMsgContentCleaner invoked"]);j=function(){return a};return a}var k=null;function a(a){d("WALogger").LOG(j()),k==null&&(k=new(d("MAWMsgCleaner").MsgCleaner)(a,d("MAWMsgCleaner").CLEANER_TYPE.UNSEND))}function b(a){if(k==null){var b="Trying to add new UnsendMsgContentCleanerTimestamp before the cleaner is initialized!";d("WALogger").ERROR(i(),b);throw c("err")(b)}else d("WALogger").DEV(h(),a),k.update(a)}function e(){return k}function f(){k=null}g.startUnsendMsgContentCleaner=a;g.addNewUnsendMsgContentCleanerTimestamp=b;g.getUnsendMsgContentCleaner_FOR_TESTING_ONLY=e;g.resetUnsendMsgContentCleaner_FOR_TESTING_ONLY=f}),98);
__d("MAWWriteRevokeMessageTxns",["EBUploadMessages","FBLogger","MAWAckLevel","MAWBridgeMsg","MAWBridgeTypesCreators","MAWDbDeletedMessages","MAWDbMsg","MAWDbMsgTxns","MAWDbPendingStanza","MAWDbReactionsTxns","MAWDexieTable","MAWEphemeralUtil","MAWFTSTxns","MAWIndexedDb","MAWJidUtils","MAWMsgType","MAWPendingStanzaCleaner","MAWThreadSnippetBuildTxns","MAWUnsendMsgContentCleaner","MAWUpdateQuotedMsgTxns","MAWWriteDeleteMessageTxns","MAWWriteMsgTxns","MAWXMAUtils","WATimeUtils","err"],(function(a,b,c,d,e,f,g){"use strict";var h=6*d("WATimeUtils").HOUR_SECONDS,i=30*d("WATimeUtils").DAY_SECONDS;function a(a,b,e,f,g,h){if(h!=null&&f==null){h=babelHelpers["extends"]({},b,{originalTs:d("WATimeUtils").castMilliSecondsToUnixTime(h),threadJid:e.jid,unsendMsgContentDeleteTs:(h=b.serverTs)!=null?h:b.ts});return d("MAWWriteMsgTxns").writeMsg(a,h,e,"MAWWriteRevokeMessageTxns::writeIncomingRevokeMsg").then(function(a){return a.type==="Revoked"?a:null})}var k=d("WATimeUtils").castToUnixTime(d("WATimeUtils").unixTime()+i),m=b.author,n=b.externalId,o=b.revokedExternalId,p=g!=null?l(a,g):d("MAWDexieTable").dexieResolve();return d("MAWDexieTable").dexieAll([f==null?d("MAWDbMsgTxns").maybeGetMsgByExternalId(a,b.revokedExternalId,e.jid,b.author):d("MAWDexieTable").dexieResolve(f),d("MAWFTSTxns").maybePutMessageToPurgeBacklog(a,n)]).then(function(g){var h=g[0];(f==null||h!=null)&&c("FBLogger")("messenger_e2ee_web").warn("Revoked message missing originalMsg incorrectly");if(h==null){g={deleteTs:k,externalIdWithType:o+"_"+d("MAWDbPendingStanza").PENDING_REVOKED,pendingContent:{content:{ack:d("MAWAckLevel").ACK.received,altIndex:void 0,author:m,externalId:n,revokedExternalId:o,threadJid:e.jid,ts:b.ts,type:"Revoked"},type:d("MAWDbPendingStanza").PENDING_TYPE.REVOKED}};return d("MAWDexieTable").dexieAll([a.pendingStanzas.add(g),p]).then(function(b){b[0];b=b[1];d("MAWPendingStanzaCleaner").addNewPendingStanzaCleanerTimestamp(k);b===!0&&d("MAWThreadSnippetBuildTxns").refreshThreadSnippet(a,e)})}return p.then(function(){return j(a,h,e,b.externalId,b.revokedExternalId,b.serverTs,b.ts,!1)})})}function j(a,b,c,e,f,g,i,j){var l=babelHelpers["extends"]({},b,{altIndex:void 0,externalId:e,msgContent:d("MAWDbMsg").getMsgContent(b),originalTs:(e=b.serverTs)!=null?e:b.ts,revokedExternalId:f,serverTs:g,threadJid:c.jid,ts:i,type:"Revoked",unsendMsgContentDeleteTs:d("WATimeUtils").castToUnixTime(d("WATimeUtils").unixTime()+h)});if(j){d("EBUploadMessages").sendDeleteEchoMessage(b,c.jid);return d("MAWDexieTable").dexieResolve(l)}return k(a,b,l,c).then(function(){return l})}function k(a,b,c,e,f){var g;f===void 0&&(f=!1);g=d("MAWXMAUtils").isXMAStoryReply((g=b.quote)==null?void 0:g.content.xmaMessageType)?d("MAWWriteDeleteMessageTxns").deleteXMAStoryReplyMsg(a,b):d("MAWDexieTable").dexieResolve();var h=d("MAWJidUtils").toProtocolMsgId(b);h=h!=null?a.deletedMessages.add(babelHelpers["extends"]({},h,{reason:d("MAWDbDeletedMessages").DbDeletedMsgReasonEnum.Revoke})):d("MAWDexieTable").dexieResolve();return d("MAWDexieTable").dexieAll([a.messages.put(c),d("MAWDbReactionsTxns").deleteReactionsByUniqueMsgIdentifiers(a,[{author:c.author,chatJid:c.threadJid,externalId:c.revokedExternalId}]),d("MAWUpdateQuotedMsgTxns").disassociateQuotedMsg(a,c.threadJid,c.revokedExternalId,c.author,d("MAWMsgType").MSG_TYPE.REVOKED),g,h,d("MAWFTSTxns").maybePutMessageToPurgeBacklog(a,b.externalId)]).then(function(){f||d("MAWUnsendMsgContentCleaner").addNewUnsendMsgContentCleanerTimestamp(c.unsendMsgContentDeleteTs);return d("MAWThreadSnippetBuildTxns").refreshThreadSnippet(a,e)}).then(function(){b!=null&&d("EBUploadMessages").sendDeleteEchoMessage(b,b.threadJid);d("MAWIndexedDb").afterTransaction({tag:"MsgUpdated",value:d("MAWBridgeMsg").createBridgeMsg(c)});if(b!=null&&d("MAWDbMsg").isMediaMsg(b)){var a=b.mediaId,e=b.plaintextHash;a!=null&&(e!=null?d("MAWIndexedDb").afterTransaction({tag:"MediaExpired",value:{mediaId:a,msgId:b.msgId,plaintextHash:e,threadJid:b.threadJid}}):d("MAWIndexedDb").afterTransaction({tag:"MediaExpired",value:{mediaId:a,msgId:b.msgId,threadJid:b.threadJid}}))}d("MAWEphemeralUtil").maybeClearEphemeralMsgCountdown(b)})}function b(a,b,e){if(b.type!==d("MAWMsgType").MSG_TYPE.REVOKED)throw c("err")("Cant mark unrevoked message revoked");var f=d("MAWJidUtils").toProtocolMsgId(b);f=f!=null?a.deletedMessages.add(babelHelpers["extends"]({},f,{reason:d("MAWDbDeletedMessages").DbDeletedMsgReasonEnum.Revoke})):d("MAWDexieTable").dexieResolve();return d("MAWDexieTable").dexieAll([d("MAWDbReactionsTxns").deleteReactionsByUniqueMsgIdentifiers(a,[{author:b.author,chatJid:b.threadJid,externalId:b.revokedExternalId}]),d("MAWThreadSnippetBuildTxns").refreshThreadSnippet(a,e),f]).then(function(){d("MAWUnsendMsgContentCleaner").addNewUnsendMsgContentCleanerTimestamp(b.unsendMsgContentDeleteTs),d("MAWIndexedDb").afterTransaction({tag:"NewMsg",value:d("MAWBridgeMsg").createBridgeMsg(b)})})}function l(a,b){return b.type===d("MAWMsgType").MSG_TYPE.CIPHERTEXT?a.messages["delete"](b.rowId).then(function(){d("MAWIndexedDb").afterTransaction({tag:"DeleteMessages",value:d("MAWBridgeTypesCreators").createBridgeDeleteMessages(b.threadJid,[b])});return!0}):d("MAWDexieTable").dexieResolve(!1)}g.REVOKE_CONTENT_EXPIRATION_IN_SEC=h;g.writeIncomingRevokeMsg=a;g.revokeUnstoredMsg=j;g.markExistingMsgRevoked=k;g.markIncomingMessageRevoked=b}),98);
__d("MAWGetReStoreDBError",[],(function(a,b,c,d,e,f){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b){var c;c=a.call(this,b)||this;c.message=b;c.name="MAWGetReStoreDBError";return c}return b}(babelHelpers.wrapNativeSuper(Error));f["default"]=a}),66);
__d("MAWDBRestoreConfig",["ReStoreDbConfigStore"],(function(a,b,c,d,e,f,g){"use strict";var h={lockVersion:9,name:d("ReStoreDbConfigStore").DB_CONFIG_KEY};function a(){return{defaultConfig:h,isEqual:function(a){return(a==null?void 0:a.lockVersion)==null?!1:(a==null?void 0:a.lockVersion)===h.lockVersion}}}g.createConfig=a}),98);
__d("ReStoreIDBFactory",["invariant","Deferred","I64","IndexedDbPolyfills","ReStoreKeyComparer","err","isPromise","nullthrows","promiseDone","unrecoverableViolation"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l="e2ee_",m=new MessageChannel(),n=[];m.port1.onmessage=function(){var a=n.pop();a()};function o(a){n.push(a),m.port2.postMessage({})}function p(a){var b=new Map();function c(a){if(typeof a!=="object"||a===null)return a;if(b.has(a))return b.get(a);var d;if(Array.isArray(a)){d=[];b.set(a,d);for(var e of a)d.push(c(e))}else if(a instanceof Set){d=new Set();b.set(a,d);for(e of a)d.add(c(e))}else if(a instanceof Map){d=new Map();b.set(a,d);for(e of a){var f=e[0],g=e[1];d.set(c(f),c(g))}}else if(a instanceof ArrayBuffer)d=new ArrayBuffer(a.byteLength),new Uint8Array(d).set(new Uint8Array(a));else if(a instanceof Uint8Array){f=c(a.buffer);d=new Uint8Array(f,a.byteOffset,a.length)}else d={};b.set(a,d);for(g of Object.keys(a))d[g]=c(a[g]);return d}return c(a)}function q(a,b){function d(b){if(b.done)return b.value;if(!(k||(k=c("isPromise")))(b.value))throw c("unrecoverableViolation")("expected promise","messenger_web_product");return b.value.then(function(b){return d(a.next(b))})}return d(a.next(b))}function* r(a){return(k||(k=c("isPromise")))(a)?yield a:a}function s(a,b){a=[].concat(a);b!==-1&&(a[b]=(i||(i=d("I64"))).to_float(c("nullthrows")(i.cast(a[b]),"Expected autoincrementing field to be an I64")));return a.length===1?a[0]:a}function t(a,b){a=Array.isArray(a)?a:[a];return a.map(function(a,c){if(a===-Infinity)return void 0;if(Array.isArray(a)&&a.length===0)return(j||(j=d("ReStoreKeyComparer"))).MAX_KEY;if(Array.isArray(a)&&a.length===1&&Array.isArray(a[0])&&a[0].length===0)return(j||(j=d("ReStoreKeyComparer"))).MAX_KEY;return c===b&&typeof a==="number"?(i||(i=d("I64"))).of_float(a):a})}function u(a,b,e){var f=a.indexes,g=a.primaryKeyIds;g=e==null?g:f[e];f=g.map(function(f){if(b[f]!==void 0||e!=null){var g=b[f];if(a.autoIncrement&&f===a.primaryKeyIds[0]){g=(i||(i=d("I64"))).cast(g);if(g==null)throw c("unrecoverableViolation")("expected auto-incrementing field to be an i64","maw_db");g=i.to_float(g)}return g}throw c("unrecoverableViolation")("primary key must be defined on object","maw_db")});return f.length===1?f[0]:f}var v=function(){function a(a,b){this.$1=a,this.$2=b}var b=a.prototype;b.continue=function(a){this.$1(a)};b.advance=function(a){this.$2(a)};return a}(),w=function(){function a(a,b,c,d){this.$1=a,this.$2=b,this.$3=c,this.$4=d}var b=a.prototype;b.openCursor=function(a,b){var c=this;return A(a,b,function(a){return a[c.$3].index(c.$1)},this.$4,this.$2,this.$1)};b.count=function(a){var b=this.$2.autoIncrement?this.$2.indexes[this.$1].indexOf(this.$2.primaryKeyIds[0]):-1,c=this;return this.$4(new(d("IndexedDbPolyfills").IDBRequest)(),function(d){return q(function*(){var e=new WeakMap();e=(yield* r(d[c.$3].index(c.$1).keys(e,"asc",z(a,b))));var f=0,g=(yield* r(e.next()));while(!g.done)f++,g=(yield* r(e.next()));return f}())})};babelHelpers.createClass(a,[{key:"keyPath",get:function(){return this.$2.indexes[this.$1].length===1?this.$2.indexes[this.$1][0]:this.$2.indexes[this.$1]}},{key:"name",get:function(){return this.$1}}]);return a}();function x(a,b){if(b==null)return a;var e=c("nullthrows")((i||(i=d("I64"))).cast(a[b]),"expected auto-increment field to be an I64");a[b]=i.to_float(e);return a}function y(a,b){if(b==null||a[b]==null)return babelHelpers.extends({},a);typeof a[b]==="number"||h(0,72542);a[b]=(i||(i=d("I64"))).of_float(a[b]);return a}function z(a,b){var c;a!=null&&(c={},a.lower!==void 0&&(a.lowerOpen?c.gt=t(a.lower,b):c.gte=t(a.lower,b)),a.upper!==void 0&&(a.upperOpen?c.lt=t(a.upper,b):c.lte=t(a.upper,b)));return c}function A(a,b,e,f,g,h){var i=g.autoIncrement?h==null?0:g.indexes[h].indexOf(g.primaryKeyIds[0]):-1,k=g.autoIncrement?g.primaryKeyIds[0]:null,l="asc";if(b==="prev")l="desc";else if(b!==void 0&&b!=="next")throw c("err")("Unsupported direction:"+b);var m=new WeakMap(),n=new(d("IndexedDbPolyfills").IDBRequest)(),o,w=new v(C,B);n.result=w;function y(b){var c;o=(c=o)!=null?c:e(b).entries(m,l,z(a,i));return o}function A(a){var b=s(a.value[0],i);w.primaryKey=u(g,a.value[1]);w.key=b;w.value=x(p(a.value[1]),k);return w}function B(a){f(n,function(b){return q(function*(){var c=y(b),d=(yield* r(c.next()));for(var e=0;e<a-1&&!d.done;e++)d=(yield* r(c.next()));if(!d.done)return A(d)}())})}function C(a){var b;a!=null&&(b=t(a,i));f(n,function(a){return q(function*(){var c=y(a),e=(yield* r(c.next(b))),f=function*(){var a=e.value[0];for(var b=0;b<a.length;b++){var f=a.slice(0,b);if(l==="asc"){if(a[b]==null){if(b===a.length-1)e=(yield* r(c.next()));else{var g=[].concat(f,[void 0,(j||(j=d("ReStoreKeyComparer"))).MAX_KEY]);e=(yield* r(c.next(g)))}if(e.done)return"break|outer";a=e.value[0];if(!f.every(function(b,c){return(j||(j=d("ReStoreKeyComparer"))).compareValue(b,a[c])===0}))return"continue|outer"}}else if(a[b]==null){e=(yield* r(c.next(f)));return"continue|outer"}}return"break"};outer:while(!e.done){var g=(yield* f());switch(g){case"break|outer":break outer;case"continue|outer":continue outer;case"break":break outer}}if(!e.done)return A(e)}())})}C();return n}var B=function(){function a(a,b,c){this.$1=a,this.$2=b,this.$3=this.$1.getTableData().tableNames[this.$2],this.$4=c}var b=a.prototype;b.index=function(a){return new w(a,this.$3,this.$2,this.$4)};b.get=function(a){var b=this;return this.$4(new(d("IndexedDbPolyfills").IDBRequest)(),function(c){return q(function*(){var d;d=(yield* r((d=c[b.$2]).get.apply(d,t(a,b.$3.autoIncrement?0:-1))));return d==null?d:x(p(d),b.$3.autoIncrement?b.$3.primaryKeyIds[0]:null)}())})};b.clear=function(){var a=this;return this.$4(new(d("IndexedDbPolyfills").IDBRequest)(),async function(b){var c=b[a.$2].entries(new WeakMap()),d=await c.next();while(!d.done){var e;await (e=b[a.$2]).delete.apply(e,d.value[0]);d=await c.next()}})};b.put=function(a,b){var c=this,e=y(p(a),this.$3.autoIncrement?this.$3.primaryKeyIds[0]:null);b==null||h(0,72438);return this.$4(new(d("IndexedDbPolyfills").IDBRequest)(),async function(a){var b=c.$3.autoIncrement?0:-1;return s(await a[c.$2].put(e),b)})};b.add=function(a,b){var c=this,e=y(p(a),this.$3.autoIncrement?this.$3.primaryKeyIds[0]:null);b==null||h(0,72437);return this.$4(new(d("IndexedDbPolyfills").IDBRequest)(),async function(a){var b=c.$3.autoIncrement?0:-1;return s(await a[c.$2].add(e),b)})};b.delete=function(a){var b=this;return this.$4(new(d("IndexedDbPolyfills").IDBRequest)(),async function(c){if(a instanceof IDBKeyRange){var d=new WeakMap(),e=b.$3.autoIncrement?0:-1;d=await c[b.$2].entries(d,"asc",z(a,e));e=await d.next();while(!e.done){var f;await (f=c[b.$2]).delete.apply(f,e.value[0]);e=await d.next()}}else{await (f=c[b.$2]).delete.apply(f,t(a,b.$3.autoIncrement?0:-1))}return void 0})};b.openCursor=function(a,b){var c=this;return A(a,b,function(a){return a[c.$2]},this.$4,this.$3)};b.count=function(a){var b=this.$3.autoIncrement?0:-1,c=this;return this.$4(new(d("IndexedDbPolyfills").IDBRequest)(),function(d){return q(function*(){var e=new WeakMap();e=(yield* r(d[c.$2].keys(e,"asc",z(a,b))));var f=0,g=(yield* r(e.next()));while(!g.done)f++,g=(yield* r(e.next()));return f}())})};b.createIndex=function(a,b){};b.deleteIndex=function(a){};babelHelpers.createClass(a,[{key:"indexNames",get:function(){return Object.keys(this.$3.indexes)}},{key:"name",get:function(){return this.$2.substr(l.length)}},{key:"autoIncrement",get:function(){return this.$3.autoIncrement}},{key:"keyPath",get:function(){return this.$3.primaryKeyIds.length===1?this.$3.primaryKeyIds[0]:this.$3.primaryKeyIds}}]);return a}(),C=function(b){babelHelpers.inheritsLoose(a,b);function a(a,d,e,f){var g;g=b.call(this)||this;g.$ReStoreIDBTransaction$p_5=[];g.$ReStoreIDBTransaction$p_6=new(c("Deferred"))();g.state="active";g.oncomplete=null;g.onerror=null;g.$ReStoreIDBTransaction$p_1=a;g.$ReStoreIDBTransaction$p_4=d;g.$ReStoreIDBTransaction$p_3=e;g.$ReStoreIDBTransaction$p_2=f;c("promiseDone")(g.$ReStoreIDBTransaction$p_1.runInTransaction(function(a){g.$ReStoreIDBTransaction$p_6.resolve(a);return new Promise(function(b,d){var e=async function e(){var f=[].concat(g.$ReStoreIDBTransaction$p_5);if(g.state==="finished"){d(c("err")("Transaction aborted"));throw c("err")("Transaction aborted")}if(!f.length){g.state="committing";return b()}try{g.state="inactive";var h=[];for(var i of f){i[0];var j=i[1];try{j=j(a);j={status:"fulfilled",value:(k||(k=c("isPromise")))(j)?await j:j}}catch(a){j={reason:a,status:"rejected"}}h.push(j)}g.state="active";g.$ReStoreIDBTransaction$p_5=[];for(j=0;j<h.length;j++){i=h[j];var l=f[j];l=l[0];i.status==="fulfilled"?(l.result=i.value,l.emit("success",{target:l})):(l.error=i.reason,l.emit("error",{target:l}))}}catch(a){return d(a)}o(function(){return void e()})};o(function(){return void e()})})},f==="versionchange"?"readwrite":f),function(){g.state="finished",g.emit("complete"),g.$ReStoreIDBTransaction$p_6=new(c("Deferred"))()},function(){g.state="finished",g.emit("error"),g.$ReStoreIDBTransaction$p_6=new(c("Deferred"))()});return g}var e=a.prototype;e.objectStore=function(a){var b=this;if(!this.$ReStoreIDBTransaction$p_3.has(a))throw c("err")("Invalid object store name "+a);return new B(this.$ReStoreIDBTransaction$p_1,l+a,function(a,d){if(b.state!=="active")throw c("err")("Cannot make request against inactive transaction.");b.$ReStoreIDBTransaction$p_5.push([a,d]);return a})};e.abort=function(){this.state="finished"};e.enqueueAdditionalWork=function(a){this.$ReStoreIDBTransaction$p_5.push([new(d("IndexedDbPolyfills").IDBRequest)(),a])};babelHelpers.createClass(a,[{key:"db",get:function(){return this.$ReStoreIDBTransaction$p_4}},{key:"transaction",get:function(){return this.$ReStoreIDBTransaction$p_6.getPromise()}}]);return a}(d("IndexedDbPolyfills").IDBRequest),D=function(){function a(a,b){this.$1=a,this.$2=b}var b=a.prototype;b.transaction=function(a,b,c){return new C(this.$1,this,new Set(Array.isArray(a)?a:[a]),b)};b.createObjectStore=function(a){return{createIndex:function(a,b,c){}}};b.deleteObjectStore=function(a){};b.close=function(){this.$1.closeDb==null?void 0:this.$1.closeDb()};babelHelpers.createClass(a,[{key:"objectStoreNames",get:function(){var a=Object.keys(this.$1.getTableData().tableNames).filter(function(a){return a.startsWith(l)}).map(function(a){return a.substr(l.length)});a.contains=function(b){return a.find(function(a){return a===b})!=null};return a}},{key:"name",get:function(){return this.$2}}]);return a}();b=function(){function a(a){this.$1=a}var b=a.prototype;b.open=function(a,b){var c=new(d("IndexedDbPolyfills").IDBRequest)();c.result=new D(this.$1,a);o(function(){return c.emit("success")});return c};b.cmp=function(a,b){return indexedDB.cmp(a,b)};return a}();e=function(){function b(){}b.bound=function(c,d,e,f){if(Array.isArray(c)&&c[0]===void 0)return b.upperBound(d,f);return Array.isArray(d)&&d[0]===void 0?b.lowerBound(c,e):a.IDBKeyRange.bound(c,d,e,f)};b.lowerBound=function(b,c){if(Array.isArray(b)&&b[0]===null)return null;return Array.isArray(b)&&b[0]===void 0?null:a.IDBKeyRange.lowerBound(b,c)};b.upperBound=function(b,c){if(Array.isArray(b)&&b[0]===null)return null;return Array.isArray(b)&&b[0]===void 0?null:a.IDBKeyRange.upperBound(b,c)};return b}();self.setImmediate2=o;g.structuredClone=p;g.ReStoreIDBTransaction=C;g.ReStoreIDBDatabase=D;g.ReStoreIDBFactory=b;g.ReStoreIDBKeyRange=e}),98);
__d("ReStoreLegacyEARMigration",["Promise","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f){"use strict";var g;function a(a,b){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c){var d="messenger_web_encryption_v1_"+c,e=(yield new(g||(g=b("Promise")))(function(a){var b=indexedDB.open(d);b.onupgradeneeded=function(b){b.target.transaction.abort(),a()};b.onsuccess=function(b){b=b.target.result;return a(b)}}));if(e==null)return;var f=(yield new g(function(a){var b=e.transaction(["browserEncryptionMetaV2"]).objectStore("browserEncryptionMetaV2").getAll();b.onsuccess=function(b){b=b.target.result;return a(b)}})),h=(yield new g(function(b){var c=indexedDB.open(a);c.onupgradeneeded=function(a){a.target.transaction.abort(),b()};c.onsuccess=function(a){a=a.target.result;return b(a)}}));if(h==null)return;h.close();if(h.objectStoreNames.contains("browserEncryptionMeta"))return;c=(yield new g(function(b){var c=indexedDB.open(a,h.version+1);c.onupgradeneeded=function(a){a=a.target;var b=a.result;a=a.transaction;b.createObjectStore("browserEncryptionMeta");for(b of f){b.id;var c=b.version,d=babelHelpers.objectWithoutPropertiesLoose(b,["id","version"]);a.objectStore("browserEncryptionMeta").put(babelHelpers["extends"]({},d,{version:c}),c)}};c.onsuccess=function(a){a=a.target.result;return b(a)}}));c.close();e.close()});return h.apply(this,arguments)}f.migrateEARData=a}),66);
__d("createReStoreIndexedDbPersistenceWithoutLocks",["ClientConsistency","CurrentMessengerUser","Deferred","ExecutionEnvironment","FBLogger","LSPlatformErrorChannel","MAWCryptoConsts","MAWKeychainNaClCrypto","MAWODSProxy","ReStoreBinaryEncoding","ReStoreDbClosedError","ReStoreDbConfigStore","ReStoreDbVersionChange","ReStoreDecryptionFailure","ReStoreEARInit","ReStoreEARSetupFailure","ReStoreErrorAction","ReStoreIndexedDbClosedEvent","ReStorePersistence","WAExceededStorageQuota","WAOdsEnums","err","gkx","pageID","promiseDone","promiseFromRequest","tweetnacl","unrecoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";var h,i=4096,j=d("CurrentMessengerUser").getIDorEIMU(),k=new Set([d("ReStoreDbConfigStore").CONFIG_STORE_NAME]),l=new(d("ReStoreBinaryEncoding").Encoder)(),m=new(d("ReStoreBinaryEncoding").Decoder)();function n(a,b,e){if(a==null)return null;var f=new Uint8Array(a);try{f=f[1];e=d("ReStoreEARInit").getDbEncryptionKey(e,f);e=e.keys;e=e[0];var g=3;a=d("tweetnacl").secretbox.open(new Uint8Array(a,g+d("tweetnacl").secretbox.nonceLength),new Uint8Array(a,g,d("tweetnacl").secretbox.nonceLength),new Uint8Array(e));if(a==null){throw new(d("MAWKeychainNaClCrypto").EARDecryptionError)("Encrypted ReStore-no-locks was unable to decrypt an entity. Attempting to use key version : "+((g=f)!=null?g:"non-provided")+".")}return m.decode(a)}catch(a){c("LSPlatformErrorChannel").emit(new(d("ReStoreDecryptionFailure").ReStoreDecryptionFailure)(a.message,b));throw new(d("ReStoreDecryptionFailure").ReStoreDecryptionFailure)(a.message,b)}}function o(a,b,e){if(a==null)return a;try{e=d("ReStoreEARInit").getDbEncryptionKey(e,e.latestVersion);var f=e.keys;f=f[0];e=e.version;e=new Uint8Array([0,e,d("MAWCryptoConsts").CIPHER_ID]);var g=d("tweetnacl").randomBytes(d("tweetnacl").secretbox.nonceLength);a=d("tweetnacl").secretbox(l.encode(a),g,new Uint8Array(f));f=new Uint8Array(e.length+g.length+a.length);f.set(e);f.set(g,e.length);f.set(a,e.length+g.length);return f.buffer}catch(a){throw c("err")(a.message+" - Encrypted LSDB was unable to encrypt an entity for table "+b)}}function p(a){for(a of a.values())if(a.size!==0)return!1;return!0}function q(a,b){var c=[];a=new Set(a);for(var d of a)b.objectStoreNames.contains(d)||c.push(d);d=[];for(var e=0;e<b.objectStoreNames.length;e++){var f=b.objectStoreNames[e];!a.has(f)&&!k.has(f)&&d.push(f)}if(c.length!==0||d.length!==0)return[c,d]}function r(a,b,c,d){d===void 0&&(d={});if(c==null){b.debug("Schema doesn't have changes to apply");return}b.debug("Schema has changes to apply");b=c[0];c=c[1];b.forEach(function(b){a.objectStoreNames.contains(b)||(d[b]!=null?d[b](a):a.createObjectStore(b,{autoIncrement:!0}))});c.forEach(function(b){a.objectStoreNames.contains(b)&&a.deleteObjectStore(b)})}function s(a,b,e,f,g,i){function j(a){e(new(c("ReStoreIndexedDbClosedEvent"))(a.target,new(d("ReStoreDbVersionChange").ReStoreDbVersionChange)())),g.debug("DB onversionchange TABID="+c("pageID")),c("FBLogger")("maw_db").info("[pdb] onversionchange inWorker=%s",String((h||(h=c("ExecutionEnvironment"))).isInWorker)),f.endFail("version_change"),c("LSPlatformErrorChannel").emit(new(d("ReStoreDbVersionChange").ReStoreDbVersionChange)())}return new Promise(function(d,e){var g=indexedDB.open(a,i);g.onupgradeneeded=function(a){a=a.target;var c=a.result;a=a.transaction;b(c,a)};g.onerror=function(a){f.endFail("failed_to_open_pdb"),e(c("unrecoverableViolation")("Failed to open db","maw_db",{error:a.target.error}))};g.onsuccess=function(a){a=a.target.result;a.addEventListener("versionchange",j);d(a)}})}async function t(a,b,e,f,g,i,j){var k=[].concat(b,[d("ReStoreEARInit").EAR_STORE_NAME]),l=(b={},b[d("ReStoreEARInit").EAR_STORE_NAME]=d("ReStoreEARInit").createEARStore,b),m;try{g.addPoint("generate_ear_key_default_start"),m=await d("ReStoreEARInit").generateKeyWithDefaultVersion(),g.addPoint("generate_ear_key_default_end")}catch(a){g.addPoint("generate_ear_key_default_failed"),c("FBLogger")("maw_db").catching(a).mustfix("EAR generateKeyWithDefaultVersion failed")}function n(b,a){g.addAnnotations({bool:{dbEmpty:!0}});d("ReStoreDbConfigStore").createDbConfig(b,f.defaultConfig);for(var c of k)l[c]!=null?l[c](b):b.createObjectStore(c,{autoIncrement:!0});if(m!=null){b=m;c=b.version;b=babelHelpers.objectWithoutPropertiesLoose(b,["version"]);d("ReStoreEARInit").storeEARKey(a,c,b)}}g.addPoint("idb_open_start");b=await s(a,n,e,g,i);g.addPoint("idb_open_end");var o=b.transaction(d("ReStoreDbConfigStore").CONFIG_STORE_NAME,"readonly");o=await Promise.all([d("ReStoreDbConfigStore").detectConfigMismatch(o,f),d("ReStoreDbConfigStore").readCorruptionFailuresFromConfig(o).then(function(a){return(a=a==null?void 0:a.value)!=null?a:0})]);var p=o[0];o=o[1];var t=o>0;t&&(c("FBLogger")("maw_db").info("[pdb] opening corrupted db failures=%s inWorker=%s",String(o),String((h||(h=c("ExecutionEnvironment"))).isInWorker)),i.debug("DB corrupted, deleting db"));p&&i.debug("DB config mismatch, deleting db");g.addAnnotations({bool:{configMismatch:p,dbCorruptionOccured:t}});if(p||t)b.close(),g.addPoint("delete_db_start"),await c("promiseFromRequest")(indexedDB.deleteDatabase(a)),g.addPoint("delete_db_end"),g.addPoint("reopen_db_start"),b=await s(a,n,e,g,i),g.addPoint("reopen_db_end");else{var u=q(k,b),v=await d("ReStoreEARInit").generateEARKey(b,g);(u!=null||v!=null)&&(i.debug("Schema mismatch, bumping db version"),b.close(),g.addPoint("mismatch_start"),b=await s(a,function(a,b){r(a,i,u,l);if(v!=null){a=v.version;var c=babelHelpers.objectWithoutPropertiesLoose(v,["version"]);d("ReStoreEARInit").storeEARKey(b,a,c)}},e,g,i,b.version+1),g.addPoint("mismatch_end"))}try{g.addPoint("ear_keys_init_start"),await d("ReStoreEARInit").initEAR(b,j),g.addPoint("ear_keys_init_end")}catch(f){g.addPoint("ear_keys_init_failed");b.close();c("FBLogger")("maw_db").catching(f).mustfix("EAR failed to init as part of ReStore");c("promiseDone")(c("promiseFromRequest")(indexedDB.deleteDatabase(a)),function(a){},function(a){return c("FBLogger")("maw_db").catching(a).warn("Failed to delete DB")});e(new(c("ReStoreIndexedDbClosedEvent"))(b,new(d("ReStoreEARSetupFailure").ReStoreEARSetupFailure)("Failed to setup EAR in Restore")));throw new(d("ReStoreEARSetupFailure").ReStoreEARSetupFailure)("Failed to setup EAR in Restore")}return b}function a(a,b,e,f,g,h){var k=Object.keys(b.tableNames),l={accountKey:null,databaseEncryptionKeys:new Map(),latestVersion:d("MAWCryptoConsts").VERSION},m=f.logHistory,q=f.userFlow;b=j+"-"+a;var r=!0,u,v=[],w=null,x=Promise.resolve();m.debug("shim DB is ON");q.addPoint("init_idb_start");var y=new Map(),z=new Promise(function(b,d){c("promiseDone")(x=x.then(async function(){try{var c=await t(a,k,A,e,q,m,l);b(c)}catch(a){d(a)}}),function(a){},function(a){return c("FBLogger")("maw_db").catching(a).warn("[pdb] dbLock idbPromise issue")})});c("promiseDone")(z.then(function(){q.addPoint("init_idb_end")}));function A(a){a instanceof c("ReStoreIndexedDbClosedEvent")&&(a.idb.close(),y.clear(),r=!1),h==null?void 0:h(a)}function B(a,b,c){c=a.transaction(c!=null&&c.length>0?c:a.objectStoreNames,b,{durability:"relaxed"});d("WAExceededStorageQuota").listenToQuotaExceededError(c);return c}function C(a){var b=y.get(a);b==null&&(b=new Map(),y.set(a,b));return b}function D(){if(w)return;w=new Promise(async function(a){var b;try{var d=async function(){if(u==null){var a;b=(a=b)!=null?a:await z;var d=B(b,v.some(function(a){return a.writemode==="readwrite"||a.expectingWrite})?"readwrite":"readonly");d.onabort=function(){u===d&&(u=null)};u=d}var e=u;a=[];for(var f of v){if(f.writemode==="readwrite"){e.mode==="readwrite"&&a.push(f);u=null;break}a.push(f)}v.splice(0,a.length);a.length&&await Promise.all(a.map(function(a){a=a.thunk;return a(e)}));c("gkx")("116")&&!v.length&&u!=null&&await c("promiseFromRequest")(u.objectStore(u.objectStoreNames[0]).get(""))};while(v.length)await d();(d=u)==null?void 0:d.commit==null?void 0:d.commit()}finally{u=null,a(),w=null}})}function E(a,b,c){c===void 0&&(c=!1);return new Promise(function(d,e){v.push({expectingWrite:c,thunk:async function(b){var c;try{c=await a(b)}catch(a){e(a);return}d(c)},writemode:b}),D()})}function F(){if(!r)return;c("promiseDone")(z,async function(a){var b;a=B(a,"readwrite");b=(b=(b=await d("ReStoreDbConfigStore").readCorruptionFailuresFromConfig(a))==null?void 0:b.value)!=null?b:0;await d("ReStoreDbConfigStore").writeCorruptionFailuresToConfig(a,b)})}function G(){c("promiseDone")(z,function(a){A(new(c("ReStoreIndexedDbClosedEvent"))(a))})}function H(){if(!r)throw new(c("ReStoreDbClosedError"))()}async function I(a){await z;H();var b=c("ClientConsistency").getAdditionalRevisions();b.size>0&&(c("FBLogger")("maw_db").info("[pdb] js mismatch detected"),d("ReStoreErrorAction").softRefresh("restore_js_mismatch"));return new Promise(function(b,d){c("promiseDone")(x=x.then(async function(){try{var c=await a(),e=c[0];c[1];c=await e();b(c)}catch(a){d(a)}}),function(a){},function(a){return c("FBLogger")("maw_db").catching(a).warn("[pdb] dbLock runExclusively issue")})})}return{clearCache:function(){y.clear()},close:G,flush:async function(b,f){f=f.upgrade;if(!r)return;async function h(a){var c=new Promise(function(b,c){a.oncomplete=function(a){b(a.target.result)},a.onerror=a.onabort=function(){y.clear(),c(a.error)}});for(var e of b){var f=e[0],g=e[1],h=a.objectStore(f);for(g of g){var i=g[0],j=g[1];if(j===d("ReStorePersistence").sentinelDeleted)h.delete(i);else{j=o(j,f,l);h.put(j,i)}}}a.commit!=null&&a.commit();await c}function i(){Array.from(b).forEach(function(a){var b=a[0];a=a[1];var c=C(b);Array.from(a).forEach(function(a){var b=a[0];a=a[1];a===d("ReStorePersistence").sentinelDeleted?c.delete(b):c.set(b,a)})})}if(p(b))return;var j=await z;if(f===!0){c("FBLogger")("maw_db").info("[pdb] Updating IDB version, fromVersion: %s, non-empty tables: %s",j.version,Array.from(b.entries()).filter(function(a){a[0];a=a[1];return a.size>0}).map(function(a){a=a[0];return a}).sort().toString());await w;(f=u)==null?void 0:f.abort();j.close();y.clear();z=async function(){var b=new(c("Deferred"))(),d=await s(a,function(a,d){i(),c("promiseDone")(h(d),function(){b.resolve()},function(){b.reject("Failed to complete db flush")})},A,q,m,j.version+1);await b.getPromise();return d}();await z;return}if(b.size===0)return;i();f=Array.from(b.keys());f.push(d("ReStoreDbConfigStore").CONFIG_STORE_NAME);try{await h(B(j,"readwrite",f))}catch(b){if((b==null?void 0:b.name)==="InvalidStateError"&&(g==null?void 0:g.reOpenDbOnInvalidState)===!0)d("MAWODSProxy").odsBumpEntityKey({entity:d("WAOdsEnums").Entity.PQ_MIGRATION,key:"invalid_state"}),A(new(c("ReStoreIndexedDbClosedEvent"))(j)),z=t(a,k,A,e,q,m,l),await h(B(await z,"readwrite",f)),d("MAWODSProxy").odsBumpEntityKey({entity:d("WAOdsEnums").Entity.PQ_MIGRATION,key:"invalid_state_fixed"});else throw b}},get:function(a,b,d){var e=C(b);if(e.has(d))return e.get(d);else{if(!r)return new Promise(function(){});var f=E(function(a){return c("promiseFromRequest")(a.objectStore(b).get(d))},"readonly").then(function(a){var c=e.get(d);if(c!==f)return c;c=n(a,b,l);e.set(d,c);return c});e.set(d,f);return f}},isClosed:function(){return!r},logError:function(a,b,d,e){if(d==="dbCorruption"){b==="readwrite"&&F();throw c("FBLogger")("maw_db").mustfixThrow("Got unexpected undefined in pdb, mode: %s, table: %s, id: %s, deletedInThisTxn: %s",b,a,(d=e==null?void 0:e.id)!=null?d:"",(b=e==null?void 0:e.deletedInThisTxn)!=null?b:"")}},queueCommitWork:function(a){return a()},runExclusively:I,shouldApplySync:function(){return!1},shouldInline:function(a,b){return d("ReStoreBinaryEncoding").estimateSize(b)<i},shouldSync:function(a,b){return!1},types:["indexeddb"],uniqueId:b}}a.schemaDiff=q;a.applyChanges=r;g.default=a}),98);
__d("MAWRestoreSchemaIndexedDB",["BrowserLockManager","IndexedDbPolyfills","LSClientSchemaType","LSPlatformLsInitLog","LSReStoreQplLogger","LSReStoreWrapper","MAWCurrentUser","MAWDBRestoreConfig","MAWDbSchema.restore","MAWDbVersion","MAWDbVersionList","MAWDexie","MAWGetDbVersion","MAWIndexedDbMetadata","MAWQplProxy","MessengerLogHistory","Promise","ReStoreHashSchemaProvider","ReStoreIDBFactory","ReStoreLegacyEARMigration","ReStoreMetadata","WATagsLogger","asyncToGeneratorRuntime","createReStoreIndexedDbPersistence","createReStoreIndexedDbPersistenceWithoutLocks","gkx","qpl"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Updating shimmed DB from "," to ",""]);i=function(){return a};return a}var j,k=d("WATagsLogger").TAGS(["DBInit","DBSetup","ReStore"]),l={};function a(){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){if(j==null){var a=new(c("ReStoreHashSchemaProvider"))(d("LSClientSchemaType").MAW_SCHEMA_NAME,d("ReStoreMetadata").getBuildTableData(l)([d("MAWDbSchema.restore").clientSchema.map(function(a,b){return babelHelpers["extends"]({},a,{id:(b+1).toString()})})])),e=d("MAWGetDbVersion").getArmadilloDbVersion(),f=c("gkx")("6706")&&e===d("MAWDbVersionList").VERSION.V116?d("MAWDbVersionList").VERSION.V115:e;yield d("ReStoreLegacyEARMigration").migrateEARData(d("MAWIndexedDbMetadata").restoreDbName2(d("MAWCurrentUser").getID()),d("MAWCurrentUser").getID());e=c("BrowserLockManager")!=null?c("createReStoreIndexedDbPersistence")(d("MAWIndexedDbMetadata").restoreDbName2(d("MAWCurrentUser").getID()),a,d("MAWDBRestoreConfig").createConfig(),{logHistory:d("MessengerLogHistory").getInstance("db_init"),transactionLockQplLogger:d("LSReStoreQplLogger").createQplLogger(c("qpl")._(25303045,"817")),userFlow:d("LSPlatformLsInitLog").lsInitLogger}):c("createReStoreIndexedDbPersistenceWithoutLocks")(d("MAWIndexedDbMetadata").restoreDbName2(d("MAWCurrentUser").getID()),a,d("MAWDBRestoreConfig").createConfig(),{logHistory:d("MessengerLogHistory").getInstance("db_init"),userFlow:d("LSPlatformLsInitLog").lsInitLogger});j=d("LSReStoreWrapper").createLSReStore(e,a,void 0,{migration:function(a,e){var g;d("MAWQplProxy").sendQPLIntAnnotationThroughBridge(c("qpl")._(1056839232,"112"),"dbVersion",(g=a)!=null?g:0);return new(h||(h=b("Promise")))(function(g,l){var m={open:function(){var c=new(d("IndexedDbPolyfills").IDBRequest)(),i=new(d("ReStoreIDBFactory").ReStoreIDBDatabase)(j,""),k=new(d("ReStoreIDBFactory").ReStoreIDBTransaction)(babelHelpers["extends"]({},j,{runInTransaction:function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b;try{b=(yield a(e))}catch(a){l(a);throw a}g();return b});function c(b){return a.apply(this,arguments)}return c}()}),i,new Set(i.objectStoreNames),"versionchange");c.result=i;c.transaction=k;void b("asyncToGeneratorRuntime").asyncToGenerator(function*(){yield (h||(h=b("Promise"))).resolve(),c.emit("upgradeneeded",{newVersion:f,oldVersion:a,target:{result:i,transaction:k}})})();return c}};m=new(c("MAWDexie"))("",{IDBKeyRange:d("ReStoreIDBFactory").ReStoreIDBKeyRange,chromeTransactionDurability:"relaxed",enableDataSyncMiddleware:!0,indexedDB:m,shimEnabled:!0});k.LOG(i(),a,f);var n=d("MAWDbVersion").updateDB(m,a,f);d("MAWQplProxy").sendQPLBoolAnnotationThroughBridge(c("qpl")._(1056839232,"112"),"dbUpgradeNeeded",a!==n);m.open()})},targetVersion:f})}return j});return m.apply(this,arguments)}function e(){var a;(a=j)==null?void 0:a.closeDb==null?void 0:a.closeDb();j=null}g.createDB=a;g.closeDB=e}),98);
__d("MAWReStoreDbSetup",["MAWGetReStoreDBError","MAWRestoreDbState","MAWRestoreSchemaIndexedDB","asyncToGeneratorRuntime","cr:10742","cr:2924","cr:3535","cr:4561","err","gkx","qex"],(function(a,b,c,d,e,f,g){"use strict";var h;h=(h=(h=b("cr:3535"))!=null?h:b("cr:10742"))!=null?h:b("cr:2924");d=d("MAWRestoreDbState").getTargetDbState()==="restore"||c("gkx")("23906")||c("qex")._("736")===!0?d("MAWRestoreSchemaIndexedDB").createDB:null;if(h!=null&&b("cr:4561")!=null){var i=h;h=babelHelpers["extends"]({},h,{createDB:function(){return i.createDB(void 0,[b("cr:4561")])}})}var j=(h=(h=h)==null?void 0:h.createDB)!=null?h:d,k;function a(){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=(yield k);a==null?void 0:a.closeDb==null?void 0:a.closeDb();k=null});return l.apply(this,arguments)}function e(){if(j==null)throw c("err")("Unexpected invocation of OneDB");k==null&&(k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){try{var a=(yield j());yield a.runInTransaction(b("asyncToGeneratorRuntime").asyncToGenerator(function*(){}),"readwrite",void 0,void 0,f.id+":63");return a}catch(a){throw new(c("MAWGetReStoreDBError"))("Failed to get ReStore DB: "+a)}})());return k}function m(){return j!=null}g.closeDB=a;g.getDB=e;g.shouldUseReStoreDb=m}),98);
__d("MAWReStoreDb",["FBLogger","MAWIndexedDb","MAWReStoreDbSetup","asyncToGeneratorRuntime","gkx"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){if(c("gkx")("3577"))try{var a=(yield d("MAWReStoreDbSetup").getDB());return a}catch(a){throw c("FBLogger")("igd_web_on_msgr").blameToPreviousFrame().catching(a).mustfixThrow("Failed to get ReStore DB: %s",arguments[0])}h==null&&(d("MAWIndexedDb").willSetupDB()?h=d("MAWIndexedDb").getDB().then(function(){return d("MAWReStoreDbSetup").getDB()}):h=d("MAWReStoreDbSetup").getDB());return h});return i.apply(this,arguments)}function e(){return d("MAWReStoreDbSetup").shouldUseReStoreDb()}g.getDB=a;g.shouldUseReStoreDb=e}),98);
__d("MAWReStoreTiming",["FBLogger","MAWErrorObject","MAWIndexedDb","MAWLLAMigrationUtils","MAWQplProxy","MAWReStoreDb","MAWRestoreDbState","asyncToGeneratorRuntime","qex"],(function(a,b,c,d,e,f,g){"use strict";var h=["MWPTransactor"];function i(a){a=d("MAWLLAMigrationUtils").getTransactorQPLParam(a);a=a.length===2?a:[null,void 0];var b=a[0];a=a[1];return b!=null?d("MAWQplProxy").startQplUserFlow(b,a,void 0,d("MAWLLAMigrationUtils").QPL_TRANSACTION_TIMEOUT_MS):null}var j=c("FBLogger")("messenger_e2ee_web");function k(a){if(a)return j.catching(a);else return j}function l(a,c){return b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var b=(yield d("MAWReStoreDb").getDB(f.id+":60")),e=i(a),g;try{e==null?void 0:e.addPoint("transactor_execution_start");for(var j=arguments.length,l=new Array(j),m=0;m<j;m++)l[m]=arguments[m];g=(yield c.apply(void 0,[b].concat(l)));e==null?void 0:e.addPoint("transactor_execution_end");e==null?void 0:e.endSuccess()}catch(b){var n;e==null?void 0:e.endFail("transaction_fail");var o=d("MAWErrorObject").getErrorObject(b);throw k(o).mustfixThrow("[%s] Error performing %s transaction",h.join("|"),(n=a)!=null?n:"")}return g})}function a(a,b,e,f){return function(){for(var g=arguments.length,h=new Array(g),i=0;i<g;i++)h[i]=arguments[i];return!c("qex")._("1016")?d("MAWIndexedDb").makeMsgrTransactor(e,a,f).apply(void 0,h):d("MAWRestoreDbState").isUsingShim().then(function(c){return c?l(a,b).apply(void 0,h):d("MAWIndexedDb").makeMsgrTransactor(e,a,f).apply(void 0,h)})}}g.makeShimTransactor=a}),98);
__d("MAWHandlePendingStanzasInRestoreV2",["EBUploadMessages","I64","LSMEBTaskCreationSource","MAWBridgeEventTransmitter","MAWDbPendingStanza","MAWDbPendingStanzaTxns","MAWDexieTable","MAWEBUploadTrackingUtils","MAWEncryptedBackupCacheManager","MAWIndexedDb","MAWReStoreTiming","MAWTransactionMode","MAWWriteRevokeMessageTxns","Promise","ReQL","WAJids","WALogger","cr:553","cr:7702","cr:8066","nullthrows","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] pendingStanza type "," is not supported"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] revokedExternalId is null for pendingStanza"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] revokedExternalId is null for pendingStanza"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] threadJid is null for pendingStanza"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] pendingStanzaTs is null for pendingStanza"]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] revokedExternalId is null for pendingStanza"]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] externalId is null for pendingStanza"]);p=function(){return a};return a}function q(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] Delete For Me pending stanza does not need to be applied."]);q=function(){return a};return a}function r(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] thread is null"]);r=function(){return a};return a}function s(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] pendingStanza type "," is not supported"]);s=function(){return a};return a}function t(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] Pending Stanza not found in the cache. This shouldn't happen."]);t=function(){return a};return a}function u(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] Could not find thread for chatId "," for pendingStanza"]);u=function(){return a};return a}function v(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] externalId is null for pendingStanza"]);v=function(){return a};return a}var w=(a=(e=(a=b("cr:553"))==null?void 0:a.structuredClone)!=null?e:(f=b("cr:7702"))==null?void 0:f.structuredClone)!=null?a:(e=b("cr:8066"))==null?void 0:e.structuredClone;f=function(a,c,d){a=a.restoredMsgsData;if(a){var e=a.newlyAddedMsgs;e=e.concat(a.existingMsgs);return x(e,c,d)}return(i||(i=b("Promise"))).resolve()};var x=function(a,e,f){f==null?void 0:f.addPoint("apply_pending_stanza_start");var g=0,h=0,j=0,k=0,l=new Map();return F().then(function(a){a==null?void 0:a.map(function(a){var b=a.pendingContent.content.externalId;if(b==null){d("WALogger").WARN(v());return}l.set(a.externalIdWithType,a)}),k=l.size}).then(function(){var b=new Set();return B(a).then(function(f){return d("MAWDexieTable").dexieAll(a.map(function(a){var c=a.externalId,i=f.get(a.threadJid);if(i==null){d("WALogger").ERROR(u(),a.threadJid);return d("MAWDexieTable").dexieResolve()}if(e)if(d("MAWEncryptedBackupCacheManager").peekPendingStanzaCache(c)){var k=d("MAWEncryptedBackupCacheManager").getPendingStanzaCacheValue(c);if(k==null){d("WALogger").ERROR(t());return}return A(k,a,i,e).then(function(a){a!=null&&b.add(k);d("MAWEncryptedBackupCacheManager").removePendingStanzaCacheValue(c);l["delete"](k.externalIdWithType);a=k.pendingContent.type;a===d("MAWDbPendingStanza").PENDING_TYPE.REVOKED&&g++;h++})}else l.clear();else{var m=c+"_"+d("MAWDbPendingStanza").PENDING_REVOKED,n=l.get(m);if(n!=null)return A(n,a,i,e).then(function(a){a!=null&&(b.add(n),g++,j++),l["delete"](n.externalIdWithType)})}})).then(function(){if(!e){var a=y(l);g+=a[1];h+=a[0]+a[1];c("promiseDone")(z(Array.from(b)))}})})}).then(function(a){f==null?void 0:f.addPoint("apply_pending_stanza_end",{"int":{initialRestorePendingStanzaCount:j,pendingStanzasToBeUploadedCount:k,pointRestorePendingStanzaCount:h,revokedCount:g}});return(i||(i=b("Promise"))).resolve()})},y=function(a){var b=0,c=0;a.forEach(function(a){var e=a.pendingContent.type;e===d("MAWDbPendingStanza").PENDING_TYPE.REVOKED?c++:e===d("MAWDbPendingStanza").PENDING_TYPE.DELETE_FOR_ME&&b++;E(a)});a.clear();return[b,c]},z=d("MAWIndexedDb").makeMsgrTransactor({pendingStanzas:d("MAWTransactionMode").READWRITE},"deletePendingStanzasFromIndexedDB",function(a){return function(b){return d("MAWDbPendingStanzaTxns").deletePendingStanzas(a,b)}}),A=function(a,e,f,g){var h=a.pendingContent.type;if(h===d("MAWDbPendingStanza").PENDING_TYPE.REVOKED)return D(a,e,f,g).then(function(a){if(a!=null){var b=d("MAWEBUploadTrackingUtils").genInstanceKeyOnly();d("MAWEBUploadTrackingUtils").startUploadTracking(a.externalId,a.type,"pendingstanza",b);c("promiseDone")(d("EBUploadMessages").uploadUniqueMessage([a],void 0,!1,void 0,new Map([[a.externalId,b]]),void 0,"revoked_message"))}});else if(h===d("MAWDbPendingStanza").PENDING_TYPE.DELETE_FOR_ME)return C(a);else{d("WALogger").WARN(s(),h);return(i||(i=b("Promise"))).resolve()}},B=d("MAWIndexedDb").makeMsgrTransactor({threads:d("MAWTransactionMode").READONLY},"getThreadsForMessages",function(a){return function(b){var c=[];b.forEach(function(a){c.push(a.threadJid)});return a.threads.where("jid").anyOf(c).toArray().then(function(a){var b=new Map();a.forEach(function(a){if(a==null){d("WALogger").WARN(r());return d("MAWDexieTable").dexieResolve()}b.set(a.jid,a)});return b})}}),C=d("MAWIndexedDb").makeMsgrTransactor({pendingStanzas:d("MAWTransactionMode").READWRITE},"deleteForMeMsg",function(a){return function(b){d("WALogger").LOG(q());return d("MAWDexieTable").dexieAll([a.pendingStanzas["delete"](b.rowId)]).then(function(){return d("MAWDexieTable").dexieResolve(b)})}}),D=d("MAWIndexedDb").makeMsgrTransactor({chunk:d("MAWTransactionMode").READONLY,deletedMessages:d("MAWTransactionMode").READWRITE,ftsPurgeBacklog:d("MAWTransactionMode").READWRITE,groupInfo:d("MAWTransactionMode").READWRITE,media:d("MAWTransactionMode").READONLY,messages:d("MAWTransactionMode").READWRITE,pendingStanzas:d("MAWTransactionMode").READWRITE,reactions:d("MAWTransactionMode").READWRITE,threads:d("MAWTransactionMode").READWRITE,xma:d("MAWTransactionMode").READONLY},"revokeMessage",function(a){return function(b,c,e,f){var g=b.pendingContent.content.externalId;if(g==null){d("WALogger").ERROR(p());return d("MAWDexieTable").dexieResolve()}var h=b.pendingContent.content.revokedExternalId;if(h==null){d("WALogger").ERROR(o());return d("MAWDexieTable").dexieResolve()}var i=b.pendingContent.content.ts;if(i==null){d("WALogger").ERROR(n());return d("MAWDexieTable").dexieResolve()}return d("MAWWriteRevokeMessageTxns").revokeUnstoredMsg(a,c,e,g,h,c.serverTs,c.ts,f).then(function(c){a.pendingStanzas["delete"](b.rowId);return d("MAWDexieTable").dexieResolve(c)})}});function E(a){var b=a.pendingContent.content.threadJid;if(b==null){d("WALogger").WARN(m());return}var e=d("WAJids").threadIdForChatJid(b),f=a.pendingContent.type;if(f===d("MAWDbPendingStanza").PENDING_TYPE.REVOKED){var g=a.pendingContent.content.revokedExternalId;if(g==null){d("WALogger").WARN(l());return}g=g}else if(f===d("MAWDbPendingStanza").PENDING_TYPE.DELETE_FOR_ME){var h=a.pendingContent.content.externalId;if(h==null){d("WALogger").WARN(k());return}g=h}else{d("WALogger").WARN(j(),f);return}d("MAWEncryptedBackupCacheManager").addPendingStanzaToPendingStanzaCache(g,a);d("MAWBridgeEventTransmitter").issuePointQueryOutsideTxn(g,e,void 0,c("LSMEBTaskCreationSource").POINT_QUERY_FROM_EB,b)}var F=d("MAWReStoreTiming").makeShimTransactor("getAllPendingStanzas",function(a){return d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(a.tables.e2ee_pendingStanzas).map(function(a){a=c("nullthrows")(w)(a);return babelHelpers["extends"]({},a,{rowId:(h||(h=d("I64"))).to_float(a.rowId)})}))},{pendingStanzas:d("MAWTransactionMode").READONLY},function(a){return function(){return d("MAWDbPendingStanzaTxns").getAllPendingStanzas(a)}});g.applyPendingStanzas=f;g.issuePointQueryForPendingStanza=E}),98);
__d("WAArmadilloBackupMessage.pb",["WAProtoConst"],(function(a,b,c,d,e,f,g){a={};b={};c={};e={};a.internalSpec={metadata:[1,(f=d("WAProtoConst")).TYPES.MESSAGE,c],encryptedTransportMessage:[2,f.TYPES.BYTES],encryptedTransportEvent:[5,f.TYPES.MESSAGE,b],encryptedTransportLocallyTransformedMessage:[6,f.TYPES.MESSAGE,b],__oneofs__:{payload:["encryptedTransportMessage","encryptedTransportEvent","encryptedTransportLocallyTransformedMessage"]}};b.internalSpec={payload:[1,f.TYPES.BYTES],version:[2,f.TYPES.INT32]};c.internalSpec={senderId:[1,f.TYPES.STRING],messageId:[2,f.TYPES.STRING],timestampMs:[3,f.TYPES.INT64],frankingMetadata:[4,f.TYPES.MESSAGE,e],payloadVersion:[5,f.TYPES.INT32],futureProofBehavior:[6,f.TYPES.INT32],threadTypeTag:[7,f.TYPES.INT32]};e.internalSpec={frankingTag:[3,f.TYPES.BYTES],reportingTag:[4,f.TYPES.BYTES]};g.BackupMessageSpec=a;g.BackupMessage$SubprotocolSpec=b;g.BackupMessage$MetadataSpec=c;g.BackupMessage$Metadata$FrankingMetadataSpec=e}),98);
__d("EncryptedBackupsUploadEntity",["$InternalEnum","EncryptedBackupsUtils","WAArmadilloBackupMessage.pb","WAGlobals","WAJids","WATimeUtils","encodeProtobuf"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return a}var h=b("$InternalEnum").Mirrored(["NEEDS_BACKUP","COMPLETED","NEEDS_BACKUP_RETRY","PERMANENT_FAILURE","EXPIRED","THREAD_DELETED","DELETION_PURGED","MESSAGE_DELETED","UPLOADING"]);b=b("$InternalEnum")({INVALID:"-1",IMAGE:"0",PTT:"1",DOCUMENT:"3",VIDEO:"4",GIF:"5",STICKER:"6",XMA:"22",MESSENGER_PREVIEW:"25"});function c(a){var b=a.messageApplication,c=a.msgId,e=a.reportingMeta;a=a.sortOrderMs;var f=d("WAJids").authorToUserId(c.author,d("WAJids").extractUserId(d("WAGlobals").getMyUserJid()));return d("encodeProtobuf").encodeProtobuf(d("WAArmadilloBackupMessage.pb").BackupMessageSpec,d("EncryptedBackupsUtils").asBackupMessage(f,c.externalId,a,(f=e)!=null?f:{frankingKey:null,frankingTag:null,frankingVersion:null,reportingContent:null,reportingTag:null},b)).readByteArray()}function e(a){return a.buffer.slice(a.byteOffset,a.byteLength+a.byteOffset)}function f(a){var b=a.attachmentContext,c=a.backupDirective,e=a.dbMsgType,f=a.isOpenEB;f=f===void 0?!1:f;var g=a.legacyAttachmentContext,i=a.msgId,j=a.originalMsgProtocolId,k=a.protobuf,l=a.senderId,m=a.serverTs,n=a.sortOrderMs;a=a.tags;e={backupActionType:c.actionType,backupDirective:c,dbMsgType:e,failTsMs:d("WATimeUtils").castToMillisTime(0),isOpenEB:f,msgId:i,msgIdKey:d("EncryptedBackupsUtils").convertWAMsgIdToStringId(i),msgType:"text",originalMsgProtocolId:j,protobuf:k,senderId:l,serverTs:m,sortOrderMs:n,supplementalKey:c.supplementalKey,tags:a,uploadStatus:h.NEEDS_BACKUP,uploadTsSec:d("WATimeUtils").unixTime()};b!=null&&(e=babelHelpers["extends"]({},e,{attachmentContext:b,legacyAttachmentContext:g,msgType:"media"}));return e}g.toEbBackupMessageBytes=a;g.EbUploadStatus=h;g.AttachmentContextMediaType=b;g.encodeBackupMessage=c;g.getEbBackupMessageBytesBuffer=e;g.asEBUploadEntity=f}),98);
__d("WAPersistedQueueCache",["WAResolvable","WAShiftTimer","WATagsLogger","regeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["Error during flush: ",""]);h=function(){return a};return a}function a(a,c,e){var f=d("WATagsLogger").TAGS(["PersistedQueue",a,"cache"]),g=[],i=new(d("WAResolvable").Resolvable)(),j=(a=e)!=null?a:{},k=new(d("WAShiftTimer").ShiftTimer)(function(){void n()});return{commit:function(){return n()},add:function(a){g.push(a);a=i;l();m();return a.promise},config:function(a){j=a}};function l(){j.cacheSize!=null&&g.length>=j.cacheSize&&void n()}function m(){if(j.maxDelay!=null){var a=j.maxDelay;k.cancel();k.onOrAfter(a)}}function n(){var a,e;return b("regeneratorRuntime").async(function(j){while(1)switch(j.prev=j.next){case 0:if(!(g.length===0)){j.next=2;break}return j.abrupt("return");case 2:k.cancel();a=g;g=[];e=i;i=new(d("WAResolvable").Resolvable)();j.prev=7;j.next=10;return b("regeneratorRuntime").awrap(c(a));case 10:e.resolve();j.next=18;break;case 13:j.prev=13;j.t0=j["catch"](7);f.ERROR(h(),j.t0);e.reject(j.t0);throw j.t0;case 18:case"end":return j.stop()}},null,this,[[7,13]])}}g.makePersistedQueueCache=a}),98);
__d("WAPersistedQueue",["WALogger","WAPersistedQueueCache","WAPubSub"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["[PersistedQueue] new entry & commit"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[PersistedQueue] new entry"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["[PersistedQueue] flush: ","}"]);j=function(){return a};return a}var k=function(){function a(a,b,c){var e=this;this.$1=d("WAPubSub").simplePubSub();this.$3=a;this.$4=b;this.$2=d("WAPersistedQueueCache").makePersistedQueueCache(a,function(c){return b.write(a,c).then(function(){d("WALogger").DEV(j(),c.length),e.$1.publish({type:"flush"})})},c)}var b=a.prototype;b.subscribe=function(a){return this.$1.subscribe(a)};b.index=function(a){function b(b){return a.apply(this,arguments)}b.toString=function(){return a.toString()};return b}(function(a){return this.$4.index(this.$3,a)});b.keys=function(){return this.$4.keys(this.$3)};b.read=function(a){return this.$4.read(this.$3,a)};b.addPending=function(a,b,c){d("WALogger").DEV(i()),this.$1.publish({type:"new_entity"}),void this.$2.add(a).then(function(){return b==null?void 0:b()},function(a){return c==null?void 0:c(a)})};b.addAndCommit=function(a){var b=this;d("WALogger").DEV(h());this.$1.publish({type:"new_entity"});a.forEach(function(a){return void b.$2.add(a)});return this.$2.commit()};b.commit=function(){return this.$2.commit()};b.ack=function(a){return this.$4.ack(this.$3,a)};b["delete"]=function(a){return this.$4["delete"](this.$3,a)};b.clear=function(){return this.$4.clear(this.$3)};return a}();function a(a,b,c){return new k(a,b,c)}g.PersistedQueue=k;g.initPersistedQueue=a}),98);
__d("WAPersistedQueueApi",["MAWTransactionMode","WADbTransactor"],(function(a,b,c,d,e,f,g){"use strict";function a(){return{ack:k,clear:m,"delete":l,index:i,keys:n,read:h,write:j}}function h(a,b){return d("WADbTransactor").persistedQueueTransactor(a,d("MAWTransactionMode").READONLY,function(a){a=a.toCollection();(b==null?void 0:b.order)==="desc"&&(a=a.reverse());(b==null?void 0:b.filter)!=null&&(a=a.filter(b.filter));(b==null?void 0:b.limit)!=null&&(a=a.limit(b.limit));return a.toArray()},"read")}function i(a,b){return{equals:function(c){return{read:function(e){return d("WADbTransactor").persistedQueueTransactor(a,d("MAWTransactionMode").READONLY,function(a){a=a.where(b).equals(c.length===1?c[0]:c);(e==null?void 0:e.order)==="desc"&&(a=a.reverse());(e==null?void 0:e.filter)!=null&&(a=a.filter(e.filter));(e==null?void 0:e.limit)!=null&&(a=a.limit(e.limit));return a.toArray()},"index-equal")}}},keys:function(){return d("WADbTransactor").persistedQueueTransactor(a,d("MAWTransactionMode").READONLY,function(a){a=a.orderBy(b);return a.uniqueKeys()},"index-keys")},read:function(c){return d("WADbTransactor").persistedQueueTransactor(a,d("MAWTransactionMode").READONLY,function(a){a=a.orderBy(b);(c==null?void 0:c.order)==="desc"&&(a=a.reverse());(c==null?void 0:c.filter)!=null&&(a=a.filter(c.filter));(c==null?void 0:c.limit)!=null&&(a=a.limit(c.limit));return a.toArray()},"index-read")}}}function j(a,b){return d("WADbTransactor").persistedQueueTransactor(a,d("MAWTransactionMode").READWRITE,function(a){return a.bulkAdd(b).then(function(){})},"write")}function k(a,b){return d("WADbTransactor").persistedQueueTransactor(a,d("MAWTransactionMode").READWRITE,function(a){return a.bulkDelete(b)},"ack")}function l(a,b){return d("WADbTransactor").persistedQueueTransactor(a,d("MAWTransactionMode").READWRITE,function(a){return a.bulkDelete(b)},"delete")}function m(a){return d("WADbTransactor").persistedQueueTransactor(a,d("MAWTransactionMode").READWRITE,function(a){return a.clear().then(function(){})},"clear")}function n(a){return d("WADbTransactor").persistedQueueTransactor(a,d("MAWTransactionMode").READONLY,function(a){a=a.toCollection();return a.primaryKeys()},"keys")}g.dexieApiForPersistedQueue=a;g.persistedQueueRead=h;g.persistedQueueIndex=i;g.persistedQueueWrite=j;g.persistedQueueAck=k;g.persistedQueueDelete=l;g.persistedQueueClear=m;g.persistedQueueKeys=n}),98);
__d("EncryptedBackupsUploadQueue",["EncryptedBackupsUploadEntity","MAWEBUploadTrackingUtils","Promise","WAPersistedQueue","WAPersistedQueueApi","WATagsLogger","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Failed to write to ebUploadQueue ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["EB Upload Queue is already initialized"]);j=function(){return a};return a}var k=d("WATagsLogger").TAGS(["EbUploadQueue"]),l=null;function m(){return l==null?n():l}function n(){l!=null&&k.ERROR(j());var a=d("WAPersistedQueue").initPersistedQueue("ebUploadQueue",d("WAPersistedQueueApi").dexieApiForPersistedQueue());l=a;return a}function a(a){if(a.length===0)return;var e=a.map(function(a){var b=a.attachmentContext,c=a.backupDirective,e=a.dbMsgType,f=a.isOpenEB,g=a.legacyAttachmentContext,h=a.messageApplication,i=a.msgId,j=a.originalMsgProtocolId,k=a.reportingMeta,l=a.senderId,m=a.serverTs,n=a.sortOrderMs;a=a.tags;return d("EncryptedBackupsUploadEntity").asEBUploadEntity({attachmentContext:b,backupDirective:c,dbMsgType:e,isOpenEB:f,legacyAttachmentContext:g,msgId:i,originalMsgProtocolId:j,protobuf:d("EncryptedBackupsUploadEntity").encodeBackupMessage({messageApplication:h,msgId:i,reportingMeta:k,sortOrderMs:n}),senderId:l,serverTs:m,sortOrderMs:n,tags:a})});a=m();c("promiseDone")(a.addAndCommit(e)["catch"](function(a){e.forEach(function(a){d("MAWEBUploadTrackingUtils").removeExternalIdFromUploadQueueStartedCache(a.msgId.externalId)});k.ERROR(i(),a);return(h||(h=b("Promise"))).reject(a)}))}g.logger=k;g.ebUploadQueue=m;g.initEbUploadQueue=n;g.putMsgsToEbUpload=a}),98);
__d("MAWCastToMsgrServerMediaType",["EncryptedBackupsUploadEntity","MAWDbMedia","WALogger"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["invalid attachment mediaType: "," for castMediaAttachmentTypeToServerMediaType method"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["invalid client mediaType: "," for castClientMediaTypeToServerMediaType method"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["invalid mediaType: "," for castToMsgrServerMediaType method"]);j=function(){return a};return a}function a(a,b){b===void 0&&(b=!1);if(b&&a==="image")return"xma";switch(a){case"image":case"video":case"gif":case"sticker":return a;case"document":return"file";case"ptt":return"audio";case"xma-image":return"xma";case"preview":return"preview";default:d("WALogger").ERROR(j(),a);return null}}function b(a,b){b===void 0&&(b=!1);if(b&&a===d("MAWDbMedia").MEDIA_TYPE.IMAGE)return"xma";switch(a){case"Image":return"image";case"Video":return"video";case"Gif":return"gif";case"Sticker":return"sticker";case"DocumentFile":return"file";case"Ptt":return"audio";default:d("WALogger").ERROR(i(),a);return null}}function c(a){switch(a){case d("EncryptedBackupsUploadEntity").AttachmentContextMediaType.IMAGE:return"image";case d("EncryptedBackupsUploadEntity").AttachmentContextMediaType.VIDEO:return"video";case d("EncryptedBackupsUploadEntity").AttachmentContextMediaType.GIF:return"gif";case d("EncryptedBackupsUploadEntity").AttachmentContextMediaType.STICKER:return"sticker";case d("EncryptedBackupsUploadEntity").AttachmentContextMediaType.DOCUMENT:return"file";case d("EncryptedBackupsUploadEntity").AttachmentContextMediaType.PTT:return"audio";case d("EncryptedBackupsUploadEntity").AttachmentContextMediaType.XMA:return"xma";case d("EncryptedBackupsUploadEntity").AttachmentContextMediaType.MESSENGER_PREVIEW:return"preview";default:d("WALogger").ERROR(h(),a);return null}}g.castToMsgrServerMediaType=a;g.castClientMediaTypeToServerMediaType=b;g.castMediaAttachmentTypeToServerMediaType=c}),98);
__d("WADbDeviceRegistration",[],(function(a,b,c,d,e,f){"use strict";a=25;b=6;c=100;d="https://reg-e2ee.facebook.com";e=d;var g="https://v.whatsapp.net",h="https://reg-e2ee.instagram.com",i="/v2/fb_icdc_fetch",j="/v2/fb_register_v2",k="Device has already been registered to WA servers",l="Device registration finished successfully",m="Device registration retries failed "+b+" times. No longer attempting registration.",n="Device registration response was null",o="Current user id is zero",p="CryptoAuthToken is empty",q="CryptoAuthToken is expired",r={failed:"failed",finished:"finished"};f.MAX_USERS_FOR_NOTIFY_DEVICE_CHANGE=a;f.MAX_DEVICE_REGISTRATION_RETRIES=b;f.MAX_ROTATE_CRYPTO_AUTH_TOKEN_RETRIES=c;f.REG_FB_DOMAIN=d;f.REG_MSGR_DOMAIN=e;f.REG_WA_DOMAIN=g;f.REG_IGD_DOMAIN=h;f.ICDC_ENDPOINT=i;f.REGISTRATION_ENDPOINT=j;f.DEVICE_ALREADY_REGISTERED=k;f.DEVICE_SUCCESSFULLY_REGISTERED=l;f.FAILED_REGISTRATION_RETRIES=m;f.NULL_RESPONSE_FROM_SERVER=n;f.DEVICE_REGISTER_ERROR_ZERO_AS_USER_ID=o;f.DEVICE_REGISTER_ERROR_EMPTY_CAT_TOKEN=p;f.DEVICE_REGISTER_ERROR_EXPIRED_CAT_TOKEN=q;f.RegistrationStatesEnum=r}),66);
__d("getOrchestratorVersion",["qex"],(function(a,b,c,d,e,f,g){"use strict";function a(){var a;return(a=c("qex")._("263"))!=null?a:"default"}g["default"]=a}),98);
__d("MAWMainWebWorkerConfig",["MAWGK","MAWParseXMAFBConfig","WADbDeviceRegistration","WorkerUtils","getOrchestratorVersion","gkx","justknobx","qex"],(function(a,b,c,d,e,f,g){"use strict";var h,i=1;a={armadilloWebProcessFutureproof:function(){return c("MAWGK").armadillo_web_process_futureproof},batchSize:function(){return c("justknobx")._("1866")},getDevicesV2:function(){return c("gkx")("4551")},getSignalFutureMessagesMax:function(){return c("gkx")("4280")?c("justknobx")._("847"):2e3},icdcAlertTriggerFailureCounter:function(){return c("justknobx")._("1970")},icdcCooldownIntervalInMinutes:function(){return c("justknobx")._("1971")},icdcIntervalInMinutes:function(){return c("justknobx")._("1972")},ignoreGroupMismatches:function(){return c("gkx")("6971")},ignoreReadReceipts:function(){return c("gkx")("1713")},isDocumentReceiveEnabled:function(){return!c("gkx")("23924")},isEphemeralMessagesEnabled:function(){return!0},isFrankingDropOnInvalid:function(){return c("gkx")("23973")},isFrankingDropOnMissing:function(){return c("gkx")("23974")},isFrankingEnabled:function(){return c("justknobx")._("1347")},isGifEnabled:function(){return c("justknobx")._("1147")},isHttpFetchCacheEnabled:function(){return c("gkx")("5483")},isICDCErrorEnabled:function(){return c("gkx")("23975")},isMediaFallbackToAlternativeHmacSaltsEnabled:function(){return c("gkx")("23976")},isMediaStreamingForProgressiveJpegEnabled:function(){return c("gkx")("2325")},isOctetStreamAttachmentMimeTypeEnabled:function(){return c("gkx")("4644")},isPollsFallbackExperienceEnabled:function(){return c("gkx")("23978")},isPreEstablishSessionEnabled:function(){return c("gkx")("23979")},isProgressiveJpegSendEnabled:function(){return c("justknobx")._("2412")},isSenderKeyPredistributionEnabled:function(){return c("gkx")("23981")},isSharedWorkerContext:function(){return(h||(h=d("WorkerUtils"))).isSharedWorkerContext()},isStickerEnabled:function(){return c("justknobx")._("2618")},isStickerReceiverFetchEnabled:function(){return c("gkx")("5177")},sendMsgWithoutJob:function(){return c("gkx")("7854")},isStoryMentionXMAEnabled:function(){return c("qex")._("1711")===!0},isUnsupportedMessagesRedesignEnabled:function(){return c("gkx")("1564")},jpegThumbnailTargetByteSizeKB:function(){return c("justknobx")._("2338")},maxPrekeysToUpload:function(){return 200},maxUsersForNotifyDeviceChange:function(){return d("WADbDeviceRegistration").MAX_USERS_FOR_NOTIFY_DEVICE_CHANGE},mediaDownloadDeduplication:function(){return c("gkx")("33150")},mediaRejectPreviewResolvable:function(){return c("gkx")("6031")},mediaWaitsForComms:function(){return c("gkx")("5639")},oneQueueTimeoutMs:function(){return c("justknobx")._("2583")},orchestratorVersion:function(){return c("getOrchestratorVersion")()},pjpegPreviewAvoidLastScan:function(){return c("justknobx")._("67")},sessionDropIfTooOld:function(){return c("justknobx")._("2240")},shouldCommsWait:function(){return c("gkx")("6068")},shouldDeviceStateTimesout:function(){return c("justknobx")._("2592")},shouldWaitForConnection:function(){return c("gkx")("5594")},skipDownloadablePreviewForProgressiveJpeg:function(){return c("justknobx")._("2371")},uiLayoutTriggeredMediaDownload:function(){return c("gkx")("4137")},useLongSessionDrop:function(){return c("gkx")("1244")},useProtocolMediaKey:function(){return c("gkx")("3718")},useTightenBackoff:function(){return c("gkx")("6110")},useUpdatedSenderKeySession:function(){return c("gkx")("23937")},waDanglingQueue:function(){return c("justknobx")._("1921")},workerScheduler:function(){return c("gkx")("5801")}};b={isRavenMessagesEnabled:function(){return c("qex")._("565")===!0},productTypeForEBAttachments:"msgr",skipPreviewUploadForImages:function(){return c("gkx")("4951")},supportedTypesVersion:function(){return c("MAWGK").armadillo_web_process_futureproof?i+1:i},supportedXMATargetTypes:function(){return d("MAWParseXMAFBConfig").FB_SUPPORTED_TARGET_TYPES}};g.waConfig=a;g.mawConfig=b}),98);
__d("MAWConfig",["MAWMainWebWorkerConfig"],(function(a,b,c,d,e,f,g){"use strict";var h=d("MAWMainWebWorkerConfig").mawConfig;function a(){return h}function b(a){h=a}g.getConfig=a;g.setConfig=b}),98);
__d("MAWDbReceiverFetchTxns",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){return a.receiverFetchInfo.get({receiverFetchId:b})}f.maybeGetReceiverFetchInfoFromReceiverFetchId=a}),66);
__d("WAConsumerApplication.pb",["WACommon.pb","WAProtoConst"],(function(a,b,c,d,e,f,g){var h;a={SMALL:1,MEDIUM:2,LARGE:3};b={SANS_SERIF:0,SERIF:1,NORICAN_REGULAR:2,BRYNDAN_WRITE:3,BEBASNEUE_REGULAR:4,OSWALD_HEAVY:5};c={NONE:0,VIDEO:1};e={};f={};var i={},j={},k={},l={},m={},n={},o={},p={},q={},r={},s={},t={},u={},v={},w={},x={},y={},z={},A={},B={},C={},D={},E={},F={},G={},H={},I={},J={},K={},L={},M={};e.internalSpec={payload:[1,(h=d("WAProtoConst")).TYPES.MESSAGE,f],metadata:[2,h.TYPES.MESSAGE,j]};f.internalSpec={content:[1,h.TYPES.MESSAGE,m],applicationData:[2,h.TYPES.MESSAGE,l],signal:[3,h.TYPES.MESSAGE,k],subProtocol:[4,h.TYPES.MESSAGE,i],__oneofs__:{payload:["content","applicationData","signal","subProtocol"]}};i.internalSpec={futureProof:[1,h.TYPES.ENUM,(d=d("WACommon.pb")).FUTURE_PROOF_BEHAVIOR]};j.internalSpec={specialTextSize:[1,h.TYPES.ENUM,a]};k.internalSpec={};l.internalSpec={revoke:[1,h.TYPES.MESSAGE,v],__oneofs__:{applicationContent:["revoke"]}};m.internalSpec={messageText:[1,h.TYPES.MESSAGE,d.MessageTextSpec],imageMessage:[2,h.TYPES.MESSAGE,I],contactMessage:[3,h.TYPES.MESSAGE,A],locationMessage:[4,h.TYPES.MESSAGE,D],extendedTextMessage:[5,h.TYPES.MESSAGE,C],statusTextMessage:[6,h.TYPES.MESSAGE,B],documentMessage:[7,h.TYPES.MESSAGE,F],audioMessage:[8,h.TYPES.MESSAGE,H],videoMessage:[9,h.TYPES.MESSAGE,G],contactsArrayMessage:[10,h.TYPES.MESSAGE,z],liveLocationMessage:[11,h.TYPES.MESSAGE,y],stickerMessage:[12,h.TYPES.MESSAGE,E],groupInviteMessage:[13,h.TYPES.MESSAGE,x],viewOnceMessage:[14,h.TYPES.MESSAGE,w],reactionMessage:[16,h.TYPES.MESSAGE,u],pollCreationMessage:[17,h.TYPES.MESSAGE,s],pollUpdateMessage:[18,h.TYPES.MESSAGE,r],editMessage:[19,h.TYPES.MESSAGE,n],__oneofs__:{content:["messageText","imageMessage","contactMessage","locationMessage","extendedTextMessage","statusTextMessage","documentMessage","audioMessage","videoMessage","contactsArrayMessage","liveLocationMessage","stickerMessage","groupInviteMessage","viewOnceMessage","reactionMessage","pollCreationMessage","pollUpdateMessage","editMessage"]}};n.internalSpec={key:[1,h.TYPES.MESSAGE,d.MessageKeySpec],message:[2,h.TYPES.MESSAGE,d.MessageTextSpec],timestampMs:[3,h.TYPES.INT64]};o.internalSpec={pollOption:[1,h.FLAGS.REPEATED|h.TYPES.MESSAGE,t]};p.internalSpec={selectedOptions:[1,h.FLAGS.REPEATED|h.TYPES.BYTES],senderTimestampMs:[2,h.TYPES.INT64]};q.internalSpec={encPayload:[1,h.TYPES.BYTES],encIv:[2,h.TYPES.BYTES]};r.internalSpec={pollCreationMessageKey:[1,h.TYPES.MESSAGE,d.MessageKeySpec],vote:[2,h.TYPES.MESSAGE,q],addOption:[3,h.TYPES.MESSAGE,q]};s.internalSpec={encKey:[1,h.TYPES.BYTES],name:[2,h.TYPES.STRING],options:[3,h.FLAGS.REPEATED|h.TYPES.MESSAGE,t],selectableOptionsCount:[4,h.TYPES.UINT32]};t.internalSpec={optionName:[1,h.TYPES.STRING]};u.internalSpec={key:[1,h.TYPES.MESSAGE,d.MessageKeySpec],text:[2,h.TYPES.STRING],groupingKey:[3,h.TYPES.STRING],senderTimestampMs:[4,h.TYPES.INT64],reactionMetadataDataclassData:[5,h.TYPES.STRING],style:[6,h.TYPES.INT32]};v.internalSpec={key:[1,h.TYPES.MESSAGE,d.MessageKeySpec]};w.internalSpec={imageMessage:[1,h.TYPES.MESSAGE,I],videoMessage:[2,h.TYPES.MESSAGE,G],__oneofs__:{viewOnceContent:["imageMessage","videoMessage"]}};x.internalSpec={groupJid:[1,h.TYPES.STRING],inviteCode:[2,h.TYPES.STRING],inviteExpiration:[3,h.TYPES.INT64],groupName:[4,h.TYPES.STRING],jpegThumbnail:[5,h.TYPES.BYTES],caption:[6,h.TYPES.MESSAGE,d.MessageTextSpec]};y.internalSpec={location:[1,h.TYPES.MESSAGE,L],accuracyInMeters:[2,h.TYPES.UINT32],speedInMps:[3,h.TYPES.FLOAT],degreesClockwiseFromMagneticNorth:[4,h.TYPES.UINT32],caption:[5,h.TYPES.MESSAGE,d.MessageTextSpec],sequenceNumber:[6,h.TYPES.INT64],timeOffset:[7,h.TYPES.UINT32]};z.internalSpec={displayName:[1,h.TYPES.STRING],contacts:[2,h.FLAGS.REPEATED|h.TYPES.MESSAGE,A]};A.internalSpec={contact:[1,h.TYPES.MESSAGE,d.SubProtocolSpec]};B.internalSpec={text:[1,h.TYPES.MESSAGE,C],textArgb:[6,h.TYPES.FIXED32],backgroundArgb:[7,h.TYPES.FIXED32],font:[8,h.TYPES.ENUM,b]};C.internalSpec={text:[1,h.TYPES.MESSAGE,d.MessageTextSpec],matchedText:[2,h.TYPES.STRING],canonicalUrl:[3,h.TYPES.STRING],description:[4,h.TYPES.STRING],title:[5,h.TYPES.STRING],thumbnail:[6,h.TYPES.MESSAGE,d.SubProtocolSpec],previewType:[7,h.TYPES.ENUM,c]};D.internalSpec={location:[1,h.TYPES.MESSAGE,L],address:[2,h.TYPES.STRING]};E.internalSpec={sticker:[1,h.TYPES.MESSAGE,d.SubProtocolSpec]};F.internalSpec={document:[1,h.TYPES.MESSAGE,d.SubProtocolSpec],fileName:[2,h.TYPES.STRING]};G.internalSpec={video:[1,h.TYPES.MESSAGE,d.SubProtocolSpec],caption:[2,h.TYPES.MESSAGE,d.MessageTextSpec]};H.internalSpec={audio:[1,h.TYPES.MESSAGE,d.SubProtocolSpec],ptt:[2,h.TYPES.BOOL]};I.internalSpec={image:[1,h.TYPES.MESSAGE,d.SubProtocolSpec],caption:[2,h.TYPES.MESSAGE,d.MessageTextSpec]};J.internalSpec={polygonVertices:[1,h.FLAGS.REPEATED|h.TYPES.MESSAGE,K],location:[2,h.TYPES.MESSAGE,L],__oneofs__:{action:["location"]}};K.internalSpec={x:[1,h.TYPES.DOUBLE],y:[2,h.TYPES.DOUBLE]};L.internalSpec={degreesLatitude:[1,h.TYPES.DOUBLE],degreesLongitude:[2,h.TYPES.DOUBLE],name:[3,h.TYPES.STRING]};M.internalSpec={protocol:[1,h.TYPES.MESSAGE,d.SubProtocolSpec]};g.CONSUMER_APPLICATION_METADATA_SPECIAL_TEXT_SIZE=a;g.CONSUMER_APPLICATION_STATUS_TEXT_MESAGE_FONT_TYPE=b;g.CONSUMER_APPLICATION_EXTENDED_TEXT_MESSAGE_PREVIEW_TYPE=c;g.ConsumerApplicationSpec=e;g.ConsumerApplication$PayloadSpec=f;g.ConsumerApplication$SubProtocolPayloadSpec=i;g.ConsumerApplication$MetadataSpec=j;g.ConsumerApplication$SignalSpec=k;g.ConsumerApplication$ApplicationDataSpec=l;g.ConsumerApplication$ContentSpec=m;g.ConsumerApplication$EditMessageSpec=n;g.ConsumerApplication$PollAddOptionMessageSpec=o;g.ConsumerApplication$PollVoteMessageSpec=p;g.ConsumerApplication$PollEncValueSpec=q;g.ConsumerApplication$PollUpdateMessageSpec=r;g.ConsumerApplication$PollCreationMessageSpec=s;g.ConsumerApplication$OptionSpec=t;g.ConsumerApplication$ReactionMessageSpec=u;g.ConsumerApplication$RevokeMessageSpec=v;g.ConsumerApplication$ViewOnceMessageSpec=w;g.ConsumerApplication$GroupInviteMessageSpec=x;g.ConsumerApplication$LiveLocationMessageSpec=y;g.ConsumerApplication$ContactsArrayMessageSpec=z;g.ConsumerApplication$ContactMessageSpec=A;g.ConsumerApplication$StatusTextMesageSpec=B;g.ConsumerApplication$ExtendedTextMessageSpec=C;g.ConsumerApplication$LocationMessageSpec=D;g.ConsumerApplication$StickerMessageSpec=E;g.ConsumerApplication$DocumentMessageSpec=F;g.ConsumerApplication$VideoMessageSpec=G;g.ConsumerApplication$AudioMessageSpec=H;g.ConsumerApplication$ImageMessageSpec=I;g.ConsumerApplication$InteractiveAnnotationSpec=J;g.ConsumerApplication$PointSpec=K;g.ConsumerApplication$LocationSpec=L;g.ConsumerApplication$MediaPayloadSpec=M}),98);
__d("WAMediaTransport.pb",["WACommon.pb","WAProtoConst"],(function(a,b,c,d,e,f,g){var h;a={NONE:0,LQ_4K:1,HQ_4K:2};b={NONE:0,GIPHY:1,TENOR:2};c={TALKING_A:0,IDLE_A:1,TALKING_B:2,IDLE_B:3,BACKGROUND:4};e={UNKNOWN:0,OPUS:1};f={};var i={},j={},k={},l={},m={},n={},o={},p={},q={},r={},s={},t={},u={},v={},w={},x={},y={},z={},A={},B={},C={},D={},E={},F={};f.internalSpec={integral:[1,(h=d("WAProtoConst")).TYPES.MESSAGE,l],ancillary:[2,h.TYPES.MESSAGE,i]};i.internalSpec={fileLength:[1,h.TYPES.UINT64],mimetype:[2,h.TYPES.STRING],thumbnail:[3,h.TYPES.MESSAGE,j],objectId:[4,h.TYPES.STRING]};j.internalSpec={jpegThumbnail:[1,h.TYPES.BYTES],downloadableThumbnail:[2,h.TYPES.MESSAGE,k],thumbnailWidth:[3,h.TYPES.UINT32],thumbnailHeight:[4,h.TYPES.UINT32]};k.internalSpec={fileSha256:[1,h.TYPES.BYTES],fileEncSha256:[2,h.TYPES.BYTES],directPath:[3,h.TYPES.STRING],mediaKey:[4,h.TYPES.BYTES],mediaKeyTimestamp:[5,h.TYPES.INT64],objectId:[6,h.TYPES.STRING],thumbnailScansSidecar:[7,h.TYPES.BYTES],thumbnailScanLengths:[8,h.FLAGS.REPEATED|h.TYPES.UINT32]};l.internalSpec={fileSha256:[1,h.TYPES.BYTES],mediaKey:[2,h.TYPES.BYTES],fileEncSha256:[3,h.TYPES.BYTES],directPath:[4,h.TYPES.STRING],mediaKeyTimestamp:[5,h.TYPES.INT64]};m.internalSpec={integral:[1,h.TYPES.MESSAGE,o],ancillary:[2,h.TYPES.MESSAGE,n]};n.internalSpec={height:[1,h.TYPES.UINT32],width:[2,h.TYPES.UINT32],scansSidecar:[3,h.TYPES.BYTES],scanLengths:[4,h.FLAGS.REPEATED|h.TYPES.UINT32],midQualityFileSha256:[5,h.TYPES.BYTES],hdType:[6,h.TYPES.ENUM,a],memoriesConceptScores:[7,h.FLAGS.REPEATED|h.FLAGS.PACKED|h.TYPES.FLOAT],memoriesConceptIds:[8,h.FLAGS.REPEATED|h.FLAGS.PACKED|h.TYPES.UINT32]};o.internalSpec={transport:[1,h.TYPES.MESSAGE,f]};p.internalSpec={integral:[1,h.TYPES.MESSAGE,r],ancillary:[2,h.TYPES.MESSAGE,q]};q.internalSpec={seconds:[1,h.TYPES.UINT32],caption:[2,h.TYPES.MESSAGE,d("WACommon.pb").MessageTextSpec],gifPlayback:[3,h.TYPES.BOOL],height:[4,h.TYPES.UINT32],width:[5,h.TYPES.UINT32],sidecar:[6,h.TYPES.BYTES],gifAttribution:[7,h.TYPES.ENUM,b]};r.internalSpec={transport:[1,h.TYPES.MESSAGE,f]};s.internalSpec={integral:[1,h.TYPES.MESSAGE,w],ancillary:[2,h.TYPES.MESSAGE,t]};t.internalSpec={seconds:[1,h.TYPES.UINT32],avatarAudio:[2,h.TYPES.MESSAGE,u]};u.internalSpec={poseId:[1,h.TYPES.UINT32],avatarAnimations:[2,h.FLAGS.REPEATED|h.TYPES.MESSAGE,v]};v.internalSpec={fileSha256:[1,h.TYPES.BYTES],fileEncSha256:[2,h.TYPES.BYTES],directPath:[3,h.TYPES.STRING],mediaKey:[4,h.TYPES.BYTES],mediaKeyTimestamp:[5,h.TYPES.INT64],objectId:[6,h.TYPES.STRING],animationsType:[7,h.TYPES.ENUM,c]};w.internalSpec={transport:[1,h.TYPES.MESSAGE,f],audioFormat:[2,h.TYPES.ENUM,e]};x.internalSpec={integral:[1,h.TYPES.MESSAGE,z],ancillary:[2,h.TYPES.MESSAGE,y]};y.internalSpec={pageCount:[1,h.TYPES.UINT32]};z.internalSpec={transport:[1,h.TYPES.MESSAGE,f]};A.internalSpec={integral:[1,h.TYPES.MESSAGE,C],ancillary:[2,h.TYPES.MESSAGE,B]};B.internalSpec={pageCount:[1,h.TYPES.UINT32],height:[2,h.TYPES.UINT32],width:[3,h.TYPES.UINT32],firstFrameLength:[4,h.TYPES.UINT32],firstFrameSidecar:[5,h.TYPES.BYTES],mustacheText:[6,h.TYPES.STRING],isThirdParty:[7,h.TYPES.BOOL],receiverFetchId:[8,h.TYPES.STRING]};C.internalSpec={transport:[1,h.TYPES.MESSAGE,f],isAnimated:[2,h.TYPES.BOOL],receiverFetchId:[3,h.TYPES.STRING]};D.internalSpec={integral:[1,h.TYPES.MESSAGE,F],ancillary:[2,h.TYPES.MESSAGE,E]};E.internalSpec={displayName:[1,h.TYPES.STRING]};F.internalSpec={vcard:[1,h.TYPES.STRING],downloadableVcard:[2,h.TYPES.MESSAGE,f],__oneofs__:{contact:["vcard","downloadableVcard"]}};g.IMAGE_TRANSPORT_ANCILLARY_HD_TYPE=a;g.VIDEO_TRANSPORT_ANCILLARY_ATTRIBUTION=b;g.AUDIO_TRANSPORT_ANCILLARY_AVATAR_AUDIO_ANIMATIONS_TYPE=c;g.AUDIO_TRANSPORT_INTEGRAL_AUDIO_FORMAT=e;g.WAMediaTransportSpec=f;g.WAMediaTransport$AncillarySpec=i;g.WAMediaTransport$Ancillary$ThumbnailSpec=j;g.WAMediaTransport$Ancillary$Thumbnail$DownloadableThumbnailSpec=k;g.WAMediaTransport$IntegralSpec=l;g.ImageTransportSpec=m;g.ImageTransport$AncillarySpec=n;g.ImageTransport$IntegralSpec=o;g.VideoTransportSpec=p;g.VideoTransport$AncillarySpec=q;g.VideoTransport$IntegralSpec=r;g.AudioTransportSpec=s;g.AudioTransport$AncillarySpec=t;g.AudioTransport$Ancillary$AvatarAudioSpec=u;g.AudioTransport$Ancillary$AvatarAudio$DownloadableAvatarAnimationsSpec=v;g.AudioTransport$IntegralSpec=w;g.DocumentTransportSpec=x;g.DocumentTransport$AncillarySpec=y;g.DocumentTransport$IntegralSpec=z;g.StickerTransportSpec=A;g.StickerTransport$AncillarySpec=B;g.StickerTransport$IntegralSpec=C;g.ContactTransportSpec=D;g.ContactTransport$AncillarySpec=E;g.ContactTransport$IntegralSpec=F}),98);
__d("WAMsgIdToMessageKey",["WAGlobals","WAJids"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=a.author,c=a.externalId;a=a.chat;var e=d("WAJids").isAuthorMe(b),f=d("WAJids").interpretAsGroupJid(a);b=e?d("WAGlobals").getMyUserJid():b;a=a;f=f!=null?b:void 0;return{fromMe:e,id:c,remoteJid:a,participant:f}}g.msgIdToMessageKey=a}),98);
__d("WAAsConsumerApplication",["WAAssertUnreachable","WAConsumerApplication.pb","WAMsgIdToMessageKey","WAMsgType","err"],(function(a,b,c,d,e,f,g){"use strict";b="image/jpeg";e="video/mp4";f="audio/wav";var h="image/gif",i="image/webp";function a(a){switch(a.type){case d("WAMsgType").MSG_TYPE.TEXT:return j(a);case d("WAMsgType").MSG_TYPE.REACTION:return k(a);case d("WAMsgType").MSG_TYPE.REVOKED:return l(a);default:return c("WAAssertUnreachable")(a.type)}}function j(a){var b={payload:{content:{messageText:{mentionedJid:[],text:a.msgContent.content}}}};if(a.specialTextSize!=null){a=a.specialTextSize===1?d("WAConsumerApplication.pb").CONSUMER_APPLICATION_METADATA_SPECIAL_TEXT_SIZE.SMALL:a.specialTextSize===2?d("WAConsumerApplication.pb").CONSUMER_APPLICATION_METADATA_SPECIAL_TEXT_SIZE.MEDIUM:d("WAConsumerApplication.pb").CONSUMER_APPLICATION_METADATA_SPECIAL_TEXT_SIZE.LARGE;b.metadata={specialTextSize:a}}return b}function k(a){if(a.reactToMsgId==null)throw c("err")("cannot send reaction that reacts to no message");var b=d("WAMsgIdToMessageKey").msgIdToMessageKey(a.reactToMsgId);b={groupingKey:a.groupingKey==null?void 0:a.groupingKey,key:b,senderTimestampMs:a.ts,text:a.reaction==null?void 0:a.reaction};return{payload:{content:{reactionMessage:b}}}}function l(a){a={remoteJid:a.id.chat,fromMe:!0,id:a.revokedExternalId};return{payload:{applicationData:{revoke:{key:a}}}}}g.IMAGE_MIME_TYPE=b;g.VIDEO_MIME_TYPE=e;g.AUDIO_MIME_TYPE=f;g.GIF_MIME_TYPE=h;g.STICKER_MIME_TYPE=i;g.asConsumerApplication=a;g.encodeTextMessage=j;g.encodeReactionMessage=k}),98);
__d("WAFrankingTypes",[],(function(a,b,c,d,e,f){"use strict";function a(a){return a}function b(a){return a}f.castToFrankingTag=a;f.castToFrankingKey=b}),66);
__d("WAFranking",["$InternalEnum","WACryptoDependencies","WACryptoHmac","WACryptoUtils","WAFrankingTypes","WAGlobals","WAPREList","WAPREMetrics","regeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h=32,i=0,j=b("$InternalEnum").Mirrored(["KEEP","DROP"]);function a(){var a=new Uint8Array(h);d("WACryptoDependencies").getCrypto().getRandomValues(a);return d("WAFrankingTypes").castToFrankingKey(a)}function c(a){return(a=a)!=null?a:i}function e(a,b){return d("WACryptoHmac").hmacSha256(a,b).then(function(a){return d("WAFrankingTypes").castToFrankingTag(new Uint8Array(a))})}function k(a,c,e,f){var g;return b("regeneratorRuntime").async(function(h){while(1)switch(h.prev=h.next){case 0:h.t0=f;h.next=h.t0===void 0?3:h.t0===0?3:7;break;case 3:h.next=5;return b("regeneratorRuntime").awrap(d("WACryptoHmac").hmacSha256(c,a));case 5:g=h.sent;return h.abrupt("return",d("WACryptoUtils").uint8ArraysEqual(new Uint8Array(g),e));case 7:return h.abrupt("return",!0);case 8:case"end":return h.stop()}},null,this)}function f(a,c){var e,f,g,h,i,l,m,n;return b("regeneratorRuntime").async(function(o){while(1)switch(o.prev=o.next){case 0:if(!(!d("WAGlobals").getConfig().isFrankingEnabled()||a.version==="v3"&&a.type==="instamadillo")){o.next=2;break}return o.abrupt("return",{decision:j.KEEP,updatedReportingMeta:c});case 2:g=d("WAGlobals").getConfig().isFrankingDropOnInvalid();if(!((c==null?void 0:c.frankingTag)!=null&&((e=a.metadata)==null?void 0:e.frankingKey)==null)){o.next=7;break}c.frankingTag=null;c.reportingTag=null;return o.abrupt("return",{decision:j.KEEP,updatedReportingMeta:c});case 7:if(!((c==null?void 0:c.frankingTag)!=null&&a.version==="v3"&&a.type==="subprotocol"&&((f=a.metadata)==null?void 0:f.frankingKey)!=null&&a.frankingContent!=null)){o.next=24;break}h=c.frankingTag;i=a.frankingContent,l=a.metadata.frankingVersion;m=d("WAFrankingTypes").castToFrankingKey(new Uint8Array(a.metadata.frankingKey));n=d("WAPREMetrics").startMetric(d("WAPREList").PRE_METRIC.FRANKING_VALIDATION);if(!(m==null)){o.next=15;break}n.endFail("tagButNoKey");return o.abrupt("return",g?{decision:j.DROP,updatedReportingMeta:c}:{decision:j.KEEP,updatedReportingMeta:c});case 15:o.next=17;return b("regeneratorRuntime").awrap(k(new Uint8Array(i),m,h,l));case 17:if(o.sent){o.next=20;break}n.endFail("tagMismatch");return o.abrupt("return",g?{decision:j.DROP,updatedReportingMeta:c}:{decision:j.KEEP,updatedReportingMeta:c});case 20:c.frankingKey=m;c.reportingContent=i;n.endSuccess();return o.abrupt("return",{decision:j.KEEP,updatedReportingMeta:c});case 24:return o.abrupt("return",d("WAGlobals").getConfig().isFrankingDropOnMissing()?{decision:j.DROP,updatedReportingMeta:c}:{decision:j.KEEP,updatedReportingMeta:c});case 25:case"end":return o.stop()}},null,this)}g.FrankingDecision=j;g.createFrankingKey=a;g.getFrankingVersion=c;g.genFrankingTag=e;g.validateFrankingTag=k;g.handleAndValidateFrankingFromIncomingMsg=f}),98);
__d("WAMsgApplication.pb",["WACommon.pb","WAProtoConst"],(function(a,b,c,d,e,f,g){var h;a={DEFAULT:0,VANISH_MODE:1,DISAPPEARING_MESSAGES:2};b={};c={};e={};f={};var i={},j={},k={},l={},m={},n={};b.internalSpec={payload:[1,(h=d("WAProtoConst")).TYPES.MESSAGE,i],metadata:[2,h.TYPES.MESSAGE,c]};c.internalSpec={chatEphemeralSetting:[1,h.TYPES.MESSAGE,n],ephemeralSettingList:[2,h.TYPES.MESSAGE,f],ephemeralSharedSecret:[3,h.TYPES.BYTES],forwardingScore:[5,h.TYPES.UINT32],isForwarded:[6,h.TYPES.BOOL],businessMetadata:[7,h.TYPES.MESSAGE,(d=d("WACommon.pb")).SubProtocolSpec],frankingKey:[8,h.TYPES.BYTES],frankingVersion:[9,h.TYPES.INT32],quotedMessage:[10,h.TYPES.MESSAGE,e],threadType:[11,h.TYPES.ENUM,a],readonlyMetadataDataclass:[12,h.TYPES.STRING],groupId:[13,h.TYPES.STRING],groupSize:[14,h.TYPES.UINT32],groupIndex:[15,h.TYPES.UINT32],botResponseId:[16,h.TYPES.STRING],collapsibleId:[17,h.TYPES.STRING],secondaryOtid:[18,h.TYPES.STRING],__oneofs__:{ephemeral:["chatEphemeralSetting","ephemeralSettingList","ephemeralSharedSecret"]}};e.internalSpec={stanzaId:[1,h.TYPES.STRING],remoteJid:[2,h.TYPES.STRING],participant:[3,h.TYPES.STRING],payload:[4,h.TYPES.MESSAGE,i]};f.internalSpec={chatJid:[1,h.TYPES.STRING],ephemeralSetting:[2,h.TYPES.MESSAGE,n]};i.internalSpec={coreContent:[1,h.TYPES.MESSAGE,m],signal:[2,h.TYPES.MESSAGE,l],applicationData:[3,h.TYPES.MESSAGE,k],subProtocol:[4,h.TYPES.MESSAGE,j],__oneofs__:{content:["coreContent","signal","applicationData","subProtocol"]}};j.internalSpec={futureProof:[1,h.TYPES.ENUM,d.FUTURE_PROOF_BEHAVIOR],consumerMessage:[2,h.TYPES.MESSAGE,d.SubProtocolSpec],businessMessage:[3,h.TYPES.MESSAGE,d.SubProtocolSpec],paymentMessage:[4,h.TYPES.MESSAGE,d.SubProtocolSpec],multiDevice:[5,h.TYPES.MESSAGE,d.SubProtocolSpec],voip:[6,h.TYPES.MESSAGE,d.SubProtocolSpec],armadillo:[7,h.TYPES.MESSAGE,d.SubProtocolSpec],__oneofs__:{subProtocol:["consumerMessage","businessMessage","paymentMessage","multiDevice","voip","armadillo"]}};k.internalSpec={};l.internalSpec={};m.internalSpec={};n.internalSpec={ephemeralExpiration:[2,h.TYPES.UINT32],ephemeralSettingTimestamp:[3,h.TYPES.INT64],isEphemeralSettingReset:[4,h.TYPES.BOOL]};g.MESSAGE_APPLICATION_METADATA_THREAD_TYPE=a;g.MessageApplicationSpec=b;g.MessageApplication$MetadataSpec=c;g.MessageApplication$Metadata$QuotedMessageSpec=e;g.MessageApplication$Metadata$EphemeralSettingMapSpec=f;g.MessageApplication$PayloadSpec=i;g.MessageApplication$SubProtocolPayloadSpec=j;g.MessageApplication$ApplicationDataSpec=k;g.MessageApplication$SignalSpec=l;g.MessageApplication$ContentSpec=m;g.MessageApplication$EphemeralSettingSpec=n}),98);
__d("WAAsMessageApplication",["WAAsConsumerApplication","WAConsumerApplication.pb","WAFranking","WAMsgApplication.pb","encodeProtobuf"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b;switch(a.type){default:b=d("WAAsConsumerApplication").asConsumerApplication(a)}var c=a.forwardingScore!=null?a.forwardingScore:0;a=a.isForwarded!=null?a.isForwarded:!1;c={metadata:{chatEphemeralSetting:null,forwardingScore:c,frankingKey:d("WAFranking").createFrankingKey(),frankingVersion:d("WAFranking").getFrankingVersion(),isForwarded:a,quotedMessage:null}};if(b!=null){a=d("encodeProtobuf").encodeProtobuf(d("WAConsumerApplication.pb").ConsumerApplicationSpec,b);c.payload={subProtocol:{consumerMessage:{payload:a.readBuffer(),version:1}}}}return d("encodeProtobuf").encodeProtobuf(d("WAMsgApplication.pb").MessageApplicationSpec,c).readByteArray()}function b(a){return a}g.asMessageApplication=a;g.castToMessageApplicationBytes=b}),98);
__d("MAWParseSubprotocolVersionConsts",[],(function(a,b,c,d,e,f){"use strict";a=2;b=2;c=1;d=2;e=1;var g=1;f.ASSOCIATED_MESSAGE_SUBPROTOCOL_VERSION=a;f.XMA_PREVIEW_SUBPROTOCOL_VERSION=b;f.XMA_FAVICON_SUBPROTOCOL_VERSION=c;f.XMA_HEADER_SUBPROTOCOL_VERSION=d;f.RAVEN_IMAGE_MESSAGE_SUBPROTOCOL_VERSION=e;f.RAVEN_VIDEO_MESSAGE_SUBPROTOCOL_VERSION=g}),66);
__d("WALoggerTag",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";a=b("$InternalEnum").Mirrored(["CryptoManager","MediaPreview","PrekeyGenerateAndUpload","SignedPrekey","SignedPrekeyRotation","OneTimePrekey"]);c=a;f["default"]=c}),66);
__d("WAJobRequirement",["Promise","WALogger"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["JobRequirement[","] blocker errored ",""]);i=function(){return a};return a}c=function(){function a(a){var c=this;this.$1=(h||(h=b("Promise"))).resolve();this.$2=!0;this.$3=null;this.$4=function(){var a=c.$3;if(a!=null){c.$3=null;return(h||(h=b("Promise"))).all(a).then(c.$4)}c.$2=!0};this.name=a}var c=a.prototype;c.addBlocker=function(a){var c=this;a=a["catch"](function(a){d("WALogger").ERROR(i(),c.name,a).sendLogs("job-blocker-rejected")});if(this.$2)this.$2=!1,this.$1=(h||(h=b("Promise"))).all([this.$1,a]).then(this.$4);else{var e=this.$3;e!=null?e.push(a):this.$3=[a]}};c.waitUntilSatisfied=function(){return this.$1};c.isSatisfied=function(){return this.$2};c.isSatisfiable=function(){return!0};return a}();e=function(a){babelHelpers.inheritsLoose(c,a);function c(c){c=a.call(this,c)||this;a.prototype.addBlocker.call(babelHelpers.assertThisInitialized(c),new(h||(h=b("Promise")))(function(){}));return c}var d=c.prototype;d.addBlocker=function(){};d.isSatisfiable=function(){return!1};return c}(c);function a(a,c){var d=a.filter(function(a){return!a.isSatisfiable()});if(d.length>0){var e=d.map(function(a){return a.name});return function(a){c==null?void 0:c("unsatisfiable",e,a);return d[0].waitUntilSatisfied()}}var f=a.map(function(){return(h||(h=b("Promise"))).resolve()}),g=(h||(h=b("Promise"))).resolve(),i=null,j=function c(){if(f.every(function(b,c){return b===a[c].waitUntilSatisfied()})){i=null;return}var d=[],e=a.map(function(a){var b=a.waitUntilSatisfied();a.isSatisfied()||(d.push(a.name),b.then(function(){var b=d.indexOf(a.name);d.splice(b,1)}));return b});f=e;i=d;return(h||(h=b("Promise"))).all(e).then(c)};return function(a){if(i==null){var b=j();b!=null&&(g=g.then(function(){return b}))}c==null?void 0:c(i==null?"satisfied":"unsatisfied",i,a);return g}}g.JobRequirement=c;g.UnsatisfiableJobRequirement=e;g.joinRequirements=a}),98);
__d("WAPromiseBackoffs",["Promise","err"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b){if(a===0)return 0;var c=o(b.algo);for(var d=1;d<a;d++)c();return j(b,c())}function i(a){var b=a.relativeDelay,c=b===void 0?!1:b,d=null,e=o(a.algo);return function(){var b=d;if(b==null){d=c?Date.now():0;return 0}var f=j(a,e());if(c){var g=Date.now();b=g-b;b>0&&(f=Math.max(0,f-b));d=g}return f}}function d(a){var c=i(a);return function(a){return new(h||(h=b("Promise")))(function(b){var d=c();d>0?setTimeout(b,d,a):b(a)})}}function j(a,b){var c=a.max,d=a.min;a=a.jitter;a=a===void 0?.1:a;b=b;c!=null&&b>c&&(b=c);d!=null&&b<d&&(b=d);a!==0&&(b=Math.ceil(b*(1+a*Math.random())));return b}function k(a){var b=a.second-a.first,c=a.first-b;return function(){var a=b+c;c=b;b=a;return a}}function l(a){var b=a.base,c=b===void 0?2:b,d=a.first;return function(){var a=d;d*=c;return a}}function m(a){var b=a.delay;return function(){return b}}function n(a){var b=a.toMs;a=a.backoff;var c=o(a);return function(){return b(c())}}function o(a){switch(a.type){case"fibonacci":return k(a);case"exponential":return l(a);case"constant":return m(a);case"adjust":return n(a);default:a;throw c("err")("makeTimeFunc unrecognized backoff "+a.type)}}g.getDelay=a;g.createTimer=i;g.createPromiseTimer=d}),98);
__d("WAPersistedJobManager",["Promise","WAJobRequirement","WALogger","WAPromiseBackoffs","WATimeUtils","regeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose([""," waiting on ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose([""," halting because of ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["waitUntilCompletedNonPersisted not implemented in PersistedJobManager"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["fireAndForgetNonPersisted not implemented in PersistedJobManager"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose([""," has been loaded and is marked as deprecated"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["addPersistedJobImplementation called twice for ",""]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["onJobStarted for "," threw exception ",""]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose(["",": "," step not found"]);p=function(){return a};return a}function q(){var a=babelHelpers.taggedTemplateLiteralLoose([""," failed with error ",""]);q=function(){return a};return a}function r(){var a=babelHelpers.taggedTemplateLiteralLoose(["onJobFinished for "," threw exception ",""]);r=function(){return a};return a}function s(){var a=babelHelpers.taggedTemplateLiteralLoose(["",": finished job"]);s=function(){return a};return a}function t(){var a=babelHelpers.taggedTemplateLiteralLoose(["",": Unhandled exception: ",""]);t=function(){return a};return a}function u(){var a=babelHelpers.taggedTemplateLiteralLoose(["",": Unhandled exception. Tried "," times"]);u=function(){return a};return a}function v(){var a=babelHelpers.taggedTemplateLiteralLoose(["",": RetryOnBackoff"]);v=function(){return a};return a}function w(){var a=babelHelpers.taggedTemplateLiteralLoose(["",": requires page"]);w=function(){return a};return a}function x(){var a=babelHelpers.taggedTemplateLiteralLoose(["",": delaying until ",""]);x=function(){return a};return a}function y(){var a=babelHelpers.taggedTemplateLiteralLoose(["",": trim wait from "," to ",""]);y=function(){return a};return a}function z(){var a=babelHelpers.taggedTemplateLiteralLoose(["No implementation for ",".",""]);z=function(){return a};return a}function A(){var a=babelHelpers.taggedTemplateLiteralLoose(["",": removing completed, expired job from db"]);A=function(){return a};return a}function B(){var a=babelHelpers.taggedTemplateLiteralLoose(["",": skew detected, adjusting accordingly"]);B=function(){return a};return a}function C(){var a=babelHelpers.taggedTemplateLiteralLoose(["Running deprecated job ",""]);C=function(){return a};return a}function D(){var a=babelHelpers.taggedTemplateLiteralLoose(["No implementation for deprecated ",", job deleted"]);D=function(){return a};return a}function E(){var a=babelHelpers.taggedTemplateLiteralLoose(["No implementation for ",". Maybe it should have been put to the deprecated list?"]);E=function(){return a};return a}function F(){var a=babelHelpers.taggedTemplateLiteralLoose(["",": InterruptJob"]);F=function(){return a};return a}function G(){var a=babelHelpers.taggedTemplateLiteralLoose(["",": running step"]);G=function(){return a};return a}function H(){var a=babelHelpers.taggedTemplateLiteralLoose(["Persisted job missing for given ID"]);H=function(){return a};return a}function I(){var a=babelHelpers.taggedTemplateLiteralLoose(["No entry for job ",""]);I=function(){return a};return a}function J(){var a=babelHelpers.taggedTemplateLiteralLoose(["",": restarting"]);J=function(){return a};return a}function K(){var a=babelHelpers.taggedTemplateLiteralLoose(["",": stuck on the step ",", aborting the job"]);K=function(){return a};return a}var L=1,M=function(){function a(a){this.feature=a}var b=a.prototype;b.toString=function(){return"RequiresPage: "+this.feature};return a}(),N=function(){function a(a){this.backoffOptions=a}var b=a.prototype;b.toString=function(){return"RetryOnBackoff"};return a}();a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}return b}(babelHelpers.wrapNativeSuper(Error));var O=function(a){this.result=a},P="$unstarted",Q="$finished";c=function(){function a(a){var c=this,e=a.isRestartAfterCrash,f=a.accessors,g=a.unfinishedJobEntries,i=new Map();g=g.then(function(a){var g=[],j=[];a.forEach(function(a){a.stepHardStartCountAfterTimeout>=5?g.push(a):j.push(a)});return(h||(h=b("Promise"))).all(g.map(function(a){d("WALogger").ERROR(K(),S(a),a.step).devConsole(R(a)).sendLogs("job-stuck-"+a.type);return f.deletePersistedJob(a.jobId)})).then(function(){j.forEach(function(a){if(i.has(a.jobId))return;d("WALogger").LOG(J(),R(a));i.set(a.jobId,c.$1(a,e))})})});this.implementationLoaders=new Map();this.implementations=new Map();this.stepBlockers=new WeakMap();this.accessors=f;this.activeJobs=i;this.initialJobsPromise=g;this.listeners=a.listeners;this.deprecatedJobs=a.deprecatedJobs}var c=a.prototype;c.loadAndRunJobFromId=function(a){var b=this.activeJobs.get(a);if(b!=null)return b;b=this.$2(a);this.activeJobs.set(a,b);return b};c.$2=function(a){var c,e,f;return b("regeneratorRuntime").async(function(g){while(1)switch(g.prev=g.next){case 0:c=this.initialJobsPromise,e=this.accessors;g.next=3;return b("regeneratorRuntime").awrap(c);case 3:g.next=5;return b("regeneratorRuntime").awrap(e.readPersistedJob(a));case 5:f=g.sent;if(f){g.next=10;break}d("WALogger").DEV(I(),a);d("WALogger").WARN(H());return g.abrupt("return",null);case 10:return g.abrupt("return",this.$1(f,!1));case 11:case"end":return g.stop()}},null,this)};c.$3=function(a){var b=this.implementations,c=this.implementationLoaders,d=b.get(a);if(d)return d;d=c.get(a);if(!d)return null;c=d();b.set(a,c);return c};c.$4=function(a,c){if(c==null||c.length===0)return(h||(h=b("Promise"))).resolve();var e=this.stepBlockers,f=e.get(c);f==null&&(f=d("WAJobRequirement").joinRequirements(c.map(function(a){return a()}),U),e.set(c,f));return f(a)};c.$5=function(a,b,c,e){var f=this;c===void 0&&(c=!1);var g=a.step,h=b.findIndex(function(a){return a.stepName===g}),i=b[h].info(a.current,a.original,V(a,c)),j=i.requirements,k=i.code;i=this.$4(a,j);e&&(i=i.then(e));return i.then(function(){d("WALogger").LOG(G(),T(a));return k(a.current,a.original,V(a,c))}).then(function(e){if(e instanceof O){d("WALogger").LOG(F(),T(a));return e.result}var g=h+1;if(g>=b.length)return e;g=b[g];a.step=g.stepName;a.current=e;a.stepHardStartCountAfterTimeout=0;a.stepFirstStartTime=d("WATimeUtils").unixTime();a.stepUnexpectedErrorCount=0;a.waitUntil=null;a.backedOffCount=0;return f.accessors.updatePersistedJob(a).then(function(){return f.$5(a,b,c)})})};c.$1=function(a,c){var e,f=this,g,i,j,k,l,m,n,F,G,H,I,J,K,O,S,U;return b("regeneratorRuntime").async(function(W){while(1)switch(W.prev=W.next){case 0:g=this.accessors,i=this.activeJobs,j=this.deprecatedJobs,k=this.listeners,l=k.onJobFinished,m=k.onJobStarted;W.next=3;return b("regeneratorRuntime").awrap(this.$3(a.type));case 3:n=W.sent;F=j[a.type];if(n){W.next=21;break}if(F){W.next=13;break}d("WALogger").ERROR(E(),a.type).sendLogs("missing-job-implementation");W.next=10;return b("regeneratorRuntime").awrap(g.deletePersistedJob(a.jobId));case 10:return W.abrupt("return",null);case 13:if(!(F==="NOOP")){W.next=18;break}d("WALogger").WARN(D(),a.type);W.next=17;return b("regeneratorRuntime").awrap(g.deletePersistedJob(a.jobId));case 17:return W.abrupt("return",null);case 18:W.next=20;return b("regeneratorRuntime").awrap(F());case 20:n=W.sent;case 21:G=n;F&&d("WALogger").LOG(C(),a.type);H=(e=a.stepFirstStartTime)!=null?e:d("WATimeUtils").unixTime();a.stepFirstStartTime=H;a.stepUnexpectedErrorCount=a.stepUnexpectedErrorCount||0;a.backedOffCount=a.backedOffCount||0;if(!(a.step===Q)){W.next=44;break}I=a.waitUntil;J=d("WATimeUtils").secondsUntil(H);if(!(I!=null&&d("WATimeUtils").isInFuture(I)&&J>0)){W.next=38;break}d("WALogger").LOG(B(),R(a));I=d("WATimeUtils").castToUnixTime(I-J);if(!d("WATimeUtils").isInFuture(I)){W.next=38;break}a.stepFirstStartTime=d("WATimeUtils").castToUnixTime(H-J);a.waitUntil=I;W.next=38;return b("regeneratorRuntime").awrap(this.accessors.updatePersistedJob(a));case 38:if(!(I==null||!d("WATimeUtils").isInFuture(I))){W.next=42;break}d("WALogger").LOG(A(),R(a));W.next=42;return b("regeneratorRuntime").awrap(g.deletePersistedJob(a.jobId));case 42:i["delete"](a.jobId);return W.abrupt("return",a.current);case 44:K=a.step!==P?n.find(function(b){return b.stepName===a.step}):n[0];if(K){W.next=50;break}d("WALogger").ERROR(z(),a.type,a.step).sendLogs("missing-job-step");W.next=49;return b("regeneratorRuntime").awrap(g.deletePersistedJob(a.jobId));case 49:return W.abrupt("return",null);case 50:a.step=K.stepName;O=function e(){var g=a.waitUntil,i=(h||(h=b("Promise"))).resolve();if(g!=null){var j=d("WATimeUtils").futureUnixTime(d("WATimeUtils").DAY_SECONDS);g>j?(d("WALogger").LOG(y(),T(a),g,j),a.waitUntil=j,i=f.accessors.updatePersistedJob(a).then(function(){return d("WATimeUtils").delayUntil(j)})):(d("WALogger").LOG(x(),T(a),g),i=d("WATimeUtils").delayUntil(g))}return i.then(function(){var g=function(){a.waitUntil=null;d("WATimeUtils").happenedWithin(H,d("WATimeUtils").DAY_SECONDS)||a.stepHardStartCountAfterTimeout++;return f.accessors.updatePersistedJob(a)};return f.$5(a,G,c,g)["catch"](function(c){if(c instanceof M){d("WALogger").LOG(w(),T(a));a.stepHardStartCountAfterTimeout>0&&(--a.stepHardStartCountAfterTimeout,f.accessors.updatePersistedJob(a));return new(h||(h=b("Promise")))(function(){})}else if(c instanceof N){d("WALogger").LOG(v(),T(a));var g=d("WAPromiseBackoffs").getDelay(++a.backedOffCount,c.backoffOptions);a.waitUntil=d("WATimeUtils").futureUnixTime(Math.ceil(g/1e3));a.stepHardStartCountAfterTimeout>0&&--a.stepHardStartCountAfterTimeout;return f.accessors.updatePersistedJob(a).then(e)}else if(a.stepUnexpectedErrorCount<L){d("WALogger").WARN(u(),T(a),a.stepUnexpectedErrorCount);d("WALogger").WARN(t(),T(a),c);a.stepUnexpectedErrorCount++;return f.accessors.updatePersistedJob(a).then(e)}throw c})})};S=O();U=S.then(function(c){var e;return b("regeneratorRuntime").async(function(h){while(1)switch(h.prev=h.next){case 0:d("WALogger").LOG(s(),T(a));e=null;try{e=l(a.jobId,a.type,a.original,c)}catch(b){d("WALogger").ERROR(r(),a.type,b).sendLogs("onJobFinished-threw")}if(!(e!=null&&e>0)){h.next=12;break}a.waitUntil=d("WATimeUtils").futureUnixTime(Math.ceil(e/1e3));a.step=Q;a.current=c;a.stepFirstStartTime=d("WATimeUtils").unixTime();h.next=10;return b("regeneratorRuntime").awrap(f.accessors.updatePersistedJob(a));case 10:h.next=15;break;case 12:h.next=14;return b("regeneratorRuntime").awrap(g.deletePersistedJob(a.jobId));case 14:i["delete"](a.jobId);case 15:case"end":return h.stop()}},null,this)},function(e){var f,h;return b("regeneratorRuntime").async(function(j){while(1)switch(j.prev=j.next){case 0:d("WALogger").ERROR(q(),a.type,e).sendLogs("job-threw-exception-"+a.type);f=G.find(function(b){return b.stepName===a.step});if(f){j.next=6;break}d("WALogger").ERROR(p(),a.type,a.step);j.next=10;break;case 6:h=f.info(a.current,a.original,V(a,c));if(!(h.stopRetryIf!=null)){j.next=10;break}j.next=10;return b("regeneratorRuntime").awrap(h.stopRetryIf.onStopRetry(a.current,a.original,V(a,c)));case 10:j.next=12;return b("regeneratorRuntime").awrap(g.deletePersistedJob(a.jobId));case 12:i["delete"](a.jobId);case 13:case"end":return j.stop()}},null,this)});try{m(a.jobId,a.type,a.original)}catch(b){d("WALogger").ERROR(o(),a.type,b).sendLogs("onJobStarted-threw")}return W.abrupt("return",U.then(function(){return S}));case 56:case"end":return W.stop()}},null,this)};c.addPersistedJobImplementation=function(a,b){var c=this.implementationLoaders,e=this.deprecatedJobs;if(c.has(a)){d("WALogger").ERROR(n(),a).sendLogs("repeat-job-loader");return}e&&e[a]&&d("WALogger").DEV(m(),a);c.set(a,b)};c.fireAndForget=function(a){var b=this;this.accessors.maybeCreateJob(a).then(function(a){a=a.id;return b.loadAndRunJobFromId(a)})};c.waitUntilPersisted=function(a){var b=this;return this.accessors.maybeCreateJob(a).then(function(a){a=a.id;b.loadAndRunJobFromId(a)})};c.waitUntilCompleted=function(a){var b=this;return this.accessors.maybeCreateJob(a).then(function(a){a=a.id;return b.loadAndRunJobFromId(a)})};c.fireAndForgetNonPersisted=function(a){d("WALogger").LOG(l())};c.waitUntilCompletedNonPersisted=function(a){return(h||(h=b("Promise"))).resolve(function(){return d("WALogger").LOG(k())})};return a}();function R(a){return"Job["+a.jobId+"] ("+a.type+")"}function S(a){return"[Job "+a.type+"] "}function T(a){return"Job["+a.jobId+"] ("+a.type+"."+a.step+")"}function U(a,b,c){a==="unsatisfiable"?d("WALogger").LOG(j(),T(c),b):a==="unsatisfied"?d("WALogger").LOG(i(),T(c),b):a}function V(a,b){b===void 0&&(b=!1);return{jobStartTime:a.startTime,afterCrash:b,interruptJob:W}}function W(a){return new O(a)}g.RequiresPage=M;g.RetryOnBackoff=N;g.NonRetryableError=a;g.InterruptJob=O;g.UNSTARTED_JOB=P;g.FINISHED_JOB=Q;g.PersistedJobManager=c}),98);
__d("WAWaitForComms",["WAResolvable"],(function(a,b,c,d,e,f,g){"use strict";var h=new(d("WAResolvable").Resolvable)();function a(){return h.promise}function b(){h.isSettled&&(h=new(d("WAResolvable").Resolvable)())}function c(){h.resolve()}function e(){return!h.resolveWasCalled()}function f(a){return h.reject(a)}g.waitForComms=a;g.commsConnectionLost=b;g.unblockComms=c;g.isStillWaitingForComms=e;g.failComms=f}),98);
__d("WAWaitForUserUnblocked",["WAResolvable","WorkerScheduler"],(function(a,b,c,d,e,f,g){"use strict";f=2*60*1e3;var h=new(d("WAResolvable").Resolvable)(),i=d("WorkerScheduler").makeScheduler("offline-queue",{concurrency:1,maxConcurrency:1,timeToStuckMs:f});function a(){h.resolveWasCalled()&&(h=new(d("WAResolvable").Resolvable)(),j())}function j(){void i.runTask({name:"offline-queue",fn:function(){return h.promise},priority:d("WorkerScheduler").BLOCKING_PRIORITY})}function b(){return h.promise}function c(){h.resolve()}function e(){return!h.resolveWasCalled()}g.maybeResetWaitForUserUnblocked=a;g.markOfflineQueueAsStarted=j;g.waitForUserUnblocked=b;g.unblockUser=c;g.isStillWaitingForUserUnblocked=e}),98);
__d("MAWSupportedDocumentTypes",[],(function(a,b,c,d,e,f){"use strict";var g=["apk","pyc","7z","z","gz","xz","rar","zip","zipx","ace","arc","zpaq","quad","balz","cab","arj","lzh","uue","bz","bz2","bzip2","jar","iso","tar","ade","adp","air","app","application","bas","bat","chm","cmd","com","command","cpl","crt","dll","dmg","dpkg","exe","hlp","hta","inf","ins","isp","jnlp","js","jse","lib","lnk","lua","mde","msc","msi","msp","mst","ocx","pcd","pif","pkg","ps1","reg","scr","sct","sh","shb","shs","sys","term","url","vb","vbe","vbs","vxd","webarchive","wsc","wsf","wsh","xbap"];function a(a){if(a==null)return!1;a=a.includes(".")?a.split(".").pop():null;return a!=null&&!g.includes(a)}f.isAllowedType=a}),66);
__d("WASortedLists",[],(function(a,b,c,d,e,f){"use strict";function a(){return[]}function b(){return[]}function c(a,b){return a.filter(b)}function d(a,b){return l(a.map(b))}function e(a,b){var c=a.length===b.length;for(var d=0;c&&d<a.length;d++)a[d]!==b[d]&&(c=!1);return c}function g(a,b){for(var c=0;c<a.length;c++)if(a[c]===b)return a;return a.concat([b]).sort()}function h(a,b){if(a.length<b.length)return!1;var c=!0;for(var d=0,e=0;c&&e<b.length;e++)do c=a[d]===b[e];while(!c&&++d<a.length);return c}function i(a,b){var c=[];for(var d=0,e=0;d<a.length;d++){var f=a[d];while(e<b.length&&f>b[e])e++;(e===b.length||f<b[e])&&c.push(f)}return c}function j(a,b){var c=[],d=0,e=0;while(d<a.length&&e<b.length){var f=a[d],g=b[e];f<g?d++:f===g?(c.push(f),d++,e++):e++}return c}function k(a,b){var c=[],d=0,e=0;while(d<a.length&&e<b.length)a[d]<b[e]?c.push(a[d++]):a[d]===b[e]?(c.push(a[d++]),e++):c.push(b[e++]);while(d<a.length)c.push(a[d++]);while(e<b.length)c.push(b[e++]);return c}function l(a){return m(a.slice().sort())}function m(a){var b=!1;for(var c=0;c<a.length-1;c++)a[c]===a[c+1]&&(b=!0);if(!b)return a;c=[];for(b=0;b<a.length-1;b++)a[b]!==a[b+1]&&c.push(a[b]);c.push(a[a.length-1]);return c}function n(a){return Array.from(a).sort()}function o(a){return a.slice().sort()}function p(a,b,c){var d=null;for(var e=0;!d&&e<a.length;e++)a[e]===b&&(d=a.slice(),d[e]=c,d=m(d.sort()));return d||a}function q(a){return[a]}function r(a){return a.length<1}function s(a,b,c){return a.slice(b,c)}f.emptySet=a;f.emptyList=b;f.filter=c;f.map=d;f.areEqual=e;f.addToSet=g;f.contains=h;f.subtract=i;f.intersect=j;f.joinUniq=k;f.sortAndDedupe=l;f.asSortedSet=n;f.sort=o;f.swapIn=p;f.singleElement=q;f.isEmpty=r;f.slice=s}),66);
__d("WAGetAgeBucketForMediaKeyTimestamp",["WATimeUtils"],(function(a,b,c,d,e,f,g){"use strict";function a(a){if(a==null)return"Missing";if(d("WATimeUtils").isInFuture(a))switch(!0){case d("WATimeUtils").happenedWithin(a,1*d("WATimeUtils").DAY_SECONDS):return"< 1 day in future";case d("WATimeUtils").happenedWithin(a,7*d("WATimeUtils").DAY_SECONDS):return"1-7 days in future";default:return"> 7 days in future"}switch(!0){case d("WATimeUtils").happenedWithin(a,1*d("WATimeUtils").DAY_SECONDS):return"< 1 day";case d("WATimeUtils").happenedWithin(a,7*d("WATimeUtils").DAY_SECONDS):return"1-7 days";case d("WATimeUtils").happenedWithin(a,14*d("WATimeUtils").DAY_SECONDS):return"7-14 days";case d("WATimeUtils").happenedWithin(a,21*d("WATimeUtils").DAY_SECONDS):return"14-21 days";case d("WATimeUtils").happenedWithin(a,30*d("WATimeUtils").DAY_SECONDS):return"21-30 days";case d("WATimeUtils").happenedWithin(a,40*d("WATimeUtils").DAY_SECONDS):return"30-40 days";case d("WATimeUtils").happenedWithin(a,50*d("WATimeUtils").DAY_SECONDS):return"40-50 days";case d("WATimeUtils").happenedWithin(a,60*d("WATimeUtils").DAY_SECONDS):return"50-60 days";default:return"> 60 days"}}g.getAgeBucketForMediaKeyTimestamp=a}),98);
__d("WAGetPlatformFromStanzaId",["I64","WALogger"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Failed to parse stanza id "," for platform: ",""]);i=function(){return a};return a}function a(a){try{var b=(1<<5)-1;b=(h||(h=d("I64"))).of_float(b<<17);var c=h.of_float(0),e=h.of_float(1<<17);b=h.and_(h.of_string(a),b);if((h||(h=d("I64"))).equal(b,c))return"web";return(h||(h=d("I64"))).equal(b,e)?"mobile":"unknown"}catch(b){d("WALogger").ERROR(i(),a,b);return"error"}}g.getPlatformFromStanzaId=a}),98);
__d("WAStartMediaDownloadQplFlow",["WAGetPlatformFromStanzaId","WAGetStorageQplAnnotations","WAJids","WAMediaUtils","WAPREList","WAPREMetrics"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=a.downloadEntry,c=a.msgType,e=a.triggerUIView;a=a.protocolMsgId;var f=d("WAPREMetrics").startMetric(d("WAPREList").PRE_METRIC.MEDIA_DOWNLOAD,{bool:{isTransformStreamSupported:d("WAMediaUtils").isTransformStreamSupported()},string:{chat_type:d("WAJids").switchOnMsgrChatJidType(a.chat,{group:function(){return"group"},user:function(){return"user"}}),downloadEntry:b,e2eePlatform:d("WAGetPlatformFromStanzaId").getPlatformFromStanzaId(a.externalId),msgType:c,trigger_ui_view:e}},void 0,d("WAPREMetrics").QPL_MEDIA_DOWNLOAD_TIMEOUT_IN_MS);void d("WAGetStorageQplAnnotations").getStorageQplAnnotations().then(function(a){f.addAnnotations(a)});return babelHelpers["extends"]({},f,{downloadEntry:b,triggerUIView:e})}g.startMediaDownloadQplFlow=a}),98);
__d("WAMedia",[],(function(a,b,c,d,e,f){"use strict";a="Image";b="Video";c="Ptt";d="Gif";e="Sticker";var g="DocumentFile",h={IMAGE:a,VIDEO:b,PTT:c,GIF:d,STICKER:e,DOCUMENT_FILE:g};f.IMAGE=a;f.VIDEO=b;f.PTT=c;f.GIF=d;f.STICKER=e;f.DOCUMENT_FILE=g;f.MEDIA_TYPE=h}),66);
__d("WAMessageKey",["WAGlobals","WAJids","WAStanzaUtils","err"],(function(a,b,c,d,e,f,g){"use strict";function h(a){return a===d("WAJids").AUTHOR_ME||a==d("WAGlobals").getMyUserJid()}function a(a,b,e){if(e==null)throw c("err")("messageKey is null");var f=e.id,g=e.remoteJid;if(f==null)throw c("err")("messageKey.id is null");else if(g==null)throw c("err")("messageKey.remoteJid is null");g=d("WAJids").interpretAndValidateJid(g);if(g.jidType==="unknown")throw c("err")("messageKey.remoteJid is invalid");var i,j=d("WAJids").AUTHOR_ME;if(g.jidType==="group"){i=g.groupJid;if(h(b)&&e.fromMe===!0)j=d("WAJids").AUTHOR_ME;else if(e.fromMe==!0)j=b;else{var k=e.participant;if(k==null)throw c("err")("key.participant is null");k=d("WAJids").interpretAndValidateJid(k);if(k.jidType==="msgrUser")j=k.userJid;else throw c("err")("key.participant is invalid")}}else if(g.jidType==="msgrUser"||g.jidType==="msgrDevice"){k=d("WAJids").interpretAndValidateJid(a);if(k.jidType!=="msgrUser")throw c("err")("expected user type jid.");i=k.userJid;h(b)?e.fromMe===!0?j=d("WAJids").AUTHOR_ME:j=k.userJid:e.fromMe===!0&&(j=k.userJid)}else throw c("err")("Unsupported jidtype type");return{chat:i,author:h(j)?d("WAJids").AUTHOR_ME:j,externalId:d("WAStanzaUtils").toStanzaId(f)}}g.extractProtocolMessageId=a}),98);
__d("WAParseConsumerMessagePollCreation",["WAGlobals","WAHex","WAMsgType"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,c,e){a={unstoredMsg:{type:d("WAMsgType").MSG_TYPE.FUTUREPROOF,msgContent:{protobuf:d("WAHex").bytesToBuffer(a),subtype:d("WAGlobals").getConfig().isUnsupportedMessagesRedesignEnabled()?"pollCreationMessage":null},id:b.id,ts:b.ts,sentTs:b.sentTs,serverTs:b.serverTs,ack:b.ack,reportingMeta:c},unstoredMedia:null,unstoredQuotedMedia:null};return!e||!d("WAGlobals").getConfig().isPollsFallbackExperienceEnabled()?a:a}g["default"]=a}),98);
__d("WAParseProtocolUtils",["WAGlobals","WALogger","WALongInt","WATimeUtils"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["Unsupported franking version ",""]);h=function(){return a};return a}function a(a,b){b=i(b,a.serverTs);a=b==null?void 0:b.expirationTs;var c=b==null?void 0:b.deleteTs;b=b==null?void 0:b.ephemeralSetting;return{expirationTs:a,deleteTs:c,ephemeralSetting:b}}function b(a,b){b=j(b);b!=null&&(a.reportingMeta=b);return b}function i(a,b){var c;c=a==null?void 0:(c=a.chatEphemeralSetting)==null?void 0:c.ephemeralExpiration;a=a==null?void 0:(a=a.chatEphemeralSetting)==null?void 0:a.ephemeralSettingTimestamp;if(c==null||a==null||c===0||!d("WAGlobals").getConfig().isEphemeralMessagesEnabled())return null;b=d("WATimeUtils").castToUnixTime(b+d("WAGlobals").getDependencies().ephemeralMaxDeletionWindowForUnseenMessage());var e=b,f=null;try{a=d("WALongInt").numberOrThrowIfTooLarge(a)/1e3;f=d("WATimeUtils").castToUnixTime(a)}catch(a){return null}return{expirationTs:b,deleteTs:e,ephemeralSetting:{expirationTs:c,updatedTs:f}}}function j(a){a=a==null?void 0:a.frankingVersion;a!=null&&a!==0&&d("WALogger").ERROR(h(),a);return{frankingKey:void 0,frankingTag:void 0,frankingVersion:a,reportingContent:void 0,reportingTag:void 0}}g.parseEphemerality=a;g.enhanceReportingMeta=b}),98);
__d("WAParseReadOnlyMetadataDataclassToUnsafeObject",["err"],(function(a,b,c,d,e,f,g){"use strict";function a(a){if((a==null?void 0:a.readonlyMetadataDataclass)!=null)try{a=JSON.parse(a==null?void 0:a.readonlyMetadataDataclass);return a}catch(a){throw c("err")("Failed to parse readonly metadata dataclass JSON")}return null}g["default"]=a}),98);
__d("WAParseConsumerMessageProtocol",["WACommon.pb","WAConsumerApplication.pb","WAGlobals","WAHex","WAJids","WALogger","WAMediaTransport.pb","WAMessageKey","WAMsgType","WAParseConsumerMessagePollCreation","WAParseMediaTransportProtocol","WAParseProtocolUtils","WAParseReadOnlyMetadataDataclassToUnsafeObject","WAResultOrError","WAStanzaUtils","WATimeUtils","decodeProtobuf","err"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["parseConsumerMessageProtocol error :",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["WAParseConsumerMessageProtocol - ephemeralSetting duration is invalid ",", jidType: ",""]);i=function(){return a};return a}var j=90*d("WATimeUtils").DAY_SECONDS;b=1;e=0;f=1;f=d("WAGlobals").getConfig().armadilloWebProcessFutureproof()?f+1:f;function a(a,b,e,f,g,k){var l;b=d("decodeProtobuf").decodeProtobufWithUnknowns(d("WAConsumerApplication.pb").ConsumerApplicationSpec,b);l=(l=b.payload)==null?void 0:(l=l.applicationData)==null?void 0:(l=l.revoke)==null?void 0:(l=l.key)==null?void 0:l.id;if(l!=null)return{unstoredMsg:{type:d("WAMsgType").MSG_TYPE.REVOKED,id:e.id,ts:e.ts,sentTs:e.sentTs,serverTs:e.serverTs,ack:e.ack,reportingMeta:e.reportingMeta,revokedExternalId:d("WAStanzaUtils").toStanzaId(l),unsendMsgContentDeleteTs:null,msgContent:null,ebTimestampMs:k},unstoredMedia:null,unstoredQuotedMedia:null};var m=(g==null?void 0:g.isForwarded)||!1;l=d("WAParseProtocolUtils").parseEphemerality(e,g);var x=l.expirationTs,y=l.deleteTs,z=l.ephemeralSetting;if(z!=null&&(z.expirationTs<0||z.expirationTs>j)){k=d("WAJids").interpretAndValidateJid(a);l=k.jidType;k=z.expirationTs;d("WALogger").ERROR(i(),k,l)}var A=d("WAParseProtocolUtils").enhanceReportingMeta(e,g),B=(k=o(g))!=null?k:void 0,C=(l=b.payload)==null?void 0:l.content;if(!C)return{unstoredMsg:null,unstoredMedia:null,unstoredQuotedMedia:null};var D=(k=b.metadata)==null?void 0:k.specialTextSize,E=t(C),F={contentTypeForLogging:E,unstoredMsg:{type:d("WAMsgType").MSG_TYPE.FUTUREPROOF,msgContent:{protobuf:d("WAHex").bytesToBuffer(f),subtype:null},id:e.id,ts:e.ts,sentTs:e.sentTs,serverTs:e.serverTs,ack:e.ack,reportingMeta:A},unstoredMedia:null,unstoredQuotedMedia:null},G=function(a){return babelHelpers["extends"]({},F,{unstoredMsg:babelHelpers["extends"]({},F.unstoredMsg,{msgContent:babelHelpers["extends"]({},F.unstoredMsg.msgContent,{subtype:a})})})};l=function(){try{switch(E){case"messageText":var b,i=C[E];if(i==null)throw c("err")("consumerMessage has no messageText");b=((b=i.commands)==null?void 0:b.some(function(a){return a.commandType===d("WACommon.pb").COMMAND_COMMAND_TYPE.AI}))===!0;if(b)return G(d("WAGlobals").getConfig().isUnsupportedMessagesRedesignEnabled()?"metaAiMessage":null);if(w(g))return G("noteMention");if(i.text==null)throw c("err")("consumerMessage has no messageText");return{unstoredMsg:babelHelpers["extends"]({type:d("WAMsgType").MSG_TYPE.TEXT,msgContent:{content:i.text,mentionedJids:i.mentionedJid.map(d("WAJids").validateUserJid).filter(Boolean)},quote:B,expirationTs:x,deleteTs:y,ephemeralSetting:z,isForwarded:m},e,{specialTextSize:D}),unstoredMedia:null,unstoredQuotedMedia:null};case"reactionMessage":return{unstoredMsg:n(a,e,C[E]),unstoredMedia:null,unstoredQuotedMedia:null};case"imageMessage":b=p(C,e.ts);return{unstoredMsg:babelHelpers["extends"]({type:d("WAMsgType").MSG_TYPE.IMAGE,quote:B,expirationTs:x,deleteTs:y,ephemeralSetting:z,isForwarded:m,mediaId:b.plaintextHash},e),unstoredMedia:b,unstoredQuotedMedia:null};case"videoMessage":var j,k;i=C[E];if(i==null)throw c("err")("consumerMessage has no videoMessage");b=d("decodeProtobuf").decodeProtobufWithUnknowns(d("WAMediaTransport.pb").VideoTransportSpec,i==null?void 0:(b=i.video)==null?void 0:b.payload);j=b==null?void 0:(j=b.integral)==null?void 0:(j=j.transport)==null?void 0:(j=j.ancillary)==null?void 0:j.mimetype;k=(b==null?void 0:(k=b.ancillary)==null?void 0:k.gifPlayback)===!0&&j==="image/gif";if(k&&!d("WAGlobals").getConfig().isGifEnabled())return F;j=d("WAParseMediaTransportProtocol").parseVideoMsg(b,e.ts,k);if(j==null)throw c("err")("consumerMessage has no video media info");if(v(g)&&((b=i.caption)==null?void 0:b.text)!=null){return{unstoredMsg:babelHelpers["extends"]({type:d("WAMsgType").MSG_TYPE.TEXT,msgContent:{content:(b=i.caption)==null?void 0:b.text,mentionedJids:i.caption.mentionedJid.map(d("WAJids").validateUserJid).filter(Boolean)},quote:B,expirationTs:x,deleteTs:y,ephemeralSetting:z,isForwarded:m},e,{specialTextSize:D}),unstoredMedia:null,unstoredQuotedMedia:null}}return{unstoredMsg:k?babelHelpers["extends"]({type:d("WAMsgType").MSG_TYPE.GIF},e,{quote:B,expirationTs:x,deleteTs:y,ephemeralSetting:z,isForwarded:m,reportingMeta:A,mediaId:j.plaintextHash}):babelHelpers["extends"]({type:d("WAMsgType").MSG_TYPE.VIDEO},e,{quote:B,expirationTs:x,deleteTs:y,ephemeralSetting:z,isForwarded:m,mediaId:j.plaintextHash}),unstoredMedia:j,unstoredQuotedMedia:null};case"audioMessage":b=q(C,e.ts);return{unstoredMsg:babelHelpers["extends"]({type:d("WAMsgType").MSG_TYPE.PTT,quote:B,expirationTs:x,deleteTs:y,ephemeralSetting:z,isForwarded:m,mediaId:b.plaintextHash},e),unstoredMedia:b,unstoredQuotedMedia:null};case"stickerMessage":if(d("WAGlobals").getConfig().isStickerEnabled()){i=r(C);k=d("WAParseMediaTransportProtocol").parseStickerMsg(i,e.ts);j=((j=i.integral)==null?void 0:j.receiverFetchId)!=null||((b=i.ancillary)==null?void 0:b.receiverFetchId)!=null;b=d("WAGlobals").getConfig().isStickerReceiverFetchEnabled();if(k==null){if(j){if(b){j=d("WAParseMediaTransportProtocol").parseStickerReceiverFetchInfo(i);if(j==null)throw c("err")("consumerMessage has no sticker receiver fetch info");return{unstoredMsg:babelHelpers["extends"]({type:d("WAMsgType").MSG_TYPE.RECEIVER_FETCH,quote:B,expirationTs:x,deleteTs:y,ephemeralSetting:z,isForwarded:m,reportingMeta:A},e),unstoredMedia:null,unstoredQuotedMedia:null,unstoredReceiverFetchInfo:j}}return G("stickerReceiverFetchMessage")}throw c("err")("consumerMessage has no sticker media info")}return{unstoredMsg:babelHelpers["extends"]({type:d("WAMsgType").MSG_TYPE.STICKER,quote:B,expirationTs:x,deleteTs:y,ephemeralSetting:z,isForwarded:m,reportingMeta:A,mediaId:k.plaintextHash},e),unstoredMedia:k,unstoredQuotedMedia:null}}return F;case"documentMessage":if(d("WAGlobals").getConfig().isDocumentReceiveEnabled()){b=s(C,e.ts);return{unstoredMsg:babelHelpers["extends"]({type:d("WAMsgType").MSG_TYPE.DOCUMENT_FILE,quote:B,expirationTs:x,deleteTs:y,ephemeralSetting:z,isForwarded:m,reportingMeta:A,mediaId:b.plaintextHash},e),unstoredMedia:b,unstoredQuotedMedia:null}}return F;case"groupInviteMessage":return{unstoredMsg:null,unstoredMedia:null,unstoredQuotedMedia:null,unstoredIncomingGroupInvite:u(e,C)};case"editMessage":i=C[E];j=i==null?void 0:i.message;k=j==null?void 0:j.text;b=i==null?void 0:(b=i.key)==null?void 0:b.id;if(i==null||j==null||k==null)throw c("err")("consumerMessage with editMessage type has no editMessage");if(b==null)throw c("err")("consumerMessage with editMessage type has no original Msg External Id.");i=d("WAStanzaUtils").toStanzaId(b);return{unstoredEditMsg:{type:d("WAMsgType").MSG_TYPE.EDIT_ACTION,editMsgContent:{content:k,mentionedJids:j.mentionedJid.map(d("WAJids").validateUserJid).filter(Boolean)},originalMsgExternalId:i,id:e.id,ts:e.ts,sentTs:e.sentTs,serverTs:e.serverTs,ack:e.ack,reportingMeta:A,specialTextSize:D},unstoredMsg:null,unstoredMedia:null,unstoredQuotedMedia:null};case"pollCreationMessage":return c("WAParseConsumerMessagePollCreation")(f,e,A,C[E]);case"pollUpdateMessage":return d("WAGlobals").getConfig().isUnsupportedMessagesRedesignEnabled()?{unstoredMsg:null,unstoredMedia:null,unstoredQuotedMedia:null}:F;case"contactMessage":case"locationMessage":case"extendedTextMessage":case"statusTextMessage":case"contactsArrayMessage":case"liveLocationMessage":case"viewOnceMessage":default:return F}}catch(a){d("WALogger").ERROR(h(),a);return{unstoredMsg:null,unstoredMedia:null,unstoredQuotedMedia:null}}}();return babelHelpers["extends"]({},l,{contentTypeForLogging:E})}function k(a){if(d("WAJids").isAuthorSystem(a))throw c("err")("Got system author");return a}var l=30;function m(a){if(a==null)return d("WAResultOrError").makeResult(null);return a.length>l?d("WAResultOrError").makeError("invalid-reaction-text-length"):d("WAResultOrError").makeResult(a)}function n(a,b,e){if(e==null)throw c("err")("consumerMessage has no reactionMessage");var f=k(b.id.author);a=d("WAMessageKey").extractProtocolMessageId(a,f,e.key);f=e.text;var g=e.groupingKey;e=e.senderTimestampMs;var h=m(f);if(!h.success){throw c("err")('"'+((f=f)!=null?f:"")+'" is not a valid reaction ['+h.error+"]")}return{type:d("WAMsgType").MSG_TYPE.REACTION,ack:b.ack,id:b.id,reactToExternalId:a.externalId,reactToAuthor:a.author,reaction:h.value,groupingKey:g,ts:b.ts,senderTimestampMs:e}}function o(a){var b,e;b=a==null?void 0:(b=a.quotedMessage)==null?void 0:b.stanzaId;e=a==null?void 0:(e=a.quotedMessage)==null?void 0:e.participant;a=a==null?void 0:(a=a.quotedMessage)==null?void 0:a.remoteJid;e=e!=null?d("WAJids").interpretAndValidateJid(e):null;var f;(e==null?void 0:e.jidType)==="msgrUser"&&e.userJid===d("WAGlobals").getMyUserJid()?f=d("WAJids").AUTHOR_ME:(e==null?void 0:e.jidType)==="msgrUser"?f=e.userJid:f=d("WAJids").AUTHOR_ME;if(b==null)return null;e={type:d("WAMsgType").MSG_TYPE.UNAVAILABLE,author:f,externalId:d("WAStanzaUtils").toStanzaId(b),ts:null};if(a!=null){f=d("WAJids").interpretAndValidateJid(a);if(f.jidType==="group")return{remoteJid:f.groupJid,content:e};else throw c("err")("not supported")}else return{remoteJid:null,content:e}}function p(a,b){a=a.imageMessage;if(a==null)throw c("err")("consumerMessage has no imageMessage");return d("WAParseMediaTransportProtocol").decodeImageTransport(a==null?void 0:(a=a.image)==null?void 0:a.payload,b)}function q(a,b){var e;a=a.audioMessage;if(a==null)throw c("err")("consumerMessage has no audioMessage");e=d("decodeProtobuf").decodeProtobufWithUnknowns(d("WAMediaTransport.pb").AudioTransportSpec,a==null?void 0:(e=a.audio)==null?void 0:e.payload);e=d("WAParseMediaTransportProtocol").parseAudioMsg(e,(a==null?void 0:a.ptt)||!1,b);if(e==null)throw c("err")("consumerMessage has no audio media info");return e}function r(a){a=a.stickerMessage;if(a==null)throw c("err")("consumerMessage has no stickerMessage");return d("decodeProtobuf").decodeProtobufWithUnknowns(d("WAMediaTransport.pb").StickerTransportSpec,a==null?void 0:(a=a.sticker)==null?void 0:a.payload)}function s(a,b){var e;a=a.documentMessage;if(a==null)throw c("err")("consumerMessage has no documentMessage");e=d("decodeProtobuf").decodeProtobufWithUnknowns(d("WAMediaTransport.pb").DocumentTransportSpec,a==null?void 0:(e=a.document)==null?void 0:e.payload);a=a==null?void 0:a.fileName;e=d("WAParseMediaTransportProtocol").parseDocumentMsg(e,a,b);if(e==null)throw c("err")("consumerMessage has no document media info");return e}function t(a){var b=Object.keys(a).filter(function(a){return a!=="$$unknownFieldCount"});if(b.length!==1)throw c("err")(JSON.stringify(a)+" consumerMessage payload content should have exactly one field, instead found "+JSON.stringify(b));return b[0]}function u(a,b){b=b.groupInviteMessage;if(b==null)throw c("err")("consumerMessage has no GroupInvite Data");return babelHelpers["extends"]({ack:a.ack,author:a.id.author,externalId:a.id.externalId,ts:a.ts},b)}function v(a){a=c("WAParseReadOnlyMetadataDataclassToUnsafeObject")(a);return(a==null?void 0:(a=a.power_up)==null?void 0:a.power_up_style)!=null}function w(a){a=c("WAParseReadOnlyMetadataDataclassToUnsafeObject")(a);return(a==null?void 0:(a=a.note_metadata)==null?void 0:a.message_type)==="MENTION"}g.MINIMAL_MEDIA_DURATION=b;g.DEFAULT_FILE_SIZE=e;g.SUPPORTED_TYPES_VERSION=f;g.parseConsumerMessageProtocol=a;g.interpretAsNonSystemAuthor=k;g.validReactionMessageText=m;g.parseReactionMessage=n;g.parsedQuotedConsumerMessage=o;g.parseOneOfContentType=t}),98);
__d("WAParseMediaTransportProtocol",["WAConsumerApplication.pb","WAHashUtils","WALogger","WALongInt","WAMedia","WAMediaTransport.pb","WAMediaUtils","WAMsgMap","WAParseConsumerMessageProtocol","WAProgressiveJpegGetScanLengths","WATimeUtils","decodeProtobuf","err"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["downloadableThumbnail is missing some required fields"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["cannot compose mediaEntry with the media message"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["parseMediaKey error :",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["cannot compose mediaEntry with the media message"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["protobuf msg with no plaintext hash"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["There is unknown fileds in integral of VideoTransport"]);m=function(){return a};return a}function n(a,b,c,e){var f,g,h;if(!((f=a.integral)==null?void 0:f.transport))return null;f=(f=a.integral)==null?void 0:f.transport;if(d("decodeProtobuf").getUnknownFields(f.integral)!=null){d("WALogger").ERROR(m());return null}g=(g=f.integral)==null?void 0:g.fileSha256;if(!g){c||d("WALogger").ERROR(l());return null}c=null;if(((h=a.ancillary)==null?void 0:h.scansSidecar)!=null&&((h=a.ancillary)==null?void 0:h.scanLengths)!=null){c={sidecar:(h=a.ancillary)==null?void 0:h.scansSidecar,scanLengths:(h=a.ancillary)==null?void 0:(a=h.scanLengths)==null?void 0:a.map(d("WAProgressiveJpegGetScanLengths").asProgressiveJpegScanLength)}}if(((h=f.integral)==null?void 0:h.fileSha256)==null||((a=f.integral)==null?void 0:a.fileEncSha256)==null||((h=f.integral)==null?void 0:h.mediaKey)==null||((a=f.integral)==null?void 0:a.directPath)==null||((h=f.integral)==null?void 0:h.mediaKeyTimestamp)==null||((a=f.ancillary)==null?void 0:a.objectId)==null){d("WALogger").ERROR(k());return null}a=(h=f.ancillary)==null?void 0:h.fileLength;h=(h=f.ancillary.thumbnail)==null?void 0:h.downloadableThumbnail;f=d("WAMediaUtils").rawDataToMediaEntry({fileSha256:f.integral.fileSha256,fileEncSha256:f.integral.fileEncSha256,mediaKey:f.integral.mediaKey,directPath:f.integral.directPath,mediaKeyTimestamp:d("WATimeUtils").castLongIntToUnixTime(f.integral.mediaKeyTimestamp),serverMediaType:b,objectId:(b=f.ancillary)==null?void 0:b.objectId,fbid:void 0,downloadableThumbnail:{directPath:h==null?void 0:h.directPath,fileEncSha256:h==null?void 0:h.fileEncSha256,fileSha256:h==null?void 0:h.fileSha256,mediaKey:h==null?void 0:h.mediaKey,mediaKeyTimestamp:(h==null?void 0:h.mediaKeyTimestamp)==null?null:d("WATimeUtils").castLongIntToUnixTime(h==null?void 0:h.mediaKeyTimestamp),objectId:h==null?void 0:h.objectId},filename:e,progressiveJpegDetails:c,size:a==null?a:d("WALongInt").numberOrThrowIfTooLarge(a)});return{size:a==null?d("WAParseConsumerMessageProtocol").DEFAULT_FILE_SIZE:d("WALongInt").numberOrThrowIfTooLarge(a),plaintextHash:d("WAHashUtils").toPlaintextHash(new Uint8Array(g)),mediaEntry:f}}function o(a,b){var c,e=n(a,"image",!1);if(!e)return null;e=r(e,b);b=(b=a.ancillary)==null?void 0:b.width;c=(c=a.ancillary)==null?void 0:c.height;a.ancillary!=null&&(a.ancillary.width!=null&&a.ancillary.width===4294967295&&(b=void 0),a.ancillary.height!=null&&a.ancillary.height===4294967295&&(c=void 0));c=babelHelpers["extends"]({},e,{mediaType:d("WAMedia").MEDIA_TYPE.IMAGE,validatedVideoInfo:null,validatedImageInfo:{width:b,height:c,jpegThumbnail:(e=a.integral)==null?void 0:(b=e.transport)==null?void 0:(c=b.ancillary)==null?void 0:(e=c.thumbnail)==null?void 0:e.jpegThumbnail,jpegThumbnailHeight:(b=a.integral)==null?void 0:(c=b.transport)==null?void 0:(e=c.ancillary)==null?void 0:(b=e.thumbnail)==null?void 0:b.thumbnailHeight,jpegThumbnailWidth:(c=a.integral)==null?void 0:(e=c.transport)==null?void 0:(b=e.ancillary)==null?void 0:(a=b.thumbnail)==null?void 0:a.thumbnailWidth},validatedAudioInfo:null,validatedDocumentFileInfo:null});return c}function a(a,b){a=d("decodeProtobuf").decodeProtobufWithUnknowns(d("WAMediaTransport.pb").ImageTransportSpec,a);a=o(a,b);if(a==null)throw c("err")("consumerMessage has no image media info");return a}function b(a,b,c){var e;if(!((e=a.integral)==null?void 0:e.transport))return null;e=n(a,c?"gif":"video",!1);if(!e)return null;e=r(e,b);e=babelHelpers["extends"]({},e,{mediaType:c?d("WAMedia").MEDIA_TYPE.GIF:d("WAMedia").MEDIA_TYPE.VIDEO,validatedVideoInfo:c?null:{duration:(a==null?void 0:(b=a.ancillary)==null?void 0:b.seconds)!=null&&(a==null?void 0:(e=a.ancillary)==null?void 0:e.seconds)>d("WAParseConsumerMessageProtocol").MINIMAL_MEDIA_DURATION?a==null?void 0:(b=a.ancillary)==null?void 0:b.seconds:d("WAParseConsumerMessageProtocol").MINIMAL_MEDIA_DURATION,width:a==null?void 0:(e=a.ancillary)==null?void 0:e.width,height:a==null?void 0:(b=a.ancillary)==null?void 0:b.height,mimetype:a==null?void 0:(e=a.integral)==null?void 0:(b=e.transport)==null?void 0:(e=b.ancillary)==null?void 0:e.mimetype,jpegThumbnail:(b=a.integral)==null?void 0:(e=b.transport)==null?void 0:(b=e.ancillary)==null?void 0:(e=b.thumbnail)==null?void 0:e.jpegThumbnail,jpegThumbnailHeight:(b=a.integral)==null?void 0:(e=b.transport)==null?void 0:(b=e.ancillary)==null?void 0:(e=b.thumbnail)==null?void 0:e.thumbnailHeight,jpegThumbnailWidth:(b=a.integral)==null?void 0:(e=b.transport)==null?void 0:(b=e.ancillary)==null?void 0:(e=b.thumbnail)==null?void 0:e.thumbnailWidth},validatedImageInfo:c?{width:(b=a.ancillary)==null?void 0:b.width,height:(e=a.ancillary)==null?void 0:e.height,jpegThumbnail:(c=a.integral)==null?void 0:(b=c.transport)==null?void 0:(e=b.ancillary)==null?void 0:(c=e.thumbnail)==null?void 0:c.jpegThumbnail,jpegThumbnailHeight:(b=a.integral)==null?void 0:(e=b.transport)==null?void 0:(c=e.ancillary)==null?void 0:(b=c.thumbnail)==null?void 0:b.thumbnailHeight,jpegThumbnailWidth:(e=a.integral)==null?void 0:(c=e.transport)==null?void 0:(b=c.ancillary)==null?void 0:(a=b.thumbnail)==null?void 0:a.thumbnailWidth}:null,validatedAudioInfo:null,validatedDocumentFileInfo:null});return e}function e(a,b,c){if(!((b=a.integral)==null?void 0:b.transport))return null;b=n(a,"ptt",!1);if(!b)return null;b=r(b,c);b=babelHelpers["extends"]({},b,{mediaType:d("WAMedia").MEDIA_TYPE.PTT,validatedVideoInfo:null,validatedImageInfo:null,validatedDocumentFileInfo:null,validatedAudioInfo:{duration:(a==null?void 0:(c=a.ancillary)==null?void 0:c.seconds)!=null&&(a==null?void 0:(b=a.ancillary)==null?void 0:b.seconds)>d("WAParseConsumerMessageProtocol").MINIMAL_MEDIA_DURATION?a==null?void 0:(c=a.ancillary)==null?void 0:c.seconds:d("WAParseConsumerMessageProtocol").MINIMAL_MEDIA_DURATION,mimetype:a==null?void 0:(b=a.integral)==null?void 0:(c=b.transport)==null?void 0:(a=c.ancillary)==null?void 0:a.mimetype,played:!1}});return b}function f(a,b){var c;if(!((c=a.integral)==null?void 0:c.transport))return null;c=((c=a.integral)==null?void 0:c.receiverFetchId)!=null;c=n(a,"sticker",c);if(!c)return null;c=r(c,b);c=babelHelpers["extends"]({},c,{mediaType:d("WAMedia").MEDIA_TYPE.STICKER,validatedVideoInfo:null,validatedImageInfo:{width:(b=a.ancillary)==null?void 0:b.width,height:(c=a.ancillary)==null?void 0:c.height,jpegThumbnail:(b=a.integral)==null?void 0:(c=b.transport)==null?void 0:(b=c.ancillary)==null?void 0:(c=b.thumbnail)==null?void 0:c.jpegThumbnail,jpegThumbnailHeight:(b=a.integral)==null?void 0:(c=b.transport)==null?void 0:(b=c.ancillary)==null?void 0:(c=b.thumbnail)==null?void 0:c.thumbnailHeight,jpegThumbnailWidth:(b=a.integral)==null?void 0:(c=b.transport)==null?void 0:(a=c.ancillary)==null?void 0:(b=a.thumbnail)==null?void 0:b.thumbnailWidth},validatedAudioInfo:null,validatedDocumentFileInfo:null});return c}function p(a){var b,c,d;if(!((b=a.integral)==null?void 0:b.transport))return null;b=(b=a.ancillary)==null?void 0:b.width;c=(c=a.ancillary)==null?void 0:c.height;d=(d=(d=a.integral)==null?void 0:d.receiverFetchId)!=null?d:(d=a.ancillary)==null?void 0:d.receiverFetchId;a=a==null?void 0:(a=a.integral)==null?void 0:(a=a.transport)==null?void 0:(a=a.ancillary)==null?void 0:a.mimetype;if(b==null||c==null||d==null||a==null)return null;d={receiverFetchId:d,previewWidth:b,previewHeight:c,mimetype:a,type:"sticker"};return d}function q(a,b,c){var e;if(!((e=a.integral)==null?void 0:e.transport))return null;e=n(a,"document",!1,b);if(!e)return null;e=r(e,c);return babelHelpers["extends"]({},e,{mediaType:d("WAMedia").MEDIA_TYPE.DOCUMENT_FILE,validatedVideoInfo:null,validatedImageInfo:null,validatedAudioInfo:null,validatedDocumentFileInfo:{mimetype:a==null?void 0:(c=a.integral)==null?void 0:(e=c.transport)==null?void 0:(a=e.ancillary)==null?void 0:a.mimetype,filename:(c=b)!=null?c:void 0}})}function r(a,b){return{mediaEntry:a.mediaEntry,plaintextHash:a.plaintextHash,size:a.size,msgIds:[],mediaEntries:new(d("WAMsgMap").MsgMap)(),ts:b}}function s(a){a=a.msg;if(a.subprotocolType!=="consumerMessage")return[];a=d("decodeProtobuf").decodeProtobuf(d("WAConsumerApplication.pb").ConsumerApplicationSpec,a.subprotocol);if(a.payload==null||a.payload.content==null)return[];var b=a.payload.content;a=d("WAParseConsumerMessageProtocol").parseOneOfContentType(a.payload.content);try{switch(a){case"imageMessage":a=d("decodeProtobuf").decodeProtobuf(d("WAMediaTransport.pb").ImageTransportSpec,(a=b.imageMessage)==null?void 0:(a=a.image)==null?void 0:a.payload);return t(a,"image");case"videoMessage":a=d("decodeProtobuf").decodeProtobuf(d("WAMediaTransport.pb").VideoTransportSpec,(a=b.videoMessage)==null?void 0:(a=a.video)==null?void 0:a.payload);return t(a,"video");case"audioMessage":a=d("decodeProtobuf").decodeProtobuf(d("WAMediaTransport.pb").AudioTransportSpec,(a=b.audioMessage)==null?void 0:(a=a.audio)==null?void 0:a.payload);return t(a,"ptt");case"stickerMessage":a=d("decodeProtobuf").decodeProtobuf(d("WAMediaTransport.pb").StickerTransportSpec,(a=b.stickerMessage)==null?void 0:(a=a.sticker)==null?void 0:a.payload);return t(a,"sticker");case"documentMessage":a=d("decodeProtobuf").decodeProtobuf(d("WAMediaTransport.pb").DocumentTransportSpec,(a=b.documentMessage)==null?void 0:(b=a.document)==null?void 0:b.payload);return t(a,"document");case"groupInviteMessage":case"editMessage":case"pollCreationMessage":case"pollUpdateMessage":case"messageText":case"reactionMessage":case"contactMessage":case"locationMessage":case"extendedTextMessage":case"statusTextMessage":case"contactsArrayMessage":case"liveLocationMessage":case"viewOnceMessage":default:return[]}}catch(a){d("WALogger").ERROR(j(),a);return[]}}function t(a,b){var c,e;if(!((c=a.integral)==null?void 0:c.transport))return[];c=(c=a.integral)==null?void 0:c.transport;if(c.integral==null||((e=c.integral)==null?void 0:e.fileSha256)==null||((e=c.integral)==null?void 0:e.fileEncSha256)==null||((e=c.integral)==null?void 0:e.mediaKey)==null||((e=c.integral)==null?void 0:e.directPath)==null||((e=c.integral)==null?void 0:e.mediaKeyTimestamp)==null||((e=c.ancillary)==null?void 0:e.objectId)==null){d("WALogger").ERROR(i());return[]}e=c.integral;var f=e.fileSha256,g=e.fileEncSha256,j=e.mediaKey,k=e.directPath;e=e.mediaKeyTimestamp;b={directPath:k,plaintextHash:d("WAHashUtils").toPlaintextHash(f),ciphertextHash:d("WAHashUtils").toCiphertextHash(g),fbid:void 0,fileEncSha256:g,fileSha256:f,mediaKey:j,mediaKeyTimestamp:d("WATimeUtils").castLongIntToUnixTime(e),objectId:(k=c.ancillary)==null?void 0:k.objectId,serverMediaType:b,sidecar:((g=a.ancillary)==null?void 0:g.scansSidecar)||((f=a.ancillary)==null?void 0:f.sidecar),size:d("WALongInt").maybeNumberOrThrowIfTooLarge((j=c.ancillary)==null?void 0:j.fileLength),scanLengths:(e=a.ancillary)==null?void 0:(k=e.scanLengths)==null?void 0:k.map(d("WAProgressiveJpegGetScanLengths").asProgressiveJpegScanLength),uploadToken:void 0};j=(g=c.ancillary)==null?void 0:(f=g.thumbnail)==null?void 0:f.downloadableThumbnail;a=null;if(j!=null&&(j==null?void 0:j.fileSha256)!=null&&(j==null?void 0:j.fileEncSha256)!=null&&(j==null?void 0:j.mediaKey)!=null&&(j==null?void 0:j.directPath)!=null&&(j==null?void 0:j.mediaKeyTimestamp)!=null&&(j==null?void 0:j.objectId)!=null){e=j.fileSha256;k=j.fileEncSha256;c=j.mediaKey;g=j.directPath;f=j.mediaKeyTimestamp;var l=j.objectId;a={ciphertextHash:d("WAHashUtils").toCiphertextHash(k),directPath:g,fileEncSha256:k,fileSha256:e,mediaKey:c,mediaKeyTimestamp:d("WATimeUtils").castLongIntToUnixTime(f),objectId:l,plaintextHash:d("WAHashUtils").toPlaintextHash(e),scanLengths:void 0,serverMediaType:"preview",sidecar:void 0,uploadToken:void 0,size:void 0}}else j!=null&&d("WALogger").ERROR(h());return[b,a].filter(Boolean)}g.getMediaMeta=n;g.parseImageMsg=o;g.decodeImageTransport=a;g.parseVideoMsg=b;g.parseAudioMsg=e;g.parseStickerMsg=f;g.parseStickerReceiverFetchInfo=p;g.parseDocumentMsg=q;g.parseMediaKey=s}),98);
__d("WAParseMessageApplication",["decodeProtobuf"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b,c,e=a.payload;if(e==null)return{version:"v3",type:"error",error:"The messageApplication has no payload"};if(d("decodeProtobuf").getUnknownFields(a.payload)!=null)return{version:"v3",type:"error",error:"There are unknown fields in the message application payload"};e=e.subProtocol;if(e==null)return{version:"v3",type:"error",error:"The messageApplication payload has no subProtocol"};if(d("decodeProtobuf").getUnknownFields(e)!=null)return{version:"v3",type:"error",error:"messageApplication subProtocol has unknown fields",futureProof:e.futureProof};e=[];b=(b=a.payload)==null?void 0:(b=b.subProtocol)==null?void 0:b.consumerMessage;c=(c=a.payload)==null?void 0:(c=c.subProtocol)==null?void 0:c.armadillo;a=(a=a.payload)==null?void 0:(a=a.subProtocol)==null?void 0:a.multiDevice;if(b!=null){if(b.payload==null)return{version:"v3",type:"error",error:"subprotocol of type consumerMessage has no payload"};e.push({payload:new Uint8Array(b.payload),type:"success",subprotocolType:"consumerMessage"})}if(c!=null){if(c.payload==null)return{version:"v3",type:"error",error:"subprotocol of type armadillo has no payload"};e.push({payload:new Uint8Array(c.payload),type:"success",subprotocolType:"armadillo"})}if(a!=null){if(a.payload==null)return{version:"v3",type:"error",error:"subprotocol of type multiDevice has no payload"};e.push({payload:new Uint8Array(a.payload),type:"success",subprotocolType:"multiDevice"})}return e.length!==1?{version:"v3",type:"error",error:"Wrong number of subprotocols: "+e.length}:e[0]}g.parseMessageApplication=a}),98);
__d("MAWParseXMAProtocol",["ACTSanitizerApiTypes","MAWMsgType","MAWODSProxy","MAWParseSubprotocolVersionConsts","MAWParseXMAFBConfig","MAWXMALoggingUtils","WAArmadilloXMA.pb","WAGetPlatformFromStanzaId","WAHex","WAJids","WALogger","WAMedia","WAMsgApplication.pb","WAOdsEnums","WAParseConsumerMessageProtocol","WAParseMediaTransportProtocol","WAParseMessageApplication","WAParseProtocolUtils","WAStanzaUtils","WATimeUtils","decodeProtobuf","err","gkx"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["S410301 The url contains RTL characters"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(['S410301 The url is invalid. It contains a colon separator, but not "://"']);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] Invalid message text during XMA restore"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] Invalid url prefix during XMA restore"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose([""," XMA has invalid native URL for target type: ",". hasNativeUrl: ",". hasActionUrl: ","."]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose([""," XMA has invalid action URL for target type: ",". hasNativeUrl: ",". hasActionUrl: ","."]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose([""," XMA has invalid action and native URL for target type: ",". hasNativeUrl: ",". hasActionUrl: ","."]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["ExternalId: "," textId: ",""]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose(["\n      received previews version is older than expected ",". "]);p=function(){return a};return a}function q(){var a=babelHelpers.taggedTemplateLiteralLoose(["\n    received favicon version is older than expected ",". "]);q=function(){return a};return a}function r(){var a=babelHelpers.taggedTemplateLiteralLoose(["\n    received headerImage version is older than expected ",". "]);r=function(){return a};return a}function s(){var a=babelHelpers.taggedTemplateLiteralLoose(["\n      received associatedMessage version is older than expected "," as expected. "]);s=function(){return a};return a}function t(){var a=babelHelpers.taggedTemplateLiteralLoose(["[XMA] received associated message with incorrect version ",""]);t=function(){return a};return a}var aa=new Set([d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_STORY_REPLY]);function u(a,b){return a==null||a.payload==null?void 0:d("WAParseMediaTransportProtocol").decodeImageTransport(a.payload,b)}function ba(a,b,e,f,g){if(b==null||b.payload==null)return null;b.version!==d("MAWParseSubprotocolVersionConsts").ASSOCIATED_MESSAGE_SUBPROTOCOL_VERSION&&d("WALogger").ERROR(t(),b.version);b=d("decodeProtobuf").decodeProtobufWithUnknowns(d("WAMsgApplication.pb").MessageApplicationSpec,b.payload);b=d("WAParseMessageApplication").parseMessageApplication(b);if(b.type==="error")throw c("err")("XMA contains unparseable message application.");b=b;if(b.subprotocolType!=="consumerMessage")throw c("err")("XMA contains incorrect message application type: "+b.subprotocolType);return d("WAParseConsumerMessageProtocol").parseConsumerMessageProtocol(a,b.payload,e,f,g)}var v="https://www.instagram.com/stories/",w="https://www.instagram.com/reel/",x="https://www.instagram.com/tv/",y="https://www.instagram.com/_n/profile_shop?",z="https://www.instagram.com/",A="https://www.alpha.facebook.com/share/",B="https://m.facebook.com/share/",C="https://www.facebook.com/share/",D="https://m.alpha.facebook.com/share/",E="https://facebook.com/share/",F="https://www.alpha.facebook.com/stories/",G="https://www.facebook.com/stories/",H="https://fb.gg/",I="https://www.facebook.com/",J="https://m.facebook.com/",K="https://www.alpha.facebook.com/",L="https://m.alpha.facebook.com/",M="https://facebook.com/",N="https://fb.watch/",O="https://www.facebook.com/l.php",P="https://m.facebook.com/l.php",Q="https://www.alpha.facebook.com/l.php",R="https://m.alpha.facebook.com/l.php",S="https://facebook.com/l.php",T="https://l.facebook.com/l.php",U="https://facebook.com/events/",ca="https://www.facebook.com/events/",da="https://www.alpha.facebook.com/events/",ea="https://m.facebook.com/events/",fa="https://m.alpha.facebook.com/events/",V="fb-messenger://payments/receipt?product_id=",W="messenger://location_share",ga="http://m.me/",ha=":",X="http://",ia="https://";function a(a,b){var e=a.chat,f=a.content,g=a.meta,h=a.metadata;a=a.protobuf;f=f.extendedContentMessage;if(f==null)throw c("err")("extendedContentMessage has no content");var i=f.targetType,j=d("WAGetPlatformFromStanzaId").getPlatformFromStanzaId(g.id.externalId),k;try{k=b(f)}catch(a){d("MAWODSProxy").odsBumpEntityKey({entity:d("WAOdsEnums").Entity.MAW_XMA_PROTOCOL_PARSING,key:"xma_validation."+j+"."+(i||0)+".error"});throw c("err")("Unexpected error trying to validate XMA content: "+a.message)}if(k===d("ACTSanitizerApiTypes").ACTSanitizerValidationResult.Valid)d("MAWODSProxy").odsBumpEntityKey({entity:d("WAOdsEnums").Entity.MAW_XMA_PROTOCOL_PARSING,key:"xma_validation."+j+"."+(i||0)+".valid"});else{d("MAWODSProxy").odsBumpEntityKey({entity:d("WAOdsEnums").Entity.MAW_XMA_PROTOCOL_PARSING,key:"xma_validation."+j+"."+(i||0)+".invalid."+k});throw c("err")("extendedContentMessage does not have valid XMA content")}if(f.xmaDataclass!=null){d("MAWODSProxy").odsBumpEntityKey({entity:d("WAOdsEnums").Entity.MAW_XMA_PROTOCOL_PARSING,key:"xma_dataclass.exists."+((b=i)!=null?b:"null")})}if(i==null||!d("MAWParseXMAFBConfig").isFBSupportedTargetType(i))return{contentTypeForLogging:"extendedContentMessage",unstoredMedia:null,unstoredMsg:{ack:g.ack,id:g.id,msgContent:{protobuf:d("WAHex").bytesToBuffer(a),subtype:ka(i)},reportingMeta:g.reportingMeta,sentTs:g.sentTs,serverTs:g.serverTs,ts:g.ts,type:d("MAWMsgType").MSG_TYPE.FUTUREPROOF},unstoredQuotedMedia:null,unstoredXMA:null,xmaTargetTypeForLogging:i};j=d("WAParseProtocolUtils").parseEphemerality(g,h);b=j.deleteTs;var l=j.ephemeralSetting;j=j.expirationTs;var m=d("WAParseProtocolUtils").enhanceReportingMeta(g,h),n=f.associatedMessage,t=f.contentRef,v=f.ctas,w=f.favicon,x=f.headerImage,y=f.headerTitle,z=f.maxSubtitleNumOfLines,A=f.maxTitleNumOfLines,B=f.mentionedJid,C=f.messageText,D=f.overlayDescription,E=f.overlayIconGlyph,F=f.overlayTitle,G=f.previews,H=f.sentWithMessageId,I=f.subtitleText,J=f.targetId,K=f.targetUsername,L=f.titleText,M=f.xmaLayoutType;n!=null&&(n.version==null||n.version<d("MAWParseSubprotocolVersionConsts").ASSOCIATED_MESSAGE_SUBPROTOCOL_VERSION)&&d("WALogger").WARN(s(),d("MAWParseSubprotocolVersionConsts").ASSOCIATED_MESSAGE_SUBPROTOCOL_VERSION);x!=null&&(x.version==null||x.version<d("MAWParseSubprotocolVersionConsts").XMA_HEADER_SUBPROTOCOL_VERSION)&&d("WALogger").WARN(r(),d("MAWParseSubprotocolVersionConsts").XMA_HEADER_SUBPROTOCOL_VERSION);w!=null&&(w.version==null||w.version<d("MAWParseSubprotocolVersionConsts").XMA_FAVICON_SUBPROTOCOL_VERSION)&&d("WALogger").WARN(q(),d("MAWParseSubprotocolVersionConsts").XMA_FAVICON_SUBPROTOCOL_VERSION);G.every(function(a){(a.version==null||a.version<d("MAWParseSubprotocolVersionConsts").XMA_PREVIEW_SUBPROTOCOL_VERSION)&&d("WALogger").WARN(p(),d("MAWParseSubprotocolVersionConsts").XMA_PREVIEW_SUBPROTOCOL_VERSION)});f=f.targetExpiringAtSec!=null?d("WATimeUtils").castLongIntToUnixTime(f.targetExpiringAtSec):void 0;var N=n!=null&&H!=null?[d("WAStanzaUtils").toStanzaId(H),g.id.externalId]:[g.id.externalId,void 0],O=N[0];N=N[1];var P=[];if(G!=null)for(var Q=0;Q<G.length;Q++){var R,S=u(G[Q],g.ts);S!=null&&!((i===d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_EXTERNAL_LINK_SHARE||i===d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_FEED_SHARE)&&S.mediaType===d("WAMedia").MEDIA_TYPE.IMAGE&&((R=S.validatedImageInfo)==null?void 0:R.height)===1&&((R=S.validatedImageInfo)==null?void 0:R.width)===1)&&P.push(S)}R=u(x,g.ts);S=u(w,g.ts);G=(Q=d("WAParseConsumerMessageProtocol").parsedQuotedConsumerMessage(h))!=null?Q:void 0;x=babelHelpers["extends"]({deleteTs:b,ephemeralSetting:l,expirationTs:j,id:babelHelpers["extends"]({},g.id,{externalId:O}),quote:G,reportingMeta:m,type:d("MAWMsgType").MSG_TYPE.XMA},g);w=v.map(function(a){a.actionContentBlob;a=babelHelpers.objectWithoutPropertiesLoose(a,["actionContentBlob"]);return a});Q=w.slice(1);i===d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_GAMING_CUSTOM_UPDATE&&v.length===1&&(Q=w);j={author:g.id.author,contentRef:t,ctas:Q,defaultCTA:w[0],externalId:O,faviconMediaId:(b=S==null?void 0:S.plaintextHash)!=null?b:void 0,headerMediaId:(l=R==null?void 0:R.plaintextHash)!=null?l:void 0,headerTitle:y,isTombstoned:f!=null?d("WATimeUtils").unixTime()>f:!1,maxSubtitleNumOfLines:z,maxTitleNumOfLines:A,mentionedJids:B.map(d("WAJids").validateUserJid).filter(Boolean),overlayDescription:D,overlayIconGlyph:E,overlayTitle:F,previewMediaIds:P.length>0?P.map(function(a){return a.plaintextHash}):void 0,sentWithMessage:C,subtitleText:I,targetExpiringAtSec:f,targetId:J,targetType:i,targetUsername:K,threadJid:e,titleText:L,xmaLayoutType:M};var T;if(n!=null&&H==null)throw c("err")("XMA associatedMessage cannot be received without sentWithMessageId field");n!=null&&N!=null&&(T=ba(e,n,g,a,h));v=(m=(G=T)==null?void 0:G.unstoredMedia)!=null?m:null;t=aa.has(i);if(v!=null&&!t){Q=d("MAWXMALoggingUtils").getXmaTargetTypeStringFromEnum(i);d("MAWODSProxy").odsBumpEntityKey({entity:d("WAOdsEnums").Entity.MAW_XMA_PROTOCOL_PARSING,key:"assoc_msg_media_"+((w=Q)!=null?w:"unknown")});throw c("err")("XMA associated msg cannot have additioinal dbMedia")}y=(l=(b=T)==null?void 0:b.unstoredMsg)!=null?l:null;N!=null&&y!=null&&(d("WALogger").DEV(o(),O,N),y.id=babelHelpers["extends"]({},y.id,{externalId:N}),x.id=babelHelpers["extends"]({},y.id,{externalId:O}),j.externalId=O);if(t&&v!=null&&((y==null?void 0:y.type)==="Gif"||(y==null?void 0:y.type)==="Sticker"))return{contentTypeForLogging:"extendedContentMessage",unstoredMedia:null,unstoredMsg:x,unstoredQuotedMedia:null,unstoredXMA:{unstoredAssociatedMedia:v!=null?v:void 0,unstoredAssociatedMsg:y!=null?y:void 0,unstoredFavicon:S,unstoredHeaderMedia:R,unstoredPreviews:P.length>0?P:void 0,xma:j},xmaTargetTypeForLogging:i};if(y!=null&&y.type!=="Text")throw c("err")('XMA associated msg cannot have type different from "Text". Received type: '+y.type);return{contentTypeForLogging:"extendedContentMessage",unstoredMedia:null,unstoredMsg:x,unstoredQuotedMedia:null,unstoredXMA:{unstoredAssociatedMedia:void 0,unstoredAssociatedMsg:y!=null?y:void 0,unstoredFavicon:S,unstoredHeaderMedia:R,unstoredPreviews:P.length>0?P:void 0,xma:j},xmaTargetTypeForLogging:i}}function b(a){var b=a.ctas,d=a.targetType;if(d==null)throw c("err")("extendedContentMessage does not have a targetType");var e=!0;b.forEach(function(a){a.actionContentBlob;a=babelHelpers.objectWithoutPropertiesLoose(a,["actionContentBlob"]);e=e&&Y(a,d)});return e}function ja(a){var b=a.ebRestore,c=a.hasActionUrl,e=a.hasNativeUrl,f=a.isActionUrlValid,g=a.isNativeUrlValid;a=a.targetType;!g&&!f?d("WALogger").ERROR(n(),b!=null&&b?"[labyrinth_web]":"[S410301][transport]",a,e,c):g&&!f?d("WALogger").ERROR(m(),b!=null&&b?"[labyrinth_web]":"[S410301][transport]",a,e,c):f&&!g&&d("WALogger").ERROR(l(),b!=null&&b?"[labyrinth_web]":"[S410301][transport]",a,e,c)}function Y(a,b,c){var d=a.nativeUrl;a=a.actionUrl;var e=Z(d,b,c),f=Z(a,b,c);ja({ebRestore:c,hasActionUrl:a!=null,hasNativeUrl:d!=null,isActionUrlValid:f,isNativeUrlValid:e,targetType:b});return e&&f}function ka(a){if(!c("gkx")("1564"))return null;switch(a){case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_LOCATION_SHARING:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_LOCATION_SHARING_V2:return"locationMessage";case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_CONTACT:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_AI_CONTACT:return"contactShareMessage";case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_STORY_MENTION:return"storyMentionMessage";default:return null}}function Z(a,b,c,e){e===void 0&&(e=!1);if(a==null)return!0;if(oa(a,b)===!1){c!=null&&c&&!e&&d("WALogger").ERROR(k());return!1}if(!pa(a)){c!=null&&c&&!e&&d("WALogger").ERROR(j());return!1}return!0}function $(a){return a.startsWith(A)||a.startsWith(B)||a.startsWith(C)||a.startsWith(D)||a.startsWith(E)}function la(a){return a.startsWith(O)||a.startsWith(P)||a.startsWith(Q)||a.startsWith(R)||a.startsWith(S)||a.startsWith(T)}function ma(a){return a.startsWith(I)||a.startsWith(J)||a.startsWith(K)||a.startsWith(L)||a.startsWith(M)}function na(a){return a.startsWith(U)||a.startsWith(ca)||a.startsWith(da)||a.startsWith(ea)||a.startsWith(fa)}function oa(a,b){if(a==null)return!0;switch(b){case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_PHOTO_MENTION:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_PHOTO_SHARE:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_VIDEO_SHARE:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_PHOTO_HIGHLIGHT_SHARE:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_VIDEO_HIGHLIGHT_SHARE:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_REPLY:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_HIGHLIGHT_REPLY:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_REACTION:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_HIGHLIGHT_REACTION:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_VIDEO_MENTION:return a.startsWith(v);case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_CLIPS_SHARE:return a.startsWith(w);case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_IGTV_SHARE:return a.startsWith(x);case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_SHOP_SHARE:return a.startsWith(y);case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_SINGLE_IMAGE_POST_SHARE:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_MULTIPOST_SHARE:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_SINGLE_VIDEO_POST_SHARE:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_PROFILE_SHARE:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_IG_MEDIA_SHARE:return a.startsWith(z);case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_STORY_REPLY:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_STORY_SHARE:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_PRODUCER_STORY_REPLY:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_STORY_MENTION:return a.startsWith(G)||a.startsWith(F)||$(a);case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_GAMING_CUSTOM_UPDATE:return a.startsWith(H);case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_FEED_POST_PRIVATE_REPLY:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_FEED_SHARE:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_SHORT:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_FEED_VIDEO_SHARE:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_HIGHLIGHTS_TAB_FRIEND_UPDATES_REPLY:return(ma(a)||a.startsWith(N))&&!la(a);case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_LOCATION_SHARING:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_LOCATION_SHARING_V2:return a.startsWith(W);case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_HIGHLIGHTS_TAB_LOCAL_EVENT_REPLY:return na(a);case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_EVENT:return na(a)||$(a);case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_CONTACT:return ma(a)||a.startsWith(ga);case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_EXTERNAL_LINK:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_EXTERNAL_LINK_SHARE:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_AUDIO_CALL:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_VIDEO_CALL:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_AUDIO_CALL:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_VIDEO_CALL:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_GROUP_AUDIO_CALL:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_GROUP_VIDEO_CALL:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_GROUP_AUDIO_CALL:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_GROUP_VIDEO_CALL:if(a.includes(ha)&&(!a.startsWith(X)&&!a.startsWith(ia))){b=a.indexOf("://");b===-1&&d("WALogger").ERROR(i());return!1}break;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_RECEIVER_FETCH:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.DATACLASS_SENDER_COPY:return!0;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_P2P_PAYMENT:return a.startsWith(V)}return!0}function pa(a){for(var b=0;b<a.length;b++){var c=a.charAt(b);switch(c){case"\u202c":case"\u202d":case"\u202e":d("WALogger").ERROR(h());return!1;default:break}}return!0}g.kIGStoryCtaPrefix=v;g.kIGClipsCtaPrefix=w;g.kIGTVCtaPrefix=x;g.kIGShopCtaPrefix=y;g.kIGDefaultCtaPrefix=z;g.kFBStoryCtaPrefix=G;g.kFBGamingCustomUpdateCtaPrefix=H;g.kFBDefaultWWWCtaPrefix=I;g.kFBEventCtaPrefix=U;g.kMSGP2PPaymentUrlPrefix=V;g.kMessengerLocationSharePrefix=W;g.kHttpPrefix=X;g.parseXMAProtocol=a;g.isXMAContentValid=b;g.isValidCTA=Y;g.isURLValid=Z}),98);
__d("WAMapContentTypeToFbType",[],(function(a,b,c,d,e,f){"use strict";function a(a){switch(a){case"text":return"text";case"media":return"media";case"reaction":return"reaction";case"live_location":case"pay":case"product_list":case"poll_creation":case"poll_vote":case"scheduled_call":return"text";default:return"text"}}f.mapContentTypeToFbType=a}),66);
__d("WAProtocolQueue",["WAGlobals","WAJids","WALogger","WAMapContentTypeToFbType","WAPersistedQueue","err"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["Protocol Queue is already initialized"]);h=function(){return a};return a}var i=5e3,j=null;function a(a){if(j!=null){d("WALogger").WARN(h());return j}a=d("WAPersistedQueue").initPersistedQueue("stanzaQueue",a,{cacheSize:null,maxDelay:i});j=a;return j}function b(){if(!j)throw c("err")("Protocol queue not initialized");return j}function e(a){return{flush:function(){return a.commit()}}}function f(a){return a.map(function(a){return a.type==="message"?k(a):babelHelpers["extends"]({},a)})}function k(a){switch(a.subtype){case"unavailable":var b=a,c=d("WAJids").extractUserJid(b.from);c={id:{author:d("WAGlobals").getMyUserJid()===c?"@me":c,chat:b.jid,externalId:b.stanzaId},ts:b.serverTs,type:"UnavailableMsg"};return{incomingType:"wa",jid:b.jid,message:{decrypted:c,details:{count:null,externalId:b.stanzaId,folder:b.fbFolderId,from:d("WAJids").switchOnMsgrChatJidType(b.jid,{group:function(a){return{author:b.from,chat:a,groupJid:a,type:"group"}},user:function(a){return{author:b.from,chat:a,deviceJid:b.from,type:"device"}}}),hideDecryptionFailure:!1,isInstamadillo:!1,offline:b.offline,recipient:b.recipient,reportingMeta:b.reportingMeta,retryCount:b.retryCount,ts:b.serverTs,type:d("WAMapContentTypeToFbType").mapContentTypeToFbType(b.contentType)}},priority:b.priority,stanzaId:b.stanzaId,stanzaQueueId:a.stanzaQueueId,type:b.type};case"armadillo":var e=a;c=d("WAJids").extractUserJid(e.from);c={device:{id:d("WAJids").extractDeviceId(e.from),identity:e.remoteIdentity},folder:e.fbFolderId,id:{author:d("WAGlobals").getMyUserJid()===c?"@me":c,chat:e.jid,externalId:e.stanzaId},msg:e.message,recipientsCount:null,reportingMeta:e.reportingMeta,ts:e.serverTs,type:"IncomingMsg"};return{incomingType:a.incomingType,jid:e.jid,message:{decrypted:c,details:{count:null,externalId:e.stanzaId,folder:e.fbFolderId,from:d("WAJids").switchOnMsgrChatJidType(e.jid,{group:function(a){return{author:e.from,chat:a,groupJid:a,type:"group"}},user:function(a){return{author:e.from,chat:a,deviceJid:e.from,type:"device"}}}),hideDecryptionFailure:!1,isInstamadillo:!1,offline:e.offline,recipient:e.recipient,reportingMeta:e.reportingMeta,retryCount:e.retryCount,ts:e.serverTs,type:d("WAMapContentTypeToFbType").mapContentTypeToFbType(e.contentType)}},priority:e.priority,stanzaId:e.stanzaId,stanzaQueueId:a.stanzaQueueId,type:e.type,ebTimestampMs:e.ebTimestampMs};case"instamadillo":var f=a;c=d("WAJids").extractUserJid(f.from);c={device:{id:d("WAJids").extractDeviceId(f.from),identity:f.remoteIdentity},folder:f.fbFolderId,id:{author:d("WAGlobals").getMyUserJid()===c?"@me":c,chat:f.jid,externalId:f.stanzaId},msg:f.message,recipientsCount:null,reportingMeta:f.reportingMeta,ts:f.serverTs,type:"InstamadilloMsg"};return{incomingType:"wa",jid:f.jid,message:{decrypted:c,details:{count:null,externalId:f.stanzaId,folder:f.fbFolderId,from:d("WAJids").switchOnMsgrChatJidType(f.jid,{group:function(a){return{author:f.from,chat:a,groupJid:a,type:"group"}},user:function(a){return{author:f.from,chat:a,deviceJid:f.from,type:"device"}}}),hideDecryptionFailure:!1,isInstamadillo:!0,offline:f.offline,recipient:f.recipient,reportingMeta:f.reportingMeta,retryCount:f.retryCount,ts:f.serverTs,type:d("WAMapContentTypeToFbType").mapContentTypeToFbType(f.contentType)}},priority:f.priority,stanzaId:f.stanzaId,stanzaQueueId:a.stanzaQueueId,type:f.type};case"ciphertext":var g=a;c=d("WAJids").extractUserJid(g.from);c={createPlaceholder:g.contentType!=="reaction",id:{author:d("WAGlobals").getMyUserJid()===c?"@me":c,chat:g.jid,externalId:g.stanzaId},ts:g.serverTs,type:"IncomingCiphertextMsg"};return{incomingType:"wa",jid:g.jid,message:{decrypted:c,details:{count:null,type:d("WAMapContentTypeToFbType").mapContentTypeToFbType(g.contentType),externalId:g.stanzaId,folder:g.fbFolderId,from:d("WAJids").switchOnMsgrChatJidType(g.jid,{group:function(a){return{author:g.from,chat:a,groupJid:a,type:"group"}},user:function(a){return{author:g.from,chat:a,deviceJid:g.from,type:"device"}}}),hideDecryptionFailure:!1,isInstamadillo:!1,offline:g.offline,recipient:g.recipient,reportingMeta:g.reportingMeta,retryCount:g.retryCount,ts:g.serverTs}},priority:g.priority,stanzaId:g.stanzaId,stanzaQueueId:a.stanzaQueueId,type:g.type};default:a;return babelHelpers["extends"]({},a)}}var l=9,m=5,n=2;function o(a){return a}function p(a){return a}function q(a){return a}g.initProtocolQueue=a;g.protocolQueue=b;g.protocolQueueFlushable=e;g.mapProtocolEntriesV2toV1=f;g.mapProcolQueueMessageV2toV1=k;g.WAProtocolQueuePriorityHigh=l;g.WAProtocolQueuePriorityLow=m;g.WAProtocolQueuePriorityBackground=n;g.appdataApplicationProtocol=o;g.extractSubProtocolFromAppdataProtocol=p;g.numberToStanzaQueueId=q}),98);
__d("MAWHandleEBRestoreWithHIM",["EBAPIWorkerCheck","EchoMessage","EncryptedBackupsUploadEntity","FBLogger","MAWAckLevel","MAWAsMessageApplication","MAWBulkEditMsgsTxns","MAWConvertXMAGatingTypeToExtendedContentOverlayIconGlyph","MAWConvertXMALayoutTypeToExtendedContentXMLLayoutType","MAWConvertXMATargetTypeToExtendedContentTargetType","MAWFrontendMediaUtils","MAWHandleEchoMediaMsgsRestoreV2","MAWHandleEchoMsgsRestoreApiUtils","MAWHandleEchoReactionsRestore","MAWHandleEchoXMARestoreV2","MAWJids","MAWMsgType","MAWParseXMAProtocol","MAWUnsafeCoerce","MAWUserJidWrapper","MessageBackupSupplementalKeyGenerator","WAGlobals","WAHashUtils","WAJids","WALogger","WALongInt","WAProtocolQueue","WASortedLists","WAStanzaUtils","WATimeUtils","err"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] Failed to create reaction supplemental key"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] Exception when trying to convert echo message to protobuf: ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] Failed to convert Echo Message to UnstoredDbMsg"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] One of the mandatory fields is null for Echo message"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] Failed to decode echo message: ",""]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] threadJid field is not present in the restoredMsg. Echo message origin ",""]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] xmaTargetType field is not present in the echo doc. Echo message origin ",""]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] Unable to construct downloadableThumbnail from previewMediaData: ",", msg id: ",""]);o=function(){return a};return a}function p(a,b){if(a==="@me"||a==="@system")return b;else return a}function q(a,b,c,e,f){var g=[];if(a.reactionXOfflineThreadingIds!=null)for(var h=0;h<a.reactionXOfflineThreadingIds.length;++h){var i=d("MAWHandleEchoReactionsRestore").getReactionsForReactionStore(b,c,e,null,f,a);i=i.map(function(a){return{decodedMsg:{unstoredDbMedia:void 0,unstoredDbMsg:void 0,unstoredDbReaction:a,unstoredDbReceiverFetchInfo:void 0},stanza:t(a.externalId,a.ts,p(a.author,c),b,"reaction")}});g.push.apply(g,i)}return g}function r(a,b,c,e){return e?e.map(function(e){var f=e.messageId;return f!=null?{decodedMsg:{unstoredDbEditActionMsg:{ack:d("MAWAckLevel").ACK.sent,author:c,editMsgContent:{content:e.text},externalId:d("WAStanzaUtils").toStanzaId(f),originalMsgExternalId:a,serverTs:d("WATimeUtils").castToUnixTime(e.timestamp),ts:d("WATimeUtils").castToUnixTime(e.timestamp),type:d("MAWMsgType").MSG_TYPE.EDIT_ACTION},unstoredDbMedia:void 0,unstoredDbMsg:void 0,unstoredDbReaction:void 0},stanza:t(d("WAStanzaUtils").toStanzaId(f),d("WATimeUtils").castToUnixTime(e.timestamp),c,b,"text")}:null}).filter(Boolean):[]}function a(a,b){return a.map(x).filter(Boolean).map(function(a){return s(a,b)})}function s(a,b){var e,f=d("MAWUserJidWrapper").getMyUserJid(),g=a.from,h=d("MAWHandleEchoMsgsRestoreApiUtils").getDbMsgTypeFromEchoMessage(a);if(g==null||h==null)return[];h=a.xOfflineThreadingId;if(h==null){c("FBLogger")("labyrinth_web").warn("xOfflineThreadingId is null for Echo message");return[]}h=d("WAStanzaUtils").toStanzaId(h);e=d("WATimeUtils").castToUnixTime(((e=a.authoritativeTimestampMs)!=null?e:a.sortOrderMs)/1e3);g=d("MAWJids").toUserJid(g.localKey);var i=w(a,b,f,h,"echo_content");if(i==null)return[];f=q(a,b,f,h,g);var j=a.contentType===d("EchoMessage").EchoMessageContentType.TEXT||a.contentType===d("EchoMessage").EchoMessageContentType.PLACEHOLDER?"text":"media";a=r(h,b,g,a.editHistory);return[{decodedMsg:i,stanza:t(h,e,g,b,j)}].concat(f,a)}function t(a,b,c,e,f){var g={icdc:null,metadata:null,protobuf:new Uint8Array(0),subprotocol:new Uint8Array(0),subprotocolType:"consumerMessage",type:"subprotocol",version:"v3"};g={device:{id:d("WAJids").DEFAULT_DEVICE_ID,identity:null},folder:null,id:{author:c,chat:e,externalId:a},msg:g,recipientsCount:null,reportingMeta:null,ts:b,type:"IncomingMsg"};return{incomingType:"ebrestore",jid:e,message:{decrypted:g,details:{count:0,externalId:a,folder:void 0,from:d("WAJids").switchOnMsgrChatJidType(e,{group:function(a){return{author:d("WAJids").defaultDeviceJidForUser(c),chat:a,groupJid:a,type:"group"}},user:function(a){return{author:d("WAJids").defaultDeviceJidForUser(c),chat:a,deviceJid:d("WAJids").defaultDeviceJidForUser(c),type:"device"}}}),hideDecryptionFailure:!0,isInstamadillo:!1,offline:null,recipient:null,reportingMeta:null,retryCount:0,ts:b,type:f}},priority:d("WAProtocolQueue").WAProtocolQueuePriorityLow,stanzaId:a,stanzaQueueId:d("MAWUnsafeCoerce").unsafeCoerce(-1),type:"message"}}function u(a){if(a.mediaData==null)return null;var b=a.previewMediaData,c=a.sortOrderMs,e=a.xOfflineThreadingId;a=a.mediaData;var f=a.attachmentObjectId,g=a.backupEntFbid,h=a.directPath,i=a.encryptedHash,j=a.filename,k=a.height,l=a.mediaContentType,m=a.mediaKey,n=a.mediaKeyTimestamp,p=a.mediaPlayableDuration,q=a.plaintextHash,r=a.previewContentHeight,s=a.previewContentWidth,t=a.size;a=a.width;l=d("MAWFrontendMediaUtils").getMediaTypeAndServerMediaTypeFromBlob(l||"");var u=l.mediaType;l=l.serverMediaType;var v=d("WAHashUtils").stringToPlaintextHash(d("MAWHandleEchoMediaMsgsRestoreV2").getBase64WithoutPadding(q)),w=null;if(b!=null)try{w=d("MAWHandleEchoMediaMsgsRestoreV2").constructRawDownloadableThumbnail(b)}catch(a){d("WALogger").WARN(o(),a,e)}e=d("MAWHandleEchoMediaMsgsRestoreV2").constructMediaEntry(v,(b=i)!=null?b:"",m,h,n,l,j,g,f,w,t);v=d("MAWHandleEchoMediaMsgsRestoreV2").getMediaInfo({filename:j,height:k,mediaPlayableDuration:p,mediaType:u,previewContentHeight:r,previewContentWidth:s,width:a});i=v.validatedAudioInfo;b=v.validatedDocumentFileInfo;m=v.validatedImageInfo;h=v.validatedVideoInfo;return{mediaEntry:e,mediaType:u,msgIds:d("WASortedLists").asSortedSet(new Set()),plaintextHash:d("WAHashUtils").stringToPlaintextHash(q),size:t||0,ts:n!=null?d("WATimeUtils").castToUnixTime(n):d("WATimeUtils").castMilliSecondsToUnixTime(c),validatedAudioInfo:i,validatedDocumentFileInfo:b,validatedImageInfo:m,validatedVideoInfo:h}}function v(a,b){if(a.xmaData==null||a.from==null||a.xOfflineThreadingId==null)return null;var c=a.from,e=a.serializationOrigin,f=a.xmaData;a=a.xOfflineThreadingId;if(f.xmaTargetType==null)return null;var g=f.xmaContentRef,h=f.xmaDefaultCTA,i=f.xmaGatingType,j=f.xmaHeaderSubtitle,k=f.xmaHeaderTitle,l=f.xmaIsTombstoned,o=f.xmaLayoutType,p=f.xmaMaxSubtitleNumLines,q=f.xmaMaxTitleNumLines,r=f.xmaSubtitleText,s=f.xmaTargetExpiry,t=f.xmaTargetId,u=f.xmaTargetType,v=f.xmaTargetUsername;f=f.xmaTitleText;if(u!=null)u=d("MAWConvertXMATargetTypeToExtendedContentTargetType").convertXMATargetTypeToExtendedContentTargetType(u);else{d("WALogger").ERROR(n(),e);return null}var w;h!=null&&(w=d("MAWHandleEchoXMARestoreV2").getDefaultCTA(h));if(w!=null&&!d("MAWParseXMAProtocol").isValidCTA(w,u,!0)){d("WALogger").ERROR(m(),e);return null}var x;i!=null&&(x=d("MAWConvertXMAGatingTypeToExtendedContentOverlayIconGlyph").convertXMAGatingTypeToExtendedContentOverlayIconGlyph(i));var y;s!=null&&(y=d("WATimeUtils").castToUnixTime(s));var z;o!=null&&(z=d("MAWConvertXMALayoutTypeToExtendedContentXMLLayoutType").convertXMALayoutTypeToExtendedContentXMLLayoutType(o));return{unstoredDbXMA:{author:d("MAWJids").toUserJid(c.localKey),contentRef:g,ctas:[],defaultCTA:w,externalId:d("WAStanzaUtils").toStanzaId(a),headerTitle:k,isTombstoned:l,maxSubtitleNumOfLines:p,maxTitleNumOfLines:q,overlayDescription:j,overlayIconGlyph:x,overlayTitle:k,subtitleText:r,targetExpiringAtSec:y,targetId:t,targetType:u,targetUsername:v,threadJid:b,titleText:f,xmaLayoutType:z}}}function w(a,b,c,e,f){c=d("MAWHandleEchoMsgsRestoreApiUtils").getUnstoredDbMessageFromEchoMessage(a,b,c,e,void 0,f);if(c==null)return null;c.originalTs;c.threadJid;c.unsendMsgContentDeleteTs;e=babelHelpers.objectWithoutPropertiesLoose(c,["originalTs","threadJid","unsendMsgContentDeleteTs"]);e.sortOrderMs=a.sortOrderMs;f={unstoredDbMedia:u(a),unstoredDbMsg:e,unstoredDbReaction:void 0,unstoredDbReceiverFetchInfo:void 0};c=v(a,b);return c==null?f:babelHelpers["extends"]({},f,{unstoredXMA:c})}function x(a){try{return d("EchoMessage").decodeEchoMessage(a)}catch(a){d("WALogger").ERROR(l(),a);return null}}function b(a,b){if(!d("EBAPIWorkerCheck").runningInWorker)throw c("err")("convertEchoMessagesToEBProtobufs should be called from the worker thread");return a.map(x).filter(Boolean).map(function(a){return y(a,b)}).filter(Boolean)}function y(a,b){var c=d("WAGlobals").getMyUserJid(),e=a.from,f=a.sortOrderMs,g=a.xOfflineThreadingId,l=d("WATimeUtils").castToMillisTime(f);if(g==null||e==null){d("WALogger").ERROR(k());return null}var m=d("MAWJids").toUserJid(e.localKey),n=d("WAStanzaUtils").toStanzaId(g);f=w(a,b,c,n,"first_edit_content");if((f==null?void 0:f.unstoredDbMsg)==null){d("WALogger").ERROR(j());return null}var o=f.unstoredDbMedia,p=f.unstoredDbMsg;e=f.unstoredXMA;var s={author:m,chat:b,externalId:n},t;(e==null?void 0:e.unstoredDbXMA)!=null&&(t={associatedMessage:null,defaultPreview:null,favicon:null,header:null,previews:null,xma:e.unstoredDbXMA});var u={frankingKey:null,frankingTag:null,frankingVersion:null,reportingContent:null,reportingTag:null};function v(){try{return{decryptedProtobuf:d("EncryptedBackupsUploadEntity").getEbBackupMessageBytesBuffer(d("EncryptedBackupsUploadEntity").encodeBackupMessage({messageApplication:d("MAWAsMessageApplication").encodeMessageApplication(p,o,null,t,b),msgId:s,reportingMeta:u,sortOrderMs:l})),protobufTimestampMS:l}}catch(a){d("WALogger").WARN(i(),a);return null}}g=v();if(g==null)return null;var x=new Map();r(n,b,m,a.editHistory).map(function(a){return(a=a.decodedMsg)==null?void 0:a.unstoredDbEditActionMsg}).filter(Boolean).filter(function(a){return a.externalId!==a.originalMsgExternalId}).filter(Boolean).map(function(a){return d("MAWBulkEditMsgsTxns").getMessageHistory(a,b)}).forEach(function(a,c){var e=a.editExternalId,f=a.editTs;e=((e=e)!=null?e:c)+":"+f.toString();x.set(d("MessageBackupSupplementalKeyGenerator").createMessageSupplementalKey(d("MessageBackupSupplementalKeyGenerator").SupplementalKeyPrefix.EDIT,e),{decryptedProtobuf:d("EncryptedBackupsUploadEntity").getEbBackupMessageBytesBuffer(d("EncryptedBackupsUploadEntity").encodeBackupMessage({messageApplication:d("MAWAsMessageApplication").encodeEditMessageApplication(a),msgId:{author:m,chat:b,externalId:n},reportingMeta:u,sortOrderMs:d("WATimeUtils").castUnixTimeToMillisTime(a.editTs)})),protobufTimestampMS:d("WATimeUtils").castUnixTimeToMillisTime(f)})});q(a,b,c,n,m).map(function(a){return(a=a.decodedMsg)==null?void 0:a.unstoredDbReaction}).filter(Boolean).forEach(function(a){var c=a.author,e=a.senderTimestampMs,f=a.ts;e=e!=null?d("WATimeUtils").castToMillisTime(d("WALongInt").numberOrThrowIfTooLarge(e)):d("WATimeUtils").castUnixTimeToMillisTime(f);f=d("MessageBackupSupplementalKeyGenerator").createReactionSupplementalKey(c);if(f==null){d("WALogger").ERROR(h());return}x.set(f,{decryptedProtobuf:d("EncryptedBackupsUploadEntity").getEbBackupMessageBytesBuffer(d("EncryptedBackupsUploadEntity").encodeBackupMessage({messageApplication:d("MAWAsMessageApplication").encodeReactionMessageApplication(a),msgId:{author:m,chat:b,externalId:n},reportingMeta:u,sortOrderMs:e})),protobufTimestampMS:e})});return{otid:n,supplementalProtobufs:x,toplevelProtobuf:g}}g.convertEchoMessages=a;g.safeDecodeEchoMessage=x;g.convertEchoMessagesToEBProtobufs=b}),98);
__d("WAAckLevel",[],(function(a,b,c,d,e,f){"use strict";a={SENDER_BACKFILL_SENT:-7,INACTIVE_RECEIVED:-6,CONTENT_UNUPLOADABLE:-5,CONTENT_TOO_BIG:-4,CONTENT_GONE:-3,EXPIRED:-2,FAILED:-1,CLOCK:0,SENT:1,RECEIVED:2,READ:3,PLAYED:4};f.ACK=a}),66);